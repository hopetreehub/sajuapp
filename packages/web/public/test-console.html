<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •í†µ ì‚¬ì£¼í•™ ê³„ì‚°ê¸° í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: 'Arial', sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .test-section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .test-section h2 { color: #555; margin-bottom: 15px; }
        .result-box { background: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace; white-space: pre-wrap; }
        .button { background: #007bff; color: white; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .button:hover { background: #0056b3; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”® ì •í†µ ì‚¬ì£¼í•™ ê³„ì‚°ê¸° ê²€ì¦ í…ŒìŠ¤íŠ¸</h1>

        <div class="test-section">
            <h2>ğŸ“‹ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ</h2>
            <p><strong>ë°•ì¤€ìˆ˜:</strong> ì‹ í•´ê¸°í•´ë³‘ì˜¤ê²½ì¸ (1971ë…„ìƒ)</p>
            <p><strong>ì •ë¹„ì œ:</strong> ë³‘ì§„ì •ìœ ì‹ ë¯¸ê³„ì‚¬ (1976ë…„ìƒ)</p>
        </div>

        <div class="test-section">
            <h2>ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</h2>
            <button class="button" onclick="runAuthenticTest()">ì •í†µ ì‚¬ì£¼í•™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <button class="button" onclick="runLifetimeFortuneTest()">ì¸ìƒìš´ì„¸ API í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <button class="button" onclick="clearResults()">ê²°ê³¼ ì§€ìš°ê¸°</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
            <div id="testResults" class="result-box">
í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.

ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12)ë¥¼ ì—´ê³  Console íƒ­ì„ í™•ì¸í•˜ë©´ ë” ìì„¸í•œ ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ ìˆ˜ë™ í…ŒìŠ¤íŠ¸</h2>
            <p>ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë“¤ì„ ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
            <div class="result-box">
// ì •í†µ ì‚¬ì£¼í•™ ê³„ì‚°ê¸° í…ŒìŠ¤íŠ¸
AuthenticSajuCalculator.runTestCases();

// ë°•ì¤€ìˆ˜ ê°œë³„ í…ŒìŠ¤íŠ¸
const ë°•ì¤€ìˆ˜ì‚¬ì£¼ = AuthenticSajuCalculator.createParkJunSooTestCase();
const ë°•ì¤€ìˆ˜ê²°ê³¼ = AuthenticSajuCalculator.calculateAuthenticLifeChart(ë°•ì¤€ìˆ˜ì‚¬ì£¼, 1971);
console.log('ë°•ì¤€ìˆ˜ ê²°ê³¼:', ë°•ì¤€ìˆ˜ê²°ê³¼);

// ì •ë¹„ì œ ê°œë³„ í…ŒìŠ¤íŠ¸
const ì •ë¹„ì œì‚¬ì£¼ = AuthenticSajuCalculator.createJeongBiJeTestCase();
const ì •ë¹„ì œê²°ê³¼ = AuthenticSajuCalculator.calculateAuthenticLifeChart(ì •ë¹„ì œì‚¬ì£¼, 1976);
console.log('ì •ë¹„ì œ ê²°ê³¼:', ì •ë¹„ì œê²°ê³¼);

// ì¸ìƒìš´ì„¸ API í…ŒìŠ¤íŠ¸
fetchLifetimeFortune({
  year: 1971, month: 11, day: 15, hour: 6,
  useAuthenticCalculator: true
}).then(result => console.log('ë°•ì¤€ìˆ˜ API ê²°ê³¼:', result));
            </div>
        </div>
    </div>

    <script type="module">
        // ES6 ëª¨ë“ˆ ë°©ì‹ìœ¼ë¡œ import
        import { AuthenticSajuCalculator } from '/src/utils/authenticSajuCalculator.ts';
        import { fetchLifetimeFortune } from '/src/services/lifetimeFortuneApi.ts';

        // ì „ì—­ ë³€ìˆ˜ë¡œ ë“±ë¡
        window.AuthenticSajuCalculator = AuthenticSajuCalculator;
        window.fetchLifetimeFortune = fetchLifetimeFortune;

        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        window.runAuthenticTest = async function() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = 'ğŸ”„ ì •í†µ ì‚¬ì£¼í•™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘...\n';

            try {
                console.log('ğŸ§ª ì •í†µ ì‚¬ì£¼í•™ í…ŒìŠ¤íŠ¸ ì‹œì‘');

                // í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                AuthenticSajuCalculator.runTestCases();

                // ë°•ì¤€ìˆ˜ í…ŒìŠ¤íŠ¸
                const ë°•ì¤€ìˆ˜ì‚¬ì£¼ = AuthenticSajuCalculator.createParkJunSooTestCase();
                const ë°•ì¤€ìˆ˜ê²°ê³¼ = AuthenticSajuCalculator.calculateAuthenticLifeChart(ë°•ì¤€ìˆ˜ì‚¬ì£¼, 1971);

                // ì •ë¹„ì œ í…ŒìŠ¤íŠ¸
                const ì •ë¹„ì œì‚¬ì£¼ = AuthenticSajuCalculator.createJeongBiJeTestCase();
                const ì •ë¹„ì œê²°ê³¼ = AuthenticSajuCalculator.calculateAuthenticLifeChart(ì •ë¹„ì œì‚¬ì£¼, 1976);

                // ê²°ê³¼ í‘œì‹œ
                let resultText = 'âœ… ì •í†µ ì‚¬ì£¼í•™ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n\n';

                resultText += 'ğŸ‘¤ ë°•ì¤€ìˆ˜ (ì‹ í•´ê¸°í•´ë³‘ì˜¤ê²½ì¸)\n';
                resultText += `   ì‚¬ì£¼: ${ë°•ì¤€ìˆ˜ê²°ê³¼.ê°œì¸ì •ë³´.ì‚¬ì£¼}\n`;
                resultText += `   ê²©êµ­: ${ë°•ì¤€ìˆ˜ê²°ê³¼.ê°œì¸ì •ë³´.ê²©êµ­.ê²©êµ­ìœ í˜•}\n`;
                resultText += `   ì¼ê°„: ${ë°•ì¤€ìˆ˜ê²°ê³¼.ê°œì¸ì •ë³´.ê²©êµ­.ì¼ê°„}(${ë°•ì¤€ìˆ˜ê²°ê³¼.ê°œì¸ì •ë³´.ê²©êµ­.ì¼ê°„ì˜¤í–‰})\n`;
                resultText += `   ìš©ì‹ : [${ë°•ì¤€ìˆ˜ê²°ê³¼.ê°œì¸ì •ë³´.ìš©ì‹ .ìš©ì‹ .join(', ')}]\n`;
                resultText += `   í‰ê· ì ìˆ˜: ${ë°•ì¤€ìˆ˜ê²°ê³¼.í†µê³„.í‰ê· ì ìˆ˜}ì \n`;
                resultText += `   ìµœê³ ì : ${ë°•ì¤€ìˆ˜ê²°ê³¼.í†µê³„.ìµœê³ ì ë…„ë„.ë‚˜ì´}ì„¸ (${ë°•ì¤€ìˆ˜ê²°ê³¼.í†µê³„.ìµœê³ ì ë…„ë„.ì ìˆ˜}ì )\n\n`;

                resultText += 'ğŸ‘¤ ì •ë¹„ì œ (ë³‘ì§„ì •ìœ ì‹ ë¯¸ê³„ì‚¬)\n';
                resultText += `   ì‚¬ì£¼: ${ì •ë¹„ì œê²°ê³¼.ê°œì¸ì •ë³´.ì‚¬ì£¼}\n`;
                resultText += `   ê²©êµ­: ${ì •ë¹„ì œê²°ê³¼.ê°œì¸ì •ë³´.ê²©êµ­.ê²©êµ­ìœ í˜•}\n`;
                resultText += `   ì¼ê°„: ${ì •ë¹„ì œê²°ê³¼.ê°œì¸ì •ë³´.ê²©êµ­.ì¼ê°„}(${ì •ë¹„ì œê²°ê³¼.ê°œì¸ì •ë³´.ê²©êµ­.ì¼ê°„ì˜¤í–‰})\n`;
                resultText += `   ìš©ì‹ : [${ì •ë¹„ì œê²°ê³¼.ê°œì¸ì •ë³´.ìš©ì‹ .ìš©ì‹ .join(', ')}]\n`;
                resultText += `   í‰ê· ì ìˆ˜: ${ì •ë¹„ì œê²°ê³¼.í†µê³„.í‰ê· ì ìˆ˜}ì \n`;
                resultText += `   ìµœê³ ì : ${ì •ë¹„ì œê²°ê³¼.í†µê³„.ìµœê³ ì ë…„ë„.ë‚˜ì´}ì„¸ (${ì •ë¹„ì œê²°ê³¼.í†µê³„.ìµœê³ ì ë…„ë„.ì ìˆ˜}ì )\n\n`;

                // ì°¨ì´ ë¶„ì„
                const í‰ê· ì°¨ì´ = Math.abs(ë°•ì¤€ìˆ˜ê²°ê³¼.í†µê³„.í‰ê· ì ìˆ˜ - ì •ë¹„ì œê²°ê³¼.í†µê³„.í‰ê· ì ìˆ˜);
                const ìš©ì‹ ì°¨ì´ = ë°•ì¤€ìˆ˜ê²°ê³¼.ê°œì¸ì •ë³´.ìš©ì‹ .ìš©ì‹ .join('') !== ì •ë¹„ì œê²°ê³¼.ê°œì¸ì •ë³´.ìš©ì‹ .ìš©ì‹ .join('');
                const ê²©êµ­ì°¨ì´ = ë°•ì¤€ìˆ˜ê²°ê³¼.ê°œì¸ì •ë³´.ê²©êµ­.ê²©êµ­ìœ í˜• !== ì •ë¹„ì œê²°ê³¼.ê°œì¸ì •ë³´.ê²©êµ­.ê²©êµ­ìœ í˜•;

                resultText += 'ğŸ“Š ì°¨ì´ ë¶„ì„\n';
                resultText += `   í‰ê· ì ìˆ˜ ì°¨ì´: ${í‰ê· ì°¨ì´}ì  ${í‰ê· ì°¨ì´ >= 10 ? 'âœ…' : 'âš ï¸'}\n`;
                resultText += `   ìš©ì‹  ì°¨ì´: ${ìš©ì‹ ì°¨ì´ ? 'âœ…' : 'âŒ'}\n`;
                resultText += `   ê²©êµ­ ì°¨ì´: ${ê²©êµ­ì°¨ì´ ? 'âœ…' : 'âŒ'}\n\n`;

                // ì—°ë ¹ëŒ€ë³„ ë¹„êµ
                resultText += 'ğŸ“ˆ ì—°ë ¹ëŒ€ë³„ ì ìˆ˜ ë¹„êµ\n';
                [20, 30, 40, 50, 60].forEach(age => {
                    const ë°•ì¤€ìˆ˜ì ìˆ˜ = ë°•ì¤€ìˆ˜ê²°ê³¼.ì—°ë„ë³„ì ìˆ˜[age]?.ì´ì  || 0;
                    const ì •ë¹„ì œì ìˆ˜ = ì •ë¹„ì œê²°ê³¼.ì—°ë„ë³„ì ìˆ˜[age]?.ì´ì  || 0;
                    const ì°¨ì´ = Math.abs(ë°•ì¤€ìˆ˜ì ìˆ˜ - ì •ë¹„ì œì ìˆ˜);
                    resultText += `   ${age}ì„¸: ë°•ì¤€ìˆ˜ ${ë°•ì¤€ìˆ˜ì ìˆ˜}ì , ì •ë¹„ì œ ${ì •ë¹„ì œì ìˆ˜}ì  (ì°¨ì´: ${ì°¨ì´}ì )\n`;
                });

                const ê²€ì¦ì„±ê³µ = í‰ê· ì°¨ì´ >= 10 && ìš©ì‹ ì°¨ì´ && ê²©êµ­ì°¨ì´;
                resultText += `\nğŸ¯ ìµœì¢… ê²€ì¦: ${ê²€ì¦ì„±ê³µ ? 'âœ… ì„±ê³µ' : 'âš ï¸ ë¶€ë¶„ì„±ê³µ'}`;

                resultsDiv.className = 'result-box ' + (ê²€ì¦ì„±ê³µ ? 'success' : 'warning');
                resultsDiv.textContent = resultText;

                // ì „ì—­ ë³€ìˆ˜ì— ê²°ê³¼ ì €ì¥
                window.testResults = { ë°•ì¤€ìˆ˜ê²°ê³¼, ì •ë¹„ì œê²°ê³¼ };

            } catch (error) {
                console.error('í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜:', error);
                resultsDiv.className = 'result-box error';
                resultsDiv.textContent = `âŒ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:\n${error.message}\n\nìì„¸í•œ ë‚´ìš©ì€ ë¸Œë¼ìš°ì € ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.`;
            }
        };

        window.runLifetimeFortuneTest = async function() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = 'ğŸ”„ ì¸ìƒìš´ì„¸ API í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘...\n';

            try {
                // ë°•ì¤€ìˆ˜ API í…ŒìŠ¤íŠ¸
                const ë°•ì¤€ìˆ˜APIê²°ê³¼ = await fetchLifetimeFortune({
                    year: 1971, month: 11, day: 15, hour: 6,
                    useAuthenticCalculator: true
                });

                // ì •ë¹„ì œ API í…ŒìŠ¤íŠ¸
                const ì •ë¹„ì œAPIê²°ê³¼ = await fetchLifetimeFortune({
                    year: 1976, month: 9, day: 23, hour: 10,
                    useAuthenticCalculator: true
                });

                let resultText = 'âœ… ì¸ìƒìš´ì„¸ API í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n\n';

                resultText += 'ğŸ‘¤ ë°•ì¤€ìˆ˜ API ê²°ê³¼\n';
                resultText += `   í‰ê· ì ìˆ˜: ${ë°•ì¤€ìˆ˜APIê²°ê³¼.data.analysis.averageScore}ì \n`;
                resultText += `   ìµœê³ ì : ${ë°•ì¤€ìˆ˜APIê²°ê³¼.data.analysis.bestYear.age}ì„¸ (${ë°•ì¤€ìˆ˜APIê²°ê³¼.data.analysis.bestYear.score}ì )\n`;
                resultText += `   ìµœì €ì : ${ë°•ì¤€ìˆ˜APIê²°ê³¼.data.analysis.worstYear.age}ì„¸ (${ë°•ì¤€ìˆ˜APIê²°ê³¼.data.analysis.worstYear.score}ì )\n\n`;

                resultText += 'ğŸ‘¤ ì •ë¹„ì œ API ê²°ê³¼\n';
                resultText += `   í‰ê· ì ìˆ˜: ${ì •ë¹„ì œAPIê²°ê³¼.data.analysis.averageScore}ì \n`;
                resultText += `   ìµœê³ ì : ${ì •ë¹„ì œAPIê²°ê³¼.data.analysis.bestYear.age}ì„¸ (${ì •ë¹„ì œAPIê²°ê³¼.data.analysis.bestYear.score}ì )\n`;
                resultText += `   ìµœì €ì : ${ì •ë¹„ì œAPIê²°ê³¼.data.analysis.worstYear.age}ì„¸ (${ì •ë¹„ì œAPIê²°ê³¼.data.analysis.worstYear.score}ì )\n\n`;

                const APIí‰ê· ì°¨ì´ = Math.abs(ë°•ì¤€ìˆ˜APIê²°ê³¼.data.analysis.averageScore - ì •ë¹„ì œAPIê²°ê³¼.data.analysis.averageScore);
                resultText += `ğŸ“Š API ê²°ê³¼ ì°¨ì´: ${APIí‰ê· ì°¨ì´}ì \n`;

                const APIê²€ì¦ì„±ê³µ = APIí‰ê· ì°¨ì´ >= 5;
                resultText += `ğŸ¯ API ê²€ì¦: ${APIê²€ì¦ì„±ê³µ ? 'âœ… ì„±ê³µ' : 'âš ï¸ ì£¼ì˜'}`;

                resultsDiv.className = 'result-box ' + (APIê²€ì¦ì„±ê³µ ? 'success' : 'warning');
                resultsDiv.textContent = resultText;

                window.apiTestResults = { ë°•ì¤€ìˆ˜APIê²°ê³¼, ì •ë¹„ì œAPIê²°ê³¼ };

            } catch (error) {
                console.error('API í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜:', error);
                resultsDiv.className = 'result-box error';
                resultsDiv.textContent = `âŒ API í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:\n${error.message}`;
            }
        };

        window.clearResults = function() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.className = 'result-box';
            resultsDiv.textContent = 'í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.';
        };

        console.log('ğŸ¯ ì •í†µ ì‚¬ì£¼í•™ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
        console.log('ğŸ’¡ runAuthenticTest() ë˜ëŠ” runLifetimeFortuneTest() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ë³´ì„¸ìš”.');

    </script>
</body>
</html>