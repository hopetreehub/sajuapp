var e,t=Object.defineProperty,r=(e,r,a)=>((e,r,a)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a)(e,"symbol"!=typeof r?r+"":r,a);import{r as a,j as s,u as n,e as i,b as l,f as d,D as o,B as c,h as m,C as x,i as g,L as h,M as u,k as p,N as b,l as y,m as j,n as f,o as v}from"./react-vendor-_folRuny.js";import{ap as k,aq as N,ar as w,as as S,at as C,au as M,av as $,aw as E,ax as D,ay as T,az as F,aA as _,aB as P,aC as A,aD as L,aE as R,aF as O,aG as K,aH as B,aI as I,aJ as z,aK as q,aL as W,aM as H,aN as Y,aO as U,aP as G,aQ as Q,aR as V,aS as J,aT as Z,aU as X,aV as ee,aW as te,aX as re,aY as ae,aZ as se,a_ as ne,a$ as ie,b0 as le,b1 as de,b2 as oe,b3 as ce,b4 as me,b5 as xe,b6 as ge,b7 as he,b8 as ue,b9 as pe,ba as be}from"./vendor-CqdH6iz9.js";import{f as ye,i as je,s as fe,e as ve,a as ke,b as Ne,c as we,d as Se,k as Ce,g as Me,h as $e,j as Ee,l as De,m as Te,n as Fe,o as _e,p as Pe,q as Ae}from"./calendar-vendor-D-MptWJo.js";import{C as Le,A as Re,p as Oe,a as Ke,b as Be,c as Ie,d as ze,e as qe,f as We,P as He,g as Ye,i as Ue}from"./chart-vendor-BEkunpaF.js";import{m as Ge}from"./ui-vendor-CUEfOO6O.js";import{j as Qe,O as Ve,u as Je,k as Ze,l as Xe}from"./three-vendor-D_S58Mw9.js";import{h as et,E as tt}from"./document-vendor-Cw2T0s_Z.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const rt=k()(N((e,t)=>({isAuthenticated:!1,isLoading:!1,error:null,user:null,token:null,login:async t=>{e({isLoading:!0,error:null});try{const r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json();if(!r.ok){if(a.approval_status)throw new Error(a.error||"로그인에 실패했습니다.");throw new Error(a.error||"로그인에 실패했습니다.")}e({isAuthenticated:!0,user:a.user,token:a.token,isLoading:!1})}catch(r){throw e({error:r.message||"로그인 중 오류가 발생했습니다.",isLoading:!1}),r}},logout:async()=>{const r=t().token;try{r&&await fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${r}`}})}catch(a){}e({isAuthenticated:!1,user:null,token:null,error:null,isLoading:!1});try{localStorage.removeItem("auth-storage")}catch(a){}},signUp:async t=>{e({isLoading:!0,error:null});try{const r=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json();if(!r.ok)throw new Error(a.error||"회원가입에 실패했습니다.");e({isLoading:!1,error:null}),e({error:a.message||"회원가입이 완료되었습니다. 관리자 승인 후 로그인이 가능합니다."})}catch(r){throw e({error:r.message||"회원가입 중 오류가 발생했습니다.",isLoading:!1}),r}},getCurrentUser:async()=>{const r=t().token;if(r)try{const t=await fetch("/api/auth/me",{method:"GET",headers:{Authorization:`Bearer ${r}`}}),a=await t.json();if(!t.ok)throw new Error(a.error||"사용자 정보를 가져올 수 없습니다.");e({isAuthenticated:!0,user:a.user})}catch(a){e({isAuthenticated:!1,user:null,token:null})}else e({isAuthenticated:!1,user:null})},setError:t=>{e({error:t})}}),{name:"auth-storage",partialize:e=>({token:e.token,user:e.user,isAuthenticated:e.isAuthenticated})})),at=e=>!!e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim()),st=e=>{if(!e)return{score:0,feedback:"비밀번호를 입력해주세요."};let t=0;const r=[];e.length>=8?t++:r.push("8자 이상"),/[a-z]/.test(e)?t++:r.push("소문자 포함"),/[A-Z]/.test(e)?t++:r.push("대문자 포함"),/[0-9]/.test(e)?t++:r.push("숫자 포함"),/[^A-Za-z0-9]/.test(e)?t++:r.push("특수문자 포함");const a=["매우 약함","약함","보통","강함","매우 강함"][Math.min(t,4)];return{score:Math.min(t,4),feedback:r.length>0?`${a} (추가 권장: ${r.join(", ")})`:`${a}`}},nt="WELCOME1",it=({className:e="",onValidationChange:t,disabled:r=!1})=>{const{referralCode:n,isValidatingReferral:i,referralValidation:l,setReferralCode:d,validateReferralCode:o,clearReferralValidation:c}=rt(),[m,x]=a.useState(!1),[g,h]=a.useState(""),[u,p]=a.useState(null),[b,y]=a.useState(!1);a.useEffect(()=>{n?(h(n),x(!0),y(!0)):null==t||t(!0,nt)},[n,t]);const j=a.useCallback(e=>{u&&clearTimeout(u);const r=setTimeout(async()=>{if(6===e.length){const r=await o(e);null==t||t(r,r?e:nt),y(r)}else 0===e.length&&(c(),null==t||t(!0,nt),y(!1))},500);p(r)},[u,o,c,t]);return s.jsxs("div",{className:`space-y-4 ${e}`,children:[b&&(null==l?void 0:l.isValid)&&s.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 p-6 rounded-xl border border-green-200 dark:border-green-700",children:s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-3xl mb-3 block",children:"🎊"}),s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"친구 추천 혜택 적용 완료!"}),s.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-200 dark:bg-green-800/30 px-4 py-2 rounded-lg border border-green-300 dark:border-green-600 mb-3",children:[s.jsx("span",{className:"text-green-600",children:"✅"}),s.jsxs("span",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:["추천인 코드: ",g]})]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[null==l?void 0:l.referrerName,"님의 추천으로 특별 혜택을 받으실 수 있습니다!"]})]})}),s.jsxs("button",{type:"button",onClick:()=>{r||(x(!m),!m&&g&&c())},disabled:r,className:`\n          w-full flex items-center justify-between px-4 py-3 \n          bg-gradient-to-r from-purple-50 to-pink-50 \n          dark:from-purple-900/20 dark:to-pink-900/20 \n          border border-purple-200 dark:border-purple-700 \n          rounded-lg text-left transition-all duration-200\n          ${r?"opacity-50 cursor-not-allowed":"hover:from-purple-100 hover:to-pink-100 dark:hover:from-purple-800/30 dark:hover:to-pink-800/30 cursor-pointer"}\n          ${m?"rounded-b-none border-b-0":""}\n        `,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:"👫"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"친구 추천 코드가 있으신가요?"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b?"친구 추천으로 더 많은 혜택을 받고 계시네요!":m?"친구가 알려준 6자리 코드를 입력하고 추가 혜택을 받아보세요":"클릭하여 친구 코드를 입력하고 추가 혜택을 받아보세요"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[b&&(null==l?void 0:l.isValid)&&s.jsx("span",{className:"text-green-600 text-sm font-medium",children:"적용됨"}),s.jsx("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 "+(m?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),m&&s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-l border-r border-b border-purple-200 dark:border-purple-700 rounded-b-lg px-4 py-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["친구 추천 코드 ",s.jsx("span",{className:"text-gray-400",children:"(6자리 영문/숫자)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:g,onChange:e=>{const t=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");t.length<=6&&(h(t),d(t),j(t))},disabled:r||i,placeholder:"예: AB12CD",className:`\n                  w-full px-4 py-3 pr-12 \n                  border-2 rounded-lg text-lg font-mono tracking-widest text-center\n                  placeholder-gray-400 \n                  focus:outline-none focus:ring-0\n                  disabled:opacity-50 disabled:cursor-not-allowed\n                  bg-white dark:bg-gray-800 \n                  text-gray-800 dark:text-gray-200\n                  ${(!g||g.length<6?"":i?"border-blue-500 ring-2 ring-blue-200":(null==l?void 0:l.isValid)?"border-green-500 ring-2 ring-green-200":l&&!l.isValid?"border-red-500 ring-2 ring-red-200":"")||"border-gray-300 dark:border-gray-600 focus:border-purple-500"}\n                  transition-all duration-200\n                `,maxLength:6}),s.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[i?s.jsx("div",{className:"animate-spin text-blue-500",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):(null==l?void 0:l.isValid)?s.jsx("div",{className:"text-green-500",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}):l&&!l.isValid&&6===g.length?s.jsx("div",{className:"text-red-500",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}):null,g&&!i&&s.jsx("button",{type:"button",onClick:()=>{h(""),d(""),c(),null==t||t(!0,nt),y(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",disabled:r,children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(6)].map((e,t)=>s.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-200 "+(t<g.length?"bg-purple-500":"bg-gray-200 dark:bg-gray-600")},t))})]}),l&&g.length>0&&s.jsx("div",{className:"p-3 rounded-lg border "+(l.isValid?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700"),children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("div",{className:"mt-0.5 "+(l.isValid?"text-green-600":"text-red-600"),children:l.isValid?"✅":"❌"}),s.jsx("div",{className:"text-sm "+(l.isValid?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"),children:l.message})]})}),i&&s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-600",children:[s.jsx("div",{className:"animate-spin",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsx("span",{className:"text-sm",children:"친구 추천 코드 확인 중..."})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:"💝"}),s.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:[s.jsx("p",{className:"font-medium mb-1",children:"친구 추천 추가 혜택"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"• 웰컴 혜택 + 친구 추천 혜택 모두 적용"}),s.jsx("li",{children:"• 프리미엄 기능 추가 1개월 연장"}),s.jsx("li",{children:"• 특별 사주 분석 리포트 제공"}),s.jsx("li",{children:"• 친구와 함께 쓰는 궁합 다이어리"})]})]})]})}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[s.jsx("p",{children:"• 친구 추천 코드는 회원가입 시에만 입력할 수 있습니다"}),s.jsx("p",{children:"• 친구 코드가 없어도 웰컴 혜택은 자동으로 적용됩니다"}),s.jsx("p",{children:"• 잘못된 코드를 여러 번 입력하면 일시적으로 제한될 수 있습니다"})]})]})]})},lt=({className:e="",onSuccess:t,onLoginClick:r})=>{const i=n(),{signUp:l,isLoading:d,error:o}=rt(),[c,m]=a.useState({email:"",password:"",confirmPassword:"",name:"",agreedToTerms:!1,agreedToPrivacy:!1,agreedToMarketing:!1}),[x,g]=a.useState({email:{isValid:!1,message:""},password:{isValid:!1,message:""},confirmPassword:{isValid:!1,message:""},name:{isValid:!1,message:""}}),[h,u]=a.useState(!1),[p,b]=a.useState(""),[y,j]=a.useState(!1),[f,v]=a.useState({score:0,feedback:""});a.useEffect(()=>{const e=at(c.email);g(t=>({...t,email:{isValid:e,message:c.email&&!e?"올바른 이메일 주소를 입력해주세요.":""}}));const t=c.name.trim().length>=2;g(e=>({...e,name:{isValid:t,message:c.name&&!t?"이름은 2자 이상 입력해주세요.":""}}));const r=c.password.length>=8,a=st(c.password);v(a),g(e=>({...e,password:{isValid:r,message:c.password&&!r?"비밀번호는 8자리 이상 입력해주세요.":""}}));const s=c.password===c.confirmPassword&&c.confirmPassword.length>0;g(e=>({...e,confirmPassword:{isValid:s,message:c.confirmPassword&&!s?"비밀번호가 일치하지 않습니다.":""}}));const n=e&&r&&s&&t,i=c.agreedToTerms&&c.agreedToPrivacy;j(n&&i)},[c]);const k=(e,t)=>{m(r=>({...r,[e]:t}))},N=e=>{const t="\n      w-full px-4 py-3 border-2 rounded-lg \n      focus:outline-none focus:ring-0 transition-all duration-200\n      bg-white dark:bg-gray-800 \n      text-gray-800 dark:text-gray-200\n    ";return c[e]&&""!==c[e]?x[e].isValid?`${t} border-green-500 focus:border-green-600`:`${t} border-red-500 focus:border-red-600`:`${t} border-gray-300 dark:border-gray-600 focus:border-purple-500`};return s.jsxs("div",{className:`max-w-md mx-auto ${e}`,children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mb-4",children:s.jsx("span",{className:"text-white text-2xl",children:"🔮"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"운명나침반 가입하기"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"개인화된 사주 분석으로 운명을 확인해보세요"})]}),o&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-red-600",children:"⚠️"}),s.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm",children:o})]})}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),y&&!d)try{await l({email:c.email,password:c.password,name:c.name,referralCode:h?p:void 0}),null==t||t(),i("/settings")}catch(r){}},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이메일 주소 *"}),s.jsx("input",{type:"email",value:c.email,onChange:e=>k("email",e.target.value),placeholder:"example@email.com",className:N("email"),disabled:d}),x.email.message&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이름 *"}),s.jsx("input",{type:"text",value:c.name,onChange:e=>k("name",e.target.value),placeholder:"홍길동",className:N("name"),disabled:d}),x.name.message&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호 *"}),s.jsx("input",{type:"password",value:c.password,onChange:e=>k("password",e.target.value),placeholder:"8자 이상 입력",className:N("password"),disabled:d}),c.password&&s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-sm "+(f.score<=1?"text-red-500":f.score<=2?"text-yellow-500":f.score<=3?"text-blue-500":"text-green-500"),children:f.feedback}),s.jsx("div",{className:"mt-1 h-2 bg-gray-200 rounded-full",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-300 "+(f.score<=1?"bg-red-500":f.score<=2?"bg-yellow-500":f.score<=3?"bg-blue-500":"bg-green-500"),style:{width:f.score/4*100+"%"}})})]}),x.password.message&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.password.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호 확인 *"}),s.jsx("input",{type:"password",value:c.confirmPassword,onChange:e=>k("confirmPassword",e.target.value),placeholder:"비밀번호를 다시 입력",className:N("confirmPassword"),disabled:d}),x.confirmPassword.message&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.confirmPassword.message})]}),s.jsx(it,{onValidationChange:(e,t)=>{u(e),b(t)},disabled:d}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",id:"terms",checked:c.agreedToTerms,onChange:e=>k("agreedToTerms",e.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:d}),s.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium",children:"서비스 이용약관"}),"에 동의합니다 ",s.jsx("span",{className:"text-red-500",children:"*"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",id:"privacy",checked:c.agreedToPrivacy,onChange:e=>k("agreedToPrivacy",e.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:d}),s.jsxs("label",{htmlFor:"privacy",className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium",children:"개인정보 처리방침"}),"에 동의합니다 ",s.jsx("span",{className:"text-red-500",children:"*"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",id:"marketing",checked:c.agreedToMarketing,onChange:e=>k("agreedToMarketing",e.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:d}),s.jsx("label",{htmlFor:"marketing",className:"text-sm text-gray-700 dark:text-gray-300",children:"마케팅 정보 수신에 동의합니다 (선택)"})]})]}),s.jsx("button",{type:"submit",disabled:!y||d,className:`\n              w-full py-4 px-6 rounded-lg font-medium text-lg transition-all duration-200\n              ${y&&!d?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}\n            `,children:d?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),s.jsx("span",{children:"가입 처리 중..."})]}):"회원가입 완료"}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["이미 계정이 있으신가요?"," ",s.jsx("button",{type:"button",onClick:r,className:"text-purple-600 hover:text-purple-700 font-medium hover:underline",disabled:d,children:"로그인하기"})]})})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"가입하시면 개인화된 사주 분석과 운세 정보를 받아보실 수 있습니다."})})]})},dt=({className:e="",onSuccess:t,onSignUpClick:r})=>{const i=n(),{login:l,isLoading:d,error:o}=rt(),[c,m]=a.useState({email:"",password:"",rememberMe:!1}),[x,g]=a.useState({email:{isValid:!1,message:""},password:{isValid:!1,message:""}}),[h,u]=a.useState(!1);a.useEffect(()=>{const e=at(c.email),t=c.email&&!e?"올바른 이메일 주소를 입력해주세요.":"",r=c.password.length>=8,a=c.password&&!r?"비밀번호는 8자리 이상입니다.":"";g({email:{isValid:e,message:t},password:{isValid:r,message:a}}),u(e&&r)},[c.email,c.password]);const p=(e,t)=>{m(r=>({...r,[e]:t}))},b=e=>{const t="\n      w-full px-4 py-3 border-2 rounded-lg \n      focus:outline-none focus:ring-0 transition-all duration-200\n      bg-white dark:bg-gray-800 \n      text-gray-800 dark:text-gray-200\n      placeholder-gray-400\n    ";return c[e]&&""!==c[e]?x[e].isValid?`${t} border-green-500 focus:border-green-600`:`${t} border-red-500 focus:border-red-600`:`${t} border-gray-300 dark:border-gray-600 focus:border-purple-500`};return s.jsxs("div",{className:`max-w-md mx-auto ${e}`,children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mb-4",children:s.jsx("span",{className:"text-white text-2xl",children:"🔮"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"운명나침반 로그인"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"나만의 운세 분석을 계속해보세요"})]}),o&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-red-600",children:"⚠️"}),s.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm",children:o})]})}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),h&&!d)try{await l({email:c.email,password:c.password}),null==t||t(),i("/dashboard")}catch(r){}},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이메일 주소"}),s.jsx("input",{type:"email",value:c.email,onChange:e=>p("email",e.target.value),placeholder:"example@email.com",className:b("email"),disabled:d}),x.email.message&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호"}),s.jsx("input",{type:"password",value:c.password,onChange:e=>p("password",e.target.value),placeholder:"비밀번호를 입력하세요",className:b("password"),disabled:d}),x.password.message&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.password.message})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:c.rememberMe,onChange:e=>p("rememberMe",e.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500",disabled:d}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"로그인 상태 유지"})]}),s.jsx("button",{type:"button",className:"text-sm text-purple-600 hover:text-purple-700 hover:underline",disabled:d,children:"비밀번호 찾기"})]}),s.jsx("button",{type:"submit",disabled:!h||d,className:`\n              w-full py-4 px-6 rounded-lg font-medium text-lg transition-all duration-200\n              ${h&&!d?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl border-2 border-purple-400 dark:border-purple-300":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed border-2 border-gray-400 dark:border-gray-500"}\n            `,children:d?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),s.jsx("span",{children:"로그인 중..."})]}):"로그인"}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["아직 계정이 없으신가요?"," ",s.jsx("button",{type:"button",onClick:r,className:"text-purple-600 hover:text-purple-700 font-medium hover:underline",disabled:d,children:"회원가입하기"})]})})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:"소셜 계정으로 간편 로그인"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"🌐"}),s.jsx("div",{className:"text-xs text-gray-500",children:"구글"})]})}),s.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"💬"}),s.jsx("div",{className:"text-xs text-gray-500",children:"카카오"})]})}),s.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"📱"}),s.jsx("div",{className:"text-xs text-gray-500",children:"네이버"})]})})]}),s.jsx("div",{className:"text-center text-xs text-gray-400 mt-2",children:"(준비 중)"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"로그인하시면 개인화된 사주 분석과 캘린더 기능을 이용하실 수 있습니다."})})]})},ot=()=>{const[e,t]=i(),r=n(),{isAuthenticated:l,user:d}=rt(),o=e.get("mode")||"login",c="signup"===o||"login"===o?o:"login",[m,x]=a.useState(c);a.useEffect(()=>{l&&d&&r("/dashboard")},[l,d,r]);const g=()=>{x("signup"),t({mode:"signup"},{replace:!0})},h=()=>{x("login"),t({mode:"login"},{replace:!0})},u=()=>{};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 dark:from-purple-900 dark:via-gray-900 dark:to-blue-900 flex flex-col justify-center py-12 px-4",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-300/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute top-3/4 right-1/4 w-96 h-96 bg-pink-300/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-80 h-80 bg-blue-300/20 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"inline-flex items-center space-x-2 mb-6",children:[s.jsx("span",{className:"text-4xl",children:"🔮"}),s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg max-w-md mx-auto",children:"AI와 전통 사주학이 만나 당신의 운명을 안내합니다"})]}),s.jsx("div",{className:"max-w-md mx-auto mb-8",children:s.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm p-1 rounded-xl shadow-lg",children:s.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[s.jsx("button",{onClick:h,className:`\n                  py-3 px-6 text-sm font-medium rounded-lg transition-all duration-200\n                  ${"login"===m?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white"}\n                `,children:"로그인"}),s.jsx("button",{onClick:g,className:`\n                  py-3 px-6 text-sm font-medium rounded-lg transition-all duration-200\n                  ${"signup"===m?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white"}\n                `,children:"회원가입"})]})})}),s.jsx("div",{className:"transition-all duration-300",children:"signup"===m?s.jsx(lt,{onSuccess:u,onLoginClick:h}):s.jsx(dt,{onSuccess:u,onSignUpClick:g})}),s.jsxs("div",{className:"mt-12 max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 dark:text-white mb-8",children:"운명나침반과 함께 하는 특별한 경험"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:s.jsx("span",{className:"text-white text-2xl",children:"📊"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"개인화 사주 분석"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"생년월일시를 바탕으로 한 정확한 사주 해석과 운세 분석을 제공합니다."})]}),s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:s.jsx("span",{className:"text-white text-2xl",children:"📅"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"스마트 캘린더"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"일정 관리와 운세 정보가 통합된 지능형 캘린더로 하루를 계획하세요."})]}),s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-green-500 to-teal-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:s.jsx("span",{className:"text-white text-2xl",children:"📝"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"다이어리 & 운세"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"매일의 기록과 함께 개인 맞춤 운세와 조언을 받아보세요."})]})]})]}),"signup"===m&&s.jsx("div",{className:"mt-12 max-w-md mx-auto",children:s.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 p-6 rounded-xl border border-yellow-200 dark:border-yellow-700",children:s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-3xl mb-2 block",children:"🎁"}),s.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"친구 추천 혜택"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"추천인 코드로 가입하시면 특별한 혜택을 드려요!"}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[s.jsx("div",{children:"✨ 프리미엄 기능 1개월 무료"}),s.jsx("div",{children:"🔍 특별 사주 분석 무료 제공"}),s.jsx("div",{children:"💕 궁합 분석 서비스 무료"})]})]})})})]}),s.jsxs("footer",{className:"relative z-10 mt-16 text-center text-sm text-gray-500 dark:text-gray-400",children:[s.jsx("p",{children:"© 2024 운명나침반. 모든 권리 보유."}),s.jsxs("div",{className:"mt-2 space-x-4",children:[s.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"이용약관"}),s.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"개인정보처리방침"}),s.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"고객지원"})]})]})]})};const ct=w.create({baseURL:"/api",headers:{"Content-Type":"application/json"}}),mt=async e=>(await ct.get("/events",{params:e})).data.data||[],xt=async e=>(await ct.post("/events",e)).data.data,gt=async(e,t)=>(await ct.put(`/events/${e}`,t)).data.data,ht=async e=>{await ct.delete(`/events/${e}`)},ut=async()=>(await ct.get("/tags")).data,pt=async e=>(await ct.post("/tags",e)).data,bt=async e=>{try{const t=!1?"http://localhost:4020":"",r=await fetch(`${t}/api/saju/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await r.json();if(a.success&&a.data){const{fourPillars:e,ohHaengBalance:t,interpretation:r,sajuString:s}=a.data;return{basic:{dayMaster:e.day.heaven,dayMasterStrength:"중화",yongshin:"화",gyeokguk:"정격",summary:r,sajuString:s,ohHaengBalance:t}}}throw new Error("사주 계산 실패")}catch(t){return{basic:{dayMaster:"계산중",dayMasterStrength:"분석중",yongshin:"분석중",gyeokguk:"분석중",summary:"사주 계산 중 오류가 발생했습니다.",sajuString:"계산 실패",ohHaengBalance:{wood:20,fire:20,earth:20,metal:20,water:20}}}}},yt=async e=>({beneficialSpirits:["천을귀인","문창귀인"],harmfulSpirits:["겁살","망신살"],dominantInfluence:"길신이 우세",mitigation:["선행 쌓기","정직한 생활"],activation:["학습과 연구","예술 활동"]}),jt=async e=>({dominantTraits:{leadership:80,creativity:70},strengths:["리더십","창의성","추진력"],weaknesses:["성급함","완벽주의"],developmentAreas:["인내심","협력"],recommendations:["팀워크 향상","감정 조절"]}),ft=async(e,t)=>(await ct.get("/diaries/search",{params:{startDate:e,endDate:t},headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,vt=async e=>(await ct.get(`/diaries?date=${e}`,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,kt=async e=>(await ct.post("/diaries",e,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,Nt=async(e,t)=>(await ct.put(`/diaries?id=${e}`,t,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,wt=async e=>(await ct.get("/diaries/search",{params:e,headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,St=async()=>(await w.get("http://localhost:4012/api/calendar/todos")).data,Ct=async e=>(await w.post("http://localhost:4012/api/calendar/todos",e)).data,Mt=async(e,t)=>(await w.put(`http://localhost:4012/api/calendar/todos/${e}`,t)).data,$t=async e=>{await w.delete(`http://localhost:4012/api/calendar/todos/${e}`)},Et=async e=>(await w.patch(`http://localhost:4012/api/calendar/todos/${e}/toggle`)).data,Dt=a.createContext(void 0),Tt=()=>{const e=a.useContext(Dt);if(!e)throw new Error("useCalendar must be used within a CalendarProvider");return e},Ft=({children:e})=>{const[t,r]=a.useState(new Date),[n,i]=a.useState("month"),[l,d]=a.useState(null),[o,c]=a.useState([]),[m,x]=a.useState([]),[g,h]=a.useState(!1),[u]=a.useState({timezone:"Asia/Seoul",weekStartsOn:0,defaultView:"month",showLunarCalendar:!0,showFortune:!0,theme:"light",language:"ko"}),p=e=>({id:e.id,text:e.title,title:e.title,description:e.description,completed:1===e.completed||!0===e.completed,priority:e.priority,date:e.date,createdAt:e.created_at,updatedAt:e.updated_at}),b=e=>({title:e.text||e.title||"",description:e.description,date:e.date||"",priority:e.priority||"medium",completed:e.completed?1:0});a.useEffect(()=>{y()},[]);const y=async()=>{try{h(!0);const e=(await St()).map(p);x(e)}catch(e){}finally{h(!1)}},j=a.useCallback(()=>{const e=new Date(t);switch(n){case"year":e.setFullYear(t.getFullYear()-1);break;case"month":e.setMonth(t.getMonth()-1);break;case"week":e.setDate(t.getDate()-7);break;case"day":e.setDate(t.getDate()-1)}r(e)},[t,n]),f=a.useCallback(()=>{const e=new Date(t);switch(n){case"year":e.setFullYear(t.getFullYear()+1);break;case"month":e.setMonth(t.getMonth()+1);break;case"week":e.setDate(t.getDate()+7);break;case"day":e.setDate(t.getDate()+1)}r(e)},[t,n]),v=a.useCallback(()=>{r(new Date)},[]),k=a.useCallback(e=>{const t={...e,id:crypto.randomUUID(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};c(e=>[...e,t])},[]),N=a.useCallback((e,t)=>{c(r=>r.map(r=>r.id===e?{...r,...t,updated_at:(new Date).toISOString()}:r))},[]),w=a.useCallback(e=>{c(t=>t.filter(t=>t.id!==e))},[]),S=a.useCallback((e,t)=>o.filter(r=>{const a=new Date(r.start_time),s=new Date(r.end_time);return a>=e&&a<=t||s>=e&&s<=t||a<=e&&s>=t}),[o]),C=a.useCallback(async e=>{try{const t=b(e),r=await Ct(t),a=p(r);return x(e=>[...e,a]),a}catch(t){const r={...e,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date};return x(e=>[...e,r]),r}},[]),M=a.useCallback(async(e,t)=>{try{const r=b(t),a=await Mt(e,r),s=p(a);x(t=>t.map(t=>t.id===e?s:t))}catch(r){x(r=>r.map(r=>r.id===e?{...r,...t,updatedAt:new Date}:r))}},[]),$=a.useCallback(async e=>{try{await $t(e),x(t=>t.filter(t=>t.id!==e))}catch(t){x(t=>t.filter(t=>t.id!==e))}},[]),E=a.useCallback(async e=>{try{const t=await Et(e),r=p(t);x(t=>t.map(t=>t.id===e?r:t))}catch(t){x(t=>t.map(t=>t.id===e?{...t,completed:!t.completed,updatedAt:new Date}:t))}},[]),D=a.useCallback(e=>{const t=ye(e,"yyyy-MM-dd");return m.filter(e=>e.date===t)},[m]),T={currentDate:t,viewMode:n,events:o,selectedDate:l,settings:u,todos:m,setCurrentDate:r,setViewMode:i,setSelectedDate:d,navigatePrevious:j,navigateNext:f,navigateToday:v,addEvent:k,updateEvent:N,deleteEvent:w,getEventsForDateRange:S,addTodo:C,updateTodo:M,deleteTodo:$,toggleTodo:E,getTodosForDate:D};return s.jsx(Dt.Provider,{value:T,children:e})},_t=async(e=[])=>{const t=new Date,r=ye(t,"yyyy-MM-dd");try{const[a,s]=await Promise.all([mt({start_date:r,end_date:r}),vt(r).catch(()=>null)]),n=e.filter(e=>je(new Date(e.date),t)),i=n.filter(e=>e.completed).length;return{events:a||[],todos:n,diary:s,hasScheduledEvents:((null==a?void 0:a.length)||0)>0,completedTodos:i,totalTodos:n.length}}catch(a){return{events:[],todos:[],diary:null,hasScheduledEvents:!1,completedTodos:0,totalTodos:0}}},Pt=async(e=[])=>{const t=new Date,r=fe(t,{weekStartsOn:0}),a=ve(t,{weekStartsOn:0}),s=ke({start:r,end:a});try{const[t,n]=await Promise.all([mt({start_date:ye(r,"yyyy-MM-dd"),end_date:ye(a,"yyyy-MM-dd")}),Promise.all(s.map(e=>vt(ye(e,"yyyy-MM-dd")).catch(()=>null)))]),i=e.filter(e=>{const t=new Date(e.date);return t>=r&&t<=a}),l=i.filter(e=>e.completed).length,d=i.length>0?l/i.length*100:0,o=n.filter(e=>e&&e.mood).map(e=>({date:e.date,mood:e.mood||"😐"})),c=s.map(e=>{const r=ye(e,"yyyy-MM-dd"),a=(null==t?void 0:t.filter(e=>ye(new Date(e.start_time),"yyyy-MM-dd")===r))||[],s=i.filter(e=>ye(new Date(e.date),"yyyy-MM-dd")===r),l=n.some(e=>e&&e.date===r);return{date:r,events:a.length,todos:s.length,diary:l}});return{completionRate:Math.round(d),totalEvents:(null==t?void 0:t.length)||0,totalDiaries:n.filter(e=>e).length,moodTrend:o,activityData:c}}catch(n){return{completionRate:0,totalEvents:0,totalDiaries:0,moodTrend:[],activityData:[]}}},At=async(e=[])=>{const t=new Date,r=Ne(t),a=we(t),s=ke({start:r,end:a});try{const[t,n]=await Promise.all([mt({start_date:ye(r,"yyyy-MM-dd"),end_date:ye(a,"yyyy-MM-dd")}),Promise.all(s.map(e=>vt(ye(e,"yyyy-MM-dd")).catch(()=>null)))]),i=e.filter(e=>{const t=new Date(e.date);return t>=r&&t<=a}),l=s.map(e=>{const r=ye(e,"yyyy-MM-dd"),a=(null==t?void 0:t.filter(e=>ye(new Date(e.start_time),"yyyy-MM-dd")===r))||[],s=i.filter(e=>ye(new Date(e.date),"yyyy-MM-dd")===r),l=n.some(e=>e&&e.date===r);let d=0;return a.length>0&&(d+=1),s.length>0&&(d+=1),l&&(d+=1),s.filter(e=>e.completed).length>0&&(d+=1),{date:r,intensity:Math.min(d,4)}}),d=new Map;null==t||t.forEach(e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach(e=>{const t="string"==typeof e?e:e.name;d.set(t,(d.get(t)||0)+1)})});const o=Array.from(d.entries()).sort((e,t)=>t[1]-e[1]).slice(0,10).map(([e,t],r)=>({name:e,count:t,color:["#3B82F6","#8B5CF6","#10B981","#F59E0B","#EF4444","#6366F1","#EC4899","#14B8A6","#F97316","#84CC16"][r]||"#6B7280"}));return{activityHeatmap:l,tagDistribution:o,totalActivities:((null==t?void 0:t.length)||0)+i.length+n.filter(e=>e).length}}catch(n){return{activityHeatmap:[],tagDistribution:[],totalActivities:0}}},Lt=(e,t,r="시간 오류")=>{try{if(!e)return r;const a="string"==typeof e?new Date(e):e;return Se(a)?ye(a,t,{locale:Ce}):r}catch(a){return r}},Rt=e=>{try{if(!e)return!1;const t="string"==typeof e?new Date(e):e;return!!Se(t)&&t<new Date}catch(t){return!1}};function Ot({todayData:e,loading:t}){const r=new Date;if(t)return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-full"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-2/3"})]})]})});const a=e.totalTodos>0?Math.round(e.completedTodos/e.totalTodos*100):0;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"오늘의 요약"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:Lt(r,"yyyy년 M월 d일 EEEE","날짜 오류")})]}),s.jsx("div",{className:"text-2xl",children:"📊"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800/50 rounded-lg",children:s.jsx(S,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.events.length}),s.jsx("p",{className:"text-sm text-blue-600/70 dark:text-blue-400/70",children:"오늘 일정"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800/50 rounded-lg",children:s.jsx(C,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[e.completedTodos,"/",e.totalTodos]}),s.jsx("p",{className:"text-sm text-green-600/70 dark:text-green-400/70",children:"완료된 할일"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-800/50 rounded-lg",children:s.jsx(M,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.diary?"작성됨":"미작성"}),s.jsx("p",{className:"text-sm text-purple-600/70 dark:text-purple-400/70",children:"오늘 일기"})]})]})]}),e.totalTodos>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"할일 완료율"}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${a}%`}})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(S,{className:"h-5 w-5"}),"오늘 일정 (",e.events.length,")"]}),0===e.events.length?s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(S,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"오늘 예정된 일정이 없습니다"})]}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.events.map(e=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx($,{className:"h-4 w-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.all_day?"종일":Lt(e.start_time,"HH:mm","--:--")})]}),!e.all_day&&Rt(e.start_time)&&s.jsx(E,{className:"h-4 w-4 text-orange-500"})]},e.id))})]}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(C,{className:"h-5 w-5"}),"오늘 할일 (",e.todos.length,")"]}),0===e.todos.length?s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(C,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"오늘 예정된 할일이 없습니다"})]}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.todos.map(e=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-4 h-4 rounded border-2 flex items-center justify-center "+(e.completed?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-500"),children:e.completed&&s.jsx(C,{className:"h-3 w-3 text-white"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate "+(e.completed?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-white"),children:e.title}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:s.jsx("span",{className:"text-xs px-2 py-0.5 rounded "+("high"===e.priority?"bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400":"medium"===e.priority?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-600 dark:bg-green-900/20 dark:text-green-400"),children:"high"===e.priority?"높음":"medium"===e.priority?"보통":"낮음"})})]})]},e.id))})]}),s.jsx("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-purple-300 dark:border-purple-600",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(M,{className:"h-6 w-6 text-purple-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.diary?"오늘 일기가 작성되었습니다":"오늘 일기를 작성해보세요"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.diary?`기분: ${e.diary.mood||"😐"}`:"하루를 마무리하며 생각을 정리해보세요"})]})]})})]})}function Kt({weeklyData:e,loading:t}){if(t)return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),s.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-600 rounded mb-4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-full"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-2/3"})]})]})});const r=Math.max(...e.activityData.map(e=>e.events+e.todos+(e.diary?1:0)),1);return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"주간 통계"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"지난 7일간의 활동 요약"})]}),s.jsx("div",{className:"text-2xl",children:"📈"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[e.completionRate,"%"]}),s.jsx("div",{className:"text-xs text-green-600/70 dark:text-green-400/70 mt-1",children:"할일 완료율"})]}),s.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.totalEvents}),s.jsx("div",{className:"text-xs text-blue-600/70 dark:text-blue-400/70 mt-1",children:"총 일정"})]}),s.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.totalDiaries}),s.jsx("div",{className:"text-xs text-purple-600/70 dark:text-purple-400/70 mt-1",children:"일기 작성"})]}),s.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl",children:e.moodTrend.length>0?e.moodTrend[e.moodTrend.length-1].mood:"😐"}),s.jsx("div",{className:"text-xs text-yellow-600/70 dark:text-yellow-400/70 mt-1",children:"최근 기분"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:[s.jsx(D,{className:"h-5 w-5"}),"일별 활동량"]}),s.jsx("div",{className:"space-y-3",children:e.activityData.map((e,t)=>{const a=e.events+e.todos+(e.diary?1:0),n=r>0?a/r*100:0,i=ye(new Date(e.date),"E",{locale:Ce}),l=ye(new Date(e.date),"d");return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"w-12 text-xs text-gray-500 dark:text-gray-400",children:[i," ",l]}),s.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.jsxs("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative overflow-hidden",children:[n>0&&s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-full rounded-full transition-all duration-300",style:{width:`${n}%`}}),s.jsxs("div",{className:"absolute inset-0 flex items-center justify-start pl-2 gap-1",children:[e.events>0&&s.jsx(S,{className:"h-3 w-3 text-white"}),e.todos>0&&s.jsx(C,{className:"h-3 w-3 text-white"}),e.diary&&s.jsx(M,{className:"h-3 w-3 text-white"})]})]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 w-8 text-right",children:a})]})]},e.date)})})]}),e.moodTrend.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:"📊 기분 트렌드"}),s.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:e.moodTrend.map((e,t)=>{const r=new Date(e.date),a=ye(r,"E",{locale:Ce}),n=ye(r,"d");return s.jsxs("div",{className:"flex-shrink-0 text-center p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-1",children:e.mood}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a," ",n]})]},e.date)})})]}),0===e.totalEvents&&0===e.totalDiaries&&0===e.completionRate&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(D,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"이번 주 활동 기록이 없습니다"}),s.jsx("p",{className:"text-sm",children:"일정을 추가하고 일기를 작성해보세요!"})]})]})}function Bt({monthlyData:e,loading:t}){const r=new Date,a=Ne(r),n=we(r),i=fe(a,{weekStartsOn:0}),l=ve(n,{weekStartsOn:0}),d=ke({start:i,end:l});if(t)return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),s.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:Array.from({length:42}).map((e,t)=>s.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-600 rounded"},t))})]})});const o=e=>{switch(e){case 0:default:return"bg-gray-100 dark:bg-gray-700";case 1:return"bg-green-200 dark:bg-green-800/50";case 2:return"bg-green-300 dark:bg-green-700/70";case 3:return"bg-green-400 dark:bg-green-600/80";case 4:return"bg-green-500 dark:bg-green-500"}};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"월간 활동 히트맵"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ye(r,"yyyy년 M월",{locale:Ce})," 활동량 시각화"]})]}),s.jsx("div",{className:"text-2xl",children:"📅"})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["일","월","화","수","목","금","토"].map(e=>s.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400 font-medium",children:e},e))}),s.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:d.map(t=>{const i=(t=>{const r=ye(t,"yyyy-MM-dd"),a=e.activityHeatmap.find(e=>e.date===r);return(null==a?void 0:a.intensity)||0})(t),l=t>=a&&t<=n,d=ye(t,"yyyy-MM-dd")===ye(r,"yyyy-MM-dd");return s.jsx("div",{className:`\n                aspect-square flex items-center justify-center text-xs font-medium rounded-lg transition-all cursor-pointer\n                ${l?o(i):"bg-gray-50 dark:bg-gray-800/50"}\n                ${l?"text-gray-800 dark:text-gray-200":"text-gray-400 dark:text-gray-500"}\n                ${d?"ring-2 ring-blue-500":""}\n                hover:scale-105\n              `,title:`${ye(t,"M월 d일",{locale:Ce})}: 활동량 ${i}`,children:ye(t,"d")},t.toISOString())})}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"적음"}),s.jsx("div",{className:"flex gap-1",children:[0,1,2,3,4].map(e=>s.jsx("div",{className:`w-3 h-3 rounded-sm ${o(e)}`},e))}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"많음"})]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["총 활동: ",e.totalActivities,"개"]})]}),e.tagDistribution.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"🏷️ 인기 태그"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.tagDistribution.slice(0,6).map(e=>s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.name}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.count,"회 사용"]})]})]},e.name))})]}),0===e.totalActivities&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"text-4xl mb-3",children:"📊"}),s.jsx("p",{children:"이번 달 활동 기록이 없습니다"}),s.jsx("p",{className:"text-sm",children:"일정과 일기를 작성하여 활동을 기록해보세요!"})]})]})}function It({actions:e,loading:t}){return t?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>s.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-600 rounded-lg"},t))})]})}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"빠른 액션"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"자주 사용하는 기능들을 빠르게 실행하세요"})]}),s.jsx("div",{className:"text-2xl",children:"⚡"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.map(e=>s.jsxs("button",{onClick:e.action,className:`\n              flex flex-col items-center justify-center p-4 rounded-lg text-white\n              ${e.color} \n              transition-all duration-200 hover:scale-105 hover:shadow-lg\n              focus:outline-none focus:ring-4 focus:ring-opacity-50\n            `,children:[s.jsx("div",{className:"text-2xl mb-2",children:e.icon}),s.jsx("span",{className:"text-sm font-medium text-center",children:e.label})]},e.id))}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"text-blue-500 text-lg",children:"💡"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"생산성 팁"}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"매일 아침 오늘 할 일을 정리하고, 저녁에는 하루를 되돌아보며 일기를 작성해보세요."})]})]})})]})}const zt=({tag:e,onDelete:t,onClick:r,size:a="medium",deletable:n=!1})=>s.jsxs("span",{className:`\n        inline-flex items-center gap-1 rounded-full font-medium\n        ${{small:"text-xs px-2 py-0.5",medium:"text-sm px-3 py-1",large:"text-base px-4 py-2"}[a]}\n        ${r?"cursor-pointer hover:opacity-80":""}\n        transition-opacity\n      `,style:{backgroundColor:`${e.color}20`,color:e.color,border:`1px solid ${e.color}40`},onClick:r,children:[s.jsx("span",{children:e.name}),n&&t&&s.jsx("button",{className:"ml-1 hover:opacity-60 focus:outline-none",onClick:e=>{e.stopPropagation(),null==t||t()},"aria-label":`Remove ${e.name} tag`,children:s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),qt=({selectedTags:e,onTagsChange:t,placeholder:r="태그를 선택하세요",allowCreate:n=!0})=>{const[i,l]=a.useState([]),[d,o]=a.useState(!1),[c,m]=a.useState(""),[x,g]=a.useState(!1),[h,u]=a.useState(!1),[p,b]=a.useState(""),[y,j]=a.useState("#3B82F6");a.useEffect(()=>{f()},[]);const f=async()=>{try{g(!0);const e=await ut();l(e)}catch(e){}finally{g(!1)}},v=r=>{e.find(e=>e.id===r.id)||t([...e,r]),o(!1),m("")},k=i.filter(t=>t.name.toLowerCase().includes(c.toLowerCase())&&!e.find(e=>e.id===t.id));return s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map(r=>s.jsx(zt,{tag:r,size:"small",deletable:!0,onDelete:()=>{return a=r.id,void t(e.filter(e=>e.id!==a));var a}},r.id))}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>o(!d),children:s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e.length>0?`${e.length}개 태그 선택됨`:r})}),d&&s.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg",children:[s.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:s.jsx("input",{type:"text",className:"w-full px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"태그 검색...",value:c,onChange:e=>m(e.target.value),onClick:e=>e.stopPropagation()})}),s.jsx("div",{className:"max-h-48 overflow-y-auto",children:x?s.jsx("div",{className:"p-3 text-center text-gray-500",children:"로딩 중..."}):k.length>0?k.map(e=>s.jsxs("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",onClick:()=>v(e),children:[s.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),s.jsx("span",{className:"text-sm",children:e.name})]},e.id)):s.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:c?"일치하는 태그가 없습니다":"사용 가능한 태그가 없습니다"})}),n&&s.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"text",className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"새 태그 이름",value:p,onChange:e=>b(e.target.value),onClick:e=>e.stopPropagation()}),s.jsx("div",{className:"flex gap-1",children:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280","#F97316"].map(e=>s.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border-2 "+(y===e?"border-gray-800 dark:border-gray-200":"border-transparent"),style:{backgroundColor:e},onClick:()=>j(e)},e))})]}),s.jsx("button",{type:"button",className:"w-full px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",onClick:async()=>{if(p.trim())try{u(!0);const e=await pt({name:p.trim(),color:y});l([...i,e]),v(e),b(""),j("#3B82F6")}catch(e){}finally{u(!1)}},disabled:!p.trim()||h,children:h?"생성 중...":"새 태그 만들기"})]})]})]})]})},Wt={"휴문":{name:"휴문",element:"수",nature:"auspicious",meaning:"휴식과 평온의 문. 쉼과 회복의 에너지",effects:{positive:["휴식","회복","치유","평온","안정"],negative:["나태","소극적","정체"]}},"생문":{name:"생문",element:"토",nature:"auspicious",meaning:"생성과 발전의 문. 새로운 시작과 성장",effects:{positive:["성장","발전","창조","생산","번영"],negative:["과욕","무리한 확장"]}},"상문":{name:"상문",element:"목",nature:"inauspicious",meaning:"상처와 손상의 문. 충돌과 갈등",effects:{positive:["경쟁력","추진력","돌파력"],negative:["싸움","상처","손실","갈등","분쟁"]}},"두문":{name:"두문",element:"목",nature:"inauspicious",meaning:"막힘과 폐쇄의 문. 숨김과 은둔",effects:{positive:["은둔","수양","비밀보호","방어"],negative:["막힘","폐쇄","고립","소통불가"]}},"경문":{name:"경문",element:"화",nature:"auspicious",meaning:"경치와 명예의 문. 밝음과 영광",effects:{positive:["명예","빛남","영광","화려함","성공"],negative:["허영","과시","허명"]}},"사문":{name:"사문",element:"토",nature:"inauspicious",meaning:"죽음과 종결의 문. 끝과 소멸",effects:{positive:["청산","정리","종결","새로운 시작 전 정화"],negative:["사망","종말","소멸","실패","끝"]}},"놀문":{name:"놀문",element:"금",nature:"neutral",meaning:"놀람과 변화의 문. 예상치 못한 변화",effects:{positive:["기회","변화","각성","깨달음"],negative:["놀람","충격","불안","혼란","변동"]}},"개문":{name:"개문",element:"금",nature:"auspicious",meaning:"개방과 시작의 문. 열림과 시작",effects:{positive:["개시","개방","기회","시작","확장"],negative:["무분별","노출","방어력 약화"]}}},Ht={"천봉":{name:"천봉",element:"수",planet:"수성",nature:"inauspicious",meaning:"지혜와 계략의 별. 도적과 간계",influences:["지혜","계략","도적","간교","음모","비밀"]},"천임":{name:"천임",element:"토",planet:"토성",nature:"auspicious",meaning:"신뢰와 안정의 별. 임무와 책임",influences:["신뢰","안정","책임","성실","보좌","충성"]},"천충":{name:"천충",element:"목",planet:"목성",nature:"neutral",meaning:"충동과 돌진의 별. 급진과 변화",influences:["충동","급진","돌진","변화","혁신","무모"]},"천보":{name:"천보",element:"목",planet:"목성",nature:"auspicious",meaning:"보좌와 지원의 별. 도움과 협력",influences:["보좌","지원","협력","조력","문화","학문"]},"천영":{name:"천영",element:"화",planet:"화성",nature:"neutral",meaning:"명예와 영광의 별. 빛과 명성",influences:["명예","영광","명성","화려","문서","증명"]},"천예":{name:"천예",element:"토",planet:"토성",nature:"inauspicious",meaning:"질병과 연약의 별. 병과 쇠약",influences:["질병","쇠약","피로","노쇠","걱정","근심"]},"천주":{name:"천주",element:"금",planet:"금성",nature:"neutral",meaning:"권위와 기둥의 별. 지지와 떠받침",influences:["권위","기둥","지지","근간","강직","고집"]},"천심":{name:"천심",element:"금",planet:"금성",nature:"auspicious",meaning:"의술과 치료의 별. 마음과 심장",influences:["의술","치료","마음","정신","예술","창조"]},"천금":{name:"천금",element:"토",planet:"토성",nature:"auspicious",meaning:"중앙과 균형의 별. 중심과 조화",influences:["중앙","균형","조화","중재","통합","안정"]}},Yt={"직부":{name:"직부",nature:"auspicious",meaning:"권력과 통솔의 신",characteristics:["권력","통솔","지도","명령","높은 지위","귀인"]},"등사":{name:"등사",nature:"inauspicious",meaning:"번뇌와 불안의 신",characteristics:["번뇌","불안","걱정","혼란","망상","집착"]},"태음":{name:"태음",nature:"auspicious",meaning:"음과 여성의 신",characteristics:["음","여성","온화","부드러움","비밀","내면"]},"육합":{name:"육합",nature:"auspicious",meaning:"화합과 결합의 신",characteristics:["화합","결합","협력","중재","타협","조화"]},"백호":{name:"백호",nature:"inauspicious",meaning:"흉과 재앙의 신",characteristics:["흉","재앙","공포","위험","파괴","살상"]},"현무":{name:"현무",nature:"inauspicious",meaning:"도적과 음모의 신",characteristics:["도적","음모","사기","배신","도둑","속임"]},"구지":{name:"구지",nature:"auspicious",meaning:"방어와 땅의 신",characteristics:["방어","수비","보호","안정","견고","내실"]},"구천":{name:"구천",nature:"auspicious",meaning:"공격과 하늘의 신",characteristics:["공격","진취","상승","발전","적극","확장"]}},Ut={1:"북",2:"서남",3:"동",4:"동남",5:"중앙",6:"서북",7:"서",8:"동북",9:"남"},Gt=[[4,9,2],[3,5,7],[8,1,6]];function Qt(e){return Wt[e]}function Vt(e){return Ht[e]}const Jt=[{index:23,name:"소한",longitude:285,yinYang:"yang",ju:1},{index:24,name:"대한",longitude:300,yinYang:"yang",ju:2},{index:1,name:"입춘",longitude:315,yinYang:"yang",ju:7},{index:2,name:"우수",longitude:330,yinYang:"yang",ju:8},{index:3,name:"경칩",longitude:345,yinYang:"yang",ju:9},{index:4,name:"춘분",longitude:0,yinYang:"yang",ju:9},{index:5,name:"청명",longitude:15,yinYang:"yang",ju:8},{index:6,name:"곡우",longitude:30,yinYang:"yang",ju:7},{index:7,name:"입하",longitude:45,yinYang:"yang",ju:5},{index:8,name:"소만",longitude:60,yinYang:"yang",ju:4},{index:9,name:"망종",longitude:75,yinYang:"yang",ju:3},{index:10,name:"하지",longitude:90,yinYang:"yang",ju:3},{index:11,name:"소서",longitude:105,yinYang:"yin",ju:4},{index:12,name:"대서",longitude:120,yinYang:"yin",ju:5},{index:13,name:"입추",longitude:135,yinYang:"yin",ju:6},{index:14,name:"처서",longitude:150,yinYang:"yin",ju:7},{index:15,name:"백로",longitude:165,yinYang:"yin",ju:8},{index:16,name:"추분",longitude:180,yinYang:"yin",ju:8},{index:17,name:"한로",longitude:195,yinYang:"yin",ju:7},{index:18,name:"상강",longitude:210,yinYang:"yin",ju:6},{index:19,name:"입동",longitude:225,yinYang:"yin",ju:2},{index:20,name:"소설",longitude:240,yinYang:"yin",ju:1},{index:21,name:"대설",longitude:255,yinYang:"yin",ju:9},{index:22,name:"동지",longitude:270,yinYang:"yin",ju:9}],Zt={2024:{"소한":"2024-01-06 05:49","대한":"2024-01-20 11:07","입춘":"2024-02-04 17:27","우수":"2024-02-19 13:13","경칩":"2024-03-05 11:23","춘분":"2024-03-20 12:06","청명":"2024-04-04 16:02","곡우":"2024-04-19 22:59","입하":"2024-05-05 09:10","소만":"2024-05-20 21:59","망종":"2024-06-05 13:10","하지":"2024-06-21 05:51","소서":"2024-07-06 23:20","대서":"2024-07-22 16:44","입추":"2024-08-07 09:09","처서":"2024-08-22 23:55","백로":"2024-09-07 11:11","추분":"2024-09-22 21:44","한로":"2024-10-08 03:00","상강":"2024-10-23 01:15","입동":"2024-11-07 01:20","소설":"2024-11-22 04:56","대설":"2024-12-07 00:17","동지":"2024-12-21 18:21"},2025:{"소한":"2025-01-05 11:32","대한":"2025-01-19 16:54","입춘":"2025-02-03 23:09","우수":"2025-02-18 19:00","경칩":"2025-03-05 17:07","춘분":"2025-03-20 17:51","청명":"2025-04-04 21:48","곡우":"2025-04-20 04:48","입하":"2025-05-05 14:56","소만":"2025-05-21 03:42","망종":"2025-06-05 18:54","하지":"2025-06-21 11:33","소서":"2025-07-07 05:04","대서":"2025-07-22 22:29","입추":"2025-08-07 14:53","처서":"2025-08-23 05:33","백로":"2025-09-07 16:51","추분":"2025-09-23 03:19","한로":"2025-10-08 08:37","상강":"2025-10-23 06:51","입동":"2025-11-07 07:04","소설":"2025-11-22 10:35","대설":"2025-12-07 06:05","동지":"2025-12-22 00:03"}};function Xt(e){const t=e.getFullYear();return Zt[t]?function(e,t){const r=Zt[t],a=e.getTime();let s=Jt[0],n=new Date(`${r["소한"]}`).getTime();for(const i of Jt){const e=r[i.name];if(!e)continue;const t=new Date(e).getTime();t<=a&&t>n&&(s=i,n=t)}if(0===e.getMonth()&&e.getDate()<10){const e=t-1;if(Zt[e]){const t=Zt[e];for(const e of[Jt[0],Jt[1]]){const r=t[e.name];if(!r)continue;const i=new Date(r).getTime();i<=a&&i>n&&(s=e,n=i)}}}return{index:s.index,name:s.name,longitude:s.longitude,datetime:new Date(n),yinYang:s.yinYang,ju:s.ju}}(e,t):function(e){const t=e.getMonth()+1,r=e.getDate(),a={"소한":{month:1,day:6},"대한":{month:1,day:20},"입춘":{month:2,day:4},"우수":{month:2,day:19},"경칩":{month:3,day:6},"춘분":{month:3,day:21},"청명":{month:4,day:5},"곡우":{month:4,day:20},"입하":{month:5,day:6},"소만":{month:5,day:21},"망종":{month:6,day:6},"하지":{month:6,day:21},"소서":{month:7,day:7},"대서":{month:7,day:23},"입추":{month:8,day:8},"처서":{month:8,day:23},"백로":{month:9,day:8},"추분":{month:9,day:23},"한로":{month:10,day:8},"상강":{month:10,day:23},"입동":{month:11,day:7},"소설":{month:11,day:22},"대설":{month:12,day:7},"동지":{month:12,day:22}};let s=Jt[0],n=1/0;for(const i of Jt){const e=a[i.name];if(!e)continue;let l=31*t+r-(31*e.month+e.day);l<-300&&(l+=365),l>300&&(l-=365),l>=0&&l<n&&(n=l,s=i)}return{index:s.index,name:s.name,longitude:s.longitude,datetime:new Date(e.getFullYear(),t-1,r),yinYang:s.yinYang,ju:s.ju}}(e)}const er=[{name:"청룡반수",type:"auspicious",description:"생문과 천영성이 만나 명예와 재물이 함께 오는 대길격",effects:["재물운 상승","명예 획득","승진 가능","사업 성공","귀인 만남"],strength:10,check:(e,t)=>"생문"===e&&"천영"===t},{name:"천지삼기득기",type:"auspicious",description:"개문, 천보성, 직부가 만나 귀인의 도움을 받는 길격",effects:["귀인 도움","프로젝트 성공","협력 강화","명성 상승"],strength:9,check:(e,t,r)=>"개문"===e&&"천보"===t&&"직부"===r},{name:"청룡회두",type:"auspicious",description:"생문과 천임성이 만나 안정적인 재물 획득",effects:["재물 안정","저축 증가","신뢰 구축","장기 투자 길"],strength:8,check:(e,t)=>"생문"===e&&"천임"===t},{name:"태백입형",type:"auspicious",description:"경문과 천심성이 만나 의술, 예술, 창조 분야 대길",effects:["의술 발전","예술 성공","창조력 발휘","치유 능력"],strength:8,check:(e,t)=>"경문"===e&&"천심"===t},{name:"현무입간",type:"auspicious",description:"휴문과 천봉성이 만나 지혜와 전략이 발달",effects:["지혜 증진","전략 수립","계획 성공","학문 발전"],strength:7,check:(e,t)=>"휴문"===e&&"천봉"===t},{name:"육합태음",type:"auspicious",description:"개문에 육합과 태음이 만나 협력과 화합",effects:["협력 강화","중재 성공","관계 개선","타협 성공"],strength:7,check:(e,t,r)=>"개문"===e&&("육합"===r||"태음"===r)}],tr=[{name:"등사입묘",type:"inauspicious",description:"사문과 천예성에 등사가 만나 질병, 재앙의 대흉격",effects:["질병 주의","재앙 경계","실패 위험","손실 가능"],strength:10,check:(e,t,r)=>"사문"===e&&"천예"===t&&"등사"===r},{name:"백호당문",type:"inauspicious",description:"상문에 백호가 머물러 충돌과 상처 위험",effects:["충돌 위험","상처 주의","분쟁 발생","사고 경계"],strength:9,check:(e,t,r)=>"상문"===e&&"백호"===r},{name:"형격반음",type:"inauspicious",description:"두문과 천충성이 만나 일이 막히고 지체됨",effects:["진행 지체","막힘 발생","소통 불가","고립 위험"],strength:8,check:(e,t)=>"두문"===e&&"천충"===t},{name:"현무투간",type:"inauspicious",description:"현무가 나쁜 궁에 들어가 도난, 사기 위험",effects:["도난 위험","사기 주의","배신 가능","속임 경계"],strength:8,check:(e,t,r)=>("사문"===e||"상문"===e)&&"현무"===r},{name:"백호충관",type:"inauspicious",description:"경문에 백호가 있어 관재수, 소송 위험",effects:["관재수 발생","소송 위험","법적 문제","명예 손상"],strength:7,check:(e,t,r)=>"경문"===e&&"백호"===r}],rr=[{name:"반음",type:"neutral",description:"놀문과 천주성이 만나 예상치 못한 변화",effects:["예상 변화","돌발 상황","전환 시기","재평가 필요"],strength:6,check:(e,t)=>"놀문"===e&&"천주"===t},{name:"복음",type:"neutral",description:"휴문과 천금성이 만나 정체와 반복",effects:["정체 상태","반복 패턴","휴식 필요","재정비 시기"],strength:5,check:(e,t)=>"휴문"===e&&"천금"===t}];function ar(e,t,r){const a=[];for(const s of er)s.check(e,t,r)&&a.push({id:`auspicious-${a.length}`,name:s.name,type:s.type,description:s.description,effects:s.effects,strength:s.strength});for(const s of tr)s.check(e,t,r)&&a.push({id:`inauspicious-${a.length}`,name:s.name,type:s.type,description:s.description,effects:s.effects,strength:s.strength});for(const s of rr)s.check(e,t,r)&&a.push({id:`neutral-${a.length}`,name:s.name,type:s.type,description:s.description,effects:s.effects,strength:s.strength});return a}const sr=["갑","을","병","정","무","기","경","신","임","계"],nr=["자","축","인","묘","진","사","오","미","신","유","술","해"],ir=["휴문","생문","상문","두문","경문","사문","놀문","개문"],lr=["천봉","천임","천충","천보","천영","천예","천주","천심","천금"],dr=["직부","등사","태음","육합","백호","현무","구지","구천"];function or(e={}){const t=e.dateTime||new Date,r=Xt(t);const a=r.yinYang,s=r.ju,n=function(e){const t=e.getHours(),r=Math.floor((t+1)%24/2),a=nr[r],s=mr(e),n=sr.indexOf(s);return{gan:sr[(2*n+r)%10],zhi:a}}(t),i=mr(t),l=function(e,t,r){const a=(e-1)%9+1,s=function(e,t){const r={},a=[1,8,3,4,9,2,7,6],s=[1,6,7,2,9,4,3,8],n="yang"===t?a:s,i=(e-1)%8;for(let l=0;l<ir.length;l++){r[n[(i+l)%8]]=ir[l]}return r[5]=r[2],r}(a,t),n=function(e,t){const r={},a=[1,2,3,4,5,6,7,8,9],s=[9,8,7,6,5,4,3,2,1],n="yang"===t?a:s;for(let i=0;i<9;i++){r[n[(e-1+i)%9]]=lr[i]}return r}(a,t),i=function(e,t){const r={},a=nr.indexOf(t.zhi),s=[1,8,3,4,9,2,7,6],n=a%8;for(let i=0;i<dr.length;i++){r[s[(n+i)%8]]=dr[i]}return r[5]=r[2],r}(0,r),l={};for(let d=1;d<=9;d++){const e=d,t=s[e],a=n[e],o=i[e];l[e]=xr(e,t,a,o,r)}return l}(s,a,n),d=function(e){const t={excellent:100,good:75,neutral:50,bad:25,terrible:0};let r=0;const a=[];for(let o=1;o<=9;o++){const s=o,n=t[e[s].fortune];r+=n,a.push({palace:s,score:n})}const s=Math.round(r/9);let n;n=s>=80?"excellent":s>=60?"good":s>=40?"neutral":s>=20?"bad":"terrible";a.sort((e,t)=>t.score-e.score);const i=a.slice(0,3).map(e=>e.palace),l=a.slice(-3).map(e=>e.palace);let d="";d="excellent"===n?"현재 시간은 매우 길한 시간입니다. 중요한 일을 추진하기 좋습니다.":"good"===n?"현재 시간은 길한 편입니다. 계획한 일을 진행하세요.":"neutral"===n?"현재 시간은 평온합니다. 일상적인 활동에 적합합니다.":"bad"===n?"현재 시간은 주의가 필요합니다. 신중하게 행동하세요.":"현재 시간은 불길합니다. 중요한 일은 미루는 것이 좋습니다.";return{score:s,level:n,summary:d,bestPalaces:i,worstPalaces:l}}(l);return{dateTime:t,ju:s,yinYang:a,solarTerm:{name:r.name,index:r.index,isStart:cr(t,r)},hourGanZhi:n,dayGan:i,palaces:l,overallFortune:d}}function cr(e,t){const r=t.datetime;return Math.abs(e.getTime()-r.getTime())/36e5<=24}function mr(e){const t=new Date(1984,0,1),r=Math.floor((e.getTime()-t.getTime())/864e5);return sr[(r%10+10)%10]}function xr(e,t,r,a,s,n){const i=Ut[e],l=function(e,t,r){!function(e,t,r){const a=Wt[e].nature,s=Ht[t].nature,n=r?Yt[r].nature:"neutral",i={auspicious:2,neutral:1,inauspicious:0},l=(i[a]+i[s]+i[n])/3}(e,t,r);let a=50;const s=Wt[e].nature;"auspicious"===s?a+=15:"inauspicious"===s&&(a-=15);const n=Ht[t].nature;"auspicious"===n?a+=15:"inauspicious"===n&&(a-=15);if(r){const e=Yt[r].nature;"auspicious"===e?a+=20:"inauspicious"===e&&(a-=20)}let i;i=a>=80?"excellent":a>=60?"good":a>=40?"neutral":a>=20?"bad":"terrible";const l=ar(e,t,r);return function(e,t){if(0===t.length)return e;const r=t.reduce((e,t)=>t.strength>e.strength?t:e);if("auspicious"===r.type&&r.strength>=9)return"excellent";if("inauspicious"===r.type&&r.strength>=9)return"terrible";if("auspicious"===r.type&&r.strength>=7){const t=["terrible","bad","neutral","good","excellent"],r=t.indexOf(e);return t[Math.min(r+1,t.length-1)]}if("inauspicious"===r.type&&r.strength>=7){const t=["terrible","bad","neutral","good","excellent"],r=t.indexOf(e);return t[Math.max(r-1,0)]}return e}(i,l)}(t,r,a),d=function(e,t,r,a,s){const n=Ut[e],i=Wt[t],l=Ht[r];let d=`${n} 방위 (${e}궁)은 `;d+="excellent"===s?"대길한 기운이 흐릅니다. ":"good"===s?"길한 기운이 있습니다. ":"neutral"===s?"평온한 기운입니다. ":"bad"===s?"조심해야 할 방위입니다. ":"매우 불길한 방위입니다. ";if(d+=`${i.meaning} `,d+=`${l.meaning} `,a){d+=`${Yt[a].meaning}이 작용하고 있습니다.`}return d}(e,t,r,a,l),o=function(e,t,r,a){const s=[];"excellent"!==a&&"good"!==a||(s.push("중요한 일을 시작하기 좋은 시간입니다"),s.push("이 방위로 이동하거나 이 방향을 보고 일하세요"),s.push("새로운 계획이나 프로젝트 추진에 유리합니다"));const n=Wt[e].effects.positive;n.length>0&&s.push(`${n.slice(0,2).join(", ")}에 집중하세요`);return s}(t,0,0,l),c=function(e,t,r,a){const s=[];"bad"!==a&&"terrible"!==a||(s.push("중요한 결정은 피하는 것이 좋습니다"),s.push("이 방위로의 이동이나 행동은 신중히 하세요"),s.push("갈등이나 분쟁의 소지가 있으니 주의하세요"));const n=Wt[e].effects.negative;n.length>0&&s.push(`${n.slice(0,2).join(", ")}를 경계하세요`);if(r){const e=Yt[r];"inauspicious"===e.nature&&s.push(`${e.characteristics.slice(0,2).join(", ")}에 주의하세요`)}return s}(t,0,a,l),m=ar(t,r,a);return{palace:e,direction:i,gate:t,star:r,spirit:a,tianGan:s.gan,diZhi:s.zhi,wuXing:Wt[t].element,fortune:l,interpretation:d,recommendations:o,warnings:c,patterns:m.length>0?m:void 0}}function gr(e,t,r=60){const a=[];let s=new Date(e);for(;s<=t;){const e=or({dateTime:s});a.push({time:new Date(s),score:e.overallFortune.score,fortune:e.overallFortune.level,chart:e}),s=Me(s,r)}return a}function hr(e){return{excellent:"🌟",good:"✨",neutral:"⚖️",bad:"⚠️",terrible:"❌"}[e]}function ur(e){return{excellent:"text-green-500",good:"text-blue-500",neutral:"text-gray-500",bad:"text-orange-500",terrible:"text-red-500"}[e]}function pr(e){return{excellent:"bg-green-100 dark:bg-green-900",good:"bg-blue-100 dark:bg-blue-900",neutral:"bg-gray-100 dark:bg-gray-900",bad:"bg-orange-100 dark:bg-orange-900",terrible:"bg-red-100 dark:bg-red-900"}[e]}function br(e,t){const r=or({dateTime:e});if(!t)return{score:r.overallFortune.score,fortune:r.overallFortune.level,summary:r.overallFortune.summary};const a=or({dateTime:t}),s=Math.round((r.overallFortune.score+a.overallFortune.score)/2);let n;n=s>=80?"excellent":s>=60?"good":s>=40?"neutral":s>=20?"bad":"terrible";return{score:s,fortune:n,summary:`시작: ${r.overallFortune.summary} | 종료: ${a.overallFortune.summary}`}}const yr=(e={})=>{const{startDate:t,endDate:r,intervalMinutes:s=60,autoCalculate:n=!0}=e,[i,l]=a.useState({timeSlotScores:[],optimalTime:null,isCalculating:!1,error:null}),d=a.useMemo(()=>{if(t)return t;const e=new Date;return e.setHours(0,0,0,0),e},[t]),o=a.useMemo(()=>{if(r)return r;const e=new Date;return e.setHours(23,59,59,999),e},[r]),c=a.useCallback(async()=>{if(n){l(e=>({...e,isCalculating:!0,error:null}));try{await new Promise(e=>setTimeout(e,0));const e=gr(d,o,s),t=e.length>0?function(e,t){const r=gr(e,t,60);return r.reduce((e,t)=>t.score>e.score?t:e,r[0])}(d,o):null;l({timeSlotScores:e,optimalTime:t,isCalculating:!1,error:null})}catch(e){l(t=>({...t,isCalculating:!1,error:e instanceof Error?e.message:"Calculation failed"}))}}},[d,o,s,n]),m=a.useCallback(()=>{c()},[c]),x=a.useCallback((e,t)=>br(e,t),[]),g=a.useCallback(e=>{const t=i.timeSlotScores.find(t=>t.time.getTime()===e.getTime());if(t)return t;return i.timeSlotScores.reduce((t,r)=>{const a=Math.abs(t.time.getTime()-e.getTime());return Math.abs(r.time.getTime()-e.getTime())<a?r:t},i.timeSlotScores[0])},[i.timeSlotScores]),h=a.useCallback(e=>({icon:hr(e),color:ur(e),bgColor:pr(e)}),[]),u=a.useCallback(e=>!!i.optimalTime&&i.optimalTime.time.getTime()===e.getTime(),[i.optimalTime]),p=a.useCallback(e=>{const t=new Date(e);t.setHours(0,0,0,0);const r=new Date(e);r.setHours(23,59,59,999);const a=i.timeSlotScores.filter(e=>e.time>=t&&e.time<=r);if(0!==a.length)return a.reduce((e,t)=>t.score>e.score?t:e)},[i.timeSlotScores]),b=a.useCallback(e=>i.timeSlotScores.filter(t=>t.fortune===e),[i.timeSlotScores]);return a.useEffect(()=>{n&&c()},[c,n]),{timeSlotScores:i.timeSlotScores,optimalTime:i.optimalTime,isCalculating:i.isCalculating,error:i.error,recalculate:m,evaluateEvent:x,getScoreForTime:g,getBestTimeForDay:p,filterTimeSlotsByFortune:b,isOptimalTime:u,getFortuneDisplay:h}},jr=({isOpen:e,onClose:t,onSave:r,event:n,initialDate:i})=>{const{addTodo:l}=Tt(),[d,o]=a.useState("event"),[c,m]=a.useState({title:"",description:"",start_time:ye(i||new Date,"yyyy-MM-dd'T'HH:mm"),end_time:ye(i?new Date(i.getTime()+36e5):new Date(Date.now()+36e5),"yyyy-MM-dd'T'HH:mm"),all_day:!1,location:"",type:"personal",color:"#3b82f6",reminder_minutes:15,tags:[]}),[x,g]=a.useState([]),[h,u]=a.useState({text:"",priority:"medium",date:ye(i||new Date,"yyyy-MM-dd")}),p=a.useMemo(()=>{if(!c.start_time)return{startDate:new Date,endDate:$e(new Date,1)};const e=new Date(c.start_time),t=new Date(e);t.setHours(0,0,0,0);const r=new Date(e);return r.setHours(23,59,59,999),{startDate:t,endDate:r}},[c.start_time]),{evaluateEvent:b,getFortuneDisplay:y,getBestTimeForDay:j}=yr({startDate:p.startDate,endDate:p.endDate,autoCalculate:"event"===d}),f=a.useMemo(()=>{if("event"!==d||!c.start_time)return null;const e=new Date(c.start_time),t=c.end_time?new Date(c.end_time):void 0;return b(e,t)},[d,c.start_time,c.end_time,b]),v=a.useMemo(()=>{if("event"!==d||!c.start_time)return null;const e=new Date(c.start_time),t=j(e);return t&&f&&t.score-f.score>=20?t:null},[d,c.start_time,f,j]);a.useEffect(()=>{n?(m(n),g(n.tags||[]),o("event")):i&&(m(e=>({...e,start_time:ye(i,"yyyy-MM-dd'T'HH:mm"),end_time:ye(new Date(i.getTime()+36e5),"yyyy-MM-dd'T'HH:mm")})),u(e=>({...e,date:ye(i,"yyyy-MM-dd")})))},[n,i]);return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-background rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto border border-border",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:n?"일정 수정":"새 작성"}),!n&&s.jsxs("div",{className:"flex mb-6 bg-muted rounded-lg p-1",children:[s.jsx("button",{type:"button",onClick:()=>o("event"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("event"===d?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:"📅 일정"}),s.jsx("button",{type:"button",onClick:()=>o("todo"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("todo"===d?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:"✅ 할일"})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),"todo"!==d)if(c.title&&c.start_time&&c.end_time)try{const e={title:c.title,description:c.description,start_time:c.start_time?`${c.start_time}:00`:c.start_time,end_time:c.end_time?`${c.end_time}:00`:c.end_time,all_day:c.all_day,location:c.location,type:c.type,color:c.color,reminder_minutes:void 0===c.reminder_minutes?void 0:c.reminder_minutes};let a;(null==n?void 0:n.id)?(a=await gt(n.id,e),a.tags=x):(a=await xt(e),a.tags=x),r(a),t()}catch(a){a.response||a.request,alert(`일정 저장에 실패했습니다: ${a.message||"알 수 없는 오류"}`)}else alert("제목과 시간을 입력해주세요.");else(()=>{if(h.text.trim())try{l({text:h.text.trim(),completed:!1,priority:h.priority,date:h.date}),t()}catch(a){alert("할일 저장에 실패했습니다.")}else alert("할일 내용을 입력해주세요.")})()},className:"space-y-4",children:["todo"===d?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"할일 내용*"}),s.jsx("input",{type:"text",value:h.text,onChange:e=>u({...h,text:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",placeholder:"할일을 입력하세요...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"우선순위"}),s.jsx("div",{className:"flex space-x-2",children:[{value:"high",label:"높음",icon:"🔴"},{value:"medium",label:"보통",icon:"🟡"},{value:"low",label:"낮음",icon:"🟢"}].map(e=>s.jsxs("button",{type:"button",onClick:()=>u({...h,priority:e.value}),className:"flex-1 py-2 px-3 rounded-md text-sm font-medium border transition-colors "+(h.priority===e.value?"border-primary-500 bg-primary-500/10 text-primary-600":"border-border hover:border-primary-300"),children:[s.jsx("span",{className:"mr-1",children:e.icon}),e.label]},e.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"날짜"}),s.jsx("input",{type:"date",value:h.date,onChange:e=>u({...h,date:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"제목*"}),s.jsx("input",{type:"text",value:c.title,onChange:e=>m({...c,title:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"설명"}),s.jsx("textarea",{value:c.description||"",onChange:e=>m({...c,description:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",rows:3})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:c.all_day,onChange:e=>m({...c,all_day:e.target.checked}),className:"mr-2"}),s.jsx("label",{className:"text-sm text-foreground",children:"종일"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"시작*"}),s.jsx("input",{type:"datetime-local",value:c.start_time,onChange:e=>m({...c,start_time:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"종료*"}),s.jsx("input",{type:"datetime-local",value:c.end_time,onChange:e=>m({...c,end_time:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]})]}),f&&s.jsxs("div",{className:"border border-border rounded-md p-4 bg-muted/50",children:[s.jsxs("h3",{className:"text-sm font-semibold mb-2 text-foreground flex items-center",children:[s.jsx("span",{className:"mr-2",children:"🔮"}),"귀문둔갑 시간 평가"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:`flex items-center justify-between p-2 rounded-md ${y(f.fortune).bgColor}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-2xl",children:y(f.fortune).icon}),s.jsxs("div",{children:[s.jsxs("div",{className:`font-medium ${y(f.fortune).color}`,children:["excellent"===f.fortune&&"대길 (大吉)","good"===f.fortune&&"길 (吉)","neutral"===f.fortune&&"평 (平)","bad"===f.fortune&&"흉 (凶)","terrible"===f.fortune&&"대흉 (大凶)"]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["점수: ",f.score,"/100"]})]})]})}),s.jsx("p",{className:"text-xs text-foreground/80 leading-relaxed",children:f.summary}),v&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[s.jsx("p",{className:"text-xs font-medium text-foreground mb-2",children:"💡 더 좋은 시간 추천"}),s.jsx("button",{type:"button",onClick:()=>{const e=ye(v.time,"yyyy-MM-dd'T'HH:mm");m({...c,start_time:e,end_time:c.end_time?ye(new Date(v.time.getTime()+(new Date(c.end_time).getTime()-new Date(c.start_time).getTime())),"yyyy-MM-dd'T'HH:mm"):e})},className:"w-full text-left p-2 rounded-md bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:"🌟"}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:[ye(v.time,"HH:mm")," 시작"]}),s.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:["점수: ",v.score,"/100 (+",v.score-f.score,"점 향상)"]})]})]}),s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"적용 →"})]})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"위치"}),s.jsx("input",{type:"text",value:c.location||"",onChange:e=>m({...c,location:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"유형"}),s.jsxs("select",{value:c.type,onChange:e=>m({...c,type:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",children:[s.jsx("option",{value:"personal",children:"개인"}),s.jsx("option",{value:"work",children:"업무"}),s.jsx("option",{value:"holiday",children:"휴일"}),s.jsx("option",{value:"other",children:"기타"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"색상"}),s.jsx("input",{type:"color",value:c.color||"#3b82f6",onChange:e=>m({...c,color:e.target.value}),className:"w-full h-10 border border-border rounded-md bg-background"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"태그"}),s.jsx(qt,{selectedTags:x,onTagsChange:g,placeholder:"태그를 선택하거나 새로 만들기",allowCreate:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"알림 (분)"}),s.jsxs("select",{value:c.reminder_minutes,onChange:e=>m({...c,reminder_minutes:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",children:[s.jsx("option",{value:"0",children:"없음"}),s.jsx("option",{value:"5",children:"5분 전"}),s.jsx("option",{value:"10",children:"10분 전"}),s.jsx("option",{value:"15",children:"15분 전"}),s.jsx("option",{value:"30",children:"30분 전"}),s.jsx("option",{value:"60",children:"1시간 전"}),s.jsx("option",{value:"1440",children:"1일 전"})]})]})]}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsx("div",{children:(null==n?void 0:n.id)&&s.jsx("button",{type:"button",onClick:async()=>{if((null==n?void 0:n.id)&&window.confirm("이 일정을 삭제하시겠습니까?"))try{await ht(n.id),t(),window.location.reload()}catch(e){alert("일정 삭제에 실패했습니다.")}},className:"px-4 py-2 text-red-600 hover:bg-red-500/10 rounded-md",children:"삭제"})}),s.jsxs("div",{className:"space-x-2",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-foreground hover:bg-muted rounded-md",children:"취소"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600",children:n?"수정":"todo"===d?"할일 저장":"일정 저장"})]})]})]})]})}):null};function fr({isOpen:e,onClose:t,children:r,className:n=""}){return a.useEffect(()=>{const r=e=>{"Escape"===e.key&&t()};return e&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[e,t]),e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:t,children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),s.jsx("div",{className:`\n          relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl \n          max-w-lg w-full mx-4 max-h-[90vh] overflow-auto\n          transform transition-all duration-200 scale-100\n          ${n}\n        `,onClick:e=>e.stopPropagation(),children:r})]}):null}const vr=[{emoji:"😊",label:"기쁨",traditional:"희(喜)",color:"wuxing-fire",element:"화(火)"},{emoji:"😢",label:"슬픔",traditional:"애(哀)",color:"wuxing-metal",element:"금(金)"},{emoji:"😠",label:"분노",traditional:"노(怒)",color:"wuxing-wood",element:"목(木)"},{emoji:"😰",label:"두려움",traditional:"공(恐)",color:"wuxing-water",element:"수(水)"},{emoji:"🤔",label:"생각",traditional:"사(思)",color:"wuxing-earth",element:"토(土)"},{emoji:"😌",label:"평온",traditional:"정(靜)",color:"yinyang-yin",element:"음(陰)"},{emoji:"🌟",label:"활기",traditional:"양(陽)",color:"yinyang-yang",element:"양(陽)"},{emoji:"😐",label:"담담",traditional:"무(無)",color:"wuxing-metal-light",element:"중용"}];function kr({isOpen:e,onClose:t,date:r,onSave:n}){const[i,l]=a.useState(r),[d,o]=a.useState(""),[c,m]=a.useState(""),[x,g]=a.useState(!1),[h,u]=a.useState(null),[p,b]=a.useState(null),[y,j]=a.useState(null),[f,v]=a.useState(!1),k=a.useCallback(async()=>{var e;g(!0),j(null);try{const e=ye(r,"yyyy-MM-dd"),t=await vt(e);u(t),o(t.content),m(t.mood||"")}catch(t){404===(null==(e=t.response)?void 0:e.status)?(u(null),o(""),m("")):j("일기를 불러오는데 실패했습니다.")}finally{g(!1)}},[r]);a.useEffect(()=>{e&&r&&k()},[r,e,k]);const N=()=>{d!==((null==h?void 0:h.content)||"")||c!==((null==h?void 0:h.mood)||"")?window.confirm("작성 중인 내용이 있습니다. 정말 닫으시겠습니까?")&&t():t()};return s.jsx(fr,{isOpen:e,onClose:N,className:"max-w-2xl",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["📝 ",ye(r,"yyyy년 M월 d일 EEEE",{locale:Ce})," 일기"]}),s.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xl",children:"✕"})]}),y&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["⚠️ ",y]})}),x&&!h&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"📖 일기를 불러오는 중..."})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"🎭"}),"오늘의 마음을 선택해주세요",s.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(오행 감정론 기반)"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:vr.map(({emoji:e,label:t,traditional:r,color:a,element:n})=>s.jsxs("button",{onClick:()=>m(e),className:`\n                  group relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-300 hover:scale-105\n                  ${c===e?`border-${a} bg-gradient-to-br from-${a}/10 to-${a}/20 shadow-lg`:"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-800"}\n                `,style:{borderColor:c===e?`hsl(var(--${a.replace("wuxing-","").replace("yinyang-","")}))`:void 0},children:[s.jsxs("div",{className:"relative mb-2",children:[s.jsx("span",{className:"text-2xl transition-transform group-hover:scale-110",children:e}),c===e&&s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white",children:"✓"})})]}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:r}),s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:n}),c===e&&s.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-transparent via-white/20 to-transparent opacity-50 pointer-events-none"})]},e))}),c&&s.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(()=>{const e=vr.find(e=>e.emoji===c);return s.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[s.jsx("span",{className:"font-semibold",children:null==e?void 0:e.traditional})," - ",null==e?void 0:e.element," 기운의 감정입니다.","화(火)"===(null==e?void 0:e.element)&&" 밝고 활발한 에너지를 나타냅니다.","금(金)"===(null==e?void 0:e.element)&&" 차분하고 정제된 에너지를 나타냅니다.","목(木)"===(null==e?void 0:e.element)&&" 성장하고 발전하려는 에너지를 나타냅니다.","수(水)"===(null==e?void 0:e.element)&&" 유연하고 깊이 있는 에너지를 나타냅니다.","토(土)"===(null==e?void 0:e.element)&&" 안정되고 신중한 에너지를 나타냅니다.","음(陰)"===(null==e?void 0:e.element)&&" 고요하고 내향적인 에너지를 나타냅니다.","양(陽)"===(null==e?void 0:e.element)&&" 활발하고 외향적인 에너지를 나타냅니다.","중용"===(null==e?void 0:e.element)&&" 균형잡힌 중도의 마음을 나타냅니다."]})})()})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"오늘 하루는 어떠셨나요?"}),s.jsx("textarea",{value:d,onChange:e=>o(e.target.value),placeholder:"오늘 있었던 일, 느낀 점, 감사한 일 등을 자유롭게 적어보세요...",rows:8,className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg resize-none bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),s.jsxs("div",{className:"flex justify-between mt-2",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:[d.length," / 1000자"]}),s.jsx("span",{className:"text-xs text-gray-400",children:"Tab 키로 들여쓰기 가능"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:N,disabled:x,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"취소"}),s.jsx("button",{onClick:async()=>{if(d.trim()){g(!0),j(null);try{const e={date:ye(r,"yyyy-MM-dd"),content:d.trim(),mood:c||"😐",weather:void 0,tags:[]};let a;a=(null==h?void 0:h.id)?await Nt(h.id,e):await kt(e),n&&n(a),alert(h?"일기가 수정되었습니다.":"일기가 저장되었습니다."),t()}catch(e){j("일기 저장에 실패했습니다. 다시 시도해주세요.")}finally{g(!1)}}},disabled:!d.trim()||x,className:`\n              px-6 py-2 rounded-lg text-white font-medium transition-colors\n              ${d.trim()&&!x?"bg-purple-600 hover:bg-purple-700":"bg-gray-400 cursor-not-allowed"}\n            `,children:x?"저장 중...":h?"수정하기":"저장하기"})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["💡 ",s.jsx("strong",{children:"팁:"})," 일기는 자동으로 저장되지 않습니다. 작성 완료 후 반드시 저장 버튼을 눌러주세요."]})})]})})}function Nr({userId:e}){const[t,r]=a.useState(null),[n,i]=a.useState([]),[l,d]=a.useState(!0);a.useEffect(()=>{o(),c()},[e]);const o=async()=>{try{r({totalCoursesEnrolled:5,completedCourses:2,inProgressCourses:3,totalLessonsCompleted:24,totalStudyTime:14400,averageScore:87,streak:7,certificates:2}),d(!1)}catch(e){d(!1)}},c=()=>{i([{week:"1주",lessonsCompleted:2,studyTime:1800},{week:"2주",lessonsCompleted:4,studyTime:2400},{week:"3주",lessonsCompleted:6,studyTime:3200},{week:"4주",lessonsCompleted:5,studyTime:2800},{week:"5주",lessonsCompleted:7,studyTime:4200}])},m=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}시간 ${r}분`:`${r}분`},x=Math.max(...n.map(e=>e.lessonsCompleted));return l?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]})]})}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:s.jsx(M,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.completedCourses}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"완료한 강좌"})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:s.jsx($,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Math.floor(t.totalStudyTime/3600)}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"총 학습시간"})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:s.jsx(T,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.averageScore}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"평균 점수"})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:s.jsx(S,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.streak}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"연속 학습일"})]})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"주간 학습 진도"}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(D,{className:"h-4 w-4 mr-1"}),"최근 5주"]})]}),s.jsx("div",{className:"space-y-4",children:n.map((e,t)=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-8 text-sm text-gray-600 dark:text-gray-400",children:e.week}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[e.lessonsCompleted,"개 레슨"]}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:m(e.studyTime)})]}),s.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:e.lessonsCompleted/x*100+"%"}})})]})]},t))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"강좌 진행 현황"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료"}),s.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[t.completedCourses,"개"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"진행중"}),s.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:[t.inProgressCourses,"개"]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"전체 진행률"}),s.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(t.completedCourses/t.totalCoursesEnrolled*100),"%"]})]}),s.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full",style:{width:t.completedCourses/t.totalCoursesEnrolled*100+"%"}})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"성취 현황"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(F,{className:"h-8 w-8 text-yellow-500"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["수료증 ",t.certificates,"개"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"강좌 완주 인증"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((e,r)=>s.jsx(T,{className:"h-5 w-5 "+(r<Math.floor(t.averageScore/20)?"text-yellow-500 fill-current":"text-gray-300 dark:text-gray-600")},r))}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["평균 ",t.averageScore,"점"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"퀴즈 성적"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-3",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["🔥 ",t.streak,"일 연속 학습 중!"]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"계속해서 꾸준히 학습해보세요"})]})]})]})]})]}):null}function wr({course:e,progress:t,showEnrollButton:r=!0,onEnroll:i}){const l=n(),[d,o]=a.useState(!1),c=e=>0===e?"무료":new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(e),m=async()=>{if(i){o(!0);try{await i(e.id)}catch(t){}finally{o(!1)}}},x=()=>{l(`/learning/${e.id}`)},g=()=>{l(`/learning/${e.id}`)};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden group hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-purple-400 to-blue-500 overflow-hidden",children:[e.thumbnail?s.jsx("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full text-white",children:s.jsx(M,{className:"h-16 w-16 opacity-50"})}),s.jsxs("div",{className:"absolute top-3 left-3",children:["completed"===(null==t?void 0:t.status)&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[s.jsx(_,{className:"h-3 w-3 mr-1"}),"완료"]}),(null==t?void 0:t.isEnrolled)&&"completed"!==t.status&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[s.jsx(P,{className:"h-3 w-3 mr-1"}),"수강중"]}),"published"!==e.status&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:[s.jsx(A,{className:"h-3 w-3 mr-1"}),"준비중"]})]}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white/90 text-gray-900",children:c(e.price)})}),(null==t?void 0:t.isEnrolled)&&"completed"!==t.status&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50",children:s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-white text-xs mb-1",children:[s.jsx("span",{children:"진도율"}),s.jsxs("span",{children:[t.progress,"%"]})]}),s.jsx("div",{className:"bg-white/20 rounded-full h-1",children:s.jsx("div",{className:"bg-white h-1 rounded-full transition-all duration-300",style:{width:`${t.progress}%`}})})]})})]}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:{basic:"기초",fortune:"운세",compatibility:"궁합",professional:"전문가",special:"특강"}[e.category]}),s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:{beginner:"초급",intermediate:"중급",advanced:"고급",expert:"전문가"}[e.level]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(L,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.instructor_name})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx($,{className:"h-3 w-3 mr-1"}),(e=>{const t=Math.floor(e/60),r=e%60;return t>0?`${t}시간 ${r}분`:`${r}분`})(e.duration)]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(M,{className:"h-3 w-3 mr-1"}),e.lessons_count,"개 강의"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(T,{className:"h-3 w-3 mr-1 text-yellow-500"}),s.jsx("span",{children:e.rating.toFixed(1)})]}),s.jsxs("span",{children:["(",e.enrollment_count,")"]})]})]}),r&&((null==t?void 0:t.isEnrolled)?"completed"===t.status?s.jsxs("button",{onClick:g,className:"w-full px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[s.jsx(_,{className:"h-4 w-4 mr-1"}),"다시 보기"]}):t.progress>0?s.jsxs("button",{onClick:x,className:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[s.jsx(P,{className:"h-4 w-4 mr-1"}),"이어서 보기"]}):s.jsxs("button",{onClick:g,className:"w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[s.jsx(P,{className:"h-4 w-4 mr-1"}),"시작하기"]}):s.jsx("button",{onClick:m,disabled:d||"published"!==e.status,className:"w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"수강신청 중...":0===e.price?"무료 수강하기":`${c(e.price)} 결제`})),(null==t?void 0:t.isEnrolled)&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.completedLessons,"/",t.totalLessons," 강의 완료","completed"===t.status&&s.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:"🎉 수료 완료"})]})})]})]})}function Sr(){const{todos:e,addTodo:t}=Tt(),[r,n]=a.useState(null),[i,l]=a.useState(!0),[d,o]=a.useState(null),[c,m]=a.useState(!1),[x,g]=a.useState("overview"),[h,u]=a.useState([]),[p,b]=a.useState(!1),[y,j]=a.useState(!1),[f,v]=a.useState(!1),k=(N={onAddEvent:()=>b(!0),onAddTodo:()=>v(!0),onWriteDiary:()=>j(!0)},[{id:"add-event",label:"일정 추가",icon:"📅",color:"bg-blue-500 hover:bg-blue-600",action:()=>{var e;null==(e=null==N?void 0:N.onAddEvent)||e.call(N)}},{id:"add-todo",label:"할일 추가",icon:"✅",color:"bg-green-500 hover:bg-green-600",action:()=>{var e;null==(e=null==N?void 0:N.onAddTodo)||e.call(N)}},{id:"write-diary",label:"일기 작성",icon:"📝",color:"bg-purple-500 hover:bg-purple-600",action:()=>{var e;null==(e=null==N?void 0:N.onWriteDiary)||e.call(N)}},{id:"view-calendar",label:"캘린더 보기",icon:"🗓️",color:"bg-orange-500 hover:bg-orange-600",action:()=>{window.location.href="/calendar"}}]);var N;const w=async(t=!1)=>{t?m(!0):l(!0),o(null);try{const t=await(async(e=[])=>{try{const[t,r,a]=await Promise.all([_t(e),Pt(e),At(e)]);return{today:t,week:r,month:a}}catch(d){throw d}})(e);n(t)}catch(r){o("대시보드 데이터를 불러오는데 실패했습니다.")}finally{l(!1),m(!1)}};a.useEffect(()=>{w(),S()},[e]);const S=async()=>{try{u([{id:"1",title:"사주 기초 입문 과정",description:"사주의 기본 개념부터 실전 해석까지",level:"beginner",category:"basic",status:"published",instructor_id:"1",instructor_name:"김사주 선생님",price:0,rating:4.8,enrollment_count:1234,duration:240,lessons_count:12,created_at:"2024-01-01"},{id:"2",title:"고급 사주 해석법",description:"전문가 수준의 사주 분석 기법",level:"advanced",category:"professional",status:"published",instructor_id:"2",instructor_name:"이운세 선생님",price:99e3,rating:4.9,enrollment_count:567,duration:480,lessons_count:24,created_at:"2024-02-01"}])}catch(e){}};return i&&!r?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-48 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-32"})]}),s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"h-10 w-24 bg-gray-200 dark:bg-gray-600 rounded"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"}),s.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"}),s.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"})]})]})]})}):d?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"😵"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"오류가 발생했습니다"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:d}),s.jsx("button",{onClick:()=>w(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"다시 시도"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"overview"===x?"📊 대시보드":"🎓 학습 현황"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"overview"===x?"한눈에 보는 나의 활동 현황":"학습 진도와 성취를 확인하세요"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 border border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>g("overview"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+("overview"===x?"bg-purple-600 text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"개요"}),s.jsx("button",{onClick:()=>g("learning"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+("learning"===x?"bg-purple-600 text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"학습"})]}),s.jsxs("button",{onClick:()=>{w(!0)},disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[s.jsx(R,{className:"h-4 w-4 "+(c?"animate-spin":"")}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:c?"새로고침 중...":"새로고침"})]})]})]}),"overview"===x?s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r&&s.jsx(Ot,{todayData:r.today,loading:i}),r&&s.jsx(Kt,{weeklyData:r.week,loading:i})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsx(It,{actions:k,loading:i}),r&&s.jsx(Bt,{monthlyData:r.month,loading:i})]})]}):s.jsxs("div",{className:"space-y-8",children:[s.jsx(Nr,{userId:"user-1"}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"수강 중인 강좌"}),0===h.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📚"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"수강 중인 강좌가 없습니다"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"새로운 강좌를 수강해보세요"}),s.jsx("button",{onClick:()=>window.location.href="/saju",className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"강좌 둘러보기"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>s.jsx(wr,{course:e,progress:{courseId:e.id,enrollmentId:`enrollment-${e.id}`,progress:"1"===e.id?25:60,completedLessons:"1"===e.id?3:14,totalLessons:e.lessons_count,isEnrolled:!0,status:(e.id,"enrolled")},showEnrollButton:!1},e.id))})]})]}),r&&s.jsx("div",{className:"mt-8 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"text-3xl",children:"🎯"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"오늘의 인사이트"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[0===r.today.totalTodos&&s.jsx("p",{children:"• 오늘 할일을 추가하여 하루를 계획해보세요"}),null===r.today.diary&&s.jsx("p",{children:"• 하루를 마무리하며 일기를 작성해보세요"}),r.week.completionRate>80&&s.jsxs("p",{children:["• 이번 주 할일 완료율이 ",r.week.completionRate,"%입니다. 정말 잘하고 계시네요! 🎉"]}),r.week.completionRate<50&&r.week.completionRate>0&&s.jsx("p",{children:"• 할일 완료율이 낮습니다. 작은 목표부터 차근차근 시작해보세요"}),0===r.month.totalActivities&&s.jsx("p",{children:"• 이번 달의 첫 활동을 기록해보세요!"})]})]})]})})]}),p&&s.jsx(jr,{isOpen:p,onClose:()=>b(!1),onSave:e=>{b(!1),w(!0)}}),y&&s.jsx(kr,{isOpen:y,date:new Date,onClose:()=>j(!1),onSave:()=>{j(!1),w(!0)}}),f&&(()=>{const e=prompt("새로운 할일을 입력하세요:");return e&&(t({text:e,completed:!1,priority:"medium",date:(new Date).toISOString().split("T")[0]}),w(!0)),v(!1),null})()]})}function Cr({stats:e}){const t=e=>new Intl.NumberFormat("ko-KR").format(e),r=[{title:"전체 강좌",value:t(e.totalCourses),icon:M,color:"blue",bgColor:"bg-blue-50 dark:bg-blue-900/20",iconColor:"text-blue-600 dark:text-blue-400",textColor:"text-blue-600 dark:text-blue-400",description:"개설된 강좌 수"},{title:"전체 학생",value:t(e.totalStudents),icon:O,color:"green",bgColor:"bg-green-50 dark:bg-green-900/20",iconColor:"text-green-600 dark:text-green-400",textColor:"text-green-600 dark:text-green-400",description:"등록된 학생 수"},{title:"수강신청",value:t(e.totalEnrollments),icon:K,color:"purple",bgColor:"bg-purple-50 dark:bg-purple-900/20",iconColor:"text-purple-600 dark:text-purple-400",textColor:"text-purple-600 dark:text-purple-400",description:"총 수강신청 건수",subStats:[{label:"진행중",value:e.activeEnrollments},{label:"완료",value:e.completedEnrollments}]},{title:"총 수익",value:(a=e.totalRevenue,new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(a)),icon:B,color:"emerald",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",iconColor:"text-emerald-600 dark:text-emerald-400",textColor:"text-emerald-600 dark:text-emerald-400",description:"전체 매출 현황"},{title:"평균 평점",value:e.averageRating.toFixed(1),icon:T,color:"yellow",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",iconColor:"text-yellow-600 dark:text-yellow-400",textColor:"text-yellow-600 dark:text-yellow-400",description:"강좌 평균 만족도",suffix:"/5.0"},{title:"완료율",value:`${e.completionRate}%`,icon:C,color:"indigo",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",iconColor:"text-indigo-600 dark:text-indigo-400",textColor:"text-indigo-600 dark:text-indigo-400",description:"수강 완료율"}];var a;return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((r,a)=>s.jsxs("div",{className:`${r.bgColor} rounded-xl p-6 border border-opacity-20`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-3 ${r.bgColor} rounded-lg`,children:s.jsx(r.icon,{className:`h-6 w-6 ${r.iconColor}`})}),"green"===r.color&&e.totalEnrollments>0&&s.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[s.jsx(I,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-xs font-medium",children:["+",Math.round(e.activeEnrollments/e.totalEnrollments*100),"%"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r.title}),s.jsxs("div",{className:"flex items-baseline space-x-2",children:[s.jsx("p",{className:`text-2xl font-bold ${r.textColor}`,children:r.value}),r.suffix&&s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.suffix})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.description}),r.subStats&&s.jsx("div",{className:"flex space-x-4 mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:r.subStats.map((e,a)=>s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.label}),s.jsx("p",{className:`text-sm font-semibold ${r.textColor}`,children:t(e.value)})]},a))})]})]},a))})}function Mr({courses:e,onRefresh:t}){const[r,n]=a.useState(""),[i,l]=a.useState("all"),[d,o]=a.useState("all"),[c,m]=a.useState("all"),x={beginner:"초급",intermediate:"중급",advanced:"고급",expert:"전문가"},g={basic:"기초",fortune:"운세",compatibility:"궁합",professional:"전문가",special:"특강"},h={draft:"초안",published:"공개",archived:"보관됨",coming_soon:"출시 예정"},u={draft:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",published:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",archived:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",coming_soon:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"},p=e.filter(e=>{const t=e.title.toLowerCase().includes(r.toLowerCase()),a="all"===i||e.status===i,s="all"===d||e.category===d,n="all"===c||e.level===c;return t&&a&&s&&n});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"강좌 관리"}),s.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["총 ",p.length,"개의 강좌"]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(z,{className:"h-4 w-4"}),"새 강좌 추가"]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"강좌명 검색...",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("select",{value:i,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"all",children:"모든 상태"}),s.jsx("option",{value:"draft",children:"초안"}),s.jsx("option",{value:"published",children:"공개"}),s.jsx("option",{value:"archived",children:"보관됨"}),s.jsx("option",{value:"coming_soon",children:"출시 예정"})]}),s.jsxs("select",{value:d,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"all",children:"모든 카테고리"}),s.jsx("option",{value:"basic",children:"기초"}),s.jsx("option",{value:"fortune",children:"운세"}),s.jsx("option",{value:"compatibility",children:"궁합"}),s.jsx("option",{value:"professional",children:"전문가"}),s.jsx("option",{value:"special",children:"특강"})]}),s.jsxs("select",{value:c,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"all",children:"모든 레벨"}),s.jsx("option",{value:"beginner",children:"초급"}),s.jsx("option",{value:"intermediate",children:"중급"}),s.jsx("option",{value:"advanced",children:"고급"}),s.jsx("option",{value:"expert",children:"전문가"})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:0===p.length?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(M,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"강좌가 없습니다"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"새로운 강좌를 추가하거나 검색 조건을 변경해보세요"}),s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"새 강좌 추가"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"강좌 정보"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"상태"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"가격"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"통계"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"생성일"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"작업"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:p.map(e=>{return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:s.jsx(M,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:g[e.category]}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:x[e.level]})]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u[e.status]}`,children:h[e.status]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:0===e.price?"무료":(r=e.price,new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(r))}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(O,{className:"h-4 w-4 mr-1"}),e.enrollment_count]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(T,{className:"h-4 w-4 mr-1"}),e.rating.toFixed(1)]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(t=e.created_at,new Date(t).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}))}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400",children:s.jsx(W,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400",children:s.jsx(H,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:s.jsx(Y,{className:"h-4 w-4"})})]})})]},e.id);var t,r})})]})})})]})}function $r({stats:e}){const t=parseFloat(e.completionRate),r=(e,t=0)=>{const r=360*e/100,a=t+r,s=50+40*Math.cos(Math.PI*t/180),n=50+40*Math.sin(Math.PI*t/180),i=50+40*Math.cos(Math.PI*a/180),l=50+40*Math.sin(Math.PI*a/180);return 100===e?"M 50 10 A 40 40 0 1 1 49.99 10 Z":`M 50 50 L ${s} ${n} A 40 40 0 ${r>180?1:0} 1 ${i} ${l} Z`},a=e.totalEnrollments>0?e.activeEnrollments/e.totalEnrollments*100:0,n=e.totalEnrollments>0?e.completedEnrollments/e.totalEnrollments*100:0;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"수강신청 현황"}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["전체 ",e.totalEnrollments.toLocaleString(),"건"]})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 transform -rotate-90",children:[s.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-gray-200 dark:text-gray-700"}),n>0&&s.jsx("path",{d:r(n,0),fill:"currentColor",className:"text-green-500"}),a>0&&s.jsx("path",{d:r(a,360*n/100),fill:"currentColor",className:"text-blue-500"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[t.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"완료율"})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"완료"}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.completedEnrollments.toLocaleString(),"건 (",n.toFixed(1),"%)"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"진행중"}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.activeEnrollments.toLocaleString(),"건 (",a.toFixed(1),"%)"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-gray-300 dark:bg-gray-600 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"기타"}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(e.totalEnrollments-e.activeEnrollments-e.completedEnrollments).toLocaleString(),"건"]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.totalStudents.toLocaleString()}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"총 학생 수"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[e.averageRating.toFixed(1),"/5.0"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"평균 만족도"})]})]})]})}function Er({totalRevenue:e}){const t=e=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(e),r=[{month:"1월",revenue:.08*e},{month:"2월",revenue:.06*e},{month:"3월",revenue:.12*e},{month:"4월",revenue:.09*e},{month:"5월",revenue:.15*e},{month:"6월",revenue:.11*e},{month:"7월",revenue:.13*e},{month:"8월",revenue:.1*e},{month:"9월",revenue:.16*e}],a=Math.max(...r.map(e=>e.revenue));return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"월별 매출 현황"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"2024년 누적 매출"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-green-600 dark:text-green-400",children:[s.jsx(I,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"+12.5%"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(B,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"}),s.jsx("span",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t(e)})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"전체 매출 합계"})]}),s.jsx("div",{className:"space-y-3",children:r.map((e,r)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 text-xs text-gray-500 dark:text-gray-400 text-right",children:e.month}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative overflow-hidden",children:s.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 h-full rounded-full transition-all duration-1000 ease-out",style:{width:e.revenue/a*100+"%"},children:s.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-full"})})})}),s.jsx("div",{className:"w-20 text-xs text-gray-600 dark:text-gray-300 text-right",children:t(e.revenue)})]},r))}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:t(r[r.length-1].revenue)}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"이번 달"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:t(e/r.length)}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"월 평균"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:"+12.5%"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"전월 대비"})]})]})]})}function Dr(){const e=n(),[t,r]=a.useState(null),[i,l]=a.useState([]),[d,o]=a.useState(!0),[c,m]=a.useState(null),[x,g]=a.useState("overview"),h=async()=>{try{const e=await fetch("/api/academy/stats/overview");if(!e.ok)throw new Error("Failed to fetch academy stats");const t=await e.json();if(!t.success)throw new Error(t.error||"Failed to load stats");r(t.data)}catch(e){m("통계 데이터를 불러오는데 실패했습니다.")}},u=async()=>{try{const e=await fetch("/api/academy/courses?limit=10&sort_by=created_at&sort_order=desc");if(!e.ok)throw new Error("Failed to fetch courses");const t=await e.json();if(!t.success)throw new Error(t.error||"Failed to load courses");l(t.data.courses)}catch(e){m("강좌 데이터를 불러오는데 실패했습니다.")}};a.useEffect(()=>{(async()=>{o(!0),m(null);try{await Promise.all([h(),u()])}catch(e){}finally{o(!1)}})()},[]);const p=async()=>{await Promise.all([h(),u()])};return d?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"animate-pulse mb-8",children:[s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-64 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-48"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((e,t)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-1/2"})]},t))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:s.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded"})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:s.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded"})})]})]})}):c?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"❌"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"데이터를 불러올 수 없습니다"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:c}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"새로고침"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[s.jsx(K,{className:"h-8 w-8 text-blue-600"}),"아카데미 관리 대시보드"]}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"운명나침반 교육 플랫폼 관리 및 현황"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>e("/admin/users"),className:"px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[s.jsx(U,{className:"h-4 w-4"}),"사용자 관리"]}),s.jsx("button",{onClick:p,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"새로고침"}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx(z,{className:"h-4 w-4"}),"새 강좌"]})]})]}),s.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-8",children:[{key:"overview",label:"개요",icon:D},{key:"courses",label:"강좌 관리",icon:M},{key:"enrollments",label:"수강 현황",icon:O},{key:"analytics",label:"분석",icon:I}].map(({key:e,label:t,icon:r})=>s.jsxs("button",{onClick:()=>g(e),className:"flex items-center gap-2 px-6 py-3 border-b-2 transition-colors "+(x===e?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[s.jsx(r,{className:"h-4 w-4"}),t]},e))}),"overview"===x&&s.jsxs("div",{className:"space-y-8",children:[t&&s.jsx(Cr,{stats:t}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t&&s.jsx($r,{stats:t}),t&&s.jsx(Er,{totalRevenue:t.totalRevenue})]})]}),"courses"===x&&s.jsx(Mr,{courses:i,onRefresh:p}),"enrollments"===x&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"수강 현황 관리"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"수강생 관리 기능이 곧 추가됩니다."})]}),"analytics"===x&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"상세 분석"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"상세 분석 대시보드가 곧 추가됩니다."})]})]})})}const Tr=()=>{const{user:e,token:t}=rt(),r=n(),[i,l]=a.useState([]),[d,o]=a.useState(!0),[c,m]=a.useState(null),[x,g]=a.useState("all"),[h,u]=a.useState(""),[p,b]=a.useState(null),[y,j]=a.useState(""),[f,v]=a.useState(!1);a.useEffect(()=>{(!e||"admin"!==e.role&&"super_admin"!==e.role)&&r("/dashboard")},[e,r]);const k=async()=>{if(t){o(!0),m(null);try{const e=new URLSearchParams;"all"!==x&&e.append("approval_status",x),h&&e.append("search",h);const r=await fetch(`/api/admin/users?${e}`,{headers:{Authorization:`Bearer ${t}`}}),a=await r.json();if(!r.ok)throw new Error(a.success?"사용자 목록을 불러올 수 없습니다.":"권한이 없습니다.");l(a.users)}catch(e){m(e.message)}finally{o(!1)}}};a.useEffect(()=>{k()},[x,h,t]);const N=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"suspended":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";default:return"bg-gray-100 text-gray-800"}},w=e=>{switch(e){case"pending":return"승인 대기";case"approved":return"승인됨";case"rejected":return"거부됨";case"suspended":return"정지됨";default:return e}};return d&&0===i.length?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full"})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4",children:[s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"사용자 관리"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"회원 승인, 거부, 정지 및 역할 관리"})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"상태 필터"}),s.jsxs("select",{value:x,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"all",children:"전체"}),s.jsx("option",{value:"pending",children:"승인 대기"}),s.jsx("option",{value:"approved",children:"승인됨"}),s.jsx("option",{value:"rejected",children:"거부됨"}),s.jsx("option",{value:"suspended",children:"정지됨"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"검색 (이메일/이름)"}),s.jsx("input",{type:"text",value:h,onChange:e=>u(e.target.value),placeholder:"검색어 입력...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})}),c&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700 dark:text-red-400",children:c})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"사용자"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"역할"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"상태"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"가입일"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"액션"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:0===i.length?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"사용자가 없습니다."})}):i.map(r=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.username}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("select",{value:r.role,onChange:e=>(async(e,r)=>{if(t&&confirm(`역할을 ${r}(으)로 변경하시겠습니까?`))try{const a=await fetch(`/api/admin/users/${e}/role`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({role:r})}),s=await a.json();if(!a.ok)throw new Error(s.error||"역할 변경에 실패했습니다.");alert("역할이 변경되었습니다."),k()}catch(a){alert(a.message)}})(r.id,e.target.value),className:"text-sm px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:r.id===(null==e?void 0:e.id),children:[s.jsx("option",{value:"user",children:"일반 사용자"}),s.jsx("option",{value:"admin",children:"관리자"}),s.jsx("option",{value:"super_admin",children:"슈퍼 관리자"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${N(r.approval_status)}`,children:w(r.approval_status)})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:new Date(r.created_at).toLocaleDateString("ko-KR")}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:["pending"===r.approval_status&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>(async e=>{if(t&&confirm("이 사용자를 승인하시겠습니까?"))try{const r=await fetch(`/api/admin/users/${e}/approve`,{method:"POST",headers:{Authorization:`Bearer ${t}`}}),a=await r.json();if(!r.ok)throw new Error(a.error||"승인에 실패했습니다.");alert("사용자가 승인되었습니다."),k()}catch(r){alert(r.message)}})(r.id),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"승인"}),s.jsx("button",{onClick:()=>(e=>{b(e),j(""),v(!0)})(r),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"거부"})]}),"approved"===r.approval_status&&"admin"!==r.role&&"super_admin"!==r.role&&s.jsx("button",{onClick:()=>(async e=>{if(t&&confirm("이 사용자를 정지하시겠습니까?"))try{const r=await fetch(`/api/admin/users/${e}/suspend`,{method:"POST",headers:{Authorization:`Bearer ${t}`}}),a=await r.json();if(!r.ok)throw new Error(a.error||"정지에 실패했습니다.");alert("사용자가 정지되었습니다."),k()}catch(r){alert(r.message)}})(r.id),className:"px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700",children:"정지"})]})})]},r.id))})]})})})]}),f&&p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"사용자 거부"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[p.username,"(",p.email,")의 가입을 거부하는 이유를 입력해주세요."]}),s.jsx("textarea",{value:y,onChange:e=>j(e.target.value),placeholder:"거부 사유를 입력하세요...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-4",rows:4}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{v(!1),b(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"취소"}),s.jsx("button",{onClick:async()=>{if(t&&p&&y.trim())try{const e=await fetch(`/api/admin/users/${p.id}/reject`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({reason:y})}),r=await e.json();if(!e.ok)throw new Error(r.error||"거부에 실패했습니다.");alert("사용자가 거부되었습니다."),v(!1),b(null),k()}catch(e){alert(e.message)}else alert("거부 사유를 입력해주세요.")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"거부하기"})]})]})})]})},Fr=({viewMode:e,currentDate:t})=>{const[r,s]=a.useState({diaries:[],diaryDates:new Set,loading:!1,error:null}),n=a.useCallback(()=>{let r,a;switch(e){case"year":r=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),11,31);break;case"month":default:r=Ne(t),a=we(t);break;case"week":r=fe(t,{weekStartsOn:0}),a=ve(t,{weekStartsOn:0});break;case"day":r=t,a=t}return{startDate:ye(r,"yyyy-MM-dd"),endDate:ye(a,"yyyy-MM-dd")}},[e,t]),i=a.useCallback(async()=>{s(e=>({...e,loading:!0,error:null}));try{const{startDate:e,endDate:t}=n(),r=await ft(e,t),a=new Set;r.forEach(e=>{e.date&&(e.content&&e.content.trim()||e.images&&e.images.length>0)&&a.add(e.date)}),s({diaries:r,diaryDates:a,loading:!1,error:null})}catch(e){s(e=>({...e,loading:!1,error:"Failed to load diary entries"}))}},[n]),l=a.useCallback(e=>{const t="string"==typeof e?e:ye(e,"yyyy-MM-dd");return r.diaryDates.has(t)},[r.diaryDates]),d=a.useCallback(e=>{const t="string"==typeof e?e:ye(e,"yyyy-MM-dd");return r.diaries.find(e=>e.date===t)},[r.diaries]);return a.useEffect(()=>{i()},[i]),{diaries:r.diaries,diaryDates:r.diaryDates,loading:r.loading,error:r.error,hasDiary:l,getDiaryForDate:d,reloadDiaries:i}},_r={reflection:["오늘 하루 가장 감사했던 순간은 언제였나요?","마음 깊은 곳의 진짜 기분을 솔직하게 적어보세요.","오늘 나에게 가장 소중했던 것은 무엇인가요?","하루를 돌아보며, 나는 어떤 사람이었는지 생각해보세요.","오늘의 나에게 전하고 싶은 한 마디가 있다면?","마음속 깊은 곳의 목소리에 귀 기울여보세요.","오늘 나를 가장 행복하게 만든 순간을 기억해보세요.","지금 이 순간 내 마음은 어떤 색깔인가요?","오늘 하루 나는 누구를 위해 살았나요?","마음이 가장 평화로웠던 시간을 떠올려보세요.","오늘의 나에게 칭찬해주고 싶은 점이 있다면?","하루 종일 가슴 한편에 머물렀던 생각을 적어보세요.","오늘 나는 어떤 마음으로 사람들을 만났나요?","지금 이 순간 내가 가장 그리운 것은 무엇인가요?","오늘의 경험 중 마음에 가장 깊이 새겨두고 싶은 것은?"],emotion:["때로는 슬픔도 소중한 감정입니다. 있는 그대로 받아들여보세요.","웃었던 순간들을 기억해보세요. 그 따뜻함을 글로 남겨보세요.","기쁨이든 슬픔이든, 지금 이 감정도 소중한 나의 일부입니다.","마음이 무거울 때일수록, 작은 행복을 찾아보세요.","감정을 억누르지 말고, 종이 위에 자유롭게 풀어놓으세요.","오늘의 감정들이 내일의 나를 더 단단하게 만들어줄 거예요.","눈물이 나더라도 괜찮아요. 그것도 마음을 정화하는 방법입니다.","행복했던 순간을 글로 적으면서 그 기분을 다시 느껴보세요.","마음속 감정들을 색깔로 표현한다면 어떤 색일까요?","오늘 느낀 모든 감정들에게 고마움을 전해보세요.","감정의 파도가 지나가는 것을 지켜보며 기록해보세요.","내 마음의 날씨는 지금 어떤가요? 맑음? 흐림? 비?","감정도 계절처럼 변한다는 걸 기억하세요.","오늘의 감정을 한 줄로 요약한다면?","마음이 시키는 대로 자유롭게 써보세요."],relationship:["오늘 만난 사람들 중 누구에게 고마움을 느꼈나요?","가족이나 친구에게 하고 싶었던 말을 적어보세요.","오늘 누군가에게 따뜻함을 전했던 순간이 있나요?","소중한 사람과의 대화 중 기억에 남는 말이 있다면?","오늘 누군가의 미소가 나를 행복하게 만들었나요?","마음을 나누고 싶은 사람이 지금 생각나시나요?","오늘 받은 작은 친절이나 배려를 기록해보세요.","누군가에게 미안한 마음이 있다면 솔직하게 적어보세요.","오늘 내가 누군가에게 도움이 되었던 순간이 있나요?","가장 그리운 사람에게 편지를 쓴다면?","오늘의 만남들이 내게 준 의미를 생각해보세요.","혼자였지만 외롭지 않았던 순간, 함께였지만 외로웠던 순간은?","오늘 누군가의 마음을 이해할 수 있었던 순간이 있나요?","내가 사랑하는 사람들의 얼굴을 떠올리며 써보세요.","오늘 새로운 인연이나 깊어진 관계가 있었나요?"],growth:["오늘 새롭게 배운 것이나 깨달은 점이 있다면 기록해보세요.","어제보다 조금이라도 나아진 모습을 찾아보세요.","오늘 나의 한계를 뛰어넘으려 노력했던 순간이 있나요?","실수나 실패에서도 배울 점을 찾아보세요.","미래의 나에게 지금의 경험이 어떤 도움이 될까요?","오늘의 도전이 내일의 성장으로 이어질 거예요.","작은 변화라도 그것이 시작이라는 걸 기억하세요.","오늘 내가 용기를 냈던 순간을 기록해보세요.","어려운 상황에서도 포기하지 않은 나를 칭찬해주세요.","오늘의 경험이 나를 더 지혜롭게 만들었나요?","새로운 시각으로 바라본 것들이 있다면?","오늘 내가 한 선택들을 돌아보며 배운 점은?","힘들었지만 끝까지 해낸 일이 있나요?","오늘의 나를 어제의 나와 비교해보세요.","성장하고 있는 나 자신을 믿어보세요."],gratitude:["오늘 가장 감사한 세 가지를 적어보세요.","작은 일상 속에서 찾은 행복을 기록해보세요.","나를 위해 힘써준 사람들을 떠올리며 감사 인사를 써보세요.","오늘 내가 누릴 수 있었던 것들에 감사해보세요.","건강한 하루를 보낼 수 있어서 감사하다는 마음을 적어보세요.","따뜻한 잠자리, 맛있는 음식... 당연한 것들에 감사해보세요.","오늘 나를 웃게 만든 것들을 나열해보세요.","사계절의 변화, 자연의 아름다움에 감사한 마음을 써보세요.","가족, 친구들의 존재에 대한 감사함을 표현해보세요.","오늘 하루 무사히 보낼 수 있어서 감사합니다.","내가 가진 작은 재능이나 능력에 감사해보세요.","어려움 속에서도 나를 지켜준 것들을 생각해보세요.","오늘의 모든 순간들이 선물이었다고 생각해보세요.","나를 사랑해주는 사람들이 있어서 감사합니다.","지금 이 순간, 글을 쓸 수 있어서 감사합니다."]};function Pr(e){const t=1e4*Math.sin(e);return t-Math.floor(t)}function Ar(e){const t=function(e){return 1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate()}(e),r=Object.keys(_r),a=r[Math.floor(Pr(t)*r.length)],s=_r[a];return{advice:s[Math.floor(Pr(t+1)*s.length)],category:a}}function Lr(e){return{reflection:"🤔",emotion:"💝",relationship:"👥",growth:"🌱",gratitude:"🙏"}[e]}function Rr(e){return{reflection:"#8B5CF6",emotion:"#EC4899",relationship:"#3B82F6",growth:"#10B981",gratitude:"#F59E0B"}[e]}function Or({images:e,currentIndex:t,isOpen:r,onClose:n,onNext:i,onPrev:l}){const[d,o]=a.useState(t),[c,m]=a.useState(!0);a.useEffect(()=>{o(t)},[t]),a.useEffect(()=>{if(!r)return;const e=e=>{"Escape"===e.key?n():"ArrowLeft"===e.key?g():"ArrowRight"===e.key&&x()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r,d,e.length]);const x=()=>{if(e.length<=1)return;const t=(d+1)%e.length;o(t),m(!0),null==i||i()},g=()=>{if(e.length<=1)return;const t=(d-1+e.length)%e.length;o(t),m(!0),null==l||l()};return r&&e&&0!==e.length?s.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center",onClick:n,children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent",children:[s.jsxs("div",{className:"text-white text-sm font-medium",children:[d+1," / ",e.length]}),s.jsx("button",{onClick:n,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors backdrop-blur-sm","aria-label":"닫기",children:s.jsx(G,{className:"w-6 h-6 text-white"})})]}),s.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center",onClick:e=>e.stopPropagation(),children:[c&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-12 h-12 border-4 border-white/20 border-t-white rounded-full animate-spin"})}),s.jsx("img",{src:e[d],alt:`이미지 ${d+1}`,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl",onLoad:()=>{m(!1)},style:{display:c?"none":"block"}}),e.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),g()},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-all backdrop-blur-sm group","aria-label":"이전 이미지",children:s.jsx(Q,{className:"w-6 h-6 text-white group-hover:scale-110 transition-transform"})}),s.jsx("button",{onClick:e=>{e.stopPropagation(),x()},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-all backdrop-blur-sm group","aria-label":"다음 이미지",children:s.jsx(V,{className:"w-6 h-6 text-white group-hover:scale-110 transition-transform"})})]})]}),e.length>1&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/50 to-transparent",children:s.jsx("div",{className:"flex items-center justify-center gap-2 overflow-x-auto max-w-full",children:e.map((e,t)=>s.jsx("button",{onClick:e=>{e.stopPropagation(),o(t),m(!0)},className:`\n                  relative w-16 h-16 rounded-lg overflow-hidden border-2 transition-all flex-shrink-0\n                  ${t===d?"border-white scale-110 shadow-xl":"border-white/30 hover:border-white/60 hover:scale-105"}\n                `,children:s.jsx("img",{src:e,alt:`썸네일 ${t+1}`,className:"w-full h-full object-cover"})},t))})}),s.jsxs("div",{className:"absolute bottom-4 left-4 text-white/60 text-xs",children:[s.jsx("div",{children:"ESC: 닫기"}),s.jsx("div",{children:"← →: 이미지 이동"})]})]}):null}const Kr=[{emoji:"😊",label:"기분 좋음"},{emoji:"😐",label:"보통"},{emoji:"😢",label:"슬픔"},{emoji:"😠",label:"화남"},{emoji:"😴",label:"피곤함"},{emoji:"🤔",label:"고민"},{emoji:"😍",label:"설렘"},{emoji:"😱",label:"놀람"}];function Br({isOpen:e,onClose:t,date:r,onSave:n}){const[i,l]=a.useState(r),[d,o]=a.useState(""),[c,m]=a.useState("😊"),[x,g]=a.useState(!1),[h,u]=a.useState(null),[p,b]=a.useState(null),[y,j]=a.useState(!1),[f,v]=a.useState(0),[k,N]=a.useState([]),[w,S]=a.useState(!1),[C,M]=a.useState(!1),[$,E]=a.useState(0),D=Ar(i),T=Ar(Ee(i)),F=Ee(i),_=a.useCallback(async e=>{var t,r;g(!0);try{const s=ye(e,"yyyy-MM-dd"),n=ye(Ee(e,1),"yyyy-MM-dd");try{const e=await vt(s);u(e),o(e.content||""),m(e.mood||"😊"),N(e.images||[])}catch(a){404===(null==(t=a.response)?void 0:t.status)&&u(null)}try{const e=await vt(n);b(e)}catch(a){404===(null==(r=a.response)?void 0:r.status)&&b(null)}}catch(a){}finally{g(!1)}},[]),P=a.useCallback(async()=>{if(d.trim()){j(!0);try{const e={date:ye(i,"yyyy-MM-dd"),content:d.trim(),mood:c,weather:void 0,images:k.length>0?k:void 0,tags:[]};if(null==h?void 0:h.id)await Nt(h.id,e);else{const t=await kt(e);u(t)}}catch(e){}finally{j(!1)}}},[d,i,c,k,h]);a.useEffect(()=>{e&&(l(r),_(r))},[e,r,_]),a.useEffect(()=>{e&&i&&_(i)},[i,e,_]),a.useEffect(()=>{if(!d.trim()||!h)return;const e=setTimeout(()=>{d===(null==h?void 0:h.content)&&c===(null==h?void 0:h.mood)&&JSON.stringify(k)===JSON.stringify((null==h?void 0:h.images)||[])||P()},3e3);return()=>clearTimeout(e)},[d,c,k,h,P]),a.useEffect(()=>{v(d.length)},[d]),a.useEffect(()=>{if(h){JSON.stringify(k)!==JSON.stringify(h.images||[])&&N(h.images||[])}else k.length>0&&N([])},[h,k]);const A=async()=>{var e,t,r;if(d.trim()){g(!0);try{const e=ye(i,"yyyy-MM-dd");let t;k.length>0&&(t=k);const r={date:e,content:d.trim(),mood:c,weather:void 0,images:t,tags:[]};let a;a=(null==h?void 0:h.id)?await Nt(h.id,r):await kt(r),u(a),n&&n(a),alert("일기가 저장되었습니다!")}catch(a){let s="일기 저장에 실패했습니다.";413===(null==(e=null==a?void 0:a.response)?void 0:e.status)?s="이미지 크기가 너무 큽니다. 더 작은 이미지를 선택해주세요.":500===(null==(t=null==a?void 0:a.response)?void 0:t.status)?s="서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.":404===(null==(r=null==a?void 0:a.response)?void 0:r.status)?s="다이어리 서비스에 연결할 수 없습니다.":(null==a?void 0:a.message)&&(s=`저장 실패: ${a.message}`),alert(s)}finally{g(!1)}}},L=()=>{l(Ee(i))},R=()=>{l($e(i,1))},O=async e=>new Promise(t=>{const r=document.createElement("canvas"),a=r.getContext("2d"),s=new Image;s.onload=()=>{let{width:n,height:i}=s;const l=e.size/1048576;let d=1920,o=1920,c=.85;l>20?(d=1200,o=1200,c=.7):l>10?(d=1600,o=1600,c=.75):l>5&&(d=1920,o=1920,c=.8);const m=Math.min(d/n,o/i);m<1&&(n=Math.floor(n*m),i=Math.floor(i*m)),r.width=n,r.height=i,a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.drawImage(s,0,0,n,i);const x=document.createElement("canvas");x.width=x.height=1;x.getContext("2d").fillRect(0,0,1,1);const g=x.toDataURL("image/webp").startsWith("data:image/webp");let h;h=g?r.toDataURL("image/webp",c):r.toDataURL("image/jpeg",c);if(3*h.length/4/1048576>2&&c>.5){const e=Math.max(.5,.8*c);h=r.toDataURL(g?"image/webp":"image/jpeg",e)}t(h)},s.src=URL.createObjectURL(e)});return e?s.jsxs("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",onClick:t,onKeyDown:e=>{"ArrowLeft"===e.key&&e.ctrlKey?L():"ArrowRight"===e.key&&e.ctrlKey?R():"Escape"===e.key?t():"s"===e.key&&e.ctrlKey&&(e.preventDefault(),A())},tabIndex:-1,children:[s.jsxs("div",{className:"diary-book-container relative max-w-6xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/20 to-gray-700/40 dark:from-slate-900/40 dark:to-slate-700/60 rounded-2xl transform rotate-1 scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800/30 to-gray-600/50 dark:from-slate-800/50 dark:to-slate-600/70 rounded-2xl transform -rotate-1 scale-102"}),s.jsxs("div",{className:"relative bg-gradient-to-b from-amber-50 to-amber-100 dark:from-slate-800 dark:to-slate-900 rounded-2xl shadow-2xl border-2 border-amber-200 dark:border-slate-700 p-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsx("div",{className:"text-sm font-medium text-amber-700 dark:text-gray-400",children:ye(i,"yyyy년 M월",{locale:Ce})}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("h1",{className:"text-2xl font-light text-amber-800 dark:text-gray-200 tracking-wide",style:{fontFamily:"Georgia, serif"},children:"하루의 여백"}),s.jsx("div",{className:"w-20 h-0.5 bg-gradient-to-r from-amber-400 to-amber-600 dark:from-purple-500 dark:to-indigo-500 mx-auto mt-2 rounded-full"})]}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:"✕"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 min-h-[500px]",children:[s.jsxs("div",{className:"diary-page relative",children:[s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-red-300 dark:bg-slate-600 rounded-full"}),s.jsxs("div",{className:"pl-6",children:[s.jsxs("div",{className:"border-b-2 border-dashed border-amber-300 dark:border-slate-600 pb-3 mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-amber-700 dark:text-gray-300",children:ye(F,"M월 d일",{locale:Ce})}),s.jsx("p",{className:"text-sm text-amber-600 dark:text-gray-400",children:ye(F,"EEEE",{locale:Ce})})]}),(null==p?void 0:p.mood)&&s.jsx("span",{className:"text-2xl",children:p.mood})]}),s.jsx("div",{className:"mt-3 p-2 bg-amber-100/50 dark:bg-slate-700/30 rounded-lg border border-amber-200 dark:border-slate-600",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"text-amber-600 dark:text-gray-400",children:Lr(T.category)}),s.jsx("span",{className:"text-amber-700 dark:text-gray-300 leading-relaxed",children:T.advice})]})})]}),s.jsx("div",{className:"diary-content",children:p?s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap text-sm",style:{fontFamily:"Georgia, serif"},children:p.content}),s.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.content.length,"자"]})]}):s.jsxs("div",{className:"text-center text-gray-400 dark:text-gray-500 italic py-8",children:[s.jsx("p",{className:"text-sm",children:"어제의 일기가 없습니다"}),s.jsx("span",{className:"text-2xl",children:"📝"})]})})]})]}),s.jsx("div",{className:"hidden lg:block absolute left-1/2 top-16 bottom-16 w-px bg-gradient-to-b from-amber-300 via-amber-400 to-amber-300 dark:from-transparent dark:via-slate-500 dark:to-transparent"}),s.jsxs("div",{className:"diary-page relative",children:[s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-red-300 dark:bg-slate-600 rounded-full"}),s.jsxs("div",{className:"pr-6",children:[s.jsxs("div",{className:"border-b-2 border-dashed border-amber-300 dark:border-slate-600 pb-3 mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-amber-700 dark:text-gray-300",children:ye(i,"M월 d일",{locale:Ce})}),s.jsx("p",{className:"text-sm text-amber-600 dark:text-gray-400",children:ye(i,"EEEE",{locale:Ce})})]}),s.jsx("div",{className:"flex gap-1",children:Kr.slice(0,4).map(({emoji:e})=>{var t;return s.jsx("button",{onClick:()=>m(e),className:"text-xl p-1 rounded transition-all hover:scale-110 "+(c===e?"bg-amber-200 dark:bg-slate-700 shadow-sm":"hover:bg-amber-100 dark:hover:bg-slate-800"),title:null==(t=Kr.find(t=>t.emoji===e))?void 0:t.label,children:e},e)})})]}),s.jsx("div",{className:"mt-3 p-3 rounded-lg border-2 border-dashed shadow-sm",style:{backgroundColor:`${Rr(D.category)}15`,borderColor:`${Rr(D.category)}40`},children:s.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[s.jsx("span",{className:"text-base mt-1",style:{color:Rr(D.category)},children:Lr(D.category)}),s.jsx("span",{className:"leading-relaxed font-medium",style:{color:Rr(D.category)},children:D.advice})]})})]}),s.jsxs("div",{className:"diary-content",children:[s.jsx("textarea",{value:d,onChange:e=>o(e.target.value),placeholder:"오늘 하루는 어땠나요? 마음속 이야기를 자유롭게 적어보세요...",className:"w-full h-64 p-0 border-none bg-transparent resize-none focus:outline-none text-gray-700 dark:text-gray-300 placeholder-amber-400 dark:placeholder-gray-500 leading-relaxed",style:{fontFamily:"Georgia, serif",fontSize:"14px",lineHeight:"24px",background:"repeating-linear-gradient(\n                        transparent,\n                        transparent 23px,\n                        rgba(251, 191, 36, 0.2) 23px,\n                        rgba(251, 191, 36, 0.2) 24px\n                      )"}}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 \n                                       bg-slate-100 dark:bg-slate-700 \n                                       hover:bg-slate-200 dark:hover:bg-slate-600 \n                                       rounded-lg cursor-pointer transition-colors w-fit\n                                       "+(w?"opacity-50 cursor-not-allowed":""),children:[s.jsx(J,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:w?"압축 중...":"사진 추가"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:async e=>{const t=e.target.files;if(t&&0!==t.length)if(k.length+t.length>3)alert("최대 3장까지 업로드 가능합니다");else{S(!0);try{const e=[];for(const r of Array.from(t)){if(!r.type.startsWith("image/")){alert("이미지 파일만 업로드 가능합니다");continue}if(r.size>52428800){alert("파일 크기는 50MB 이하만 가능합니다");continue}const t=await O(r);t.length;e.push(t)}N(t=>[...t,...e])}catch(r){alert("이미지 업로드 중 오류가 발생했습니다")}finally{S(!1),e.target.value=""}}},disabled:w})]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"최대 3장 • 자동 WebP 압축 • 50MB 이하"})]}),k.length>0&&s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3",children:k.map((e,t)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:e,className:"w-full h-20 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity",alt:`업로드된 이미지 ${t+1}`,onClick:()=>{E(t),M(!0)}}),s.jsx("button",{onClick:()=>{return e=t,void N(t=>t.filter((t,r)=>r!==e));var e},className:"absolute top-1 right-1 \n                                         bg-red-500 hover:bg-red-600 text-white \n                                         rounded-full w-5 h-5 flex items-center justify-center\n                                         opacity-0 group-hover:opacity-100 \n                                         transition-opacity text-xs font-bold",children:s.jsx(G,{className:"w-3 h-3"})})]},t))}),w&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500"}),s.jsx("span",{children:"이미지 업로드 중..."})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{children:[f,"자"]}),y&&s.jsx("span",{className:"text-blue-500 animate-pulse",children:"자동 저장 중..."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-amber-500",children:"✨"}),s.jsx("span",{children:"일기장"})]})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-amber-200 dark:border-slate-700",children:[s.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 text-amber-700 dark:text-gray-300 hover:bg-amber-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[s.jsx("span",{className:"text-lg",children:"◀"}),s.jsx("span",{className:"text-sm font-medium",children:"어제"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[!De(i)&&s.jsx("button",{onClick:()=>l(new Date),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium transition-colors",children:"오늘"}),s.jsx("div",{className:"text-xs text-amber-600 dark:text-gray-500",children:"Ctrl + ← → 로 페이지 이동"})]}),s.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 text-amber-700 dark:text-gray-300 hover:bg-amber-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[s.jsx("span",{className:"text-sm font-medium",children:"내일"}),s.jsx("span",{className:"text-lg",children:"▶"})]})]}),s.jsx("div",{className:"flex justify-end items-center mt-4",children:s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{onClick:A,disabled:!d.trim()||x,className:`\n                  px-6 py-2 rounded-lg font-medium transition-colors\n                  ${d.trim()&&!x?"bg-amber-500 hover:bg-amber-600 text-white shadow-sm":"bg-gray-300 dark:bg-gray-600 text-gray-500 cursor-not-allowed"}\n                `,children:x?"저장 중...":"저장하기 "+(d.length>0?`(${d.length}자)`:"")})})})]})]}),s.jsx(Or,{images:k,currentIndex:$,isOpen:C,onClose:()=>M(!1)})]}):null}function Ir({isOpen:e,onClose:t,todo:r}){const{updateTodo:n}=Tt(),[i,l]=a.useState(""),[d,o]=a.useState("medium"),[c,m]=a.useState(!1),[x,g]=a.useState("");a.useEffect(()=>{r&&(l(r.text),o(r.priority),m(r.hasTime||!1),g(r.startTime||""))},[r]);return e&&r?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"할일 수정"}),s.jsxs("form",{onSubmit:e=>{e.preventDefault(),r&&i.trim()&&(n(r.id,{text:i.trim(),priority:d,hasTime:c,startTime:c?x:void 0}),t())},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"할일 내용"}),s.jsx("input",{type:"text",value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700",placeholder:"할일을 입력하세요",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"우선순위"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>o("high"),className:"flex-1 py-2 px-3 rounded-md "+("high"===d?"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:"🔴 높음"}),s.jsx("button",{type:"button",onClick:()=>o("medium"),className:"flex-1 py-2 px-3 rounded-md "+("medium"===d?"bg-yellow-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:"🟡 보통"}),s.jsx("button",{type:"button",onClick:()=>o("low"),className:"flex-1 py-2 px-3 rounded-md "+("low"===d?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:"🟢 낮음"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:e=>m(e.target.checked),className:"mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:"시간 지정"})]}),c&&s.jsx("input",{type:"time",value:x,onChange:e=>g(e.target.value),className:"mt-2 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"수정"}),s.jsx("button",{type:"button",onClick:t,className:"flex-1 py-2 px-4 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"취소"})]})]})]})]})}):null}function zr({pattern:e="clouds",opacity:t=.1,className:r=""}){return s.jsx("div",{className:`absolute inset-0 overflow-hidden pointer-events-none ${r}`,children:s.jsxs("svg",{className:"w-full h-full",style:{opacity:t},viewBox:"0 0 40 30",preserveAspectRatio:"xMidYMid slice",children:[s.jsx("defs",{children:s.jsx("pattern",{id:e,x:"0",y:"0",width:"40",height:"30",patternUnits:"userSpaceOnUse",children:s.jsx("path",{d:{clouds:"M10,20 Q15,10 20,20 Q25,10 30,20 Q35,10 40,20",waves:"M0,15 Q5,5 10,15 Q15,25 20,15 Q25,5 30,15 Q35,25 40,15",mountains:"M0,25 L5,15 L10,20 L15,10 L20,20 L25,15 L30,25 L35,10 L40,25",bamboo:"M10,5 L10,25 M15,8 L15,25 M20,5 L20,25"}[e],fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-gray-400 dark:text-gray-600"})})}),s.jsx("rect",{width:"100%",height:"100%",fill:`url(#${e})`})]})})}const qr=k()(N(e=>({birthInfo:null,setBirthInfo:t=>e({birthInfo:t}),clearBirthInfo:()=>e({birthInfo:null})}),{name:"saju-settings"})),Wr=["갑","을","병","정","무","기","경","신","임","계"],Hr={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수","인":"목","묘":"목","사":"화","오":"화","진":"토","술":"토","축":"토","미":"토","유":"금","자":"수","해":"수"},Yr={"목":"화","화":"토","토":"금","금":"수","수":"목"},Ur={"목":"토","화":"금","토":"수","금":"목","수":"화"},Gr={level:"excellent",label:"대길",color:"#10b981",icon:"🌟"},Qr={level:"good",label:"길함",color:"#22c55e",icon:"✨"},Vr={level:"normal",label:"보통",color:"#f59e0b",icon:"⭐"},Jr={level:"caution",label:"주의",color:"#f97316",icon:"⚠️"},Zr={level:"bad",label:"흉함",color:"#ef4444",icon:"🚨"},Xr=["#4f46e5","#059669","#dc2626","#7c3aed","#ea580c","#0891b2"],ea=[1,3,5,7,9,11,13,17,19,21,23,29];function ta(e){return e>=85?Gr:e>=70?Qr:e>=50?Vr:e>=30?Jr:Zr}function ra(e,t,r){const a={excellent:["오늘은 모든 일이 순조롭게 풀리는 대길한 날입니다. 새로운 도전을 시작하기에 좋습니다.","행운의 기운이 가득한 하루입니다. 중요한 결정을 내리기에 최적의 시기입니다.","긍정적인 에너지가 충만한 날입니다. 주변 사람들과의 관계도 더욱 좋아질 것입니다."],good:["전반적으로 좋은 흐름을 타는 하루입니다. 계획했던 일들을 추진해보세요.","운세가 상승하는 시기입니다. 적극적인 자세로 임하면 좋은 결과가 있을 것입니다.","안정적이고 평화로운 하루가 될 것입니다. 차분한 마음으로 일을 처리하세요."],normal:["무난한 하루가 예상됩니다. 평소보다 신중하게 행동하는 것이 좋겠습니다.","큰 변화보다는 현재 상황을 유지하는 것이 바람직한 시기입니다.","조급해하지 말고 차근차근 진행하면 좋은 결과를 얻을 수 있습니다."],caution:["조심스럽게 행동하는 것이 필요한 하루입니다. 성급한 판단은 피하세요.","작은 일도 꼼꼼히 확인하고 진행하는 것이 좋겠습니다.","어려움이 있더라도 포기하지 말고 꾸준히 노력하세요."],bad:["오늘은 새로운 일을 시작하기보다는 기존 일을 정리하는 것이 좋겠습니다.","주변 사람들과의 갈등을 피하고 조화를 이루도록 노력하세요.","힘든 시기이지만 이또한 지나갈 것입니다. 긍정적인 마음을 유지하세요."]}[ta(e).level];return a[Math.floor(Math.random()*a.length)]}function aa(e,t=new Date){const r=function(e){const t=(e.year-4)%10;return Hr[Wr[t]]||"목"}(e),a=function(e){const t=new Date(1900,0,1),r=Math.floor((e.getTime()-t.getTime())/864e5);return Wr[(r+36)%60%10]}(t),s=Hr[a]||"목",n=function(e,t){return e===t?75:Yr[e]===t?85:Yr[t]===e?90:Ur[e]===t?45:Ur[t]===e?35:60}(r,s),i=t.getDate(),l=t.getMonth()+1,d=t.getFullYear(),o=(e.year+e.month+e.day+e.hour)%100,c=Math.min(100,Math.max(0,n+(i+o)%31-15)),m=Math.min(100,Math.max(0,n+(l+o)%31-15)),x=Math.min(100,Math.max(0,n+(d+o)%31-15)),g=Math.min(100,Math.max(0,n+(i*l+o)%31-15)),h=Math.min(100,Math.max(0,n+(i+l+o)%31-15)),u=Math.min(100,Math.max(0,n+(d+i+o)%31-15)),p=(i+o)%Xr.length,b=(l+o)%ea.length;return{date:ye(t,"yyyy-MM-dd"),totalLuck:c,loveLuck:m,wealthLuck:x,healthLuck:g,careerLuck:h,studyLuck:u,message:ra(c),luckyColor:Xr[p],luckyNumber:ea[b],advice:`오늘의 기운: ${r}행이 ${s}행과 만나는 날입니다.`}}function sa(e){return ta(e)}const na=k()(N((e,t)=>({dailyFortune:null,lastCalculatedDate:null,lastBirthInfo:null,calculateFortune:(r,a)=>{const s=t(),n=(e=>e.toISOString().split("T")[0])(a);if(s.lastCalculatedDate===n&&(i=s.lastBirthInfo,l=r,i&&l&&i.year===l.year&&i.month===l.month&&i.day===l.day&&i.hour===l.hour&&i.minute===l.minute&&i.isLunar===l.isLunar&&i.gender===l.gender)&&s.dailyFortune)return s.dailyFortune;var i,l;try{const t=aa(r,a);return e({dailyFortune:t,lastCalculatedDate:n,lastBirthInfo:r}),t}catch(d){return null}},clearCache:()=>{e({dailyFortune:null,lastCalculatedDate:null,lastBirthInfo:null})}}),{name:"fortune-storage",partialize:e=>({dailyFortune:e.dailyFortune,lastCalculatedDate:e.lastCalculatedDate,lastBirthInfo:e.lastBirthInfo})})),ia=({date:e,compact:t=!1})=>{const{birthInfo:r}=qr(),{calculateFortune:n}=na(),i=a.useMemo(()=>r?n(r,e):null,[r,e,n]);if(!i||!r)return null;const l=sa(i.totalLuck);return t?s.jsxs("div",{className:"absolute bottom-1 right-1 flex items-center gap-0.5",children:[s.jsx("span",{className:"text-xs",title:`오늘의 운세: ${l.label} (${Math.round(i.totalLuck)}%)`,children:i.totalLuck>=80?"🌟":i.totalLuck>=60?"⭐":i.totalLuck>=40?"☆":"⚪"}),s.jsx("div",{className:"w-12 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${i.totalLuck}%`,backgroundColor:l.color}})})]}):s.jsxs("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-semibold",children:"일간 운세"}),s.jsx("span",{className:"text-lg",children:l.icon||"🔮"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-bold",style:{color:l.color},children:[Math.round(i.totalLuck),"%"]}),s.jsx("div",{className:"text-xs",style:{color:l.color},children:l.label})]})]}),s.jsxs("div",{className:"grid grid-cols-5 gap-1 text-xs",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"연애"}),s.jsxs("div",{className:"font-semibold",children:[Math.round(i.loveLuck),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"재물"}),s.jsxs("div",{className:"font-semibold",children:[Math.round(i.wealthLuck),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"건강"}),s.jsxs("div",{className:"font-semibold",children:[Math.round(i.healthLuck),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"직업"}),s.jsxs("div",{className:"font-semibold",children:[Math.round(i.careerLuck),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"학업"}),s.jsxs("div",{className:"font-semibold",children:[Math.round(i.studyLuck),"%"]})]})]}),!t&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300",style:{backgroundColor:i.luckyColor},title:`행운의 색: ${i.luckyColor}`}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"색상"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-bold",children:i.luckyNumber}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"숫자"})]})]}),!t&&i.message&&s.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 italic",children:["💡 ",i.message]})]})},la=({startTime:e,endTime:t,compact:r=!1,showTooltip:n=!0})=>{const i=a.useMemo(()=>br("string"==typeof e?new Date(e):e,t?"string"==typeof t?new Date(t):t:void 0),[e,t]),l=e=>({excellent:"대길",good:"길",neutral:"평",bad:"흉",terrible:"대흉"}[e]);return r?s.jsx("span",{className:`inline-flex items-center justify-center text-xs ${ur(i.fortune)}`,title:n?`귀문둔갑: ${l(i.fortune)} (${i.score}점)`:void 0,children:hr(i.fortune)}):s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-muted/50 border border-border",children:[s.jsx("span",{className:"text-sm",children:hr(i.fortune)}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:`text-xs font-medium ${ur(i.fortune)}`,children:l(i.fortune)}),s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[i.score,"점"]})]})]})},da={"입춘":{month:2,day:4},"우수":{month:2,day:19},"경칩":{month:3,day:6},"춘분":{month:3,day:21},"청명":{month:4,day:5},"곡우":{month:4,day:20},"입하":{month:5,day:6},"소만":{month:5,day:21},"망종":{month:6,day:6},"하지":{month:6,day:21},"소서":{month:7,day:7},"대서":{month:7,day:23},"입추":{month:8,day:8},"처서":{month:8,day:23},"백로":{month:9,day:8},"추분":{month:9,day:23},"한로":{month:10,day:8},"상강":{month:10,day:23},"입동":{month:11,day:8},"소설":{month:11,day:22},"대설":{month:12,day:7},"동지":{month:12,day:22},"소한":{month:1,day:6},"대한":{month:1,day:20}},oa=["일","월","화","수","목","금","토"];function ca({events:e,onCreateEvent:t,onDateClick:r,onEditEvent:n,onDeleteEvent:i,highlightedEventId:l}){const{currentDate:d,getTodosForDate:o,deleteTodo:c}=Tt(),[m,x]=a.useState(null),[g,h]=a.useState(!1),[u,p]=a.useState(new Date),[b,y]=a.useState(null),{diaryDates:j}=Fr({viewMode:"month",currentDate:d}),f=a.useMemo(()=>{const e=Ne(d),t=we(d),r=fe(e,{weekStartsOn:0}),a=ve(t,{weekStartsOn:0});return ke({start:r,end:a})},[d]),v=a.useMemo(()=>{const e=new Map,t=new Set;return f.forEach(r=>{if(Te(r,d)){const a=ye(r,"yyyy-MM-dd"),s=(e=>{const t=e.getMonth()+1,r=e.getDate();for(const[a,s]of Object.entries(da))if(s.month===t&&s.day===r)return a;return null})(r);s&&(t.has(s)||(t.add(s),e.set(a,s)))}}),e},[f,d]),k=a.useMemo(()=>{const e=new Map;return f.forEach(t=>{const r=ye(t,"yyyy-MM-dd");e.set(r,o(t))}),e},[f,o]),N=e=>{switch(e){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return"⚪"}};return s.jsxs("div",{className:"h-full flex flex-col bg-background",children:[s.jsxs("div",{className:"relative grid grid-cols-7 border-b border-border bg-gradient-to-r from-hanbok-white via-white to-hanbok-white",children:[s.jsx(zr,{pattern:"clouds",opacity:.05}),oa.map((e,t)=>s.jsxs("div",{className:`\n              relative px-2 py-4 text-center font-bold tracking-wider\n              ${0===t?"text-hanbok-red":6===t?"text-hanbok-blue":"text-gray-700 dark:text-gray-300"}\n              ${0===t||6===t?"text-base":"text-sm"}\n              transition-colors duration-200 hover:bg-white/50\n            `,children:[s.jsx("span",{className:"relative z-10",children:e}),(0===t||6===t)&&s.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-0.5 bg-current opacity-30 rounded"})]},e))]}),s.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-6 gap-px bg-border",children:f.map(a=>{const o=Fe(a),g=Te(a,d),u=De(a),b=(f=a,e.filter(e=>{const t=new Date(e.start_time);return je(t,f)}).slice(0,3));var f;const w=ye(a,"yyyy-MM-dd"),S=k.get(w)||[],C=S.filter(e=>!e.completed),M=S.filter(e=>e.completed),$=v.get(w)||null;return s.jsxs("div",{onClick:e=>((e,a)=>{r?r(e,a):t(e)})(a,e),onMouseEnter:()=>x(a),onMouseLeave:()=>x(null),className:`\n                relative p-2 cursor-pointer transition-all duration-200 group\n                bg-background hover:bg-gradient-to-br hover:from-hanbok-white hover:to-white\n                ${g?"":"bg-muted/30"}\n                ${u?"bg-gradient-to-br from-hanbok-yellow/20 to-yinyang-yang/10 shadow-inner border-2 border-yinyang-yang/30":""}\n                ${0===o?"hover:from-hanbok-red/5 hover:to-red-50":""}\n                ${6===o?"hover:from-hanbok-blue/5 hover:to-blue-50":""}\n                min-h-[120px] border border-gray-100 dark:border-gray-800\n              `,children:[s.jsxs("div",{className:"flex items-start justify-between mb-1",children:[s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:`\n                        font-bold transition-all duration-200\n                        ${u?"bg-gradient-to-br from-yinyang-yang to-hanbok-yellow text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg text-sm":"text-base"}\n                        ${g?"":"text-muted-foreground opacity-50"}\n                        ${0===o?"text-hanbok-red":""}\n                        ${6===o?"text-hanbok-blue":""}\n                        group-hover:scale-110\n                      `,children:ye(a,"d")}),u&&s.jsx("span",{className:"text-xs animate-pulse",children:"✨"})]}),s.jsx("div",{className:"flex flex-col",children:$&&s.jsx("span",{className:"text-[9px] text-hanbok-red font-bold bg-hanbok-red/10 px-1 py-0.5 rounded mt-0.5 truncate",children:$})})]}),g&&s.jsxs("div",{className:"flex items-center gap-1",children:[j.has(ye(a,"yyyy-MM-dd"))&&s.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{p(e),h(!0)})(a)},className:"p-1 rounded text-xs transition-all hover:scale-110 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:"📖"}),S.length>0&&s.jsxs(s.Fragment,{children:[C.filter(e=>"high"===e.priority).length>0&&s.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full",children:C.filter(e=>"high"===e.priority).length}),C.filter(e=>"medium"===e.priority).length>0&&s.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-yellow-500 rounded-full",children:C.filter(e=>"medium"===e.priority).length}),C.filter(e=>"low"===e.priority).length>0&&s.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-green-500 rounded-full",children:C.filter(e=>"low"===e.priority).length}),M.length>0&&s.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-gray-500 bg-gray-200 rounded-full",children:"✓"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[b.map(e=>s.jsxs("div",{className:"text-xs p-1 rounded cursor-pointer hover:opacity-80 group flex items-center "+(l===e.id?"ring-2 ring-primary animate-pulse":""),style:{backgroundColor:`${e.color||"#3b82f6"}20`,color:e.color||"#3b82f6",borderLeft:`2px solid ${e.color||"#3b82f6"}`},onClick:t=>((e,t)=>{t.stopPropagation(),n(e)})(e,t),children:[s.jsxs("span",{className:"flex-1 truncate flex items-center gap-1",children:[!e.all_day&&s.jsx(la,{startTime:e.start_time,endTime:e.end_time,compact:!0}),e.all_day&&s.jsx("span",{className:"font-semibold",children:"종일 "}),!e.all_day&&ye(new Date(e.start_time),"HH:mm")," ",e.title]}),i&&s.jsx("button",{onClick:t=>{t.stopPropagation(),confirm(`"${e.title}" 일정을 삭제하시겠습니까?`)&&(null==i||i(e.id))},className:"opacity-50 hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-1 text-lg font-bold",title:"일정 삭제",children:"×"})]},e.id)),e.filter(e=>e.id&&je(new Date(e.start_time),a)).length>3&&s.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:["+",e.filter(e=>e.id&&je(new Date(e.start_time),a)).length-3,"개 더보기"]})]}),g&&s.jsx(ia,{date:a,compact:!0}),m&&je(m,a)&&S.length>0&&s.jsxs("div",{className:"absolute z-50 top-full left-0 mt-2 w-64 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3",children:[s.jsxs("div",{className:"text-sm font-semibold mb-2 text-gray-800 dark:text-gray-200",children:["할일 목록 (",S.length,"개)"]}),s.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:[S.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-start gap-2 text-xs group",children:[s.jsx("span",{children:N(e.priority)}),s.jsx("span",{className:"flex-1 cursor-pointer hover:underline "+(e.completed?"line-through text-gray-500":"text-gray-700 dark:text-gray-300"),onClick:t=>{t.stopPropagation(),y(e)},children:e.text}),s.jsx("button",{onClick:t=>{t.stopPropagation(),y(e)},className:"opacity-0 group-hover:opacity-100 text-blue-500 hover:text-blue-700 transition-opacity text-xs",title:"할일 수정",children:"✏️"}),s.jsx("button",{onClick:t=>{t.stopPropagation(),c(e.id)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity",title:"할일 삭제",children:"×"})]},e.id)),S.length>5&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["+",S.length-5,"개 더보기"]})]})]})]},a.toISOString())})}),s.jsx(Br,{isOpen:g,onClose:()=>h(!1),date:u,onSave:()=>h(!1)}),s.jsx(Ir,{isOpen:!!b,onClose:()=>y(null),todo:b})]})}function ma({date:e,hour:t,onClose:r,onAddEvent:n,onAddTodo:i}){const[l,d]=a.useState("event"),[o,c]=a.useState(""),[m,x]=a.useState(""),[g,h]=a.useState(t?`${t.toString().padStart(2,"0")}:00`:"09:00"),[u,p]=a.useState(t?`${(t+1).toString().padStart(2,"0")}:00`:"10:00"),[b,y]=a.useState("medium"),[j,f]=a.useState(Boolean(t));return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[ye(e,"M월 d일")," 항목 추가"]}),s.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:s.jsx(X,{className:"h-5 w-5 text-gray-500"})})]}),s.jsxs("form",{onSubmit:t=>{if(t.preventDefault(),o.trim()){if("event"===l){const t=new Date(e),[r,a]=g.split(":").map(Number);t.setHours(r,a,0,0);const s=new Date(e),[i,l]=u.split(":").map(Number);s.setHours(i,l,0,0),n({title:o.trim(),description:m.trim()||void 0,start_time:t.toISOString(),end_time:s.toISOString(),all_day:!1,location:void 0,color:"#3b82f6"})}else{const t={text:o.trim(),description:m.trim()||void 0,completed:!1,priority:b,date:ye(e,"yyyy-MM-dd"),hasTime:j,startTime:j?g:void 0,endTime:j?u:void 0};i(t)}r()}},className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"추가할 항목"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"itemType",value:"event",checked:"event"===l,onChange:e=>d(e.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"📅 일정"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"itemType",value:"todo",checked:"todo"===l,onChange:e=>d(e.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"✅ 할일"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"event"===l?"일정 제목":"할일 내용"}),s.jsx("input",{type:"text",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"event"===l?"일정 제목을 입력하세요":"할일을 입력하세요",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"설명 (선택사항)"}),s.jsx("textarea",{value:m,onChange:e=>x(e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white resize-none",placeholder:"추가 설명을 입력하세요"})]}),"todo"===l&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"우선순위"}),s.jsxs("select",{value:b,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"high",children:"🔴 높음"}),s.jsx("option",{value:"medium",children:"🟡 보통"}),s.jsx("option",{value:"low",children:"🟢 낮음"})]})]}),s.jsxs("div",{children:["todo"===l&&s.jsx("div",{className:"mb-3",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j,onChange:e=>f(e.target.checked),className:"mr-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"시간 지정"})]})}),("event"===l||j)&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"시작 시간"}),s.jsx("input",{type:"time",value:g,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"event"===l?"종료 시간":"종료 시간 (선택)"}),s.jsx("input",{type:"time",value:u,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:"event"===l})]})]})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"취소"}),s.jsx("button",{type:"submit",disabled:!o.trim(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"event"===l?"일정 추가":"할일 추가"})]})]})]})})}const xa={event:{background:"#3b82f620",border:"#3b82f6",text:"#3b82f6"},todo:{high:{background:"#ef444420",border:"#ef4444",text:"#ef4444"},medium:{background:"#f59e0b20",border:"#f59e0b",text:"#f59e0b"},low:{background:"#10b98120",border:"#10b981",text:"#10b981"}}},ga=Array.from({length:11},(e,t)=>t+9);function ha({events:e,onCreateEvent:t,onDateClick:r,onEditEvent:n,onDeleteEvent:i,highlightedEventId:l}){const{currentDate:d,getTodosForDate:o,addTodo:c,deleteTodo:m,toggleTodo:x}=Tt(),[g,h]=a.useState(!1),[u,p]=a.useState(new Date),[b,y]=a.useState(),[j,f]=a.useState(!1),[v,k]=a.useState(new Date),[N,w]=a.useState(null),{diaryDates:S}=Fr({viewMode:"week",currentDate:d}),C=a.useMemo(()=>{const e=fe(d,{weekStartsOn:0}),t=ve(d,{weekStartsOn:0});return ke({start:e,end:t})},[d]),M=e=>{switch(e){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return""}},$=e=>{k(e),f(!0)},E=(new Date).getHours(),D=(new Date).getMinutes(),T=(60*E+D)/1440*100,F=a.useMemo(()=>{const t=new Map;return C.forEach(r=>{const a=ye(r,"yyyy-MM-dd"),s=e.filter(e=>{if(!e.all_day||!e.start_time)return!1;try{const t=new Date(e.start_time);return!isNaN(t.getTime())&&je(t,r)}catch{return!1}});t.set(a,s)}),t},[e,C]);return s.jsxs("div",{className:"h-full flex flex-col bg-background",children:[s.jsxs("div",{className:"grid grid-cols-8 border-b border-border bg-muted sticky top-0 z-10",children:[s.jsx("div",{className:"p-3 text-center text-sm font-semibold text-muted-foreground",children:"시간"}),C.map(e=>{const t=e.getDay(),r=De(e);return s.jsxs("div",{className:`\n                p-3 text-center border-l border-border\n                ${r?"bg-primary/10":""}\n              `,children:[s.jsx("div",{className:"text-xs font-medium "+(0===t?"text-red-600":6===t?"text-blue-600":"text-muted-foreground"),children:ye(e,"EEE",{locale:Ce})}),s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("div",{className:"text-lg font-semibold "+(r?"text-primary":"text-foreground"),children:ye(e,"d")}),S.has(ye(e,"yyyy-MM-dd"))&&s.jsx("button",{onClick:()=>$(e),className:"p-1 rounded-full text-xs transition-all hover:scale-110 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:"📖"})]})]},e.toISOString())})]}),Array.from(F.values()).some(e=>e.length>0)&&s.jsxs("div",{className:"grid grid-cols-8 border-b border-border bg-muted/30",children:[s.jsx("div",{className:"p-2 text-center text-xs font-semibold text-muted-foreground border-r border-border",children:"종일"}),C.map(e=>{const t=ye(e,"yyyy-MM-dd"),r=F.get(t)||[];return s.jsx("div",{className:"p-1 border-l border-border",children:r.map(e=>s.jsxs("div",{className:"text-xs p-1 mb-1 rounded truncate cursor-pointer hover:opacity-80 group flex items-center justify-between",style:{backgroundColor:xa.event.background,color:xa.event.text,borderLeft:`2px solid ${xa.event.border}`},onClick:t=>{t.stopPropagation(),n(e)},children:[s.jsxs("span",{className:"truncate flex items-center gap-1",children:[s.jsx(la,{startTime:e.start_time,endTime:e.end_time,compact:!0}),e.title]}),i&&s.jsx("button",{onClick:t=>{t.stopPropagation(),confirm(`"${e.title}" 일정을 삭제하시겠습니까?`)&&i(e.id)},className:"opacity-60 hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-1 flex-shrink-0 text-sm font-bold",title:"일정 삭제",children:"×"})]},e.id))},`allday-${e.toISOString()}`)})]}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("div",{className:"relative",children:[C.some(e=>De(e))&&s.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${T}%`},children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-16"}),s.jsx("div",{className:"flex-1 h-0.5 bg-red-500"}),s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full -ml-1"})]})}),s.jsxs("div",{className:"grid grid-cols-8",children:[s.jsx("div",{className:"border-r border-border",children:ga.map(e=>s.jsx("div",{className:"h-16 px-2 py-1 text-xs text-muted-foreground text-right",children:ye((new Date).setHours(e,0,0,0),"HH:mm")},e))}),C.map(t=>{const a=De(t);return s.jsx("div",{className:"border-r border-border",children:ga.map(l=>{const d=((t,r)=>e&&0!==e.length?e.filter(e=>{if(!e.start_time)return!1;try{const a=new Date(e.start_time);if(isNaN(a.getTime()))return!1;const s=_e(a);return je(a,t)&&s===r}catch(a){return!1}}):[])(t,l),c=((e,t)=>o(e).filter(e=>{if(!e.hasTime||!e.startTime)return!1;try{const[r]=e.startTime.split(":").map(Number);return r===t}catch(r){return!1}}))(t,l);return s.jsxs("div",{className:`\n                          h-16 border-b border-border/50 p-1 cursor-pointer\n                          hover:bg-muted/50 transition-colors\n                          ${a&&E===l?"bg-primary/10":""}\n                        `,onClick:e=>{r?r(t,e):(p(new Date(t)),y(l),h(!0))},children:[d.map(e=>{if(!e.id||!e.start_time||!e.title)return null;try{const t=new Date(e.start_time);return isNaN(t.getTime())?null:s.jsxs("div",{className:"text-xs p-1 mb-1 rounded truncate cursor-pointer hover:opacity-80 group flex items-center justify-between",style:{backgroundColor:xa.event.background,color:xa.event.text,borderLeft:`2px solid ${xa.event.border}`},onClick:t=>{t.stopPropagation(),n(e)},children:[s.jsxs("span",{className:"truncate flex items-center gap-1",children:[s.jsx(la,{startTime:e.start_time,endTime:e.end_time,compact:!0}),ye(t,"HH:mm")," ",e.title]}),i&&s.jsx("button",{onClick:t=>{t.stopPropagation(),confirm(`"${e.title}" 일정을 삭제하시겠습니까?`)&&i(e.id)},className:"opacity-60 hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-1 flex-shrink-0 text-sm font-bold",title:"일정 삭제",children:"×"})]},e.id)}catch(t){return null}}),c.map(e=>{const t=xa.todo[e.priority];return s.jsxs("div",{className:"text-xs p-1 mb-1 rounded truncate cursor-pointer hover:opacity-80 flex items-center space-x-1",style:{backgroundColor:t.background,color:t.text,borderLeft:`2px solid ${t.border}`},onClick:e=>{e.stopPropagation()},children:[s.jsx("button",{onClick:t=>{t.stopPropagation(),x(e.id)},className:`\n                                w-2 h-2 rounded-full border flex items-center justify-center text-xs\n                                ${e.completed?"bg-green-500 border-green-500 text-white":"border-orange-400"}\n                              `,children:e.completed&&"✓"}),s.jsx("span",{className:"text-xs",children:M(e.priority)}),s.jsxs("span",{className:"flex-1 "+(e.completed?"line-through opacity-60":""),children:[e.startTime," ",e.text]})]},e.id)})]},`${t.toISOString()}-${l}`)})},t.toISOString())})]}),s.jsx("div",{className:"mt-4 border-t border-border",children:s.jsxs("div",{className:"grid grid-cols-8 bg-border gap-px",children:[s.jsx("div",{className:"bg-muted p-3 text-center text-sm font-semibold text-muted-foreground",children:"할일"}),C.map(e=>{const t=o(e).filter(e=>!e.hasTime||!e.startTime);const r=De(e);return s.jsxs("div",{className:`\n                    bg-background p-3 min-h-[120px]\n                    ${r?"bg-primary/5":""}\n                  `,children:[S.has(ye(e,"yyyy-MM-dd"))&&s.jsx("div",{className:"mb-2 flex items-center",children:s.jsxs("button",{onClick:()=>$(e),className:"p-1 rounded text-xs transition-all hover:scale-105 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:["📖 ",s.jsx("span",{className:"ml-1 text-xs",children:"일기"})]})}),s.jsx("div",{className:"space-y-1 mb-2",children:t.map(e=>s.jsxs("div",{className:"flex items-center space-x-1 group",children:[s.jsx("button",{onClick:()=>x(e.id),className:`\n                            w-3 h-3 rounded-full border flex items-center justify-center text-xs\n                            ${e.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600"}\n                          `,children:e.completed&&"✓"}),s.jsx("span",{className:"text-xs",children:M(e.priority)}),s.jsx("span",{className:`\n                            flex-1 text-xs truncate cursor-pointer hover:underline\n                            ${e.completed?"line-through text-gray-500":"text-gray-800 dark:text-gray-200"}\n                          `,onClick:()=>w(e),children:e.text}),s.jsx("button",{onClick:()=>w(e),className:"opacity-0 group-hover:opacity-100 text-blue-500 hover:text-blue-700 text-xs",title:"수정",children:"✏️"}),s.jsx("button",{onClick:()=>m(e.id),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 text-xs",children:"×"})]},e.id))})]},`todos-${e.toISOString()}`)})]})})]})}),g&&s.jsx(ma,{date:u,hour:b,onClose:()=>h(!1),onAddEvent:e=>{t(new Date(e.start_time)),h(!1)},onAddTodo:e=>{c(e),h(!1)}}),s.jsx(Br,{isOpen:j,onClose:()=>f(!1),date:v,onSave:()=>f(!1)}),s.jsx(Ir,{isOpen:!!N,onClose:()=>w(null),todo:N})]})}const ua=({label:e,score:t,icon:r,description:a})=>{const n=sa(t),i=Math.round(t);return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all hover:scale-105 border border-border/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-3xl",children:r}),s.jsx("h3",{className:"text-xl font-bold text-foreground",children:e})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-2xl font-bold",style:{color:n.color},children:[i,"%"]}),s.jsx("div",{className:"text-sm font-medium",style:{color:n.color},children:n.label})]})]}),s.jsx("div",{className:"w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${i}%`,backgroundColor:n.color,boxShadow:`0 0 10px ${n.color}40`}})}),a&&s.jsx("p",{className:"text-sm text-muted-foreground mt-3 italic",children:a})]})},pa=()=>s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-8 flex items-center gap-3",children:[s.jsx("span",{className:"animate-pulse",children:"✨"}),"오늘의 운세"]}),s.jsx("div",{className:"grid grid-cols-1 gap-6 flex-1",children:[1,2,3,4,5].map(e=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),s.jsx("div",{className:"w-24 h-6 bg-muted rounded"})]}),s.jsx("div",{className:"w-16 h-8 bg-muted rounded"})]}),s.jsx("div",{className:"w-full h-4 bg-muted rounded-full"})]},e))})]}),ba=()=>{const e=n(),{user:t}=rt();return s.jsx("div",{className:"h-full flex flex-col items-center justify-center",children:s.jsxs("div",{className:"max-w-md text-center",children:[s.jsx("div",{className:"text-6xl mb-6",children:"🔮"}),s.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"운세를 확인하려면 설정이 필요합니다"}),s.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"생년월일시 정보를 입력하여 맞춤 운세를 받아보세요"}),s.jsx("button",{onClick:()=>{e("/settings")},className:"px-8 py-4 bg-primary-500 text-white text-lg font-semibold rounded-xl hover:bg-primary-600 transition-colors shadow-lg",children:"설정하러 가기"}),t&&s.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[s.jsxs("p",{children:["로그인된 계정: ",t.email]}),s.jsx("p",{className:"text-xs mt-1",children:"설정 페이지에서 생년월일시를 입력하면 자동으로 운세가 계산됩니다"})]})]})})},ya={"총운":"하루 전반적인 운의 흐름을 나타냅니다","연애운":"사랑과 인간관계의 조화를 보여줍니다","재물운":"금전적 이득과 재산 증식의 기회를 알려줍니다","건강운":"신체와 정신의 건강 상태를 나타냅니다","직업운":"업무 성과와 경력 발전 가능성을 보여줍니다"},ja=({currentDate:e,onDiaryClick:t,hasDiary:r})=>{const{birthInfo:n,setBirthInfo:i}=qr(),{user:d}=rt();l.useEffect(()=>{if(!n){const t=localStorage.getItem("sajuapp-personal-info");if(t)try{const e=JSON.parse(t);if(e.birthDate&&e.birthTime){const t=new Date(e.birthDate),[r,a]=e.birthTime.split(":").map(Number),s={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:r||0,minute:a||0,isLunar:"lunar"===e.calendarType,isMale:"male"===e.gender,name:"male"===e.gender?"사용자(남)":"사용자(여)"};i(s)}}catch(e){}}},[n,i]);const{calculateFortune:o}=na(),c=a.useMemo(()=>n?o(n,e):null,[n,e,o]);if(!n)return s.jsx(ba,{});if(!c)return s.jsx(pa,{});const m=[{label:"총운",score:c.totalLuck,icon:"🌟"},{label:"연애운",score:c.loveLuck,icon:"💕"},{label:"재물운",score:c.wealthLuck,icon:"💰"},{label:"건강운",score:c.healthLuck,icon:"🏥"},{label:"직업운",score:c.careerLuck,icon:"💼"}];return s.jsxs("div",{className:"h-full flex flex-col p-2",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h2",{className:"text-4xl font-bold text-foreground mb-2 flex items-center gap-3",children:[s.jsx("span",{className:"text-yellow-500",children:"✨"}),"오늘의 운세"]}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"당신의 사주명리로 풀어보는 오늘 하루"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6 flex-1",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(ua,{label:m[0].label,score:m[0].score,icon:m[0].icon,description:ya[m[0].label]})}),m.slice(1).map(e=>s.jsx(ua,{label:e.label,score:e.score,icon:e.icon,description:ya[e.label]},e.label))]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 rounded-2xl p-6 shadow-lg",children:[s.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"오늘의 행운 아이템"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full shadow-lg flex items-center justify-center bg-white dark:bg-gray-800",children:s.jsx("div",{className:"w-12 h-12 rounded-full",style:{backgroundColor:c.luckyColor},title:"행운의 색상"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"행운의 색상"}),s.jsx("div",{className:"font-bold text-lg",children:c.luckyColor})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 text-white rounded-full flex items-center justify-center text-2xl font-bold shadow-lg",children:c.luckyNumber}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"행운의 숫자"}),s.jsxs("div",{className:"font-bold text-lg",children:["숫자 ",c.luckyNumber]})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl p-6 shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-bold text-foreground mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"💌"}),"오늘의 메시지"]}),s.jsx("p",{className:"text-lg text-foreground leading-relaxed mb-3",children:c.message}),c.advice&&s.jsxs("p",{className:"text-sm text-muted-foreground italic border-t border-border/30 pt-3",children:["💡 ",c.advice]})]})]})]})},fa=Array.from({length:10},(e,t)=>t+9);function va({events:e,onCreateEvent:t,onEditEvent:r,onDeleteEvent:n}){const{currentDate:i,getTodosForDate:l,deleteTodo:d,toggleTodo:o}=Tt(),[c,m]=a.useState(!1),[x,g]=a.useState(null),h=a.useMemo(()=>l(i),[i,l]),u=e=>{switch(e){case"high":return"🔴";case"medium":default:return"🟡";case"low":return"🟢"}},p=a.useMemo(()=>h.filter(e=>e.hasTime&&e.startTime),[h]),b=a.useMemo(()=>h.filter(e=>!e.hasTime||!e.startTime),[h]),y=a.useMemo(()=>e.filter(e=>{const t=new Date(e.start_time);return je(t,i)}).sort((e,t)=>new Date(e.start_time).getTime()-new Date(t.start_time).getTime()),[e,i]),j=y.filter(e=>e.all_day),f=y.filter(e=>!e.all_day),v=(new Date).getHours(),k=(new Date).getMinutes(),N=v>=9&&v<=18?(60*(v-9)+k)/600*100:-1;return s.jsxs("div",{className:"h-full flex flex-col lg:flex-row bg-background",children:[s.jsxs("div",{className:"lg:w-1/2 w-full lg:border-r border-b lg:border-b-0 border-border p-6 overflow-auto bg-gradient-to-br from-background to-muted/20 h-1/2 lg:h-full",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-foreground mb-1",children:ye(i,"yyyy년 M월 d일",{locale:Ce})}),s.jsx("p",{className:"text-xl text-muted-foreground",children:ye(i,"EEEE",{locale:Ce})})]}),s.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-gradient-to-r from-primary-500/10 to-primary-600/10 border border-primary-500/20",children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"빠른 작성"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{onClick:()=>{const e=new Date(i);e.setHours((new Date).getHours(),0,0,0),t(e)},className:"px-3 py-2 text-sm bg-blue-500/10 hover:bg-blue-500/20 text-blue-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[s.jsx("span",{children:"📅"})," 일정"]}),s.jsxs("button",{onClick:()=>{const e=new Date(i);e.setHours((new Date).getHours(),0,0,0),t(e)},className:"px-3 py-2 text-sm bg-amber-500/10 hover:bg-amber-500/20 text-amber-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[s.jsx("span",{children:"✅"})," 할일"]}),s.jsxs("button",{onClick:()=>m(!0),className:"px-3 py-2 text-sm bg-purple-500/10 hover:bg-purple-500/20 text-purple-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[s.jsx("span",{children:"📖"})," 일기"]})]})]}),s.jsx("div",{className:"h-full flex flex-col",children:s.jsx(ja,{currentDate:i})})]}),s.jsxs("div",{className:"lg:w-1/2 w-full overflow-auto h-1/2 lg:h-full",children:[j.length>0&&s.jsxs("div",{className:"p-4 border-b border-border bg-muted/30",children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"종일 일정"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(e=>s.jsxs("div",{className:"group inline-flex items-center px-3 py-1 rounded-full text-sm cursor-pointer hover:opacity-80 transition-opacity",style:{backgroundColor:e.color||"#3b82f6",color:"white"},onClick:()=>r(e),title:e.description||e.title,children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(la,{startTime:e.start_time,endTime:e.end_time,compact:!0}),e.title]}),n&&s.jsx("button",{onClick:t=>{t.stopPropagation(),confirm(`"${e.title}" 일정을 삭제하시겠습니까?`)&&n(e.id)},className:"opacity-0 group-hover:opacity-100 ml-2 hover:text-red-200 transition-opacity",title:"일정 삭제",children:"×"})]},e.id))})]}),s.jsxs("div",{className:"relative min-h-full",children:[je(i,new Date)&&N>=0&&s.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${N}%`},children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-20"}),s.jsx("div",{className:"flex-1 h-0.5 bg-red-500"}),s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full -ml-1.5"})]})}),s.jsxs("div",{className:"relative",children:[fa.map(e=>s.jsxs("div",{className:"flex border-b border-border/30",style:{height:"100px"},children:[s.jsx("div",{className:"w-20 px-4 py-3 text-muted-foreground text-right",children:s.jsx("div",{className:"text-xl font-semibold",children:ye((new Date).setHours(e,0,0,0),"HH:mm")})}),s.jsxs("div",{className:"flex-1 relative cursor-pointer hover:bg-muted/20 transition-colors group",onClick:()=>{const r=new Date(i);r.setHours(e,0,0,0),t(r)},title:`${e}:00에 일정 추가`,children:[s.jsx("div",{className:"absolute top-1/2 left-0 right-0 border-t border-border/15"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-500/20 flex items-center justify-center",children:s.jsx("span",{className:"text-primary-600 text-lg",children:"+"})})})]})]},e)),s.jsxs("div",{className:"absolute top-0 left-20 right-0 bottom-0",children:[f.map(e=>{const t=(e=>{const t=new Date(e.start_time),r=new Date(e.end_time),a=_e(t),s=_e(r),n=Math.max(60*(a-9)+Pe(t),0),i=(Math.min(60*(s-9)+Pe(r),600)-n)/600*100;return{top:n/600*100+"%",height:`${Math.max(i,2)}%`}})(e);return s.jsx("div",{className:"absolute left-4 right-1/2 p-4 rounded-xl cursor-pointer hover:shadow-lg transition-all hover:scale-[1.02] mr-2 group",style:{...t,backgroundColor:`${e.color||"#3b82f6"}15`,borderLeft:`4px solid ${e.color||"#3b82f6"}`,border:`1px solid ${e.color||"#3b82f6"}30`},onClick:()=>r(e),children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-sm font-semibold mb-1 flex items-center gap-2",style:{color:e.color||"#3b82f6"},children:[s.jsx(la,{startTime:e.start_time,endTime:e.end_time,compact:!0}),ye(new Date(e.start_time),"HH:mm")," - ",ye(new Date(e.end_time),"HH:mm")]}),s.jsx("div",{className:"font-semibold text-foreground text-lg mb-1",children:e.title}),e.description&&s.jsx("div",{className:"text-sm text-muted-foreground",children:e.description}),e.location&&s.jsxs("div",{className:"text-sm text-muted-foreground mt-2 flex items-center gap-1",children:[s.jsx("span",{children:"📍"})," ",e.location]})]}),n&&s.jsx("button",{onClick:t=>{t.stopPropagation(),confirm(`"${e.title}" 일정을 삭제하시겠습니까?`)&&n(e.id)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-2 text-lg",title:"일정 삭제",children:"×"})]})},e.id)}),p.map(e=>{const[t,r]=(e.startTime||"09:00").split(":").map(Number);new Date(i).setHours(t,r,0,0);const a=Math.max((60*(t-9)+r)/600*100,0);return s.jsx("div",{className:"absolute left-1/2 right-4 p-3 rounded-lg cursor-pointer hover:shadow-md transition-all ml-2",style:{top:`${a}%`,height:"40px",backgroundColor:e.completed?"#10b98115":"#fbbf2415",borderLeft:"3px solid "+(e.completed?"#10b981":"#fbbf24"),opacity:e.completed?.7:1},onClick:()=>o(e.id),children:s.jsxs("div",{className:"flex items-center justify-between h-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>o(e.id),className:"w-4 h-4",onClick:e=>e.stopPropagation()}),s.jsx("span",{className:"text-sm font-medium",children:u(e.priority)}),s.jsx("span",{className:"text-sm "+(e.completed?"line-through text-muted-foreground":""),children:e.text}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",e.startTime,")"]})]}),s.jsx("button",{onClick:t=>{t.stopPropagation(),d(e.id)},className:"text-red-500 hover:text-red-700 text-sm px-2",children:"✕"})]})},e.id)})]})]})]}),b.length>0&&s.jsxs("div",{className:"p-4 border-t border-border bg-muted/10",children:[s.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"시간 미지정 할일"}),s.jsx("div",{className:"space-y-2",children:b.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background border border-border hover:shadow-sm transition-all",style:{opacity:e.completed?.6:1},children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>o(e.id),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:u(e.priority)}),s.jsx("span",{className:"text-sm flex-1 cursor-pointer hover:underline "+(e.completed?"line-through text-muted-foreground":""),onClick:()=>g(e),children:e.text})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>g(e),className:"text-blue-500 hover:text-blue-700 text-sm px-2 py-1",children:"수정"}),s.jsx("button",{onClick:()=>d(e.id),className:"text-red-500 hover:text-red-700 text-sm px-2 py-1",children:"삭제"})]})]},e.id))})]})]}),s.jsx(Br,{isOpen:c,onClose:()=>m(!1),date:i,onSave:()=>{m(!1)}}),s.jsx(Ir,{isOpen:!!x,onClose:()=>g(null),todo:x})]})}const ka=a.createContext(void 0),Na=({children:e})=>{const[t,r]=a.useState([]);a.useEffect(()=>{const e=localStorage.getItem("yearlyMemos");if(e)try{const t=JSON.parse(e).map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));r(t)}catch(t){}},[]),a.useEffect(()=>{t.length>0&&localStorage.setItem("yearlyMemos",JSON.stringify(t))},[t]);const n=(e,r)=>t.filter(t=>t.year===e&&t.month===r).sort((e,t)=>(e.position||0)-(t.position||0)),i={memos:t,addMemo:e=>{const t={...e,id:`memo-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date};r(e=>[...e,t])},updateMemo:(e,t)=>{r(r=>r.map(r=>r.id===e?{...r,...t,updatedAt:new Date}:r))},deleteMemo:e=>{r(t=>t.filter(t=>t.id!==e))},toggleComplete:e=>{r(t=>t.map(t=>t.id===e?{...t,completed:!t.completed,updatedAt:new Date}:t))},getMemosByMonth:n,getMonthStatistics:(e,t)=>{const r=n(e,t),a=r.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{});return{total:r.length,byType:a,completed:r.filter(e=>e.completed).length}}};return s.jsx(ka.Provider,{value:i,children:e})},wa={goal:{icon:"🎯",label:"목표",color:"#9333EA",bgColor:"bg-purple-100 dark:bg-purple-900/30",textColor:"text-purple-600 dark:text-purple-400"},event:{icon:"📅",label:"이벤트",color:"#3B82F6",bgColor:"bg-blue-100 dark:bg-blue-900/30",textColor:"text-blue-600 dark:text-blue-400"},memo:{icon:"📝",label:"메모",color:"#EAB308",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",textColor:"text-yellow-600 dark:text-yellow-400"},milestone:{icon:"🏆",label:"마일스톤",color:"#22C55E",bgColor:"bg-green-100 dark:bg-green-900/30",textColor:"text-green-600 dark:text-green-400"}},Sa={high:{icon:"🔴",label:"높음"},medium:{icon:"🟡",label:"보통"},low:{icon:"🟢",label:"낮음"}},Ca=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];function Ma({_events:e,_onCreateEvent:t,_onEditEvent:r,_onDateClick:n,_highlightedEventId:i}){const{currentDate:l,setCurrentDate:d,setViewMode:o}=Tt(),{getMemosByMonth:c,addMemo:m,deleteMemo:x,toggleComplete:g,getMonthStatistics:h}=(()=>{const e=a.useContext(ka);if(!e)throw new Error("useYearlyMemo must be used within a YearlyMemoProvider");return e})(),{diaries:u}=Fr({viewMode:"year",currentDate:l}),p=l.getFullYear(),[b,y]=a.useState(null),[j,f]=a.useState(null),[v,k]=a.useState(null),[N,w]=a.useState("all"),[S,C]=a.useState(""),[M,$]=a.useState(""),[E,D]=a.useState("memo"),[T,F]=a.useState("medium"),[_,P]=a.useState(""),A=e=>{if(!M.trim())return;m({year:p,month:e,type:E,title:M,description:_,color:wa[E].color,importance:T,completed:!1,position:0}),$(""),P(""),D("memo"),F("medium"),f(null)},L=e=>{if(!u||0===u.length)return 0;const t=String(e).padStart(2,"0"),r=`${p}-${t}`;return u.filter(e=>e.date&&e.date.startsWith(r)).length},R=a.useMemo(()=>{let e=0,t=0;const r={goal:0,event:0,memo:0,milestone:0};for(let a=1;a<=12;a++){const s=h(p,a);e+=s.total,t+=s.completed,Object.entries(s.byType).forEach(([e,t])=>{r[e]+=t})}return{totalMemos:e,completedMemos:t,typeCount:r}},[p,h]);return s.jsx("div",{className:"h-full overflow-auto bg-background p-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:[p,"년 연간 계획"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"검색...",value:S,onChange:e=>C(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \n                           bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\n                           focus:ring-2 focus:ring-purple-500"})]}),s.jsxs("select",{value:N,onChange:e=>w(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \n                         bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"all",children:"모든 타입"}),Object.entries(wa).map(([e,t])=>s.jsxs("option",{value:e,children:[t.icon," ",t.label]},e))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:R.totalMemos}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전체"})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:R.completedMemos}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료"})]}),Object.entries(wa).map(([e,t])=>s.jsxs("div",{className:`text-center p-3 rounded-lg ${t.bgColor}`,children:[s.jsx("div",{className:`text-2xl font-bold ${t.textColor}`,children:R.typeCount[e]||0}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.label})]},e))]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Ca.map((e,t)=>{const r=t+1,a=(e=>{let t=c(p,e);if("all"!==N&&(t=t.filter(e=>e.type===N)),S){const e=S.toLowerCase();t=t.filter(t=>{var r;return t.title.toLowerCase().includes(e)||(null==(r=t.description)?void 0:r.toLowerCase().includes(e))})}return t})(r),n=h(p,r),i=j===r;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md \n                         transition-all duration-200 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e}),s.jsx("button",{onClick:()=>f(i?null:r),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(te,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]}),s.jsxs("div",{className:"mt-2 flex gap-2 text-xs",children:[n.total>0&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[n.total,"개 항목"]}),n.completed>0&&s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[n.completed,"개 완료"]})]}),L(r)>0&&s.jsxs("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:["📔 ",L(r)]})]})]}),s.jsxs("div",{className:"p-4 space-y-2 max-h-64 overflow-y-auto",children:[i&&s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg space-y-2",children:[s.jsx("input",{type:"text",placeholder:"제목 입력...",value:M,onChange:e=>$(e.target.value),onKeyPress:e=>"Enter"===e.key&&A(r),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 \n                                 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",autoFocus:!0}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("select",{value:E,onChange:e=>D(e.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 \n                                   rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:Object.entries(wa).map(([e,t])=>s.jsx("option",{value:e,children:t.label},e))}),s.jsx("select",{value:T,onChange:e=>F(e.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 \n                                   rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:Object.entries(Sa).map(([e,t])=>s.jsx("option",{value:e,children:t.label},e))})]}),s.jsxs("div",{className:"flex gap-1 justify-end",children:[s.jsx("button",{onClick:()=>A(r),className:"px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:"추가"}),s.jsx("button",{onClick:()=>{f(null),$("")},className:"px-2 py-1 text-xs bg-gray-300 dark:bg-gray-600 text-gray-700 \n                                   dark:text-gray-300 rounded hover:bg-gray-400 dark:hover:bg-gray-500",children:"취소"})]})]}),0!==a.length||i?a.slice(0,5).map(e=>{const t=wa[e.type];return e.id,s.jsx("div",{className:`p-2 rounded-lg border ${e.completed?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600":`${t.bgColor} border-gray-200 dark:border-gray-600`} group hover:shadow-sm transition-all`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("button",{onClick:()=>g(e.id),className:"mt-0.5 w-4 h-4 rounded border-2 flex items-center justify-center\n                                "+(e.completed?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-600 hover:border-purple-500"),children:e.completed&&s.jsx(re,{className:"w-3 h-3 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-sm",children:t.icon}),s.jsx("span",{className:"text-sm font-medium "+(e.completed?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"),children:e.title})]}),e.description&&s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.description})]}),s.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:()=>x(e.id),className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",children:s.jsx(ae,{className:"w-3 h-3 text-red-500"})})})]})},e.id)}):s.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm py-4",children:"메모가 없습니다"}),a.length>5&&s.jsxs("button",{onClick:()=>{d(new Date(p,t,1)),o("month")},className:"w-full text-center text-xs text-purple-600 dark:text-purple-400 \n                               hover:text-purple-700 dark:hover:text-purple-300 py-1",children:["+",a.length-5,"개 더 보기"]})]})]},r)})})]})})}function $a({isOpen:e,onClose:t,date:r,position:n,onSelectAction:i}){const l=a.useRef(null);if(a.useEffect(()=>{const r=e=>{l.current&&!l.current.contains(e.target)&&t()},a=e=>{"Escape"===e.key&&t()};return e&&(document.addEventListener("mousedown",r),document.addEventListener("keydown",a)),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("keydown",a)}},[e,t]),!e)return null;const d={x:Math.min(n.x,window.innerWidth-200),y:Math.min(n.y,window.innerHeight-160)};return s.jsx("div",{className:"fixed inset-0 z-50",style:{background:"rgba(0, 0, 0, 0.1)"},children:s.jsxs("div",{ref:l,className:"absolute bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 p-4 min-w-[240px] max-w-[280px]",style:{left:d.x,top:d.y},children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"작업 선택"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-lg",children:"✕"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(o=r,new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(o))})]}),s.jsx("div",{className:"space-y-2",children:[{type:"event",icon:"📅",label:"일정,할일 추가",description:"새로운 일정과 할일을 만듭니다",color:"text-blue-600 dark:text-blue-400"},{type:"diary",icon:"📝",label:"일기 쓰기",description:"오늘의 일기를 작성합니다",color:"text-purple-600 dark:text-purple-400"}].map(e=>s.jsx("button",{onClick:()=>{return r=e.type,i(r),void t();var r},className:"w-full text-left p-3 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-150 group",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-xl flex-shrink-0",children:e.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:`text-sm font-medium ${e.color} group-hover:opacity-80`,children:e.label}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.description})]}),s.jsx("div",{className:"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors",children:"→"})]})},e.type))}),s.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-600",children:s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"ESC 키로 닫기"})})]})});var o}const Ea=({className:e})=>s.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),Da=({className:e})=>s.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})});function Ta(){const{currentDate:e,setCurrentDate:t,viewMode:r,setViewMode:n,navigatePrevious:i,navigateNext:l,navigateToday:d}=Tt(),[o,c]=a.useState([]),[m,x]=a.useState(null),[g,h]=a.useState(!1),[u,p]=a.useState(null),[b,y]=a.useState(""),[j,f]=a.useState([]),[v,k]=a.useState(null),[N,w]=a.useState(!1),[S,C]=a.useState({x:0,y:0}),[M,$]=a.useState(null),[E,D]=a.useState(!1),[T,F]=a.useState(null),_=e=>{F(e),D(!0)};a.useEffect(()=>{P()},[]),a.useEffect(()=>{if(b){const e=o.filter(e=>{var t,r;return e.title.toLowerCase().includes(b.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(b.toLowerCase()))||(null==(r=e.location)?void 0:r.toLowerCase().includes(b.toLowerCase()))});f(e)}else f(o)},[b,o]);const P=async()=>{try{const e=await mt();c(e)}catch(e){}},A=e=>{p(e||null),x(null),h(!0)},L=e=>{x(e),h(!0)},R=async e=>{try{await ht(e),P()}catch(t){}},O=(e,t)=>{$(e),C({x:t.clientX,y:t.clientY}),w(!0)},K={year:"년",month:"월",week:"주",day:"일"};return s.jsxs("div",{className:"h-screen flex flex-col",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:s.jsxs("div",{className:"flex flex-col space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:(()=>{switch(r){case"year":return ye(e,"yyyy년",{locale:Ce});case"month":return ye(e,"yyyy년 M월",{locale:Ce});case"week":return ye(e,"yyyy년 M월 w주차",{locale:Ce});case"day":return ye(e,"yyyy년 M월 d일 EEEE",{locale:Ce});default:return""}})()}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["year","month","week","day"].map(e=>s.jsx("button",{onClick:()=>n(e),className:`\n                    px-3 py-1 rounded-md text-sm font-medium transition-colors\n                    ${r===e?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100"}\n                  `,children:K[e]},e))}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Ea,{className:"w-5 h-5"})}),s.jsx("button",{onClick:d,className:"px-3 py-1 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"오늘"}),s.jsx("button",{onClick:l,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Da,{className:"w-5 h-5"})})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 max-w-md relative",children:[s.jsx("input",{type:"text",placeholder:"일정, 할일, 일기 검색...",value:b,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key?(()=>{if(0===j.length||!b)return;const e=j[0],a=new Date(e.start_time);t(a),"year"===r&&n("month"),k(e.id||null),setTimeout(()=>{k(null)},3e3)})():"Escape"===e.key&&(y(""),k(null))},className:"w-full px-4 py-2 pl-10 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"}),s.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),b&&s.jsx("button",{onClick:()=>y(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),b&&s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[j.length,"개의 결과"]})]})]})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:(()=>{const e={events:b?j:o,onCreateEvent:A,onDateClick:O,onEditEvent:L,onDeleteEvent:R,highlightedEventId:v,onDiaryClick:_},t={_events:e.events,_onCreateEvent:e.onCreateEvent,_onDateClick:e.onDateClick,_onEditEvent:e.onEditEvent,_highlightedEventId:e.highlightedEventId};switch(r){case"year":return s.jsx(Ma,{...t});case"month":default:return s.jsx(ca,{...e});case"week":return s.jsx(ha,{...e});case"day":return s.jsx(va,{...e})}})()}),s.jsx(jr,{isOpen:g,onClose:()=>{h(!1),x(null),p(null)},onSave:e=>{P()},event:m,initialDate:u||void 0}),s.jsx($a,{isOpen:N,onClose:()=>{w(!1),$(null)},date:M||new Date,position:S,onSelectAction:e=>{if(M){switch(e){case"event":p(M),x(null),h(!0);break;case"diary":F(M),D(!0)}w(!1)}}}),s.jsx(Br,{isOpen:E,onClose:()=>{D(!1),F(null)},date:T||new Date})]})}function Fa(){const{date:e}=d(),t=n(),[r,i]=a.useState(new Date),[l,o]=a.useState(""),[c,m]=a.useState(3),[x,g]=a.useState([]),[h,u]=a.useState(""),[p,b]=a.useState([]),[y,j]=a.useState("");a.useEffect(()=>{e&&i(new Date(e))},[e]);const f={1:{emoji:"😢",label:"매우 나쁨",color:"text-red-500"},2:{emoji:"😕",label:"나쁨",color:"text-orange-500"},3:{emoji:"😐",label:"보통",color:"text-yellow-500"},4:{emoji:"🙂",label:"좋음",color:"text-green-500"},5:{emoji:"😄",label:"매우 좋음",color:"text-blue-500"}},v=()=>{h.trim()&&!x.includes(h.trim())&&(g([...x,h.trim()]),u(""))},k=()=>{y.trim()&&(b([...p,{id:Date.now().toString(),text:y.trim(),completed:!1}]),j(""))};return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:ye(r,"yyyy년 M월 d일",{locale:Ce})}),s.jsx("p",{className:"text-muted-foreground",children:ye(r,"EEEE",{locale:Ce})})]}),s.jsx("input",{type:"date",value:ye(r,"yyyy-MM-dd"),onChange:e=>{const r=new Date(e.target.value);i(r),t(`/diary/${ye(r,"yyyy-MM-dd")}`)},className:"px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg p-4 bg-muted",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"오늘의 운세"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"오늘은 새로운 시작을 하기에 좋은 날입니다. 긍정적인 에너지가 충만한 하루가 될 것입니다."})]})]}),s.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"오늘의 기분"}),s.jsx("div",{className:"flex justify-around",children:[1,2,3,4,5].map(e=>{const t=f[e];return s.jsxs("button",{onClick:()=>m(e),className:`\n                    flex flex-col items-center p-3 rounded-lg transition-all\n                    ${c===e?"bg-muted ring-2 ring-primary-500":"hover:bg-muted/50"}\n                  `,children:[s.jsx("span",{className:`text-3xl mb-1 ${t.color}`,children:t.emoji}),s.jsx("span",{className:"text-xs text-muted-foreground",children:t.label})]},e)})})]}),s.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"일기 내용"}),s.jsx("textarea",{value:l,onChange:e=>o(e.target.value),placeholder:"오늘은 어떤 하루였나요?",className:"w-full h-64 p-4 border border-border rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),s.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"태그"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:x.map(e=>s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary/20 text-primary border border-primary/30",children:["#",e,s.jsx("button",{onClick:()=>{return t=e,void g(x.filter(e=>e!==t));var t},className:"ml-2 text-primary hover:text-primary/80",children:"×"})]},e))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:h,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&v(),placeholder:"태그 추가 (Enter로 추가)",className:"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"}),s.jsx("button",{onClick:v,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"추가"})]})]}),s.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"오늘의 할일"}),s.jsxs("div",{className:"space-y-3 mb-4",children:[p.map(e=>s.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>{return t=e.id,void b(p.map(e=>e.id===t?{...e,completed:!e.completed}:e));var t},className:"w-4 h-4 text-primary rounded border-border focus:ring-primary/50"}),s.jsx("span",{className:"flex-1 "+(e.completed?"text-muted-foreground line-through":"text-foreground"),children:e.text}),s.jsx("button",{onClick:()=>{return t=e.id,void b(p.filter(e=>e.id!==t));var t},className:"text-muted-foreground hover:text-red-500 transition-colors",children:"×"})]},e.id)),0===p.length&&s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"할일을 추가해보세요"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:y,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&k(),placeholder:"할일 추가 (Enter로 추가)",className:"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"}),s.jsx("button",{onClick:k,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"추가"})]}),p.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[s.jsx("span",{children:"완료율"}),s.jsxs("span",{children:[p.filter(e=>e.completed).length,"/",p.length," (",Math.round(p.filter(e=>e.completed).length/p.length*100),"%)"]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2 mt-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:(p.length?p.filter(e=>e.completed).length/p.length*100:0)+"%"}})})]})]}),s.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"연결된 일정"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"이 날짜에 등록된 캘린더 일정이 여기에 표시됩니다."})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>t("/diary"),className:"px-6 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors",children:"취소"}),s.jsx("button",{onClick:()=>{alert("다이어리가 저장되었습니다!")},className:"px-6 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"저장"})]})]})})}const _a=async()=>{if(!("Notification"in window))return!1;if("granted"===Notification.permission)return!0;if("denied"===Notification.permission)return!1;try{return"granted"===await Notification.requestPermission()}catch(e){return!1}},Pa=()=>"Notification"in window&&"granted"===Notification.permission,Aa=e=>{if(!Pa())return null;try{const t=new Notification(e.title,{body:e.body,icon:e.icon||"/favicon.ico",tag:e.tag,badge:e.badge,data:e.data,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1});return e.requireInteraction||setTimeout(()=>{t.close()},5e3),t}catch(t){return null}},La="notification-settings",Ra=()=>{try{const e=localStorage.getItem(La);if(e)return JSON.parse(e)}catch(e){}return{enabled:!1,eventReminders:!0,diaryReminders:!0,todoDeadlines:!0,reminderMinutes:15}},Oa=()=>{const e=Ra();if(!e.enabled||!e.diaryReminders)return null;const t=new Date,r=new Date;return r.setHours(21,0,0,0),t.getHours()>=21&&r.setDate(r.getDate()+1),((e,t,r,a)=>{const s=Date.now(),n=r.getTime()-s;return n<=0||n>864e5?null:window.setTimeout(()=>{Aa({title:e,body:t,icon:"/favicon.ico",requireInteraction:!0,...a})},n)})("📝 일기 작성 시간","오늘 하루는 어떠셨나요? 일기를 작성해보세요.",r,{tag:"diary-reminder",data:{type:"diary"},requireInteraction:!1})};function Ka(){const[e,t]=a.useState(Ra()),[r,n]=a.useState("default"),[i,l]=a.useState(!1),[d,o]=a.useState(!1);a.useEffect(()=>{"Notification"in window&&n(Notification.permission)},[]);const c=(r,a)=>{const s={...e,[r]:a};t(s),(e=>{try{localStorage.setItem(La,JSON.stringify(e))}catch(t){}})(s),o(!0),setTimeout(()=>o(!1),2e3)};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(se,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"알림 설정"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"일정, 할일, 일기 알림을 관리합니다"})]})]}),d&&s.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 animate-fade-in",children:[s.jsx(C,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"저장됨"})]})]}),s.jsx("div",{className:"mb-6 p-4 rounded-lg border",children:"granted"===r?s.jsxs("div",{className:"flex items-center gap-3 text-green-600 dark:text-green-400",children:[s.jsx(se,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"알림 권한 승인됨"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"브라우저 알림을 받을 수 있습니다"})]})]}):"denied"===r?s.jsxs("div",{className:"flex items-center gap-3 text-red-600 dark:text-red-400",children:[s.jsx(ne,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"알림 권한 거부됨"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"브라우저 설정에서 알림을 허용해주세요"})]})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 text-yellow-600 dark:text-yellow-400",children:[s.jsx(se,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"알림 권한 필요"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"알림을 받으려면 권한을 허용해주세요"})]})]}),s.jsx("button",{onClick:async()=>{l(!0);try{const e=await _a();n(e?"granted":"denied"),e&&c("enabled",!0)}catch(e){}finally{l(!1)}},disabled:i,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 text-sm font-medium",children:i?"요청 중...":"권한 요청"})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"알림 활성화"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"모든 알림을 활성화/비활성화합니다"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.enabled,onChange:e=>c("enabled",e.target.checked),disabled:"granted"!==r,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600 peer-disabled:opacity-50"})]})]}),e.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"일정 알림"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"예정된 일정 시작 전에 알림을 받습니다"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.eventReminders,onChange:e=>c("eventReminders",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"할일 마감 알림"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"할일 마감 시간 전에 알림을 받습니다"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.todoDeadlines,onChange:e=>c("todoDeadlines",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"일기 작성 리마인더"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"매일 저녁 9시에 일기 작성을 안내합니다"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.diaryReminders,onChange:e=>c("diaryReminders",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"알림 시간"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"일정/할일 시작/마감 몇 분 전에 알림을 받을지 설정합니다"})]}),s.jsxs("select",{value:e.reminderMinutes,onChange:e=>c("reminderMinutes",parseInt(e.target.value)),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[s.jsx("option",{value:5,children:"5분 전"}),s.jsx("option",{value:10,children:"10분 전"}),s.jsx("option",{value:15,children:"15분 전"}),s.jsx("option",{value:30,children:"30분 전"}),s.jsx("option",{value:60,children:"1시간 전"})]})]})]})]}),e.enabled&&"granted"===r&&s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:s.jsx("button",{onClick:()=>{Pa()?Aa({title:"🧭 운명나침반",body:"알림이 정상적으로 작동합니다!",requireInteraction:!1}):alert("알림 권한이 필요합니다.")},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm font-medium",children:"📱 테스트 알림 보내기"})})]})}let Ba=(r(e=class{static async generateToCanvas(e,t,r){const a={...this.defaultOptions,...r};try{await ie.toCanvas(e,t,a)}catch(s){throw new Error("QR코드를 생성할 수 없습니다.")}}static async generateToDataURL(e,t){const r={...this.defaultOptions,...t};try{return await ie.toDataURL(e,r)}catch(a){throw new Error("QR코드를 생성할 수 없습니다.")}}static async generateToBlob(e,t){const r={...this.defaultOptions,width:400,...t};try{const t=await this.generateToDataURL(e,r),a=await fetch(t);return await a.blob()}catch(a){throw new Error("QR코드 파일을 생성할 수 없습니다.")}}static createReferralUrl(e,t){return`${t||window.location.origin}/auth?mode=signup&ref=${e}`}static downloadFile(e,t){const r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}static async downloadReferralQRCode(e,t){try{const r=this.createReferralUrl(e),a=await this.generateToBlob(r,t),s=`referral-qr-${e}.png`;this.downloadFile(a,s)}catch(r){throw r}}static async shareReferralQRCode(e,t){if(!navigator.share)throw new Error("이 브라우저는 공유 기능을 지원하지 않습니다.");try{const r=this.createReferralUrl(e),a=await this.generateToBlob(r,t),s=new File([a],`referral-qr-${e}.png`,{type:"image/png"});await navigator.share({title:"🔮 운명나침반 추천 QR코드",text:`추천인 코드: ${e}\n함께 가입하면 특별 혜택을 받을 수 있어요!`,url:r,files:[s]})}catch(r){if(r instanceof Error&&"AbortError"===r.name)return;throw new Error("QR코드를 공유할 수 없습니다.")}}},"defaultOptions",{width:200,margin:2,color:{dark:"#4338CA",light:"#FFFFFF"},errorCorrectionLevel:"M"}),e);const Ia=({referralCode:e,className:t=""})=>{const r=a.useRef(null),[n,i]=a.useState(!1),[l,d]=a.useState(null),[o,c]=a.useState("idle"),[m,x]=a.useState("idle");a.useEffect(()=>{if(!e||!r.current)return;(async()=>{i(!0),d(null);try{const t=Ba.createReferralUrl(e);await Ba.generateToCanvas(r.current,t,{width:160,color:{dark:"#667eea",light:"#ffffff"}})}catch(t){d("QR코드를 생성할 수 없습니다.")}finally{i(!1)}})()},[e]);return s.jsx("div",{className:`bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600 rounded-xl p-6 text-white ${t}`,children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center justify-center",children:[s.jsx("span",{className:"mr-2",children:"📱"}),"QR코드로 쉽게 공유하기"]}),s.jsx("div",{className:"inline-block bg-white p-4 rounded-xl shadow-lg mb-4",children:n?s.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-indigo-500 border-t-transparent rounded-full"})}):l?s.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"text-2xl mb-2",children:"❌"}),s.jsx("div",{className:"text-xs",children:l})]})}):s.jsx("canvas",{ref:r,className:"block",style:{imageRendering:"pixelated"}})}),s.jsx("p",{className:"text-sm opacity-90 mb-4",children:"QR코드를 스캔하면 바로 가입 페이지로 이동해요!"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[s.jsx("button",{onClick:async()=>{if(e){c("downloading");try{await Ba.downloadReferralQRCode(e,{width:400,color:{dark:"#667eea",light:"#ffffff"}}),c("success"),setTimeout(()=>c("idle"),2e3)}catch(t){c("error"),setTimeout(()=>c("idle"),2e3)}}},disabled:"downloading"===o||n||!!l,className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 "+("downloading"===o?"bg-gray-400 cursor-not-allowed":"success"===o?"bg-green-500 hover:bg-green-600":"error"===o?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"),children:"downloading"===o?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin inline-block mr-2",children:"⏳"}),"다운로드 중..."]}):"success"===o?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mr-2",children:"✅"}),"다운로드 완료"]}):"error"===o?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mr-2",children:"❌"}),"다운로드 실패"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mr-2",children:"💾"}),"PNG 다운로드"]})}),s.jsx("button",{onClick:async()=>{if(e){x("sharing");try{if("function"==typeof navigator.share)await Ba.shareReferralQRCode(e,{width:400,color:{dark:"#667eea",light:"#ffffff"}}),x("success");else{const t=Ba.createReferralUrl(e);await navigator.clipboard.writeText(t),x("success")}setTimeout(()=>x("idle"),2e3)}catch(t){x("error"),setTimeout(()=>x("idle"),2e3)}}},disabled:"sharing"===m||n||!!l,className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 "+("sharing"===m?"bg-gray-400 cursor-not-allowed":"success"===m?"bg-green-500 hover:bg-green-600":"error"===m?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"),children:"sharing"===m?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin inline-block mr-2",children:"⏳"}),"공유 중..."]}):"success"===m?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mr-2",children:"✅"}),"공유 완료"]}):"error"===m?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mr-2",children:"❌"}),"공유 실패"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mr-2",children:"🔗"}),"function"==typeof navigator.share?"QR 공유하기":"링크 복사"]})})]}),s.jsx("div",{className:"mt-4 text-xs opacity-75",children:s.jsx("p",{children:"💡 QR코드를 저장해서 오프라인에서도 공유해보세요!"})})]})})},za=({className:e=""})=>{const{user:t}=rt(),[r,n]=a.useState("idle"),[i,l]=a.useState(!1),d=(null==t?void 0:t.referral_code)||null,o=async()=>{if(d)try{await navigator.clipboard.writeText(d),n("copied"),setTimeout(()=>n("idle"),2e3)}catch(e){n("error"),setTimeout(()=>n("idle"),2e3)}},c=()=>{if(!d)return"";return`${window.location.origin}/auth?mode=signup&ref=${d}`},m=e=>{const t=d?`🔮 운명나침반에서 당신의 운명을 확인해보세요!\n\n추천인 코드: ${d}\n링크: ${c()}\n\n✨ 함께 가입하면 특별 혜택을 받을 수 있어요!`:"",r=c();switch(e){case"kakao":window.Kakao&&window.Kakao.Share?window.Kakao.Share.sendDefault({objectType:"text",text:t,link:{mobileWebUrl:r,webUrl:r}}):o();break;case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(r)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}`,"_blank");break;case"copy":navigator.clipboard.writeText(t),n("copied"),setTimeout(()=>n("idle"),2e3)}};return t?s.jsxs("div",{className:`space-y-6 ${e}`,children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[s.jsx("span",{className:"mr-2",children:"🎁"}),"내 추천 코드"]}),s.jsxs("button",{onClick:()=>{l(!i)},className:"text-sm text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 flex items-center space-x-1",children:[s.jsx("span",{children:"실적 보기"}),s.jsx("svg",{className:"w-4 h-4 transition-transform "+(i?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),d?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700 rounded-lg p-4",children:s.jsx("div",{className:"text-center",children:s.jsx("span",{className:"text-2xl font-mono tracking-widest text-purple-700 dark:text-purple-300",children:d})})}),s.jsx("button",{onClick:o,className:"px-4 py-3 rounded-lg font-medium transition-all duration-200 "+("copied"===r?"bg-green-500 text-white":"error"===r?"bg-red-500 text-white":"bg-purple-600 hover:bg-purple-700 text-white"),children:"copied"===r?"✓ 복사됨":"error"===r?"❌ 실패":"📋 복사"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[s.jsxs("button",{onClick:()=>m("kakao"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm",children:[s.jsx("span",{children:"💬"}),s.jsx("span",{children:"카카오톡"})]}),s.jsxs("button",{onClick:()=>m("facebook"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm",children:[s.jsx("span",{children:"📘"}),s.jsx("span",{children:"페이스북"})]}),s.jsxs("button",{onClick:()=>m("twitter"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg transition-colors text-sm",children:[s.jsx("span",{children:"🐦"}),s.jsx("span",{children:"트위터"})]}),s.jsxs("button",{onClick:()=>m("copy"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm",children:[s.jsx("span",{children:"📎"}),s.jsx("span",{children:"링크복사"})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:s.jsx("span",{className:"font-medium",children:"친구 추천 혜택"})}),s.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[s.jsx("li",{children:"• 친구가 가입하면 둘 다 프리미엄 기능 1개월 무료"}),s.jsx("li",{children:"• 특별 사주 분석 리포트 제공"}),s.jsx("li",{children:"• 궁합 분석 서비스 무제한 이용"})]})]}),s.jsx(Ia,{referralCode:d,className:"mt-4"})]}):s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"추천 코드가 아직 생성되지 않았습니다."})})]}),i&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-xl p-6 border border-green-200 dark:border-green-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"📊"}),"추천 실적"]}),s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"실적 정보를 불러올 수 없습니다."})})]}),null]}):null};(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString(),(new Date).toISOString();const qa="/api/customers";async function Wa(e=1,t=20,r=""){var a,s;const n=new URLSearchParams({page:e.toString(),limit:t.toString(),search:r}),i=`${qa}?${n}`;try{const r=await fetch(i);if(!r.ok){await r.text();throw new Error(`고객 목록을 불러오는데 실패했습니다 (${r.status})`)}const n=await r.json();return{success:n.success,data:n.data||[],total:n.total||(null==(a=n.data)?void 0:a.length)||0,page:e,totalPages:Math.ceil((n.total||(null==(s=n.data)?void 0:s.length)||0)/t)}}catch(l){throw l}}async function Ha(e){const t=qa,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const e=await r.json();throw new Error(e.error||"고객 등록에 실패했습니다")}return r.json()}function Ya({embedded:e=!1}){const[t,r]=a.useState([]),[n,i]=a.useState(0),[l,d]=a.useState(1),[o,c]=a.useState(""),[m,x]=a.useState(!1),[g,h]=a.useState(null),[u,p]=a.useState(!1),[b,y]=a.useState({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""});a.useEffect(()=>{j()},[l,o]);const j=async()=>{try{p(!0);const e=await Wa(l,20,o);r(e.data),i(e.totalPages)}catch(e){alert("고객 목록을 불러오는데 실패했습니다")}finally{p(!1)}},f=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{await async function(e){const t=`${qa}?id=${e}`,r=await fetch(t,{method:"DELETE"});if(!r.ok){const e=await r.json();throw new Error(e.error||"고객 삭제에 실패했습니다")}return r.json()}(e),alert("고객이 삭제되었습니다"),j()}catch(t){alert(t.message||"삭제 중 오류가 발생했습니다")}},v=()=>{y({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""})};return s.jsx("div",{className:e?"w-full":"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:s.jsxs("div",{className:e?"w-full":"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 "+(e?"border border-gray-200 dark:border-gray-600":""),children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:(e?"text-lg":"text-2xl")+" font-bold text-gray-900 dark:text-white",children:"🗂️ 고객 관리"}),s.jsx("button",{onClick:()=>{h(null),v(),x(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"➕ 새 고객 등록"})]}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"text",placeholder:"🔍 이름 또는 전화번호로 검색...",value:o,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \n                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"번호"}),s.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"이름"}),s.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"생년월일"}),s.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"생시"}),s.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"전화번호"}),s.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"음/양"}),s.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"성별"}),s.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"관리"})]})}),s.jsx("tbody",{children:u?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"로딩 중..."})}):0===t.length?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"등록된 고객이 없습니다"})}):t.filter(e=>null!=e).map((e,t)=>s.jsxs("tr",{className:"border-b dark:border-gray-700",children:[s.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:20*(l-1)+t+1}),s.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white font-medium",children:e.name}),s.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:e.birth_date}),s.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:e.birth_time}),s.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:e.phone}),s.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:"lunar"===e.lunar_solar?"음력":"양력"}),s.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:"male"===e.gender?"남":"여"}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("button",{onClick:()=>(e=>{h(e),y({name:e.name,birth_date:e.birth_date,birth_time:e.birth_time,phone:e.phone,lunar_solar:e.lunar_solar,gender:e.gender,memo:e.memo||""}),x(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:"✏️"}),s.jsx("button",{onClick:()=>f(e.id),className:"text-red-600 hover:text-red-800",children:"🗑️"})]})]},e.id))})]})}),n>1&&s.jsxs("div",{className:"flex justify-center mt-6 space-x-2",children:[s.jsx("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:1===l,className:"px-3 py-1 border rounded disabled:opacity-50",children:"◀"}),[...Array(n)].map((e,t)=>s.jsx("button",{onClick:()=>d(t+1),className:"px-3 py-1 border rounded "+(l===t+1?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:t+1},t)),s.jsx("button",{onClick:()=>d(e=>Math.min(n,e+1)),disabled:l===n,className:"px-3 py-1 border rounded disabled:opacity-50",children:"▶"})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-900 dark:text-white",children:g?"고객 정보 수정":"새 고객 등록"}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{g?(await async function(e,t){const r=`${qa}?id=${e}`,a=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const e=await a.json();throw new Error(e.error||"고객 정보 수정에 실패했습니다")}return a.json()}(g.id,b),alert("고객 정보가 수정되었습니다")):(await Ha(b),alert("고객이 등록되었습니다")),x(!1),h(null),v(),j()}catch(t){alert(t.message||"저장 중 오류가 발생했습니다")}},children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"이름 *"}),s.jsx("input",{type:"text",required:!0,value:b.name,onChange:e=>y({...b,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"생년월일 *"}),s.jsx("input",{type:"date",required:!0,value:b.birth_date,onChange:e=>y({...b,birth_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"생시 * (24시간 형식)"}),s.jsx("input",{type:"time",required:!0,value:b.birth_time,onChange:e=>y({...b,birth_time:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"전화번호 *"}),s.jsx("input",{type:"tel",required:!0,placeholder:"010-1234-5678",value:b.phone,onChange:e=>y({...b,phone:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"음력/양력"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",value:"solar",checked:"solar"===b.lunar_solar,onChange:e=>y({...b,lunar_solar:"solar"}),className:"mr-2"}),"양력"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",value:"lunar",checked:"lunar"===b.lunar_solar,onChange:e=>y({...b,lunar_solar:"lunar"}),className:"mr-2"}),"음력"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"성별 *"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",value:"male",checked:"male"===b.gender,onChange:e=>y({...b,gender:"male"}),className:"mr-2"}),"남"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",value:"female",checked:"female"===b.gender,onChange:e=>y({...b,gender:"female"}),className:"mr-2"}),"여"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"메모"}),s.jsx("textarea",{value:b.memo,onChange:e=>y({...b,memo:e.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>{x(!1),h(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"취소"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:g?"수정하기":"등록하기"})]})]})]})})]})})}function Ua(){const e=n(),{settings:t}=Tt(),{setBirthInfo:r}=qr(),[i,l]=a.useState(t),[d,o]=a.useState("general"),[c,m]=a.useState({birthDate:"",birthTime:"",calendarType:"solar",gender:"",birthPlace:""}),[x,g]=a.useState("idle");a.useEffect(()=>{const e=localStorage.getItem("sajuapp-personal-info");if(e)try{const t=JSON.parse(e);m(t)}catch(t){}},[]);return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground mb-6",children:"설정"}),s.jsxs("div",{className:"flex gap-6",children:[s.jsx("div",{className:"w-64",children:s.jsx("nav",{className:"bg-background rounded-lg shadow-sm border border-border p-2",children:[{id:"general",label:"일반",icon:"⚙️"},{id:"calendar",label:"캘린더",icon:"📅"},{id:"diary",label:"다이어리",icon:"📝"},{id:"notifications",label:"알림",icon:"🔔"},{id:"account",label:"계정",icon:"👤"},{id:"customers",label:"고객관리",icon:"👥"}].map(e=>s.jsxs("button",{onClick:()=>o(e.id),className:`\n                    w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors\n                    ${d===e.id?"bg-primary/10 text-primary":"text-foreground hover:bg-muted"}\n                  `,children:[s.jsx("span",{className:"text-xl",children:e.icon}),s.jsx("span",{className:"font-medium",children:e.label})]},e.id))})}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6",children:["general"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"일반 설정"}),s.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200 dark:border-purple-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"🎂"}),"사주 정보 (개인화 운세를 위해 필요)"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"생년월일 *"}),s.jsx("input",{type:"date",value:c.birthDate,onChange:e=>m({...c,birthDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",placeholder:"YYYY-MM-DD"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"출생 시간 *"}),s.jsx("input",{type:"time",step:"1800",value:c.birthTime,onChange:e=>m({...c,birthTime:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"24시간 형식으로 입력해주세요 (예: 14:30)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"달력 종류 *"}),s.jsxs("select",{value:c.calendarType,onChange:e=>m({...c,calendarType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[s.jsx("option",{value:"solar",children:"양력"}),s.jsx("option",{value:"lunar",children:"음력"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"성별 *"}),s.jsxs("select",{value:c.gender,onChange:e=>m({...c,gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[s.jsx("option",{value:"",children:"선택해주세요"}),s.jsx("option",{value:"male",children:"남성"}),s.jsx("option",{value:"female",children:"여성"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"전통 사주학에서 성별에 따른 해석이 달라집니다"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"출생지 (선택사항)"}),s.jsx("input",{type:"text",value:c.birthPlace,onChange:e=>m({...c,birthPlace:e.target.value}),placeholder:"예: 서울시 강남구",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"더 정확한 시간 계산을 위해 출생지를 입력할 수 있습니다"})]}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:s.jsxs("label",{className:"flex items-start cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c.useTrueSolarTime||!1,onChange:e=>m({...c,useTrueSolarTime:e.target.checked}),className:"mt-1 mr-3 w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"진태양시(真太陽時) 보정 적용"}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"한국 표준시와 실제 태양시의 차이(약 30분)를 보정합니다. 전통 사주학에서 권장하는 방법입니다."}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"💡 예: 09:15 입력 시 → 08:45로 자동 보정되어 시주 계산"})]})]})}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",s.jsx("strong",{children:"개인정보 보호:"})," 입력하신 정보는 개인화된 운세 제공을 위해서만 사용되며, 로컬에 안전하게 저장됩니다."]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"테마"}),s.jsxs("select",{value:i.theme,onChange:e=>l({...i,theme:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[s.jsx("option",{value:"light",children:"라이트"}),s.jsx("option",{value:"dark",children:"다크"}),s.jsx("option",{value:"system",children:"시스템 설정 따르기"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"언어"}),s.jsxs("select",{value:i.language,onChange:e=>l({...i,language:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[s.jsx("option",{value:"ko",children:"한국어"}),s.jsx("option",{value:"en",children:"English"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"시간대"}),s.jsxs("select",{value:i.timezone,onChange:e=>l({...i,timezone:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[s.jsx("option",{value:"Asia/Seoul",children:"서울 (GMT+9)"}),s.jsx("option",{value:"America/New_York",children:"뉴욕 (GMT-5)"}),s.jsx("option",{value:"Europe/London",children:"런던 (GMT+0)"})]})]})]}),"calendar"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"캘린더 설정"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"기본 보기"}),s.jsxs("select",{value:i.defaultView,onChange:e=>l({...i,defaultView:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[s.jsx("option",{value:"year",children:"년"}),s.jsx("option",{value:"month",children:"월"}),s.jsx("option",{value:"week",children:"주"}),s.jsx("option",{value:"day",children:"일"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"주 시작일"}),s.jsxs("select",{value:i.weekStartsOn,onChange:e=>l({...i,weekStartsOn:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[s.jsx("option",{value:"0",children:"일요일"}),s.jsx("option",{value:"1",children:"월요일"})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:i.showLunarCalendar,onChange:e=>l({...i,showLunarCalendar:e.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"음력 날짜 표시"})]})}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:i.showFortune,onChange:e=>l({...i,showFortune:e.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"운세 정보 표시"})]})})]}),"diary"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"다이어리 설정"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"기본 공개 범위"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[s.jsx("option",{value:"private",children:"비공개"}),s.jsx("option",{value:"friends",children:"친구만"}),s.jsx("option",{value:"public",children:"전체 공개"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"일일 알림 활성화"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-7",children:"매일 저녁 9시에 다이어리 작성 알림을 받습니다."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"자동 저장"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-7",children:"작성 중인 내용을 30초마다 자동으로 저장합니다."})]})]}),"notifications"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"알림 설정"}),s.jsx(Ka,{})]}),"account"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"계정 설정"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"이메일"}),s.jsx("input",{type:"email",defaultValue:"user@example.com",disabled:!0,className:"w-full px-3 py-2 border border-border rounded-lg bg-muted text-muted-foreground"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"사용자명"}),s.jsx("input",{type:"text",defaultValue:"홍길동",className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"프로필 사진"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center text-2xl text-muted-foreground",children:"👤"}),s.jsx("button",{className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors",children:"사진 변경"})]})]}),s.jsx("div",{className:"pt-4 border-t border-border",children:s.jsx(za,{})}),s.jsx("div",{className:"pt-4 border-t border-border",children:s.jsx("button",{className:"px-4 py-2 text-red-600 hover:bg-red-500/10 rounded-lg transition-colors",children:"계정 삭제"})})]}),"customers"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"고객관리"}),s.jsx(Ya,{embedded:!0}),s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsxs("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:[s.jsx("span",{className:"mr-2",children:"⚙️"}),"고객 데이터 설정"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"고객 정보 자동 백업"})]}),s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"상담 알림 활성화"})]}),s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"고객 생일 알림"})]})]})]})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-border flex justify-end gap-3",children:[s.jsx("button",{className:"px-6 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors",children:"취소"}),s.jsx("button",{onClick:async()=>{if("general"!==d||(c.birthDate?c.birthTime?c.gender||(alert("성별을 선택해주세요."),0):(alert("출생시간을 입력해주세요."),0):(alert("생년월일을 입력해주세요."),0))){g("saving");try{if("general"===d){localStorage.setItem("sajuapp-personal-info",JSON.stringify(c));const e={year:new Date(c.birthDate).getFullYear(),month:new Date(c.birthDate).getMonth()+1,day:new Date(c.birthDate).getDate(),hour:parseInt(c.birthTime.split(":")[0])||0,minute:parseInt(c.birthTime.split(":")[1])||0,isLunar:"lunar"===c.calendarType,isMale:"male"===c.gender,name:"male"===c.gender?"사용자(남)":"사용자(여)",useTrueSolarTime:c.useTrueSolarTime||!1};r(e);qr.getState().birthInfo;window.dispatchEvent(new CustomEvent("personalInfoUpdated",{detail:c}))}localStorage.setItem("sajuapp-settings",JSON.stringify(i)),g("saved"),setTimeout(()=>{if(g("idle"),"general"===d){window.confirm("설정이 저장되었습니다. 운세를 확인하러 캘린더로 이동하시겠습니까?")&&e("/calendar")}},2e3)}catch(t){g("error"),alert("설정 저장에 실패했습니다. 다시 시도해주세요.")}}},disabled:"saving"===x,className:"px-6 py-2 rounded-lg transition-colors "+("saving"===x?"bg-gray-400 cursor-not-allowed text-white":"saved"===x?"bg-green-500 hover:bg-green-600 text-white":"bg-primary-500 hover:bg-primary-600 text-white"),children:"saving"===x?"저장 중...":"saved"===x?"✓ 저장 완료":"저장"})]})]})})]})]})})}const Ga=()=>{const[e,t]=a.useState(new Date),[r,n]=a.useState(null),[i,l]=a.useState(!1),[d,o]=a.useState(null),[c,m]=a.useState(!1);a.useEffect(()=>{(()=>{const e=localStorage.getItem("sajuapp-personal-info");if(e)try{const t=JSON.parse(e);o(t),m(!1)}catch(t){m(!0)}else m(!0)})();const e=e=>{o(e.detail),m(!1)};return window.addEventListener("personalInfoUpdated",e),()=>{window.removeEventListener("personalInfoUpdated",e)}},[]);a.useEffect(()=>{d&&!c?(l(!0),setTimeout(()=>{n({date:e.toISOString().split("T")[0],overallScore:Math.floor(30*Math.random())+70,categories:{love:{score:Math.floor(100*Math.random()),description:"새로운 만남의 기회가 있을 수 있습니다. 열린 마음으로 대화를 나누어보세요."},career:{score:Math.floor(100*Math.random()),description:"업무에서 중요한 성과를 낼 수 있는 날입니다. 집중력을 발휘하세요."},money:{score:Math.floor(100*Math.random()),description:"재정 관리에 신중을 기하세요. 충동적인 소비는 피하는 것이 좋습니다."},health:{score:Math.floor(100*Math.random()),description:"충분한 휴식이 필요합니다. 스트레스 관리에 유의하세요."}},luckyItems:{number:Math.floor(100*Math.random()),color:["빨강","파랑","노랑","초록","보라"][Math.floor(5*Math.random())],direction:["동","서","남","북","중앙"][Math.floor(5*Math.random())],time:`${Math.floor(12*Math.random())+1}시`},advice:"오늘은 긍정적인 에너지가 충만한 날입니다. 평소 미루어왔던 일을 시작하기에 좋은 시기입니다.",warning:"과도한 자신감은 실수를 부를 수 있으니 겸손한 자세를 유지하세요."}),l(!1)},500)):n(null)},[e,d,c]);const x=e=>e>=80?"text-green-600 dark:text-green-400":e>=60?"text-yellow-600 dark:text-yellow-400":e>=40?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400";return s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"🔮 오늘의 운세"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"AI와 전통 사주명리학이 분석한 당신의 하루"})]}),s.jsx("div",{className:"flex justify-center mb-8",children:s.jsx("input",{type:"date",value:e.toISOString().split("T")[0],onChange:e=>t(new Date(e.target.value)),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})}),i?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):c?s.jsx("div",{className:"max-w-md mx-auto text-center",children:s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-8",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🔮"}),s.jsx("h3",{className:"text-xl font-semibold text-yellow-800 dark:text-yellow-200 mb-4",children:"개인정보가 필요합니다"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"정확한 사주 분석을 위해 생년월일, 출생시간 등의 개인정보가 필요합니다."}),s.jsx("button",{onClick:()=>window.location.href="/settings",className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"⚙️ 설정에서 개인정보 입력하기"})]})}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-8 text-white",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"종합 운세 점수"}),s.jsxs("div",{className:"text-6xl font-bold mb-2",children:[r.overallScore,"점"]}),s.jsx("div",{className:"text-4xl mb-4",children:(g=r.overallScore,g>=80?"😄":g>=60?"🙂":g>=40?"😐":"😔")}),s.jsx("p",{className:"text-lg opacity-90",children:r.advice})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(r.categories).map(([e,t])=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white capitalize",children:["love"===e&&"💕 연애운","career"===e&&"💼 직장운","money"===e&&"💰 금전운","health"===e&&"🏃 건강운"]}),s.jsxs("span",{className:`text-2xl font-bold ${x(t.score)}`,children:[t.score,"점"]})]}),s.jsx("div",{className:"relative h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-4",children:s.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500",style:{width:`${t.score}%`}})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.description})]},e))}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"🍀 오늘의 행운 아이템"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("span",{className:"text-3xl mb-2 block",children:"🔢"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 숫자"}),s.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:r.luckyItems.number})]}),s.jsxs("div",{className:"text-center p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[s.jsx("span",{className:"text-3xl mb-2 block",children:"🎨"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 색"}),s.jsx("p",{className:"text-lg font-bold text-pink-600 dark:text-pink-400",children:r.luckyItems.color})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("span",{className:"text-3xl mb-2 block",children:"🧭"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"길한 방향"}),s.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:r.luckyItems.direction})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("span",{className:"text-3xl mb-2 block",children:"⏰"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 시간"}),s.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:r.luckyItems.time})]})]})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"⚠️ 오늘의 주의사항"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:r.warning})]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"📱 카카오톡 공유"}),s.jsx("button",{className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"💬 네이버 공유"}),s.jsx("button",{className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"📷 이미지 저장"})]})]}):null]});var g},Qa=["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"],Va=[{name:"자",start:23,end:25},{name:"축",start:1,end:3},{name:"인",start:3,end:5},{name:"묘",start:5,end:7},{name:"진",start:7,end:9},{name:"사",start:9,end:11},{name:"오",start:11,end:13},{name:"미",start:13,end:15.5},{name:"신",start:15.5,end:17},{name:"유",start:17,end:19},{name:"술",start:19,end:21},{name:"해",start:21,end:23}],Ja={"갑":["갑","을","병","정","무","기","경","신","임","계","갑","을"],"을":["병","정","무","기","경","신","임","계","갑","을","병","정"],"병":["무","기","경","신","임","계","갑","을","병","정","무","기"],"정":["경","신","임","계","갑","을","병","정","무","기","경","신"],"무":["임","계","갑","을","병","정","무","기","경","신","임","계"],"기":["갑","을","병","정","무","기","경","신","임","계","갑","을"],"경":["병","정","무","기","경","신","임","계","갑","을","병","정"],"신":["무","기","경","신","임","계","갑","을","병","정","무","기"],"임":["경","신","임","계","갑","을","병","정","무","기","경","신"],"계":["임","계","갑","을","병","정","무","기","경","신","임","계"]};function Za(e,t,r){let a=e;(1===t||2===t&&r<4)&&(a-=1);let s=(a-1984)%60;return s<0&&(s+=60),Qa[s]}const Xa={"갑":["병","정","무","기","경","신","임","계","갑","을","병","정"],"을":["무","기","경","신","임","계","갑","을","병","정","무","기"],"병":["경","신","임","계","갑","을","병","정","무","기","경","신"],"정":["임","계","갑","을","병","정","무","기","경","신","임","계"],"무":["갑","을","병","정","무","기","경","신","임","계","갑","을"],"기":["병","정","무","기","경","신","임","계","갑","을","병","정"],"경":["무","기","경","신","임","계","갑","을","병","정","무","기"],"신":["경","신","임","계","갑","을","병","정","무","기","경","신"],"임":["임","계","갑","을","병","정","무","기","경","신","임","계"],"계":["갑","을","병","정","무","기","경","신","임","계","갑","을"]};function es(e,t,r){const a=Math.floor((14-t)/12),s=e+4800-a,n=t+12*a-3;return r+Math.floor((153*n+2)/5)+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)-32045}function ts(e,t,r,a,s=0,n,i){const l=function(e,t,r){const a=[{year:1948,start:[5,1],end:[9,13]},{year:1949,start:[4,3],end:[9,11]},{year:1950,start:[4,1],end:[9,10]},{year:1951,start:[5,6],end:[9,9]},{year:1955,start:[5,5],end:[9,9]},{year:1956,start:[5,20],end:[9,30]},{year:1957,start:[5,5],end:[9,22]},{year:1958,start:[5,4],end:[9,21]},{year:1959,start:[5,3],end:[9,20]},{year:1960,start:[5,1],end:[9,18]},{year:1987,start:[5,10],end:[10,11]},{year:1988,start:[5,8],end:[10,9]}].find(t=>t.year===e);if(!a)return!1;const[s,n]=a.start,[i,l]=a.end;return t>s&&t<i||t===s&&r>=n||t===i&&r<l}(e,t,r);let d=a,o=s;i&&(o-=30,o<0&&(o+=60,d-=1)),l&&(d-=1987===e&&9===t&&30===r?1.5:1);const c=Za(e,t,r),m=function(e,t,r){const a=Za(e,t,r)[0];let s=t;1===t?s=r>=6?12:11:2===t?s=r>=4?1:12:3===t?s=r>=6?2:1:4===t?s=r>=5?3:2:5===t?s=r>=6?4:3:6===t?s=r>=6?5:4:7===t?s=r>=7?6:5:8===t?s=r>=8?7:6:9===t?s=r>=8?8:7:10===t?s=r>=8?9:8:11===t?s=r>=8?10:9:12===t&&(s=r>=7?11:10);const n=Xa[a];return n?n[s-1]+["인","묘","진","사","오","미","신","유","술","해","자","축"][(s-1)%12]:"갑인"}(e,t,r),x=function(e,t,r){const a=es(1900,1,1);let s=(es(e,t,r)-a+10)%60;return s<0&&(s+=60),Qa[s]}(e,t,r),g=function(e,t,r=0){let a=t+r/60;a<0&&(a+=24),a>=24&&(a-=24);let s=0;if(a>=23||a<1)s=0;else for(let i=1;i<Va.length;i++){const e=Va[i];if(a>=e.start&&a<e.end){s=i;break}}const n=Ja[e];return n?n[s]+Va[s].name:"갑자"}(x[0],d,o);return{year:c,month:m,day:x,hour:g,fullSaju:`${c} ${m} ${x} ${g}`,summerTimeApplied:l,trueSolarTimeApplied:i||!1}}const rs={"갑":"wood","을":"wood","병":"fire","정":"fire","무":"earth","기":"earth","경":"metal","신":"metal","임":"water","계":"water"},as={"자":"water","축":"earth","인":"wood","묘":"wood","진":"earth","사":"fire","오":"fire","미":"earth","신":"metal","유":"metal","술":"earth","해":"water"},ss={"자":["계"],"축":["기","계","신"],"인":["갑","병","무"],"묘":["을"],"진":["무","을","계"],"사":["병","무","경"],"오":["정","기"],"미":["기","정","을"],"신":["경","임","무"],"유":["신"],"술":["무","신","정"],"해":["임","갑"]},ns={"갑":{"갑":"bijeon","을":"geopjae","병":"siksin","정":"sanggwan","무":"pyeonjae","기":"jeongjae","경":"pyeongwan","신":"jeonggwan","임":"pyeongin","계":"jeongin"},"을":{"을":"bijeon","갑":"geopjae","정":"siksin","병":"sanggwan","기":"pyeonjae","무":"jeongjae","신":"pyeongwan","경":"jeonggwan","계":"pyeongin","임":"jeongin"},"병":{"병":"bijeon","정":"geopjae","무":"siksin","기":"sanggwan","경":"pyeonjae","신":"jeongjae","임":"pyeongwan","계":"jeonggwan","갑":"pyeongin","을":"jeongin"},"정":{"정":"bijeon","병":"geopjae","기":"siksin","무":"sanggwan","신":"pyeonjae","경":"jeongjae","계":"pyeongwan","임":"jeonggwan","을":"pyeongin","갑":"jeongin"},"무":{"무":"bijeon","기":"geopjae","경":"siksin","신":"sanggwan","임":"pyeonjae","계":"jeongjae","갑":"pyeongwan","을":"jeonggwan","병":"pyeongin","정":"jeongin"},"기":{"기":"bijeon","무":"geopjae","신":"siksin","경":"sanggwan","계":"pyeonjae","임":"jeongjae","을":"pyeongwan","갑":"jeonggwan","정":"pyeongin","병":"jeongin"},"경":{"경":"bijeon","신":"geopjae","임":"siksin","계":"sanggwan","갑":"pyeonjae","을":"jeongjae","병":"pyeongwan","정":"jeonggwan","무":"pyeongin","기":"jeongin"},"신":{"신":"bijeon","경":"geopjae","계":"siksin","임":"sanggwan","을":"pyeonjae","갑":"jeongjae","정":"pyeongwan","병":"jeonggwan","기":"pyeongin","무":"jeongin"},"임":{"임":"bijeon","계":"geopjae","갑":"siksin","을":"sanggwan","병":"pyeonjae","정":"jeongjae","무":"pyeongwan","기":"jeonggwan","경":"pyeongin","신":"jeongin"},"계":{"계":"bijeon","임":"geopjae","을":"siksin","갑":"sanggwan","정":"pyeonjae","병":"jeongjae","기":"pyeongwan","무":"jeonggwan","신":"pyeongin","경":"jeongin"}};function is(e,t){const r=(e.wood+e.earth)/2,a=2*t.bijeon+2*t.jeongin;return Math.min(100,Math.round(r+a))}function ls(e,t){const r=(e.water+e.fire)/2,a=2*t.siksin+1.5*t.sanggwan;return Math.min(100,Math.round(r+a))}function ds(e,t){const r=(e.wood+e.fire)/2,a=2*t.jeongjae+1.5*t.pyeonjae;return Math.min(100,Math.round(r+a))}function os(e,t){const r=(e.metal+e.wood)/2,a=2*t.jeonggwan+1.5*t.pyeongwan;return Math.min(100,Math.round(r+a))}function cs(e,t){const r=Object.values(e),a=r.reduce((e,t)=>e+t,0)/r.length,s=r.reduce((e,t)=>e+Math.pow(t-a,2),0)/r.length,n=Math.max(0,100-2*s),i=(t.jeongin+t.pyeongin+t.siksin)/3;return Math.min(100,Math.round(.6*n+.4*i))}function ms(e,t){const r=(e.earth+e.water)/2,a=1.5*t.bijeon+1.5*t.geopjae;return Math.min(100,Math.round(r+a))}function xs(e){return Object.values(e).reduce((e,t)=>e+t,0)}function gs(e){const t=Object.values(e);return t.reduce((e,t)=>e+t,0)/t.length}function hs(e){let t=e.year,r=e.month,a=e.day;if(e.isLunar){const s=new Z;s.setLunarDate(e.year,e.month,e.day,!1);const n=s.getSolarCalendar();t=n.year,r=n.month,a=n.day}const s=ts(t,r,a,e.hour,e.minute||0,0,e.useTrueSolarTime),n={year:{heavenly:s.year[0],earthly:s.year[1]},month:{heavenly:s.month[0],earthly:s.month[1]},day:{heavenly:s.day[0],earthly:s.day[1]},hour:{heavenly:s.hour[0],earthly:s.hour[1]}},i=function(e){const t={wood:0,fire:0,earth:0,metal:0,water:0};[e.year,e.month,e.day,e.hour].forEach((e,r)=>{const a=rs[e.heavenly];if(a){const e=2===r?20:15;t[a]+=e}const s=as[e.earthly];if(s){const e=2===r?15:10;t[s]+=e}(ss[e.earthly]||[]).forEach(e=>{const r=rs[e];r&&(t[r]+=5)})});const r=Object.values(t).reduce((e,t)=>e+t,0);return r>0&&Object.keys(t).forEach(e=>{const a=e;t[a]=Math.round(t[a]/r*100)}),t}(n),l=function(e){const t=e.day.heavenly,r={bijeon:0,geopjae:0,siksin:0,sanggwan:0,jeongjae:0,pyeonjae:0,jeonggwan:0,pyeongwan:0,jeongin:0,pyeongin:0};return ns[t]?([e.year,e.month,e.day,e.hour].forEach((e,a)=>{const s=ns[t][e.heavenly];if(s){const e=2===a?15:10;r[s]+=e}(ss[e.earthly]||[]).forEach(e=>{const a=ns[t][e];a&&(r[a]+=5)})}),r):r}(n),d=function(e,t){return{foundation:is(e,t),thinking:ls(e,t),relationship:ds(e,t),action:os(e,t),luck:cs(e,t),environment:ms(e,t)}}(i,l),o=(c=i,m=l,{emotion:Math.min(100,Math.round(.7*c.water+2*m.jeongin)),logic:Math.min(100,Math.round(.7*c.metal+2*m.jeonggwan)),artistic:Math.min(100,Math.round(.7*c.fire+2*m.siksin)),rational:Math.min(100,Math.round(.7*c.earth+2*m.sanggwan)),character:Math.min(100,Math.round(.7*c.wood+2*m.bijeon)),intelligence:Math.min(100,Math.round(.4*(c.water+c.metal)+2*m.pyeongin)),learning:Math.min(100,Math.round(.5*c.wood+2.5*m.jeongin))});var c,m;const x=function(e,t){return{health:Math.min(100,Math.round(.8*e.wood+2*t.bijeon)),marriage:Math.min(100,Math.round(.6*e.fire+1.5*(t.jeongjae+t.pyeonjae))),power:Math.min(100,Math.round(.7*e.metal+1.5*(t.jeonggwan+t.pyeongwan))),fame:Math.min(100,Math.round(.8*e.fire+2*t.siksin)),accident:Math.max(10,Math.round(100-.8*e.earth-2*t.jeongin)),business:Math.min(100,Math.round(.6*e.metal+2.5*t.pyeonjae)),movement:Math.min(100,Math.round(.8*e.water+2*t.geopjae)),separation:Math.max(10,Math.round(100-.7*e.earth-2*t.bijeon)),relationship:Math.min(100,Math.round(.7*e.fire+2*t.jeongin)),children:Math.min(100,Math.round(.6*e.wood+2.5*t.siksin)),talent:Math.min(100,Math.round(.7*e.water+2*t.pyeongin)),wealth:Math.min(100,Math.round(.5*e.metal+2*(t.jeongjae+t.pyeonjae))),ancestor:Math.min(100,Math.round(.8*e.earth+1.5*t.jeongin)),career:Math.min(100,Math.round(.6*e.metal+2.5*t.jeonggwan)),family:Math.min(100,Math.round(.7*e.earth+2*t.bijeon)),study:Math.min(100,Math.round(.6*e.water+2.5*t.jeongin)),fortune:Math.min(100,Math.round(.4*(e.fire+e.water)+2*t.pyeongin))}}(i,l);return{birthInfo:e,fourPillars:n,fiveElements:i,tenGods:l,sixAreas:d,dayMaster:n.day.heavenly,totalScore:xs(d),averageScore:gs(d),personalityTraits:o,seventeenFortunes:x}}class us{static analyzeFromSaju(e){const{fiveElements:t}=e;return{wood:t.wood||0,fire:t.fire||0,earth:t.earth||0,metal:t.metal||0,water:t.water||0}}static analyzeElementRelationships(e){const t=e.wood+e.fire+e.earth+e.metal+e.water,r={wood_fire:Math.min(e.wood*e.fire/100,100),fire_earth:Math.min(e.fire*e.earth/100,100),earth_metal:Math.min(e.earth*e.metal/100,100),metal_water:Math.min(e.metal*e.water/100,100),water_wood:Math.min(e.water*e.wood/100,100)},a={wood_earth:Math.min(e.wood*e.earth/100,100),fire_metal:Math.min(e.fire*e.metal/100,100),earth_water:Math.min(e.earth*e.water/100,100),metal_wood:Math.min(e.metal*e.wood/100,100),water_fire:Math.min(e.water*e.fire/100,100)},s=Object.values(e),n=t/5,i=s.reduce((e,t)=>e+Math.pow(t-n,2),0)/5,l=Math.max(0,100-i),d=[],o=[],c=[];return Object.entries(e).forEach(([e,r])=>{const a=r/t;a>.3?d.push(e):a<.1&&o.push(e),0===r&&c.push(e)}),{mutual_generation:r,mutual_destruction:a,balance_score:l,dominant_elements:d,weak_elements:o,missing_elements:c}}static generateRecommendations(e,t){return{colors:this.getColorRecommendations(e),directions:this.getDirectionRecommendations(e),activities:this.getActivityRecommendations(e),lifestyle:this.getLifestyleRecommendations(e)}}static getElementDetails(){return{wood:{name:"Wood",korean:"목(木)",icon:"🌳",color:{primary:"#10B981",secondary:"#34D399",background:"#ECFDF5"},characteristics:{positive:["창의성","성장력","유연성","진취성"],negative:["성급함","변덕","우유부단","과도한 이상주의"]},season:"봄",direction:"동쪽",body_parts:["간","담","눈","근육"],emotions:["분노","짜증","좌절감"]},fire:{name:"Fire",korean:"화(火)",icon:"🔥",color:{primary:"#EF4444",secondary:"#F87171",background:"#FEF2F2"},characteristics:{positive:["열정","활력","리더십","표현력"],negative:["성급함","충동성","과열","소진"]},season:"여름",direction:"남쪽",body_parts:["심장","소장","혀","혈관"],emotions:["기쁨","흥분","조급함"]},earth:{name:"Earth",korean:"토(土)",icon:"🏔️",color:{primary:"#A16207",secondary:"#D97706",background:"#FFFBEB"},characteristics:{positive:["안정성","신뢰성","포용력","인내력"],negative:["고집","보수성","느림","걱정"]},season:"늦여름",direction:"중앙",body_parts:["비장","위","입","살"],emotions:["걱정","우려","사려깊음"]},metal:{name:"Metal",korean:"금(金)",icon:"⚡",color:{primary:"#FCD34D",secondary:"#FDE047",background:"#FEFCE8"},characteristics:{positive:["정의감","원칙성","완결력","논리성"],negative:["경직성","냉정함","비판적","완벽주의"]},season:"가을",direction:"서쪽",body_parts:["폐","대장","코","피부"],emotions:["슬픔","우울","아쉬움"]},water:{name:"Water",korean:"수(水)",icon:"💧",color:{primary:"#3B82F6",secondary:"#60A5FA",background:"#EFF6FF"},characteristics:{positive:["지혜","융통성","적응력","직관력"],negative:["우유부단","소극성","냉담","변덕"]},season:"겨울",direction:"북쪽",body_parts:["신장","방광","귀","뼈"],emotions:["두려움","불안","신중함"]}}}static getColorRecommendations(e){const t=Object.entries(e).sort(([,e],[,t])=>e-t)[0][0],r=Object.entries(e).sort(([,e],[,t])=>t-e)[0][0],a={wood:{color:"초록색",hex:"#10B981",effect:"성장과 창의성 증진"},fire:{color:"빨간색",hex:"#EF4444",effect:"활력과 열정 증진"},earth:{color:"갈색",hex:"#A16207",effect:"안정성과 신뢰성 증진"},metal:{color:"금색",hex:"#FCD34D",effect:"논리성과 완결력 증진"},water:{color:"파란색",hex:"#3B82F6",effect:"지혜와 적응력 증진"}};return{beneficial:[{name:a[t].color,hex:a[t].hex,description:`부족한 ${t} 오행을 보완하여 ${a[t].effect}`}],avoid:[{name:a[r].color,hex:a[r].hex,reason:`과도한 ${r} 오행을 더욱 강화시켜 불균형 초래`}]}}static getDirectionRecommendations(e){const t=Object.entries(e).sort(([,e],[,t])=>e-t)[0][0];return{beneficial:[{direction:{wood:"동쪽",fire:"남쪽",earth:"중앙",metal:"서쪽",water:"북쪽"}[t],element:t,benefit:`부족한 ${t} 오행 에너지 보충`}],avoid:[]}}static getActivityRecommendations(e){return{beneficial:[{activity:"산책, 원예",element:"wood",effect:"목 오행 보충으로 창의성 증진"},{activity:"운동, 사교활동",element:"fire",effect:"화 오행 보충으로 활력 증진"},{activity:"명상, 요가",element:"earth",effect:"토 오행 보충으로 안정성 증진"},{activity:"독서, 학습",element:"metal",effect:"금 오행 보충으로 논리성 증진"},{activity:"수영, 음악감상",element:"water",effect:"수 오행 보충으로 지혜 증진"}],avoid:[]}}static getLifestyleRecommendations(e){return{diet:[{food:"녹색 채소",element:"wood",benefit:"간 건강과 해독 기능 강화"},{food:"붉은 과일",element:"fire",benefit:"심장 건강과 순환 기능 강화"},{food:"곡물류",element:"earth",benefit:"소화 기능과 영양 흡수 강화"},{food:"견과류",element:"metal",benefit:"폐 기능과 면역력 강화"},{food:"해산물",element:"water",benefit:"신장 기능과 수분 대사 강화"}],exercise:[{type:"스트레칭",element:"wood",effect:"유연성과 순환 개선"},{type:"유산소 운동",element:"fire",effect:"심폐 기능과 활력 증진"},{type:"근력 운동",element:"earth",effect:"근육량과 기초대사 증진"},{type:"호흡 운동",element:"metal",effect:"폐활량과 집중력 증진"},{type:"수영",element:"water",effect:"전신 순환과 유연성 증진"}],career:[{field:"예술, 디자인",element:"wood",aptitude:"창의성과 미적 감각 활용"},{field:"영업, 마케팅",element:"fire",aptitude:"소통능력과 추진력 활용"},{field:"관리, 서비스",element:"earth",aptitude:"신뢰성과 책임감 활용"},{field:"분석, 연구",element:"metal",aptitude:"논리성과 체계성 활용"},{field:"상담, 교육",element:"water",aptitude:"지혜와 포용력 활용"}]}}static generateChartData(e){const t=this.getElementDetails();return{labels:Object.keys(e).map(e=>t[e].korean),datasets:[{data:Object.values(e),backgroundColor:Object.keys(e).map(e=>t[e].color.primary),borderColor:Object.keys(e).map(e=>t[e].color.secondary),borderWidth:2,hoverOffset:10}]}}}const ps=({interpretation:e,loading:t=!1,error:r=null,category:n="basic"})=>{const[i,l]=a.useState(!0),[d,o]=a.useState("spiritual"===n||"johoo"===n?"basic":n);if(a.useEffect(()=>{o("spiritual"===n||"johoo"===n?"basic":n)},[n]),t)return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),s.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"해석 데이터를 불러오는 중..."})]})});if(r)return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg",children:s.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[s.jsx("span",{className:"mr-2",children:"⚠️"}),s.jsxs("span",{children:["해석 데이터를 불러올 수 없습니다: ",r]})]})});if(!e)return null;const c=[{id:"basic",label:"기본 분석",icon:le},{id:"personality",label:"성격",icon:de},{id:"fortune",label:"운세",icon:de},{id:"career",label:"직업",icon:oe},{id:"relationship",label:"인연",icon:ce},{id:"health",label:"건강",icon:me}],m=()=>{var t;const r=e.basic,a=e.johoo,n=e.spiritual;return r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"사주 기본 분석"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"일간:"}),s.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:r.dayMaster})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"강약:"}),s.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:"strong"===r.dayMasterStrength?"강함":"weak"===r.dayMasterStrength?"약함":"중간"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"용신:"}),s.jsx("span",{className:"ml-2 font-medium text-indigo-600 dark:text-indigo-400",children:r.yongshin})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"격국:"}),s.jsx("span",{className:"ml-2 font-medium text-indigo-600 dark:text-indigo-400",children:r.gyeokguk})]})]}),s.jsx("p",{className:"mt-3 text-sm text-gray-700 dark:text-gray-300",children:r.summary})]}),a&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"조후 분석 (계절 조화)"}),s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["출생 계절: ",s.jsx("span",{className:"font-medium",children:"spring"===a.season?"봄":"summer"===a.season?"여름":"autumn"===a.season?"가을":"겨울"})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:null==(t=a.seasonalCharacteristics)?void 0:t.map((e,t)=>s.jsx("span",{className:"px-2 py-1 bg-white dark:bg-gray-700 rounded text-xs",children:e},t))}),a.recommendations&&a.recommendations.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"추천사항:"}),s.jsx("ul",{className:"list-disc list-inside text-gray-600 dark:text-gray-400",children:a.recommendations.map((e,t)=>s.jsx("li",{children:e},t))})]})]})]}),n&&s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"신살 분석"}),s.jsxs("div",{className:"text-sm space-y-3",children:[n.beneficialSpirits&&n.beneficialSpirits.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-700 dark:text-green-400 mb-1",children:"길신 (吉神)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.beneficialSpirits.map((e,t)=>s.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs",children:["✨ ",e]},t))})]}),n.harmfulSpirits&&n.harmfulSpirits.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-red-700 dark:text-red-400 mb-1",children:"흉신 (凶神)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.harmfulSpirits.map((e,t)=>s.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded text-xs",children:["⚠️ ",e]},t))})]})]})]})]}):s.jsx("p",{className:"text-gray-500",children:"기본 분석 데이터가 없습니다."})};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx("span",{className:"mr-2",children:"✨"}),"사주 해석 분석"]}),s.jsx("button",{onClick:()=>l(!i),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:s.jsx("span",{children:i?"▲":"▼"})})]})}),i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700",children:c.map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>o(e.id),className:"flex items-center px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors "+(d===e.id?"text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600 dark:border-indigo-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[s.jsx(t,{className:"w-4 h-4 mr-2"}),e.label]},e.id)})}),s.jsx("div",{className:"p-6",children:(()=>{switch(d){case"basic":default:return m();case"personality":return(()=>{const t=e.personality;return t?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"성격 특성"}),t.strengths&&t.strengths.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"강점"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.strengths.map((e,t)=>s.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs",children:e},t))})]}),t.weaknesses&&t.weaknesses.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-400 mb-2",children:"보완점"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.weaknesses.map((e,t)=>s.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-full text-xs",children:e},t))})]}),t.developmentAreas&&t.developmentAreas.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"발전 방향"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:t.developmentAreas.map((e,t)=>s.jsx("li",{children:e},t))})]})]})}):s.jsx("p",{className:"text-gray-500",children:"성격 분석 데이터가 없습니다."})})();case"fortune":return(()=>{const t=e.fortune;return t?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"올해 운세"}),t.luckyElements&&t.luckyElements.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-400 mb-2",children:"행운 요소"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.luckyElements.map((e,t)=>s.jsxs("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-full text-xs",children:["🍀 ",e]},t))})]}),t.cautionPeriods&&t.cautionPeriods.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:"주의 시기"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.cautionPeriods.map((e,t)=>s.jsxs("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full text-xs",children:["⚠️ ",e]},t))})]})]})}):s.jsx("p",{className:"text-gray-500",children:"운세 분석 데이터가 없습니다."})})();case"career":return(()=>{const t=e.career;return t?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"직업 적성"}),t.suitableCareers&&t.suitableCareers.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"적합한 직업"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.suitableCareers.map((e,t)=>s.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs",children:e},t))})]}),t.workEnvironment&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"추천 근무 환경"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.workEnvironment})]})]})}):s.jsx("p",{className:"text-gray-500",children:"직업 지도 데이터가 없습니다."})})();case"relationship":return(()=>{const t=e.relationship;return t?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"인간관계"}),t.relationshipPattern&&s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:t.relationshipPattern}),t.advice&&t.advice.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-pink-700 dark:text-pink-400 mb-2",children:"관계 조언"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:t.advice.map((e,t)=>s.jsx("li",{children:e},t))})]})]})}):s.jsx("p",{className:"text-gray-500",children:"관계 분석 데이터가 없습니다."})})();case"health":return(()=>{const t=e.health;return t?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"건강 관리"}),t.vulnerabilities&&t.vulnerabilities.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-400 mb-2",children:"주의할 건강 부위"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.vulnerabilities.map((e,t)=>s.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-full text-xs",children:e},t))})]}),t.lifestyle&&t.lifestyle.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"추천 생활습관"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:t.lifestyle.map((e,t)=>s.jsx("li",{children:e},t))})]})]})}):s.jsx("p",{className:"text-gray-500",children:"건강 지도 데이터가 없습니다."})})()}})()})]})]})};Le.register(Re,Oe,Ke);const bs=({sajuData:e,height:t=350,className:r="",showLegend:n=!0,showTooltips:i=!0})=>{const[l,d]=a.useState(null),[c,m]=a.useState(!1),[x,g]=a.useState(null),h=a.useMemo(()=>us.analyzeFromSaju(e),[e]),u=a.useMemo(()=>us.analyzeElementRelationships(h),[h]),p=a.useMemo(()=>us.generateRecommendations(h,u),[h,u]),b=a.useMemo(()=>us.getElementDetails(),[]);a.useEffect(()=>{(async()=>{if(e){m(!0),g(null);try{const t=await bt(e);d(t)}catch(t){g("해석 데이터를 불러올 수 없습니다.")}finally{m(!1)}}})()},[e]);const y=a.useMemo(()=>us.generateChartData(h),[h]),j=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:n,position:"right",labels:{font:{family:"Noto Sans KR, sans-serif",size:12},padding:15,usePointStyle:!0,pointStyle:"circle",generateLabels:e=>{var t;const r=e.data.datasets;if(r.length>0){const a=r[0];return(null==(t=e.data.labels)?void 0:t.map((e,t)=>{const r=a.data[t],s=a.data.reduce((e,t)=>e+t,0);return{text:`${e} (${s>0?(r/s*100).toFixed(1):"0.0"}%)`,fillStyle:(Array.isArray(a.backgroundColor)?a.backgroundColor[t]:a.backgroundColor)||"#000",strokeStyle:(Array.isArray(a.borderColor)?a.borderColor[t]:a.borderColor)||"#000",lineWidth:2,hidden:!1,index:t}}))||[]}return[]}}},tooltip:{enabled:i,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{label(e){const t=e.label||"",r=e.parsed,a=e.dataset.data.reduce((e,t)=>e+t,0),s=a>0?(r/a*100).toFixed(1):"0.0",n=Object.keys(h)[e.dataIndex];return[`${t}: ${r}점 (${s}%)`,`특성: ${b[n].characteristics.positive.join(", ")}`]}}}},cutout:"50%",animation:{animateRotate:!0,animateScale:!0,duration:1e3}}),[n,i,h,b]),f=(()=>{const e=u.balance_score;return e>=80?{status:"매우 균형",color:"text-green-600",icon:"🟢"}:e>=60?{status:"균형 양호",color:"text-blue-600",icon:"🔵"}:e>=40?{status:"보통",color:"text-yellow-600",icon:"🟡"}:{status:"불균형",color:"text-red-600",icon:"🔴"}})();return Object.values(h).some(e=>e>0)?s.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${r}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"🎯 오행 균형도"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"목, 화, 토, 금, 수 다섯 요소의 조화 상태"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-sm font-medium ${f.color} flex items-center`,children:[s.jsx("span",{className:"mr-1",children:f.icon}),f.status]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["균형점수: ",u.balance_score.toFixed(0),"점"]})]})]}),s.jsxs("div",{className:"relative mb-6",style:{height:t-150},children:[s.jsx(o,{data:y,options:j}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:u.balance_score.toFixed(0)}),s.jsx("div",{className:"text-xs text-gray-500",children:"균형점수"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-1",children:"💪 강한 오행"}),u.dominant_elements.length>0?s.jsx("div",{className:"text-green-700 dark:text-green-300",children:u.dominant_elements.map(e=>b[e].korean).join(", ")}):s.jsx("div",{className:"text-green-600 dark:text-green-400 text-xs",children:"균형적 분포"})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-red-800 dark:text-red-200 mb-1",children:"⚠️ 약한 오행"}),u.weak_elements.length>0?s.jsx("div",{className:"text-red-700 dark:text-red-300",children:u.weak_elements.map(e=>b[e].korean).join(", ")}):s.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs",children:"특별히 약한 요소 없음"})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"🎨 추천 색상"}),p.colors.beneficial.length>0?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:p.colors.beneficial[0].hex}}),s.jsx("span",{className:"text-blue-700 dark:text-blue-300 text-xs",children:p.colors.beneficial[0].name})]}):s.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:"균형 유지"})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx(ps,{interpretation:l,loading:c,error:x,category:"basic"})})]}):s.jsx("div",{className:`flex items-center justify-center ${r}`,style:{height:t},children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📊"}),s.jsx("div",{className:"text-lg font-medium",children:"오행 데이터가 없습니다"}),s.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})})},ys={bijeon:{name:"Bijeon",koreanName:"비견",hanja:"比肩",category:"self",icon:"🤝",color:{primary:"#6366F1",secondary:"#818CF8",background:"#EEF2FF"},keywords:["자아","동등","협력","자존심"],positiveTraits:["협동성","동료애","공정함","균형감각"],negativeTraits:["고집","경직성","비타협적","자기중심적"],description:"자아와 동등한 기운으로 협력과 경쟁을 나타냄",roles:["팀워크","동료관계","자아실현","공정한 경쟁"]},geopjae:{name:"Geopjae",koreanName:"겁재",hanja:"劫財",category:"self",icon:"⚡",color:{primary:"#8B5CF6",secondary:"#A78BFA",background:"#F3F4F6"},keywords:["경쟁","도전","변화","투쟁"],positiveTraits:["도전정신","변화적응","추진력","개척정신"],negativeTraits:["성급함","충동성","파괴성","불안정"],description:"재물을 빼앗는 기운으로 경쟁과 도전을 의미",roles:["혁신","변화주도","경쟁력","위기대응"]},siksin:{name:"Siksin",koreanName:"식신",hanja:"食神",category:"expression",icon:"🎨",color:{primary:"#10B981",secondary:"#34D399",background:"#ECFDF5"},keywords:["표현","재능","즐거움","창작"],positiveTraits:["재능","표현력","유쾌함","창의성"],negativeTraits:["방만함","안일함","현실도피","의존성"],description:"일간이 생하는 기운으로 재능과 표현력을 나타냄",roles:["예술","창작","엔터테인먼트","서비스"]},sanggwan:{name:"Sanggwan",koreanName:"상관",hanja:"傷官",category:"expression",icon:"🚀",color:{primary:"#F59E0B",secondary:"#FBBF24",background:"#FFFBEB"},keywords:["창조","반항","혁신","비판"],positiveTraits:["창조력","혁신성","독창성","예술성"],negativeTraits:["반항성","비판적","불안정","극단적"],description:"관을 상하게 하는 기운으로 창조와 혁신을 의미",roles:["혁신","창업","예술","비판"]},pyeonjae:{name:"Pyeonjae",koreanName:"편재",hanja:"偏財",category:"wealth",icon:"💰",color:{primary:"#EF4444",secondary:"#F87171",background:"#FEF2F2"},keywords:["활동","사교","유동","기회"],positiveTraits:["사교성","활동력","기회포착","유연성"],negativeTraits:["산만함","불안정","투기성","낭비"],description:"일간이 극하는 동성 재물로 활동적 재물을 의미",roles:["영업","사교","서비스","유통"]},jeongjae:{name:"Jeongjae",koreanName:"정재",hanja:"正財",category:"wealth",icon:"🏦",color:{primary:"#DC2626",secondary:"#EF4444",background:"#FEF2F2"},keywords:["근면","절약","안정","축적"],positiveTraits:["근면성","절약정신","계획성","안정성"],negativeTraits:["보수성","소심함","경직성","물질주의"],description:"일간이 극하는 이성 재물로 정당한 재물을 의미",roles:["관리","회계","저축","투자"]},pyeongwan:{name:"Pyeongwan",koreanName:"편관",hanja:"偏官",category:"authority",icon:"⚔️",color:{primary:"#7C2D12",secondary:"#A16207",background:"#FEF3C7"},keywords:["개척","모험","권력","압박"],positiveTraits:["개척정신","추진력","결단력","리더십"],negativeTraits:["독선적","권위적","성급함","강압적"],description:"일간을 극하는 동성 관성으로 개척과 권력을 의미",roles:["개척","경영","군사","혁신"]},jeonggwan:{name:"Jeonggwan",koreanName:"정관",hanja:"正官",category:"authority",icon:"👑",color:{primary:"#92400E",secondary:"#D97706",background:"#FEF3C7"},keywords:["명예","권위","질서","책임"],positiveTraits:["책임감","신뢰성","품격","리더십"],negativeTraits:["보수성","형식적","권위의존","소극성"],description:"일간을 극하는 이성 관성으로 명예와 권위를 의미",roles:["관리","행정","교육","상담"]},pyeongin:{name:"Pyeongin",koreanName:"편인",hanja:"偏印",category:"support",icon:"🔮",color:{primary:"#3B82F6",secondary:"#60A5FA",background:"#EFF6FF"},keywords:["직감","독창","신비","특별함"],positiveTraits:["직감력","독창성","신비성","특별함"],negativeTraits:["외로움","비현실적","변덕","까다로움"],description:"일간을 생하는 동성 인성으로 직감과 독창성을 의미",roles:["연구","창작","상담","치료"]},jeongin:{name:"Jeongin",koreanName:"정인",hanja:"正印",category:"support",icon:"📚",color:{primary:"#1D4ED8",secondary:"#3B82F6",background:"#EFF6FF"},keywords:["학습","보호","지혜","인덕"],positiveTraits:["학습력","인덕","보호본능","지혜"],negativeTraits:["의존성","소극성","현실도피","게으름"],description:"일간을 생하는 이성 인성으로 학습과 보호를 의미",roles:["교육","학습","상담","보육"]}},js={self:{name:"자아성",description:"자아와 관련된 기운",tenGods:["bijeon","geopjae"]},expression:{name:"표현성",description:"재능과 표현에 관련된 기운",tenGods:["siksin","sanggwan"]},wealth:{name:"재물성",description:"재물과 관련된 기운",tenGods:["pyeonjae","jeongjae"]},authority:{name:"관성",description:"권위와 명예에 관련된 기운",tenGods:["pyeongwan","jeonggwan"]},support:{name:"인성",description:"학습과 보호에 관련된 기운",tenGods:["pyeongin","jeongin"]}},fs=.15,vs=.03,ks=85,Ns=70,ws=50;class Ss{static analyzeFromSaju(e){const{tenGods:t}=e;return{bijeon:t.bijeon||0,geopjae:t.geopjae||0,siksin:t.siksin||0,sanggwan:t.sanggwan||0,pyeonjae:t.pyeonjae||0,jeongjae:t.jeongjae||0,pyeongwan:t.pyeongwan||0,jeonggwan:t.jeonggwan||0,pyeongin:t.pyeongin||0,jeongin:t.jeongin||0}}static performFullAnalysis(e){const t=this.analyzeFromSaju(e),r=Object.values(t).reduce((e,t)=>e+t,0),a={};Object.entries(t).forEach(([e,t])=>{a[e]=r>0?t/r:0});const s=[],n=[],i=[];Object.entries(a).forEach(([e,r])=>{const a=e;0===t[a]?i.push(a):r>=fs?s.push(a):r<=vs&&n.push(a)});const l=this.calculateBalance(t),d=this.analyzePersonality(t),o=this.generateRecommendations(t,d);return{data:t,total:r,percentages:a,dominant:s,weak:n,missing:i,balance:l,personality:d,recommendations:o}}static calculateBalance(e){const t=Object.values(e).reduce((e,t)=>e+t,0);if(0===t)return{score:0,status:"poor",description:"십성 데이터가 부족합니다"};const r=Object.entries(js).map(([r,a])=>a.tenGods.reduce((t,r)=>t+e[r],0)/t),a=1/Object.keys(js).length,s=r.reduce((e,t)=>e+Math.pow(t-a,2),0)/r.length,n=Math.max(0,Math.min(100,100-500*s));let i,l;return n>=ks?(i="excellent",l="매우 균형 잡힌 십성 분포"):n>=Ns?(i="good",l="균형 잡힌 십성 분포"):n>=ws?(i="fair",l="보통 수준의 십성 분포"):(i="poor",l="불균형한 십성 분포"),{score:n,status:i,description:l}}static analyzePersonality(e){var t;const r=Object.values(e).reduce((e,t)=>e+t,0);if(0===r)return{leadership:0,creativity:0,stability:0,sociability:0,independence:0,overall:"분석 불가"};const a=Math.round((e.jeonggwan+e.pyeongwan)/r*100),s=Math.round((e.siksin+e.sanggwan)/r*100),n=Math.round((e.jeongin+e.pyeongin)/r*100),i=Math.round((e.jeongjae+e.pyeonjae)/r*100),l=Math.round((e.bijeon+e.geopjae)/r*100),d={leadership:a,creativity:s,stability:n,sociability:i,independence:l},o=Math.max(...Object.values(d));return{leadership:a,creativity:s,stability:n,sociability:i,independence:l,overall:{leadership:"리더십형 - 권위와 책임감이 강한 성향",creativity:"창의형 - 표현력과 창조성이 뛰어난 성향",stability:"안정형 - 학습과 보호본능이 강한 성향",sociability:"사교형 - 대인관계와 재물관리에 뛰어난 성향",independence:"독립형 - 자아실현과 경쟁에 강한 성향"}[(null==(t=Object.entries(d).find(([,e])=>e===o))?void 0:t[0])||"stability"]||"균형형 - 다양한 면에서 고른 성향"}}static generateRecommendations(e,t){return{career:this.getCareerRecommendations(e),relationships:this.getRelationshipAdvice(e,t),development:this.getDevelopmentSuggestions(e),caution:this.getCautionAreas(e)}}static getCareerRecommendations(e){const t=Object.values(e).reduce((e,t)=>e+t,0),r=[],a=e.jeonggwan+e.pyeongwan;a/t>=.2&&r.push({field:"관리직, 행정직, 공무원",tenGod:"jeonggwan",suitability:Math.round(a/t*100),reason:"강한 관성으로 권위와 책임을 잘 감당할 수 있음"});const s=e.siksin+e.sanggwan;s/t>=.2&&r.push({field:"예술, 창작, 엔터테인먼트",tenGod:"siksin",suitability:Math.round(s/t*100),reason:"뛰어난 표현력과 창의성을 활용할 수 있음"});const n=e.jeongjae+e.pyeonjae;return n/t>=.2&&r.push({field:"영업, 마케팅, 금융",tenGod:"jeongjae",suitability:Math.round(n/t*100),reason:"재물 관리와 대인관계 능력이 뛰어남"}),r.length>0?r:[{field:"균형 잡힌 다양한 분야",tenGod:"bijeon",suitability:70,reason:"고른 십성 분포로 다양한 분야에 적응 가능"}]}static getRelationshipAdvice(e,t){const r=[];return t.sociability>30&&r.push({type:"대인관계",advice:"뛰어난 사교성을 활용하여 네트워킹을 적극적으로 활용하세요",basedOn:["jeongjae","pyeonjae"]}),t.independence>30&&r.push({type:"자아실현",advice:"독립적인 성향을 살려 자신만의 영역을 구축하세요",basedOn:["bijeon","geopjae"]}),r.length>0?r:[{type:"균형발전",advice:"다양한 관계를 통해 균형 잡힌 성장을 추구하세요",basedOn:["jeongin"]}]}static getDevelopmentSuggestions(e){const t=[];return Object.entries(e).sort(([,e],[,t])=>e-t).slice(0,2).map(([e])=>e).forEach(e=>{const r=ys[e];t.push({area:`${r.koreanName} 개발`,method:`${r.positiveTraits.join(", ")} 관련 활동 증가`,targetTenGod:e})}),t}static getCautionAreas(e){const t=[],r=Object.values(e).reduce((e,t)=>e+t,0);return Object.entries(e).forEach(([e,a])=>{if(a/r>.3){const r=ys[e];t.push({issue:`${r.koreanName} 과다`,reason:`${r.negativeTraits.join(", ")} 경향이 나타날 수 있음`,solution:`${r.positiveTraits[0]} 측면을 적절히 조절하고 다른 십성을 균형있게 발전시키세요`})}}),t}static generateChartData(e){const t=Object.keys(e).map(e=>`${ys[e].koreanName}\n${ys[e].hanja}`),r=Object.values(e),a=Object.keys(e).map(e=>ys[e].color.primary);return{labels:t,datasets:[{label:"십성 분포",data:r,backgroundColor:a.map(e=>`${e}80`),borderColor:a,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}static generateCategoryChartData(e){const t=Object.entries(js).map(([t,r])=>{const a=r.tenGods.reduce((t,r)=>t+e[r],0);return{category:t,name:r.name,value:a}});return{labels:t.map(e=>e.name),datasets:[{data:t.map(e=>e.value),backgroundColor:["#6366F1","#10B981","#EF4444","#F59E0B","#3B82F6"],borderWidth:2}]}}}Le.register(Be,Ie,ze,Re,qe,Oe,Ke);const Cs=({sajuData:e,height:t=400,className:r="",chartType:n="bar",showCategory:i=!1})=>{const[l,d]=a.useState("individual"),[m,x]=a.useState(null),[g,h]=a.useState(!1),[u,p]=a.useState(null),b=a.useMemo(()=>Ss.performFullAnalysis(e),[e]);a.useEffect(()=>{(async()=>{if(e){h(!0),p(null);try{const t=await jt(e);x({personality:t})}catch(t){p("성격 분석 데이터를 불러올 수 없습니다.")}finally{h(!1)}}})()},[e]);const y=a.useMemo(()=>Ss.generateChartData(b.data),[b.data]),j=a.useMemo(()=>Ss.generateCategoryChartData(b.data),[b.data]),f=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{title:e=>e[0].label||"",label(e){const t=e.parsed.x,r=b.total>0?(t/b.total*100).toFixed(1):"0.0",a=Object.keys(b.data)[e.dataIndex],s=ys[a];return[`점수: ${t}점 (${r}%)`,`특성: ${s.keywords.join(", ")}`,`장점: ${s.positiveTraits.join(", ")}`]}}}},scales:{x:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{font:{family:"Noto Sans KR, sans-serif",size:11}}},y:{grid:{display:!1},ticks:{font:{family:"Noto Sans KR, sans-serif",size:11},callback(e){return this.getLabelForValue(e).split("\n")[0]}}}},animation:{duration:1e3}}),[b.data,b.total]),v=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{font:{family:"Noto Sans KR, sans-serif",size:11},padding:15,usePointStyle:!0,pointStyle:"rectRounded",generateLabels:e=>{var t;const r=e.data.datasets;if(r.length>0){const a=r[0];return(null==(t=e.data.labels)?void 0:t.filter((e,t)=>a.data[t]>0).map((e,t)=>{const r=a.data[t];return{text:`${e} (${b.total>0?(r/b.total*100).toFixed(1):"0.0"}%)`,fillStyle:(Array.isArray(a.backgroundColor)?a.backgroundColor[t]:a.backgroundColor)||"#000",strokeStyle:(Array.isArray(a.borderColor)?a.borderColor[t]:a.borderColor)||"#000",lineWidth:2,hidden:!1,index:t}}))||[]}return[]}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",callbacks:{label(e){const t=e.parsed,r=b.total>0?(t/b.total*100).toFixed(1):"0.0";return`${e.label}: ${t}점 (${r}%)`}}}},cutout:"40%",animation:{animateRotate:!0,duration:1e3}}),[b.total]),k=(()=>{const e=b.balance.score;return e>=80?{status:"매우 균형",color:"text-green-600",icon:"🟢"}:e>=60?{status:"균형 양호",color:"text-blue-600",icon:"🔵"}:e>=40?{status:"보통",color:"text-yellow-600",icon:"🟡"}:{status:"불균형",color:"text-red-600",icon:"🔴"}})();return 0===b.total?s.jsx("div",{className:`flex items-center justify-center ${r}`,style:{height:t},children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📊"}),s.jsx("div",{className:"text-lg font-medium",children:"십성 데이터가 없습니다"}),s.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})}):s.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${r}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"⭐ 십성 분포도"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"10가지 십성의 강도와 성격 특성 분석"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("button",{onClick:()=>d("individual"),className:"px-3 py-1 text-xs transition-colors "+("individual"===l?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"개별십성"}),s.jsx("button",{onClick:()=>d("category"),className:"px-3 py-1 text-xs transition-colors "+("category"===l?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"카테고리"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-sm font-medium ${k.color} flex items-center`,children:[s.jsx("span",{className:"mr-1",children:k.icon}),k.status]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["균형점수: ",b.balance.score.toFixed(0),"점"]})]})]})]}),s.jsx("div",{className:"mb-6",style:{height:t-200},children:"individual"===l?"bar"===n?s.jsx(c,{data:y,options:f}):s.jsx(o,{data:y,options:v}):s.jsx(o,{data:j,options:v})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🧠 성격 특성"}),s.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm",children:b.personality.overall})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"💪 강한 십성"}),b.dominant.length>0?s.jsx("div",{className:"text-green-700 dark:text-green-300 text-sm",children:b.dominant.map(e=>ys[e].koreanName).join(", ")}):s.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm",children:"균형적 분포"})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-purple-800 dark:text-purple-200 mb-2",children:"🎯 추천 분야"}),b.recommendations.career.length>0?s.jsx("div",{className:"text-purple-700 dark:text-purple-300 text-sm",children:b.recommendations.career[0].field}):s.jsx("div",{className:"text-purple-600 dark:text-purple-400 text-sm",children:"다양한 분야 적합"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"핵심 능력치"}),Object.entries({"리더십":b.personality.leadership,"창의성":b.personality.creativity,"안정성":b.personality.stability,"사교성":b.personality.sociability,"독립성":b.personality.independence}).map(([e,t])=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-16 text-xs text-gray-600 dark:text-gray-400",children:e}),s.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-purple-500",style:{width:`${t}%`}})}),s.jsx("div",{className:"w-8 text-xs text-gray-500 text-right",children:t})]},e))]}),s.jsx("div",{className:"mt-6",children:s.jsx(ps,{interpretation:m,loading:g,error:u,category:"personality"})})]})},Ms={ja:{name:"Ja",koreanName:"자",hanja:"子",animal:"쥐",animalEmoji:"🐭",element:"water",season:"winter",month:11,direction:"북",time:"23:00-01:00",color:{primary:"#1E40AF",secondary:"#3B82F6",background:"#EFF6FF"},characteristics:["영리함","적응력","기회포착"],positiveTraits:["지혜","민첩성","실용성","생존력"],negativeTraits:["욕심","계산적","의심","소심함"],compatibility:["jin","sin"],conflict:["o"]},chuk:{name:"Chuk",koreanName:"축",hanja:"丑",animal:"소",animalEmoji:"🐂",element:"earth",season:"winter",month:12,direction:"북동",time:"01:00-03:00",color:{primary:"#92400E",secondary:"#D97706",background:"#FEF3C7"},characteristics:["성실함","인내력","신뢰성"],positiveTraits:["근면","신중함","책임감","안정성"],negativeTraits:["완고함","보수적","느림","고집"],compatibility:["sa","yu"],conflict:["mi"]},in:{name:"In",koreanName:"인",hanja:"寅",animal:"호랑이",animalEmoji:"🐅",element:"wood",season:"spring",month:1,direction:"동북",time:"03:00-05:00",color:{primary:"#059669",secondary:"#10B981",background:"#ECFDF5"},characteristics:["용맹함","리더십","정의감"],positiveTraits:["용기","추진력","정의감","보호본능"],negativeTraits:["성급함","독선","고집","감정적"],compatibility:["o","sul"],conflict:["sin"]},myo:{name:"Myo",koreanName:"묘",hanja:"卯",animal:"토끼",animalEmoji:"🐰",element:"wood",season:"spring",month:2,direction:"동",time:"05:00-07:00",color:{primary:"#16A34A",secondary:"#22C55E",background:"#F0FDF4"},characteristics:["온화함","예술성","직관력"],positiveTraits:["부드러움","예술감각","평화주의","직관"],negativeTraits:["우유부단","소심함","의존성","현실도피"],compatibility:["mi","hae"],conflict:["yu"]},jin:{name:"Jin",koreanName:"진",hanja:"辰",animal:"용",animalEmoji:"🐉",element:"earth",season:"spring",month:3,direction:"동남",time:"07:00-09:00",color:{primary:"#CA8A04",secondary:"#EAB308",background:"#FEFCE8"},characteristics:["역동성","변화","신비성"],positiveTraits:["포용력","변화적응","신비성","창조력"],negativeTraits:["변덕","과도함","신경질","불안정"],compatibility:["ja","yu"],conflict:["sul"]},sa:{name:"Sa",koreanName:"사",hanja:"巳",animal:"뱀",animalEmoji:"🐍",element:"fire",season:"summer",month:4,direction:"남동",time:"09:00-11:00",color:{primary:"#DC2626",secondary:"#EF4444",background:"#FEF2F2"},characteristics:["지혜","신중함","신비함"],positiveTraits:["지혜","통찰력","신중함","집중력"],negativeTraits:["의심","질투","복잡함","집착"],compatibility:["chuk","yu"],conflict:["hae"]},o:{name:"O",koreanName:"오",hanja:"午",animal:"말",animalEmoji:"🐎",element:"fire",season:"summer",month:5,direction:"남",time:"11:00-13:00",color:{primary:"#E11D48",secondary:"#F43F5E",background:"#FFF1F2"},characteristics:["활동성","열정","자유로움"],positiveTraits:["활력","자유로움","열정","진취성"],negativeTraits:["성급함","변덕","불안정","산만함"],compatibility:["in","sul"],conflict:["ja"]},mi:{name:"Mi",koreanName:"미",hanja:"未",animal:"양",animalEmoji:"🐑",element:"earth",season:"summer",month:6,direction:"남서",time:"13:00-15:00",color:{primary:"#A16207",secondary:"#D97706",background:"#FEF3C7"},characteristics:["온순함","협조성","예술성"],positiveTraits:["온순함","협조성","예술성","평화주의"],negativeTraits:["우유부단","의존성","소극적","걱정"],compatibility:["myo","hae"],conflict:["chuk"]},sin:{name:"Sin",koreanName:"신",hanja:"申",animal:"원숭이",animalEmoji:"🐵",element:"metal",season:"autumn",month:7,direction:"서남",time:"15:00-17:00",color:{primary:"#F59E0B",secondary:"#FBBF24",background:"#FFFBEB"},characteristics:["재치","활발함","변화"],positiveTraits:["재치","활발함","적응력","창의성"],negativeTraits:["변덕","경박함","불안정","장난"],compatibility:["ja","jin"],conflict:["in"]},yu:{name:"Yu",koreanName:"유",hanja:"酉",animal:"닭",animalEmoji:"🐓",element:"metal",season:"autumn",month:8,direction:"서",time:"17:00-19:00",color:{primary:"#D97706",secondary:"#F59E0B",background:"#FEF3C7"},characteristics:["정확성","부지런함","완벽주의"],positiveTraits:["정확성","부지런함","완벽주의","책임감"],negativeTraits:["까다로움","비판적","경직성","걱정"],compatibility:["chuk","sa","jin"],conflict:["myo"]},sul:{name:"Sul",koreanName:"술",hanja:"戌",animal:"개",animalEmoji:"🐕",element:"earth",season:"autumn",month:9,direction:"서북",time:"19:00-21:00",color:{primary:"#92400E",secondary:"#B45309",background:"#FEF3C7"},characteristics:["충성심","정의감","보호본능"],positiveTraits:["충성심","정의감","보호본능","신뢰성"],negativeTraits:["완고함","의심","보수적","걱정"],compatibility:["in","o"],conflict:["jin"]},hae:{name:"Hae",koreanName:"해",hanja:"亥",animal:"돼지",animalEmoji:"🐷",element:"water",season:"winter",month:10,direction:"북서",time:"21:00-23:00",color:{primary:"#1E40AF",secondary:"#2563EB",background:"#EFF6FF"},characteristics:["관대함","성실함","단순함"],positiveTraits:["관대함","성실함","정직함","포용력"],negativeTraits:["단순함","게으름","욕심","고집"],compatibility:["myo","mi"],conflict:["sa"]}},$s={harmony:{name:"조화",description:"서로를 보완하고 발전시키는 관계",color:"#10B981",icon:"🤝"},conflict:{name:"충돌",description:"서로 대립하고 견제하는 관계",color:"#EF4444",icon:"⚔️"},punishment:{name:"형",description:"서로를 억제하고 제약하는 관계",color:"#F59E0B",icon:"⚠️"},destruction:{name:"파괴",description:"서로를 해치고 파괴하는 관계",color:"#DC2626",icon:"💥"},neutral:{name:"중립",description:"특별한 영향을 주고받지 않는 관계",color:"#6B7280",icon:"➖"}};class Es{static analyzeFromSaju(e){const t={ja:Math.floor(30*Math.random()),chuk:Math.floor(30*Math.random()),in:Math.floor(30*Math.random()),myo:Math.floor(30*Math.random()),jin:Math.floor(30*Math.random()),sa:Math.floor(30*Math.random()),o:Math.floor(30*Math.random()),mi:Math.floor(30*Math.random()),sin:Math.floor(30*Math.random()),yu:Math.floor(30*Math.random()),sul:Math.floor(30*Math.random()),hae:Math.floor(30*Math.random())},r=this.getYearBranch(e.birthInfo.year);return r&&(t[r]+=30),t}static performFullAnalysis(e){const t=this.analyzeFromSaju(e),r=Object.values(t).reduce((e,t)=>e+t,0),a=[],s=[];Object.entries(t).forEach(([e,t])=>{const r=e;0===t?s.push(r):t>=30&&a.push(r)});const n=this.analyzeInteractions(t),i=this.calculateOverallHarmony(t,n),l=this.calculateSeasonalBalance(t),d=this.analyzeAnimalPersonality(t,a),o=this.generateRecommendations(t,a,s);return{data:t,total:r,dominant:a,missing:s,interactions:n,overallHarmony:i,seasonalBalance:l,animalPersonality:d,recommendations:o}}static getYearBranch(e){return["sin","yu","sul","hae","ja","chuk","in","myo","jin","sa","o","mi"][e%12]||null}static analyzeInteractions(e){const t={},r=Object.entries(e).filter(([e,t])=>t>10).map(([e])=>e);for(let a=0;a<r.length;a++)for(let e=a+1;e<r.length;e++){const s=r[a],n=r[e];t[`${s}-${n}`]=this.analyzeRelationship(s,n)}return t}static analyzeRelationship(e,t){const r=Ms[e];return r.compatibility.includes(t)?{relationship:{type:"harmony",strength:80,description:"서로 조화를 이루며 시너지를 발생시킴"},effects:["긍정적 에너지 증폭","목표 달성 용이","관계 개선"],recommendations:["함께 협력하면 좋은 결과","파트너십 강화 필요"]}:r.conflict.includes(t)?{relationship:{type:"conflict",strength:70,description:"서로 대립하고 충돌하는 관계"},effects:["갈등 가능성","스트레스 증가","의견 충돌"],recommendations:["중재자 필요","거리두기 권장","이해와 배려 필요"]}:{relationship:{type:"neutral",strength:30,description:"특별한 영향 없는 중립적 관계"},effects:["평범한 관계","특별한 영향 없음"],recommendations:["자연스러운 관계 유지"]}}static calculateOverallHarmony(e,t){let r=50;Object.values(t).forEach(e=>{"harmony"===e.relationship.type?r+=10:"conflict"===e.relationship.type&&(r-=10)});const a=Object.values(e),s=a.reduce((e,t)=>e+t,0)/a.length,n=a.reduce((e,t)=>e+Math.pow(t-s,2),0)/a.length;return r+=Math.max(0,30-Math.sqrt(n)),Math.max(0,Math.min(100,r))}static calculateSeasonalBalance(e){const t=(e.in||0)+(e.myo||0)+(e.jin||0),r=(e.sa||0)+(e.o||0)+(e.mi||0),a=(e.sin||0)+(e.yu||0)+(e.sul||0),s=(e.hae||0)+(e.ja||0)+(e.chuk||0),n=t+r+a+s,i=n>0?t/n*100:25,l=n>0?r/n*100:25,d=n>0?a/n*100:25,o=n>0?s/n*100:25,c=[Math.abs(i-25),Math.abs(l-25),Math.abs(d-25),Math.abs(o-25)],m=Math.max(...c);return{spring:i,summer:l,autumn:d,winter:o,balance:Math.max(0,100-2*m)}}static analyzeAnimalPersonality(e,t){const r=t[0]||"ja",a=Ms[r];return{primaryAnimal:`${a.animalEmoji} ${a.animal}형 인격`,traits:a.positiveTraits,compatibility:a.compatibility.map(e=>Ms[e].animal),cautions:a.negativeTraits,lifePattern:`${a.time} 시간대에 활동적, ${a.direction}방향 선호`}}static generateRecommendations(e,t,r){const a=[],s=[],n=[],i=[];if(t.forEach(e=>{const t=Ms[e];a.push({color:t.color.primary,hex:t.color.primary,reason:`${t.animal}의 기운을 강화`}),s.push({direction:t.direction,benefit:`${t.element} 오행 에너지 증진`}),n.push({period:t.time,activity:"중요한 일정",effect:"최상의 컨디션과 운세"})}),t.length>0){const e=Ms[t[0]];i.push({compatible:e.compatibility.map(e=>Ms[e].animal),avoid:e.conflict.map(e=>Ms[e].animal),reason:"간지 상성과 상충 관계"})}return{colors:a.slice(0,3),directions:s.slice(0,2),timing:n.slice(0,3),relationships:i.slice(0,1)}}}class Ds{static findMaximumValues(e){const t=[];return e.forEach((e,r)=>{const a=Math.max(...e.values),s=e.values.indexOf(a);t.push({datasetIndex:r,pointIndex:s,value:a})}),t}static createHighlightedPointStyles(e,t){const r=this.findMaximumValues(e);return e.map((e,a)=>{const s=r.find(e=>e.datasetIndex===a),n=e.values.map((e,r)=>s&&r===s.pointIndex?t.maxPointStyle.radius:t.normalPointStyle.radius),i=e.values.map((e,r)=>s&&r===s.pointIndex?t.maxPointStyle.backgroundColor:this.COLOR_PALETTE.primary[a%this.COLOR_PALETTE.primary.length]),l=e.values.map((e,r)=>s&&r===s.pointIndex?t.maxPointStyle.borderColor:this.COLOR_PALETTE.primary[a%this.COLOR_PALETTE.primary.length]),d=e.values.map((e,r)=>s&&r===s.pointIndex?t.maxPointStyle.borderWidth:t.normalPointStyle.borderWidth);return{label:e.label,data:e.values,backgroundColor:`${this.COLOR_PALETTE.primary[a%this.COLOR_PALETTE.primary.length]}20`,borderColor:this.COLOR_PALETTE.primary[a%this.COLOR_PALETTE.primary.length],pointBackgroundColor:i,pointBorderColor:l,pointRadius:n,pointBorderWidth:d,borderWidth:2,tension:.1}})}static applyDarkMode(e,t){var r,a,s,n,i,l,d,o,c,m,x,g;const h=t?this.COLOR_PALETTE.dark:this.COLOR_PALETTE.light;return{...e,plugins:{...e.plugins,legend:{...null==(r=e.plugins)?void 0:r.legend,labels:{...null==(s=null==(a=e.plugins)?void 0:a.legend)?void 0:s.labels,color:h.text}}},scales:{r:{...null==(n=e.scales)?void 0:n.r,ticks:{...null==(l=null==(i=e.scales)?void 0:i.r)?void 0:l.ticks,color:h.text,display:!1},grid:{...null==(o=null==(d=e.scales)?void 0:d.r)?void 0:o.grid,color:h.gridLines},angleLines:{...null==(m=null==(c=e.scales)?void 0:c.r)?void 0:m.angleLines,color:h.gridLines},pointLabels:{...null==(g=null==(x=e.scales)?void 0:x.r)?void 0:g.pointLabels,color:h.text}}}}}static createCompatibilityRadarConfig(e,t,r,a=!1){const s=this.createHighlightedPointStyles(t,r),n=this.applyDarkMode(this.DEFAULT_RADAR_OPTIONS,a);return{type:"radar",data:{labels:e,datasets:s},options:{...n,animation:{...n.animation,duration:r.animation.duration,easing:r.animation.easing}}}}static createStandardRadarConfig(e,t,r=!1,a=!0){const s={highlightMaximum:a,maxPointStyle:{radius:6,backgroundColor:this.COLOR_PALETTE.accent,borderColor:this.COLOR_PALETTE.accent,borderWidth:3},normalPointStyle:{radius:3,borderWidth:2},animation:{duration:1200,easing:"easeInOutQuart"}};return this.createCompatibilityRadarConfig(e,t,s,r)}static getGradeColor(e){const t={S:"#FFD700","A+":"#FF6B6B",A:"#4ECDC4","B+":"#45B7D1",B:"#96CEB4",C:"#FFEAA7",D:"#DDA0DD"};return t[e]||t.B}static getResponsiveOptions(e){const t=e<400?10:e<600?12:14;return{plugins:{legend:{labels:{font:{size:t}}}},scales:{r:{ticks:{font:{size:Math.max(8,t-2)}},pointLabels:{font:{size:t}}}}}}static getUpdateAnimation(){return{duration:800,easing:"easeInOutQuart",onComplete(){}}}static getCompatibilityColorScheme(e){return e>=90?["#FFD700","#FFA500","#FF8C00"]:e>=80?["#FF6B6B","#FF8A80","#FFAB91"]:e>=70?["#4ECDC4","#80DEEA","#B2EBF2"]:e>=60?["#45B7D1","#81C784","#A5D6A7"]:["#96CEB4","#BCAAA4","#D7CCC8"]}}r(Ds,"COLOR_PALETTE",{primary:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#FFB4B4"],accent:"#FFD700",success:"#4CAF50",warning:"#FF9800",danger:"#F44336",dark:{background:"rgba(255, 255, 255, 0.1)",text:"#ffffff",gridLines:"rgba(255, 255, 255, 0.2)"},light:{background:"rgba(0, 0, 0, 0.1)",text:"#333333",gridLines:"rgba(0, 0, 0, 0.1)"}}),r(Ds,"DEFAULT_RADAR_OPTIONS",{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12,weight:"normal"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#ffffff",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:e=>`${e.dataset.label||""}: ${Math.round(10*e.parsed.r)/10}점`}}},scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,display:!1,font:{size:10}},grid:{color:"rgba(128, 128, 128, 0.2)",lineWidth:1},angleLines:{color:"rgba(128, 128, 128, 0.2)",lineWidth:1},pointLabels:{font:{size:12,weight:"bold"}}}},animation:{duration:1500,easing:"easeInOutQuart"}}),Ds.COLOR_PALETTE.accent,Ds.COLOR_PALETTE.accent,Le.register(We,He,Ye,Ue,Oe,Ke);const Ts=({sajuData:e,height:t=400,className:r="",showRelationships:n=!0,showSeasonalBalance:i=!0})=>{const[l,d]=a.useState("branches"),[o,c]=a.useState(!1);a.useEffect(()=>{const e=()=>{c(document.documentElement.classList.contains("dark"))};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);const[x,g]=a.useState(null),[h,u]=a.useState(!1),[p,b]=a.useState(null),y=a.useMemo(()=>Es.performFullAnalysis(e),[e]);a.useEffect(()=>{(async()=>{if(e){u(!0),b(null);try{const t=await yt(e);g({spiritual:t})}catch(t){b("신살 분석 데이터를 불러올 수 없습니다.")}finally{u(!1)}}})()},[e]);const j=a.useMemo(()=>[{label:"12간지 분포",values:Object.values(y.data),timeFrame:"base"}],[y.data]),f=a.useMemo(()=>{const e=Object.keys(y.data).map(e=>{const t=Ms[e];return`${t.koreanName} ${t.animalEmoji}`});return Ds.createStandardRadarConfig(e,j,o,!0)},[j,o]),v=f.data,k=a.useMemo(()=>{const{seasonalBalance:e}=y;return[{label:"계절별 균형",values:[e.spring,e.summer,e.autumn,e.winter],timeFrame:"base"}]},[y.seasonalBalance]),N=a.useMemo(()=>Ds.createStandardRadarConfig(["봄 🌸","여름 ☀️","가을 🍂","겨울 ❄️"],k,o,!0),[k,o]),w=N.data,S=a.useMemo(()=>{var e,t,r,a,s,n,i,d,c,m,x,g,h;const u="branches"===l?f.options:N.options;return{...u,responsive:!0,maintainAspectRatio:!1,plugins:{...null==u?void 0:u.plugins,legend:{...null==(e=null==u?void 0:u.plugins)?void 0:e.legend,display:!1},tooltip:{...null==(t=null==u?void 0:u.plugins)?void 0:t.tooltip,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{...null==(a=null==(r=null==u?void 0:u.plugins)?void 0:r.tooltip)?void 0:a.callbacks,label(e){const t=e.parsed.r,r=y.total>0?(t/y.total*100).toFixed(1):"0.0";if("branches"===l){const a=Object.keys(y.data)[e.dataIndex],s=Ms[a];return[`${e.label}: ${t}점 (${r}%)`,`원소: ${s.element}`,`특성: ${s.characteristics.join(", ")}`]}return`${e.label}: ${t.toFixed(1)}점`}}}},scales:{...null==u?void 0:u.scales,r:{...null==(s=null==u?void 0:u.scales)?void 0:s.r,beginAtZero:!0,min:0,max:"branches"===l?1.2*Math.max(...Object.values(y.data)):100,ticks:{...null==(i=null==(n=null==u?void 0:u.scales)?void 0:n.r)?void 0:i.ticks,stepSize:"branches"===l?10:20,display:!1,font:{family:"Noto Sans KR, sans-serif",size:10},color:o?"#9CA3AF":"#6B7280"},grid:{...null==(c=null==(d=null==u?void 0:u.scales)?void 0:d.r)?void 0:c.grid,color:o?"rgba(156, 163, 175, 0.2)":"rgba(156, 163, 175, 0.3)"},angleLines:{...null==(x=null==(m=null==u?void 0:u.scales)?void 0:m.r)?void 0:x.angleLines,color:o?"rgba(156, 163, 175, 0.2)":"rgba(156, 163, 175, 0.3)"},pointLabels:{...null==(h=null==(g=null==u?void 0:u.scales)?void 0:g.r)?void 0:h.pointLabels,font:{family:"Noto Sans KR, sans-serif",size:11,weight:500},color:o?"#E5E7EB":"#1F2937",padding:10}}},animation:{...null==u?void 0:u.animation,duration:1e3}}},[l,f,N,y.data,y.total,o]),C=(()=>{const e=y.overallHarmony;return e>=80?{status:"매우 조화",color:"text-green-600 dark:text-green-400",icon:"🟢"}:e>=60?{status:"조화 양호",color:"text-blue-600 dark:text-blue-400",icon:"🔵"}:e>=40?{status:"보통",color:"text-yellow-600 dark:text-yellow-400",icon:"🟡"}:{status:"부조화",color:"text-red-600 dark:text-red-400",icon:"🔴"}})();return 0===y.total?s.jsx("div",{className:`flex items-center justify-center ${r}`,style:{height:t},children:s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"🐲"}),s.jsx("div",{className:"text-lg font-medium",children:"12간지 데이터가 없습니다"}),s.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})}):s.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${r}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"🐲 12간지 상호작용"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"12지지의 분포와 상호 관계 분석"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[s.jsx("button",{onClick:()=>d("branches"),className:"px-3 py-1 text-xs transition-colors "+("branches"===l?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:"12간지"}),s.jsx("button",{onClick:()=>d("seasonal"),className:"px-3 py-1 text-xs transition-colors "+("seasonal"===l?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:"계절균형"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-sm font-medium ${C.color} flex items-center`,children:[s.jsx("span",{className:"mr-1",children:C.icon}),C.status]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["조화도: ",y.overallHarmony.toFixed(0),"점"]})]})]})]}),s.jsx("div",{className:"mb-6",style:{height:t-250},children:s.jsx(m,{data:"branches"===l?v:w,options:S})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-purple-800 dark:text-purple-200 mb-2",children:y.animalPersonality.primaryAnimal}),s.jsx("div",{className:"text-purple-700 dark:text-purple-300 text-sm",children:y.animalPersonality.traits.slice(0,3).join(", ")})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"💪 강한 간지"}),y.dominant.length>0?s.jsx("div",{className:"text-green-700 dark:text-green-300 text-sm",children:y.dominant.map(e=>{const t=Ms[e];return`${t.koreanName}(${t.animal})`}).join(", ")}):s.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm",children:"균형적 분포"})]}),i&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🌈 계절 균형"}),s.jsxs("div",{className:"text-blue-700 dark:text-blue-300 text-sm",children:["균형도: ",y.seasonalBalance.balance.toFixed(0),"점"]})]})]}),n&&y.dominant.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"주요 관계 패턴"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(y.interactions).slice(0,3).map(([e,t])=>{const[r,a]=e.split("-"),n=$s[t.relationship.type];return s.jsxs("div",{className:"px-2 py-1 text-xs rounded-full flex items-center space-x-1",style:{backgroundColor:`${n.color}20`,color:n.color},children:[s.jsx("span",{children:n.icon}),s.jsxs("span",{children:[Ms[r].koreanName,"-",Ms[a].koreanName]})]},e)})})]}),s.jsx("div",{className:"mt-6",children:s.jsx(ps,{interpretation:x,loading:h,error:p,category:"spiritual"})})]})},Fs=({birthInfo:e,fourPillars:t,userName:r,className:a="",showEditButton:n=!0,onEditClick:i})=>{const l=e=>({"갑":"text-emerald-600 dark:text-emerald-400","을":"text-green-600 dark:text-green-400","병":"text-red-600 dark:text-red-400","정":"text-pink-600 dark:text-pink-400","무":"text-yellow-600 dark:text-yellow-400","기":"text-amber-600 dark:text-amber-400","경":"text-slate-600 dark:text-slate-400","신":"text-gray-600 dark:text-gray-400","임":"text-blue-600 dark:text-blue-400","계":"text-cyan-600 dark:text-cyan-400"}[e]||"text-gray-600 dark:text-gray-400"),d=e=>({"자":"text-blue-800 dark:text-blue-300","해":"text-cyan-800 dark:text-cyan-300","축":"text-yellow-800 dark:text-yellow-300","진":"text-amber-800 dark:text-amber-300","미":"text-orange-800 dark:text-orange-300","술":"text-yellow-800 dark:text-yellow-300","인":"text-green-800 dark:text-green-300","묘":"text-emerald-800 dark:text-emerald-300","사":"text-red-800 dark:text-red-300","오":"text-rose-800 dark:text-rose-300","신":"text-gray-800 dark:text-gray-300","유":"text-slate-800 dark:text-slate-300"}[e]||"text-gray-800 dark:text-gray-300"),o=e=>({"갑":"木(목)","을":"木(목)","병":"火(화)","정":"火(화)","무":"土(토)","기":"土(토)","경":"金(금)","신":"金(금)","임":"水(수)","계":"水(수)"}[e]||""),c=e=>({"자":"水(수)","해":"水(수)","축":"土(토)","진":"土(토)","미":"土(토)","술":"土(토)","인":"木(목)","묘":"木(목)","사":"火(화)","오":"火(화)","신":"金(금)","유":"金(금)"}[e]||`${e}(?)`);return s.jsxs(Ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`bg-gradient-to-r from-purple-50 to-blue-50 dark:from-gray-800 dark:to-purple-900/30 rounded-xl shadow-lg border border-purple-200 dark:border-purple-700/50 p-6 mb-8 ${a}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"👤"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:r||e.name||"사주 분석 대상"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"출생 정보 기반 분석"})]})]}),n&&i&&s.jsx("button",{onClick:i,className:"px-4 py-2 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg border border-gray-300 dark:border-gray-600 transition-colors text-sm font-medium",title:"출생 정보 수정",children:"⚙️ 수정"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[s.jsx("span",{className:"mr-2",children:"🎂"}),"출생 정보"]}),s.jsx("div",{className:"bg-white dark:bg-gray-700/50 rounded-lg p-4",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"생년월일시:"}),s.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:(e=>{const t=["일","월","화","수","목","금","토"][new Date(e.year,e.month-1,e.day).getDay()];return`${e.year}년 ${e.month}월 ${e.day}일 ${e.hour}시 ${e.minute||0}분 (${t}요일) ${e.isLunar?"음력":"양력"}`})(e)})]}),e.gender&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"성별:"}),s.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"male"===e.gender?"남성":"여성"})]})]})})]}),t&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[s.jsx("span",{className:"mr-2",children:"🔮"}),"사주 (四柱)"]}),s.jsxs("div",{className:"bg-white dark:bg-gray-700/50 rounded-lg p-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-red-800 dark:text-red-200",children:"년주 (年柱)"}),s.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:t.year.combined}),s.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[s.jsxs("span",{className:`font-medium ${l(t.year.heavenly)}`,children:[t.year.heavenly,"(",o(t.year.heavenly),")"]}),s.jsxs("span",{className:`font-medium ${d(t.year.earthly)}`,children:[t.year.earthly,"(",c(t.year.earthly),")"]})]})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-green-800 dark:text-green-200",children:"월주 (月柱)"}),s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.month.combined}),s.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[s.jsxs("span",{className:`font-medium ${l(t.month.heavenly)}`,children:[t.month.heavenly,"(",o(t.month.heavenly),")"]}),s.jsxs("span",{className:`font-medium ${d(t.month.earthly)}`,children:[t.month.earthly,"(",c(t.month.earthly),")"]})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"일주 (日柱)"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.day.combined}),s.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[s.jsxs("span",{className:`font-medium ${l(t.day.heavenly)}`,children:[t.day.heavenly,"(",o(t.day.heavenly),") (일간)"]}),s.jsxs("span",{className:`font-medium ${d(t.day.earthly)}`,children:[t.day.earthly,"(",c(t.day.earthly),")"]})]})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"시주 (時柱)"}),s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.hour.combined}),s.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[s.jsxs("span",{className:`font-medium ${l(t.hour.heavenly)}`,children:[t.hour.heavenly,"(",o(t.hour.heavenly),")"]}),s.jsxs("span",{className:`font-medium ${d(t.hour.earthly)}`,children:[t.hour.earthly,"(",c(t.hour.earthly),")"]})]})]})]}),s.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:(m=t,`${m.year.heavenly}${m.year.earthly}년 ${m.month.heavenly}${m.month.earthly}월 ${m.day.heavenly}${m.day.earthly}일 ${m.hour.heavenly}${m.hour.earthly}시`)}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"완전한 사주(四柱)"})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 text-center font-medium",children:"🌟 오행(五行) 구성 안내"}),s.jsxs("div",{className:"grid grid-cols-5 gap-2 text-xs",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🌳"}),s.jsx("div",{className:"font-medium text-green-700 dark:text-green-300",children:"木(목)"}),s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"갑을인묘"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🔥"}),s.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:"火(화)"}),s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"병정사오"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🏔️"}),s.jsx("div",{className:"font-medium text-yellow-700 dark:text-yellow-300",children:"土(토)"}),s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"무기진미축술"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"⚔️"}),s.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"金(금)"}),s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"경신신유"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"💧"}),s.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:"水(수)"}),s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"임계자해"})]})]})]})]})]})]})]})]});var m},_s=()=>{const e=n(),{birthInfo:t}=qr(),[r,i]=a.useState("fiveElements"),[l,d]=a.useState("bar"),o=a.useMemo(()=>{if(!t)return null;try{return hs(t)}catch(e){return null}},[t]);return t&&o?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsx("div",{className:"mb-8",children:s.jsx(Fs,{birthInfo:t,fourPillars:{year:{heavenly:o.fourPillars.year.heavenly,earthly:o.fourPillars.year.earthly,combined:`${o.fourPillars.year.heavenly}${o.fourPillars.year.earthly}`},month:{heavenly:o.fourPillars.month.heavenly,earthly:o.fourPillars.month.earthly,combined:`${o.fourPillars.month.heavenly}${o.fourPillars.month.earthly}`},day:{heavenly:o.fourPillars.day.heavenly,earthly:o.fourPillars.day.earthly,combined:`${o.fourPillars.day.heavenly}${o.fourPillars.day.earthly}`},hour:{heavenly:o.fourPillars.hour.heavenly,earthly:o.fourPillars.hour.earthly,combined:`${o.fourPillars.hour.heavenly}${o.fourPillars.hour.earthly}`}},userName:t.name,showEditButton:!0,onEditClick:()=>e("/settings")})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>i("fiveElements"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("fiveElements"===r?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"🎯 오행균형도"}),s.jsx("button",{onClick:()=>i("tenGods"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("tenGods"===r?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"⭐ 십성분포도"}),s.jsx("button",{onClick:()=>i("twelveEarthly"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("twelveEarthly"===r?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"🐲 12간지상호작용"})]}),"tenGods"===r&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"차트 타입:"}),s.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[s.jsx("button",{onClick:()=>d("bar"),className:"px-3 py-1 text-sm transition-colors "+("bar"===l?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:"막대"}),s.jsx("button",{onClick:()=>d("doughnut"),className:"px-3 py-1 text-sm transition-colors "+("doughnut"===l?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:"도넛"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.jsx("div",{className:"lg:col-span-2",children:"fiveElements"===r?s.jsx(bs,{sajuData:o,height:450,showLegend:!0,showTooltips:!0}):"tenGods"===r?s.jsx(Cs,{sajuData:o,height:450,chartType:l,showCategory:!0}):s.jsx(Ts,{sajuData:o,height:450,showRelationships:!0,showSeasonalBalance:!0})})}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총점"}),s.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[o.totalScore.toFixed(0),"점"]})]}),s.jsx("div",{className:"text-4xl",children:"💯"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"평균"}),s.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[o.averageScore.toFixed(1),"점"]})]}),s.jsx("div",{className:"text-4xl",children:"📊"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"일간"}),s.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:o.dayMaster})]}),s.jsx("div",{className:"text-4xl",children:"☯️"})]})})]}),s.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[s.jsx("button",{onClick:()=>e("/saju"),className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"사주 분석으로"}),s.jsx("button",{onClick:()=>e("/six-areas"),className:"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"6대 영역 분석"})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📊"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"사주 정보가 필요합니다"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"차트를 확인하려면 먼저 생년월일 정보를 입력해주세요."}),s.jsx("button",{onClick:()=>e("/settings"),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"생년월일 입력하기"})]})})})},Ps=[{id:"basic",name:"기본 분석",icon:"🔍",color:"blue"},{id:"personality",name:"성격 분석",icon:"🧠",color:"purple"},{id:"fortune",name:"운세 분석",icon:"🌟",color:"yellow"},{id:"career",name:"직업 지도",icon:"💼",color:"green"},{id:"relationship",name:"관계 분석",icon:"❤️",color:"red"},{id:"health",name:"건강 지도",icon:"🏥",color:"cyan"},{id:"spiritual",name:"신살 분석",icon:"⚡",color:"indigo"},{id:"johoo",name:"조후 분석",icon:"🌡️",color:"orange"}],As=()=>{const e=n(),{birthInfo:t}=qr(),[r,i]=a.useState("basic"),[l,d]=a.useState(null),[o,c]=a.useState(!1),[m,x]=a.useState(null),g=a.useMemo(()=>{if(!t)return null;try{return hs(t)}catch(e){return null}},[t]);return a.useEffect(()=>{(async()=>{if(g){c(!0),x(null);try{const e=await bt(g);d(e)}catch(e){x("해석 데이터를 불러올 수 없습니다.")}finally{c(!1)}}})()},[g]),t&&g?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsx("div",{className:"mb-8",children:s.jsx(Fs,{birthInfo:t,fourPillars:{year:{heavenly:g.fourPillars.year.heavenly,earthly:g.fourPillars.year.earthly,combined:`${g.fourPillars.year.heavenly}${g.fourPillars.year.earthly}`},month:{heavenly:g.fourPillars.month.heavenly,earthly:g.fourPillars.month.earthly,combined:`${g.fourPillars.month.heavenly}${g.fourPillars.month.earthly}`},day:{heavenly:g.fourPillars.day.heavenly,earthly:g.fourPillars.day.earthly,combined:`${g.fourPillars.day.heavenly}${g.fourPillars.day.earthly}`},hour:{heavenly:g.fourPillars.hour.heavenly,earthly:g.fourPillars.hour.earthly,combined:`${g.fourPillars.hour.heavenly}${g.fourPillars.hour.earthly}`}},userName:t.name,showEditButton:!0,onEditClick:()=>e("/settings")})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"📚 종합 사주 해석"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"5대 고전을 기반으로 한 심층 분석"})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Ps.map(e=>s.jsxs("button",{onClick:()=>i(e.id),className:"px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 "+(r===e.id?`bg-${e.color}-500 text-white shadow-lg transform scale-105`:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[s.jsx("span",{className:"text-xl",children:e.icon}),s.jsx("span",{className:"text-sm",children:e.name})]},e.id))})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:s.jsx(ps,{interpretation:l,loading:o,error:m,category:r,showTabs:!1,fullHeight:!0})}),s.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[s.jsx("button",{onClick:()=>e("/saju-chart"),className:"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"📊 차트 보기"}),s.jsx("button",{onClick:()=>e("/calendar"),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"📅 캘린더로 돌아가기"})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📚"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"사주 정보가 필요합니다"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"종합 해석을 확인하려면 먼저 생년월일 정보를 입력해주세요."}),s.jsx("button",{onClick:()=>e("/settings"),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"생년월일 입력하기"})]})})})},Ls=["갑","을","병","정","무","기","경","신","임","계"],Rs=["자","축","인","묘","진","사","오","미","신","유","술","해"],Os={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},Ks={"인":"목","묘":"목","사":"화","오":"화","진":"토","술":"토","축":"토","미":"토","신":"금","유":"금","자":"수","해":"수"},Bs={"근본":["토","목"],"사고":["수","금"],"인연":["화","목"],"행동":["화","목"],"행운":["화","수"],"환경":["토","수"],"건강":["목","수"],"성격":["화","토"],"지혜":["수","금"],"관계":["화","목"],"재물":["금","토"],"명예":["화","금"],"감성":["화","수"],"논리성":["금","수"],"예술성":["목","화"],"이성":["금","수"],"인성":["목","토"],"지성":["수","금"],"학습성":["목","수"],"관대함":["목","화"],"끈기":["토","금"],"리더십":["화","금"],"분석력":["수","금"],"순수함":["목","수"],"용기":["화","목"],"권력욕":["금","화"],"기쁨":["화","목"],"노여움":["화","금"],"두려움":["수","금"],"명예욕":["화","금"],"물욕":["금","토"],"미움":["금","화"],"사람":["화","목"],"색욕":["수","화"],"소유욕":["토","금"],"수면욕":["수","토"],"슬픔":["수","토"],"승부욕":["화","금"],"식욕":["토","수"],"욕심":["금","토"],"즐거움":["화","목"],"애정욕":["화","목"],"지배욕":["금","화"],"성욕":["수","화"],"지식욕":["수","목"],"인정욕":["화","토"],"자유욕":["목","화"],"창조욕":["목","수"],"탐구욕":["수","금"],"표현욕":["화","목"],"휴식욕":["토","수"],"간":["목","화"],"갑상선":["화","수"],"근육":["목","토"],"뇌하수체":["수","금"],"대사":["화","토"],"스트레스":["화","금"],"신장":["수","목"],"심장":["화","목"],"유전":["목","수"],"지방":["토","수"],"호르몬":["수","화"],"활동량":["화","목"],"강박":["금","토"],"걱정":["토","수"],"공포":["수","금"],"낙관":["화","목"],"무기력":["토","수"],"불안":["수","화"],"스트레스심리":["화","금"],"우울":["수","토"],"자신감":["화","목"],"집착":["토","금"],"충동":["화","목"],"회피":["수","토"],"건물":["토","금"],"공장":["금","화"],"다가구":["토","목"],"부동산":["토","금"],"다세대":["토","목"],"단독":["토","목"],"대지":["토"],"상가":["금","화"],"아파트":["토","금"],"연립":["토","목"],"오피스":["금","토"],"주상복합":["토","금"],"주택":["토","목"],"대여":["금","수"],"동산":["금","목"],"사업":["화","금"],"주식":["수","금"],"채권":["금","토"],"투자":["금","수"],"펀드":["수","금"],"현금":["금"],"기술":["금","수"],"방송":["화","목"],"선물":["수","금"],"예능":["화","목"],"인력":["목","화"],"제품":["금","토"],"외가친척":["목","수"],"외갓집":["목","토"],"외삼촌":["목","화"],"외숙모":["수","목"],"외조모":["토","수"],"외조부":["목","금"],"외종형제":["목","화"],"이모":["수","목"],"이모부":["화","목"],"큰이모":["수","토"],"남자":["화","목"],"배우자":["토","수"],"애인":["화","목"],"여자":["수","목"],"연인":["화","수"],"이성관계":["화","수"],"계산":["금","수"],"과학":["수","금"],"관찰":["수","목"],"논리일반":["수","금"],"논증":["금","수"],"도형":["토","금"],"문장":["목","수"],"법칙":["금","토"],"분류":["금","수"],"분석":["수","금"],"비교":["금","수"],"비판":["금","화"],"수리":["금","수"],"연역":["금","수"],"요약":["금","토"],"원인":["수","목"],"응용":["화","금"],"이해":["수","목"],"인과":["목","수"],"전략":["금","화"],"추론":["수","금"],"통계":["금","수"],"판단":["금","화"],"해석":["수","목"],"공간":["토","목"],"공예":["토","목"],"농담":["화","목"],"댄스":["화","목"],"디자인":["목","화"],"리듬":["화","수"],"만화":["목","화"],"멜로디":["수","목"],"무용":["화","목"],"문학":["목","수"],"미술":["목","토"],"박자":["화","금"],"사진":["금","수"],"색채":["화","목"],"연극":["화","목"],"연기":["화","수"],"영상":["화","금"],"영화":["화","금"],"예술일반":["목","화"],"음악":["수","목"],"조각":["토","금"],"조형":["토","목"],"창작":["목","화"],"화음":["수","목"],"격려":["화","목"],"결단":["금","화"],"계획":["금","수"],"고집":["토","금"],"공감":["수","목"],"관리":["금","토"],"교육":["목","수"],"긍정":["화","목"],"기획":["수","금"],"대화":["목","화"],"도덕":["목","토"],"명령":["금","화"],"봉사":["목","수"],"비판업무":["금","화"],"사교":["화","목"],"상담":["수","목"],"섬세":["수","목"],"성실":["토","금"],"소통":["목","화"],"솔선":["화","목"],"수리업무":["금","수"],"시간":["금","토"],"신뢰":["토","금"],"실천":["화","토"],"언어":["목","수"],"예의":["목","토"],"유머":["화","목"],"응용업무":["수","금"],"인내":["토","금"],"적응":["수","목"],"정리":["금","토"],"정직":["토","목"],"조정":["수","토"],"주도":["화","금"],"책임":["토","금"],"추진":["화","목"],"타협":["수","토"],"포용":["목","수"],"개방적":["목","화"],"계산적":["금","수"],"긍정적":["화","목"],"배타적":["금","토"],"부정적":["수","금"],"사교적":["화","목"],"이기적":["금","화"],"진취적":["화","목"],"합리적":["금","수"],"희생적":["목","수"],"건강운":["목","수"],"결혼운":["화","토"],"금전운":["금","토"],"대인운":["화","목"],"사업운":["화","금"],"성공운":["화","목"],"승진운":["화","금"],"시험운":["수","목"],"재물운":["금","토"],"직장운":["토","금"],"취업운":["금","화"],"학업운":["수","목"],"여행운":["목","화"],"이사운":["토","목"],"이직운":["금","화"],"인기운":["화","목"],"자녀운":["목","화"],"투자운":["금","수"],"학운":["수","목"],"해외운":["수","목"],"혼인운":["화","토"],"연애운":["화","목"],"애정운":["화","수"],"통솔력":["화","금"],"결단력":["금","화"],"책임감":["토","금"],"영향력":["화","목"],"선득력":["화","목"],"상상력":["목","화"],"혁신성":["목","금"],"예술감":["목","화"],"독창성":["목","화"],"문제해결":["수","금"],"의사소통":["목","화"],"경청":["수","목"],"설득":["화","목"],"표현력":["화","목"],"이해력":["수","목"],"기억력":["수","토"],"정리력":["금","토"],"적응력":["수","목"],"경영":["금","토"],"재무관리":["금","토"],"마케팅":["화","목"],"네트워킹":["화","목"],"협상력":["금","화"],"기술력":["금","수"],"전문지식":["수","금"],"실무능력":["토","금"],"장인정신":["토","금"],"발전성":["목","화"],"질병":["수","토"],"상처":["금","화"],"만성질환":["토","수"],"정신건강":["수","화"],"재물손실":["금","수"],"사기조심":["수","금"],"투자주의":["수","금"],"보증주의":["토","금"],"대출주의":["금","수"],"분쟁":["화","금"],"갈등":["화","금"],"오해조심":["화","수"],"배신주의":["금","수"],"이별":["수","금"],"교통사고":["금","화"],"산업재해":["금","토"],"화재":["화","금"],"수상사고":["수","목"],"낙상주의":["토","목"],"소송":["금","화"],"계약주의":["금","토"],"법적분쟁":["금","화"],"세무주의":["금","토"],"규제주의":["금","토"],"실패위험":["수","금"],"동업주의":["화","금"],"확장주의":["목","화"],"계역변경":["수","목"],"경쟁압박":["금","화"]},Is={"목":"화","화":"토","토":"금","금":"수","수":"목"},zs={"목":"토","화":"금","토":"수","금":"목","수":"화"},qs={1:{"수":20,"토":15},2:{"목":20,"화":10,"금":-10},3:{"목":20,"화":10,"금":-10},4:{"목":15,"토":20,"금":-5},5:{"화":20,"토":10,"수":-10},6:{"화":20,"토":10,"수":-10},7:{"화":15,"토":20,"수":-5},8:{"금":20,"수":10,"목":-10},9:{"금":20,"수":10,"목":-10},10:{"금":15,"토":20,"목":-5},11:{"수":20,"목":10,"화":-10},12:{"수":20,"목":10,"화":-10}},Ws={23:{"수":15},0:{"수":15},1:{"수":15},3:{"목":15},4:{"목":15},5:{"목":15},7:{"토":10},8:{"토":10},9:{"화":15},10:{"화":15},11:{"화":15},12:{"화":15},13:{"토":10},14:{"토":10},15:{"금":15},16:{"금":15},17:{"금":15},18:{"금":15},19:{"토":10},20:{"토":10},21:{"수":15},22:{"수":15}};function Hs(e,t,r){const a=r.getFullYear()-t;return Math.floor(a/10)}function Ys(e,t,r,a,s){const n=new Date,i=Us(e,t);let l=40;if(s){l=tn(t,Hs(0,s,n))}const d=rn(t,n.getFullYear()),o=an(t,n.getFullYear(),n.getMonth()+1),c=sn(t,n),m={base:{base:.7,daeun:.2,seun:.05,month:.03,day:.02},year:{base:.3,daeun:.3,seun:.3,month:.05,day:.05},month:{base:.25,daeun:.2,seun:.15,month:.3,day:.1},today:{base:.2,daeun:.15,seun:.1,month:.2,day:.35}}[r],x=i*m.base+l*m.daeun+d*m.seun+o*m.month+c*m.day;return Math.max(20,Math.min(90,Math.round(x)))}function Us(e,t){var r,a,s,n;if(!(t&&(null==(r=t.year)?void 0:r.gan)&&(null==(a=t.month)?void 0:a.gan)&&(null==(s=t.day)?void 0:s.gan)&&(null==(n=t.time)?void 0:n.gan)))return Math.floor(30*Math.random())+40;const i=Bs[e]||[];if(0===i.length)return Math.floor(30*Math.random())+40;const l=ln(t);let d=20+(l+1e3*e.split("").reduce((e,t)=>e+t.charCodeAt(0),0))%1e5%21;const o=[];try{o.push(Os[t.year.gan]),o.push(Os[t.month.gan]),o.push(Os[t.day.gan]),o.push(Os[t.time.gan]),o.push(Ks[t.year.ji]),o.push(Ks[t.month.ji]),o.push(Ks[t.day.ji]),o.push(Ks[t.time.ji])}catch(g){return Math.floor(30*Math.random())+40}const c=1+(l%20-10)/100;i.forEach(e=>{const t=o.filter(t=>t===e).length;d+=3*t*c,o.forEach(t=>{Is[t]===e&&(d+=5*c),zs[t]===e&&(d-=3*c)})});const m=function(e,t){let r=0;return t.forEach(t=>{const a=e[t];a>=40&&a<=60?r+=5:a>=70?r+=8:a<=20&&(r-=3)}),r}(t.ohHaengBalance,i);d+=m*c;const x=Os[t.day.gan];i.includes(x)&&(d+=6*c);return Math.max(20,Math.min(55,Math.round(d)))}const Gs={"갑":"기","을":"경","병":"신","정":"임","무":"계","기":"갑","경":"을","신":"병","임":"정","계":"무"},Qs={"인":["오","술"],"오":["인","술"],"술":["인","오"],"신":["자","진"],"자":["신","진"],"진":["신","자"],"해":["묘","미"],"묘":["해","미"],"미":["해","묘"],"사":["유","축"],"유":["사","축"],"축":["사","유"]},Vs={"자":"축","축":"자","인":"해","해":"인","묘":"술","술":"묘","진":"유","유":"진","사":"신","신":"사","오":"미","미":"오"},Js={"자":"오","오":"자","축":"미","미":"축","인":"신","신":"인","묘":"유","유":"묘","진":"술","술":"진","사":"해","해":"사"},Zs={"목":"화","화":"토","토":"금","금":"수","수":"목"},Xs={"목":"토","화":"금","토":"수","금":"목","수":"화"};function en(e,t){const r=function(e){const t={"목":0,"화":0,"토":0,"금":0,"수":0};t[Os[e.year.gan]]++,t[Os[e.month.gan]]++,t[Os[e.day.gan]]++,t[Os[e.time.gan]]++,t[Ks[e.year.ji]]++,t[Ks[e.month.ji]]++,t[Ks[e.day.ji]]++,t[Ks[e.time.ji]]++;const r=Object.values(t),a=Math.max(...r),s=Math.min(...r),n=r.reduce((e,t)=>e+t)/r.length,i=r.reduce((e,t)=>e+Math.pow(t-n,2),0)/r.length;return Math.max(0,100-25*Math.sqrt(i)-10*(a-s))}(e),a=function(e){var t;const r=e.day.gan,a=Os[r];let s=50;const n=[e.year.gan,e.month.gan,e.time.gan,e.year.ji,e.month.ji,e.day.ji,e.time.ji].filter(e=>Os[e]===a||Ks[e]===a).length;s+=5*n;const i=null==(t=Object.entries(Zs).find(([e,t])=>t===a))?void 0:t[0];if(i){s+=3*[e.year.gan,e.month.gan,e.time.gan,e.year.ji,e.month.ji,e.day.ji,e.time.ji].filter(e=>Os[e]===i||Ks[e]===i).length}const l=Xs[a],d=[e.year.gan,e.month.gan,e.time.gan,e.year.ji,e.month.ji,e.day.ji,e.time.ji].filter(e=>Os[e]===l||Ks[e]===l).length;return s-=4*d,Math.max(0,Math.min(100,s))}(e),s=function(e){let t=50;const r=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];for(let s=0;s<r.length;s++)for(let e=s+1;e<r.length;e++)Gs[r[s]]===r[e]&&(t+=10);const a=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];for(let s=0;s<a.length;s++)for(let e=s+1;e<a.length;e++)Vs[a[s]]===a[e]&&(t+=8);for(const s of a){const e=Qs[s];if(e){t+=5*e.filter(e=>a.includes(e)).length}}return Math.min(100,t)}(e),n=function(e){let t=0;const r=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];for(let s=0;s<r.length;s++)for(let e=s+1;e<r.length;e++)Js[r[s]]===r[e]&&(t+=15);const a=[Os[e.year.gan],Os[e.month.gan],Os[e.day.gan],Os[e.time.gan]];for(let s=0;s<a.length;s++)for(let e=s+1;e<a.length;e++)Xs[a[s]]===a[e]&&(t+=10);return Math.min(100,t)}(e),i=function(e,t,r,a){const s=.3*e+.3*t+.25*r+.15*(100-a);return Math.round(s)}(r,a,s,n),l=[];(new Date).getFullYear();for(let d=0;d<=95;d++){const r=t+d;let a=.4*i+.3*tn(e,Math.floor(d/10))+.2*rn(e,r)+.1*nn(e,d);a=dn(a,d);a+=on(e,d),a=Math.max(0,Math.min(100,a)),l.push(a)}return{baseScore:i,yearlyScores:l,pattern:function(e){const t=e.reduce((e,t)=>e+t)/e.length,r=e.reduce((e,r)=>e+Math.pow(r-t,2),0)/e.length,a=Math.sqrt(r)/50,s=e.slice(0,48).reduce((e,t)=>e+t)/48,n=e.slice(48).reduce((e,t)=>e+t)/48;let i;i=n-s>10?"ascending":s-n>10?"descending":a>.5?"cyclic":"stable";let l="안정형";a>.7?l="격변형":a>.5?l="변동형":"ascending"===i?l="상승형":"descending"===i&&(l="하강형");return{type:l,volatility:Math.min(1,a),trend:i}}(l),keyCharacteristics:{elementBalance:r,dayMasterStrength:a,harmonyLevel:s,conflictLevel:n}}}function tn(e,t){const r=e.month.ji,a=e.day.gan,s=["갑","병","무","경","임"].includes(a),n=Ls.indexOf(e.month.gan),i=Rs.indexOf(r);let l,d;s?(l=(n+t+1)%10,d=(i+t+1)%12):(l=(n-t-1+10)%10,d=(i-t-1+12)%12);const o=Ls[l],c=Rs[d];let m=40;const x=Os[e.day.gan],g=Os[o];Zs[g]===x?m+=30:Zs[x]===g&&(m+=25),Xs[g]===x?m-=35:Xs[x]===g&&(m-=30),x===g&&(m+=10),Gs[e.day.gan]!==o&&Gs[o]!==e.day.gan||(m+=35),Js[e.day.ji]!==c&&Js[c]!==e.day.ji||(m-=25),Vs[e.day.ji]!==c&&Vs[c]!==e.day.ji||(m+=20);const h=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],u=Qs[c];if(u){m+=12*u.filter(e=>h.includes(e)).length}const p=function(e,t,r,a){let s=0;const n=ln(e),i=[n%3+1,n%5+3,n%7+6];if(i.includes(t)){s=(n+t)%2==0?45:-45,t===i[0]&&(s*=1.5)}const l=12*Ls.indexOf(r)+Rs.indexOf(a);[13,27,41,55].includes(l)&&(s+=30*(n%3-1));const d=20*Math.sin(.7*(t+n));return s+=d,s}(e,t,o,c);m+=p;const b=function(e,t){const r={"인":"봄","묘":"봄","진":"봄말","사":"여름","오":"여름","미":"여름말","신":"가을","유":"가을","술":"가을말","자":"겨울","축":"겨울말","해":"겨울"},a=r[e],s=r[t];if(a===s)return 8;if({"봄":"가을","가을":"봄","여름":"겨울","겨울":"여름"}[a]===s)return-5;return 0}(r,c);return m+=b,Math.max(20,Math.min(80,m))}function rn(e,t){const r=(t-4)%12,a=Ls[(t-4)%10],s=Rs[r];let n=40;Gs[e.day.gan]===a&&(n+=15),Vs[e.day.ji]===s&&(n+=12),Js[e.day.ji]===s&&(n-=18);const i=Os[e.day.gan],l=Os[a];return Zs[l]===i&&(n+=8),Xs[l]===i&&(n-=12),Math.max(20,Math.min(80,n))}function an(e,t,r){const a=(r-1)%12,s=Ls[(12*(t-4)+(r-1))%10],n=Rs[a];let i=40;Gs[e.day.gan]===s&&(i+=18),Vs[e.day.ji]===n&&(i+=15),Js[e.day.ji]===n&&(i-=20);const l=Os[e.day.gan],d=Os[s];Zs[d]===l&&(i+=12),Xs[d]===l&&(i-=15);return i+=.3*((qs[r]||{})[Ks[n]]||0),Math.max(20,Math.min(80,i))}function sn(e,t){const r=new Date(1984,0,1),a=Math.floor((t.getTime()-r.getTime())/864e5),s=Math.abs(a%10),n=Math.abs(a%12),i=Ls[s],l=Rs[n];let d=40;Gs[e.day.gan]===i&&(d+=20),Vs[e.day.ji]===l&&(d+=18),Js[e.day.ji]===l&&(d-=22);const o=Os[e.day.gan],c=Os[i];Zs[c]===o&&(d+=15),Xs[c]===o&&(d-=18);const m=t.getHours();return d+=.5*((Ws[m]||{})[Os[i]]||0),Math.max(20,Math.min(80,d))}function nn(e,t){const r=ln(e),a=50+15*Math.sin(2*t*Math.PI/23)+10*Math.sin(2*t*Math.PI/28)+8*Math.sin(2*t*Math.PI/33)+(25*Math.sin(.15*(t+r))+15*Math.cos(.08*(t+2*r))+10*Math.sin(.3*(t+3*r)));return Math.max(0,Math.min(100,a))}function ln(e){const t={"갑":1,"을":2,"병":3,"정":4,"무":5,"기":6,"경":7,"신":8,"임":9,"계":10},r={"자":1,"축":2,"인":3,"묘":4,"진":5,"사":6,"오":7,"미":8,"신":9,"유":10,"술":11,"해":12},a=(12*(t[e.year.gan]-1)+(r[e.year.ji]-1))%60,s=(12*(t[e.month.gan]-1)+(r[e.month.ji]-1))%60,n=(12*(t[e.day.gan]-1)+(r[e.day.ji]-1))%60,i=(12*(t[e.time.gan]-1)+(r[e.time.ji]-1))%60,l={"목":0,"화":0,"토":0,"금":0,"수":0};[e.year.gan,e.month.gan,e.day.gan,e.time.gan].forEach(e=>{l[Os[e]]++}),[e.year.ji,e.month.ji,e.day.ji,e.time.ji].forEach(e=>{l[Ks[e]]++});const d=Object.values(l),o=100*(Math.max(...d)-Math.min(...d));let c=0,m=0;const x=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];for(let h=0;h<x.length;h++)for(let e=h+1;e<x.length;e++)Gs[x[h]]===x[e]&&(c+=(h+1)*(e+1)*10);const g=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];for(let h=0;h<g.length;h++)for(let e=h+1;e<g.length;e++)Js[g[h]]===g[e]&&(m+=(h+1)*(e+1)*15);e.day.gan;return 1e3*a+500*s+800*n+300*i+20*o+3*c+2*m+t[e.day.gan]*r[e.day.ji]*5+10*(7*r[e.month.ji])}function dn(e,t){return t<=10?.9*e+10:t<=20?1.1*e:t<=35?1.05*e:t<=55?.95*e+5:e*(1-.003*(t-55))}function on(e,t){const r=ln(e);return 3*Math.sin(.3*(t+.1*r))+2*Math.cos(.5*(t+.2*r))+1.5*Math.sin(t*r*.01*.7)}function cn(e,t,r,a,s,n){let i=0;const l=1*(tn(r,Hs(0,n,s))-40),d=1*(rn(r,s.getFullYear())-40),o=1*(an(r,s.getFullYear(),s.getMonth()+1)-40),c=1*(sn(r,s)-40);switch(a){case"today":i=.35*c+.2*o+.15*l+.1*d;break;case"month":i=.3*o+.2*l+.15*d+.1*c;break;case"year":i=.3*d+.3*l+.05*o+.05*c}const m=s.getFullYear(),x=s.getMonth()+1,g=s.getDate();let h,u,p;switch(a){case"today":h=Ls[Math.abs((g-1)%10)],u=Rs[Math.abs((g-1)%12)],p=Os[h];break;case"month":h=Ls[Math.abs((x-1)%10)],u=Rs[Math.abs((x-1)%12)],p=Os[h];break;case"year":h=Ls[Math.abs((m-1984)%10)],u=Rs[Math.abs((m-1984)%12)],p=Os[h]}[e,t].forEach(e=>{Is[p]===e?i+="today"===a?5:"month"===a?4:3:p===e?i+="today"===a?3:2:zs[p]===e&&(i-="today"===a?4:"month"===a?3:2)});const b=function(e,t,r,a){let s=0;switch(a){case"today":e.day.gan===t&&(s+=20),e.day.ji===r&&(s+=15);break;case"month":e.month.gan===t&&(s+=18),e.month.ji===r&&(s+=12);break;case"year":e.year.gan===t&&(s+=15),e.year.ji===r&&(s+=10)}return s}(r,h,u,a);return i+=.15*b,Math.max(-30,Math.min(30,Math.round(i)))}let mn=null;function xn(e){mn=e}function gn(e,t){try{return Us(e,mn||{year:{gan:"갑",ji:"자"},month:{gan:"병",ji:"인"},day:{gan:"무",ji:"진"},time:{gan:"경",ji:"신"},ohHaengBalance:{"목":30,"화":25,"토":20,"금":15,"수":10},fullSaju:"갑자 병인 무진 경신"})}catch(r){return t}}const hn=[{id:"jubon",name:"주본",icon:"🎯",description:"근본본, 성향, 욕정, 주격, 주운 분석",subcategories:[{id:"geunbonbon",name:"근본본",items:[{id:"geunbon",name:"근본",baseScore:gn("근본",75)},{id:"sago",name:"사고",baseScore:gn("사고",70)},{id:"inyeon",name:"인연",baseScore:gn("인연",65)},{id:"haengdong",name:"행동",baseScore:gn("행동",72)},{id:"haengun",name:"행운",baseScore:gn("행운",68)},{id:"hwangyeong",name:"환경",baseScore:gn("환경",70)}]},{id:"seonghyang",name:"성향",items:[{id:"gamseong",name:"감성",baseScore:gn("감성",70)},{id:"nonriseong",name:"논리성",baseScore:gn("논리성",68)},{id:"yesulseong",name:"예술성",baseScore:gn("예술성",65)},{id:"iseong",name:"이성",baseScore:gn("이성",72)},{id:"inseong",name:"인성",baseScore:gn("인성",75)},{id:"jiseong",name:"지성",baseScore:gn("지성",70)},{id:"hakseupseong",name:"학습성",baseScore:gn("학습성",68)}]},{id:"yokjeong",name:"욕정",items:[{id:"gwonryeokyok",name:"권력욕",baseScore:gn("권력욕",60)},{id:"gippeum",name:"기쁨",baseScore:gn("기쁨",75)},{id:"noyeoum",name:"노여움",baseScore:gn("노여움",45)},{id:"duryeoum",name:"두려움",baseScore:gn("두려움",40)},{id:"myeongyeyok",name:"명예욕",baseScore:gn("명예욕",65)},{id:"muryok",name:"물욕",baseScore:gn("물욕",55)},{id:"mium",name:"미움",baseScore:gn("미움",35)},{id:"saram",name:"사람",baseScore:gn("사람",70)},{id:"saegyok",name:"색욕",baseScore:gn("색욕",50)},{id:"soyuyok",name:"소유욕",baseScore:gn("소유욕",60)},{id:"sumyeonyok",name:"수면욕",baseScore:gn("수면욕",65)},{id:"seulpeum",name:"슬픔",baseScore:gn("슬픔",45)},{id:"seungbuyok",name:"승부욕",baseScore:gn("승부욕",70)},{id:"sigyok",name:"식욕",baseScore:gn("식욕",60)},{id:"yoksim",name:"욕심",baseScore:gn("욕심",55)},{id:"jeulgeoum",name:"즐거움",baseScore:gn("즐거움",75)}]},{id:"jugak",name:"주격",items:[{id:"gaebangjeogin",name:"개방적",baseScore:gn("개방적",70)},{id:"gyesanjeogin",name:"계산적",baseScore:gn("계산적",65)},{id:"geungjeongjeeogin",name:"긍정적",baseScore:gn("긍정적",75)},{id:"baetajeogin",name:"배타적",baseScore:gn("배타적",45)},{id:"bujeongjeogin",name:"부정적",baseScore:gn("부정적",40)},{id:"sagyojeogin",name:"사교적",baseScore:gn("사교적",70)},{id:"igijeogin",name:"이기적",baseScore:gn("이기적",50)},{id:"jinchwijeogin",name:"진취적",baseScore:gn("진취적",72)},{id:"haprijeogin",name:"합리적",baseScore:gn("합리적",75)},{id:"heuisaengjeogin",name:"희생적",baseScore:gn("희생적",65)}]},{id:"juun",name:"주운",items:[{id:"geongangun",name:"건강운",baseScore:gn("건강운",70)},{id:"gyeolhonun",name:"결혼운",baseScore:gn("결혼운",65)},{id:"gwonryeogun",name:"권력운",baseScore:gn("권력운",60)},{id:"myeongyeun",name:"명예운",baseScore:gn("명예운",62)},{id:"sagoun",name:"사고운",baseScore:gn("사고운",45)},{id:"saeobun",name:"사업운",baseScore:gn("사업운",68)},{id:"idongun",name:"이동운",baseScore:gn("이동운",55)},{id:"ibyeorun",name:"이별운",baseScore:gn("이별운",40)},{id:"inyeonun",name:"인연운",baseScore:gn("인연운",72)},{id:"jasigun",name:"자식운",baseScore:gn("자식운",65)},{id:"jaeneungun",name:"재능운",baseScore:gn("재능운",70)},{id:"jaemorun",name:"재물운",baseScore:gn("재물운",60)},{id:"josangun",name:"조상운",baseScore:gn("조상운",58)},{id:"jigeobun",name:"직업운",baseScore:gn("직업운",68)},{id:"jibangun",name:"집안운",baseScore:gn("집안운",65)},{id:"hageobun",name:"학업운",baseScore:gn("학업운",70)},{id:"haengunun",name:"행운운",baseScore:gn("행운운",60)}]}]},{id:"jugeon",name:"주건",icon:"💪",description:"비만, 심리, 인체계, 정력, 질환, 뇌 분석",subcategories:[{id:"biman",name:"비만",items:[{id:"geongangsikpum",name:"건강식품",baseScore:gn("건강식품",70)},{id:"gwanri",name:"관리",baseScore:gn("관리",65)},{id:"dansik",name:"단식",baseScore:gn("단식",50)},{id:"boyak",name:"보약",baseScore:gn("보약",60)},{id:"sangdam",name:"상담",baseScore:gn("상담",65)},{id:"sumyeon",name:"수면",baseScore:gn("수면",70)},{id:"subun",name:"수분",baseScore:gn("수분",75)},{id:"undong",name:"운동",baseScore:gn("운동",68)},{id:"eumsik",name:"음식",baseScore:gn("음식",65)},{id:"chehyeong",name:"체형",baseScore:gn("체형",60)},{id:"chiryo",name:"치료",baseScore:gn("치료",70)},{id:"keondisyeon",name:"컨디션",baseScore:gn("컨디션",72)}]},{id:"simri",name:"심리",items:[{id:"galdeung",name:"갈등",baseScore:gn("갈등",45)},{id:"gonoe",name:"고뇌",baseScore:gn("고뇌",40)},{id:"nakgwan",name:"낙관",baseScore:gn("낙관",75)},{id:"mugwansim",name:"무관심",baseScore:gn("무관심",50)},{id:"buran",name:"불안",baseScore:gn("불안",45)},{id:"sinjung",name:"신중",baseScore:gn("신중",70)},{id:"uul",name:"우울",baseScore:gn("우울",35)},{id:"uisim",name:"의심",baseScore:gn("의심",50)},{id:"jiltu",name:"질투",baseScore:gn("질투",40)},{id:"jjajeung",name:"짜증",baseScore:gn("짜증",45)},{id:"hogisim",name:"호기심",baseScore:gn("호기심",75)},{id:"heungbun",name:"흥분",baseScore:gn("흥분",60)}]},{id:"inchegye",name:"인체계",items:[{id:"golgegyae",name:"골격계",baseScore:gn("골격계",65)},{id:"geunukgye",name:"근육계",baseScore:gn("근육계",68)},{id:"namsaengsiggye",name:"남생식기",baseScore:gn("남생식기",60)},{id:"naebungye",name:"내분비계",baseScore:gn("내분비계",70)},{id:"sohwagye",name:"소화계",baseScore:gn("소화계",68)},{id:"sunhwangye",name:"순환계",baseScore:gn("순환계",72)},{id:"singyeonggye",name:"신경계",baseScore:gn("신경계",75)},{id:"oebungye",name:"외분비계",baseScore:gn("외분비계",65)},{id:"oehyeonggye",name:"외형계",baseScore:gn("외형계",60)},{id:"jeonsingye",name:"정신계",baseScore:gn("정신계",70)},{id:"pibugye",name:"피부계",baseScore:gn("피부계",65)},{id:"hoheupgye",name:"호흡계",baseScore:gn("호흡계",72)}]},{id:"jeongryeok",name:"정력",items:[{id:"dolbal",name:"돌발",baseScore:gn("돌발",55)},{id:"sekseu",name:"섹스",baseScore:gn("섹스",65)},{id:"seutemina",name:"스테미나",baseScore:gn("스테미나",70)},{id:"oreugarijeum",name:"오르가즘",baseScore:gn("오르가즘",60)},{id:"joyeol",name:"조절",baseScore:gn("조절",68)},{id:"junbi",name:"준비",baseScore:gn("준비",65)},{id:"chungdong",name:"충동",baseScore:gn("충동",60)},{id:"taim",name:"타임",baseScore:gn("타임",62)}]},{id:"jilhwan",name:"질환",items:[{id:"gamyeomseong",name:"감염성질환",baseScore:gn("감염성질환",40)},{id:"golsuseong",name:"골수성혈액질환",baseScore:gn("골수성혈액질환",35)},{id:"gugangmit",name:"구강및악안면병리",baseScore:gn("구강및악안면병리",45)},{id:"geungolggyae",name:"근골격계장애",baseScore:gn("근골격계장애",50)},{id:"geunuk",name:"근육질환",baseScore:gn("근육질환",45)},{id:"naebunbi",name:"내분비질환",baseScore:gn("내분비질환",40)},{id:"noejilhwan",name:"뇌질환",baseScore:gn("뇌질환",35)},{id:"rimpeu",name:"림프계면역장애",baseScore:gn("림프계면역장애",40)},{id:"manseong",name:"만성피로",baseScore:gn("만성피로",50)},{id:"binyugi",name:"비뇨기계질환",baseScore:gn("비뇨기계질환",45)},{id:"biman_jilhwan",name:"비만질환",baseScore:gn("비만질환",40)},{id:"ppyeogol",name:"뼈골절질환",baseScore:gn("뼈골절질환",35)},{id:"saengsiggye",name:"생식기질환",baseScore:gn("생식기질환",40)},{id:"seoncheonseong",name:"선천성질환",baseScore:gn("선천성질환",30)},{id:"sohwa",name:"소화질환",baseScore:gn("소화질환",45)},{id:"sunhwan",name:"순환질환",baseScore:gn("순환질환",40)},{id:"singyeonggye_jilhwan",name:"신경계질환",baseScore:gn("신경계질환",35)},{id:"simhyeolgwan",name:"심혈관질환",baseScore:gn("심혈관질환",40)},{id:"angwa",name:"안과질환",baseScore:gn("안과질환",50)},{id:"am",name:"암",baseScore:gn("암",25)},{id:"janggi",name:"장기질환",baseScore:gn("장기질환",40)},{id:"jeongsin",name:"정신장애",baseScore:gn("정신장애",35)},{id:"jeunghugun",name:"증후군",baseScore:gn("증후군",40)},{id:"taae",name:"태아질환",baseScore:gn("태아질환",30)},{id:"pibu",name:"피부질환",baseScore:gn("피부질환",50)},{id:"horumon",name:"호르몬질환",baseScore:gn("호르몬질환",40)},{id:"hoheup",name:"호흡질환",baseScore:gn("호흡질환",45)}]},{id:"noe",name:"뇌",items:[{id:"gannoe",name:"간뇌",baseScore:gn("간뇌",65)},{id:"noehasuche",name:"뇌하수체",baseScore:gn("뇌하수체",68)},{id:"daenoe",name:"대뇌",baseScore:gn("대뇌",75)},{id:"duchungeop",name:"두충엽",baseScore:gn("두충엽",60)},{id:"byeongyeongeop",name:"변연엽",baseScore:gn("변연엽",62)},{id:"sonoe",name:"소뇌",baseScore:gn("소뇌",70)},{id:"sisang",name:"시상",baseScore:gn("시상",65)},{id:"sisanghabu",name:"시상하부",baseScore:gn("시상하부",68)},{id:"yeonsu",name:"연수",baseScore:gn("연수",72)},{id:"jeondueop",name:"전두엽",baseScore:gn("전두엽",75)},{id:"jeoneop",name:"전엽",baseScore:gn("전엽",70)},{id:"jungnoe",name:"중뇌",baseScore:gn("중뇌",68)},{id:"jungeop",name:"중엽",baseScore:gn("중엽",65)},{id:"cheoksu",name:"척수",baseScore:gn("척수",60)},{id:"cheukdueop",name:"측두엽",baseScore:gn("측두엽",70)},{id:"hutueop",name:"후투엽",baseScore:gn("후투엽",65)},{id:"hueop",name:"후엽",baseScore:gn("후엽",68)}]}]},{id:"jumul",name:"주물",icon:"💰",description:"부동산, 재물, 투자 분석",subcategories:[{id:"budongsan",name:"부동산",items:[{id:"geonmul",name:"건물",baseScore:gn("건물",65)},{id:"gongjang",name:"공장",baseScore:gn("공장",60)},{id:"dagagu",name:"다가구",baseScore:gn("다가구",62)},{id:"budongsan_item",name:"부동산",baseScore:gn("부동산",70)},{id:"dasedae",name:"다세대",baseScore:gn("다세대",63)},{id:"dandok",name:"단독",baseScore:gn("단독",68)},{id:"daeji",name:"대지",baseScore:gn("대지",65)},{id:"sangga",name:"상가",baseScore:gn("상가",72)},{id:"apateu",name:"아파트",baseScore:gn("아파트",75)},{id:"yeonrip",name:"연립",baseScore:gn("연립",60)},{id:"opiseu",name:"오피스",baseScore:gn("오피스",70)},{id:"jusangbokhap",name:"주상복합",baseScore:gn("주상복합",68)},{id:"jutaek",name:"주택",baseScore:gn("주택",67)}]},{id:"jaemul",name:"재물",items:[{id:"daeyeo",name:"대여",baseScore:gn("대여",55)},{id:"dongsan",name:"동산",baseScore:gn("동산",60)},{id:"budongsan_jaemul",name:"부동산",baseScore:gn("부동산",70)},{id:"saeop",name:"사업",baseScore:gn("사업",65)},{id:"jusik",name:"주식",baseScore:gn("주식",62)},{id:"chaegwon",name:"채권",baseScore:gn("채권",58)},{id:"tuja",name:"투자",baseScore:gn("투자",60)},{id:"peondeu",name:"펀드",baseScore:gn("펀드",57)},{id:"hyeongeum",name:"현금",baseScore:gn("현금",75)}]},{id:"tuja_jumul",name:"투자",items:[{id:"daeyeo_tuja",name:"대여",baseScore:gn("대여",55)},{id:"dongsan_tuja",name:"동산",baseScore:gn("동산",58)},{id:"budongsan_tuja",name:"부동산",baseScore:gn("부동산",70)},{id:"jusik_tuja",name:"주식",baseScore:gn("주식",65)},{id:"chaegwon_tuja",name:"채권",baseScore:gn("채권",60)},{id:"peondeu_tuja",name:"펀드",baseScore:gn("펀드",58)},{id:"gisul",name:"기술",baseScore:gn("기술",68)},{id:"bangsong",name:"방송",baseScore:gn("방송",62)},{id:"seonmul",name:"선물",baseScore:gn("선물",55)},{id:"yeneung",name:"예능",baseScore:gn("예능",60)},{id:"inryeok",name:"인력",baseScore:gn("인력",63)},{id:"jepum",name:"제품",baseScore:gn("제품",65)}]}]},{id:"juyeon",name:"주연",icon:"🤝",description:"외가, 이성, 인연, 선배, 친가, 친구, 후배, 가정, 가족 분석",subcategories:[{id:"oega",name:"외가",items:[{id:"oesachon",name:"외사촌",baseScore:gn("외사촌",65)},{id:"oesamchon",name:"외삼촌",baseScore:gn("외삼촌",70)},{id:"oesukmo",name:"외숙모",baseScore:gn("외숙모",68)},{id:"oejomo",name:"외조모",baseScore:gn("외조모",75)},{id:"oejobu",name:"외조부",baseScore:gn("외조부",72)},{id:"oejoka",name:"외조카",baseScore:gn("외조카",60)},{id:"oejongomo",name:"외종조모",baseScore:gn("외종조모",65)},{id:"oejongjobu",name:"외종조부",baseScore:gn("외종조부",68)},{id:"imo",name:"이모",baseScore:gn("이모",70)},{id:"imobu",name:"이모부",baseScore:gn("이모부",65)}]},{id:"iseong",name:"이성",items:[{id:"gohyangiseong",name:"고향이성",baseScore:gn("고향이성",60)},{id:"dandaeiseong",name:"단체이성",baseScore:gn("단체이성",65)},{id:"dongneiseong",name:"동네이성",baseScore:gn("동네이성",68)},{id:"dongmuniseong",name:"동문이성",baseScore:gn("동문이성",70)},{id:"moimiseong",name:"모임이성",baseScore:gn("모임이성",65)},{id:"hoesaiseong",name:"회사이성",baseScore:gn("회사이성",72)}]},{id:"inyeon",name:"인연",items:[{id:"iseong_inyeon",name:"이성",baseScore:gn("이성",70)},{id:"baeuja",name:"배우자",baseScore:gn("배우자",75)},{id:"gajok",name:"가족",baseScore:gn("가족",80)},{id:"guin",name:"귀인",baseScore:gn("귀인",65)},{id:"dongryo",name:"동료",baseScore:gn("동료",68)},{id:"dongmun",name:"동문",baseScore:gn("동문",65)},{id:"donghyang",name:"동향",baseScore:gn("동향",60)},{id:"seonbae_inyeon",name:"선배",baseScore:gn("선배",70)},{id:"seuseung",name:"스승",baseScore:gn("스승",72)},{id:"aein",name:"애인",baseScore:gn("애인",75)},{id:"oega_inyeon",name:"외가",baseScore:gn("외가",68)},{id:"chinga_inyeon",name:"친가",baseScore:gn("친가",70)}]},{id:"seonbae",name:"선배",items:[{id:"gohyangseonbae",name:"고향선배",baseScore:gn("고향선배",65)},{id:"dandaeseonbae",name:"단체선배",baseScore:gn("단체선배",68)},{id:"dongneseonbae",name:"동네선배",baseScore:gn("동네선배",60)},{id:"dongmunseonbae",name:"동문선배",baseScore:gn("동문선배",70)},{id:"moimseonbae",name:"모임선배",baseScore:gn("모임선배",65)},{id:"iseongseonbae",name:"이성선배",baseScore:gn("이성선배",68)},{id:"hoesaseonbae",name:"회사선배",baseScore:gn("회사선배",75)}]},{id:"chinga",name:"친가",items:[{id:"gomo",name:"고모",baseScore:gn("고모",68)},{id:"gomobu",name:"고모부",baseScore:gn("고모부",65)},{id:"baekmo",name:"백모",baseScore:gn("백모",70)},{id:"baekbu",name:"백부",baseScore:gn("백부",72)},{id:"sachon",name:"사촌",baseScore:gn("사촌",65)},{id:"samchon",name:"삼촌",baseScore:gn("삼촌",70)},{id:"sukmo",name:"숙모",baseScore:gn("숙모",68)},{id:"jomo",name:"조모",baseScore:gn("조모",75)},{id:"jobu",name:"조부",baseScore:gn("조부",72)},{id:"joka",name:"조카",baseScore:gn("조카",60)},{id:"jeungjomo",name:"증조모",baseScore:gn("증조모",65)},{id:"jeungjobu",name:"증조부",baseScore:gn("증조부",68)}]},{id:"chingu",name:"친구",items:[{id:"gohyangchingu",name:"고향친구",baseScore:gn("고향친구",65)},{id:"dandaechingu",name:"단체친구",baseScore:gn("단체친구",68)},{id:"dongnechingu",name:"동네친구",baseScore:gn("동네친구",70)},{id:"dongmunchingu",name:"동문친구",baseScore:gn("동문친구",72)},{id:"moimchingu",name:"모임친구",baseScore:gn("모임친구",65)},{id:"iseongchingu",name:"이성친구",baseScore:gn("이성친구",75)},{id:"hoesachingu",name:"회사친구",baseScore:gn("회사친구",68)}]},{id:"hubae",name:"후배",items:[{id:"gohyanghubae",name:"고향후배",baseScore:gn("고향후배",60)},{id:"dandaehubae",name:"단체후배",baseScore:gn("단체후배",65)},{id:"dongnehubae",name:"동네후배",baseScore:gn("동네후배",62)},{id:"dongmunhubae",name:"동문후배",baseScore:gn("동문후배",68)},{id:"moimhubae",name:"모임후배",baseScore:gn("모임후배",60)},{id:"iseonghubae",name:"이성후배",baseScore:gn("이성후배",65)},{id:"hoesahubae",name:"회사후배",baseScore:gn("회사후배",70)}]},{id:"gajeong",name:"가정",items:[{id:"ttal",name:"딸",baseScore:gn("딸",75)},{id:"baeuja_gajeong",name:"배우자",baseScore:gn("배우자",80)},{id:"adeul",name:"아들",baseScore:gn("아들",75)}]},{id:"gajok_juyeon",name:"가족",items:[{id:"nuna",name:"누나",baseScore:gn("누나",68)},{id:"dongsaeng",name:"동생",baseScore:gn("동생",65)},{id:"abeoji",name:"아버지",baseScore:gn("아버지",78)},{id:"eomeoni",name:"어머니",baseScore:gn("어머니",80)},{id:"halmeoni",name:"할머니",baseScore:gn("할머니",72)},{id:"harabeoji",name:"할아버지",baseScore:gn("할아버지",70)},{id:"hyeong",name:"형",baseScore:gn("형",68)}]}]},{id:"jujae",name:"주재",icon:"🎨",description:"논리, 예술, 학습 분석",subcategories:[{id:"nonri",name:"논리",items:[{id:"undong",name:"운동",baseScore:gn("운동",65)},{id:"gamgak",name:"감각",baseScore:gn("감각",70)},{id:"gaenyeom",name:"개념",baseScore:gn("개념",72)},{id:"gieok",name:"기억",baseScore:gn("기억",68)},{id:"nonri_item",name:"논리",baseScore:gn("논리",75)},{id:"migak",name:"미각",baseScore:gn("미각",60)},{id:"bunseok",name:"분석",baseScore:gn("분석",75)},{id:"suri",name:"수리",baseScore:gn("수리",70)},{id:"sigak",name:"시각",baseScore:gn("시각",68)},{id:"eohi",name:"어휘",baseScore:gn("어휘",72)},{id:"eoneo",name:"언어",baseScore:gn("언어",75)},{id:"yeonsan",name:"연산",baseScore:gn("연산",70)},{id:"ihae",name:"이해",baseScore:gn("이해",75)},{id:"insik",name:"인식",baseScore:gn("인식",72)},{id:"inji",name:"인지",baseScore:gn("인지",70)},{id:"jeonryak",name:"전략",baseScore:gn("전략",68)},{id:"jinhaeng",name:"진행",baseScore:gn("진행",65)},{id:"jipjung",name:"집중",baseScore:gn("집중",72)},{id:"cheonggak",name:"청각",baseScore:gn("청각",68)},{id:"tongje",name:"통제",baseScore:gn("통제",65)},{id:"pyeonghaeng",name:"평행",baseScore:gn("평행",60)},{id:"hakseup_nonri",name:"학습",baseScore:gn("학습",75)},{id:"hoheup_nonri",name:"호흡",baseScore:gn("호흡",65)},{id:"hwasul",name:"화술",baseScore:gn("화술",70)}]},{id:"yesul",name:"예술",items:[{id:"sumyeon_yesul",name:"수면",baseScore:gn("수면",65)},{id:"joyeol_yesul",name:"조절",baseScore:gn("조절",68)},{id:"chungdong_yesul",name:"충동",baseScore:gn("충동",60)},{id:"geim",name:"게임",baseScore:gn("게임",70)},{id:"muyong",name:"무용",baseScore:gn("무용",65)},{id:"misul",name:"미술",baseScore:gn("미술",70)},{id:"banbok",name:"반복",baseScore:gn("반복",62)},{id:"byeonhwa",name:"변화",baseScore:gn("변화",75)},{id:"bijeon",name:"비젼",baseScore:gn("비젼",68)},{id:"sangsang",name:"상상",baseScore:gn("상상",75)},{id:"saeksang",name:"색상",baseScore:gn("색상",68)},{id:"saenggak",name:"생각",baseScore:gn("생각",72)},{id:"yeonye",name:"연예",baseScore:gn("연예",60)},{id:"yeoljeong",name:"열정",baseScore:gn("열정",75)},{id:"yuhok",name:"유혹",baseScore:gn("유혹",55)},{id:"eumak",name:"음악",baseScore:gn("음악",70)},{id:"jageuk",name:"자극",baseScore:gn("자극",65)},{id:"jeontal",name:"전달",baseScore:gn("전달",70)},{id:"jejak",name:"제작",baseScore:gn("제작",68)},{id:"jungdok",name:"중독",baseScore:gn("중독",50)},{id:"changjak",name:"창작",baseScore:gn("창작",75)},{id:"chegye",name:"체계",baseScore:gn("체계",65)},{id:"hyeongsang",name:"형상",baseScore:gn("형상",70)},{id:"hwaldong_yesul",name:"활동",baseScore:gn("활동",72)}]},{id:"hakseup",name:"학습",items:[{id:"nonri_hakseup",name:"논리",baseScore:gn("논리",75)},{id:"bunseok_hakseup",name:"분석",baseScore:gn("분석",72)},{id:"suri_hakseup",name:"수리",baseScore:gn("수리",70)},{id:"eoneo_hakseup",name:"언어",baseScore:gn("언어",75)},{id:"ihae_hakseup",name:"이해",baseScore:gn("이해",75)},{id:"jipjung_hakseup",name:"집중",baseScore:gn("집중",70)},{id:"changjak_hakseup",name:"창작",baseScore:gn("창작",68)},{id:"gyesan",name:"계산",baseScore:gn("계산",70)},{id:"dohyeong",name:"도형",baseScore:gn("도형",65)},{id:"mobang",name:"모방",baseScore:gn("모방",60)},{id:"munjang",name:"문장",baseScore:gn("문장",72)},{id:"bokseup",name:"복습",baseScore:gn("복습",70)},{id:"bunbae",name:"분배",baseScore:gn("분배",65)},{id:"seontaek",name:"선택",baseScore:gn("선택",68)},{id:"sigan",name:"시간",baseScore:gn("시간",65)},{id:"amgi",name:"암기",baseScore:gn("암기",68)},{id:"yeseup",name:"예습",baseScore:gn("예습",70)},{id:"yuchu",name:"유추",baseScore:gn("유추",72)},{id:"eungyong",name:"응용",baseScore:gn("응용",75)},{id:"jeongni",name:"정리",baseScore:gn("정리",68)},{id:"jiri",name:"지리",baseScore:gn("지리",60)},{id:"pandoan",name:"판단",baseScore:gn("판단",72)},{id:"puri",name:"풀이",baseScore:gn("풀이",70)},{id:"haeseok",name:"해석",baseScore:gn("해석",72)}]}]},{id:"jueop",name:"주업",icon:"💼",description:"능력, 성향, 업무, 업종, 직업 분석",subcategories:[{id:"neungryeok",name:"능력",items:[{id:"gaebalryeok",name:"개발력",baseScore:gn("개발력",70)},{id:"gaejoryeok",name:"개조력",baseScore:gn("개조력",65)},{id:"gamsuryeok",name:"감수력",baseScore:gn("감수력",60)},{id:"gyesanryeok",name:"계산력",baseScore:gn("계산력",70)},{id:"gwangyeryeok",name:"관계력",baseScore:gn("관계력",72)},{id:"gwanriryeok",name:"관리력",baseScore:gn("관리력",68)},{id:"gisulryeok",name:"기술력",baseScore:gn("기술력",70)},{id:"gieokryeok",name:"기억력",baseScore:gn("기억력",68)},{id:"gihoekryeok",name:"기획력",baseScore:gn("기획력",72)},{id:"nodongryeok",name:"노동력",baseScore:gn("노동력",65)},{id:"rideoryeok",name:"리더력",baseScore:gn("리더력",70)},{id:"munsoryeok",name:"문서력",baseScore:gn("문서력",65)},{id:"balpyoryeok",name:"발표력",baseScore:gn("발표력",68)},{id:"bunseokryeok",name:"분석력",baseScore:gn("분석력",75)},{id:"saengsanryeok",name:"생산력",baseScore:gn("생산력",68)},{id:"seolmyeongryeok",name:"설명력",baseScore:gn("설명력",70)},{id:"sujipryeok",name:"수집력",baseScore:gn("수집력",65)},{id:"sungryeonryeok",name:"숙련력",baseScore:gn("숙련력",72)},{id:"eohiryeok",name:"어휘력",baseScore:gn("어휘력",70)},{id:"yeongeopryeok",name:"영업력",baseScore:gn("영업력",68)},{id:"eungyongryeok",name:"응용력",baseScore:gn("응용력",72)},{id:"ihaeryeok",name:"이해력",baseScore:gn("이해력",75)},{id:"jeondalryeok",name:"전달력",baseScore:gn("전달력",70)},{id:"jejakkryeok",name:"제작력",baseScore:gn("제작력",68)},{id:"jidoryeok",name:"지도력",baseScore:gn("지도력",70)},{id:"jipjungryeok",name:"집중력",baseScore:gn("집중력",72)},{id:"changyiryeok",name:"창의력",baseScore:gn("창의력",75)},{id:"chaegimryeok",name:"책임력",baseScore:gn("책임력",70)},{id:"cheorryeok",name:"처리력",baseScore:gn("처리력",68)},{id:"chujiryeok",name:"추진력",baseScore:gn("추진력",70)},{id:"pandanryeok",name:"판단력",baseScore:gn("판단력",72)},{id:"panmaeryeok",name:"판매력",baseScore:gn("판매력",65)},{id:"pyeonjipryeok",name:"편집력",baseScore:gn("편집력",68)},{id:"pyohyeonryeok",name:"표현력",baseScore:gn("표현력",70)},{id:"haegeolryeok",name:"해결력",baseScore:gn("해결력",75)},{id:"hwahapryeok",name:"화합력",baseScore:gn("화합력",68)},{id:"hwaldongryeok",name:"활동력",baseScore:gn("활동력",72)}]},{id:"seonghyang_jueop",name:"성향",items:[{id:"gwangyeseong",name:"관계성",baseScore:gn("관계성",70)},{id:"gwanriseong",name:"관리성",baseScore:gn("관리성",68)},{id:"bunseokseong",name:"분석성",baseScore:gn("분석성",72)},{id:"sukjiseong",name:"숙지성",baseScore:gn("숙지성",65)},{id:"jeonmunseong",name:"전문성",baseScore:gn("전문성",75)},{id:"changyiseong",name:"창의성",baseScore:gn("창의성",70)},{id:"hwaldongseong",name:"활동성",baseScore:gn("활동성",68)}]},{id:"eommu",name:"업무",items:[{id:"gaebal",name:"개발",baseScore:gn("개발",70)},{id:"gyeongni",name:"경리",baseScore:gn("경리",65)},{id:"gumaae",name:"구매",baseScore:gn("구매",60)},{id:"nomu",name:"노무",baseScore:gn("노무",58)},{id:"boan",name:"보안",baseScore:gn("보안",68)},{id:"saengsan",name:"생산",baseScore:gn("생산",65)},{id:"segeum",name:"세금",baseScore:gn("세금",60)},{id:"sosong",name:"소송",baseScore:gn("소송",55)},{id:"yeongu",name:"연구",baseScore:gn("연구",75)},{id:"yeongop",name:"영업",baseScore:gn("영업",68)},{id:"unsong",name:"운송",baseScore:gn("운송",60)},{id:"unmyeong",name:"운명",baseScore:gn("운명",50)},{id:"jageum",name:"자금",baseScore:gn("자금",65)},{id:"junggae",name:"중계",baseScore:gn("중계",62)},{id:"chuljang",name:"출장",baseScore:gn("출장",60)},{id:"panmae",name:"판매",baseScore:gn("판매",65)},{id:"hyeonjang",name:"현장",baseScore:gn("현장",68)},{id:"hongbo",name:"홍보",baseScore:gn("홍보",70)},{id:"hoegye",name:"회계",baseScore:gn("회계",68)}]},{id:"eopjong",name:"업종",items:[{id:"gyeongyeong",name:"경영",baseScore:gn("경영",68)},{id:"gyoyuk_gita",name:"교육/기타",baseScore:gn("교육/기타",70)},{id:"dijain",name:"디자인",baseScore:gn("디자인",65)},{id:"maketing",name:"마케팅",baseScore:gn("마케팅",70)},{id:"seobiseu",name:"서비스",baseScore:gn("서비스",68)},{id:"yeonye_bangsong",name:"연예/방송",baseScore:gn("연예/방송",60)},{id:"yutong",name:"유통",baseScore:gn("유통",65)},{id:"jeonja_tongsin",name:"전자/통신",baseScore:gn("전자/통신",72)},{id:"jejjo",name:"제조",baseScore:gn("제조",68)}]},{id:"jigeop",name:"직업",items:[{id:"gongmuwon",name:"공무원",baseScore:gn("공무원",70)},{id:"gyosa",name:"교사",baseScore:gn("교사",72)},{id:"ganhoha",name:"간호사",baseScore:gn("간호사",68)},{id:"uisa",name:"의사",baseScore:gn("의사",75)},{id:"byeonsa",name:"변호사",baseScore:gn("변호사",70)},{id:"hoegesa",name:"회계사",baseScore:gn("회계사",68)},{id:"gisulga",name:"기술자",baseScore:gn("기술자",70)},{id:"yesulga",name:"예술가",baseScore:gn("예술가",65)},{id:"saeopga",name:"사업가",baseScore:gn("사업가",65)},{id:"yeongunja",name:"연구자",baseScore:gn("연구자",72)}]}]},{id:"jusaeng",name:"주생",icon:"🌱",description:"일상 생활 전반 분석",subcategories:[{id:"gajok_jusaeng",name:"가족",items:[{id:"gyeyak",name:"계약",baseScore:gn("계약",65)},{id:"gyoyuk",name:"교육",baseScore:gn("교육",70)},{id:"daehwa",name:"대화",baseScore:gn("대화",72)},{id:"moim",name:"모임",baseScore:gn("모임",68)},{id:"syoping",name:"쇼핑",baseScore:gn("쇼핑",65)},{id:"eonjaeng",name:"언쟁",baseScore:gn("언쟁",45)},{id:"yeohaeng",name:"여행",baseScore:gn("여행",70)},{id:"oesik",name:"외식",baseScore:gn("외식",68)},{id:"isa",name:"이사",baseScore:gn("이사",60)},{id:"jaesan",name:"재산",baseScore:gn("재산",65)},{id:"haengsa",name:"행사",baseScore:gn("행사",68)}]},{id:"geongang",name:"건강",items:[{id:"geongangsikpum_geongang",name:"건강식품",baseScore:gn("건강식품",70)},{id:"boyak_geongang",name:"보약",baseScore:gn("보약",62)},{id:"sangdam_geongang",name:"상담",baseScore:gn("상담",65)},{id:"sumyeon_geongang",name:"수면",baseScore:gn("수면",72)},{id:"undong_geongang",name:"운동",baseScore:gn("운동",75)},{id:"eumsik_geongang",name:"음식",baseScore:gn("음식",68)},{id:"geomsa",name:"검사",baseScore:gn("검사",60)},{id:"yeohaeng_geongang",name:"여행",baseScore:gn("여행",70)},{id:"masaji",name:"마사지",baseScore:gn("마사지",68)},{id:"myeongsang",name:"명상",baseScore:gn("명상",65)},{id:"biman_geongang",name:"비만",baseScore:gn("비만",50)},{id:"sauna",name:"사우나",baseScore:gn("사우나",62)},{id:"chimi",name:"취미",baseScore:gn("취미",70)},{id:"hyusik",name:"휴식",baseScore:gn("휴식",75)}]},{id:"gyeolhon",name:"결혼",items:[{id:"sago_gyeolhon",name:"사고",baseScore:gn("사고",40)},{id:"iseong_gyeolhon",name:"이성",baseScore:gn("이성",70)},{id:"sekseu_gyeolhon",name:"섹스",baseScore:gn("섹스",65)},{id:"saeop_gyeolhon",name:"사업",baseScore:gn("사업",62)},{id:"gyoyuk_gyeolhon",name:"교육",baseScore:gn("교육",68)},{id:"isa_gyeolhon",name:"이사",baseScore:gn("이사",60)},{id:"jaesan_gyeolhon",name:"재산",baseScore:gn("재산",65)},{id:"geongang_gyeolhon",name:"건강",baseScore:gn("건강",70)},{id:"bumo",name:"부모",baseScore:gn("부모",72)},{id:"bunjaeng",name:"분쟁",baseScore:gn("분쟁",45)},{id:"yusan",name:"유산",baseScore:gn("유산",60)},{id:"jasik",name:"자식",baseScore:gn("자식",75)},{id:"jonggyo",name:"종교",baseScore:gn("종교",55)},{id:"jigeop_gyeolhon",name:"직업",baseScore:gn("직업",68)}]},{id:"gyeyak_jusaeng",name:"계약",items:[{id:"daeyeo_gyeyak",name:"대여",baseScore:gn("대여",58)},{id:"dongsan_gyeyak",name:"동산",baseScore:gn("동산",60)},{id:"budongsan_gyeyak",name:"부동산",baseScore:gn("부동산",70)},{id:"saeop_gyeyak",name:"사업",baseScore:gn("사업",65)},{id:"jusik_gyeyak",name:"주식",baseScore:gn("주식",62)},{id:"chaegwon_gyeyak",name:"채권",baseScore:gn("채권",58)},{id:"peondeu_gyeyak",name:"펀드",baseScore:gn("펀드",55)},{id:"gumae",name:"구매",baseScore:gn("구매",65)},{id:"gongjeung",name:"공증",baseScore:gn("공증",60)},{id:"bojeung",name:"보증",baseScore:gn("보증",55)},{id:"bunsil",name:"분실",baseScore:gn("분실",40)},{id:"sinyong",name:"신용",baseScore:gn("신용",72)}]},{id:"byuti",name:"뷰티",items:[{id:"geongangsikpum_byuti",name:"건강식품",baseScore:gn("건강식품",65)},{id:"boyak_byuti",name:"보약",baseScore:gn("보약",60)},{id:"sangdam_byuti",name:"상담",baseScore:gn("상담",62)},{id:"chiryo_byuti",name:"치료",baseScore:gn("치료",68)},{id:"masaji_byuti",name:"마사지",baseScore:gn("마사지",70)},{id:"gyojeong",name:"교정",baseScore:gn("교정",65)},{id:"neilateu",name:"네일아트",baseScore:gn("네일아트",62)},{id:"seupa",name:"스파",baseScore:gn("스파",68)},{id:"anmyeon",name:"안면",baseScore:gn("안면",70)},{id:"oemo",name:"외모",baseScore:gn("외모",72)},{id:"heeo",name:"헤어",baseScore:gn("헤어",68)},{id:"hwajangpum",name:"화장품",baseScore:gn("화장품",65)}]},{id:"sago_jusaeng",name:"사고",items:[{id:"segeum_sago",name:"세금",baseScore:gn("세금",50)},{id:"sosong_sago",name:"소송",baseScore:gn("소송",45)},{id:"eonjaeng_sago",name:"언쟁",baseScore:gn("언쟁",48)},{id:"jaesan_sago",name:"재산",baseScore:gn("재산",55)},{id:"bunjaeng_sago",name:"분쟁",baseScore:gn("분쟁",45)},{id:"bunsil_sago",name:"분실",baseScore:gn("분실",40)},{id:"gyotong",name:"교통",baseScore:gn("교통",50)},{id:"dansok",name:"단속",baseScore:gn("단속",48)},{id:"donan",name:"도난",baseScore:gn("도난",35)},{id:"mangsin",name:"망신",baseScore:gn("망신",38)},{id:"sagi",name:"사기",baseScore:gn("사기",30)},{id:"wiban",name:"위반",baseScore:gn("위반",45)},{id:"wiheom",name:"위험",baseScore:gn("위험",40)},{id:"pokhaeng",name:"폭행",baseScore:gn("폭행",25)}]},{id:"saeop_jusaeng",name:"사업",items:[{id:"gwanri_saeop",name:"관리",baseScore:gn("관리",68)},{id:"jusik_saeop",name:"주식",baseScore:gn("주식",62)},{id:"tuja_saeop",name:"투자",baseScore:gn("투자",60)},{id:"gaebal_saeop",name:"개발",baseScore:gn("개발",70)},{id:"gumae_saeop",name:"구매",baseScore:gn("구매",65)},{id:"saengsan_saeop",name:"생산",baseScore:gn("생산",68)},{id:"sosong_saeop",name:"소송",baseScore:gn("소송",45)},{id:"yeongop_saeop",name:"영업",baseScore:gn("영업",70)},{id:"jageum_saeop",name:"자금",baseScore:gn("자금",65)},{id:"gyeyak_saeop",name:"계약",baseScore:gn("계약",68)},{id:"gihoek",name:"기획",baseScore:gn("기획",72)},{id:"dongeop",name:"동업",baseScore:gn("동업",60)}]},{id:"yeonae",name:"연애",items:[{id:"iseong_yeonae",name:"이성",baseScore:gn("이성",72)},{id:"keondisyeon_yeonae",name:"컨디션",baseScore:gn("컨디션",68)},{id:"sekseu_yeonae",name:"섹스",baseScore:gn("섹스",65)},{id:"eonjaeng_yeonae",name:"언쟁",baseScore:gn("언쟁",45)},{id:"yeohaeng_yeonae",name:"여행",baseScore:gn("여행",75)},{id:"chimi_yeonae",name:"취미",baseScore:gn("취미",70)},{id:"gamjeong",name:"감정",baseScore:gn("감정",72)},{id:"gwanram",name:"관람",baseScore:gn("관람",68)},{id:"simri",name:"심리",baseScore:gn("심리",65)},{id:"ibyeol",name:"이별",baseScore:gn("이별",40)},{id:"hogam",name:"호감",baseScore:gn("호감",75)}]},{id:"siheom",name:"시험",items:[{id:"sumyeon_siheom",name:"수면",baseScore:gn("수면",70)},{id:"keondisyeon_siheom",name:"컨디션",baseScore:gn("컨디션",72)},{id:"gieok_siheom",name:"기억",baseScore:gn("기억",68)},{id:"jipjung_siheom",name:"집중",baseScore:gn("집중",75)},{id:"bokseup_siheom",name:"복습",baseScore:gn("복습",70)},{id:"seontaek_siheom",name:"선택",baseScore:gn("선택",65)},{id:"yeseup_siheom",name:"예습",baseScore:gn("예습",68)},{id:"eungyong_siheom",name:"응용",baseScore:gn("응용",72)},{id:"puri_siheom",name:"풀이",baseScore:gn("풀이",70)},{id:"geongang_siheom",name:"건강",baseScore:gn("건강",68)},{id:"siheom_item",name:"시험",baseScore:gn("시험",65)},{id:"junbimul",name:"준비물",baseScore:gn("준비물",60)}]},{id:"undong_jusaeng",name:"운동",items:[{id:"gwanri_undong",name:"관리",baseScore:gn("관리",68)},{id:"gisul_undong",name:"기술",baseScore:gn("기술",70)},{id:"pyeonghaeng_undong",name:"평행",baseScore:gn("평행",65)},{id:"banbok_undong",name:"반복",baseScore:gn("반복",62)},{id:"gonggangam",name:"공간감",baseScore:gn("공간감",68)},{id:"gigu",name:"기구",baseScore:gn("기구",65)},{id:"giryeok",name:"기력",baseScore:gn("기력",70)},{id:"danche",name:"단체",baseScore:gn("단체",68)},{id:"jeongsinryeok",name:"정신력",baseScore:gn("정신력",72)},{id:"jiguryeok",name:"지구력",baseScore:gn("지구력",75)},{id:"hoejeon",name:"회전",baseScore:gn("회전",65)},{id:"heureum",name:"흐름",baseScore:gn("흐름",68)}]},{id:"idong",name:"이동",items:[{id:"iseong_idong",name:"이성",baseScore:gn("이성",65)},{id:"saeop_idong",name:"사업",baseScore:gn("사업",68)},{id:"gajok_idong",name:"가족",baseScore:gn("가족",70)},{id:"chingu_idong",name:"친구",baseScore:gn("친구",68)},{id:"chuljang_idong",name:"출장",baseScore:gn("출장",62)},{id:"yeohaeng_idong",name:"여행",baseScore:gn("여행",75)},{id:"isa_idong",name:"이사",baseScore:gn("이사",60)},{id:"haengsa_idong",name:"행사",baseScore:gn("행사",65)},{id:"gohyang",name:"고향",baseScore:gn("고향",68)},{id:"guknae",name:"국내",baseScore:gn("국내",70)},{id:"gugoe",name:"국외",baseScore:gn("국외",65)},{id:"seom",name:"섬",baseScore:gn("섬",60)},{id:"hageop_idong",name:"학업",baseScore:gn("학업",68)}]},{id:"ilsang",name:"일상",items:[{id:"sago_ilsang",name:"사고",baseScore:gn("사고",45)},{id:"undong_ilsang",name:"운동",baseScore:gn("운동",70)},{id:"saeop_ilsang",name:"사업",baseScore:gn("사업",65)},{id:"gajok_ilsang",name:"가족",baseScore:gn("가족",72)},{id:"isa_ilsang",name:"이사",baseScore:gn("이사",58)},{id:"geongang_ilsang",name:"건강",baseScore:gn("건강",70)},{id:"jonggyo_ilsang",name:"종교",baseScore:gn("종교",55)},{id:"hageop_ilsang",name:"학업",baseScore:gn("학업",68)},{id:"bongsa",name:"봉사",baseScore:gn("봉사",65)},{id:"yeonae_ilsang",name:"연애",baseScore:gn("연애",70)},{id:"jaemul_ilsang",name:"재물",baseScore:gn("재물",62)}]},{id:"jayeongeop",name:"자영업",items:[{id:"gwanri_jayeong",name:"관리",baseScore:gn("관리",68)},{id:"sangdam_jayeong",name:"상담",baseScore:gn("상담",65)},{id:"gumae_jayeong",name:"구매",baseScore:gn("구매",62)},{id:"segeum_jayeong",name:"세금",baseScore:gn("세금",55)},{id:"yeongop_jayeong",name:"영업",baseScore:gn("영업",70)},{id:"gyeyak_jayeong",name:"계약",baseScore:gn("계약",68)},{id:"dansok_jayeong",name:"단속",baseScore:gn("단속",50)},{id:"napum",name:"납품",baseScore:gn("납품",65)},{id:"yeyak",name:"예약",baseScore:gn("예약",62)},{id:"jaego",name:"재고",baseScore:gn("재고",60)},{id:"chaeyong",name:"채용",baseScore:gn("채용",65)},{id:"chinjeol",name:"친절",baseScore:gn("친절",72)}]},{id:"jaeneung",name:"재능",items:[{id:"undong_jaeneung",name:"운동",baseScore:gn("운동",68)},{id:"gisul_jaeneung",name:"기술",baseScore:gn("기술",70)},{id:"misul_jaeneung",name:"미술",baseScore:gn("미술",65)},{id:"eumak_jaeneung",name:"음악",baseScore:gn("음악",68)},{id:"jejak_jaeneung",name:"제작",baseScore:gn("제작",65)},{id:"gyesan_jaeneung",name:"계산",baseScore:gn("계산",70)},{id:"hageop_jaeneung",name:"학업",baseScore:gn("학업",72)},{id:"dokseo",name:"독서",baseScore:gn("독서",70)},{id:"deutgi",name:"듣기",baseScore:gn("듣기",68)},{id:"malhagi",name:"말하기",baseScore:gn("말하기",70)},{id:"sseugi",name:"쓰기",baseScore:gn("쓰기",68)},{id:"oegugeo",name:"외국어",baseScore:gn("외국어",65)}]},{id:"jeongchi",name:"정치",items:[{id:"jageum_jeongchi",name:"자금",baseScore:gn("자금",60)},{id:"gyeyak_jeongchi",name:"계약",baseScore:gn("계약",62)},{id:"moim_jeongchi",name:"모임",baseScore:gn("모임",65)},{id:"geongang_jeongchi",name:"건강",baseScore:gn("건강",68)},{id:"bunjaeng_jeongchi",name:"분쟁",baseScore:gn("분쟁",50)},{id:"gyeoljeong",name:"결정",baseScore:gn("결정",70)},{id:"gwonryeok",name:"권력",baseScore:gn("권력",65)},{id:"myeonggye",name:"명예",baseScore:gn("명예",68)},{id:"balpyo",name:"발표",baseScore:gn("발표",65)},{id:"jeongchaek",name:"정책",baseScore:gn("정책",70)},{id:"julma",name:"줄마",baseScore:gn("줄마",55)},{id:"huwon",name:"후원",baseScore:gn("후원",62)}]},{id:"jikjang",name:"직장",items:[{id:"keondisyeon_jikjang",name:"컨디션",baseScore:gn("컨디션",70)},{id:"tuja_jikjang",name:"투자",baseScore:gn("투자",60)},{id:"gaebal_jikjang",name:"개발",baseScore:gn("개발",72)},{id:"moim_jikjang",name:"모임",baseScore:gn("모임",65)},{id:"geongang_jikjang",name:"건강",baseScore:gn("건강",68)},{id:"hogam_jikjang",name:"호감",baseScore:gn("호감",70)},{id:"balpyo_jikjang",name:"발표",baseScore:gn("발표",65)},{id:"gyeoljae",name:"결재",baseScore:gn("결재",68)},{id:"bogoseo",name:"보고서",baseScore:gn("보고서",65)},{id:"siljeok",name:"실적",baseScore:gn("실적",70)},{id:"jeopdae",name:"접대",baseScore:gn("접대",62)},{id:"jingeup",name:"진급",baseScore:gn("진급",68)}]},{id:"chieop",name:"취업",items:[{id:"keondisyeon_chieop",name:"컨디션",baseScore:gn("컨디션",70)},{id:"gisul_chieop",name:"기술",baseScore:gn("기술",72)},{id:"gaebal_chieop",name:"개발",baseScore:gn("개발",70)},{id:"gyeyak_chieop",name:"계약",baseScore:gn("계약",65)},{id:"geongang_chieop",name:"건강",baseScore:gn("건강",68)},{id:"siheom_chieop",name:"시험",baseScore:gn("시험",70)},{id:"balpyo_chieop",name:"발표",baseScore:gn("발표",65)},{id:"geunsim",name:"근심",baseScore:gn("근심",50)},{id:"myeonjeop",name:"면접",baseScore:gn("면접",68)},{id:"jeongong",name:"전공",baseScore:gn("전공",72)},{id:"chucheon",name:"추천",baseScore:gn("추천",65)},{id:"chieop_item",name:"취업",baseScore:gn("취업",70)}]},{id:"chimi_jusaeng",name:"취미",items:[{id:"undong_chimi",name:"운동",baseScore:gn("운동",70)},{id:"eumsik_chimi",name:"음식",baseScore:gn("음식",68)},{id:"geim_chimi",name:"게임",baseScore:gn("게임",65)},{id:"misul_chimi",name:"미술",baseScore:gn("미술",65)},{id:"eumak_chimi",name:"음악",baseScore:gn("음악",70)},{id:"jejak_chimi",name:"제작",baseScore:gn("제작",62)},{id:"moim_chimi",name:"모임",baseScore:gn("모임",68)},{id:"syoping_chimi",name:"쇼핑",baseScore:gn("쇼핑",65)},{id:"yeohaeng_chimi",name:"여행",baseScore:gn("여행",75)},{id:"gwanram_chimi",name:"관람",baseScore:gn("관람",68)},{id:"bongsa_chimi",name:"봉사",baseScore:gn("봉사",62)},{id:"dokseo_chimi",name:"독서",baseScore:gn("독서",70)},{id:"gongye",name:"공예",baseScore:gn("공예",65)},{id:"daenseu",name:"댄스",baseScore:gn("댄스",68)}]},{id:"haksaeng",name:"학생",items:[{id:"iseong_haksaeng",name:"이성",baseScore:gn("이성",65)},{id:"gajok_haksaeng",name:"가족",baseScore:gn("가족",70)},{id:"seuseung",name:"스승",baseScore:gn("스승",72)},{id:"chingu_haksaeng",name:"친구",baseScore:gn("친구",68)},{id:"moim_haksaeng",name:"모임",baseScore:gn("모임",65)},{id:"geongang_haksaeng",name:"건강",baseScore:gn("건강",68)},{id:"oemo_haksaeng",name:"외모",baseScore:gn("외모",62)},{id:"siheom_haksaeng",name:"시험",baseScore:gn("시험",70)},{id:"ibyeol_haksaeng",name:"이별",baseScore:gn("이별",45)},{id:"hageop_haksaeng",name:"학업",baseScore:gn("학업",72)},{id:"balpyo_haksaeng",name:"발표",baseScore:gn("발표",65)},{id:"geunsim_haksaeng",name:"근심",baseScore:gn("근심",50)}]}]},{id:"juneung",name:"주능",icon:"⚡",description:"능력과 잠재력 분석",subcategories:[{id:"leadership",name:"리더십",items:[{id:"tongsolyeok",name:"통솔력",baseScore:gn("통솔력",72)},{id:"gyeoldan",name:"결단력",baseScore:gn("결단력",70)},{id:"chaekimgam",name:"책임감",baseScore:gn("책임감",75)},{id:"yeonghyangyeok",name:"영향력",baseScore:gn("영향력",68)},{id:"seondeuk",name:"선득력",baseScore:gn("선득력",65)}]},{id:"creativity",name:"창의력",items:[{id:"sangsangyeok",name:"상상력",baseScore:gn("상상력",70)},{id:"hyeoksin",name:"혁신성",baseScore:gn("혁신성",68)},{id:"yesulgam",name:"예술감",baseScore:gn("예술감",65)},{id:"dokchasung",name:"독창성",baseScore:gn("독창성",72)},{id:"munje_haegyeol",name:"문제해결",baseScore:gn("문제해결",75)}]},{id:"communication",name:"소통능력",items:[{id:"uisasotong",name:"의사소통",baseScore:gn("의사소통",70)},{id:"gyeongcheong",name:"경청",baseScore:gn("경청",72)},{id:"seoldeuk",name:"설득",baseScore:gn("설득",68)},{id:"gonggam",name:"공감",baseScore:gn("공감",75)},{id:"pyohyeon",name:"표현력",baseScore:gn("표현력",70)}]},{id:"learning",name:"학습능력",items:[{id:"ihae",name:"이해력",baseScore:gn("이해력",72)},{id:"giok",name:"기억력",baseScore:gn("기억력",70)},{id:"bunseok",name:"분석력",baseScore:gn("분석력",75)},{id:"jeongriryeok",name:"정리력",baseScore:gn("정리력",68)},{id:"jeokung",name:"적응력",baseScore:gn("적응력",70)}]},{id:"business",name:"사업능력",items:[{id:"gyeongyeong",name:"경영",baseScore:gn("경영",68)},{id:"jaemukanri",name:"재무관리",baseScore:gn("재무관리",70)},{id:"marketing",name:"마케팅",baseScore:gn("마케팅",65)},{id:"network",name:"네트워킹",baseScore:gn("네트워킹",72)},{id:"hyeopsang",name:"협상력",baseScore:gn("협상력",70)}]},{id:"expertise",name:"전문성",items:[{id:"gisul",name:"기술력",baseScore:gn("기술력",72)},{id:"jeonmunjisik",name:"전문지식",baseScore:gn("전문지식",75)},{id:"silmuneung",name:"실무능력",baseScore:gn("실무능력",70)},{id:"janyeomseong",name:"장인정신",baseScore:gn("장인정신",68)},{id:"baljeonyeok",name:"발전성",baseScore:gn("발전성",70)}]}]},{id:"juhyung",name:"주흉",icon:"⚠️",description:"위험과 주의사항 분석",subcategories:[{id:"health_risk",name:"건강주의",items:[{id:"jilbyeong",name:"질병",baseScore:gn("질병",35)},{id:"sangcheo",name:"상처",baseScore:gn("상처",40)},{id:"manse",name:"만성질환",baseScore:gn("만성질환",38)},{id:"stress",name:"스트레스",baseScore:gn("스트레스",45)},{id:"jeongsin_geongang",name:"정신건강",baseScore:gn("정신건강",42)}]},{id:"financial_risk",name:"재물주의",items:[{id:"jaemul_sonshil",name:"재물손실",baseScore:gn("재물손실",40)},{id:"sagijosa",name:"사기조심",baseScore:gn("사기조심",35)},{id:"tumanja",name:"투자주의",baseScore:gn("투자주의",38)},{id:"bojeung",name:"보증주의",baseScore:gn("보증주의",32)},{id:"daechul",name:"대출주의",baseScore:gn("대출주의",36)}]},{id:"relationship_risk",name:"관계주의",items:[{id:"bunjaeng",name:"분쟁",baseScore:gn("분쟁",38)},{id:"galdeung",name:"갈등",baseScore:gn("갈등",40)},{id:"ohaejosa",name:"오해조심",baseScore:gn("오해조심",42)},{id:"baesinjosa",name:"배신주의",baseScore:gn("배신주의",35)},{id:"ibyeol",name:"이별",baseScore:gn("이별",38)}]},{id:"accident_risk",name:"사고주의",items:[{id:"gyotong_sago",name:"교통사고",baseScore:gn("교통사고",36)},{id:"sanchae",name:"산업재해",baseScore:gn("산업재해",38)},{id:"hwajae",name:"화재",baseScore:gn("화재",34)},{id:"susang",name:"수상사고",baseScore:gn("수상사고",35)},{id:"nolakjosa",name:"낙상주의",baseScore:gn("낙상주의",40)}]},{id:"legal_risk",name:"법률주의",items:[{id:"sosong",name:"소송",baseScore:gn("소송",38)},{id:"gyeyakjosa",name:"계약주의",baseScore:gn("계약주의",42)},{id:"beobjeok_分쟁",name:"법적분쟁",baseScore:gn("법적분쟁",36)},{id:"semuwijosa",name:"세무주의",baseScore:gn("세무주의",40)},{id:"gyujejosa",name:"규제주의",baseScore:gn("규제주의",38)}]},{id:"career_risk",name:"사업주의",items:[{id:"silpae",name:"실패위험",baseScore:gn("실패위험",40)},{id:"dongeopjosa",name:"동업주의",baseScore:gn("동업주의",35)},{id:"hwakjang_josa",name:"확장주의",baseScore:gn("확장주의",38)},{id:"gyeoyeok_josa",name:"계역변경",baseScore:gn("계역변경",42)},{id:"gyeongjaeng",name:"경쟁압박",baseScore:gn("경쟁압박",40)}]}]}];function un({categories:e,selectedCategory:t,onCategoryChange:r}){return s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 xl:grid-cols-9 gap-4",children:e.map(e=>s.jsx("button",{onClick:()=>r(e.id),className:"p-4 rounded-xl border-2 transition-all duration-200 "+(t===e.id?"border-purple-500 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 shadow-lg":"border-gray-200 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10 bg-white dark:bg-gray-700"),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:e.icon}),s.jsx("h3",{className:"font-bold text-lg mb-1",children:e.name}),s.jsx("p",{className:"text-sm mt-1 "+(t===e.id?"text-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-400"),children:e.description})]})},e.id))})})}function pn({subcategories:e,selectedSubcategory:t,onSubcategoryChange:r}){return s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"flex overflow-x-auto gap-2 pb-2",children:e.map(e=>s.jsxs("button",{onClick:()=>r(e.id),className:"px-4 py-2 rounded-lg whitespace-nowrap transition-colors duration-200 font-medium "+(t===e.id?"bg-purple-500 text-white shadow-md":"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"),children:[e.name,s.jsxs("span",{className:"ml-2 text-xs opacity-75",children:["(",e.items.length,")"]})]},e.id))})})}const bn={DIMENSIONS:{height:"400px"},COLORS:{backgrounds:{base:"rgba(139, 92, 246, 0.1)",today:"rgba(239, 68, 68, 0.15)",month:"rgba(6, 182, 212, 0.15)",year:"rgba(245, 158, 11, 0.15)"},borders:{base:"#8b5cf6",today:"#ef4444",month:"#06b6d4",year:"#f59e0b"}},CHART_OPTIONS:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:13,weight:700},padding:16,boxWidth:12,usePointStyle:!0,color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#8b5cf6",borderWidth:2,cornerRadius:8,padding:14,displayColors:!0,titleFont:{size:14,weight:600},bodyFont:{size:13}}},scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:10,font:{size:12,weight:600},color:"#6b7280",backdropColor:"transparent",showLabelBackdrop:!1},grid:{color:"rgba(107, 114, 128, 0.4)",lineWidth:2},angleLines:{color:"rgba(107, 114, 128, 0.3)",lineWidth:2},pointLabels:{font:{size:13,weight:700},color:"#374151"}}},interaction:{intersect:!1},animation:{duration:1e3,easing:"easeInOutQuart"}},DARK_MODE_CHART_OPTIONS:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:13,weight:700},padding:16,boxWidth:12,usePointStyle:!0,color:"#f1f5f9"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#a78bfa",borderWidth:2,cornerRadius:8,padding:14,displayColors:!0,titleFont:{size:14,weight:600},bodyFont:{size:13}}},scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:10,font:{size:12,weight:600},color:"#cbd5e1",backdropColor:"transparent",showLabelBackdrop:!1},grid:{color:"rgba(156, 163, 175, 0.5)",lineWidth:2},angleLines:{color:"rgba(156, 163, 175, 0.4)",lineWidth:2},pointLabels:{font:{size:13,weight:700},color:"#f1f5f9"}}},interaction:{intersect:!1},animation:{duration:1e3,easing:"easeInOutQuart"}},BUTTON_STYLES:{timeFrame:{base:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",active:{base:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",today:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",month:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",year:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300"},inactive:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}},LAYOUT:{timeFrameSelector:{container:"flex flex-wrap justify-center gap-3 mb-6"},chartContainer:{wrapper:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6"}}},yn=e=>{const t=bn.COLORS;switch(e){case"today":return{background:t.backgrounds.today,border:t.borders.today};case"month":return{background:t.backgrounds.month,border:t.borders.month};case"year":return{background:t.backgrounds.year,border:t.borders.year};default:return{background:t.backgrounds.base,border:t.borders.base}}};Le.register(We,He,Ye,Ue,Oe,Ke,Be,Ie,ze);const jn=({data:e,birthDate:t,sajuData:r})=>{const[n,i]=a.useState(!1),[l,d]=a.useState("base");a.useEffect(()=>{const e=()=>{i(document.documentElement.classList.contains("dark"))};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);const o=(e,t=1,r,a=85)=>{const s=.8*e*t+(Math.random()-.5)*r;return Math.max(20,Math.min(a,Math.round(s)))},x=a.useMemo(()=>{if(t)try{const e=t.match(/(\d{4})/);return e?parseInt(e[1],10):void 0}catch{return}},[t]),g=a.useMemo(()=>{const t={};var a,s,n,i,l,d,c,m,g;return(a=r)&&(null==(s=a.year)?void 0:s.gan)&&(null==(n=a.year)?void 0:n.ji)&&(null==(i=a.month)?void 0:i.gan)&&(null==(l=a.month)?void 0:l.ji)&&(null==(d=a.day)?void 0:d.gan)&&(null==(c=a.day)?void 0:c.ji)&&(null==(m=a.time)?void 0:m.gan)&&(null==(g=a.time)?void 0:g.ji)&&a.ohHaengBalance?(t.base=e.items.map(e=>{try{return Ys(e.name,r,"base",0,x)}catch(t){return e.baseScore}}),t.today=e.items.map(e=>{try{return Ys(e.name,r,"today",0,x)}catch(t){return o(e.baseScore,1,25)}}),t.month=e.items.map(e=>{try{return Ys(e.name,r,"month",0,x)}catch(t){return o(e.baseScore,1,18)}}),t.year=e.items.map(e=>{try{return Ys(e.name,r,"year",0,x)}catch(t){return o(e.baseScore,1,12)}})):(t.base=e.items.map(e=>e.baseScore),t.today=e.items.map(e=>o(e.baseScore,1,25)),t.month=e.items.map(e=>o(e.baseScore,1,18)),t.year=e.items.map(e=>o(e.baseScore,1,12))),t},[e.items,r,x]),h=a.useMemo(()=>{const t=[],r=g.base||e.items.map(e=>e.baseScore);if(t.push({label:"나의 기본 사주",values:r,timeFrame:"base"}),"base"!==l&&g[l]){const e={today:"오늘의 운세",month:"이번달 운세",year:"올해 운세"};t.push({label:e[l]||l,values:g[l],timeFrame:l})}return t},[g,l,e.items]),u=g.base||e.items.map(e=>e.baseScore),p=Math.max(...u),b=u.map((e,t)=>e===p?t:-1).filter(e=>-1!==e),y=a.useMemo(()=>{const t=e.items.map(e=>e.name);return Ds.createStandardRadarConfig(t,h,n,!0)},[e.items,h,n]),j=y.data,f=a.useMemo(()=>{var e,t,r,a,s,i;const d=y.options,o=((e,t)=>{const r=e?bn.DARK_MODE_CHART_OPTIONS:bn.CHART_OPTIONS;return t?{...r,...t,plugins:{...r.plugins,...t.plugins},scales:{...r.scales,...t.scales}}:r})(n,{plugins:{legend:{display:"base"!==l},tooltip:{callbacks:{label:e=>`${e.dataset.label}: ${e.parsed.r}점`}}}}),c=[];c.push(...g.base||[]),"base"!==l&&g[l]&&c.push(...g[l]||[]);const m=Math.max(...c,50),x=10*Math.ceil(m/10)+10;return{...d,...o,plugins:{...null==d?void 0:d.plugins,...o.plugins,legend:{...null==(e=null==d?void 0:d.plugins)?void 0:e.legend,...null==(t=o.plugins)?void 0:t.legend},tooltip:{...null==(r=null==d?void 0:d.plugins)?void 0:r.tooltip,...null==(a=o.plugins)?void 0:a.tooltip}},scales:{...null==d?void 0:d.scales,...o.scales,r:{...null==(s=null==d?void 0:d.scales)?void 0:s.r,...null==(i=o.scales)?void 0:i.r,max:x}}}},[y,n,l,g]),v=(u.reduce((e,t)=>e+t,0)/e.items.length).toFixed(1),k={labels:e.items.map(e=>e.name),datasets:[{label:"나의 기본 사주",data:u,backgroundColor:u.map((e,t)=>b.includes(t)?Ds.COLOR_PALETTE.accent:yn("base").background),borderColor:u.map((e,t)=>b.includes(t)?Ds.COLOR_PALETTE.accent:yn("base").border),borderWidth:2,borderRadius:8,borderSkipped:!1}]},N={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:n?"#374151":"#f3f4f6",titleColor:n?"#ffffff":"#000000",bodyColor:n?"#ffffff":"#000000",borderColor:n?"#6b7280":"#d1d5db",borderWidth:1,callbacks:{label:e=>`${e.dataset.label}: ${e.parsed.y}점`}}},scales:{x:{grid:{display:!1},ticks:{color:n?"#9ca3af":"#6b7280"}},y:{beginAtZero:!0,max:100,grid:{color:n?"#374151":"#e5e7eb"},ticks:{color:n?"#9ca3af":"#6b7280"}}}},w=e.items.length<=2;return s.jsxs("div",{className:bn.LAYOUT.chartContainer.wrapper,children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:["🔮 ",e.title," 상세 분석"]}),t&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["출생정보: ",t]}),w&&s.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"💡 항목이 적어 막대 차트로 표시됩니다"})]}),s.jsx("div",{className:"mb-6",style:{height:bn.DIMENSIONS.height},children:w?s.jsx(c,{data:k,options:N}):s.jsx(m,{data:j,options:f})}),s.jsx("div",{className:`${bn.LAYOUT.timeFrameSelector.container} mb-6`,children:[{key:"base",label:"기본",active:"base"},{key:"today",label:"오늘",active:"today"},{key:"month",label:"이달",active:"month"},{key:"year",label:"올해",active:"year"}].map(({key:e,label:t,active:r})=>s.jsx("button",{onClick:()=>d(e),className:`${bn.BUTTON_STYLES.timeFrame.base} ${l===e?bn.BUTTON_STYLES.timeFrame.active[e]:bn.BUTTON_STYLES.timeFrame.inactive}`,children:t},e))}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-xl p-6 text-center",children:[s.jsxs("h3",{className:"text-xl font-semibold mb-3",children:["🔮 ",e.title," 종합 분석"]}),s.jsx("div",{className:"text-lg",children:Number(v)>=80?"✨ 매우 우수한 사주":Number(v)>=60?"🌟 양호한 사주":Number(v)>=40?"⭐ 평범한 사주":"💪 노력이 필요한 사주"}),s.jsx("div",{className:"text-sm mt-2 opacity-90",children:"각 영역별 균형과 최고점을 차트에서 확인하세요"})]})]})};function fn({isOpen:e,onClose:t,onCustomerAdded:r}){const[n,i]=a.useState({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""}),[l,d]=a.useState({}),[o,c]=a.useState(!1),[m,x]=a.useState(null),g=a.useCallback(()=>{o||(h(),t())},[o,t]);a.useEffect(()=>{e&&h()},[e]),a.useEffect(()=>{const t=t=>{"Escape"===t.key&&e&&g()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,g]);const h=()=>{i({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""}),d({}),x(null)},u=(e,t)=>{"phone"===e&&(t=(e=>{const t=e.replace(/[^\d]/g,"");return t.length<=3?t:t.length<=7?`${t.slice(0,3)}-${t.slice(3)}`:`${t.slice(0,3)}-${t.slice(3,7)}-${t.slice(7,11)}`})(t)),i(r=>({...r,[e]:t})),l[e]&&d(t=>({...t,[e]:void 0})),m&&x(null)};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&g()},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-100",children:[s.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 px-6 py-4 border-b border-gray-200 dark:border-gray-700 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"👤"}),"새 고객 등록"]}),s.jsx("button",{onClick:g,disabled:o,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50","aria-label":"모달 닫기",children:s.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(n.name.trim()?n.name.length<2&&(e.name="이름은 2자 이상 입력해주세요"):e.name="이름을 입력해주세요",n.birth_date){const t=new Date(n.birth_date),r=new Date,a=new Date(1900,0,1);t>r?e.birth_date="미래 날짜는 선택할 수 없습니다":t<a&&(e.birth_date="1900년 이후 날짜를 선택해주세요")}else e.birth_date="생년월일을 선택해주세요";n.birth_time||(e.birth_time="생시를 선택해주세요"),n.phone.trim()?/^010-\d{4}-\d{4}$/.test(n.phone)||(e.phone="올바른 전화번호 형식이 아닙니다 (예: 010-1234-5678)"):e.phone="전화번호를 입력해주세요";return d(e),0===Object.keys(e).length})()){c(!0),x(null);try{const e={name:n.name.trim(),birth_date:n.birth_date,birth_time:n.birth_time,phone:n.phone,lunar_solar:n.lunar_solar,gender:n.gender,memo:n.memo.trim()},t=await Ha(e);x({type:"success",text:"고객이 성공적으로 등록되었습니다!"}),setTimeout(()=>{r(t.data),g()},500)}catch(t){x({type:"error",text:t instanceof Error?t.message:"고객 등록 중 오류가 발생했습니다"})}finally{c(!1)}}},className:"p-6",children:[s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"text-red-500",children:"*"})," 이름"]}),s.jsx("input",{type:"text",value:n.name,onChange:e=>u("name",e.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors\n                  ${l.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}\n                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,placeholder:"고객 이름을 입력하세요",disabled:o,autoComplete:"name"}),l.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:l.name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"text-red-500",children:"*"})," 생년월일"]}),s.jsx("input",{type:"date",value:n.birth_date,onChange:e=>u("birth_date",e.target.value),max:(new Date).toISOString().split("T")[0],min:"1900-01-01",className:`w-full px-4 py-3 border rounded-xl transition-colors\n                  ${l.birth_date?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}\n                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,disabled:o}),l.birth_date&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:l.birth_date})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"text-red-500",children:"*"})," 생시 (24시간 형식)"]}),s.jsx("input",{type:"time",value:n.birth_time,onChange:e=>u("birth_time",e.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors\n                  ${l.birth_time?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}\n                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,disabled:o}),l.birth_time&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:l.birth_time})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"text-red-500",children:"*"})," 전화번호"]}),s.jsx("input",{type:"tel",value:n.phone,onChange:e=>u("phone",e.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors\n                  ${l.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}\n                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,placeholder:"010-1234-5678",disabled:o,autoComplete:"tel"}),l.phone&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:l.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-3 text-gray-700 dark:text-gray-300",children:"음력/양력"}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",value:"solar",checked:"solar"===n.lunar_solar,onChange:()=>u("lunar_solar","solar"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:o}),s.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"🌞 양력"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",value:"lunar",checked:"lunar"===n.lunar_solar,onChange:()=>u("lunar_solar","lunar"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:o}),s.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"🌙 음력"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-3 text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"text-red-500",children:"*"})," 성별"]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",value:"male",checked:"male"===n.gender,onChange:()=>u("gender","male"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:o}),s.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"👨 남성"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",value:"female",checked:"female"===n.gender,onChange:()=>u("gender","female"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:o}),s.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"👩 여성"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"메모"}),s.jsx("textarea",{value:n.memo,onChange:e=>u("memo",e.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl\n                         dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none",placeholder:"고객에 대한 추가 정보를 입력하세요 (선택사항)",disabled:o})]}),m&&s.jsx("div",{className:"p-4 rounded-xl text-sm font-medium "+("success"===m.type?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"),children:s.jsxs("div",{className:"flex items-center gap-2",children:["success"===m.type?s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),m.text]})})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:g,disabled:o,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300\n                       rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"취소"}),s.jsx("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl\n                       hover:from-blue-700 hover:to-blue-800 transition-all duration-200\n                       disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium",children:o?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})}),"등록 중..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"등록하기"]})})]})]})]})}):null}function vn({onSelect:e,selectedCustomer:t,showAddButton:r=!0}){n();const[i,l]=a.useState([]),[d,o]=a.useState(!1),[c,m]=a.useState(""),[x,g]=a.useState(!1),[h,u]=a.useState(!1),p=a.useCallback(async()=>{try{g(!0);const e=await Wa(1,100,c);l(e.data)}catch(e){}finally{g(!1)}},[c]);a.useEffect(()=>{p()},[p]);return!x&&i.length,s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"고객 선택:"}),t?s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[s.jsxs("span",{className:"text-blue-700 dark:text-blue-300",children:["👤 ",t.name," (",t.birth_date,")"]}),s.jsx("button",{onClick:()=>{e(null),m("")},className:"text-red-500 hover:text-red-700",children:"✕"})]}):s.jsx("button",{onClick:()=>o(!d),className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 \n                     rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"👤 고객 선택하기"})]}),d&&s.jsxs("div",{className:"absolute top-full mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-xl \n                      border border-gray-200 dark:border-gray-700 z-50",children:[s.jsxs("div",{className:"p-4 space-y-3",children:[r&&s.jsx("button",{onClick:()=>{u(!0),o(!1)},className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg\n                         flex items-center justify-center gap-2 transition-colors",children:"➕ 새 고객 등록"}),r&&s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600"}),s.jsx("input",{type:"text",placeholder:"이름 또는 전화번호로 검색...",value:c,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg\n                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white",autoFocus:!0})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:x?s.jsx("div",{className:"p-4 text-center text-gray-500",children:"로딩 중..."}):0===i.length?s.jsxs("div",{className:"p-6 text-center space-y-4",children:[s.jsx("div",{className:"text-4xl",children:"🔮"}),s.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("p",{className:"font-medium mb-2",children:"등록된 고객이 없습니다"}),s.jsxs("p",{className:"text-sm",children:['위의 "새 고객 등록" 버튼을 클릭하여',s.jsx("br",{}),"첫 고객을 등록해보세요"]})]})]}):s.jsx("div",{className:"divide-y dark:divide-gray-700",children:i.map(t=>s.jsx("button",{onClick:()=>(t=>{e(t),o(!1),m("")})(t),className:"w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700\n                             transition-colors text-left",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.birth_date," ",t.birth_time," ·","lunar"===t.lunar_solar?"음력":"양력"," ·","male"===t.gender?"남":"여"]})]}),s.jsx("div",{className:"text-sm text-gray-400",children:t.phone})]})},t.id))})}),s.jsx("div",{className:"p-2 border-t dark:border-gray-700",children:s.jsx("button",{onClick:()=>o(!1),className:"w-full px-3 py-2 text-gray-600 dark:text-gray-400 \n                       hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"닫기"})})]}),s.jsx(fn,{isOpen:h,onClose:()=>u(!1),onCustomerAdded:t=>{p(),e(t),u(!1)}})]})}const kn=({customer:e,lifetimeFortune:t,loading:r=!1,error:a=null,onLoadChart:n,onScrollToChart:i})=>{var l,d;const o=(c=e)?"name"in c?c.name:"사용자":"미선택";var c;const m=function(e){if(!e)return"";if("birth_date"in e){const t=new Date(e.birth_date),r="lunar"===e.lunar_solar?"(음력)":"";return`${t.getFullYear()}년 ${t.getMonth()+1}월 ${t.getDate()}일 ${e.birth_time} ${r}`}if("birthInfo"in e){const t=e.birthInfo,r=t.isLunar?"(음력)":"";return`${t.year}년 ${t.month}월 ${t.day}일 ${t.hour}시 ${r}`}return""}(e),x=!!t,g=()=>{x&&i?i():!r&&n&&n()};if(!e)return s.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 text-center",children:s.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[s.jsx("span",{className:"text-2xl mb-2 block",children:"📊"}),s.jsx("p",{className:"text-lg font-medium",children:"100년 인생운세 차트"}),s.jsx("p",{className:"text-sm mt-2",children:"고객을 선택하면 인생운세 차트를 확인할 수 있습니다"})]})});if(r)return s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl p-6 text-white shadow-lg animate-pulse",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"animate-spin text-2xl",children:"⭐"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-lg font-bold",children:[o,"님의 100년 운세를 계산하고 있습니다..."]}),s.jsx("p",{className:"text-sm opacity-90 mt-1",children:m})]})]})}),s.jsx("div",{className:"text-white/60",children:s.jsxs("svg",{className:"animate-spin h-8 w-8",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})})]})});if(a)return s.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all",onClick:g,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"❌"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-bold",children:"차트 로드 실패"}),s.jsx("p",{className:"text-sm opacity-90 mt-1",children:a}),s.jsx("p",{className:"text-xs opacity-75 mt-2",children:"클릭하여 다시 시도"})]})]})}),s.jsx("div",{className:"text-white/60",children:s.jsx("svg",{className:"h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})});if(x){const e=null==(l=null==t?void 0:t.data)?void 0:l.analysis,r=null==(d=null==t?void 0:t.data)?void 0:d.lifetimeFortune;let a={age:0,score:0},n=0;if(e){const e=t.data.analysis;a=e.bestYear,n=e.averageScore}else if(r){const e=t.data.lifetimeFortune;if(e&&e.length>0){const t=e.reduce((e,t)=>t.totalScore>e.totalScore?t:e,e[0]);a={age:t.age,score:t.totalScore};n=e.reduce((e,t)=>e+t.totalScore,0)/e.length}}return s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all transform hover:scale-[1.02]",onClick:g,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-3xl",children:"📈"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xl font-bold",children:[o,"님의 100년 인생운세 차트"]}),s.jsx("p",{className:"text-sm opacity-90 mt-1",children:m}),s.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[s.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded",children:["최고운세: ",a.age,"세 (",a.score,"점)"]}),s.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded",children:["평균: ",n.toFixed(1),"점"]})]})]})]})}),s.jsx("div",{className:"text-white",children:s.jsx("svg",{className:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),s.jsx("div",{className:"mt-3 text-center",children:s.jsx("p",{className:"text-sm opacity-75",children:"클릭하여 상세 차트 보기 ↓"})})]})}return s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all transform hover:scale-[1.02]",onClick:g,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-3xl",children:"🔮"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xl font-bold",children:[o,"님의 100년 인생운세 차트"]}),s.jsx("p",{className:"text-sm opacity-90 mt-1",children:m}),s.jsx("p",{className:"text-xs opacity-75 mt-2",children:"클릭하여 운세 차트 확인하기"})]})]})}),s.jsx("div",{className:"text-white",children:s.jsx("svg",{className:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})})};function Nn({data:e,currentAge:t=0,birthYear:r}){const n=(new Date).getFullYear(),i=r||(t>0?n-t+1:n-35),l=a.useMemo(()=>({labels:e.map(e=>`${i+e.age-1}년`),datasets:[{type:"bar",label:"종합 운세",data:e.map(e=>e.totalScore),backgroundColor:r=>{var a;const s=r.dataIndex;return(null==(a=e[s])?void 0:a.age)===t?"rgba(55, 65, 81, 0.8)":"rgba(156, 163, 175, 0.6)"},borderColor:r=>{var a;const s=r.dataIndex;return(null==(a=e[s])?void 0:a.age)===t?"rgba(55, 65, 81, 1)":"rgba(107, 114, 128, 1)"},borderWidth:1,yAxisID:"y",order:2},{type:"line",label:"행운 (재물·명예)",data:e.map(e=>e.fortune),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"의지 (추진력·실행)",data:e.map(e=>e.willpower),borderColor:"#f97316",backgroundColor:"rgba(249, 115, 22, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"환경 (대인·지원)",data:e.map(e=>e.environment),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"변화 (기회·위기)",data:e.map(e=>e.change),borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1}]}),[e,i,t]),d=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"100년 인생운세 차트",font:{size:18,weight:"bold"},padding:20},legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}},title:{padding:{top:35,bottom:10}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,padding:12,displayColors:!0,position:"nearest",yAlign:"bottom",callbacks:{title:t=>{const r=t[0].dataIndex,a=e[r];return`${i+a.age-1}년 (${a.age}세)`},afterLabel:t=>{const r=t.dataIndex,a=e[r];return"종합 운세"===t.dataset.label?[`대운: ${a.대운.천간}${a.대운.지지} (${a.대운.오행})`,`세운: ${a.세운.천간}${a.세운.지지} (${a.세운.오행})`]:[]}},external(e){const{chart:t,tooltip:r}=e,a=t.canvas;if(!r||!r.opacity)return;let s=a.parentNode.querySelector("div.chartjs-tooltip");if(s||(s=document.createElement("div"),s.className="chartjs-tooltip",s.style.cssText="\n              position: absolute;\n              background: rgba(0, 0, 0, 0.9);\n              color: white;\n              padding: 12px 16px;\n              border-radius: 8px;\n              font-size: 13px;\n              pointer-events: none;\n              transition: all 0.1s ease;\n              z-index: 1000;\n              min-width: 200px;\n              border: 1px solid rgba(255, 255, 255, 0.2);\n              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            ",a.parentNode.appendChild(s)),r.body){const e=r.title||[],t=r.body.map(e=>e.lines);let a='<div style="font-weight: bold; margin-bottom: 8px; font-size: 14px;">';e.forEach(e=>{a+=e}),a+="</div>",t.forEach((e,t)=>{const s=r.labelColors[t];if(s){const t=`background:${s.backgroundColor}; width: 12px; height: 12px; display: inline-block; margin-right: 8px; border-radius: 2px;`;a+=`<div style="margin: 4px 0;"><span style="${t}"></span>${e}</div>`}else a+=`<div style="margin: 4px 0; color: #cbd5e1; font-size: 12px;">${e}</div>`}),s.innerHTML=a}const n=t.canvas.getBoundingClientRect(),i=t.chartArea,l=s.offsetHeight;let d=n.left+window.pageXOffset+r.caretX;const o=s.offsetWidth;d+o>window.innerWidth&&(d=window.innerWidth-o-10);const c=i.bottom,m=n.height-c,x=n.top+window.pageYOffset+c+(m-l)/2;s.style.left=`${d}px`,s.style.top=`${x}px`,s.style.opacity="1"}}},scales:{x:{display:!0,title:{display:!0,text:"연도",font:{size:14}},ticks:{callback(t,r){var a;if(r%10==0){return`${i+(null==(a=e[r])?void 0:a.age)-1}년`}return""},font:{size:11}}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"운세 점수",font:{size:14}},min:0,max:100,ticks:{stepSize:20,font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.1)"}}}}),[e,i]),o=a.useMemo(()=>({id:"currentAgeIndicator",afterDraw:r=>{var a;if(!t||t<=0)return;const s=r.ctx,i=r.chartArea,l=r.getDatasetMeta(0),d=e.findIndex(e=>e.age===t);if(-1===d)return;const o=null==(a=l.data[d])?void 0:a.x;if(!o)return;s.save(),s.strokeStyle="#ef4444",s.lineWidth=3,s.setLineDash([5,5]),s.beginPath(),s.moveTo(o,i.top),s.lineTo(o,i.bottom),s.stroke(),s.fillStyle="#ef4444",s.font="bold 12px sans-serif",s.textAlign="center";const c=n;s.fillText(`현재 ${c}년 (${t}세)`,o,i.top-40),s.restore()}}),[t,e,i]);return s.jsx("div",{className:"w-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"100년 인생운세 차트"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전통 사주학의 대운(大運)과 세운(歲運)을 기반으로 한 100년간의 인생 운세를 시각화합니다."})]}),s.jsxs("div",{className:"mb-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"행운: 재물·명예·성공"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"의지: 추진력·실행력"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"환경: 대인관계·지원"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"변화: 기회·위기·변동"})]})]}),s.jsx("div",{className:"relative h-96 md:h-[500px] pt-8 pb-24",children:s.jsx(x,{type:"bar",data:l,options:d,plugins:[o]})}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"인생 주요 전환점"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"20-30세:"})," 기반 구축기"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"40-50세:"})," 성취 발전기"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"60-70세:"})," 완성 안정기"]})]})]})]})})}Le.register(Be,Ie,ze,Ye,He,qe,Oe,Ke);const wn=[{id:"skeletal",name:"골격계",nameEn:"Skeletal System",description:"뼈, 관절, 인대 등 신체의 구조와 지지 시스템",primaryElement:"금",secondaryElement:"토",relatedOrgans:["뼈","관절","인대","치아","척추"],ageFactors:[{ageRange:"0-20",factor:1.2,concerns:["성장 발육"]},{ageRange:"21-40",factor:1,concerns:["자세 교정"]},{ageRange:"41-60",factor:.9,concerns:["골다공증","관절염"]},{ageRange:"61+",factor:.7,concerns:["골절 위험","퇴행성 관절염"]}],keywords:["뼈 건강","관절 통증","척추","골밀도","자세"]},{id:"muscular",name:"근육계",nameEn:"Muscular System",description:"근육, 힘줄 등 신체 운동과 힘을 담당하는 시스템",primaryElement:"목",secondaryElement:"화",relatedOrgans:["골격근","평활근","심근","힘줄"],ageFactors:[{ageRange:"0-20",factor:1.1,concerns:["근육 발달"]},{ageRange:"21-40",factor:1.3,concerns:["근력 강화"]},{ageRange:"41-60",factor:1,concerns:["근육 손실 예방"]},{ageRange:"61+",factor:.8,concerns:["근감소증","유연성 저하"]}],keywords:["근력","체력","운동","피로","근육통"]},{id:"circulatory",name:"순환계",nameEn:"Circulatory System",description:"심장, 혈관 등 혈액 순환과 영양 공급 시스템",primaryElement:"화",secondaryElement:"목",relatedOrgans:["심장","동맥","정맥","모세혈관","혈액"],ageFactors:[{ageRange:"0-20",factor:1.2,concerns:["선천성 심장 질환"]},{ageRange:"21-40",factor:1,concerns:["고혈압 예방"]},{ageRange:"41-60",factor:.8,concerns:["심혈관 질환","고지혈증"]},{ageRange:"61+",factor:.6,concerns:["동맥경화","심부전"]}],keywords:["심장","혈압","혈액순환","부정맥","심혈관"]},{id:"respiratory",name:"호흡계",nameEn:"Respiratory System",description:"폐, 기관지 등 호흡과 산소 교환 시스템",primaryElement:"금",secondaryElement:"수",relatedOrgans:["폐","기관지","기도","횡격막","흉곽"],ageFactors:[{ageRange:"0-20",factor:1.1,concerns:["천식","알레르기"]},{ageRange:"21-40",factor:1,concerns:["호흡기 감염"]},{ageRange:"41-60",factor:.9,concerns:["만성 기관지염","폐 기능 저하"]},{ageRange:"61+",factor:.7,concerns:["폐렴","COPD"]}],keywords:["폐","호흡","기관지","산소","천식"]},{id:"digestive",name:"소화계",nameEn:"Digestive System",description:"위장, 간 등 음식물 소화와 영양 흡수 시스템",primaryElement:"토",secondaryElement:"금",relatedOrgans:["위","장","간","담낭","췌장"],ageFactors:[{ageRange:"0-20",factor:1,concerns:["성장기 영양"]},{ageRange:"21-40",factor:1.1,concerns:["위염","과민성 장 증후군"]},{ageRange:"41-60",factor:.9,concerns:["역류성 식도염","간 기능"]},{ageRange:"61+",factor:.8,concerns:["소화 흡수 저하","변비"]}],keywords:["소화","위장","간","식욕","복통"]},{id:"nervous",name:"신경계",nameEn:"Nervous System",description:"뇌, 척수, 신경 등 감각과 운동을 조절하는 시스템",primaryElement:"수",secondaryElement:"목",relatedOrgans:["뇌","척수","말초신경","자율신경"],ageFactors:[{ageRange:"0-20",factor:1.3,concerns:["뇌 발달"]},{ageRange:"21-40",factor:1.1,concerns:["스트레스 관리"]},{ageRange:"41-60",factor:.9,concerns:["기억력 저하","수면 장애"]},{ageRange:"61+",factor:.7,concerns:["치매","파킨슨병"]}],keywords:["뇌","신경","집중력","기억력","두통"]},{id:"endocrine",name:"내분비계",nameEn:"Endocrine System",description:"호르몬 분비와 조절을 담당하는 시스템",primaryElement:"수",secondaryElement:"화",relatedOrgans:["갑상선","부신","뇌하수체","송과체"],ageFactors:[{ageRange:"0-20",factor:1.2,concerns:["성장 호르몬"]},{ageRange:"21-40",factor:1,concerns:["갑상선 기능"]},{ageRange:"41-60",factor:.9,concerns:["폐경기","호르몬 불균형"]},{ageRange:"61+",factor:.8,concerns:["호르몬 저하","당뇨"]}],keywords:["호르몬","갑상선","대사","피로","체중"]},{id:"excretory",name:"분비계",nameEn:"Excretory System",description:"신장, 방광 등 노폐물 배출 시스템",primaryElement:"수",secondaryElement:"토",relatedOrgans:["신장","방광","요관","요도"],ageFactors:[{ageRange:"0-20",factor:1,concerns:["요로 감염"]},{ageRange:"21-40",factor:1,concerns:["신장 기능"]},{ageRange:"41-60",factor:.9,concerns:["전립선","요실금"]},{ageRange:"61+",factor:.7,concerns:["신부전","배뇨 장애"]}],keywords:["신장","방광","배뇨","부종","요로"]},{id:"integumentary",name:"피부계",nameEn:"Integumentary System",description:"피부, 모발, 손발톱 등 외부 보호 시스템",primaryElement:"금",secondaryElement:"토",relatedOrgans:["피부","모발","손발톱","땀샘","피지선"],ageFactors:[{ageRange:"0-20",factor:1.2,concerns:["아토피","여드름"]},{ageRange:"21-40",factor:1,concerns:["피부 트러블"]},{ageRange:"41-60",factor:.8,concerns:["피부 노화","탈모"]},{ageRange:"61+",factor:.7,concerns:["피부 건조","색소 침착"]}],keywords:["피부","모발","탈모","여드름","습진"]},{id:"mental",name:"정신계",nameEn:"Mental/Emotional System",description:"정신 건강, 감정, 스트레스 관리 시스템",primaryElement:"화",secondaryElement:"수",relatedOrgans:["뇌","신경전달물질","자율신경"],ageFactors:[{ageRange:"0-20",factor:1.1,concerns:["정서 발달","ADHD"]},{ageRange:"21-40",factor:1.2,concerns:["스트레스","불안"]},{ageRange:"41-60",factor:1,concerns:["우울증","중년 위기"]},{ageRange:"61+",factor:.9,concerns:["고독감","인지 저하"]}],keywords:["정신","스트레스","우울","불안","감정"]},{id:"reproductive",name:"생식계",nameEn:"Reproductive System",description:"생식 기능과 호르몬 균형 시스템",primaryElement:"수",secondaryElement:"목",relatedOrgans:["생식 기관","성 호르몬"],ageFactors:[{ageRange:"0-20",factor:.8,concerns:["사춘기 발달"]},{ageRange:"21-40",factor:1.2,concerns:["생식 건강","임신"]},{ageRange:"41-60",factor:.9,concerns:["폐경","갱년기"]},{ageRange:"61+",factor:.6,concerns:["호르몬 결핍"]}],keywords:["생식","호르몬","갱년기","생리","임신"]},{id:"appearance",name:"외형계",nameEn:"External Appearance",description:"체형, 외모, 신체 비율 등 외적 특징",primaryElement:"금",secondaryElement:"목",relatedOrgans:["체형","골격 구조","비율"],ageFactors:[{ageRange:"0-20",factor:1.3,concerns:["성장","체형 형성"]},{ageRange:"21-40",factor:1,concerns:["체중 관리"]},{ageRange:"41-60",factor:.8,concerns:["체형 변화","비만"]},{ageRange:"61+",factor:.7,concerns:["체력 저하","자세 변형"]}],keywords:["체형","외모","체중","비만","자세"]}];function Sn(e,t,r){const a=new Date,s=a.getFullYear()-t,n=wn.map(r=>function(e,t,r,a,s){const n=Cn(t),i=function(e,t,r){let a=40;e.forEach(e=>{const r=t[e];a+=4*r;const s=function(e){return[{"목":"수","화":"목","토":"화","금":"토","수":"금"}[e]]}(e);s.forEach(e=>{a+=3*t[e]});const n=function(e){return[{"목":"금","화":"수","토":"목","금":"화","수":"토"}[e]]}(e);n.forEach(e=>{a-=2*t[e]})});const s=Os[r.day.gan];e.includes(s)&&(a+=8);return Math.max(20,Math.min(70,a))}([e.primaryElement,e.secondaryElement],n,t);let l=i;const d=function(e,t,r){let a=0;const s=Cn(e);0===s[t]?a+=15:1===s[t]&&(a+=8);0===s[r]?a+=10:1===s[r]&&(a+=5);return a}(t,e.primaryElement,e.secondaryElement);l-=d;const o=function(e,t,r){let a=0;const s=Cn(e);s[t]>=3?a+=12:2===s[t]&&(a+=6);s[r]>=3?a+=8:2===s[r]&&(a+=4);return a}(t,e.primaryElement,e.secondaryElement);l+=o;const c=function(e,t){const r=e.ageFactors.find(e=>{const[r,a]=Mn(e.ageRange);return t>=r&&t<=a});return(null==r?void 0:r.factor)||1}(e,r),m=Math.round(l*c),x=cn(e.primaryElement,e.secondaryElement,t,"today",s,a),g=cn(e.primaryElement,e.secondaryElement,t,"month",s,a),h=cn(e.primaryElement,e.secondaryElement,t,"year",s,a),u=Math.max(20,Math.min(90,Math.round((l+x)*c))),p=Math.max(20,Math.min(90,Math.round((l+g)*c))),b=Math.max(20,Math.min(90,Math.round((l+h)*c))),y=function(e,t,r){let a="low";e<40?a="high":e<60&&(a="medium");const s=r.ageFactors.find(e=>{const[r,a]=Mn(e.ageRange);return t>=r&&t<=a});s&&s.factor<.8&&e<50&&(a="high");return a}(m,r,e),j=function(e,t,r,a){const s=[];t<40?(s.push(`${e.name} 정기 검진 권장`),s.push(`${e.relatedOrgans.join(", ")} 건강에 특히 주의`)):t<60&&s.push(`${e.name} 예방 관리 필요`);const n=e.ageFactors.find(e=>{const[t,a]=Mn(e.ageRange);return r>=t&&r<=a});n&&n.concerns.forEach(e=>{s.push(`${e} 주의`)});const i=Cn(a);0===i[e.primaryElement]&&s.push(`${e.primaryElement} 오행 보강 필요 (음식, 운동)`);return s}(e,m,r,t),f=Math.max(20,Math.min(90,Math.round(l)));return{systemId:e.id,systemName:e.name,baseScore:f,todayScore:u,monthScore:p,yearScore:b,primaryElement:e.primaryElement,secondaryElement:e.secondaryElement,riskLevel:y,ageAdjusted:m,recommendations:j}}(r,e,s,t,a)),i=n.reduce((e,t)=>e+t.baseScore,0)/n.length,l=n.filter(e=>"high"===e.riskLevel).map(e=>e.systemName),d=n.filter(e=>e.baseScore>=70).map(e=>e.systemName),o=function(e){const t=e.reduce((e,t)=>e+t.baseScore,0)/e.length,r=e.reduce((e,t)=>e+t.todayScore,0)/e.length-t;return r>5?"improving":r<-5?"declining":"stable"}(n),c=(m=s)<=20?"청소년기":m<=40?"청년기":m<=60?"중년기":"노년기";var m;const x=function(e){if(e<=20)return["성장 발육","면역력 강화","올바른 자세"];if(e<=40)return["스트레스 관리","규칙적인 운동","균형잡힌 식단"];if(e<=60)return["만성질환 예방","정기 검진","체력 유지"];return["낙상 예방","치매 예방","영양 관리","사회 활동"]}(s),g=function(e,t,r){const a=[],s=[],n=e.filter(e=>"high"===e.riskLevel);n.length>0&&(a.push("종합 건강 검진 권장"),n.forEach(e=>{a.push(`${e.systemName} 전문의 상담`)}));const i=Cn(r),l=Object.entries(i).filter(([e,t])=>0===t).map(([e,t])=>e);l.length>0&&(s.push(`부족한 오행(${l.join(", ")}) 보강`),s.push("오행 균형 식단 및 생활습관"));t>40&&s.push("정기적인 건강 검진 (6개월~1년)");t>60&&(s.push("근력 운동 및 유연성 훈련"),s.push("사회 활동 및 뇌 자극"));return{immediate:a,longTerm:s}}(n,s,e);return{overall:{averageScore:Math.round(i),trend:o,riskSystems:l,strongSystems:d},systems:n,ageFactors:{currentAge:s,ageGroup:c,generalConcerns:x},recommendations:g}}function Cn(e){const t={"목":0,"화":0,"토":0,"금":0,"수":0};return t[Os[e.year.gan]]++,t[Os[e.month.gan]]++,t[Os[e.day.gan]]++,t[Os[e.time.gan]]++,t[Ks[e.year.ji]]++,t[Ks[e.month.ji]]++,t[Ks[e.day.ji]]++,t[Ks[e.time.ji]]++,t}function Mn(e){if(e.includes("+")){return[parseInt(e.replace("+","")),150]}const[t,r]=e.split("-").map(Number);return[t,r]}Le.register(We,He,Ye,Ue,Oe,Ke);const $n=({sajuData:e,birthYear:t,birthDate:r})=>{const[n,i]=a.useState(!1),[l,d]=a.useState("base");a.useEffect(()=>{const e=()=>{i(document.documentElement.classList.contains("dark"))};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);const o=a.useMemo(()=>{const r=Sn(e,t);return r.systems.slice(0,3).forEach(e=>{}),r},[e,t]),c=a.useMemo(()=>{const e=o.systems.map(e=>e.systemName),t=o.systems.map(e=>e.baseScore),r=(e=>{switch(e){case"today":return o.systems.map(e=>e.todayScore);case"month":return o.systems.map(e=>e.monthScore);case"year":return o.systems.map(e=>e.yearScore);default:return o.systems.map(e=>e.baseScore)}})(l),a=yn("base"),s=[{label:"기본 건강 상태",data:t,backgroundColor:a.background,borderColor:a.border,borderWidth:2,pointBackgroundColor:a.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:a.border,pointRadius:4,pointHoverRadius:6}];if("base"!==l){const e=yn(l),t={base:"기본",today:"오늘의 건강",month:"이달의 건강",year:"올해의 건강"};s.push({label:t[l],data:r,backgroundColor:e.background,borderColor:e.border,borderWidth:2,pointBackgroundColor:e.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:e.border,pointRadius:4,pointHoverRadius:6})}return{labels:e,datasets:s}},[o,l]),x=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:"base"!==l,position:"top",labels:{color:n?"#E5E7EB":"#374151",font:{size:12,family:"Pretendard, sans-serif"},padding:15,usePointStyle:!0}},tooltip:{backgroundColor:n?"#374151":"#F3F4F6",titleColor:n?"#FFFFFF":"#000000",bodyColor:n?"#FFFFFF":"#000000",borderColor:n?"#6B7280":"#D1D5DB",borderWidth:1,callbacks:{label:e=>{const t=e.dataIndex,r=o.systems[t];return[`${e.dataset.label}: ${e.parsed.r}점`,"위험도: "+("high"===r.riskLevel?"높음":"medium"===r.riskLevel?"중간":"낮음")]}}}},scales:{r:{beginAtZero:!0,min:0,max:100,ticks:{stepSize:20,color:n?"#9CA3AF":"#6B7280",backdropColor:"transparent",font:{size:11}},grid:{color:n?"#374151":"#E5E7EB"},pointLabels:{color:n?"#D1D5DB":"#4B5563",font:{size:12,family:"Pretendard, sans-serif",weight:500}}}}}),[n,l,o]),g=a.useMemo(()=>{const e=o.systems.map(e=>e.baseScore),t=(e.reduce((e,t)=>e+t,0)/e.length).toFixed(1),r=Math.max(...e),a=Math.min(...e),s=o.systems.find(e=>e.baseScore===r),n=o.systems.find(e=>e.baseScore===a);return{average:t,max:r,min:a,strongestSystem:s,weakestSystem:n}},[o]);return s.jsxs("div",{className:bn.LAYOUT.chartContainer.wrapper,children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"💚 12대 건강 시스템 분석"}),r&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["출생정보: ",r," | 현재 나이: ",o.ageFactors.currentAge,"세 (",o.ageFactors.ageGroup,")"]})]}),s.jsx("div",{className:"mb-6",style:{height:bn.DIMENSIONS.height},children:s.jsx(m,{data:c,options:x})}),s.jsx("div",{className:`${bn.LAYOUT.timeFrameSelector.container} mb-6`,children:[{key:"base",label:"기본"},{key:"today",label:"오늘"},{key:"month",label:"이달"},{key:"year",label:"올해"}].map(({key:e,label:t})=>s.jsx("button",{onClick:()=>d(e),className:`${bn.BUTTON_STYLES.timeFrame.base} ${l===e?bn.BUTTON_STYLES.timeFrame.active[e]:bn.BUTTON_STYLES.timeFrame.inactive}`,children:t},e))}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:`\n          ${Number(g.average)>=70?"bg-gradient-to-r from-green-600 to-green-800":Number(g.average)>=50?"bg-gradient-to-r from-blue-600 to-blue-800":"bg-gradient-to-r from-orange-600 to-orange-800"}\n          text-white rounded-xl p-6\n        `,children:[s.jsx("h4",{className:"text-lg font-semibold mb-2",children:"💚 전체 건강 지수"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-3xl font-bold",children:[g.average,"점"]}),s.jsx("div",{className:"text-sm opacity-90",children:Number(g.average)>=70?"✨ 매우 양호":Number(g.average)>=50?"🌟 양호":"⚠️ 주의 필요"})]}),s.jsx("div",{className:"text-sm",children:s.jsxs("div",{children:["추세: ","improving"===o.overall.trend?"📈 개선 중":"declining"===o.overall.trend?"📉 주의 필요":"➡️ 안정적"]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"💪 강점 시스템"}),s.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[g.strongestSystem&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:g.strongestSystem.systemName}),s.jsxs("span",{className:"ml-2",children:[g.max,"점"]})]}),o.overall.strongSystems.length>1&&s.jsxs("div",{className:"mt-1 text-xs opacity-80",children:["외 ",o.overall.strongSystems.length-1,"개 시스템"]})]})]}),s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-2",children:"⚠️ 주의 시스템"}),s.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-400",children:[g.weakestSystem&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:g.weakestSystem.systemName}),s.jsxs("span",{className:"ml-2",children:[g.min,"점"]})]}),o.overall.riskSystems.length>0&&s.jsxs("div",{className:"mt-1 text-xs opacity-80",children:["고위험: ",o.overall.riskSystems.length,"개 시스템"]})]})]})]}),(o.recommendations.immediate.length>0||o.recommendations.longTerm.length>0)&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-3",children:"💡 건강 권장사항"}),o.recommendations.immediate.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"즉시 조치 사항"}),s.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-300 space-y-1",children:o.recommendations.immediate.slice(0,3).map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]}),o.recommendations.longTerm.length>0&&s.jsxs("div",{children:[s.jsx("h6",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"장기 관리 계획"}),s.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-300 space-y-1",children:o.recommendations.longTerm.slice(0,3).map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg p-4",children:[s.jsxs("h5",{className:"font-semibold text-purple-800 dark:text-purple-300 mb-2",children:["🎯 ",o.ageFactors.ageGroup," 주의사항"]}),s.jsx("ul",{className:"text-sm text-purple-700 dark:text-purple-300 space-y-1",children:o.ageFactors.generalConcerns.map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]})]})]})},En=[{id:"earned_income",name:"근로소득운",nameEn:"Earned Income",description:"직장 월급, 안정적인 근로소득을 얻는 능력",primaryElement:"금",secondaryElement:"토",relatedFactors:["정재","정관","인수","안정성"],category:"income",keywords:["월급","직장","승진","연봉","고용안정"]},{id:"business_income",name:"사업소득운",nameEn:"Business Income",description:"자영업, 창업으로 돈을 버는 능력",primaryElement:"화",secondaryElement:"목",relatedFactors:["편재","식신","상관","추진력"],category:"income",keywords:["창업","자영업","사업확장","고객","매출"]},{id:"investment_income",name:"투자소득운",nameEn:"Investment Income",description:"주식, 펀드 등 투자로 수익을 내는 능력",primaryElement:"수",secondaryElement:"금",relatedFactors:["편재","상관","겁재","위험감수"],category:"income",keywords:["주식","펀드","투자수익","자본이득","배당"]},{id:"real_estate",name:"부동산운",nameEn:"Real Estate",description:"토지, 건물 등 부동산 자산을 모으는 능력",primaryElement:"토",secondaryElement:"금",relatedFactors:["정재","비견","인수","축적"],category:"asset",keywords:["토지","아파트","상가","건물","임대수익"]},{id:"financial_assets",name:"금융자산운",nameEn:"Financial Assets",description:"현금, 예금, 채권 등 금융자산을 모으는 능력",primaryElement:"금",secondaryElement:"수",relatedFactors:["정재","식신","인수","유동성"],category:"asset",keywords:["현금","예금","채권","보험","연금"]},{id:"tangible_assets",name:"유형자산운",nameEn:"Tangible Assets",description:"귀금속, 골동품, 명품 등 실물자산을 모으는 능력",primaryElement:"금",secondaryElement:"토",relatedFactors:["편재","정재","비견","소장"],category:"asset",keywords:["금","보석","골동품","명품","수집"]},{id:"savings",name:"저축운",nameEn:"Savings",description:"돈을 아끼고 모으는 능력",primaryElement:"토",secondaryElement:"금",relatedFactors:["정재","인수","비견","절약"],category:"investment",keywords:["저축","절약","알뜰","계획소비","목돈"]},{id:"wealth_growth",name:"증식운",nameEn:"Wealth Growth",description:"돈을 불리고 증식시키는 능력",primaryElement:"목",secondaryElement:"화",relatedFactors:["편재","식신","상관","성장"],category:"investment",keywords:["재테크","수익률","복리","투자전략","자산증식"]},{id:"wealth_preservation",name:"보존운",nameEn:"Wealth Preservation",description:"돈을 지키고 손실을 방지하는 능력",primaryElement:"수",secondaryElement:"토",relatedFactors:["정관","인수","겁재","방어"],category:"investment",keywords:["리스크관리","손실방지","분산투자","안전자산","보험"]}];function Dn(e,t,r){const a=new Date,s=En.map(r=>function(e,t,r,a){const s=Tn(t),n=function(e,t,r){let a=40;e.forEach(e=>{const r=t[e];a+=5*r;const s=function(e){return[{"목":"수","화":"목","토":"화","금":"토","수":"금"}[e]]}(e);s.forEach(e=>{a+=4*t[e]});Fn(e).forEach(e=>{a-=2*t[e]})});const s=Os[r.day.gan];e.includes(s)&&(a+=10);return Math.max(20,Math.min(70,a))}([e.primaryElement,e.secondaryElement],s,t),i=function(e,t){const r=Os[e.day.gan],a=Fn(r)[0];let s=0;t.primaryElement===a&&(s+=15);t.secondaryElement===a&&(s+=10);const n=Tn(e),i=n[a];1===i?s+=8:2===i?s+=12:3===i?s+=10:i>=4&&(s-=5);return s}(t,e),l=function(e,t){const r=Os[e.day.gan],a=_n(r);let s=0;const n=Tn(e),i=n[a];0===i?s-=10:1===i?s+=8:i>=2&&(s+=15);("business_income"===t.id||"investment_income"===t.id)&&i>=2&&(s+=10);return s}(t,e),d=function(e){const t=Os[e.day.gan],r=Tn(e),a=r[t]-1;let s=0;s=0===a?0:1===a?3:2===a?8:15;return s}(t),o=n+i+l-d,c=cn(e.primaryElement,e.secondaryElement,t,"today",a,r),m=cn(e.primaryElement,e.secondaryElement,t,"month",a,r),x=cn(e.primaryElement,e.secondaryElement,t,"year",a,r),g=Math.max(20,Math.min(90,Math.round(o+c))),h=Math.max(20,Math.min(90,Math.round(o+m))),u=Math.max(20,Math.min(90,Math.round(o+x))),p=(j=o,j>=65?"high":j>=45?"medium":"low"),b=function(e,t){const r=[];t>=65?r.push(`${e.name} 적극 추천 - 높은 잠재력`):t>=45?r.push(`${e.name} 신중한 접근 권장`):r.push(`${e.name} 리스크 관리 필요`);"income"===e.category?t>=60?r.push("적극적인 소득 활동 권장"):r.push("안정적인 소득원 확보 우선"):"asset"===e.category?t>=60?r.push("자산 축적에 유리한 시기"):r.push("소액 분산 투자 권장"):"investment"===e.category&&(t>=60?r.push("적극적인 재테크 가능"):r.push("보수적 재테크 권장"));return r}(e,o),y=Math.max(20,Math.min(90,Math.round(o)));var j;return{systemId:e.id,systemName:e.name,baseScore:y,todayScore:g,monthScore:h,yearScore:u,primaryElement:e.primaryElement,secondaryElement:e.secondaryElement,potential:p,category:e.category,recommendations:b}}(r,e,t,a)),n=s.reduce((e,t)=>e+t.baseScore,0)/s.length,i=s.filter(e=>e.baseScore>=65).map(e=>e.systemName),l=s.filter(e=>e.baseScore<45).map(e=>e.systemName),d=s.reduce((e,t)=>t.yearScore>e.yearScore?t:e),o=function(e){const t=e.reduce((e,t)=>e+t.baseScore,0)/e.length,r=e.reduce((e,t)=>e+t.yearScore,0)/e.length-t;return r>8?"rising":r<-8?"falling":"stable"}(s),c=function(e){const t=[...e].sort((e,t)=>t.baseScore-e.baseScore),r=t[0].systemName,a=t[1].systemName,s=t[t.length-1].systemName;return{primary:r,secondary:a,avoid:s}}(s),m=function(e,t){const r=[],a=[],s=e.filter(e=>"high"===e.potential);s.length>0&&r.push(`강점 활용: ${s[0].systemName} 집중`);e.filter(e=>"low"===e.potential).length>=3&&r.push("재테크 교육 및 전문가 상담 권장");const n=Tn(t),i=Os[t.day.gan],l=Fn(i)[0];0===n[l]&&a.push(`재성(${l}) 보강 - 재물운 기초 다지기`);const d=_n(i);0===n[d]&&a.push(`식상(${d}) 보강 - 재물 원천 확보`);return a.push("분산 투자로 리스크 관리"),a.push("장기적 자산 축적 계획 수립"),{immediate:r,longTerm:a}}(s,e);return{overall:{averageScore:Math.round(n),trend:o,strongSystems:i,weakSystems:l,bestOpportunity:d.systemName},systems:s,wealthType:c,recommendations:m}}function Tn(e){const t={"목":0,"화":0,"토":0,"금":0,"수":0};return t[Os[e.year.gan]]++,t[Os[e.month.gan]]++,t[Os[e.day.gan]]++,t[Os[e.time.gan]]++,t[Ks[e.year.ji]]++,t[Ks[e.month.ji]]++,t[Ks[e.day.ji]]++,t[Ks[e.time.ji]]++,t}function Fn(e){return[{"목":"금","화":"수","토":"목","금":"화","수":"토"}[e]]}function _n(e){return{"목":"화","화":"토","토":"금","금":"수","수":"목"}[e]}Le.register(We,He,Ye,Ue,Oe,Ke);const Pn=({sajuData:e,birthYear:t,birthDate:r})=>{const[n,i]=a.useState(!1),[l,d]=a.useState("base");a.useEffect(()=>{const e=()=>{i(document.documentElement.classList.contains("dark"))};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);const o=a.useMemo(()=>Dn(e,t),[e,t]),c=a.useMemo(()=>{const e=o.systems.map(e=>e.systemName),t=o.systems.map(e=>e.baseScore),r=(e=>{switch(e){case"today":return o.systems.map(e=>e.todayScore);case"month":return o.systems.map(e=>e.monthScore);case"year":return o.systems.map(e=>e.yearScore);default:return o.systems.map(e=>e.baseScore)}})(l),a=yn("base"),s=[{label:"기본 재물운",data:t,backgroundColor:a.background,borderColor:a.border,borderWidth:2,pointBackgroundColor:a.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:a.border,pointRadius:4,pointHoverRadius:6}];if("base"!==l){const e=yn(l),t={base:"기본",today:"오늘의 재물운",month:"이달의 재물운",year:"올해의 재물운"};s.push({label:t[l],data:r,backgroundColor:e.background,borderColor:e.border,borderWidth:2,pointBackgroundColor:e.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:e.border,pointRadius:4,pointHoverRadius:6})}return{labels:e,datasets:s}},[o,l]),x=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:"base"!==l,position:"top",labels:{color:n?"#E5E7EB":"#374151",font:{size:12,family:"Pretendard, sans-serif"},padding:15,usePointStyle:!0}},tooltip:{backgroundColor:n?"#374151":"#F3F4F6",titleColor:n?"#FFFFFF":"#000000",bodyColor:n?"#FFFFFF":"#000000",borderColor:n?"#6B7280":"#D1D5DB",borderWidth:1,callbacks:{label:e=>{const t=e.dataIndex,r=o.systems[t];return[`${e.dataset.label}: ${e.parsed.r}점`,"잠재력: "+("high"===r.potential?"높음":"medium"===r.potential?"중간":"낮음")]}}}},scales:{r:{beginAtZero:!0,min:0,max:100,ticks:{stepSize:20,color:n?"#9CA3AF":"#6B7280",backdropColor:"transparent",font:{size:11}},grid:{color:n?"#374151":"#E5E7EB"},pointLabels:{color:n?"#D1D5DB":"#4B5563",font:{size:12,family:"Pretendard, sans-serif",weight:500}}}}}),[n,l,o]),g=a.useMemo(()=>{const e=o.systems.map(e=>e.baseScore),t=(e.reduce((e,t)=>e+t,0)/e.length).toFixed(1),r=Math.max(...e),a=Math.min(...e),s=o.systems.find(e=>e.baseScore===r),n=o.systems.find(e=>e.baseScore===a);return{average:t,max:r,min:a,strongestSystem:s,weakestSystem:n}},[o]);return s.jsxs("div",{className:bn.LAYOUT.chartContainer.wrapper,children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"💰 9대 재물운 시스템 분석"}),r&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["출생정보: ",r]})]}),s.jsx("div",{className:"mb-6",style:{height:bn.DIMENSIONS.height},children:s.jsx(m,{data:c,options:x})}),s.jsx("div",{className:`${bn.LAYOUT.timeFrameSelector.container} mb-6`,children:[{key:"base",label:"기본"},{key:"today",label:"오늘"},{key:"month",label:"이달"},{key:"year",label:"올해"}].map(({key:e,label:t})=>s.jsx("button",{onClick:()=>d(e),className:`${bn.BUTTON_STYLES.timeFrame.base} ${l===e?bn.BUTTON_STYLES.timeFrame.active[e]:bn.BUTTON_STYLES.timeFrame.inactive}`,children:t},e))}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:`\n          ${Number(g.average)>=70?"bg-gradient-to-r from-yellow-500 to-yellow-700":Number(g.average)>=50?"bg-gradient-to-r from-green-500 to-green-700":"bg-gradient-to-r from-orange-500 to-orange-700"}\n          text-white rounded-xl p-6\n        `,children:[s.jsx("h4",{className:"text-lg font-semibold mb-2",children:"💰 전체 재물운 지수"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-3xl font-bold",children:[g.average,"점"]}),s.jsx("div",{className:"text-sm opacity-90",children:Number(g.average)>=70?"✨ 매우 좋음":Number(g.average)>=50?"🌟 양호":"⚠️ 신중 필요"})]}),s.jsx("div",{className:"text-sm",children:s.jsxs("div",{children:["추세: ","rising"===o.overall.trend?"📈 상승 중":"falling"===o.overall.trend?"📉 주의 필요":"➡️ 안정적"]})})]})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-purple-800 dark:text-purple-300 mb-3",children:"🎯 맞춤 재물 전략"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2 text-green-600",children:"✅"}),s.jsxs("div",{className:"text-purple-700 dark:text-purple-300",children:[s.jsx("span",{className:"font-medium",children:"주력:"})," ",o.wealthType.primary]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2 text-blue-600",children:"💡"}),s.jsxs("div",{className:"text-purple-700 dark:text-purple-300",children:[s.jsx("span",{className:"font-medium",children:"보조:"})," ",o.wealthType.secondary]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2 text-red-600",children:"⚠️"}),s.jsxs("div",{className:"text-purple-700 dark:text-purple-300",children:[s.jsx("span",{className:"font-medium",children:"주의:"})," ",o.wealthType.avoid]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"💪 재물 강점"}),s.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[g.strongestSystem&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:g.strongestSystem.systemName}),s.jsxs("span",{className:"ml-2",children:[g.max,"점"]})]}),o.overall.strongSystems.length>1&&s.jsxs("div",{className:"mt-1 text-xs opacity-80",children:["외 ",o.overall.strongSystems.length-1,"개 분야"]})]})]}),s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-2",children:"⚠️ 주의 분야"}),s.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-400",children:[g.weakestSystem&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:g.weakestSystem.systemName}),s.jsxs("span",{className:"ml-2",children:[g.min,"점"]})]}),o.overall.weakSystems.length>0&&s.jsxs("div",{className:"mt-1 text-xs opacity-80",children:["신중한 접근: ",o.overall.weakSystems.length,"개 분야"]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-2",children:"🌟 올해 최고의 재물 기회"}),s.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[s.jsx("span",{className:"font-medium text-lg",children:o.overall.bestOpportunity}),s.jsx("p",{className:"mt-1 text-xs",children:"올해 가장 높은 점수를 기록한 분야입니다"})]})]}),(o.recommendations.immediate.length>0||o.recommendations.longTerm.length>0)&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-3",children:"💡 재물운 권장사항"}),o.recommendations.immediate.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"즉시 실천 사항"}),s.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-300 space-y-1",children:o.recommendations.immediate.slice(0,3).map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]}),o.recommendations.longTerm.length>0&&s.jsxs("div",{children:[s.jsx("h6",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"장기 재테크 전략"}),s.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-300 space-y-1",children:o.recommendations.longTerm.slice(0,3).map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]})]})]})]})},An=[{id:"parents",name:"부모관계운",nameEn:"Parents Relationship",description:"부모님과의 관계, 효도, 가정의 뿌리",primaryElement:"토",secondaryElement:"금",relatedSibsin:["정인","편인","정관"],category:"family",keywords:["부모","효도","가풍","전통","존경"],harmonyFactors:["인수왕","관인상생","토금상생"],conflictFactors:["재성극인","식상설기","인수과다"]},{id:"siblings",name:"형제자매운",nameEn:"Siblings Relationship",description:"형제자매와의 관계, 우애, 경쟁",primaryElement:"목",secondaryElement:"화",relatedSibsin:["비견","겁재"],category:"family",keywords:["형제","자매","우애","경쟁","공동"],harmonyFactors:["비견협력","비겁적당","목화상생"],conflictFactors:["비겁쟁재","형제충","비겁과다"]},{id:"children",name:"자녀관계운",nameEn:"Children Relationship",description:"자녀와의 관계, 양육, 효과",primaryElement:"화",secondaryElement:"목",relatedSibsin:["식신","상관"],category:"family",keywords:["자녀","양육","교육","소통","성장"],harmonyFactors:["식신온화","식신생재","화목상생"],conflictFactors:["식상과다","인성극식","상관견관"]},{id:"friends",name:"친구관계운",nameEn:"Friends Relationship",description:"친구들과의 관계, 우정, 사교",primaryElement:"금",secondaryElement:"수",relatedSibsin:["비견","식신","정재"],category:"social",keywords:["친구","우정","사교","네트워크","신뢰"],harmonyFactors:["비견동지","식신사교","금수상생"],conflictFactors:["비겁쟁재","고립무원","사회성부족"]},{id:"spouse",name:"배우자운",nameEn:"Spouse Relationship",description:"배우자와의 관계, 부부애, 인연",primaryElement:"수",secondaryElement:"금",relatedSibsin:["정재","편재","정관","편관"],category:"social",keywords:["배우자","결혼","부부","애정","조화"],harmonyFactors:["재관균형","음양조화","수금상생"],conflictFactors:["비겁쟁재","재다신약","관살혼잡"]},{id:"boss",name:"상사관계운",nameEn:"Boss Relationship",description:"상사와의 관계, 승진, 인정",primaryElement:"금",secondaryElement:"토",relatedSibsin:["정관","편관","정인"],category:"work",keywords:["상사","리더십","승진","인정","권위"],harmonyFactors:["관인상생","관성적당","토금상생"],conflictFactors:["상관견관","관살혼잡","극관"]},{id:"colleagues",name:"동료협업운",nameEn:"Colleagues Relationship",description:"동료들과의 협업, 팀워크, 소통",primaryElement:"목",secondaryElement:"수",relatedSibsin:["식신","비견","편재"],category:"work",keywords:["동료","협업","팀워크","소통","조율"],harmonyFactors:["식신원만","비견협력","수목상생"],conflictFactors:["상관독단","비겁경쟁","소통불화"]}],Ln={"0-20":{ageGroup:"청소년기",weights:{parents:1.3,siblings:1.2,children:.5,friends:1.2,spouse:.6,boss:.7,colleagues:.8}},"21-40":{ageGroup:"청년기",weights:{parents:1.1,siblings:1,children:1.2,friends:1.3,spouse:1.4,boss:1.3,colleagues:1.3}},"41-60":{ageGroup:"중년기",weights:{parents:1.2,siblings:1,children:1.4,friends:1.1,spouse:1.3,boss:1.2,colleagues:1.2}},"61+":{ageGroup:"노년기",weights:{parents:.8,siblings:1.2,children:1.3,friends:1.2,spouse:1.4,boss:.7,colleagues:.7}}},Rn="자",On="축",Kn="인",Bn="묘",In="진",zn="사",qn="오",Wn="미",Hn="신",Yn="유",Un="술",Gn="해";function Qn(e,t,r){const a=new Date,s=a.getFullYear()-t+1,n=An.map(r=>function(e,t,r,a,s){const n=function(e){const t={"목":0,"화":0,"토":0,"금":0,"수":0};return t[Os[e.year.gan]]++,t[Os[e.month.gan]]++,t[Os[e.day.gan]]++,t[Os[e.time.gan]]++,t[Ks[e.year.ji]]++,t[Ks[e.month.ji]]++,t[Ks[e.day.ji]]++,t[Ks[e.time.ji]]++,t}(t),i=function(e,t,r){let a=40;e.forEach(e=>{const r=t[e];a+=5*r;const s=function(e){return[{"목":"수","화":"목","토":"화","금":"토","수":"금"}[e]]}(e);s.forEach(e=>{a+=6*t[e]});const n=function(e){return[{"목":"금","화":"수","토":"목","금":"화","수":"토"}[e]]}(e);n.forEach(e=>{a-=3*t[e]})});const s=Os[r.day.gan];e.includes(s)&&(a+=12);return Math.max(20,Math.min(70,a))}([e.primaryElement,e.secondaryElement],n,t),l=function(e,t){let r=0;const a={"비견":0,"겁재":0,"식신":0,"상관":0,"정재":0,"편재":0,"정관":0,"편관":0,"정인":0,"편인":0};t.relatedSibsin.forEach(e=>{const t=a[e]||0;1===t?r+=12:2===t?r+=18:t>=3&&(r+=10)}),("parents"===t.id||"boss"===t.id)&&(r+=8*(a["정인"]+a["편인"]));"children"===t.id&&(r+=8*(a["식신"]+a["상관"]));t.id;"friends"===t.id||"siblings"===t.id||t.id;return r}(0,e),d=function(e){let t=0;const r=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],a=function(e){const t=[["子","丑"],["寅","亥"],["卯","戌"],["辰","酉"],["巳","申"],["午","未"]];let r=0;for(const a of t)e.includes(a[0])&&e.includes(a[1])&&r++;return r}(r);t+=8*a;const s=Vn(r);t-=10*s;const n=Jn(r);t-=8*n;const i=function(e){const t=[["子","酉"],["午","卯"],["辰","丑"],["戌","未"],["寅","亥"],["巳","申"]];let r=0;for(const a of t)e.includes(a[0])&&e.includes(a[1])&&r++;return r}(r);t-=6*i;const l=function(e){const t=[["子","未"],["丑","午"],["寅","巳"],["卯","辰"],["申","亥"],["酉","戌"]];let r=0;for(const a of t)e.includes(a[0])&&e.includes(a[1])&&r++;return r}(r);return t-=7*l,t}(t),o=function(e,t){let r;r=e<=20?"0-20":e<=40?"21-40":e<=60?"41-60":"61+";return Ln[r].weights[t]||1}(a,e.id),c=(i+l+d)*o,m=cn(e.primaryElement,e.secondaryElement,t,"today",s,r),x=cn(e.primaryElement,e.secondaryElement,t,"month",s,r),g=cn(e.primaryElement,e.secondaryElement,t,"year",s,r),h=Math.max(20,Math.min(90,Math.round(c+m))),u=Math.max(20,Math.min(90,Math.round(c+x))),p=Math.max(20,Math.min(90,Math.round(c+g))),b=(k=c,k>=75?"excellent":k>=60?"good":k>=45?"fair":"poor"),{strengths:y,weaknesses:j}=function(e,t){const r=[],a=[];t>=70?(r.push(`${e.name} 매우 원만`),r.push("자연스러운 소통")):t>=50?r.push("평균적인 관계 유지"):(a.push(`${e.name} 개선 필요`),a.push("의식적인 노력 필요"));"family"===e.category?t>=60?r.push("가족 화목"):a.push("가족 소통 강화 필요"):"social"===e.category?t>=60?r.push("사교성 양호"):a.push("사회성 개발 필요"):"work"===e.category&&(t>=60?r.push("직장 적응력 양호"):a.push("직장 인간관계 주의"));return{strengths:r,weaknesses:a}}(e,c),f=function(e,t){const r=[];t>=70?r.push(`${e.name} 강점 활용하여 다른 관계 개선`):t>=50?r.push(`${e.name} 꾸준한 관심과 노력 유지`):(r.push(`${e.name} 적극적인 개선 필요`),r.push("전문가 상담이나 교육 고려"));"parents"===e.id?r.push("효도는 정성과 시간 투자"):"spouse"===e.id?r.push("소통과 이해가 핵심"):"children"===e.id?r.push("경청과 공감이 중요"):"boss"===e.id&&r.push("존중과 보고가 기본");return r}(e,c),v=Math.max(20,Math.min(90,Math.round(c)));var k;return{systemId:e.id,systemName:e.name,baseScore:v,todayScore:h,monthScore:u,yearScore:p,primaryElement:e.primaryElement,secondaryElement:e.secondaryElement,harmony:b,category:e.category,strengths:y,weaknesses:j,advice:f}}(r,e,t,s,a)),i=n.reduce((e,t)=>e+t.baseScore,0)/n.length,l=function(e){const t=e.filter(e=>"social"===e.category||"work"===e.category),r=t.reduce((e,t)=>e+t.baseScore,0)/t.length;return r>=65?"high":r>=50?"medium":"low"}(n),d=function(e){const t=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],r=Vn(t),a=Jn(t),s=r+a;return s>=2?"high":s>=1?"medium":"low"}(e),o=n.filter(e=>e.baseScore>=70).map(e=>e.systemName),c=n.filter(e=>e.baseScore<50).map(e=>e.systemName),m=n.reduce((e,t)=>t.baseScore>e.baseScore?t:e),x=function(e){const t=e.filter(e=>"family"===e.category).reduce((e,t)=>e+t.baseScore,0)/3,r=e.filter(e=>"social"===e.category).reduce((e,t)=>e+t.baseScore,0)/2,a=e.filter(e=>"work"===e.category).reduce((e,t)=>e+t.baseScore,0)/2;return t>=65&&r>=65&&a>=65?{type:"올라운더형",description:"모든 관계에서 균형잡힌 능력",bestApproach:"현재 강점 유지하며 약점 보완"}:r>=a&&r>=t?{type:"사교형",description:"친구와 배우자 관계에 강점",bestApproach:"사회성을 가족/직장에도 활용"}:a>=r&&a>=t?{type:"직장형",description:"상사와 동료 관계에 강점",bestApproach:"직장 경험을 다른 관계에 응용"}:{type:"가족형",description:"가족 관계에 강점",bestApproach:"가족 경험을 사회로 확장"}}(n),g=function(e){const t=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],r=[],a=[],s=[[Rn,On,"수토합"],[Kn,Gn,"목목합"],[Bn,Un,"화합"],[In,Yn,"금합"],[zn,Hn,"수합"],[qn,Wn,"토합"]];for(const[i,l,d]of s)t.includes(i)&&t.includes(l)&&r.push(`${d} - 조화로운 관계 형성`);const n=[[Rn,qn,"자오충"],[On,Wn,"축미충"],[Kn,Hn,"인신충"],[Bn,Yn,"묘유충"],[In,Un,"진술충"],[zn,Gn,"사해충"]];for(const[i,l,d]of n)t.includes(i)&&t.includes(l)&&a.push(`${d} - 정면 충돌 주의`);return{harmonies:r,conflicts:a}}(e),h=function(e,t,r){const a=[],s=[],n=e.filter(e=>"poor"===e.harmony);n.length>0&&(a.push(`${n[0].systemName} 개선 집중`),a.push("적극적인 소통과 이해 노력"));r.conflicts.length>=2&&(a.push("갈등 관리 기술 학습"),a.push("감정 조절 연습"));s.push("정기적인 관계 점검 시간 확보"),s.push("경청과 공감 능력 개발"),r.harmonies.length>0&&s.push("조화 관계를 활용한 네트워크 확장");return s.push("갈등 해결 교육이나 상담"),s.push("인간관계 독서나 강연 참여"),{immediate:a,longTerm:s}}(n,0,g);return{overall:{averageScore:Math.round(i),socialSkill:l,conflictLevel:d,strongRelationships:o,weakRelationships:c,bestPartner:m.systemName},systems:n,personalityStyle:x,recommendations:h,harmonyAnalysis:g}}function Vn(e){const t=[["子","午"],["丑","未"],["寅","申"],["卯","酉"],["辰","戌"],["巳","亥"]];let r=0;for(const a of t)e.includes(a[0])&&e.includes(a[1])&&r++;return r}function Jn(e){let t=0;return e.includes("寅")&&e.includes("巳")&&e.includes("申")&&t++,e.includes("丑")&&e.includes("戌")&&e.includes("未")&&t++,e.includes("子")&&e.includes("卯")&&t++,t}Le.register(We,He,Ye,Ue,Oe,Ke);const Zn=({sajuData:e,birthYear:t,birthDate:r})=>{const[n,i]=a.useState(!1),[l,d]=a.useState("base");a.useEffect(()=>{const e=()=>{i(document.documentElement.classList.contains("dark"))};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);const o=a.useMemo(()=>Qn(e,t),[e,t]),c=a.useMemo(()=>{const e=o.systems.map(e=>e.systemName),t=o.systems.map(e=>e.baseScore),r=(e=>{switch(e){case"today":return o.systems.map(e=>e.todayScore);case"month":return o.systems.map(e=>e.monthScore);case"year":return o.systems.map(e=>e.yearScore);default:return o.systems.map(e=>e.baseScore)}})(l),a=yn("base"),s=[{label:"기본 인간관계운",data:t,backgroundColor:a.background,borderColor:a.border,borderWidth:2,pointBackgroundColor:a.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:a.border,pointRadius:4,pointHoverRadius:6}];if("base"!==l){const e=yn(l),t={base:"기본",today:"오늘의 인간관계운",month:"이달의 인간관계운",year:"올해의 인간관계운"};s.push({label:t[l],data:r,backgroundColor:e.background,borderColor:e.border,borderWidth:2,pointBackgroundColor:e.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:e.border,pointRadius:4,pointHoverRadius:6})}return{labels:e,datasets:s}},[o,l]),x=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:"base"!==l,position:"top",labels:{color:n?"#E5E7EB":"#374151",font:{size:12,family:"Pretendard, sans-serif"},padding:15,usePointStyle:!0}},tooltip:{backgroundColor:n?"#374151":"#F3F4F6",titleColor:n?"#FFFFFF":"#000000",bodyColor:n?"#FFFFFF":"#000000",borderColor:n?"#6B7280":"#D1D5DB",borderWidth:1,callbacks:{label:e=>{const t=e.dataIndex,r=o.systems[t];return[`${e.dataset.label}: ${e.parsed.r}점`,"조화도: "+("excellent"===r.harmony?"최고":"good"===r.harmony?"좋음":"fair"===r.harmony?"보통":"주의")]}}}},scales:{r:{beginAtZero:!0,min:0,max:100,ticks:{stepSize:20,color:n?"#9CA3AF":"#6B7280",backdropColor:"transparent",font:{size:11}},grid:{color:n?"#374151":"#E5E7EB"},pointLabels:{color:n?"#D1D5DB":"#4B5563",font:{size:12,family:"Pretendard, sans-serif",weight:500}}}}}),[n,l,o]),g=a.useMemo(()=>{const e=o.systems.map(e=>e.baseScore),t=(e.reduce((e,t)=>e+t,0)/e.length).toFixed(1),r=Math.max(...e),a=Math.min(...e),s=o.systems.find(e=>e.baseScore===r),n=o.systems.find(e=>e.baseScore===a);return{average:t,max:r,min:a,strongestSystem:s,weakestSystem:n}},[o]);return s.jsxs("div",{className:bn.LAYOUT.chartContainer.wrapper,children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"🤝 7대 인간관계운 시스템 분석"}),r&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["출생정보: ",r]})]}),s.jsx("div",{className:"mb-6",style:{height:bn.DIMENSIONS.height},children:s.jsx(m,{data:c,options:x})}),s.jsx("div",{className:`${bn.LAYOUT.timeFrameSelector.container} mb-6`,children:[{key:"base",label:"기본"},{key:"today",label:"오늘"},{key:"month",label:"이달"},{key:"year",label:"올해"}].map(({key:e,label:t})=>s.jsx("button",{onClick:()=>d(e),className:`${bn.BUTTON_STYLES.timeFrame.base} ${l===e?bn.BUTTON_STYLES.timeFrame.active[e]:bn.BUTTON_STYLES.timeFrame.inactive}`,children:t},e))}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:`\n          ${Number(g.average)>=70?"bg-gradient-to-r from-blue-500 to-blue-700":Number(g.average)>=50?"bg-gradient-to-r from-green-500 to-green-700":"bg-gradient-to-r from-orange-500 to-orange-700"}\n          text-white rounded-xl p-6\n        `,children:[s.jsx("h4",{className:"text-lg font-semibold mb-2",children:"🤝 전체 인간관계운 지수"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-3xl font-bold",children:[g.average,"점"]}),s.jsx("div",{className:"text-sm opacity-90",children:Number(g.average)>=70?"✨ 매우 원만":Number(g.average)>=50?"🌟  양호":"⚠️ 노력 필요"})]}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{children:["사회성: ","high"===o.overall.socialSkill?"높음 📈":"medium"===o.overall.socialSkill?"보통 ➡️":"개발 필요 📚"]}),s.jsxs("div",{children:["갈등: ","low"===o.overall.conflictLevel?"낮음 ✅":"medium"===o.overall.conflictLevel?"보통 ⚠️":"주의 🚨"]})]})]})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-purple-800 dark:text-purple-300 mb-3",children:"🎯 인간관계 유형"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2 text-blue-600",children:"🏷️"}),s.jsxs("div",{className:"text-purple-700 dark:text-purple-300",children:[s.jsx("span",{className:"font-medium",children:"유형:"})," ",o.personalityStyle.type]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2 text-green-600",children:"📝"}),s.jsxs("div",{className:"text-purple-700 dark:text-purple-300",children:[s.jsx("span",{className:"font-medium",children:"특징:"})," ",o.personalityStyle.description]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2 text-yellow-600",children:"💡"}),s.jsxs("div",{className:"text-purple-700 dark:text-purple-300",children:[s.jsx("span",{className:"font-medium",children:"최적 접근:"})," ",o.personalityStyle.bestApproach]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"💪 인간관계 강점"}),s.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[g.strongestSystem&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:g.strongestSystem.systemName}),s.jsxs("span",{className:"ml-2",children:[g.max,"점"]})]}),o.overall.strongRelationships.length>1&&s.jsxs("div",{className:"mt-1 text-xs opacity-80",children:["외 ",o.overall.strongRelationships.length-1,"개 관계"]})]})]}),s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-2",children:"⚠️ 주의 관계"}),s.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-400",children:[g.weakestSystem&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:g.weakestSystem.systemName}),s.jsxs("span",{className:"ml-2",children:[g.min,"점"]})]}),o.overall.weakRelationships.length>0&&s.jsxs("div",{className:"mt-1 text-xs opacity-80",children:["개선 필요: ",o.overall.weakRelationships.length,"개 관계"]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 border border-pink-200 dark:border-pink-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-pink-800 dark:text-pink-300 mb-2",children:"🌟 최고의 인연"}),s.jsxs("div",{className:"text-sm text-pink-700 dark:text-pink-400",children:[s.jsx("span",{className:"font-medium text-lg",children:o.overall.bestPartner}),s.jsx("p",{className:"mt-1 text-xs",children:"가장 높은 점수를 기록한 관계입니다"})]})]}),(o.harmonyAnalysis.harmonies.length>0||o.harmonyAnalysis.conflicts.length>0)&&s.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-indigo-800 dark:text-indigo-300 mb-3",children:"☯️ 합형충파해 분석"}),o.harmonyAnalysis.harmonies.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-400 mb-1",children:"조화 관계 (合)"}),s.jsx("ul",{className:"text-sm text-indigo-600 dark:text-indigo-300 space-y-1",children:o.harmonyAnalysis.harmonies.slice(0,3).map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"✨"}),s.jsx("span",{children:e})]},t))})]}),o.harmonyAnalysis.conflicts.length>0&&s.jsxs("div",{children:[s.jsx("h6",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-400 mb-1",children:"갈등 관계 (沖/刑/破/害)"}),s.jsx("ul",{className:"text-sm text-indigo-600 dark:text-indigo-300 space-y-1",children:o.harmonyAnalysis.conflicts.slice(0,3).map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"⚠️"}),s.jsx("span",{children:e})]},t))})]})]}),(o.recommendations.immediate.length>0||o.recommendations.longTerm.length>0)&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:[s.jsx("h5",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-3",children:"💡 인간관계 권장사항"}),o.recommendations.immediate.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"즉시 실천 사항"}),s.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-300 space-y-1",children:o.recommendations.immediate.slice(0,3).map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]}),o.recommendations.longTerm.length>0&&s.jsxs("div",{children:[s.jsx("h6",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"장기 관계 전략"}),s.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-300 space-y-1",children:o.recommendations.longTerm.slice(0,3).map((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]})]})]})]})},Xn={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},ei={"자":"수","축":"토","인":"목","묘":"목","진":"토","사":"화","오":"화","미":"토","신":"금","유":"금","술":"토","해":"수"};class ti{static generateUniversalLifeChart(e,t){const r=new Date(t.birthDate).getFullYear(),a=(new Date).getFullYear(),s=a-r+1,n=en(e,r),i=this.generateChartFromScores(n.yearlyScores,r,e),l=this.analyzeLifePeriods(i,r),d={calculationDate:(new Date).toISOString(),version:"7.0.0",accuracy:Math.round(100-20*n.pattern.volatility)};return{personalInfo:t,timeline:{startYear:r,endYear:r+95,currentYear:a,currentAge:s,lifeProgress:Math.round(s/95*100)},chartData:i,lifePeriods:l,metadata:d}}static generateChartFromScores(e,t,r){const a={geunbon:[],woon:[],haeng:[],hyeong:[],byeon:[]},s=this.calculateDimensionFactors(r);for(let n=0;n<=95;n++){const r=t+n,i=e[n]||50;a.geunbon.push({age:n,value:i,year:r,intensity:Math.abs(i-50)/50});const l=Math.max(0,Math.min(100,i+8*Math.sin(n*s.woon)));a.woon.push({age:n,value:l,year:r,intensity:Math.abs(l-50)/50});const d=Math.max(0,Math.min(100,i+10*Math.sin(n*s.haeng)));a.haeng.push({age:n,value:d,year:r,intensity:Math.abs(d-50)/50});const o=Math.max(0,Math.min(100,i+7*Math.cos(n*s.hyeong)));a.hyeong.push({age:n,value:o,year:r,intensity:Math.abs(o-50)/50});const c=Math.max(0,Math.min(100,i+12*Math.sin(n*s.byeon)));a.byeon.push({age:n,value:c,year:r,intensity:Math.abs(c-50)/50})}return a}static calculateWuxingBalance(e){const t={"목":0,"화":0,"토":0,"금":0,"수":0};t[Xn[e.year.gan]]++,t[Xn[e.month.gan]]++,t[Xn[e.day.gan]]++,t[Xn[e.time.gan]]++,t[ei[e.year.ji]]++,t[ei[e.month.ji]]++,t[ei[e.day.ji]]++,t[ei[e.time.ji]]++;const r=Object.values(t);return 100-15*(Math.max(...r)-Math.min(...r))}static calculateDimensionFactors(e){const t=this.getSajuHash(e);return{woon:.15+t%10*.01,haeng:.2+t%7*.01,hyeong:.08+t%5*.01,byeon:.3+t%8*.01}}static getSajuHash(e){const t={"갑":1,"을":2,"병":3,"정":4,"무":5,"기":6,"경":7,"신":8,"임":9,"계":10},r={"자":1,"축":2,"인":3,"묘":4,"진":5,"사":6,"오":7,"미":8,"신":9,"유":10,"술":11,"해":12};return 1e3*t[e.year.gan]+100*r[e.year.ji]+50*t[e.month.gan]+25*r[e.month.ji]+10*t[e.day.gan]+5*r[e.day.ji]+2*t[e.time.gan]+r[e.time.ji]}static generatePreciseChart_DEPRECATED(e,t,r){const a={geunbon:[],woon:[],haeng:[],hyeong:[],byeon:[]};for(let s=0;s<=95;s++){const e=50,t=Math.max(0,Math.min(100,e));a.geunbon.push({age:s,value:t,year:2e3+s,intensity:Math.abs(t-50)/50});const r=Math.max(0,Math.min(100,e+8*Math.sin(.15*s)));a.woon.push({age:s,value:r,year:2e3+s,intensity:Math.abs(r-50)/50});const n=Math.max(0,Math.min(100,e+10*Math.sin(.2*s)));a.haeng.push({age:s,value:n,year:2e3+s,intensity:Math.abs(n-50)/50});const i=Math.max(0,Math.min(100,e+5*Math.sin(.08*s)));a.hyeong.push({age:s,value:i,year:2e3+s,intensity:Math.abs(i-50)/50});const l=Math.max(0,Math.min(100,e+12*Math.cos(.3*s)));a.byeon.push({age:s,value:l,year:2e3+s,intensity:Math.abs(l-50)/50})}return a}static analyzeLifePeriods(e,t){const r=[];return[{phase:"childhood",start:0,end:12,desc:"성장과 기초 형성기"},{phase:"youth",start:13,end:22,desc:"학습과 탐색기"},{phase:"early_adult",start:23,end:35,desc:"도전과 성취기"},{phase:"middle_adult",start:36,end:50,desc:"안정과 발전기"},{phase:"late_adult",start:51,end:65,desc:"성숙과 지혜기"},{phase:"senior",start:66,end:80,desc:"여유와 전수기"},{phase:"elder",start:81,end:95,desc:"완성과 회고기"}].forEach(({phase:t,start:a,end:s,desc:n})=>{const i=e.geunbon.slice(a,Math.min(s+1,e.geunbon.length));if(0===i.length)return;const l=i.reduce((e,t)=>e+t.value,0)/i.length,d=i.filter(e=>Math.abs(e.value-50)>20).map(e=>e.age).slice(0,3);let o="stable";const c=i.slice(0,Math.floor(i.length/2)),m=i.slice(Math.floor(i.length/2)),x=c.reduce((e,t)=>e+t.value,0)/c.length||0,g=m.reduce((e,t)=>e+t.value,0)/m.length||0;g-x>5?o="ascending":x-g>5?o="descending":Math.abs(l-50)>15&&(o="turbulent"),r.push({startAge:a,endAge:s,phase:t,description:n,majorEvents:this.getMajorEvents(t),overallTrend:o,keyYears:d})}),r}static getMajorEvents(e){return{childhood:["성장기 특성 형성","기초 교육 시작","가족관계 형성"],youth:["학업 집중기","진로 탐색","자아 정체성 확립"],early_adult:["사회 진출","경력 시작","인간관계 확대"],middle_adult:["경력 안정기","가정 형성","사회적 성취"],late_adult:["전문성 정점","후진 양성","인생 성찰"],senior:["은퇴 준비","건강 관리","지혜 전수"],elder:["여생 정리","유산 전달","회고와 성찰"]}[e]||[]}}const ri=["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"],ai={"갑":["병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축"],"을":["무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축"],"병":["경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축"],"정":["임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축"],"무":["갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해","갑자","을축"],"기":["병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축"],"경":["무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축"],"신":["경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축"],"임":["임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축"],"계":["갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해","갑자","을축"]},si={"갑":["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해"],"을":["병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해"],"병":["무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해"],"정":["경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해"],"무":["임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"],"기":["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해"],"경":["병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해"],"신":["무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해"],"임":["경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해"],"계":["임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"]};class ni{static calculateYearPillar(e){let t=(e-1924)%60;t<0&&(t+=60);const r=ri[t];return{heavenly:r[0],earthly:r[1],combined:r}}static getSolarMonth(e,t,r){return 1===t?r>=6?12:11:2===t?r>=4?1:12:3===t?r>=6?2:1:4===t?r>=5?3:2:5===t?r>=6?4:3:6===t?r>=6?5:4:7===t?r>=7?6:5:8===t?r>=8?7:6:9===t?r>=8?8:7:10===t?r>=8?9:8:11===t?r>=7?10:9:12===t?r>=7?11:10:t}static calculateMonthPillar(e,t,r){const a=this.calculateYearPillar(e).heavenly,s=this.getSolarMonth(e,t,r),n=ai[a];if(!n)return{heavenly:"갑",earthly:"자",combined:"갑자"};const i=n[s-1];return i?{heavenly:i[0],earthly:i[1],combined:i}:{heavenly:"갑",earthly:"자",combined:"갑자"}}static calculateDayPillar(e,t,r){const a=new Date(1971,10,17),s=new Date(e,t-1,r).getTime()-a.getTime();let n=(42+Math.floor(s/864e5))%60;n<0&&(n+=60);const i=ri[n];return{heavenly:i[0],earthly:i[1],combined:i}}static calculateHourPillar(e,t,r,a,s=0){const n=this.calculateDayPillar(e,t,r).heavenly;let i;const l=a+s/60;i=l>=23||l<1?0:l<3?1:l<5?2:l<7?3:l<9?4:l<11?5:l<13?6:l<15?7:l<17?8:l<19?9:l<21?10:11;const d=si[n];if(!d)return{heavenly:"갑",earthly:"자",combined:"갑자"};const o=d[i];return{heavenly:o[0],earthly:o[1],combined:o}}static calculateFourPillars(e){let{year:t,month:r,day:a,hour:s,minute:n=0}=e;if(e.isLunar)try{const s=((e,t,r,a=!1)=>{try{const s=new Z;s.setLunarDate(e,t,r,a);const n=s.getSolarYear(),i=s.getSolarMonth(),l=s.getSolarDay();return new Date(n||e,(i||t)-1,l||r)}catch(s){return new Date(e,t-1,r)}})(t,r,a,e.isLeapMonth||!1);t=s.getFullYear(),r=s.getMonth()+1,a=s.getDate()}catch(i){}return{year:this.calculateYearPillar(t),month:this.calculateMonthPillar(t,r,a),day:this.calculateDayPillar(t,r,a),hour:this.calculateHourPillar(t,r,a,s,n)}}static testReferenceCases(){this.calculateFourPillars({year:1971,month:11,day:17,hour:4,minute:0,isLunar:!1});this.calculateFourPillars({year:1976,month:9,day:16,hour:9,minute:40,isLunar:!1})}}function ii(e,t){let r=null,a=null;if(e)try{const t=function(e){const t=[];try{const r={year:{gan:e.year.gan,ji:e.year.ji,combined:e.year.gan+e.year.ji},month:{gan:e.month.gan,ji:e.month.ji,combined:e.month.gan+e.month.ji},day:{gan:e.day.gan,ji:e.day.ji,combined:e.day.gan+e.day.ji},time:{gan:e.time.gan,ji:e.time.ji,combined:e.time.gan+e.time.ji}};return li(r.year)||t.push("년주 데이터 불완전"),li(r.month)||t.push("월주 데이터 불완전"),li(r.day)||t.push("일주 데이터 불완전"),li(r.time)||t.push("시주 데이터 불완전"),{standardSaju:r,isValid:0===t.length,source:"backend",warnings:t}}catch(r){throw new Error(`Backend 사주 데이터 변환 실패: ${r}`)}}(e);t.isValid&&(r=t.standardSaju)}catch(s){}if(t)try{const e=function(e){const t=[];try{const r={year:{gan:e.year.heavenly,ji:e.year.earthly,combined:e.year.combined},month:{gan:e.month.heavenly,ji:e.month.earthly,combined:e.month.combined},day:{gan:e.day.heavenly,ji:e.day.earthly,combined:e.day.combined},time:{gan:e.hour.heavenly,ji:e.hour.earthly,combined:e.hour.combined}};return r.year.combined!==r.year.gan+r.year.ji&&t.push("년주 조합 불일치"),r.month.combined!==r.month.gan+r.month.ji&&t.push("월주 조합 불일치"),r.day.combined!==r.day.gan+r.day.ji&&t.push("일주 조합 불일치"),r.time.combined!==r.time.gan+r.time.ji&&t.push("시주 조합 불일치"),{standardSaju:r,isValid:0===t.length,source:"frontend",warnings:t}}catch(s){throw new Error(`Frontend 사주 데이터 변환 실패: ${s}`)}}(t);e.isValid&&(a=e.standardSaju)}catch(s){}if(r&&a){const e=function(e,t){const r={year:e.year.combined!==t.year.combined,month:e.month.combined!==t.month.combined,day:e.day.combined!==t.day.combined,time:e.time.combined!==t.time.combined},a=Object.values(r).filter(e=>!e).length,s=Math.round(a/4*100);let n;return n=s>=75?"use_backend":s>=50?"use_frontend":"recalculate",{isMatch:100===s,differences:r,confidence:s,recommendation:n}}(r,a);if(e.isMatch)return{finalSaju:r,resolution:"사주 완전 일치 - Backend 데이터 사용",confidence:100};switch(e.recommendation){case"use_backend":return{finalSaju:r,resolution:`Backend 우선 사용 (일치도: ${e.confidence}%)`,confidence:e.confidence};case"use_frontend":return{finalSaju:a,resolution:`Frontend 재계산 사용 (일치도: ${e.confidence}%)`,confidence:e.confidence};default:return{finalSaju:r,resolution:`심각한 불일치로 Backend 강제 사용 (일치도: ${e.confidence}%)`,confidence:e.confidence}}}if(r)return{finalSaju:r,resolution:"Backend 데이터만 사용",confidence:80};if(a)return{finalSaju:a,resolution:"Frontend 재계산 데이터만 사용",confidence:60};throw new Error("사주 데이터가 없거나 모두 유효하지 않음")}function li(e){return["갑","을","병","정","무","기","경","신","임","계"].includes(e.gan)&&["자","축","인","묘","진","사","오","미","신","유","술","해"].includes(e.ji)&&e.combined===e.gan+e.ji}const di=["갑","을","병","정","무","기","경","신","임","계"],oi=["자","축","인","묘","진","사","오","미","신","유","술","해"],ci={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},mi={"인":"목","묘":"목","사":"화","오":"화","진":"토","술":"토","축":"토","미":"토","신":"금","유":"금","자":"수","해":"수"},xi={"목":"화","화":"토","토":"금","금":"수","수":"목"},gi={"목":"토","화":"금","토":"수","금":"목","수":"화"},hi={"봄":{"목":100,"화":50,"토":25,"금":10,"수":75},"여름":{"목":25,"화":100,"토":75,"금":10,"수":10},"가을":{"목":10,"화":10,"토":25,"금":100,"수":50},"겨울":{"목":50,"화":10,"토":10,"금":75,"수":100}},ui={"인":"봄","묘":"봄","진":"봄","사":"여름","오":"여름","미":"여름","신":"가을","유":"가을","술":"가을","자":"겨울","축":"겨울","해":"겨울"},pi={"갑":"기","기":"갑","을":"경","경":"을","병":"신","신":"병","정":"임","임":"정","무":"계","계":"무"},bi={"자":"오","오":"자","축":"미","미":"축","인":"신","신":"인","묘":"유","유":"묘","진":"술","술":"진","사":"해","해":"사"},yi={"자":"축","축":"자","인":"해","해":"인","묘":"술","술":"묘","진":"유","유":"진","사":"신","신":"사","오":"미","미":"오"};class ji{static calculateAuthenticLifeChart(e,t){this.DEBUG;const r=this.analyzeGyeokGuk(e),a=this.selectYongSin(r),s=this.calculateDaeUn(e,r),n=this.calculateYearlyScores(e,r,a,s,t),i=this.calculateStatistics(n,a);return this.DEBUG,{"개인정보":{"사주":this.formatSaju(e),"격국":r,"용신":a},"대운목록":s,"연도별점수":n,"통계":i}}static analyzeGyeokGuk(e){const t=e.day.gan,r=ci[t],a=e.month.ji,s=ui[a],n={"목":0,"화":0,"토":0,"금":0,"수":0};[e.year.gan,e.month.gan,e.day.gan,e.time.gan].forEach(e=>{n[ci[e]]+=20}),[e.year.ji,e.month.ji,e.day.ji,e.time.ji].forEach(e=>{n[mi[e]]+=30});const i=hi[s][r];let l;const d=n[r]+i;l=d>=120?"강":d<=60?"약":"중";let o="일반격";return"강"===l?o="신강격":"약"===l&&(o="신약격"),this.DEBUG,{"일간":t,"일간오행":r,"일간강약":l,"월령":a,"계절":s,"월령지원":i,"오행분포":n,"격국유형":o}}static selectYongSin(e){const t={"목":0,"화":0,"토":0,"금":0,"수":0};if("약"===e.일간강약)t[e.일간오행]+=100,t[this.getGeneratingElement(e.일간오행)]+=90;else if("강"===e.일간강약)t[xi[e.일간오행]]+=100,t[gi[e.일간오행]]+=90,t[this.getConflictingElement(e.일간오행)]+=80;else{const r=Object.values(e.오행분포).reduce((e,t)=>e+t)/5;Object.entries(e.오행분포).forEach(([e,a])=>{a<r&&(t[e]+=r-a)})}const r=hi[e.계절];Object.entries(r).forEach(([e,r])=>{r<30&&(t[e]+=50)});const a=Object.entries(t).sort(([,e],[,t])=>t-e).map(([e])=>e),s=a.slice(0,2),n=a.slice(2,4),i=a.slice(4);let l="";return l="약"===e.일간강약?"신약으로 인한 부족 오행 보충 필요":"강"===e.일간강약?"신강으로 인한 과잉 오행 소모 필요":"중화로 인한 균형 오행 보완 필요",this.DEBUG,{"용신":s,"기신":n,"희신":i,"기신원인":l,"용신점수":t}}static calculateDaeUn(e,t){const r=[],a=e.day.gan,s=e.year.gan,n=this.determineDaeunDirection(a,s),i=di.indexOf(e.month.gan),l=oi.indexOf(e.month.ji);for(let d=0;d<10;d++){let s,o;"순행"===n?(s=(i+d+1)%10,o=(l+d+1)%12):(s=(i-d-1+10)%10,o=(l-d-1+12)%12);const c=di[s],m=oi[o],x=ci[c];let g=50;c===a?g+=15:pi[a]===c?g+=25:xi[x]===t.일간오행?g+=20:gi[x]===t.일간오행&&(g-=15),bi[e.day.ji]===m?g-=20:yi[e.day.ji]===m&&(g+=15);const h=this.analyzeDaeunFeatures(d,c,m,n);r.push({cycle:d,"천간":c,"지지":m,"오행":x,"순역행":n,"점수":Math.max(10,Math.min(90,g)),"특징":h})}return this.DEBUG&&r.slice(0,3).forEach(e=>{}),r}static calculateYearlyScores(e,t,r,a,s){const n=[],i=this.get격국별기본점수(t.격국유형,t.일간),l=this.get일간보정값(t.일간);for(let d=0;d<=95;d++){const t=s+d,o=a[Math.floor(d/10)]||a[a.length-1],c=(t-4)%12,m=di[(t-4)%10],x=oi[c],g=ci[m];let h=i+l;m===e.day.gan?h+=10:pi[e.day.gan]===m&&(h+=15);let u=0;const p=this.get나이별용신가중치(d);r.용신.includes(g)?u+=35*p:r.희신.includes(g)?u+=18*p:r.기신.includes(g)&&(u-=30*p);let b=0;o.천간===m&&(b+=20),o.지지===x&&(b+=15),bi[o.지지]===x&&(b-=25);const y=o.점수,j=Math.max(10,Math.min(90,.4*y+.4*(h+u)+.2*b)),f={"년도":t,"나이":d,"천간":m,"지지":x,"오행":g,"점수":h,"대운상호작용":b};n.push({"나이":d,"년도":t,"총점":Math.round(j),"대운점수":y,"세운점수":h,"용신효과":u,"상세":f})}return n}static calculateStatistics(e,t){const r=e.map(e=>e.총점),a=Math.max(...r),s=Math.min(...r),n=r.reduce((e,t)=>e+t)/r.length,i=e.find(e=>e.총점===a),l=e.find(e=>e.총점===s),d=e.filter(e=>e.용신효과>20).length/e.length*100;return{"최고점년도":{"나이":i.나이,"점수":a},"최저점년도":{"나이":l.나이,"점수":s},"평균점수":Math.round(n),"용신부합도":Math.round(d)}}static"get격국별기본점수"(e,t){return{"신강격":70,"신약격":50,"종격":60,"특수격":65,"기타":55}[e]||55}static"get일간보정값"(e){return{"갑":5,"을":3,"병":7,"정":4,"무":6,"기":2,"경":8,"신":3,"임":4,"계":5}[e]||0}static"get나이별용신가중치"(e){return e>=20&&e<=40?1.5:e>=40&&e<=60?1.3:e>=60?1.1:1}static getGeneratingElement(e){return Object.fromEntries(Object.entries(xi).map(([e,t])=>[t,e]))[e]}static getConflictingElement(e){return Object.fromEntries(Object.entries(gi).map(([e,t])=>[t,e]))[e]}static determineDaeunDirection(e,t){return["갑","병","무","경","임"].includes(t)?"순행":"역행"}static analyzeDaeunFeatures(e,t,r,a){const s=[];0===e?s.push("기초형성기"):1===e?s.push("성장발전기"):2===e?s.push("도전기회기"):3===e?s.push("안정확립기"):4===e?s.push("성숙전성기"):5===e?s.push("지혜전수기"):s.push("완성회고기");const n=ci[t];return s.push(`${n}기운`),s.join(", ")}static formatSaju(e){return`${e.year.gan}${e.year.ji} ${e.month.gan}${e.month.ji} ${e.day.gan}${e.day.ji} ${e.time.gan}${e.time.ji}`}static createParkJunSooTestCase(){return{year:{gan:"신",ji:"해"},month:{gan:"기",ji:"해"},day:{gan:"병",ji:"오"},time:{gan:"경",ji:"인"}}}static createJeongBiJeTestCase(){return{year:{gan:"병",ji:"진"},month:{gan:"정",ji:"유"},day:{gan:"신",ji:"미"},time:{gan:"계",ji:"사"}}}static runTestCases(){const e=this.createParkJunSooTestCase();this.calculateAuthenticLifeChart(e,1971);const t=this.createJeongBiJeTestCase();this.calculateAuthenticLifeChart(t,1976)}}async function fi(e){try{const t=function(e){const t=!1!==e.useAuthenticCalculator;return t?function(e){const t=ni.calculateFourPillars({year:e.year,month:e.month,day:e.day,hour:e.hour,minute:0,isLunar:e.isLunar||!1,isLeapMonth:!1}),r={year:{gan:t.year.heavenly,ji:t.year.earthly},month:{gan:t.month.heavenly,ji:t.month.earthly},day:{gan:t.day.heavenly,ji:t.day.earthly},time:{gan:t.hour.heavenly,ji:t.hour.earthly}},a=ji.calculateAuthenticLifeChart(r,e.year),s=a.연도별점수.map(e=>{var t,r,s;return{year:e.년도,age:e.나이,totalScore:e.총점,fortune:Math.min(100,Math.max(0,.6*e.대운점수+.4*e.세운점수+Math.max(0,.3*e.용신효과)+10)),willpower:Math.min(100,Math.max(0,.8*e.대운점수+20)),environment:Math.min(100,Math.max(0,.8*e.세운점수+20)),change:Math.min(100,Math.max(0,.6*Math.abs(e.용신효과)+30)),"대운":{"천간":(null==(t=a.대운목록[Math.floor(e.나이/10)])?void 0:t.천간)||"갑","지지":(null==(r=a.대운목록[Math.floor(e.나이/10)])?void 0:r.지지)||"자","오행":(null==(s=a.대운목록[Math.floor(e.나이/10)])?void 0:s.오행)||"목",score:e.대운점수},"세운":{"천간":e.상세.천간,"지지":e.상세.지지,"오행":e.상세.오행,score:e.세운점수}}}),n=s.reduce((e,t)=>e.totalScore>t.totalScore?e:t),i=s.reduce((e,t)=>e.totalScore<t.totalScore?e:t),l=a.통계.평균점수;return{success:!0,data:{lifetimeFortune:s,analysis:{keyYears:s.filter(e=>Math.abs(e.totalScore-l)>15).slice(0,5),bestYear:{year:n.year,age:n.age,score:n.totalScore},worstYear:{year:i.year,age:i.age,score:i.totalScore},averageScore:l}},timestamp:(new Date).toISOString()}}(e):function(e){var t,r,a,s,n;e.sajuData;const i=ni.calculateFourPillars({year:e.year,month:e.month,day:e.day,hour:e.hour,minute:0,isLunar:e.isLunar||!1,isLeapMonth:!1});let l;try{l=ii(e.sajuData,i),l.finalSaju}catch(j){l={finalSaju:{year:{gan:i.year.heavenly,ji:i.year.earthly,combined:i.year.combined},month:{gan:i.month.heavenly,ji:i.month.earthly,combined:i.month.combined},day:{gan:i.day.heavenly,ji:i.day.earthly,combined:i.day.combined},time:{gan:i.hour.heavenly,ji:i.hour.earthly,combined:i.hour.combined}},resolution:"폴백: 재계산 사주 사용",confidence:50}}const d=(u=l.finalSaju,{year:{gan:u.year.gan,ji:u.year.ji},month:{gan:u.month.gan,ji:u.month.ji},day:{gan:u.day.gan,ji:u.day.ji},time:{gan:u.time.gan,ji:u.time.ji}}),o=`${e.year}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`,c=`${String(e.hour).padStart(2,"0")}:00`,m=`${i.year.combined} ${i.month.combined} ${i.day.combined} ${i.hour.combined}`,x={name:"사용자",birthDate:o,birthTime:c,sajuText:m,gender:e.gender||"male",lunarSolar:e.isLunar?"lunar":"solar"},g=ti.generateUniversalLifeChart(d,x),h=[];var u;for(let f=0;f<=95;f++){const i=e.year+f,l=(null==(t=g.chartData.geunbon[f])?void 0:t.value)||50,d=(null==(r=g.chartData.woon[f])?void 0:r.value)||50,o=(null==(a=g.chartData.haeng[f])?void 0:a.value)||50,c=(null==(s=g.chartData.hyeong[f])?void 0:s.value)||50,m=(null==(n=g.chartData.byeon[f])?void 0:n.value)||50,x=Math.round((l+d+o+c+m)/5);h.push({year:i,age:f,totalScore:x,fortune:Math.min(100,Math.max(0,.7*d+.3*l)),willpower:Math.min(100,Math.max(0,.8*o+.2*d)),environment:Math.min(100,Math.max(0,.7*c+.3*l)),change:Math.min(100,Math.max(0,.9*m+10)),"대운":{"천간":["갑","을","병","정","무","기","경","신","임","계"][Math.floor(f/10)%10],"지지":["자","축","인","묘","진","사","오","미","신","유","술","해"][Math.floor(f/10)%12],"오행":["목","화","토","금","수"][Math.floor(f/10)%5],score:Math.round((d+c)/2)},"세운":{"천간":["갑","을","병","정","무","기","경","신","임","계"][i%10],"지지":["자","축","인","묘","진","사","오","미","신","유","술","해"][i%12],"오행":["목","화","토","금","수"][i%5],score:Math.round(m)}})}const p=h.reduce((e,t)=>e.totalScore>t.totalScore?e:t),b=h.reduce((e,t)=>e.totalScore<t.totalScore?e:t),y=h.reduce((e,t)=>e+t.totalScore,0)/h.length;return{success:!0,data:{lifetimeFortune:h,analysis:{keyYears:h.filter(e=>Math.abs(e.totalScore-y)>20).slice(0,5),bestYear:{year:p.year,age:p.age,score:p.totalScore},worstYear:{year:b.year,age:b.age,score:b.totalScore},averageScore:Math.round(y)}},timestamp:(new Date).toISOString()}}(e)}(e);return t}catch(t){throw t}}r(ji,"DEBUG",!0);const vi={year:{gan:"신",ji:"해"},month:{gan:"기",ji:"해"},day:{gan:"병",ji:"오"},time:{gan:"경",ji:"인"}},ki={year:{gan:"병",ji:"진"},month:{gan:"정",ji:"유"},day:{gan:"신",ji:"미"},time:{gan:"계",ji:"사"}},Ni={"갑":1,"을":2,"병":3,"정":4,"무":5,"기":6,"경":7,"신":8,"임":9,"계":10},wi={"자":1,"축":2,"인":3,"묘":4,"진":5,"사":6,"오":7,"미":8,"신":9,"유":10,"술":11,"해":12},Si={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},Ci={"자":"수","축":"토","인":"목","묘":"목","진":"토","사":"화","오":"화","미":"토","신":"금","유":"금","술":"토","해":"수"};function Mi(e){const t=Ni,r=wi,a=(12*(t[e.year.gan]-1)+(r[e.year.ji]-1))%60,s=(12*(t[e.month.gan]-1)+(r[e.month.ji]-1))%60,n=(12*(t[e.day.gan]-1)+(r[e.day.ji]-1))%60,i=(12*(t[e.time.gan]-1)+(r[e.time.ji]-1))%60,l={"목":0,"화":0,"토":0,"금":0,"수":0};[e.year.gan,e.month.gan,e.day.gan,e.time.gan].forEach(e=>{l[Si[e]]++}),[e.year.ji,e.month.ji,e.day.ji,e.time.ji].forEach(e=>{l[Ci[e]]++});const d=Object.values(l);return 1e3*a+500*s+800*n+300*i+20*(100*(Math.max(...d)-Math.min(...d)))}function $i(e){const t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),s=ni.calculateDayPillar(t,r,a);return{gan:s.heavenly,ji:s.earthly,combined:s.combined}}function Ei(e,t,r){const a=$i(e),s=Os[a.gan],n=Ks[a.ji];let i=0;const l={"금전운":["금","토"],"연애운":["화","목"],"직장운":["금","수"],"건강운":["목","수"]}[r]||[];l.includes(s)&&(i+=15),l.includes(n)&&(i+=10);const d=Os[t.day.gan];var o,c,m,x;({"목":"화","화":"토","토":"금","금":"수","수":"목"})[s]===d&&(i+=12),o=a.gan,c=t.day.gan,[["갑","기"],["을","경"],["병","신"],["정","임"],["무","계"]].some(([e,t])=>o===e&&c===t||o===t&&c===e)&&(i+=20),function(e,t){return[["갑","경"],["을","신"],["병","임"],["정","계"]].some(([r,a])=>e===r&&t===a||e===a&&t===r)}(a.gan,t.day.gan)&&(i-=15),m=a.ji,x=t.day.ji,[["자","축"],["인","해"],["묘","술"],["진","유"],["사","신"],["오","미"]].some(([e,t])=>m===e&&x===t||m===t&&x===e)&&(i+=15),function(e,t){return[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]].some(([r,a])=>e===r&&t===a||e===a&&t===r)}(a.ji,t.day.ji)&&(i-=20);i+={"장생":15,"목욕":-5,"관대":10,"건록":20,"제왕":25,"쇠":-10,"병":-15,"사":-20,"묘":-5,"절":-25,"태":5,"양":0}[function(e,t){const r=Di[e];if(r&&t in r)return r[t]||"없음";return"없음"}(t.day.gan,a.ji)]||0,function(e,t){const r=$i(e),a=Ti[t.year.gan];if(a&&r.gan in a){const e=a[r.gan];return(null==e?void 0:e.includes(r.ji))||!1}return!1}(e,t)&&(i-=30),function(e,t){const r=$i(e),a=Fi[t.day.gan];if(a&&r.gan in a){const e=a[r.gan];return(null==e?void 0:e.includes(r.ji))||!1}return!1}(e,t)&&(i+=25);const g=_i(e,t);return i+=Math.floor(g/5),i}"undefined"!=typeof window&&(window.testUniqueValues=function(){const e=Mi(vi),t=Mi(ki);return vi.year.gan,vi.year.ji,[vi.year.gan,vi.month.gan,vi.day.gan,vi.time.gan].forEach(e=>{}),[vi.year.ji,vi.month.ji,vi.day.ji,vi.time.ji].forEach(e=>{}),ki.year.gan,ki.year.ji,[ki.year.gan,ki.month.gan,ki.day.gan,ki.time.gan].forEach(e=>{}),[ki.year.ji,ki.month.ji,ki.day.ji,ki.time.ji].forEach(e=>{}),{parkUniqueValue:e,jungUniqueValue:t}});const Di={"갑":{"해":"장생","자":"목욕","축":"관대","인":"건록","묘":"제왕","진":"쇠","사":"병","오":"사","미":"묘","신":"절","유":"태","술":"양"},"을":{"오":"장생","사":"목욕","진":"관대","묘":"건록","인":"제왕","축":"쇠","자":"병","해":"사","술":"묘","유":"절","신":"태","미":"양"},"병":{"인":"장생","묘":"목욕","진":"관대","사":"건록","오":"제왕","미":"쇠","신":"병","유":"사","술":"묘","해":"절","자":"태","축":"양"},"정":{"유":"장생","신":"목욕","미":"관대","오":"건록","사":"제왕","진":"쇠","묘":"병","인":"사","축":"묘","자":"절","해":"태","술":"양"},"무":{"인":"장생","묘":"목욕","진":"관대","사":"건록","오":"제왕","미":"쇠","신":"병","유":"사","술":"묘","해":"절","자":"태","축":"양"},"기":{"유":"장생","신":"목욕","미":"관대","오":"건록","사":"제왕","진":"쇠","묘":"병","인":"사","축":"묘","자":"절","해":"태","술":"양"},"경":{"사":"장생","오":"목욕","미":"관대","신":"건록","유":"제왕","술":"쇠","해":"병","자":"사","축":"묘","인":"절","묘":"태","진":"양"},"신":{"자":"장생","해":"목욕","술":"관대","유":"건록","신":"제왕","미":"쇠","오":"병","사":"사","진":"묘","묘":"절","인":"태","축":"양"},"임":{"신":"장생","유":"목욕","술":"관대","해":"건록","자":"제왕","축":"쇠","인":"병","묘":"사","진":"묘","사":"절","오":"태","미":"양"},"계":{"묘":"장생","인":"목욕","축":"관대","자":"건록","해":"제왕","술":"쇠","유":"병","신":"사","미":"묘","오":"절","사":"태","진":"양"}};const Ti={"갑":{"갑":["술","해"],"을":["술","해"]},"을":{"갑":["술","해"],"을":["술","해"]},"병":{"병":["신","유"],"정":["신","유"]},"정":{"병":["신","유"],"정":["신","유"]},"무":{"무":["오","미"],"기":["오","미"]},"기":{"무":["오","미"],"기":["오","미"]},"경":{"경":["진","사"],"신":["진","사"]},"신":{"경":["진","사"],"신":["진","사"]},"임":{"임":["인","묘"],"계":["인","묘"]},"계":{"임":["인","묘"],"계":["인","묘"]}},Fi={"갑":{"갑":["축","미"],"무":["축","미"]},"을":{"을":["자","신"],"기":["자","신"]},"병":{"병":["해","유"],"정":["해","유"]},"정":{"병":["해","유"],"정":["해","유"]},"무":{"갑":["축","미"],"무":["축","미"]},"기":{"을":["자","신"],"기":["자","신"]},"경":{"경":["축","미"],"신":["인","오"]},"신":{"경":["인","오"],"신":["인","오"]},"임":{"임":["묘","사"],"계":["묘","사"]},"계":{"임":["묘","사"],"계":["묘","사"]}};function _i(e,t){const r=e.getMonth()+1,a=t.day.gan,s={1:{"임":10,"계":8,"갑":-5,"을":-3},2:{"갑":5,"을":8,"임":3,"계":2},3:{"갑":10,"을":10,"병":5,"정":5},4:{"병":8,"정":8,"무":5,"기":5},5:{"병":10,"정":10,"무":3,"기":3},6:{"병":8,"정":8,"경":-3,"신":-3},7:{"무":10,"기":10,"경":3,"신":3},8:{"경":8,"신":8,"무":5,"기":5},9:{"경":10,"신":10,"임":3,"계":3},10:{"임":5,"계":5,"경":5,"신":5},11:{"임":8,"계":8,"갑":-3,"을":-3},12:{"임":10,"계":10,"병":-5,"정":-5}}[r];return s&&a in s&&s[a]||0}const Pi=["갑","을","병","정","무","기","경","신","임","계"],Ai=["자","축","인","묘","진","사","오","미","신","유","술","해"];function Li(e,t,r){const a=t.indexOf(e);return-1===a?t[0]:r?t[(a-1+t.length)%t.length]:t[(a+1)%t.length]}function Ri(e,t,r,a,s){const n=(new Date).getFullYear()-e,i=function(e,t,r,a){const s=["갑","병","무","경","임"].includes(Pi[(e-4)%10]),n="male"===t&&s||"female"===t&&!s,i=[];let l=r,d=a;for(let o=0;o<10;o++)l=Li(l,Pi,!n),d=Li(d,Ai,!n),i.push({gan:l,ji:d,combined:`${l}${d}`,startAge:5+10*o,endAge:5+10*o+9,description:`${5+10*o}세 ~ ${5+10*o+9}세`});return i}(e,r,a,s);return i.find(e=>n>=e.startAge&&n<=e.endAge)||null}function Oi(){return function(e){const t=e-1984,r=Pi[(t%10+10)%10],a=Ai[(t%12+12)%12];return{year:e,gan:r,ji:a,combined:`${r}${a}`,description:`${e}년 (${r}${a}년)`}}((new Date).getFullYear())}function Ki(e,t,r){const a=e.toLowerCase(),s=t.day.heavenly;if(a.includes("성격")||a.includes("성향"))return`${s} 일간이신 분은 특별한 성향을 가지고 계십니다. 사주의 오행 균형이 평균 ${r.averageScore}점으로 ${r.averageScore>=70?"매우 좋은":r.averageScore>=50?"균형잡힌":"개선 가능한"} 상태입니다. 더 자세한 분석은 AI 서비스 연결 후 가능합니다. 😊`;if(a.includes("직업")||a.includes("진로")||a.includes("일")){const e=Object.entries(r.fiveElements).sort((e,t)=>t[1]-e[1])[0];return`${e[0]}의 기운이 강하시네요 (${e[1]}점). 이는 직업 선택에 중요한 영향을 미칩니다. ${s} 일간의 특성과 함께 고려하면 더 정확한 진로 조언을 드릴 수 있습니다. AI 서비스가 복구되면 상세히 설명해드리겠습니다. 💼`}if(a.includes("연애")||a.includes("사랑")||a.includes("결혼")||a.includes("배우자"))return`${s} 일간이신 분의 연애운은 사주의 십성 분포와 밀접한 관련이 있습니다. 총 점수 ${r.totalScore}점으로 ${r.totalScore>=500?"좋은":"무난한"} 편입니다. 배우자 궁합은 상대방의 사주와 함께 봐야 정확합니다. 💕`;if(a.includes("재물")||a.includes("돈")||a.includes("재운")||a.includes("투자"))return`사주의 재성(財星) 분포를 보면 재물운에 대한 힌트를 얻을 수 있습니다. 오행 균형이 ${r.averageScore}점인 것을 고려하면, ${r.averageScore>=70?"안정적인 재물 관리가 가능":"신중한 재테크가 필요"}합니다. AI 서비스 복구 후 더 자세히 알려드리겠습니다. 💰`;if(a.includes("건강")||a.includes("질병")){const e=Object.entries(r.fiveElements).sort((e,t)=>e[1]-t[1])[0];return`오행 중 ${e[0]}이 ${e[1]}점으로 약한 편입니다. 이 오행과 관련된 신체 부위를 주의하시는 것이 좋습니다. ${s} 일간의 건강 특성과 함께 종합적으로 관리하세요. 🏥`}return`${s} 일간이신 분의 사주를 분석해드리겠습니다. 전체 오행 균형은 평균 ${r.averageScore}점으로 ${r.averageScore>=70?"매우 우수한":r.averageScore>=50?"균형잡힌":"보완이 필요한"} 상태입니다. 더 구체적인 질문을 주시면 자세히 답변드리겠습니다! 😊`}function Bi({customer:e,fourPillars:t,analysisResult:r,onClose:n}){const[i,l]=a.useState([{role:"system",content:`안녕하세요 ${e.name}님! 저는 사주명리학 AI 상담사입니다. ${e.name}님의 사주팔자를 바탕으로 맞춤 조언을 드리겠습니다. 궁금하신 점을 물어보세요! 😊`,timestamp:new Date}]),[d,o]=a.useState(""),[c,m]=a.useState(!1),x=a.useRef(null),g=a.useRef(null),[h,u]=a.useState(new Map),[p,b]=a.useState(!1),y=a.useRef(null);a.useEffect(()=>{var e;null==(e=x.current)||e.scrollIntoView({behavior:"smooth"})},[i]),a.useEffect(()=>{var e;null==(e=g.current)||e.focus()},[]),a.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;y.current=new e,y.current.lang="ko-KR",y.current.continuous=!1,y.current.interimResults=!1,y.current.onresult=e=>{const t=e.results[0][0].transcript;o(t),b(!1)},y.current.onerror=e=>{b(!1)},y.current.onend=()=>{b(!1)}}return()=>{y.current&&y.current.stop()}},[]);const j=async a=>{try{const s=`${e.id}_${a.toLowerCase().trim()}`;if(h.has(s))return h.get(s);const n=function(e,t,r,a){const s=parseInt(e.birth_date.split("-")[0]),n=(parseInt(e.birth_date.split("-")[1]),(new Date).getFullYear()-s),i=new Date,l=Object.entries(r.fiveElements).map(([e,t])=>`${e}: ${t}점`).join(", "),d=Object.entries(r.tenGods).map(([e,t])=>`${e}: ${t}점`).join(", "),o=Ri(s,0,e.gender,t.month.heavenly,t.month.earthly),c=Oi(),m={year:{gan:t.year.heavenly,ji:t.year.earthly},month:{gan:t.month.heavenly,ji:t.month.earthly},day:{gan:t.day.heavenly,ji:t.day.earthly},time:{gan:t.hour.heavenly,ji:t.hour.earthly},ohHaengBalance:r.fiveElements},x=_i(i,m),g=$i(i),h=Ei(i,m,"종합운");return`당신은 30년 경력의 사주명리학 전문가입니다. ${e.name}님에게 친구처럼 편하게 조언하듯 자연스럽게 대화하세요.\n\n🙋 고객 정보:\n- 이름: ${e.name}님\n- 생년월일: ${e.birth_date} (${"lunar"===e.lunar_solar?"음력":"양력"})\n- 나이: ${n}세\n- 생시: ${e.birth_time||"미상"}\n- 성별: ${"male"===e.gender?"남성":"여성"}\n\n🔮 사주팔자 (四柱八字):\n- 년주(年柱): ${t.year.combined} (${t.year.heavenly} ${t.year.earthly})\n- 월주(月柱): ${t.month.combined} (${t.month.heavenly} ${t.month.earthly})\n- 일주(日柱): ${t.day.combined} (${t.day.heavenly} ${t.day.earthly}) ⭐일간\n- 시주(時柱): ${t.hour.combined} (${t.hour.heavenly} ${t.hour.earthly})\n\n⚖️ 오행 균형 (五行均衡):\n${l}\n- 평균: ${r.averageScore}점\n\n🎭 십성 분포 (十星分布):\n${d}\n\n🌊 현재 운세 (運勢):\n- 대운(大運): ${o?`${o.combined} (${o.description})`:"계산 불가"}\n- 세운(歲運): ${c.combined} (${c.description})\n- 월운(月運): ${x>0?"+":""}${x}점 (${i.getMonth()+1}월)\n- 일운(日運): ${g.combined} (오늘 ${h>0?"+":""}${h}점)\n\n💬 사용자 질문: "${a}"\n\n✅ 반드시 지킬 사항:\n1. 🌏 순수 한국어만 사용 (한자어 단어는 괜찮지만, 중국어 글자, 영어, 일본어, 아랍어 등 외국어 문자는 절대 금지)\n2. 🚫 <think> 태그나 사고 과정 절대 보여주지 말 것\n3. 📝 마크다운 형식(#, **, -, 등) 사용하지 말 것\n4. 💬 친구에게 말하듯 "~거든요", "~해요", "~네요" 같은 편한 말투 사용\n5. 💡 현실적이고 균형 잡힌 조언 제공:\n   - 좋은 점만 강조하지 말고 주의할 점도 반드시 언급\n   - 낮은 점수(60점 미만) 오행이나 십성은 솔직하게 알려주고 극복 방법 제시\n   - "~하면 좋아요"가 아닌 "~해야 합니다", "~주의하세요" 같은 구체적 표현 사용\n6. 📋 구체적인 실천 방법 제시:\n   - 추상적인 조언 금지 (예: "노력하세요" ❌)\n   - 구체적인 행동 지침 제공 (예: "매일 아침 30분 명상하세요" ✅)\n   - 시기, 방법, 대상을 명확히 제시\n7. ⚠️ 위험 요소 명확히 전달:\n   - 오행 균형이 낮은 부분은 어떤 문제가 생길 수 있는지 구체적으로 설명\n   - 피해야 할 행동, 조심해야 할 시기를 명시\n8. 🔮 ${e.name}님의 사주팔자를 바탕으로 오행 균형이나 십성 분포를 근거로 설명\n9. 🌊 운세 정보 적극 활용:\n   - "오늘", "이번 달", "올해" 질문에는 반드시 대운/세운/월운/일운 정보를 활용\n   - 대운(大運)은 10년 주기의 큰 흐름, 현재 인생 단계 설명 시 사용\n   - 세운(歲運)은 올해 전체 운세, 연간 계획이나 목표 조언 시 사용\n   - 월운(月運)은 이번 달 기운, 월별 주의사항이나 활동 권장 시 사용\n   - 일운(日運)은 오늘 하루 운세, 당일 결정이나 행동 조언 시 사용\n   - 점수가 음수면 "조심해야 할 시기", 양수면 "기회를 잡을 시기"로 해석\n10. 📏 600-900자 정도로 충분히 설명\n11. 💼 실용적 답변 구조:\n   - 1단계: 현재 운세 종합 판단 (대운+세운+월운+일운 기반)\n   - 2단계: 질문에 대한 핵심 답변 (YES/NO 또는 확률 제시)\n   - 3단계: 근거 설명 (사주팔자, 오행, 십성, 운세 정보 활용)\n   - 4단계: 구체적 행동 지침 (3-5가지, "~하세요", "~하면 좋습니다" 형식)\n   - 5단계: 주의사항 및 타이밍 (피해야 할 것, 최적 시기)\n\n예시: "앱 개발 잘될까요?" 질문에는\n→ "현재 세운 을사는 혁신과 도전의 해라서 새로운 사업에 유리합니다. 다만 월운이 0점이라 이번 달보다는 다음 달부터 본격적으로 시작하는 게 좋겠어요. 구체적으로 다음과 같이 준비하세요: 1) 이번 달은 기획과 시장조사에 집중 2) 다음 달 월운이 올라가면 개발 착수 3) 대운 갑오의 안정적 에너지를 활용해 꾸준히 진행"\n\n지금 바로 순수 한국어로만 답변을 시작하세요 (외국어 문자 사용 절대 금지):`}(e,t,r,a),i=await fetch("/api/v1/saju/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n,userQuestion:a})});if(!i.ok)return Ki(a,t,r);const l=await i.json();return l.success&&l.response?(u(e=>new Map(e).set(s,l.response)),l.response):Ki(a,t,r)}catch(s){return Ki(a,t,r)}},f=async()=>{if(!d.trim()||c)return;const e={role:"user",content:d.trim(),timestamp:new Date};l(t=>[...t,e]),o(""),m(!0);try{const t={role:"assistant",content:await j(e.content),timestamp:new Date};l(e=>[...e,t])}catch(t){const e={role:"assistant",content:"죄송합니다. 응답 생성 중 오류가 발생했습니다. 다시 시도해주세요.",timestamp:new Date};l(t=>[...t,e])}finally{m(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-center md:items-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-3xl md:rounded-3xl shadow-2xl w-full max-w-5xl h-[85vh] md:h-[750px] flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 rounded-t-3xl md:rounded-t-3xl flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-2xl",children:"🔮"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"사주명리 AI 상담사"}),s.jsxs("p",{className:"text-purple-100 text-xs",children:[e.name,"님 전문 상담"]})]})]}),s.jsx("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map((e,t)=>s.jsx("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:s.jsxs("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 "+("user"===e.role?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"assistant"===e.role?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100":"bg-purple-50 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300 border border-purple-200 dark:border-purple-800"),children:[s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),s.jsx("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},t)),c&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl px-4 py-3",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),s.jsx("div",{ref:x})]}),1===i.length&&s.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"💡 이런 질문을 해보세요:"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:["제 성격은 어떤가요?","직업운이 궁금해요","올해 재물운은 어떤가요?","연애 운세가 궁금합니다"].map((e,t)=>s.jsx("button",{onClick:()=>o(e),className:"text-xs px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e},t))})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{y.current?p?(y.current.stop(),b(!1)):(y.current.start(),b(!0)):alert("이 브라우저는 음성 인식을 지원하지 않습니다.")},disabled:c,className:`px-3 py-3 rounded-full font-medium transition-all shadow-md ${p?"bg-red-500 text-white animate-pulse-strong":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"} disabled:opacity-50`,title:"음성 입력",children:p?"🎤":"🎙️"}),s.jsx("input",{ref:g,type:"text",value:d,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f())},placeholder:p?"음성 인식 중...":"질문을 입력하세요...",disabled:c,className:"flex-1 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-full text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),s.jsx("button",{onClick:f,disabled:!d.trim()||c,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-medium hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:"전송"})]}),p&&s.jsx("div",{className:"mt-2 text-center text-sm text-red-500 dark:text-red-400 animate-pulse",children:"🎤 듣고 있습니다... 말씀해주세요"})]})]})})}function Ii({onClose:e}){const[t,r]=a.useState("what");return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4","data-testid":"beginner-guide-modal",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[85vh] overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"📖 사주분석 초보자 가이드"}),s.jsx("p",{className:"text-purple-100",children:"사주팔자로 보는 레이더 차트 기반 운명 분석"})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"닫기",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>r("what"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("what"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"사주분석이란?"}),s.jsx("button",{onClick:()=>r("how"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("how"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"사용 방법"}),s.jsx("button",{onClick:()=>r("terms"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("terms"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"용어 설명"})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)]",children:["what"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"🔮 사주분석이란?"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:["사주팔자(四柱八字)는 ",s.jsx("strong",{children:"태어난 년·월·일·시"}),"의 ",s.jsx("strong",{children:"천간(天干)과 지지(地支)"}),"를 조합하여 총 ",s.jsx("strong",{children:"8글자"}),"로 운명을 분석하는 동양 철학입니다."]}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:["우리 시스템은 전통 사주학을 현대적으로 재해석하여 ",s.jsx("strong",{children:"9개 대항목, 수십 개 중항목"}),"으로 세분화된 ",s.jsx("strong",{children:"레이더 차트"}),"로 보여줍니다."]}),s.jsx("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:["💡 ",s.jsx("strong",{children:"마치 건강검진처럼"}),", 인생의 각 영역(직업, 재물, 건강, 인간관계 등)을 점수화하여 강점과 약점을 한눈에 파악할 수 있습니다!"]})})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"💡 우리 시스템의 특징"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"📊"}),s.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-1",children:"9개 대항목 분석"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"주본(기본), 육친, 십성, 용신, 격국, 주능, 주흉, 육대성향, 십칠대성향"})]}),s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🎯"}),s.jsx("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-1",children:"레이더 차트 시각화"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"각 항목을 0-100점으로 점수화하여 한눈에 비교"})]}),s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🤖"}),s.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-1",children:"AI 맞춤 해석"}),s.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"궁금한 점을 AI에게 직접 질문하여 상세 답변 받기"})]}),s.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"📄"}),s.jsx("h4",{className:"font-bold text-pink-900 dark:text-pink-300 mb-1",children:"PDF 출력 가능"}),s.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-400",children:"분석 결과를 PDF로 저장하여 보관 및 인쇄"})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"🌟 무엇을 알 수 있나요?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-blue-500",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"📝 주본(主本) - 기본 정보"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"일간(나를 나타내는 글자), 월지, 계절, 음양오행 균형 등 사주의 기초 정보"})]}),s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-green-500",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"👨‍👩‍👧‍👦 육친(六親) - 인간관계"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"부모, 형제, 배우자, 자녀와의 인연 및 관계의 질"})]}),s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-purple-500",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"⚡ 십성(十星) - 성향 및 재능"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"비견, 식신, 정재, 정관 등 10가지 성향의 균형 상태"})]}),s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-red-500",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"🌊 용신(用神) - 필요한 에너지"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"사주에 부족하거나 필요한 오행, 보완 방법 제시"})]}),s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-yellow-500",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"🏆 격국(格局) - 인생 패턴"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"종재격, 종살격, 식신생재격 등 사주의 전체적인 구조"})]}),s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-orange-500",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"💪 주능(主能) - 핵심 능력"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"리더십, 창의력, 분석력 등 타고난 주요 능력 점수"})]}),s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-pink-500",children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"⚠️ 주흉(主凶) - 주의사항"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"충(沖), 형(刑), 파(破), 해(害) 등 주의해야 할 요소"})]})]})]}),s.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"⚠️ 참고사항"}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-1",children:[s.jsxs("li",{children:["• 사주분석은 ",s.jsx("strong",{children:"참고 자료"}),"이지 절대적인 운명이 아닙니다."]}),s.jsxs("li",{children:["• 레이더 차트는 상대적 강약을 보여주는 것이므로 ",s.jsx("strong",{children:"균형"}),"이 중요합니다."]}),s.jsx("li",{children:"• 음력/양력 구분을 정확히 해야 합니다 (1985년 이후는 대부분 양력)."}),s.jsx("li",{children:"• 정확한 태어난 시간(시, 분)을 아는 것이 매우 중요합니다!"})]})]})]}),"how"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"📱 화면 구성 및 사용법"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"고객 선택하기"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:['화면 상단의 "고객 선택하기"를 눌러 ',s.jsx("strong",{children:"생년월일시"}),"를 정확히 입력하세요."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 음력/양력 구분이 매우 중요합니다! 시간은 24시간 기준으로 정확히 입력하세요. 예: 오후 2시 = 14:00"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"사주팔자 확인"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["고객을 선택하면 보라색 박스에 ",s.jsx("strong",{children:"사주팔자 8글자"}),"가 표시됩니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsx("p",{children:"💡 예: 辛亥 己亥 甲寅 丙寅 (년주 월주 일주 시주)"}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"일간"}),"(세 번째 칸의 첫 글자)이 나 자신을 의미합니다"]}),s.jsx("p",{children:"💡 오행 균형도 함께 표시됩니다 (목/화/토/금/수 비율)"})]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"대항목 선택"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:"9개 대항목 중 궁금한 카테고리를 선택하세요."}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 처음이라면 ",s.jsx("strong",{children:"주본 → 육친 → 십성"})," 순서로 보는 것을 추천합니다. 기본 정보부터 이해한 후 세부 분석으로 들어가세요!"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"4"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"중항목 탭 선택"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["대항목을 선택하면 하단에 ",s.jsx("strong",{children:"중항목 탭"}),"이 나타납니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsx("p",{children:'💡 예: "주본" 선택 → "일간", "월지", "계절" 등의 탭 표시'}),s.jsx("p",{children:"💡 각 탭을 클릭하면 해당 항목의 레이더 차트가 변경됩니다"})]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"레이더 차트 분석"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["거미줄 모양의 레이더 차트에서 ",s.jsx("strong",{children:"튀어나온 부분"}),"이 강점, ",s.jsx("strong",{children:"움푹 들어간 부분"}),"이 약점입니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"80-100점"}),": 매우 강함 (천부적 재능)"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"60-79점"}),": 강함 (노력으로 발휘 가능)"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"40-59점"}),": 보통 (평균 수준)"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"20-39점"}),": 약함 (보완 필요)"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"0-19점"}),": 매우 약함 (집중 보완 필요)"]})]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"6"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"세부 항목 카드 확인"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["레이더 차트 하단에 각 항목의 ",s.jsx("strong",{children:"점수, 색상, 설명"}),"이 카드 형태로 표시됩니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 색상별로 정렬되므로 빨간색(낮은 점수) 항목을 먼저 확인하여 약점을 파악하세요!"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"7"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"AI에게 질문하기"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:'우측 상단의 "🤖 AI에게 질문하기" 버튼을 누르면 전문 사주상담사 AI와 대화할 수 있습니다.'}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsx("p",{children:'💡 예시: "제 사주에서 재물운이 어떤가요?"'}),s.jsx("p",{children:'💡 예시: "정재와 편재의 차이가 뭔가요?"'}),s.jsx("p",{children:'💡 예시: "십성 균형이 안 맞는데 어떻게 보완하나요?"'}),s.jsx("p",{children:'💡 예시: "올해 운세는 어떤가요?"'})]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"8"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"PDF 출력"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:'"📄 PDF 출력" 버튼으로 현재 분석 결과를 PDF로 저장할 수 있습니다.'}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 고객 상담용 자료나 개인 보관용으로 활용하세요. 인쇄도 가능합니다!"]})]})]})]})]}),s.jsxs("section",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[s.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3 text-lg",children:"🎯 실전 활용 시나리오"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"🎓"}),s.jsx("span",{children:"시나리오 1: 자기 이해 및 성격 파악 (입문자)"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"}),' "주본" 대항목 선택',s.jsx("br",{}),s.jsx("strong",{children:"2단계:"}),' "일간" 중항목 확인 → 나를 나타내는 글자 파악',s.jsx("br",{}),s.jsx("strong",{children:"3단계:"}),' "십성" 대항목 선택 → 비견, 식신, 재성 등 비율 확인',s.jsx("br",{}),s.jsx("strong",{children:"4단계:"}),' "육대성향" 선택 → 기본 성격 6가지 확인',s.jsx("br",{}),s.jsx("strong",{children:"5단계:"}),' AI에게 "제 성격을 한 문장으로 요약하면?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"💡 결과:"})," 나의 기본 성격과 타고난 특성 이해"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"💼"}),s.jsx("span",{children:"시나리오 2: 직업 적성 파악"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"}),' "주능" 대항목 선택',s.jsx("br",{}),s.jsx("strong",{children:"2단계:"}),' "업무능력", "창의력", "리더십" 중항목 차례로 확인',s.jsx("br",{}),s.jsx("strong",{children:"3단계:"})," 70점 이상인 능력 메모",s.jsx("br",{}),s.jsx("strong",{children:"4단계:"}),' "십성" 대항목에서 정관/편관(직장), 정재/편재(사업) 비율 확인',s.jsx("br",{}),s.jsx("strong",{children:"5단계:"}),' AI에게 "제 사주로 공무원과 프리랜서 중 어디가 맞나요?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"💡 결과:"})," 직장 vs 사업, 안정 vs 도전 중 어디가 맞는지 파악"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"💰"}),s.jsx("span",{children:"시나리오 3: 재물운 및 투자 성향"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"}),' "십성" 대항목 선택 → "재성" 중항목 확인',s.jsx("br",{}),s.jsx("strong",{children:"2단계:"})," 정재(정기 수입) vs 편재(투자 수입) 비율 확인",s.jsx("br",{}),s.jsx("strong",{children:"3단계:"}),' "주본" → "오행균형" 확인 → 금(金)과 수(水) 비율 체크',s.jsx("br",{}),s.jsx("strong",{children:"4단계:"}),' "주능" → "재테크능력" 점수 확인',s.jsx("br",{}),s.jsx("strong",{children:"5단계:"}),' AI에게 "제 사주로 주식투자가 맞나요, 부동산이 맞나요?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"💡 결과:"})," 재물 형성 방법 및 투자 스타일 파악"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"💑"}),s.jsx("span",{children:"시나리오 4: 인간관계 및 결혼운"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"}),' "육친" 대항목 선택',s.jsx("br",{}),s.jsx("strong",{children:"2단계:"}),' "배우자" 중항목 확인 → 점수와 특성 파악',s.jsx("br",{}),s.jsx("strong",{children:"3단계:"}),' "십성" → "관성"(여자), "재성"(남자) 중항목 확인',s.jsx("br",{}),s.jsx("strong",{children:"4단계:"}),' "주흉" 대항목에서 "충(沖)"이 있는지 확인 (갈등 요소)',s.jsx("br",{}),s.jsx("strong",{children:"5단계:"}),' AI에게 "제 배우자는 어떤 성격일까요?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"💡 결과:"})," 이상형, 결혼 시기, 배우자 타입 파악"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"⚡"}),s.jsx("span",{children:"시나리오 5: 약점 보완 및 개선 방향"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"})," 모든 대항목을 빠르게 훑어보며 빨간색(낮은 점수) 항목 체크",s.jsx("br",{}),s.jsx("strong",{children:"2단계:"}),' "용신" 대항목 선택 → 부족한 오행 확인',s.jsx("br",{}),s.jsx("strong",{children:"3단계:"})," 약한 항목들 리스트업 (예: 건강, 인내력, 대인관계 등)",s.jsx("br",{}),s.jsx("strong",{children:"4단계:"}),' AI에게 "제 사주에서 토(土)가 부족한데 어떻게 보완하나요?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"5단계:"})," 방향, 색상, 직업, 주거지 등 보완 방법 실천",s.jsx("br",{}),s.jsx("strong",{children:"💡 결과:"})," 약점을 미리 알고 의식적으로 보완하여 균형 개선"]})]})]})]}),s.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"⚠️ 자주 묻는 질문 (FAQ)"}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-2",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"레이더 차트가 한쪽으로 치우쳐 있어요. 나쁜 건가요?"}),s.jsx("br",{}),"A: 아닙니다! 강한 영역이 있다는 뜻입니다. 오히려 ",s.jsx("strong",{children:"특화된 재능"}),"이 있다고 볼 수 있습니다. 다만 약한 부분을 보완하면 더 좋습니다."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"대항목이 9개나 되는데 다 봐야 하나요?"}),s.jsx("br",{}),"A: 처음엔 ",s.jsx("strong",{children:"주본, 육친, 십성"})," 3가지만 집중하세요. 익숙해지면 나머지도 천천히 보시면 됩니다."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"점수가 낮은 항목이 많아요. 운이 없는 건가요?"}),s.jsx("br",{}),"A: 점수가 낮다는 것은 ",s.jsx("strong",{children:"노력이 필요한 영역"}),"이라는 뜻입니다. 미리 알았으니 대비할 수 있습니다! 용신(用神)을 참고하여 보완하세요."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"중항목 탭이 너무 많아서 어떤 것부터 봐야 할지 모르겠어요."}),s.jsx("br",{}),"A: 각 대항목의 ",s.jsx("strong",{children:"첫 번째 탭"}),"부터 순서대로 보시면 됩니다. 시스템이 중요도 순으로 배치했습니다."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"사주팔자가 안 좋게 나왔는데 바꿀 수 있나요?"}),s.jsx("br",{}),"A: 타고난 사주는 바꿀 수 없지만, ",s.jsx("strong",{children:"운(運)은 노력으로 바꿀 수 있습니다"}),". 용신을 보강하고, 약한 부분을 의식적으로 개선하세요!"]})]})]})]})]}),"terms"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"🌳 오행(五行) - 5가지 기본 에너지"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"우주 만물을 구성하는 5가지 기본 요소입니다."}),s.jsxs("div",{className:"grid md:grid-cols-5 gap-3",children:[s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"🌳"}),s.jsx("div",{className:"font-bold text-green-900 dark:text-green-300",children:"목(木)"}),s.jsxs("div",{className:"text-xs text-green-700 dark:text-green-400 mt-1",children:["나무, 성장",s.jsx("br",{}),"봄, 동쪽",s.jsx("br",{}),"인자함, 유연함"]})]}),s.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"🔥"}),s.jsx("div",{className:"font-bold text-red-900 dark:text-red-300",children:"화(火)"}),s.jsxs("div",{className:"text-xs text-red-700 dark:text-red-400 mt-1",children:["불, 열정",s.jsx("br",{}),"여름, 남쪽",s.jsx("br",{}),"활동적, 명예"]})]}),s.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"🏔️"}),s.jsx("div",{className:"font-bold text-yellow-900 dark:text-yellow-300",children:"토(土)"}),s.jsxs("div",{className:"text-xs text-yellow-700 dark:text-yellow-400 mt-1",children:["흙, 안정",s.jsx("br",{}),"환절기, 중앙",s.jsx("br",{}),"믿음직, 중재"]})]}),s.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-lg text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"⚔️"}),s.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-300",children:"금(金)"}),s.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-400 mt-1",children:["금속, 결단",s.jsx("br",{}),"가을, 서쪽",s.jsx("br",{}),"강인함, 의리"]})]}),s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"💧"}),s.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300",children:"수(水)"}),s.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-400 mt-1",children:["물, 지혜",s.jsx("br",{}),"겨울, 북쪽",s.jsx("br",{}),"부드러움, 융통성"]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:["💡 ",s.jsx("strong",{children:"상생(相生)"}),": 木→火→土→金→水→木 (서로 생해줌)",s.jsx("br",{}),"💡 ",s.jsx("strong",{children:"상극(相剋)"}),": 木剋土, 土剋水, 水剋火, 火剋金, 金剋木 (서로 제압)"]})})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"⚡ 십성(十星) - 10가지 성향"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"일간(나)을 기준으로 다른 글자들과의 관계를 10가지로 분류합니다."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300 mb-1",children:"비견(比肩)"}),s.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:"나와 같은 오행. 독립심, 자존심, 경쟁심"})]}),s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300 mb-1",children:"겁재(劫財)"}),s.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:"비견과 유사. 과감함, 행동력, 변화 추구"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-green-900 dark:text-green-300 mb-1",children:"식신(食神)"}),s.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"표현력, 여유, 예술성, 복록"})]}),s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-green-900 dark:text-green-300 mb-1",children:"상관(傷官)"}),s.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"재능, 비판력, 창의력, 예민함"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-1",children:"편재(偏財)"}),s.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"사업, 투자, 변동재물, 활동성"})]}),s.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-1",children:"정재(正財)"}),s.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"월급, 안정적 수입, 근면 성실"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-purple-900 dark:text-purple-300 mb-1",children:"편관(偏官)"}),s.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-400",children:"강한 추진력, 도전, 무예, 권력"})]}),s.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-purple-900 dark:text-purple-300 mb-1",children:"정관(正官)"}),s.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-400",children:"명예, 지위, 공직, 질서, 책임감"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-pink-900 dark:text-pink-300 mb-1",children:"편인(偏印)"}),s.jsx("div",{className:"text-sm text-pink-700 dark:text-pink-400",children:"독특한 학문, 예술, 종교, 철학"})]}),s.jsxs("div",{className:"p-3 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-pink-900 dark:text-pink-300 mb-1",children:"정인(正印)"}),s.jsx("div",{className:"text-sm text-pink-700 dark:text-pink-400",children:"학문, 지혜, 명예, 어머니, 보호"})]})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"👨‍👩‍👧‍👦 육친(六親) - 6가지 인간관계"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"사주에서 가족 및 주변 사람들과의 관계를 나타냅니다."}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-1",children:"부모"}),s.jsxs("div",{className:"text-xs text-indigo-700 dark:text-indigo-400",children:["인성(정인/편인)으로 판단",s.jsx("br",{}),"교육, 보호, 지혜 전수"]})]}),s.jsxs("div",{className:"p-3 bg-teal-50 dark:bg-teal-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-teal-900 dark:text-teal-300 mb-1",children:"형제자매"}),s.jsxs("div",{className:"text-xs text-teal-700 dark:text-teal-400",children:["비겁(비견/겁재)으로 판단",s.jsx("br",{}),"협력 또는 경쟁 관계"]})]}),s.jsxs("div",{className:"p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-rose-900 dark:text-rose-300 mb-1",children:"배우자"}),s.jsxs("div",{className:"text-xs text-rose-700 dark:text-rose-400",children:["남자: 재성(정재/편재)",s.jsx("br",{}),"여자: 관성(정관/편관)"]})]}),s.jsxs("div",{className:"p-3 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-cyan-900 dark:text-cyan-300 mb-1",children:"자녀"}),s.jsxs("div",{className:"text-xs text-cyan-700 dark:text-cyan-400",children:["식상(식신/상관)으로 판단",s.jsx("br",{}),"표현, 창의성, 후손"]})]}),s.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-amber-900 dark:text-amber-300 mb-1",children:"친구/동료"}),s.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400",children:["비겁으로 판단",s.jsx("br",{}),"경쟁 또는 협업 관계"]})]}),s.jsxs("div",{className:"p-3 bg-lime-50 dark:bg-lime-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-lime-900 dark:text-lime-300 mb-1",children:"상사/직장"}),s.jsxs("div",{className:"text-xs text-lime-700 dark:text-lime-400",children:["관성으로 판단",s.jsx("br",{}),"권위, 책임, 규율"]})]})]})]}),s.jsxs("section",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-2",children:"🎯 간단히 기억하세요!"}),s.jsxs("ul",{className:"text-sm text-purple-700 dark:text-purple-400 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"오행"}),": 목/화/토/금/수 = 내 몸의 에너지 균형"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"십성"}),": 나를 중심으로 한 10가지 관계 (성격/재능 판단)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"육친"}),": 가족/주변 사람과의 인연 (인간관계 판단)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"용신"}),": 부족한 오행을 채워주는 보약 같은 존재"]})]}),s.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-3",children:"💡 이 4가지 개념만 이해해도 사주분석의 70%는 이해할 수 있습니다!"})]})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:s.jsx("button",{onClick:e,className:"w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl",children:"시작하기"})})]})})}function zi(){var e,t,r,n,i;const[l,d]=a.useState("jubon"),[o,c]=a.useState(""),[m,x]=a.useState(null),[g,h]=a.useState(null),[u,p]=a.useState(!1),[b,y]=a.useState(null),[j,f]=a.useState(!1),[v,k]=a.useState(!1),[N,w]=a.useState(null),[S,C]=a.useState(!1),[M,$]=a.useState(null),[E,D]=a.useState(hn),[T,F]=a.useState(!1),[_,P]=a.useState(!1),A=E.find(e=>e.id===l);a.useEffect(()=>{A&&A.subcategories.length>0&&c(A.subcategories[0].id)},[l,A]),a.useEffect(()=>{p((null==m?void 0:m.id)!==(null==g?void 0:g.id))},[m,g]),a.useEffect(()=>{(null==g?void 0:g.id)?R(g.id):(y(null),xn(null))},[g]),a.useEffect(()=>{(async()=>{if(!j&&!v){k(!0);try{D([...hn]),f(!0)}catch(e){}finally{k(!1)}}})()},[j,v]);const L=async e=>{try{C(!0),$(null),w(null);const t=function(e){const t=new Date(e.birth_date),[r]=e.birth_time.split(":").map(Number);let a=null;if(e.saju_data)try{a="string"==typeof e.saju_data?JSON.parse(e.saju_data):e.saju_data}catch(s){}return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:r,isLunar:"lunar"===e.lunar_solar,gender:e.gender,sajuData:a}}(e),r=await fi(t);w(r)}catch(t){$(t.message||"인생차트 로드 실패")}finally{C(!1)}},R=async e=>{try{const r=await async function(e){const t=`${qa}?id=${e}`,r=await fetch(t);if(!r.ok)throw new Error("고객 정보를 불러오는데 실패했습니다");return r.json()}(e);let a;if(a=Array.isArray(r.data)?r.data.find(t=>t.id===e):r.data,!a)return y(null),void xn(null);let s=a.saju_data;if("string"==typeof s)try{s=JSON.parse(s)}catch(t){s=null}s||(s={fullSaju:"사주 데이터 계산 필요",ohHaengBalance:{"목":20,"화":20,"토":20,"금":20,"수":20},sipSungBalance:{"비겁":10,"식상":10,"재성":10,"관성":10,"인성":10},_isMinimal:!0}),y(s),xn(s)}catch(r){xn(null)}},O=a.useMemo(()=>{if(!A||!o)return null;const e=A.subcategories.find(e=>e.id===o);return e?{categoryId:l,subcategoryId:o,title:`${A.name} - ${e.name}`,items:e.items,chartData:e.items.map(e=>e.baseScore),maxValue:100}:null},[l,o,A]),K=g?`${g.birth_date} ${g.birth_time}`:"고객을 선택해주세요",B=a.useMemo(()=>{if(!g)return null;const[e,t,r]=g.birth_date.split("-").map(Number),[a,s]=g.birth_time.split(":").map(Number);var n;return n={year:e,month:t,day:r,hour:a,minute:s,isLunar:"lunar"===g.lunar_solar,gender:g.gender},ni.calculateFourPillars(n)},[g]),I=a.useMemo(()=>{var e,t,r,a,s;if(!b||!B||!g)return null;return{fiveElements:b.ohHaengBalance||{},tenGods:b.sipSungBalance||{},totalScore:Object.values(b.ohHaengBalance||{}).reduce((e,t)=>e+t,0),averageScore:Math.round(Object.values(b.ohHaengBalance||{}).reduce((e,t)=>e+t,0)/5),birthInfo:{year:parseInt(g.birth_date.split("-")[0]),month:parseInt(g.birth_date.split("-")[1]),day:parseInt(g.birth_date.split("-")[2]),hour:parseInt(g.birth_time.split(":")[0]),minute:parseInt(g.birth_time.split(":")[1]),isLunar:"lunar"===g.lunar_solar,gender:g.gender},fourPillars:B,sixAreas:{career:(null==(e=b.ohHaengBalance)?void 0:e.화)||0,wealth:(null==(t=b.ohHaengBalance)?void 0:t.금)||0,health:(null==(r=b.ohHaengBalance)?void 0:r.수)||0,relationships:(null==(a=b.ohHaengBalance)?void 0:a.목)||0,study:(null==(s=b.ohHaengBalance)?void 0:s.토)||0,family:50}}},[b,B,g]);return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2 flex-wrap",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white",children:"🔮 통합 사주 레이더 분석"}),s.jsxs("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors flex items-center gap-2",children:[s.jsx("span",{children:"📖"}),s.jsx("span",{children:"초보자 가이드"})]}),null,g&&B&&s.jsxs("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-medium hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[s.jsx("span",{children:"🤖"}),s.jsx("span",{children:"AI에게 질문하기"})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"주문차트 기반 9개 대항목 상세 분석 시스템"}),s.jsx("div",{className:"mt-2 text-sm text-purple-600 dark:text-purple-400",children:"기존 6대/17대/7대 성향 차트가 통합된 새로운 분석 시스템"})]}),s.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx(vn,{onSelect:x,selectedCustomer:m}),m&&s.jsx("button",{onClick:()=>{h(m),p(!1)},disabled:!u,className:"px-6 py-2 rounded-lg font-medium transition-all "+(u?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl animate-pulse":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-500 cursor-not-allowed"),children:u?"✨ 적용하기":"✓ 적용됨"})]}),g&&s.jsxs("div",{className:"mt-2 text-sm text-center text-gray-600 dark:text-gray-400",children:["💡 현재 ",s.jsx("strong",{children:g.name}),"님(",g.birth_date,") 기준으로 분석 중"]}),m&&u&&s.jsxs("div",{className:"mt-2 text-sm text-center text-orange-600 dark:text-orange-400 font-medium",children:["⚠️ ",s.jsx("strong",{children:m.name}),'님으로 변경하려면 "적용하기" 버튼을 클릭하세요']}),g&&b&&s.jsx("div",{className:"mt-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:s.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"사주 팔자:"}),s.jsx("div",{children:b.fullSaju}),s.jsxs("div",{className:"mt-2 grid grid-cols-5 gap-2 text-xs",children:[s.jsxs("div",{children:["목: ",null==(e=b.ohHaengBalance)?void 0:e.목,"%"]}),s.jsxs("div",{children:["화: ",null==(t=b.ohHaengBalance)?void 0:t.화,"%"]}),s.jsxs("div",{children:["토: ",null==(r=b.ohHaengBalance)?void 0:r.토,"%"]}),s.jsxs("div",{children:["금: ",null==(n=b.ohHaengBalance)?void 0:n.금,"%"]}),s.jsxs("div",{children:["수: ",null==(i=b.ohHaengBalance)?void 0:i.수,"%"]})]})]})})]}),g&&s.jsx("div",{className:"mb-6",children:s.jsx(kn,{customer:g,lifetimeFortune:N,loading:S,error:M,onLoadChart:()=>L(g),onScrollToChart:()=>{var e;return null==(e=document.getElementById("hundred-year-chart"))?void 0:e.scrollIntoView({behavior:"smooth"})}})}),N&&g&&s.jsx("div",{id:"hundred-year-chart",className:"mb-8",children:s.jsx(Nn,{data:N.data.lifetimeFortune,currentAge:(e=>{const t=new Date(e),r=new Date;let a=r.getFullYear()-t.getFullYear();const s=r.getMonth()-t.getMonth();(s<0||0===s&&r.getDate()<t.getDate())&&a--;return a+1})(g.birth_date),birthYear:new Date(g.birth_date).getFullYear()})}),g&&b&&!b._isMinimal&&s.jsx("div",{id:"health-system-chart",className:"mb-8",children:s.jsx($n,{sajuData:b,birthYear:new Date(g.birth_date).getFullYear(),birthDate:K})}),g&&b&&!b._isMinimal&&s.jsx("div",{id:"wealth-system-chart",className:"mb-8",children:s.jsx(Pn,{sajuData:b,birthYear:new Date(g.birth_date).getFullYear(),birthDate:K})}),g&&b&&!b._isMinimal&&s.jsx("div",{id:"relationship-system-chart",className:"mb-8",children:s.jsx(Zn,{sajuData:b,birthYear:new Date(g.birth_date).getFullYear(),birthDate:K})}),v&&s.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full"}),s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"🔮 주능/주흉 카테고리 데이터를 백엔드에서 가져오는 중..."})]})}),s.jsx(un,{categories:E,selectedCategory:l,onCategoryChange:d}),A&&s.jsx("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"text-4xl",children:A.icon}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A.name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:A.description}),s.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 mt-1",children:[A.subcategories.length,"개 중항목 • 총 ",A.subcategories.reduce((e,t)=>e+t.items.length,0),"개 세부항목"]})]})]})}),A&&s.jsx(pn,{subcategories:A.subcategories,selectedSubcategory:o,onSubcategoryChange:c}),O&&s.jsx("div",{className:"mb-8",children:s.jsx(jn,{data:O,birthDate:K,sajuData:b})}),s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm",children:[s.jsx("p",{children:"✨ 이 분석은 전통 사주학과 현대 통계학을 결합한 해석입니다."}),s.jsx("p",{className:"mt-1",children:"💡 시간대별 운세 변화는 참고용이며, 개인의 노력과 환경에 따라 달라질 수 있습니다."})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:"9"}),s.jsx("div",{className:"text-sm",children:"대항목"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:E.reduce((e,t)=>e+t.subcategories.length,0)}),s.jsx("div",{className:"text-sm",children:"중항목"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:E.reduce((e,t)=>e+t.subcategories.reduce((e,t)=>e+t.items.length,0),0)}),s.jsx("div",{className:"text-sm",children:"세부항목"})]})]}),T&&g&&B&&s.jsx(Bi,{customer:g,fourPillars:B,analysisResult:I||{fiveElements:(null==b?void 0:b.ohHaengBalance)||{},tenGods:(null==b?void 0:b.sipSungBalance)||{},fourPillars:B,birthInfo:{year:parseInt(g.birth_date.split("-")[0]),month:parseInt(g.birth_date.split("-")[1]),day:parseInt(g.birth_date.split("-")[2]),hour:parseInt(g.birth_time.split(":")[0]),minute:parseInt(g.birth_time.split(":")[1]),isLunar:"lunar"===g.lunar_solar,gender:g.gender}},onClose:()=>F(!1)}),_&&s.jsx(Ii,{onClose:()=>P(!1)})]})})}const qi=a.createContext(void 0);function Wi({children:e,defaultTheme:t="light",storageKey:r="sajuapp-theme"}){const[n,i]=a.useState(()=>{if("undefined"!=typeof window){const e=localStorage.getItem(r);if("light"===e||"dark"===e)return e;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return t});a.useEffect(()=>{const e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(n),localStorage.setItem(r,n)},[n,r]),a.useEffect(()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{localStorage.getItem(r)||i(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[r]);const l={theme:n,setTheme:e=>{i(e)},toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}};return s.jsx(qi.Provider,{value:l,children:e})}const Hi=()=>{const e=a.useContext(qi);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e},Yi=({data:e})=>{const t=a.useRef(null),r=a.useRef(null),n=a.useContext(qi),i="dark"===(null==n?void 0:n.theme);return a.useEffect(()=>{if(!t.current||!e)return;r.current&&r.current.destroy();const a=t.current.getContext("2d");if(!a)return;const s=e.categories.map(e=>e.name),n=e.categories.map(e=>e.score),l=e.categories.map(()=>100),d=i?"rgba(229, 231, 235, 1)":"rgba(31, 41, 55, 1)",o=i?"rgba(107, 114, 128, 0.3)":"rgba(0, 0, 0, 0.1)";return r.current=new Le(a,{type:"radar",data:{labels:s,datasets:[{label:`${e.person1Name} ♥ ${e.person2Name}`,data:n,backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgba(147, 51, 234, 1)",borderWidth:2,pointBackgroundColor:"rgba(147, 51, 234, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(147, 51, 234, 1)",pointRadius:4,pointHoverRadius:6},{label:"이상적 궁합",data:l,backgroundColor:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.3)",borderWidth:1,borderDash:[5,5],pointRadius:0,pointHoverRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{font:{size:12},padding:20,usePointStyle:!0,color:d}},tooltip:{callbacks:{label(e){const t=e.dataset.label||"",r=e.parsed.r||e.parsed.y||0;return`${t}: ${Math.round(r)}점`}}}},scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,font:{size:10},color:d,callback:e=>`${e}점`},pointLabels:{font:{size:13,weight:"bold"},color:d,callback(e,t){const r=n[t];return`${e}\n(${Math.round(r)}점)`}},grid:{color:o}}}}}),()=>{r.current&&r.current.destroy()}},[e,i,n]),s.jsx("div",{className:"w-full h-[400px] p-4",children:s.jsx("canvas",{ref:t})})},Ui=({relationshipAnalysis:e,practicalAnalysis:t,depthAnalysis:r,specialAnalysis:n})=>{const[i,l]=a.useState("overview");if(!(e&&t&&r&&n))return s.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"궁합 분석 결과가 없습니다. 먼저 두 사람을 선택하고 분석하기를 클릭해주세요."});const d=e=>e>=85?"text-green-600 dark:text-green-400":e>=70?"text-blue-600 dark:text-blue-400":e>=50?"text-yellow-600 dark:text-yellow-400":e>=30?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400",o=e=>s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{"매우좋음":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200","좋음":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200","보통":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200","주의":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200","위험":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}[e]}`,children:e}),c=[{key:"firstImpression",label:"첫인상 궁합",icon:"👋"},{key:"communication",label:"대화소통 궁합",icon:"💬"},{key:"valueSystem",label:"가치관 궁합",icon:"💎"},{key:"lifePattern",label:"생활패턴 궁합",icon:"🌅"},{key:"conflictResolution",label:"갈등해결 궁합",icon:"🤝"},{key:"emotional",label:"정서적 궁합",icon:"❤️"},{key:"trust",label:"신뢰도 궁합",icon:"🛡️"}],m=[{key:"economic",label:"경제관념 궁합",icon:"💰"},{key:"career",label:"직업운 궁합",icon:"💼"},{key:"residence",label:"주거환경 궁합",icon:"🏠"},{key:"children",label:"자녀운 궁합",icon:"👶"},{key:"inLaw",label:"시댁/처가 궁합",icon:"👨‍👩‍👧‍👦"}],x=[{key:"sexual",label:"성적 궁합",icon:"🔥"},{key:"spiritual",label:"정신적 궁합",icon:"🧘"},{key:"hobby",label:"취미 궁합",icon:"🎯"},{key:"retirement",label:"노후 궁합",icon:"🌅"}],g=[{key:"noblePerson",label:"귀인운 궁합",icon:"⭐"},{key:"peachBlossom",label:"도화운 궁합",icon:"🌸"},{key:"emptiness",label:"공망 궁합",icon:"🌀"},{key:"sinsal",label:"신살 궁합",icon:"🔮"}];return s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>l("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+("overview"===i?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:"종합 분석"}),s.jsx("button",{onClick:()=>l("relationship"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+("relationship"===i?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:"관계성 분석 (7개 항목)"}),s.jsx("button",{onClick:()=>l("practical"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+("practical"===i?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:"현실적 분석 (5개 항목)"}),s.jsx("button",{onClick:()=>l("depth"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+("depth"===i?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:"심층 분석 (4개 항목)"}),s.jsx("button",{onClick:()=>l("special"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+("special"===i?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:"특수 분석 (4개 항목)"})]})}),s.jsxs("div",{className:"mt-6",children:["overview"===i&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"관계성 종합 분석"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:`text-4xl font-bold ${d(e.averageScore)}`,children:[e.averageScore,"점"]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:e.summary})]}),s.jsx("div",{className:"text-5xl opacity-20",children:"💕"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"현실적 종합 분석"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:`text-4xl font-bold ${d(t.averageScore)}`,children:[t.averageScore,"점"]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:t.summary})]}),s.jsx("div",{className:"text-5xl opacity-20",children:"💍"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"심층 종합 분석"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:`text-4xl font-bold ${d(r.averageScore)}`,children:[r.averageScore,"점"]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:r.summary})]}),s.jsx("div",{className:"text-5xl opacity-20",children:"🌊"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"특수 종합 분석"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:`text-4xl font-bold ${d(n.averageScore)}`,children:[n.averageScore,"점"]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:n.summary})]}),s.jsx("div",{className:"text-5xl opacity-20",children:"✨"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300",children:"관계성 분석"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:c.map(t=>{const r=e[t.key];return r&&"number"==typeof r.score?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xl",children:t.icon}),o(r.level)]}),s.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:t.label}),s.jsxs("div",{className:`text-xl font-bold mt-1 ${d(r.score)}`,children:[r.score,"점"]})]},t.key):null})}),s.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"현실적 분석"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:m.map(e=>{const r=t[e.key];return r&&"number"==typeof r.score?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xl",children:e.icon}),o(r.level)]}),s.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:e.label}),s.jsxs("div",{className:`text-xl font-bold mt-1 ${d(r.score)}`,children:[r.score,"점"]})]},e.key):null})}),s.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"심층 분석"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:x.map(e=>{const t=r[e.key];return t&&"number"==typeof t.score?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xl",children:e.icon}),o(t.level)]}),s.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:e.label}),s.jsxs("div",{className:`text-xl font-bold mt-1 ${d(t.score)}`,children:[t.score,"점"]})]},e.key):null})}),s.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"특수 분석"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:g.map(e=>{const t=n[e.key];return t&&"number"==typeof t.score?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xl",children:e.icon}),o(t.level)]}),s.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:e.label}),s.jsxs("div",{className:`text-xl font-bold mt-1 ${d(t.score)}`,children:[t.score,"점"]})]},e.key):null})})]})]}),"relationship"===i&&s.jsx("div",{className:"space-y-6",children:c.map(t=>{const r=e[t.key];return r&&"number"==typeof r.score?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-3xl",children:t.icon}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.label})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[o(r.level),s.jsxs("span",{className:`text-2xl font-bold ${d(r.score)}`,children:[r.score,"점"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:r.description}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+(r.score>=85?"bg-green-500":r.score>=70?"bg-blue-500":r.score>=50?"bg-yellow-500":r.score>=30?"bg-orange-500":"bg-red-500"),style:{width:`${r.score}%`}})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.factors.positive.length>0&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),s.jsx("ul",{className:"space-y-1",children:r.factors.positive.map((e,t)=>s.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",e]},t))})]}),r.factors.negative.length>0&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),s.jsx("ul",{className:"space-y-1",children:r.factors.negative.map((e,t)=>s.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",e]},t))})]})]})]})},t.key):null})}),"practical"===i&&s.jsx("div",{className:"space-y-6",children:m.map(e=>{const r=t[e.key];return r&&"number"==typeof r.score?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-3xl",children:e.icon}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.label})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[o(r.level),s.jsxs("span",{className:`text-2xl font-bold ${d(r.score)}`,children:[r.score,"점"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:r.description}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+(r.score>=85?"bg-green-500":r.score>=70?"bg-blue-500":r.score>=50?"bg-yellow-500":r.score>=30?"bg-orange-500":"bg-red-500"),style:{width:`${r.score}%`}})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.factors.positive.length>0&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),s.jsx("ul",{className:"space-y-1",children:r.factors.positive.map((e,t)=>s.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",e]},t))})]}),r.factors.negative.length>0&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),s.jsx("ul",{className:"space-y-1",children:r.factors.negative.map((e,t)=>s.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",e]},t))})]})]})]})},e.key):null})}),"depth"===i&&s.jsx("div",{className:"space-y-6",children:x.map(e=>{const t=r[e.key];return t&&"number"==typeof t.score?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-3xl",children:e.icon}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.label})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[o(t.level),s.jsxs("span",{className:`text-2xl font-bold ${d(t.score)}`,children:[t.score,"점"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t.description}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+(t.score>=85?"bg-green-500":t.score>=70?"bg-blue-500":t.score>=50?"bg-yellow-500":t.score>=30?"bg-orange-500":"bg-red-500"),style:{width:`${t.score}%`}})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.factors.positive.length>0&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),s.jsx("ul",{className:"space-y-1",children:t.factors.positive.map((e,t)=>s.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",e]},t))})]}),t.factors.negative.length>0&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),s.jsx("ul",{className:"space-y-1",children:t.factors.negative.map((e,t)=>s.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",e]},t))})]})]})]})},e.key):null})}),"special"===i&&s.jsx("div",{className:"space-y-6",children:g.map(e=>{const t=n[e.key];return t&&"number"==typeof t.score?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-3xl",children:e.icon}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.label})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[o(t.level),s.jsxs("span",{className:`text-2xl font-bold ${d(t.score)}`,children:[t.score,"점"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t.description}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+(t.score>=85?"bg-green-500":t.score>=70?"bg-blue-500":t.score>=50?"bg-yellow-500":t.score>=30?"bg-orange-500":"bg-red-500"),style:{width:`${t.score}%`}})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.factors.positive.length>0&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),s.jsx("ul",{className:"space-y-1",children:t.factors.positive.map((e,t)=>s.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",e]},t))})]}),t.factors.negative.length>0&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),s.jsx("ul",{className:"space-y-1",children:t.factors.negative.map((e,t)=>s.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",e]},t))})]})]})]})},e.key):null})})]})]})},Gi=({sajuString:e,size:t="medium",className:r=""})=>{if(!e||"계산 실패"===e||"계산 중..."===e)return s.jsx("div",{className:`text-gray-500 dark:text-gray-400 ${r}`,children:s.jsx("span",{className:"text-sm",children:"사주 계산 중..."})});const a=e.split(" ");if(4!==a.length)return s.jsx("div",{className:`text-red-500 dark:text-red-400 ${r}`,children:s.jsx("span",{className:"text-sm",children:"사주 형식 오류"})});const[n,i,l,d]=a,o=(()=>{switch(t){case"small":return{container:"text-sm",pillar:"px-2 py-1",char:"text-base",label:"text-xs"};case"large":return{container:"text-lg",pillar:"px-4 py-3",char:"text-2xl",label:"text-sm"};default:return{container:"text-base",pillar:"px-3 py-2",char:"text-xl",label:"text-xs"}}})();return s.jsxs("div",{className:`${o.container} ${r}`,children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2 max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`bg-gradient-to-b from-red-50 to-red-100 dark:from-red-900/30 dark:to-red-800/30\n                          border border-red-200 dark:border-red-700 rounded-lg ${o.pillar}`,children:s.jsx("div",{className:`font-bold text-red-800 dark:text-red-200 ${o.char}`,children:n})}),s.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${o.label}`,children:"년주"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`bg-gradient-to-b from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30\n                          border border-blue-200 dark:border-blue-700 rounded-lg ${o.pillar}`,children:s.jsx("div",{className:`font-bold text-blue-800 dark:text-blue-200 ${o.char}`,children:i})}),s.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${o.label}`,children:"월주"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`bg-gradient-to-b from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30\n                          border border-green-200 dark:border-green-700 rounded-lg ${o.pillar}`,children:s.jsx("div",{className:`font-bold text-green-800 dark:text-green-200 ${o.char}`,children:l})}),s.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${o.label}`,children:"일주"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`bg-gradient-to-b from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30\n                          border border-purple-200 dark:border-purple-700 rounded-lg ${o.pillar}`,children:s.jsx("div",{className:`font-bold text-purple-800 dark:text-purple-200 ${o.char}`,children:d})}),s.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${o.label}`,children:"시주"})]})]}),s.jsx("div",{className:"text-center mt-3",children:s.jsxs("div",{className:"inline-flex items-center space-x-1 px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full",children:[s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"사주:"}),s.jsx("span",{className:"font-mono font-semibold text-gray-800 dark:text-gray-200",children:e})]})})]})},Qi={"상생":{"목":"화","화":"토","토":"금","금":"수","수":"목"},"상극":{"목":"토","화":"금","토":"수","금":"목","수":"화"}},Vi={"인오술":"화","신자진":"수","해묘미":"목","사유축":"금"},Ji={"자축":"토","인해":"목","묘술":"화","진유":"금","사신":"수","오미":"화토"},Zi=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]],Xi={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"};function el(e,t){const r=Xi[e],a=Xi[t],s={"갑":"양","을":"음","병":"양","정":"음","무":"양","기":"음","경":"양","신":"음","임":"양","계":"음"},n=s[e]===s[t];if(r===a)return n?"비견":"겁재";const i={"목":{"화":["식신","상관"],"토":["편재","정재"],"금":["편관","정관"],"수":["편인","정인"]},"화":{"토":["식신","상관"],"금":["편재","정재"],"수":["편관","정관"],"목":["편인","정인"]},"토":{"금":["식신","상관"],"수":["편재","정재"],"목":["편관","정관"],"화":["편인","정인"]},"금":{"수":["식신","상관"],"목":["편재","정재"],"화":["편관","정관"],"토":["편인","정인"]},"수":{"목":["식신","상관"],"화":["편재","정재"],"토":["편관","정관"],"금":["편인","정인"]}}[r][a];return i?n?i[0]:i[1]:"알수없음"}function tl(e,t){const r=function(e,t){const r=e.ohHaengBalance||{},a=t.ohHaengBalance||{};let s=60;const n=["목","화","토","금","수"];for(const i of n){const e=Qi.상생[i];r[i]>25&&a[e]>25?s+=15:r[i]>15&&a[e]>15&&(s+=8)}for(const i of n){const e=Qi.상극[i];r[i]>30&&a[e]>30&&(s-=10)}for(const i of n)(r[i]<10&&a[i]>30||a[i]<10&&r[i]>30)&&(s+=5);return Math.max(0,Math.min(100,s))}(e,t),a=function(e,t){const r=e.day.gan;let a=70;const s=el(r,t.day.gan),n=["정재","정관","정인","식신"];n.includes(s)?a+=20:["비견","편재","편관","편인"].includes(s)?a+=5:["겁재","상관"].includes(s)&&(a-=10);const i=el(r,t.year.gan),l=el(r,t.month.gan);return n.includes(i)&&(a+=10),n.includes(l)&&(a+=10),Math.max(0,Math.min(100,a))}(e,t);return Math.round(.6*r+.4*a)}function rl(e,t){const r=function(e,t){let r=50;for(const s of e)for(const e of t){(Ji[s+e]||Ji[e+s])&&(r+=15);for(const t of Zi)(t[0]===s&&t[1]===e||t[1]===s&&t[0]===e)&&(r-=10)}const a=[...e,...t].join("");for(const s of Object.keys(Vi)){const e=s.split("").filter(e=>a.includes(e)).length;e>=2&&(r+=5*e)}return Math.max(0,Math.min(100,r))}([e.year.ji,e.month.ji,e.day.ji,e.time.ji],[t.year.ji,t.month.ji,t.day.ji,t.time.ji]),a=e.day.gan,s=t.day.gan,n={"갑":"양","을":"음","병":"양","정":"음","무":"양","기":"음","경":"양","신":"음","임":"양","계":"음"};let i=60;return n[a]!==n[s]&&(i+=20),Math.round(.5*r+.5*i)}function al(e,t){let r="";r=e>=90?"천생연분입니다! 서로를 위한 완벽한 파트너입니다. ":e>=80?"매우 좋은 궁합입니다. 서로를 이해하고 존중하면 행복한 관계가 될 것입니다. ":e>=70?"좋은 궁합입니다. 서로의 차이를 인정하고 노력한다면 좋은 관계를 유지할 수 있습니다. ":e>=60?"보통의 궁합입니다. 서로를 이해하려는 노력이 필요합니다. ":"노력이 필요한 궁합입니다. 상대방을 이해하고 배려하는 자세가 중요합니다. ";const a=[...t].sort((e,t)=>t.score-e.score),s=a[0],n=a[a.length-1];return s.score>=80&&(r+=`특히 ${s.name} 면에서 뛰어난 조화를 보입니다. `),n.score<60&&(r+=`${n.name} 부분은 서로 더 노력이 필요한 영역입니다.`),r}const sl={"갑":"양","을":"음","병":"양","정":"음","무":"양","기":"음","경":"양","신":"음","임":"양","계":"음"},nl={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},il={"자":"수","축":"토","인":"목","묘":"목","진":"토","사":"화","오":"화","미":"토","신":"금","유":"금","술":"토","해":"수"},ll=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]],dl=[["인","사","신"],["축","술","미"],["자","묘"]],ol=[["자","유"],["오","묘"],["신","사"],["인","해"],["축","진"],["미","술"]];function cl(e){return e>=85?"매우좋음":e>=70?"좋음":e>=50?"보통":e>=30?"주의":"위험"}function ml(e,t){let r=0;const a=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],s=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];for(const n of a)nl[n]===t&&r++;for(const n of s)il[n]===t&&r++;return r}function xl(e,t){const r=function(e,t){let r=60;const a=[],s=[],n=e.year.gan,i=t.year.gan;sl[n]!==sl[i]?(r+=15,a.push("음양이 조화로워 첫만남부터 끌림이 있습니다")):(r-=5,s.push("같은 음양으로 첫인상이 평범할 수 있습니다"));const l=nl[n],d=nl[i],o={"목":"화","화":"토","토":"금","금":"수","수":"목"};o[l]!==d&&o[d]!==l||(r+=20,a.push("오행이 상생하여 자연스러운 호감을 느낍니다"));const c=e.year.ji,m=t.year.ji;for(const x of ll)if(x[0]===c&&x[1]===m||x[1]===c&&x[0]===m){r-=15,s.push("년지가 충이 되어 첫만남이 어색할 수 있습니다");break}return c===m&&(r+=10,a.push("같은 띠로 공감대가 형성됩니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:cl(r),description:`년주 기반 첫인상 궁합은 ${r}점입니다. ${r>=70?"좋은 첫인상을 주고받습니다.":"천천히 친해지는 스타일입니다."}`,factors:{positive:a,negative:s}}}(e,t),a=function(e,t){let r=65;const a=[],s=[],n=nl[e.month.gan],i=nl[t.month.gan],l=["목","화"],d=["금","수"];l.includes(n)&&l.includes(i)?(r+=15,a.push("둘 다 활발한 소통 스타일로 대화가 즐겁습니다")):d.includes(n)&&d.includes(i)?(r+=10,a.push("차분하고 깊이 있는 대화를 나눕니다")):(l.includes(n)&&d.includes(i)||d.includes(n)&&l.includes(i))&&(r+=5,a.push("서로 다른 소통 스타일이 균형을 이룹니다"));const o=e.month.ji,c=t.month.ji;for(const x of dl)if(x.includes(o)&&x.includes(c)){r-=10,s.push("소통 과정에서 오해가 생기기 쉽습니다");break}const m={"인":"봄","묘":"봄","진":"봄","사":"여름","오":"여름","미":"여름","신":"가을","유":"가을","술":"가을","해":"겨울","자":"겨울","축":"겨울"};return m[o]===m[c]&&(r+=10,a.push("같은 계절 출생으로 정서적 리듬이 맞습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:cl(r),description:`월주 기반 소통 궁합은 ${r}점입니다. ${r>=70?"원활한 의사소통이 가능합니다.":"소통 방식의 차이를 이해할 필요가 있습니다."}`,factors:{positive:a,negative:s}}}(e,t),s=function(e,t){let r=70;const a=[],s=[],n=e.day.gan,i=t.day.gan;sl[n]!==sl[i]&&(r+=20,a.push("음양이 조화되어 서로를 보완합니다"));const l=nl[n],d=nl[i];l===d&&(r+=10,a.push("같은 오행으로 기본 성향이 비슷합니다"));const o={"목":"화","화":"토","토":"금","금":"수","수":"목"};o[l]===d?(r+=15,a.push(`${l}이 ${d}를 생하여 베푸는 관계입니다`)):o[d]===l&&(r+=15,a.push(`${d}가 ${l}을 생하여 받는 관계입니다`));const c={"목":"토","토":"수","수":"화","화":"금","금":"목"};return c[l]!==d&&c[d]!==l||(r-=15,s.push("오행이 상극하여 가치관 충돌이 있을 수 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:cl(r),description:`일간 기반 가치관 궁합은 ${r}점입니다. ${r>=70?"핵심 가치관이 잘 맞습니다.":"서로의 가치관을 존중하는 노력이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),n=function(e,t){let r=60;const a=[],s=[],n=e.time.ji,i=t.time.ji,l=["인","묘","진","사"],d=["오","미","신","유"],o=["술","해","자","축"],c=e=>l.includes(e)?"morning":d.includes(e)?"afternoon":o.includes(e)?"evening":"unknown";c(n)===c(i)?(r+=20,a.push("생활 리듬이 비슷하여 일상이 조화롭습니다")):(r-=10,s.push("활동 시간대가 달라 조율이 필요합니다"));for(const m of ll)if(m[0]===n&&m[1]===i||m[1]===n&&m[0]===i){r-=15,s.push("생활 패턴이 정반대여서 갈등이 생길 수 있습니다");break}return il[n]===il[i]&&(r+=10,a.push("비슷한 에너지 패턴을 가지고 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:cl(r),description:`시주 기반 생활패턴 궁합은 ${r}점입니다. ${r>=70?"일상생활이 조화롭게 흘러갑니다.":"생활 패턴 조율이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),i=function(e,t){let r=80;const a=[],s=[],n=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];let l=0,d=0,o=0;for(const x of n)for(const e of i)for(const t of ll)(t[0]===x&&t[1]===e||t[1]===x&&t[0]===e)&&l++;l>0&&(r-=10*l,s.push(`${l}개의 충이 있어 갈등이 자주 발생할 수 있습니다`));for(const x of dl){let e=!1,t=!1;for(const r of n)x.includes(r)&&(e=!0);for(const r of i)x.includes(r)&&(t=!0);e&&t&&d++}d>0&&(r-=8*d,s.push("형이 있어 서로 상처를 줄 수 있습니다"));for(const x of n)for(const e of i)for(const t of ol)(t[0]===x&&t[1]===e||t[1]===x&&t[0]===e)&&o++;o>0&&(r-=5*o,s.push("파가 있어 관계가 불안정할 수 있습니다")),0===l&&0===d&&(r+=10,a.push("충이나 형이 없어 평화로운 관계입니다"));const c=n.filter(e=>"토"===il[e]).length,m=i.filter(e=>"토"===il[e]).length;return(c>0||m>0)&&(r+=5,a.push("토 오행이 있어 갈등 중재 능력이 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:cl(r),description:`갈등해결 궁합은 ${r}점입니다. ${r>=70?"갈등을 잘 해결할 수 있습니다.":"갈등 발생 시 신중한 대처가 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),l=function(e,t){let r=65;const a=[],s=[],n=ml(e,"수"),i=ml(t,"수");n>0&&n<=2&&(r+=10,a.push("적절한 수 기운으로 감정 표현이 자연스럽습니다")),i>0&&i<=2&&(r+=10,a.push("상대방도 감정 교류가 원활합니다")),(n>3||i>3)&&(r-=10,s.push("수가 과다하여 감정 기복이 심할 수 있습니다")),0===n&&0===i&&(r-=15,s.push("수가 부족하여 정서적 교감이 어려울 수 있습니다"));const l=ml(e,"화"),d=ml(t,"화");if(Math.abs(l-n)<=1&&Math.abs(d-i)<=1&&(r+=15,a.push("화수가 균형을 이루어 열정과 감성이 조화롭습니다")),e.ohHaengBalance&&t.ohHaengBalance){const s=e.ohHaengBalance["수"]||0,n=t.ohHaengBalance["수"]||0;s>=15&&s<=25&&n>=15&&n<=25&&(r+=10,a.push("수 오행이 균형잡혀 정서적 안정감이 있습니다"))}return r=Math.max(0,Math.min(100,r)),{score:r,level:cl(r),description:`정서적 궁합은 ${r}점입니다. ${r>=70?"깊은 정서적 교감이 가능합니다.":"감정 표현과 이해에 노력이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),d=function(e,t){let r=70;const a=[],s=[],n=ml(e,"토"),i=ml(t,"토");n>=1&&n<=3&&(r+=10,a.push("토 기운이 있어 믿음직합니다")),i>=1&&i<=3&&(r+=10,a.push("상대방도 신뢰할 만한 사람입니다")),n>0&&i>0&&(r+=15,a.push("서로 토 기운이 있어 안정적인 신뢰관계를 형성합니다")),(n>4||i>4)&&(r-=10,s.push("토가 과다하여 고집이 세고 변화를 거부할 수 있습니다")),0!==n&&0!==i||(r-=15,s.push("토가 부족하여 신뢰 형성에 시간이 필요합니다"));const l=e.day.ji,d=t.day.ji,o=["축","진","미","술"];return(o.includes(l)||o.includes(d))&&(r+=5,a.push("일지에 토가 있어 기본적으로 신뢰감을 줍니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:cl(r),description:`신뢰도 궁합은 ${r}점입니다. ${r>=70?"서로를 깊이 신뢰할 수 있습니다.":"신뢰 구축에 시간과 노력이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),o=[r.score,a.score,s.score,n.score,i.score,l.score,d.score],c=Math.round(o.reduce((e,t)=>e+t,0)/o.length);let m="";return m=c>=80?"매우 훌륭한 관계성을 가지고 있습니다. 서로를 깊이 이해하고 존중할 수 있는 관계입니다.":c>=70?"좋은 관계를 유지할 수 있습니다. 약간의 노력으로 더욱 발전할 가능성이 있습니다.":c>=60?"평균적인 관계입니다. 서로를 이해하려는 노력이 필요합니다.":c>=50?"관계 유지에 상당한 노력이 필요합니다. 차이점을 인정하고 존중하는 것이 중요합니다.":"관계에 어려움이 예상됩니다. 충분한 이해와 인내가 필요합니다.",{firstImpression:r,communication:a,valueSystem:s,lifePattern:n,conflictResolution:i,emotional:l,trust:d,averageScore:c,summary:m}}function gl(e,t){var r;const a={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},s={"갑":"양","을":"음","병":"양","정":"음","무":"양","기":"음","경":"양","신":"음","임":"양","계":"음"},n=a[e],i=a[t],l=s[e]===s[t];if(n===i)return l?"비견":"겁재";const d=null==(r={"목":{"화":["식신","상관"],"토":["편재","정재"],"금":["편관","정관"],"수":["편인","정인"]},"화":{"토":["식신","상관"],"금":["편재","정재"],"수":["편관","정관"],"목":["편인","정인"]},"토":{"금":["식신","상관"],"수":["편재","정재"],"목":["편관","정관"],"화":["편인","정인"]},"금":{"수":["식신","상관"],"목":["편재","정재"],"화":["편관","정관"],"토":["편인","정인"]},"수":{"목":["식신","상관"],"화":["편재","정재"],"토":["편관","정관"],"금":["편인","정인"]}}[n])?void 0:r[i];return d?l?d[0]:d[1]:"알수없음"}function hl(e){return e>=85?"매우좋음":e>=70?"좋음":e>=50?"보통":e>=30?"주의":"위험"}function ul(e,t){const r={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},a={"자":"수","축":"토","인":"목","묘":"목","진":"토","사":"화","오":"화","미":"토","신":"금","유":"금","술":"토","해":"수"};let s=0;const n=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],i=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];for(const l of n)r[l]===t&&s++;for(const l of i)a[l]===t&&s++;return s}function pl(e){return{"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"}[e]||""}function bl(e,t){const r=function(e,t){let r=65;const a=[],s=[],n=e.day.gan,i=t.day.gan,l=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],d=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];let o=0,c=0,m=0;for(const b of l){const e=gl(n,b);"정재"===e?(o++,c++):"편재"===e&&(o++,m++)}let x=0,g=0,h=0;for(const b of d){const e=gl(i,b);"정재"===e?(x++,g++):"편재"===e&&(x++,h++)}o>=1&&o<=2&&(r+=10,a.push("적절한 재성으로 건실한 경제관념을 가지고 있습니다")),x>=1&&x<=2&&(r+=10,a.push("상대방도 안정적인 경제관을 가지고 있습니다")),c>m&&g>h?(r+=15,a.push("둘 다 안정적이고 보수적인 재테크 성향입니다")):m>c&&h>g?(r+=5,a.push("둘 다 적극적인 투자 성향으로 의견이 맞을 수 있습니다")):(r+=10,a.push("서로 다른 재테크 스타일로 균형을 이룹니다")),(o>3||x>3)&&(r-=15,s.push("재성이 과다하여 돈 문제로 갈등이 생길 수 있습니다")),0!==o&&0!==x||(r-=10,s.push("재성이 부족하여 경제적 계획성이 떨어질 수 있습니다"));const u=ul(e,"금"),p=ul(t,"금");return u>0&&p>0&&(r+=5,a.push("금 기운이 있어 절약 정신이 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:hl(r),description:`경제관념 궁합은 ${r}점입니다. ${r>=70?"경제적 가치관이 잘 맞습니다.":"금전 관리 방식에 대한 조율이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),a=function(e,t){let r=60;const a=[],s=[],n=e.day.gan,i=t.day.gan,l=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],d=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];let o=0,c=0,m=0;for(const b of l){const e=gl(n,b);"정관"===e?(o++,c++):"편관"===e&&(o++,m++)}let x=0,g=0,h=0;for(const b of d){const e=gl(i,b);"정관"===e?(x++,g++):"편관"===e&&(x++,h++)}o>=1&&o<=2&&(r+=15,a.push("안정적인 직업운을 가지고 있습니다")),x>=1&&x<=2&&(r+=15,a.push("상대방도 커리어가 안정적입니다")),c>0&&g>0?(r+=10,a.push("둘 다 안정적인 직장 생활을 선호합니다")):m>0&&h>0&&(r+=10,a.push("둘 다 도전적인 사업가 기질이 있습니다")),(o>3||x>3)&&(r-=10,s.push("관성이 과다하여 업무 스트레스가 관계에 영향을 줄 수 있습니다"));let u=0,p=0;for(const b of l){const e=gl(n,b);"식신"!==e&&"상관"!==e||u++}for(const b of d){const e=gl(i,b);"식신"!==e&&"상관"!==e||p++}return u>0&&p>0&&(r+=10,a.push("둘 다 창의적인 능력이 있어 서로를 이해합니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:hl(r),description:`직업운 궁합은 ${r}점입니다. ${r>=70?"서로의 커리어를 지지할 수 있습니다.":"직업적 목표에 대한 이해가 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),s=function(e,t){let r=65;const a=[],s=[],n=e.day.gan,i=t.day.gan,l=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],d=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];let o=0,c=0;for(const u of l){const e=gl(n,u);"정인"!==e&&"편인"!==e||o++}for(const u of d){const e=gl(i,u);"정인"!==e&&"편인"!==e||c++}o>=1&&o<=2&&(r+=15,a.push("안정적인 주거 환경을 선호합니다")),c>=1&&c<=2&&(r+=15,a.push("상대방도 편안한 집을 중요시합니다"));const m=ul(e,"토"),x=ul(t,"토");(m>=2||x>=2)&&(r+=10,a.push("토 기운이 강해 부동산 운이 좋습니다")),(o>3||c>3)&&(r-=10,s.push("인성이 과다하여 독립적인 주거 생활이 어려울 수 있습니다"));const g=ul(e,"목"),h=ul(t,"목");return g>0&&h>0?(r+=5,a.push("목 기운이 있어 자연친화적인 주거를 선호합니다")):(g>2&&0===h||0===g&&h>2)&&(r-=5,s.push("주거 환경 취향이 크게 다를 수 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:hl(r),description:`주거환경 궁합은 ${r}점입니다. ${r>=70?"편안한 보금자리를 만들 수 있습니다.":"주거 스타일 조율이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),n=function(e,t){let r=70;const a=[],s=[],n=e.day.gan,i=t.day.gan,l=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],d=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];let o=0,c=0,m=0;for(const y of l){const e=gl(n,y);"식신"===e?(o++,c++):"상관"===e&&(o++,m++)}let x=0,g=0,h=0;for(const y of d){const e=gl(i,y);"식신"===e?(x++,g++):"상관"===e&&(x++,h++)}c>0&&g>0?(r+=20,a.push("둘 다 식신이 있어 자녀 복이 있습니다")):(c>0||g>0)&&(r+=10,a.push("자녀에 대한 사랑이 깊습니다")),(m>1||h>1)&&(r-=5,s.push("자녀 교육 방식에서 의견 충돌이 있을 수 있습니다")),0===o&&0===x&&(r-=15,s.push("식상이 부족하여 자녀 계획에 어려움이 있을 수 있습니다"));const u=ul(e,"수"),p=ul(t,"수");u>0&&p>0&&(r+=10,a.push("수 기운이 있어 자녀 생산력이 좋습니다"));const b=["자","오","묘","유"];return(b.includes(e.time.ji)||b.includes(t.time.ji))&&(r+=5,a.push("도화가 있어 예쁜 자녀를 얻을 수 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:hl(r),description:`자녀운 궁합은 ${r}점입니다. ${r>=70?"자녀와 행복한 가정을 이룰 수 있습니다.":"자녀 계획에 대한 충분한 대화가 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),i=function(e,t){let r=70;const a=[],s=[],n=e.year.ji,i=t.year.ji,l=e.month.ji,d=t.month.ji,o=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]];let c=!1;for(const y of o)if(y[0]===n&&y[1]===i||y[1]===n&&y[0]===i){r-=15,s.push("년지가 충이 되어 양가 부모님과의 관계에 주의가 필요합니다"),c=!0;break}c||(r+=10,a.push("년지가 충돌하지 않아 양가 화합이 좋습니다"));for(const y of o)if(y[0]===l&&y[1]===d||y[1]===l&&y[0]===d){r-=10,s.push("월지가 충이 되어 형제간 관계에 신경써야 합니다");break}const m=pl(e.year.gan),x=pl(t.year.gan),g={"목":"화","화":"토","토":"금","금":"수","수":"목"};g[m]!==x&&g[x]!==m||(r+=15,a.push("년간이 상생하여 양가 어른들의 축복을 받습니다"));const h=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],u=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];let p=0,b=0;for(const y of h){const t=gl(e.day.gan,y);"정인"!==t&&"편인"!==t||p++}for(const y of u){const e=gl(t.day.gan,y);"정인"!==e&&"편인"!==e||b++}return p>0&&b>0&&(r+=10,a.push("인성이 있어 어른을 공경하는 마음이 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:hl(r),description:`시댁/처가 궁합은 ${r}점입니다. ${r>=70?"양가 가족과 원만한 관계를 유지할 수 있습니다.":"가족 관계에서 서로 배려가 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),l=[r.score,a.score,s.score,n.score,i.score],d=Math.round(l.reduce((e,t)=>e+t,0)/l.length);let o="";return o=d>=80?"현실적인 면에서 매우 잘 맞습니다. 안정적인 가정을 이룰 수 있습니다.":d>=70?"실생활에서 큰 문제없이 조화를 이룰 수 있습니다.":d>=60?"일부 현실적 문제에서 조율이 필요하지만 극복 가능합니다.":d>=50?"현실적 가치관의 차이가 있어 충분한 대화가 필요합니다.":"현실적 문제로 어려움이 예상됩니다. 신중한 접근이 필요합니다.",{economic:r,career:a,residence:s,children:n,inLaw:i,averageScore:d,summary:o}}function yl(e){return e>=85?"매우좋음":e>=70?"좋음":e>=50?"보통":e>=30?"주의":"위험"}const jl=["자","오","묘","유"],fl=["인","신","사","해"],vl=["진","술","축","미"];function kl(e,t){const r={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},a={"자":"수","축":"토","인":"목","묘":"목","진":"토","사":"화","오":"화","미":"토","신":"금","유":"금","술":"토","해":"수"};let s=0;const n=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],i=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];for(const l of n)r[l]===t&&s++;for(const l of i)a[l]===t&&s++;return s}function Nl(e,t){const r=e.day.gan,a=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let s=0;for(const n of a){const e=wl(r,n);t.includes(e)&&s++}return s}function wl(e,t){var r;const a={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},s={"갑":"양","을":"음","병":"양","정":"음","무":"양","기":"음","경":"양","신":"음","임":"양","계":"음"},n=a[e],i=a[t],l=s[e]===s[t];if(n===i)return l?"비견":"겁재";const d=null==(r={"목":{"화":["식신","상관"],"토":["편재","정재"],"금":["편관","정관"],"수":["편인","정인"]},"화":{"토":["식신","상관"],"금":["편재","정재"],"수":["편관","정관"],"목":["편인","정인"]},"토":{"금":["식신","상관"],"수":["편재","정재"],"목":["편관","정관"],"화":["편인","정인"]},"금":{"수":["식신","상관"],"목":["편재","정재"],"화":["편관","정관"],"토":["편인","정인"]},"수":{"목":["식신","상관"],"화":["편재","정재"],"토":["편관","정관"],"금":["편인","정인"]}}[n])?void 0:r[i];return d?l?d[0]:d[1]:"알수없음"}function Sl(e,t){const r=function(e,t){let r=60;const a=[],s=[],n=kl(e,"화"),i=kl(t,"화"),l=kl(e,"수"),d=kl(t,"수");n>=1&&n<=2&&l>=1&&l<=2&&(r+=15,a.push("화수가 균형을 이루어 건강한 성생활이 가능합니다")),i>=1&&i<=2&&d>=1&&d<=2&&(r+=15,a.push("상대방도 성적 에너지가 균형잡혀 있습니다"));const o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],c=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],m=o.filter(e=>jl.includes(e)).length,x=c.filter(e=>jl.includes(e)).length;1===m&&1===x?(r+=20,a.push("적절한 도화가 있어 서로에게 매력을 느낍니다")):m>2||x>2?(r-=15,s.push("도화가 과다하여 이성 문제가 생길 수 있습니다")):0===m&&0===x&&(r-=10,s.push("도화가 없어 성적 매력이 부족할 수 있습니다")),jl.includes(e.day.ji)&&jl.includes(t.day.ji)&&(r+=10,a.push("일지 도화로 강한 성적 끌림이 있습니다")),(n>3||i>3)&&(r-=10,s.push("화가 과다하여 성적으로 충동적일 수 있습니다"));const g={"갑":"양","을":"음","병":"양","정":"음","무":"양","기":"음","경":"양","신":"음","임":"양","계":"음"};return g[e.day.gan]!==g[t.day.gan]&&(r+=10,a.push("음양이 조화되어 성적 궁합이 좋습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:yl(r),description:`성적 궁합은 ${r}점입니다. ${r>=70?"서로에게 성적 매력을 느낍니다.":"성적 조화를 위한 노력이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),a=function(e,t){let r=70;const a=[],s=[],n=Nl(e,["정인","편인"]),i=Nl(t,["정인","편인"]),l=Nl(e,["식신"]),d=Nl(t,["식신"]);n>0&&i>0&&(r+=15,a.push("둘 다 정신적 가치를 중요시합니다")),l>0&&d>0&&(r+=15,a.push("종교나 철학에 대한 관심이 비슷합니다"));const o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],c=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],m=o.filter(e=>vl.includes(e)).length,x=c.filter(e=>vl.includes(e)).length;m>0&&x>0?(r+=10,a.push("화개살이 있어 예술적/영적 교감이 가능합니다")):(m>1&&0===x||0===m&&x>1)&&(r-=10,s.push("종교관의 차이가 클 수 있습니다"));const g=kl(e,"목"),h=kl(t,"목");return g>0&&h>0&&(r+=5,a.push("목 기운이 있어 자비롭고 포용적입니다")),(n>3||i>3)&&(r-=15,s.push("인성이 과다하여 종교적 극단주의 우려가 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:yl(r),description:`종교/신앙 궁합은 ${r}점입니다. ${r>=70?"정신적 가치관이 잘 맞습니다.":"종교나 신념에 대한 상호 이해가 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),s=function(e,t){let r=65;const a=[],s=[],n=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],l=n.filter(e=>fl.includes(e)).length,d=i.filter(e=>fl.includes(e)).length;l>0&&d>0?(r+=20,a.push("둘 다 역마가 있어 여행을 즐깁니다")):l>1&&0===d||0===l&&d>1?(r-=10,s.push("여행 취향의 차이로 갈등이 있을 수 있습니다")):0===l&&0===d&&(r+=5,a.push("둘 다 안정적인 취미를 선호합니다"));const o=n.filter(e=>vl.includes(e)).length,c=i.filter(e=>vl.includes(e)).length;o>0&&c>0&&(r+=15,a.push("예술적 취미를 공유할 수 있습니다"));const m=Nl(e,["식신","상관"]),x=Nl(t,["식신","상관"]);m>0&&x>0&&(r+=10,a.push("창의적인 취미 활동을 함께 즐길 수 있습니다"));const g=kl(e,"목")+kl(e,"화"),h=kl(t,"목")+kl(t,"화");return g>=3&&h>=3?(r+=10,a.push("활동적인 취미를 함께 즐길 수 있습니다")):(g>=4&&h<=1||g<=1&&h>=4)&&(r-=10,s.push("활동량의 차이로 취미 공유가 어려울 수 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:yl(r),description:`여행/취미 궁합은 ${r}점입니다. ${r>=70?"취미와 여가를 함께 즐길 수 있습니다.":"서로의 취미를 존중하는 노력이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),n=function(e,t){let r=70;const a=[],s=[],n=kl(e,"금"),i=kl(t,"금");n>=1&&n<=3&&(r+=10,a.push("금 기운이 있어 노후 준비가 철저합니다")),i>=1&&i<=3&&(r+=10,a.push("상대방도 노후를 체계적으로 준비합니다"));const l=kl(e,"토"),d=kl(t,"토");l>0&&d>0&&(r+=15,a.push("토 기운이 있어 안정적인 노후생활이 가능합니다"));const o=Nl(e,["정재","편재"]),c=Nl(t,["정재","편재"]);o>0&&c>0?(r+=10,a.push("재성이 있어 경제적으로 안정된 노후가 기대됩니다")):0===o&&0===c&&(r-=15,s.push("재성이 부족하여 노후 자금 준비에 신경써야 합니다"));const m=Nl(e,["정인","편인"]),x=Nl(t,["정인","편인"]);return(m>0||x>0)&&(r+=5,a.push("인성이 있어 정신적으로 풍요로운 노후가 가능합니다")),(n>4||i>4)&&(r-=10,s.push("금이 과다하여 노후에 고집이 세질 수 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:yl(r),description:`노후생활 궁합은 ${r}점입니다. ${r>=70?"행복하고 안정된 노후를 보낼 수 있습니다.":"노후 계획을 함께 준비해야 합니다."}`,factors:{positive:a,negative:s}}}(e,t),i=[r.score,a.score,s.score,n.score],l=Math.round(i.reduce((e,t)=>e+t,0)/i.length);let d="";return d=l>=80?"심층적인 면에서도 매우 잘 어울립니다.":l>=70?"깊이 있는 관계를 만들어갈 수 있습니다.":l>=60?"일부 깊은 주제에서 이해가 필요합니다.":"심층적 이해를 위한 노력이 많이 필요합니다.",{sexual:r,spiritual:a,hobby:s,retirement:n,averageScore:l,summary:d}}function Cl(e,t){const r=function(e,t){var r,a;let s=60;const n=[],i=[],l={"갑":["축","미"],"을":["자","신"],"병":["해","유"],"정":["해","유"],"무":["축","미"],"기":["자","신"],"경":["축","미"],"신":["인","오"],"임":["묘","사"],"계":["묘","사"]},d=e.day.gan,o=t.day.gan,c=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],m=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],x=l[d]||[],g=l[o]||[],h=c.some(e=>x.includes(e)),u=m.some(e=>g.includes(e));h&&u?(s+=30,n.push("둘 다 천을귀인이 있어 귀인의 도움을 받습니다")):h||u?(s+=15,n.push("천을귀인이 있어 어려울 때 도움을 받을 수 있습니다")):(s-=10,i.push("천을귀인이 없어 스스로 헤쳐나가야 합니다"));const p=m.some(e=>x.includes(e)),b=c.some(e=>g.includes(e));(p||b)&&(s+=20,n.push("서로가 서로의 귀인이 되어줄 수 있습니다"));const y={"인":["병","정"],"묘":["갑","을"],"사":["병","정"],"오":["임","계"],"신":["경","신"],"유":["경","신"],"해":["임","계"],"자":["임","계"]},j=e.month.ji,f=t.month.ji;return((null==(r=y[j])?void 0:r.includes(d))||(null==(a=y[f])?void 0:a.includes(o)))&&(s+=10,n.push("월덕귀인이 있어 인덕이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:yl(s),description:`천을귀인 궁합은 ${s}점입니다. ${s>=70?"귀인의 도움으로 순조로운 삶이 예상됩니다.":"스스로 노력하여 길을 개척해야 합니다."}`,factors:{positive:n,negative:i}}}(e,t),a=function(e,t){let r=70;const a=[],s=[],n=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],l=n.filter(e=>jl.includes(e)).length,d=i.filter(e=>jl.includes(e)).length;1===l&&1===d?(r+=20,a.push("적절한 도화로 서로에게만 매력을 느낍니다")):0===l&&0===d?(r+=10,a.push("도화가 없어 이성 문제가 적습니다")):l>=3||d>=3?(r-=30,s.push("도화가 과다하여 이성 문제로 갈등이 예상됩니다")):(l>=2&&0===d||0===l&&d>=2)&&(r-=20,s.push("도화 불균형으로 이성 문제가 생길 수 있습니다")),(jl.includes(e.day.ji)||jl.includes(t.day.ji))&&(jl.includes(e.day.ji)&&jl.includes(t.day.ji)?(r+=10,a.push("일지 도화로 서로에게 강한 매력을 느낍니다")):(r-=10,s.push("일지 도화 불균형으로 주의가 필요합니다")));const o=Nl(e,["정관","편관"]),c=Nl(t,["정관","편관"]);return(o>=3&&e.day.gan in{"을":1,"정":1,"기":1,"신":1,"계":1}||c>=3&&t.day.gan in{"을":1,"정":1,"기":1,"신":1,"계":1})&&(r-=15,s.push("관살혼잡으로 이성관계가 복잡할 수 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:yl(r),description:`도화살 영향은 ${r}점입니다. ${r>=70?"이성 문제 없이 안정적인 관계입니다.":"이성 관계에 특별한 주의가 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),s=function(e,t){let r=75;const a=[],s=[],n={"자":["술","해"],"축":["술","해"],"인":["자","축"],"묘":["자","축"],"진":["인","묘"],"사":["인","묘"],"오":["진","사"],"미":["진","사"],"신":["오","미"],"유":["오","미"],"술":["신","유"],"해":["신","유"]},i=e.year.ji,l=t.year.ji,d=n[i]||[],o=n[l]||[],c=[e.month.ji,e.day.ji,e.time.ji],m=[t.month.ji,t.day.ji,t.time.ji],x=c.some(e=>d.includes(e)),g=m.some(e=>o.includes(e));return x||g?x&&g?(r-=20,s.push("둘 다 공망이 있어 허무함을 느낄 수 있습니다")):(x||g)&&(r-=10,s.push("공망으로 인한 공허함을 이해해주어야 합니다")):(r+=15,a.push("공망이 없어 현실적이고 실속있는 관계입니다")),(d.includes(e.day.ji)||o.includes(t.day.ji))&&(r-=15,s.push("일지 공망으로 관계의 실속이 부족할 수 있습니다")),(d.includes(e.month.ji)||o.includes(t.month.ji))&&(r-=10,s.push("월지 공망으로 가족 관계에 어려움이 있을 수 있습니다")),x&&m.some(e=>d.includes(e))&&(r+=10,a.push("상대방이 공망을 채워줄 수 있습니다")),g&&c.some(e=>o.includes(e))&&(r+=10,a.push("서로의 공망을 채워주는 관계입니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:yl(r),description:`공망 분석은 ${r}점입니다. ${r>=70?"실속있고 충실한 관계입니다.":"공허함을 채우기 위한 노력이 필요합니다."}`,factors:{positive:a,negative:s}}}(e,t),n=function(e,t){let r=70;const a=[],s=[],n=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],l=["인","신"],d=n.filter(e=>l.includes(e)).length,o=i.filter(e=>l.includes(e)).length;(d>=2||o>=2)&&(r-=10,s.push("백호살이 있어 충동적인 행동에 주의해야 합니다"));const c=["사","해"],m=n.filter(e=>c.includes(e)).length,x=i.filter(e=>c.includes(e)).length;(m>=2||x>=2)&&(r-=5,s.push("현침살이 있어 예민한 반응에 주의가 필요합니다"));const g={"갑":"사","을":"오","병":"신","정":"유","무":"신","기":"유","경":"해","신":"자","임":"인","계":"묘"},h=e.day.gan,u=t.day.gan;(n.includes(g[h])||i.includes(g[u]))&&(r+=10,a.push("문창귀인이 있어 학문과 예술에 재능이 있습니다"));const p={"갑":"묘","을":"진","병":"오","정":"미","무":"오","기":"미","경":"유","신":"술","임":"자","계":"축"};n.includes(p[h])&&i.includes(p[u])&&(r+=15,a.push("둘 다 장성살이 있어 서로를 발전시킵니다"));const b=["경진","임진","무술","경술"],y=e.day.gan+e.day.ji,j=t.day.gan+t.day.ji;(b.includes(y)||b.includes(j))&&(r-=10,s.push("괴강살이 있어 극단적인 성격에 주의가 필요합니다"));const f=["진","사"],v=["술","해"];return(n.some(e=>f.includes(e))&&i.some(e=>v.includes(e))||n.some(e=>v.includes(e))&&i.some(e=>f.includes(e)))&&(r-=15,s.push("천라지망이 형성되어 서로를 속박할 수 있습니다")),r=Math.max(0,Math.min(100,r)),{score:r,level:yl(r),description:`신살 종합 점수는 ${r}점입니다. ${r>=70?"길신이 많아 순조로운 관계입니다.":"흉신의 영향을 주의해야 합니다."}`,factors:{positive:a,negative:s}}}(e,t),i=[r.score,a.score,s.score,n.score],l=Math.round(i.reduce((e,t)=>e+t,0)/i.length);let d="";return d=l>=80?"특수한 인연으로 맺어진 좋은 관계입니다.":l>=70?"길신이 많아 순조로운 관계가 예상됩니다.":l>=60?"일부 신살의 영향에 주의가 필요합니다.":"신살의 영향을 극복하기 위한 노력이 필요합니다.",{noblePerson:r,peachBlossom:a,emptiness:s,sinsal:n,averageScore:l,summary:d}}Le.register(We,He,Ye,Ue,Oe,Ke);const Ml=({data:e})=>{const{theme:t}=Hi(),r="dark"===t,a=[],n=[],i=[{key:"firstImpression",label:"첫인상"},{key:"communication",label:"대화소통"},{key:"valueSystem",label:"가치관"},{key:"lifePattern",label:"생활패턴"},{key:"conflictResolution",label:"갈등해결"},{key:"emotional",label:"정서적"},{key:"trust",label:"신뢰도"}],l=[{key:"economic",label:"경제관념"},{key:"career",label:"직업운"},{key:"residence",label:"주거환경"},{key:"children",label:"자녀운"},{key:"inLaw",label:"시댁/처가"}],d=[{key:"sexual",label:"성적"},{key:"spiritual",label:"정신적"},{key:"hobby",label:"취미"},{key:"retirement",label:"노후"}],o=[{key:"noblePerson",label:"귀인운"},{key:"peachBlossom",label:"도화운"},{key:"emptiness",label:"공망"},{key:"sinsal",label:"신살"}];e.relationship&&i.forEach(t=>{const r=e.relationship[t.key];r&&"number"==typeof r.score&&(a.push(t.label),n.push(r.score))}),e.practical&&l.forEach(t=>{const r=e.practical[t.key];r&&"number"==typeof r.score&&(a.push(t.label),n.push(r.score))}),e.depth&&d.forEach(t=>{const r=e.depth[t.key];r&&"number"==typeof r.score&&(a.push(t.label),n.push(r.score))}),e.special&&o.forEach(t=>{const r=e.special[t.key];r&&"number"==typeof r.score&&(a.push(t.label),n.push(r.score))});const c={labels:a,datasets:[{label:"종합 궁합 점수",data:n,backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgba(147, 51, 234, 1)",borderWidth:2,pointBackgroundColor:"rgba(147, 51, 234, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(147, 51, 234, 1)",pointRadius:4,pointHoverRadius:6}]},x={responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:20,color:r?"#9CA3AF":"#4B5563",backdropColor:"transparent",font:{size:10}},grid:{color:r?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.2)",circular:!0},angleLines:{color:r?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.2)"},pointLabels:{color:r?"#D1D5DB":"#374151",font:{size:11,weight:500},padding:15}}},plugins:{legend:{display:!0,position:"top",labels:{color:r?"#D1D5DB":"#374151",font:{size:12},padding:20}},tooltip:{enabled:!0,backgroundColor:r?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",titleColor:r?"#F3F4F6":"#111827",bodyColor:r?"#D1D5DB":"#4B5563",borderColor:r?"#4B5563":"#E5E7EB",borderWidth:1,padding:12,displayColors:!1,callbacks:{label:e=>{const t=e.parsed.r;let r="매우좋음";return t<30?r="위험":t<50?r="주의":t<70?r="보통":t<85&&(r="좋음"),`${e.label}: ${t}점 (${r})`}}}},interaction:{intersect:!1,mode:"point"}};return s.jsx("div",{className:"w-full h-[600px] p-4",children:s.jsx(m,{data:c,options:x})})},$l=()=>{const[e,t]=a.useState(null),[r,n]=a.useState(null),[i,l]=a.useState(null),[d,o]=a.useState(!1),[c,m]=a.useState(null),[x,g]=a.useState(null),h=async e=>e?await(async e=>{if(!e.birth_date||!e.birth_time)return null;try{let[t,r,a]=e.birth_date.split("-").map(Number);const[s,n]=e.birth_time.split(":").map(Number);if("lunar"===e.lunar_solar){const e=new Z;e.setLunarDate(t,r,a,!1);const s=e.getSolarCalendar();t=s.year,r=s.month,a=s.day}const i=localStorage.getItem("personalInfo"),l=ts(t,r,a,s,n||0,0,!!i&&JSON.parse(i).useTrueSolarTime),d={wood:20,fire:20,earth:20,metal:20,water:20};return{year:{gan:l.year[0],ji:l.year[1]},month:{gan:l.month[0],ji:l.month[1]},day:{gan:l.day[0],ji:l.day[1]},time:{gan:l.hour[0],ji:l.hour[1]},fullSaju:l.fullSaju,ohHaengBalance:d,dayMaster:l.day[0]}}catch(t){return null}})(e):null,u=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600";return s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-900 dark:text-gray-100",children:"궁합 분석"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"첫 번째 사람"}),s.jsx(vn,{onSelect:t,selectedCustomer:e}),e&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.birth_date," ",e.birth_time," (","lunar"===e.lunar_solar?"음력":"양력",")"]}),s.jsx("div",{className:"mt-3",children:s.jsx(Gi,{sajuString:null==c?void 0:c.fullSaju,size:"small",className:"bg-white dark:bg-gray-800 rounded-lg p-3"})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"두 번째 사람"}),s.jsx(vn,{onSelect:n,selectedCustomer:r}),r&&s.jsxs("div",{className:"mt-4 p-4 bg-pink-50 dark:bg-pink-900/30 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.birth_date," ",r.birth_time," (","lunar"===r.lunar_solar?"음력":"양력",")"]}),s.jsx("div",{className:"mt-3",children:s.jsx(Gi,{sajuString:null==x?void 0:x.fullSaju,size:"small",className:"bg-white dark:bg-gray-800 rounded-lg p-3"})})]})]})]}),s.jsx("div",{className:"text-center mb-8",children:s.jsx("button",{onClick:async()=>{if(e&&r){o(!0);try{const t=await h(e),a=await h(r);if(!t||!a)return alert("정확한 사주 데이터를 계산할 수 없습니다. 고객 정보를 다시 확인해주세요."),void o(!1);m(t),g(a),setTimeout(()=>{const e=tl(t,a),r=rl(t,a),s=function(e,t){const r=e.day.gan,a=t.day.gan;let s=65;const n=[e.year.gan,e.month.gan,e.day.gan,e.time.gan],i=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];let l=0,d=0;for(const o of n){const e=el(r,o);"정재"!==e&&"편재"!==e||l++}for(const o of i){const e=el(a,o);"정재"!==e&&"편재"!==e||d++}return l>0&&l<=2&&(s+=10),d>0&&d<=2&&(s+=10),l>2&&d>2&&(s-=15),Math.max(0,Math.min(100,s))}(t,a),n=function(e,t){const r=e.ohHaengBalance||{},a=t.ohHaengBalance||{};let s=70;const n=["목","화","토","금","수"];for(const i of n){const e=(r[i]+a[i])/2;e>=15&&e<=25&&(s+=4)}for(const i of n){const e=Qi.상생[i];r[i]>15&&a[e]>15&&(s+=3)}return Math.max(0,Math.min(100,s))}(t,a),i=function(e,t){const r=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],a=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];let s=60;const n=[...r,...a];for(const i of Object.keys(Vi)){const e=i.split("").filter(e=>n.includes(e)).length;3===e?s+=20:2===e&&(s+=10)}for(const i of Zi)r.includes(i[0])&&a.includes(i[1])&&(s-=8);return Math.max(0,Math.min(100,s))}(t,a),d=[{name:"성격 궁합",score:e,description:"성격과 가치관의 조화 (십신/오행 분석)"},{name:"애정 궁합",score:r,description:"감정과 애정 표현의 조화 (지지관계/음양조화)"},{name:"재물 궁합",score:s,description:"경제관념과 재물운의 조화 (재성 분석)"},{name:"건강 궁합",score:n,description:"체질과 건강 에너지의 조화 (오행 균형)"},{name:"미래 궁합",score:i,description:"인생 방향과 목표의 조화 (삼합/육합)"}],c=Math.round(d.reduce((e,t)=>e+t.score,0)/d.length),m=xl(t,a),x=bl(t,a),g=Sl(t,a),h=Cl(t,a);l({totalScore:c,categories:d,advice:al(c,d),detailedAnalysis:{relationship:m,practical:x,depth:g,special:h}}),o(!1)},1e3)}catch(t){alert("궁합 계산 중 오류가 발생했습니다. 다시 시도해주세요."),o(!1)}}},disabled:!e||!r||d,className:"px-8 py-3 rounded-lg font-semibold transition-colors "+(e&&r&&!d?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:d?"분석 중...":"궁합 분석하기"})}),i&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:[null==e?void 0:e.name," ♥ ",null==r?void 0:r.name," 궁합 결과"]}),((null==c?void 0:c.fullSaju)||(null==x?void 0:x.fullSaju))&&s.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-r from-blue-50 to-pink-50 dark:from-blue-900/20 dark:to-pink-900/20 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"사주팔자 비교"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-base font-medium mb-2 text-blue-800 dark:text-blue-200",children:null==e?void 0:e.name}),s.jsx(Gi,{sajuString:null==c?void 0:c.fullSaju,size:"medium",className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-base font-medium mb-2 text-pink-800 dark:text-pink-200",children:null==r?void 0:r.name}),s.jsx(Gi,{sajuString:null==x?void 0:x.fullSaju,size:"medium",className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm"})]})]})]}),s.jsxs("div",{className:`text-6xl font-bold ${u(i.totalScore)}`,children:[i.totalScore,"점"]}),s.jsx("p",{className:"mt-4 text-lg text-gray-700 dark:text-gray-300",children:i.advice})]}),s.jsxs("div",{className:"mb-8 bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-center text-gray-900 dark:text-gray-100",children:"궁합 분석 차트"}),s.jsx(Yi,{data:{categories:i.categories,person1Name:(null==e?void 0:e.name)||"",person2Name:(null==r?void 0:r.name)||""}})]}),i.detailedAnalysis&&s.jsxs("div",{className:"mb-8 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-center text-gray-900 dark:text-gray-100",children:"🌟 20개 항목 종합 궁합 차트"}),s.jsx(Ml,{data:{relationship:i.detailedAnalysis.relationship,practical:i.detailedAnalysis.practical,depth:i.detailedAnalysis.depth,special:i.detailedAnalysis.special}})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.categories.map((e,t)=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.name}),s.jsxs("span",{className:`font-bold ${u(e.score)}`,children:[Math.round(e.score),"점"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 mb-2",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+(e.score>=80?"bg-green-500":e.score>=60?"bg-yellow-500":"bg-red-500"),style:{width:`${e.score}%`}})}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]},t))}),s.jsxs("div",{className:"mt-8 p-6 bg-purple-50 dark:bg-purple-900/30 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:"💡 궁합 개선 팁"}),s.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[s.jsx("li",{children:"• 서로의 차이를 인정하고 존중하세요"}),s.jsx("li",{children:"• 대화를 통해 서로를 이해하려 노력하세요"}),s.jsx("li",{children:"• 공통의 취미나 관심사를 찾아보세요"}),s.jsx("li",{children:"• 감사하는 마음을 자주 표현하세요"})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"📊 분석 기준"}),s.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[s.jsx("li",{children:"• 십신(十神) 관계 분석"}),s.jsx("li",{children:"• 오행 상생상극 체크"}),s.jsx("li",{children:"• 지지 삼합/육합/충 분석"}),s.jsx("li",{children:"• 음양 조화도 계산"})]})]}),s.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"🎯 핵심 포인트"}),s.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[s.jsx("li",{children:"• 일간의 음양 조화"}),s.jsx("li",{children:"• 오행 균형 보완 관계"}),s.jsx("li",{children:"• 재성/관성 분포"}),s.jsx("li",{children:"• 미래 발전 가능성"})]})]})]}),i.detailedAnalysis&&s.jsx(Ui,{relationshipAnalysis:i.detailedAnalysis.relationship,practicalAnalysis:i.detailedAnalysis.practical,depthAnalysis:i.detailedAnalysis.depth,specialAnalysis:i.detailedAnalysis.special})]})]})};function El(){var e,t;const{courseId:r}=d(),i=n(),[l,o]=a.useState(null),[c,m]=a.useState(null),[x,g]=a.useState(null),[h,u]=a.useState(!0),[p,b]=a.useState(!1),[y,j]=a.useState([]),[f,v]=a.useState(null);a.useEffect(()=>{r&&(k(),N())},[r]);const k=async()=>{try{const e={id:r||"1",title:"사주 기초 입문 과정",description:"사주의 기본 개념부터 실전 해석까지",instructor:{name:"김사주 선생님"},lessons:[{id:"1",title:"사주란 무엇인가?",type:"video",duration:1200,videoUrl:"/videos/lesson1.mp4"},{id:"2",title:"천간과 지지의 이해",type:"text",duration:900,content:"천간과 지지는 사주의 기본 구성 요소입니다..."},{id:"3",title:"기초 이론 퀴즈",type:"quiz",duration:600,quiz:{questions:[{question:"천간은 몇 개입니까?",options:["8개","10개","12개","14개"],correctAnswer:1},{question:"지지는 몇 개입니까?",options:["10개","12개","14개","16개"],correctAnswer:1}]}},{id:"4",title:"오행의 상생상극",type:"video",duration:1500,videoUrl:"/videos/lesson4.mp4"}]};o(e),g(e.lessons[0]),u(!1)}catch(e){u(!1)}},N=async()=>{try{m({courseId:r||"1",enrollmentId:"enrollment-1",progress:25,completedLessons:1,totalLessons:4,currentLessonId:"2",lessonProgress:[{lessonId:"1",completed:!0,completedAt:"2024-01-01",timeSpent:1200},{lessonId:"2",completed:!1,timeSpent:300},{lessonId:"3",completed:!1,timeSpent:0},{lessonId:"4",completed:!1,timeSpent:0}]})}catch(e){}},w=async(e,t)=>{if(!c)return;const r={...c},a=r.lessonProgress.findIndex(t=>t.lessonId===e);a>=0&&(r.lessonProgress[a]={...r.lessonProgress[a],completed:!0,completedAt:(new Date).toISOString(),score:t},r.completedLessons=r.lessonProgress.filter(e=>e.completed).length,r.progress=Math.round(r.completedLessons/r.totalLessons*100),m(r))},S=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return h?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"강좌를 불러오는 중..."})]})}):l?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>i("/dashboard"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(xe,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:l.title}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.instructor.name})]})]}),c&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[c.completedLessons,"/",c.totalLessons," 완료"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[c.progress,"% 진행"]})]}),s.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${c.progress}%`}})})]})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"강의 목록"}),s.jsx("div",{className:"space-y-2",children:l.lessons.map((e,t)=>{const r=null==c?void 0:c.lessonProgress.find(t=>t.lessonId===e.id),a=(null==r?void 0:r.completed)||!1,n=((e,t)=>{if(t)return _;switch(e){case"video":return ue;case"text":return he;case"quiz":return ge;default:return M}})(e.type,a),i=(null==x?void 0:x.id)===e.id;return s.jsx("button",{onClick:()=>(e=>{const t=null==l?void 0:l.lessons.find(t=>t.id===e);t&&(g(t),b(!1),j([]),v(null))})(e.id),className:"w-full text-left p-3 rounded-lg transition-colors "+(i?"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700":"hover:bg-gray-50 dark:hover:bg-gray-700"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(n,{className:"h-5 w-5 "+(a?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm font-medium truncate "+(i?"text-purple-700 dark:text-purple-300":"text-gray-900 dark:text-white"),children:[t+1,". ",e.title]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:S(e.duration)})]})]})},e.id)})})]})}),s.jsx("div",{className:"lg:col-span-3",children:x&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:x.title}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx($,{className:"h-4 w-4 mr-1"}),S(x.duration)]}),s.jsx("span",{className:"capitalize",children:"video"===x.type?"동영상":"text"===x.type?"텍스트":"퀴즈"})]})]}),(null==(e=null==c?void 0:c.lessonProgress.find(e=>e.lessonId===x.id))?void 0:e.completed)&&s.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[s.jsx(_,{className:"h-6 w-6 mr-2"}),s.jsx("span",{className:"font-medium",children:"완료"})]})]})}),s.jsxs("div",{className:"p-6",children:["video"===x.type&&s.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg flex items-center justify-center mb-6",children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx(P,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-lg",children:"동영상 플레이어"}),s.jsx("p",{className:"text-sm opacity-75",children:"실제 구현 시 video 태그로 교체됩니다"})]})}),"text"===x.type&&x.content&&s.jsx("div",{className:"prose dark:prose-invert max-w-none",children:s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:x.content})}),"quiz"===x.type&&x.quiz&&s.jsx("div",{className:"space-y-6",children:p?s.jsxs("div",{children:[x.quiz.questions.map((e,t)=>s.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:[t+1,". ",e.question]}),s.jsx("div",{className:"space-y-2",children:e.options.map((e,r)=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:`question-${t}`,value:r,onChange:()=>{const e=[...y];e[t]=r,j(e)},className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),s.jsx("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:e})]},r))})]},t)),null===f?s.jsx("button",{onClick:()=>{if(!(null==x?void 0:x.quiz))return;let e=0;x.quiz.questions.forEach((t,r)=>{y[r]===t.correctAnswer&&e++});const t=Math.round(e/x.quiz.questions.length*100);v(t),t>=70&&w(x.id,t)},disabled:y.length!==x.quiz.questions.length,className:"w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"제출하기"}):s.jsxs("div",{className:"text-center py-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx(T,{className:"h-12 w-12 text-yellow-500 mx-auto mb-2"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"퀴즈 완료!"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:[f,"점"]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:f>=70?"합격입니다! 🎉":"70점 이상이 필요합니다. 다시 시도해보세요."})]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ge,{className:"h-16 w-16 text-purple-600 dark:text-purple-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"퀴즈를 시작하시겠습니까?"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:[x.quiz.questions.length,"개의 문제가 있습니다"]}),s.jsx("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"퀴즈 시작"})]})}),"quiz"!==x.type&&!(null==(t=null==c?void 0:c.lessonProgress.find(e=>e.lessonId===x.id))?void 0:t.completed)&&s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("button",{onClick:()=>w(x.id),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(C,{className:"h-5 w-5 inline mr-2"}),"레슨 완료"]})})]})]})})]})})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(M,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"강좌를 찾을 수 없습니다"}),s.jsx("button",{onClick:()=>i("/dashboard"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"대시보드로 돌아가기"})]})})}const Dl=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],Tl=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],Fl=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];function _l(e){const t=e.charCodeAt(0);if(t<44032||t>55203)return null;const r=t-44032,a=Math.floor(r/588),s=Math.floor(r%588/28);return{cho:Dl[a],jung:Tl[s],jong:Fl[r%28]}}function Pl(e){return Array.from(e).map(e=>{const t=_l(e);return t?t.cho:e}).join("")}function Al(e){return Array.from(e).map(e=>{const t=_l(e);return t?t.cho+t.jung+t.jong:e}).join("")}function Ll(e,t){if(!t||!e)return!1;const r=Pl(e),a=Pl(t);return r.toLowerCase().includes(a.toLowerCase())}function Rl(e,t){if(!e||!t)return 0;const r=e.toLowerCase(),a=t.toLowerCase();let s=0;r.includes(a)&&(s+=100),Ll(e,t)&&(s+=50);const n=Al(e),i=Al(t);n.toLowerCase().includes(i.toLowerCase())&&(s+=25),r.startsWith(a)&&(s+=30);const l=Pl(e),d=Pl(t);return l.toLowerCase().startsWith(d.toLowerCase())&&(s+=20),s}function Ol(e,t){if(!t||!e)return e;t.toLowerCase(),e.toLowerCase();const r=new RegExp(`(${a=t,a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");var a;return e.replace(r,"<mark>$1</mark>")}const Kl=(e,t)=>{let r=0;const a=t.toLowerCase(),s=e.title||"";s.toLowerCase().includes(a)?r+=100:r+=.8*Rl(s,t);const n=e.content||e.description||"";return n.toLowerCase().includes(a)?r+=50:r+=.5*Rl(n,t),Array.isArray(e.tags)&&e.tags.forEach(e=>{const s="string"==typeof e?e:e.name;s&&(s.toLowerCase().includes(a)?r+=30:r+=.3*Rl(s,t))}),Ll(s,t)&&(r+=20),Ll(n,t)&&(r+=10),Math.round(r)},Bl=async e=>{const t=new Promise((e,t)=>{setTimeout(()=>t(new Error("Events search timeout")),5e3)});try{const r=mt({start_date:e.startDate,end_date:e.endDate});return(await Promise.race([r,t])).filter(t=>{const r=e.query.toLowerCase(),a=t.title||"",s=t.description||"",n=a.toLowerCase().includes(r)||s.toLowerCase().includes(r),i=Ll(a,e.query)||Ll(s,e.query)||Rl(a,e.query)>10||Rl(s,e.query)>10;return n||i}).map(t=>({type:"event",id:t.id||"",title:t.title,content:t.description,date:t.start_time,highlight:Ol(t.title,e.query),score:Kl(t,e.query),data:t})).slice(0,e.limit||10)}catch(r){return r instanceof Error&&r.message,[]}},Il=(e,t)=>{const r=t.query.toLowerCase();return e.filter(e=>{const a=e.title||e.text||"",s=e.description||"",n=a.toLowerCase().includes(r)||s.toLowerCase().includes(r),i=Ll(a,t.query)||Ll(s,t.query)||Rl(a,t.query)>10||Rl(s,t.query)>10,l=n||i,d=(!t.startDate||new Date(e.date)>=new Date(t.startDate))&&(!t.endDate||new Date(e.date)<=new Date(t.endDate));return l&&d}).map(e=>{const r=e.title||e.text;return{type:"todo",id:e.id,title:r,content:e.description,date:e.date,highlight:Ol(r,t.query),score:Kl(e,t.query),data:e}}).slice(0,t.limit||10)},zl=async e=>{const t=new Promise((e,t)=>{setTimeout(()=>t(new Error("Diaries search timeout")),5e3)});try{const r=wt({q:e.query,startDate:e.startDate,endDate:e.endDate});return(await Promise.race([r,t])).map(t=>({type:"diary",id:t.id||"",title:`${t.date} 일기`,content:t.content,date:t.date,highlight:Ol(t.content.substring(0,100),e.query),score:Kl(t,e.query),data:t})).slice(0,e.limit||10)}catch(r){return r instanceof Error&&r.message,[]}},ql=async(e,t=[])=>{performance.now();try{if(!e.query||e.query.trim().length<1)return[];if(e.query.length>100)throw new Error("검색어가 너무 깁니다. 100자 이하로 입력해주세요.");const a=e.categories||["events","todos","diaries"],s=[],n=[];a.includes("events")&&n.push(Bl(e)),a.includes("diaries")&&n.push(zl(e));if((await Promise.allSettled(n)).forEach((e,t)=>{"fulfilled"===e.status&&s.push(...e.value)}),a.includes("todos"))try{const r=Il(t,e);s.push(...r)}catch(r){}const i=((e,t)=>[...e].sort((e,r)=>{if("date"===t.sortBy){const t=e.date?new Date(e.date).getTime():0;return(r.date?new Date(r.date).getTime():0)-t}return(r.score||0)-(e.score||0)}).slice(0,t.limit||20))(s,e);return i}catch(r){throw new Error("검색 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.")}};function Wl(e){const t=new Map;return e.forEach(e=>{const r=e.type;t.has(r)||t.set(r,[]),t.get(r).push(e)}),t}function Hl(e){return{all:"전체",events:"일정",todos:"할일",diaries:"일기",tags:"태그"}[e]||e}function Yl(e,t){return e.length<=t?e:`${e.substring(0,t)}...`}function Ul({item:e,onClick:t}){const r=()=>{if("event"!==e.type||!e.data)return null;try{const t=new Date(e.data.start_time),r=new Date(e.data.end_time);return e.data.all_day?"종일":`${ye(t,"HH:mm")} - ${ye(r,"HH:mm")}`}catch{return null}};return s.jsx("div",{onClick:()=>t(e),className:`px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer border-l-2 ${(()=>{switch(e.type){case"event":return"bg-blue-50 dark:bg-blue-900/20 border-l-blue-500";case"todo":return"bg-green-50 dark:bg-green-900/20 border-l-green-500";case"diary":return"bg-purple-50 dark:bg-purple-900/20 border-l-purple-500";case"tag":return"bg-orange-50 dark:bg-orange-900/20 border-l-orange-500";default:return"bg-gray-50 dark:bg-gray-900/20 border-l-gray-500"}})()} transition-colors`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-1",children:(()=>{const t="h-5 w-5 flex-shrink-0";switch(e.type){case"event":return s.jsx(S,{className:`${t} text-blue-500`});case"todo":return s.jsx(C,{className:`${t} text-green-500`});case"diary":return s.jsx(M,{className:`${t} text-purple-500`});case"tag":return s.jsx(pe,{className:`${t} text-orange-500`});default:return s.jsx(S,{className:`${t} text-gray-500`})}})()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:e.title}),(()=>{var t;if("todo"!==e.type||!(null==(t=e.data)?void 0:t.priority))return null;const r={high:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",low:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"},a=e.data.priority;return s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${r[a]||r.low}`,children:{high:"높음",medium:"보통",low:"낮음"}[a]||a})})(),"diary"===e.type&&(null==(i=e.data)?void 0:i.mood)?s.jsx("span",{className:"text-lg",children:e.data.mood}):null]}),e.highlight&&(n=e.highlight,n?s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",dangerouslySetInnerHTML:{__html:n}}):null),!e.highlight&&e.content&&s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:Yl((a=e.content,(new DOMParser).parseFromString(a,"text/html").body.textContent||""),100)}),s.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[e.date&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(S,{className:"h-3 w-3"}),s.jsx("span",{children:(e=>{if(!e)return null;try{const t=new Date(e);return ye(t,"yyyy년 M월 d일",{locale:Ce})}catch{return e}})(e.date)})]}),r()&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($,{className:"h-3 w-3"}),s.jsx("span",{children:r()})]}),!1]})]}),s.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 self-start",children:["event"===e.type&&"일정","todo"===e.type&&"할일","diary"===e.type&&"일기","tag"===e.type&&"태그"]})]})});var a,n,i}const Gl=a.forwardRef(({onSearch:e,placeholder:t="일정, 할일, 일기 검색...",className:r="",showCategories:i=!0},l)=>{const[d,o]=a.useState(""),[c,m]=a.useState([]),[x,g]=a.useState(!1),[h,u]=a.useState(!1),[p,b]=a.useState(["all"]),[y,j]=a.useState(null),{todos:f,setCurrentDate:v,setViewMode:k,setSelectedDate:N}=Tt(),w=function(e,t){const[r,s]=a.useState(e);return a.useEffect(()=>{const r=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}(d,300),S=a.useRef(null),C=a.useRef(null);(({onSearchFocus:e}={})=>{const t=n(),r=a.useRef(null);a.useEffect(()=>{const r=r=>{var a;if((r.ctrlKey||r.metaKey)&&"k"===r.key&&(r.preventDefault(),e?e():t("/search")),"Escape"===r.key){const e=document.activeElement;e&&"text"===e.type&&(null==(a=e.placeholder)?void 0:a.includes("검색"))&&(e.value="",e.blur())}if("/"===r.key&&!r.ctrlKey&&!r.metaKey&&!r.altKey){const a=document.activeElement;a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement||(r.preventDefault(),e?e():t("/search"))}};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[t,e])})({onSearchFocus:()=>{var e;null==(e=C.current)||e.focus(),u(!0)}}),a.useImperativeHandle(l,()=>({focus:()=>{var e;null==(e=C.current)||e.focus(),u(!0)},clear:()=>{o(""),m([]),u(!1)}}));a.useEffect(()=>{(async()=>{if(w.length<2)return m([]),void u(!1);g(!0),j(null);try{const t={query:w,categories:p.includes("all")?["events","todos","diaries"]:p,limit:15,sortBy:"relevance"},r=await ql(t,f);m(r),u(!0),e&&e(r)}catch(t){j("검색 중 오류가 발생했습니다.")}finally{g(!1)}})()},[w,p]),a.useEffect(()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const M=e=>{switch(u(!1),o(""),e.type){case"event":if(e.date){const t=Ae(e.date);v(t),N(t),k("day")}break;case"todo":if(e.date){const t=Ae(e.date);v(t),N(t),k("day")}break;case"diary":if(e.date){const t=Ae(e.date);v(t),N(t),k("dayEnhanced")}}},$=Wl(c);return s.jsxs("div",{ref:S,className:`relative ${r}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:C,type:"text",value:d,onChange:e=>o(e.target.value),onKeyDown:e=>{"Escape"===e.key&&(u(!1),o(""))},onFocus:()=>d.length>=2&&c.length>0&&u(!0),placeholder:t,className:"w-full px-4 py-2 pl-10 pr-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),s.jsx(q,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),d&&s.jsx("button",{onClick:()=>{o(""),m([]),u(!1)},className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-600",children:s.jsx(X,{})}),x&&s.jsx("div",{className:"absolute right-3 top-2.5",children:s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"})})]}),i&&s.jsx("div",{className:"flex gap-2 mt-2",children:["all","events","todos","diaries"].map(e=>s.jsx("button",{onClick:()=>(e=>{if("all"===e)b(["all"]);else{const t=p.includes("all")?[e]:p.includes(e)?p.filter(t=>t!==e):[...p.filter(e=>"all"!==e),e];b(0===t.length?["all"]:t)}})(e),className:"px-3 py-1 rounded-full text-xs font-medium transition-colors "+(p.includes(e)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:Hl(e)},e))}),h&&s.jsxs("div",{className:"absolute top-full mt-2 w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg max-h-96 overflow-y-auto z-50 border border-gray-200 dark:border-gray-700",children:[y&&s.jsx("div",{className:"px-4 py-3 text-red-600 dark:text-red-400 text-sm",children:y}),!y&&0===c.length&&!x&&d.length>=2&&s.jsx("div",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 text-sm",children:"검색 결과가 없습니다."}),!y&&c.length>0&&s.jsxs("div",{children:[Array.from($.entries()).map(([e,t])=>s.jsxs("div",{children:[s.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 font-semibold text-sm text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:[Hl(e)," (",t.length,")"]}),t.map(e=>s.jsx(Ul,{item:e,onClick:M},`${e.type}-${e.id}`))]},e)),c.length>=15&&s.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 dark:text-gray-400 text-center border-t border-gray-200 dark:border-gray-600",children:"더 많은 결과가 있습니다. 검색어를 구체적으로 입력해보세요."})]})]})]})});Gl.displayName="SearchBar";const Ql=()=>{const e=g(),t=n(),{todos:r,setCurrentDate:i,setViewMode:l,setSelectedDate:d}=Tt(),[o,c]=a.useState(""),[m,x]=a.useState([]),[h,u]=a.useState(!1),[p,b]=a.useState(["all"]),[y,j]=a.useState("relevance"),[f,v]=a.useState({}),[k,N]=a.useState(!1),[w,S]=a.useState(null),[C,M]=a.useState([]);a.useEffect(()=>{var t;const r=new URLSearchParams(e.search).get("q"),a=null==(t=e.state)?void 0:t.results;r?(c(r),E(r)):a&&x(a)},[e]),a.useEffect(()=>{const e=localStorage.getItem("recentSearches");e&&M(JSON.parse(e))},[]);const E=async e=>{const t=e||o;if(t.length<2)x([]);else{u(!0),S(null);try{const e=await ql({query:t,categories:p.includes("all")?["events","todos","diaries"]:p,startDate:f.start,endDate:f.end,sortBy:y,limit:50},r);x(e);const a=[t,...C.filter(e=>e!==t)].slice(0,10);M(a),localStorage.setItem("recentSearches",JSON.stringify(a));const s=new URL(window.location.href);s.searchParams.set("q",t),window.history.replaceState({},"",s.toString())}catch(a){S("검색 중 오류가 발생했습니다.")}finally{u(!1)}}},D=e=>{switch(e.type){case"event":if(e.date){const r=Ae(e.date);i(r),d(r),l("day"),t("/calendar")}break;case"todo":if(e.date){const r=Ae(e.date);i(r),d(r),l("day"),t("/calendar")}break;case"diary":e.date&&t(`/diary/${e.date}`)}},T=Wl(m),F=m.length;return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(q,{className:"h-8 w-8 text-purple-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"검색"})]}),s.jsx("div",{className:"flex-1 max-w-2xl",children:s.jsx(Gl,{placeholder:"일정, 할일, 일기 검색...",className:"w-full",showCategories:!1,onSearch:e=>{x(e)}})}),s.jsxs("button",{onClick:()=>N(!k),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[s.jsx(be,{className:"h-5 w-5"}),"필터"]})]}),o&&s.jsxs("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:["'",s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:o}),"' 검색 결과 ",F,"개"]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"lg:w-64 "+(k?"block":"hidden lg:block"),children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"필터"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"카테고리"}),s.jsx("div",{className:"space-y-2",children:["all","events","todos","diaries"].map(e=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:p.includes(e),onChange:()=>(e=>{if("all"===e)b(["all"]);else{const t=p.includes("all")?[e]:p.includes(e)?p.filter(t=>t!==e):[...p.filter(e=>"all"!==e),e];b(0===t.length?["all"]:t)}})(e),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:Hl(e)})]},e))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"정렬"}),s.jsxs("select",{value:y,onChange:e=>j(e.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",children:[s.jsx("option",{value:"relevance",children:"관련도순"}),s.jsx("option",{value:"date",children:"날짜순"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"날짜 범위"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"date",value:f.start||"",onChange:e=>v(t=>({...t,start:e.target.value})),className:"w-full rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",placeholder:"시작 날짜"}),s.jsx("input",{type:"date",value:f.end||"",onChange:e=>v(t=>({...t,end:e.target.value})),className:"w-full rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",placeholder:"종료 날짜"})]})]}),s.jsx("button",{onClick:()=>E(),disabled:h,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:h?"검색 중...":"다시 검색"})]}),C.length>0&&s.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"최근 검색어"}),s.jsx("div",{className:"space-y-1",children:C.slice(0,5).map((e,t)=>s.jsxs("button",{onClick:()=>(e=>{c(e),E(e)})(e),className:"w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:[s.jsx($,{className:"inline h-3 w-3 mr-2"}),e]},t))})]})]}),s.jsxs("div",{className:"flex-1",children:[w&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-700 dark:text-red-400",children:w})}),h&&s.jsxs("div",{className:"flex justify-center items-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),s.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"검색 중..."})]}),!h&&o&&0===m.length&&!w&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(q,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"검색 결과가 없습니다"}),s.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"다른 키워드로 검색해보세요."})]}),!h&&m.length>0&&s.jsx("div",{className:"space-y-6",children:Array.from(T.entries()).map(([e,t])=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[Hl(e)," (",t.length,")"]})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(e=>s.jsx(Ul,{item:e,onClick:D},`${e.type}-${e.id}`))})]},e))}),!o&&!h&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(q,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"검색을 시작해보세요"}),s.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"일정, 할일, 일기를 검색할 수 있습니다."})]})]})]})})]})},Vl=()=>{const[e,t]=a.useState(""),[r,n]=a.useState(!1),i="undefined"!=typeof window&&"localhost"===window.location.hostname?"/api/calendar":"https://calendar-j3vjlsr7q-johns-projects-bf5e60f3.vercel.app/api/calendar";return s.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"API 테스트 페이지"}),s.jsxs("div",{className:"mb-4 p-4 bg-gray-800 rounded",children:[s.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["현재 호스트: ",window.location.hostname]}),s.jsxs("p",{className:"text-sm text-gray-400",children:["API URL: ",i]})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("button",{onClick:async()=>{n(!0);try{const e=await fetch(`${i}/health`),r=await e.json();t(JSON.stringify(r,null,2))}catch(e){t(`Error: ${e}`)}n(!1)},disabled:r,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded disabled:opacity-50",children:"Health Check 테스트"}),s.jsx("button",{onClick:async()=>{n(!0);try{const e=await fetch(`${i}/customers?page=1&limit=10`),r=await e.json();t(JSON.stringify(r,null,2))}catch(e){t(`Error: ${e}`)}n(!1)},disabled:r,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded disabled:opacity-50 ml-4",children:"고객 목록 조회"}),s.jsx("button",{onClick:async()=>{n(!0);try{const e=await fetch(`${i}/customers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"테스트 고객",birth_date:"1990-01-01",birth_time:"12:00",phone:"010-1234-5678",lunar_solar:"solar",gender:"male",memo:"API 테스트"})}),r=await e.json();t(JSON.stringify(r,null,2))}catch(e){t(`Error: ${e}`)}n(!1)},disabled:r,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded disabled:opacity-50 ml-4",children:"고객 생성 테스트"})]}),s.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"결과:"}),s.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:r?"로딩 중...":e||"버튼을 클릭하여 API를 테스트하세요."})]})]})};const Jl=l.memo(function({palace:e,isSelected:t,onClick:r}){const n=a.useMemo(()=>{switch(e.fortune){case"excellent":return"from-green-400 to-emerald-500 dark:from-green-500 dark:to-emerald-600";case"good":return"from-blue-400 to-cyan-500 dark:from-blue-500 dark:to-cyan-600";case"neutral":default:return"from-gray-400 to-slate-500 dark:from-gray-500 dark:to-slate-600";case"bad":return"from-orange-400 to-amber-500 dark:from-orange-500 dark:to-amber-600";case"terrible":return"from-red-400 to-rose-500 dark:from-red-500 dark:to-rose-600"}},[e.fortune]),i=a.useMemo(()=>{switch(e.fortune){case"excellent":return"🌟";case"good":return"✨";case"neutral":default:return"⚖️";case"bad":return"⚠️";case"terrible":return"❌"}},[e.fortune]);return s.jsxs("button",{onClick:r,className:`\n        relative p-3 md:p-4 rounded-xl transition-all duration-300\n        ${t?"ring-4 ring-purple-500 ring-offset-2 dark:ring-offset-gray-900 scale-105 shadow-2xl":"ring-1 ring-gray-300 dark:ring-gray-700 hover:ring-2 hover:ring-purple-400 hover:scale-102 shadow-lg hover:shadow-xl"}\n        bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm\n        cursor-pointer\n      `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:`\n          text-sm font-bold px-2 py-1 rounded-full\n          bg-gradient-to-r ${n}\n          text-white\n        `,children:[e.palace,"궁"]}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:e.direction})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"팔문"}),s.jsx("div",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.gate})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"구성"}),s.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:e.star})]}),e.spirit&&s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"팔신"}),s.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:e.spirit})]}),s.jsx("div",{className:"absolute top-2 right-2 text-2xl",children:i}),s.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.tianGan,e.diZhi," · ",e.wuXing]})}),t&&s.jsx("div",{className:"absolute inset-0 rounded-xl bg-purple-500/10 dark:bg-purple-400/10 pointer-events-none"})]})});const Zl=l.memo(function({chart:e,selectedPalace:t,onPalaceSelect:r}){const n=a.useCallback(e=>{r(e)},[r]),i=a.useMemo(()=>Gt.flatMap(r=>r.map(r=>{const a=e.palaces[r],i=t===r;return s.jsx(Jl,{palace:a,isSelected:i,onClick:()=>n(r)},r)})),[e.palaces,t,n]);return s.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[s.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-4 aspect-square",children:i}),s.jsx("div",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400",children:s.jsxs("div",{className:"flex justify-center items-center gap-8",children:[s.jsx("div",{children:"🧭 북쪽(상): 1궁"}),s.jsx("div",{children:"🧭 남쪽(하): 9궁"}),s.jsx("div",{children:"🧭 동쪽(좌): 3궁"}),s.jsx("div",{children:"🧭 서쪽(우): 7궁"})]})})]})});function Xl({position:e,palace:t,palaceData:r,isSelected:n,onClick:i}){const l=a.useRef(null),d=a.useMemo(()=>{switch(r.fortune){case"excellent":return"#10b981";case"good":return"#3b82f6";case"neutral":default:return"#6b7280";case"bad":return"#f59e0b";case"terrible":return"#ef4444"}},[r.fortune]);return Je(e=>{if(l.current&&n){const t=1+.1*Math.sin(3*e.clock.elapsedTime);l.current.scale.set(t,t,t)}else l.current&&l.current.scale.set(1,1,1)}),s.jsxs("group",{position:e,children:[s.jsx(Ze,{ref:l,args:[1.8,.3,1.8],onClick:i,children:s.jsx("meshStandardMaterial",{color:d,emissive:d,emissiveIntensity:n?.5:.1,roughness:.5,metalness:.3})}),s.jsxs(Xe,{position:[0,.3,0],fontSize:.4,color:"white",anchorX:"center",anchorY:"middle",children:[t,"궁"]}),s.jsx(Xe,{position:[0,-.5,0],fontSize:.25,color:"#ffffff",anchorX:"center",anchorY:"middle",children:r.direction}),s.jsx(Xe,{position:[0,0,1],fontSize:.2,color:"#ffff00",anchorX:"center",anchorY:"middle",children:r.star}),s.jsx(Xe,{position:[0,0,-1],fontSize:.2,color:"#00ffff",anchorX:"center",anchorY:"middle",children:r.gate}),s.jsx(Xe,{position:[-1,0,0],fontSize:.18,color:"#ff00ff",anchorX:"center",anchorY:"middle",rotation:[0,Math.PI/2,0],children:r.god}),n&&s.jsx(Ze,{args:[2,.4,2],children:s.jsx("meshBasicMaterial",{color:"#ffffff",wireframe:!0})})]})}function ed({chart:e,selectedPalace:t,onPalaceSelect:r,autoRotate:n}){const i=a.useRef(null);Je(()=>{i.current&&n&&(i.current.rotation.y+=.003)});const l=a.useMemo(()=>{const e={};return Gt.forEach((t,r)=>{t.forEach((t,a)=>{const s=2.5*(a-1),n=2.5*(r-1);e[t]=[s,0,n]})}),e},[]);return s.jsxs("group",{ref:i,children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("pointLight",{position:[10,10,10],intensity:1}),s.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),Object.entries(e.palaces).map(([e,a])=>{const n=e,i=l[n];return s.jsx(Xl,{position:i,palace:n,palaceData:a,isSelected:t===n,onClick:()=>null==r?void 0:r(n)},e)}),s.jsx("gridHelper",{args:[15,15,"#444444","#222222"],position:[0,-.5,0]})]})}const td=l.memo(function({chart:e,selectedPalace:t,onPalaceSelect:r,autoRotate:a=!0}){return s.jsxs("div",{className:"w-full h-full min-h-[600px] bg-gradient-to-b from-gray-900 to-black rounded-xl overflow-hidden shadow-2xl",children:[s.jsxs(Qe,{camera:{position:[8,8,8],fov:50},gl:{antialias:!0},children:[s.jsx(ed,{chart:e,selectedPalace:t,onPalaceSelect:r,autoRotate:a}),s.jsx(Ve,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:5,maxDistance:20,maxPolarAngle:Math.PI/2})]}),s.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/70 backdrop-blur-sm rounded-lg p-4 text-white text-sm",children:[s.jsx("h3",{className:"font-bold mb-2",children:"색상 범례"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),s.jsx("span",{children:"대길 (Excellent)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),s.jsx("span",{children:"길 (Good)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded"}),s.jsx("span",{children:"중립 (Neutral)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),s.jsx("span",{children:"흉 (Bad)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),s.jsx("span",{children:"대흉 (Terrible)"})]})]}),s.jsx("h3",{className:"font-bold mt-4 mb-2",children:"텍스트 색상"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-yellow-400",children:"●"}),s.jsx("span",{children:"9성 (앞면)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-cyan-400",children:"●"}),s.jsx("span",{children:"8문 (뒷면)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-pink-400",children:"●"}),s.jsx("span",{children:"8신 (측면)"})]})]})]}),s.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 backdrop-blur-sm rounded-lg p-4 text-white text-sm",children:[s.jsx("h3",{className:"font-bold mb-2",children:"조작 방법"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"🖱️ 드래그: 회전"}),s.jsx("li",{children:"🔍 휠: 줌 인/아웃"}),s.jsx("li",{children:"👆 클릭: 궁 선택"}),s.jsx("li",{children:"🔄 자동 회전 중..."})]})]})]})});function rd({palace:e,onClose:t}){const r=Qt(e.gate),a=Vt(e.star),n=e.spirit?(i=e.spirit,Yt[i]):null;var i;const l=(()=>{switch(e.fortune){case"excellent":return{text:"대길 🌟",color:"text-green-600 dark:text-green-400"};case"good":return{text:"길 ✨",color:"text-blue-600 dark:text-blue-400"};case"neutral":default:return{text:"평 ⚖️",color:"text-gray-600 dark:text-gray-400"};case"bad":return{text:"흉 ⚠️",color:"text-orange-600 dark:text-orange-400"};case"terrible":return{text:"대흉 ❌",color:"text-red-600 dark:text-red-400"}}})();return s.jsxs("div",{className:`p-6 rounded-xl bg-gradient-to-br ${(()=>{switch(e.fortune){case"excellent":return"from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20";case"good":return"from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20";case"neutral":default:return"from-gray-50 to-slate-50 dark:from-gray-900/20 dark:to-slate-900/20";case"bad":return"from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20";case"terrible":return"from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20"}})()} backdrop-blur-sm shadow-xl border border-gray-200 dark:border-gray-700`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:[e.palace,"궁 - ",e.direction]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`text-2xl font-bold ${l.color}`,children:l.text}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.tianGan,e.diZhi," · ",e.wuXing]})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"닫기",children:s.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:"📖 종합 해석"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:e.interpretation})]}),s.jsxs("div",{className:"mb-4 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["🚪 팔문 - ",r.name]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:r.meaning}),s.jsx("div",{className:"flex gap-2 flex-wrap mb-2",children:r.effects.positive.map((e,t)=>s.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-xs",children:["✅ ",e]},t))}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:r.effects.negative.map((e,t)=>s.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-xs",children:["⚠️ ",e]},t))})]}),s.jsxs("div",{className:"mb-4 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["⭐ 구성 - ",a.name]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[a.meaning," (",a.planet,", ",a.element,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:a.influences.map((e,t)=>s.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs",children:e},t))})]}),n&&s.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["🛡️ 팔신 - ",n.name]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:n.meaning}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:n.characteristics.map((e,t)=>s.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs",children:e},t))})]}),e.recommendations.length>0&&s.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsx("h3",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"✅ 추천 행동"}),s.jsx("ul",{className:"space-y-1",children:e.recommendations.map((e,t)=>s.jsxs("li",{className:"text-sm text-green-700 dark:text-green-400 flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]}),e.warnings.length>0&&s.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsx("h3",{className:"text-lg font-bold text-red-800 dark:text-red-300 mb-2",children:"⚠️ 주의사항"}),s.jsx("ul",{className:"space-y-1",children:e.warnings.map((e,t)=>s.jsxs("li",{className:"text-sm text-red-700 dark:text-red-400 flex items-start",children:[s.jsx("span",{className:"mr-2",children:"•"}),s.jsx("span",{children:e})]},t))})]})]})}function ad({selectedDate:e,onChange:t}){const[r,n]=a.useState(!1);return s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[s.jsx("button",{onClick:()=>n(!r),className:"px-6 py-3 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm shadow-lg hover:shadow-xl transition-all hover:scale-105 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"선택된 시간"}),s.jsxs("div",{className:"font-bold text-gray-800 dark:text-gray-100",children:[(i=e,i.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"}))," ",(e=>e.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}))(e)]})]})]})}),s.jsx("button",{onClick:()=>{t(new Date),n(!1)},className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all hover:scale-105 font-medium",children:"현재 시간"})]}),r&&s.jsxs("div",{className:"p-6 bg-white/90 dark:bg-gray-800/90 rounded-xl backdrop-blur-sm shadow-xl border border-gray-200 dark:border-gray-700 max-w-md mx-auto",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"시간 선택"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"날짜"}),s.jsx("input",{type:"date",value:`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,onChange:r=>{const a=new Date(r.target.value);if(!isNaN(a.getTime())){const r=new Date(e);r.setFullYear(a.getFullYear()),r.setMonth(a.getMonth()),r.setDate(a.getDate()),t(r)}},className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"시간"}),s.jsx("input",{type:"time",value:`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`,onChange:r=>{const[a,s]=r.target.value.split(":").map(Number),n=new Date(e);n.setHours(a,s),t(n)},className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:["💡 ",s.jsx("strong",{children:"간지 시간 안내"}),s.jsxs("ul",{className:"mt-2 space-y-1 ml-4",children:[s.jsx("li",{children:"• 자시(子時): 23:00~01:00"}),s.jsx("li",{children:"• 축시(丑時): 01:00~03:00"}),s.jsx("li",{children:"• 인시(寅時): 03:00~05:00"}),s.jsx("li",{children:"• 묘시(卯時): 05:00~07:00"}),s.jsx("li",{children:"• 진시(辰時): 07:00~09:00"}),s.jsx("li",{children:"• 사시(巳時): 09:00~11:00"}),s.jsx("li",{children:"• 오시(午時): 11:00~13:00"}),s.jsx("li",{children:"• 미시(未時): 13:00~15:00"}),s.jsx("li",{children:"• 신시(申時): 15:00~17:00"}),s.jsx("li",{children:"• 유시(酉時): 17:00~19:00"}),s.jsx("li",{children:"• 술시(戌時): 19:00~21:00"}),s.jsx("li",{children:"• 해시(亥時): 21:00~23:00"})]})]})})]}),s.jsx("button",{onClick:()=>n(!1),className:"mt-4 w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 rounded-lg font-medium transition-colors",children:"닫기"})]})]});var i}function sd({onClose:e}){const[t,r]=a.useState("what");return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"📖 귀문둔갑 초보자 가이드"}),s.jsx("p",{className:"text-purple-100",children:"처음이시라면 여기서 시작하세요!"})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"닫기",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>r("what"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("what"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"귀문둔갑이란?"}),s.jsx("button",{onClick:()=>r("how"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("how"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"사용 방법"}),s.jsx("button",{onClick:()=>r("terms"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("terms"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"용어 설명"})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-200px)]",children:["what"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"🔮 귀문둔갑이란?"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:["귀문둔갑(奇門遁甲)은 ",s.jsx("strong",{children:"시간과 방위의 길흉"}),"을 알려주는 중국 고대 점술입니다. 마치 날씨 예보처럼, ",s.jsx("strong",{children:"특정 시간과 방향이 나에게 유리한지 불리한지"}),"를 미리 알 수 있게 해줍니다."]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"💡 어디에 활용하나요?"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🚗"}),s.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-1",children:"여행/출장"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"어느 방향으로 갈 때 길한지 확인"})]}),s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"💼"}),s.jsx("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-1",children:"비즈니스"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"중요한 미팅 방향과 시간 선택"})]}),s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🏠"}),s.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-1",children:"부동산"}),s.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"이사 방향과 집 구조 배치 결정"})]}),s.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"💰"}),s.jsx("h4",{className:"font-bold text-pink-900 dark:text-pink-300 mb-1",children:"투자"}),s.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-400",children:"재물운이 좋은 시간대 파악"})]})]})]}),s.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"⚠️ 주의사항"}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-1",children:[s.jsx("li",{children:"• 귀문둔갑은 참고 도구입니다. 절대적인 것이 아닙니다."}),s.jsx("li",{children:"• 중요한 결정은 신중하게 여러 요소를 고려하세요."}),s.jsx("li",{children:"• 긍정적인 마음가짐이 가장 중요합니다!"})]})]})]}),"how"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"📱 화면 구성 및 사용법"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"3x3 구궁 차트"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["9개 칸이 각각 ",s.jsx("strong",{children:"방위(동서남북 등)"}),"를 나타냅니다. 각 칸을 클릭하면 그 방향의 상세 정보를 볼 수 있습니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 점수가 70점 이상인 방위를 찾아 클릭해보세요. 팔문, 구성, 팔신의 조합이 왜 좋은지 상세하게 설명됩니다."]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"길흉 표시 및 점수"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:"각 방위마다 이모지와 점수로 길흉을 표시합니다:"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[s.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm",children:"🌟 대길 (80-100점)"}),s.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:"✨ 길 (60-79점)"}),s.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:"⚖️ 평 (40-59점)"}),s.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-sm",children:"⚠️ 흉 (20-39점)"}),s.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm",children:"❌ 대흉 (0-19점)"})]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 점수 차이가 크지 않다면(예: 55점 vs 62점) 너무 집착하지 마세요. 전체적인 운세가 중요합니다."]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"시간 선택 및 비교"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:['"시간 선택" 버튼을 눌러 ',s.jsx("strong",{children:"과거나 미래 시간"}),"의 길흉을 확인할 수 있습니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"}),' "시간대 비교" 버튼을 클릭하면 여러 시간대를 한눈에 비교할 수 있습니다. 중요한 일정은 미리 2-3개 시간대를 비교해보세요!']})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"4"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"목적 선택 (매우 중요!)"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["화면 상단의 ",s.jsx("strong",{children:'"🎯 목적"'})," 드롭다운에서 현재 상황에 맞는 목적을 선택하세요."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"여행"}),": 안전하고 즐거운 여행을 위한 방위 제시"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"비즈니스"}),": 계약, 협상에 유리한 방위와 시간"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"투자"}),": 재물운이 좋은 방향과 타이밍"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"건강"}),": 치료나 요양에 좋은 방위"]})]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"고객 정보 적용 (선택사항)"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:['"고객 선택하기"로 생년월일을 입력하면 ',s.jsx("strong",{children:"개인 맞춤 해석"}),"을 받을 수 있습니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 같은 시간이라도 생년월일에 따라 길흉이 달라질 수 있습니다. 정확한 해석을 원하면 꼭 입력하세요!"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"6"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"AI에게 질문하기"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:'"🤖 AI에게 질문하기" 버튼을 누르면 궁금한 점을 직접 물어볼 수 있습니다.'}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsx("p",{children:'💡 예시 질문: "내일 오후 2시에 동쪽으로 미팅 가는데 괜찮을까요?"'}),s.jsx("p",{children:'💡 예시 질문: "이번 주 남쪽 방향 출장은 언제가 가장 좋을까요?"'}),s.jsx("p",{children:'💡 예시 질문: "재물운이 좋은 시간대를 알려주세요."'})]})]})]})]})]}),s.jsxs("section",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[s.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3 text-lg",children:"🎯 실전 활용 시나리오"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"💼"}),s.jsx("span",{children:"시나리오 1: 중요한 비즈니스 미팅"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"}),' 목적을 "비즈니스"로 선택',s.jsx("br",{}),s.jsx("strong",{children:"2단계:"})," 미팅 날짜/시간 입력 후 차트 확인",s.jsx("br",{}),s.jsx("strong",{children:"3단계:"})," 70점 이상인 방위 찾기",s.jsx("br",{}),s.jsx("strong",{children:"4단계:"})," 해당 방위를 클릭하여 상세 정보 확인",s.jsx("br",{}),s.jsx("strong",{children:"5단계:"})," 가능하면 그 방향의 장소를 선택하거나, 회의실에서 그 방향에 앉기"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"✈️"}),s.jsx("span",{children:"시나리오 2: 주말 여행 계획"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"}),' 목적을 "여행"으로 선택',s.jsx("br",{}),s.jsx("strong",{children:"2단계:"}),' "시간대 비교"로 토요일/일요일 비교',s.jsx("br",{}),s.jsx("strong",{children:"3단계:"})," 더 점수가 높은 날 선택",s.jsx("br",{}),s.jsx("strong",{children:"4단계:"})," 길한 방위(동/서/남/북)를 확인",s.jsx("br",{}),s.jsx("strong",{children:"5단계:"})," 해당 방향의 여행지를 우선 고려"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"🏠"}),s.jsx("span",{children:"시나리오 3: 이사 날짜 및 방향 결정"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"}),' 목적을 "부동산"으로 선택',s.jsx("br",{}),s.jsx("strong",{children:"2단계:"})," 고객 정보(생년월일) 입력",s.jsx("br",{}),s.jsx("strong",{children:"3단계:"}),' 이사 가능한 여러 날짜를 "시간대 비교"로 체크',s.jsx("br",{}),s.jsx("strong",{children:"4단계:"})," 종합 점수가 가장 높은 날 선택",s.jsx("br",{}),s.jsx("strong",{children:"5단계:"})," 현재 집에서 새 집 방향이 길한지 확인",s.jsx("br",{}),s.jsx("strong",{children:"6단계:"}),' AI에게 "이날 북쪽으로 이사 가는데 괜찮을까요?" 질문']})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"📅"}),s.jsx("span",{children:"시나리오 4: 매일 아침 운세 체크 루틴"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"})," 아침에 앱을 열면 자동으로 현재 시간 차트 표시",s.jsx("br",{}),s.jsx("strong",{children:"2단계:"})," 전체 운세 점수 확인 (70점 이상이면 좋은 날!)",s.jsx("br",{}),s.jsx("strong",{children:"3단계:"}),' "길한 방위"를 메모해두기',s.jsx("br",{}),s.jsx("strong",{children:"4단계:"})," 하루 동안 중요한 일은 그 방향에서 하거나 그 방향을 향해 진행",s.jsx("br",{}),s.jsx("strong",{children:"5단계:"}),' "불리한 방위"는 가급적 피하기']})]})]})]}),s.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"⚠️ 주의사항 및 FAQ"}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-2",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"점수가 낮은 날은 아무것도 하면 안 되나요?"}),s.jsx("br",{}),"A: 아닙니다! 40점 이상이면 일상적인 활동은 괜찮습니다. 다만 중요한 결정이나 큰 계약은 피하는 것이 좋습니다."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"모든 방위가 평범한 날은 어떻게 하나요?"}),s.jsx("br",{}),"A: 상대적으로 점수가 높은 방위를 선택하거나, 시간대를 바꿔서 다시 확인해보세요."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"차트가 2시간마다 바뀐다고 하는데, 정각에만 바뀌나요?"}),s.jsx("br",{}),"A: 네, 정확히는 자시(23-01시), 축시(01-03시) 등 2시간 단위로 바뀝니다. 홀수 시각 정각에 갱신됩니다."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"생년월일을 입력했는데 점수가 별로 안 변했어요."}),s.jsx("br",{}),"A: 생년월일의 영향은 보너스 점수로 작용합니다(±10점 내외). 기본 차트가 더 중요하므로 크게 걱정하지 마세요."]})]})]})]})]}),"terms"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"🚪 팔문(八門) - 8개의 문"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:'각 방위에 배치된 "문"으로, 그 방향의 에너지를 나타냅니다.'}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-green-900 dark:text-green-300",children:"휴문 · 생문 · 개문"}),s.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"→ 좋은 문 (휴식, 성장, 시작)"})]}),s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300",children:"경문"}),s.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:"→ 명예와 영광의 문"})]}),s.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-red-900 dark:text-red-300",children:"상문 · 두문 · 사문"}),s.jsx("div",{className:"text-sm text-red-700 dark:text-red-400",children:"→ 안 좋은 문 (갈등, 막힘, 종결)"})]}),s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-300",children:"놀문"}),s.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:"→ 변화의 문 (좋을수도 나쁠수도)"})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"⭐ 구성(九星) - 9개의 별"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"하늘의 별처럼, 각 방위의 기운을 더해주는 요소입니다."}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[s.jsx("span",{className:"text-green-600",children:"✅"}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"천임, 천보, 천심, 천금"})," = 좋은 별 (신뢰, 지원, 치유, 균형)"]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[s.jsx("span",{className:"text-red-600",children:"⚠️"}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"천봉, 천예"})," = 안 좋은 별 (간계, 질병)"]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[s.jsx("span",{className:"text-blue-600",children:"⚖️"}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"천충, 천영, 천주"})," = 중립 별 (변화, 명예, 권위)"]})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"🛡️ 팔신(八神) - 8개의 신"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"각 방위를 지키는 수호신 같은 존재입니다."}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-green-900 dark:text-green-300",children:"직부 · 태음 · 육합 · 구지 · 구천"}),s.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"→ 좋은 신"})]}),s.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-red-900 dark:text-red-300",children:"등사 · 백호 · 현무"}),s.jsx("div",{className:"text-sm text-red-700 dark:text-red-400",children:"→ 안 좋은 신"})]})]})]}),s.jsxs("section",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-2",children:"🎯 간단히 기억하세요!"}),s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:["복잡해 보이지만, ",s.jsx("strong",{children:"각 방위를 클릭하면 쉬운 말로 설명"}),"이 나옵니다. 처음에는 ",s.jsx("strong",{children:"🌟✨ 이모지가 많은 방향"}),"을 선택하세요!"]})]})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:s.jsx("button",{onClick:e,className:"w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl",children:"시작하기"})})]})})}const nd=["갑","을","병","정","무","기","경","신","임","계"],id={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"},ld={"목":{element:"목",englishName:"Wood",favorableDirection:"동쪽",favorableSeason:"봄",color:"청록색",personality:"성장과 확장을 추구하는 성향",advice:"새로운 시작과 성장에 유리합니다. 동쪽 방향에서 활동하면 좋습니다.",icon:"🌱"},"화":{element:"화",englishName:"Fire",favorableDirection:"남쪽",favorableSeason:"여름",color:"붉은색",personality:"열정적이고 활동적인 성향",advice:"열정을 쏟는 일에 유리합니다. 남쪽 방향에서 활동하면 좋습니다.",icon:"🔥"},"토":{element:"토",englishName:"Earth",favorableDirection:"중앙",favorableSeason:"환절기",color:"황색",personality:"안정과 신뢰를 중시하는 성향",advice:"안정적인 관계와 기반을 다지는데 유리합니다. 중앙에서 균형을 잡으세요.",icon:"⛰️"},"금":{element:"금",englishName:"Metal",favorableDirection:"서쪽",favorableSeason:"가을",color:"흰색",personality:"결단력과 정의감이 강한 성향",advice:"결단이 필요한 일에 유리합니다. 서쪽 방향에서 활동하면 좋습니다.",icon:"⚔️"},"수":{element:"수",englishName:"Water",favorableDirection:"북쪽",favorableSeason:"겨울",color:"검은색",personality:"지혜롭고 유연한 성향",advice:"지혜와 전략이 필요한 일에 유리합니다. 북쪽 방향에서 활동하면 좋습니다.",icon:"💧"}};function dd(e){const t=function(e){return nd[((e-1984)%10+10)%10]}(e),r=function(e){return id[e]||"목"}(t),a=function(e){return ld[e]||ld["목"]}(r);return{year:e,stem:t,element:r,characteristics:a}}function od(e){if(!e)return null;try{const t=parseInt(e.split("-")[0]);return isNaN(t)||t<1900||t>2100?null:dd(t)}catch(t){return null}}const cd={"목":"화","화":"토","토":"금","금":"수","수":"목"},md={"목":"토","토":"수","수":"화","화":"금","금":"목"};function xd(e,t){return e===t?.3:cd[e]===t?.8:cd[t]===e?.6:md[e]===t?-.3:md[t]===e?-.6:0}function gd(e,t){if(!t)return 0;const r=t.element;let a=0;a+=8*xd(r,Qt(e.gate).element);a+=7*xd(r,Vt(e.star).element);const s={"동":"목","동남":"목","남":"화","서남":"토","서":"금","서북":"금","북":"수","동북":"토","중앙":"토"}[e.direction]||null;if(s){a+=5*xd(r,s)}return Math.max(-15,Math.min(15,Math.round(a)))}function hd(e,t){const r=e.overallFortune.score;if(!t)return{baseScore:r,personalScore:r,bonus:0,explanation:""};let a=0,s=0;const n=e.overallFortune.bestPalaces,i=e.overallFortune.worstPalaces;for(const c of Object.keys(e.palaces)){const r=Number(c),l=gd(e.palaces[r],t);n.includes(r)?a+=1.5*l:i.includes(r)?a+=.7*l:a+=l,s++}const l=Math.round(a/s),d=Math.max(0,Math.min(100,r+l));let o="";return o=l>5?`${t.characteristics.element} 기운이 오늘과 잘 맞습니다!`:l<-5?`${t.characteristics.element} 기운이 오늘과 약간 충돌합니다.`:`${t.characteristics.element} 기운이 오늘과 중립적입니다.`,{baseScore:r,personalScore:d,bonus:l,explanation:o}}const ud={green:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-300",textLight:"text-green-700 dark:text-green-400"},blue:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-900 dark:text-blue-300",textLight:"text-blue-700 dark:text-blue-400"},gray:{bg:"bg-gray-50 dark:bg-gray-700",border:"border-gray-200 dark:border-gray-600",text:"text-gray-900 dark:text-gray-300",textLight:"text-gray-700 dark:text-gray-400"},orange:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-300",textLight:"text-orange-700 dark:text-orange-400"},red:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-300",textLight:"text-red-700 dark:text-red-400"}};const pd=l.memo(function({chart:e,customerName:t,customerBirthDate:r}){const n=a.useMemo(()=>e.overallFortune.bestPalaces,[e.overallFortune.bestPalaces]),i=a.useMemo(()=>e.overallFortune.worstPalaces,[e.overallFortune.worstPalaces]),l=a.useMemo(()=>r?od(r):null,[r]),d=a.useMemo(()=>hd(e,l),[e,l]),o=a.useMemo(()=>{const t=l?d.personalScore:e.overallFortune.score;return t>=75?{icon:"🌟",title:"오늘은 매우 좋은 날입니다!",description:"중요한 일을 진행하기에 최적의 시간입니다.",color:"green"}:t>=60?{icon:"✨",title:"오늘은 좋은 날입니다",description:"계획했던 일들을 추진하기 좋습니다.",color:"blue"}:t>=40?{icon:"⚖️",title:"오늘은 평범한 날입니다",description:"무난하게 하루를 보내기 좋습니다.",color:"gray"}:t>=25?{icon:"⚠️",title:"오늘은 주의가 필요합니다",description:"중요한 결정은 신중하게 하세요.",color:"orange"}:{icon:"❌",title:"오늘은 조심하세요",description:"중요한 일은 미루는 것이 좋습니다.",color:"red"}},[l,d,e.overallFortune.score]),c=a.useMemo(()=>function(e,t){const r=e.overallFortune.bestPalaces[0],a=e.palaces[r].direction,s=[{icon:"🚗",situation:"여행/출장",direction:`${a} 방향으로`},{icon:"💼",situation:"중요한 미팅",direction:`${a} 방향 장소 추천`},{icon:"💰",situation:"재물운",direction:`${a} 방향 투자처`},{icon:"👥",situation:"사람 만나기",direction:`${a} 방향에서`}];if(t){const e=t.characteristics.favorableDirection;s.push({icon:t.characteristics.icon,situation:`${t.characteristics.element} 기운 활용`,direction:`${e} 방향이 특히 유리`})}return s}(e,l),[e,l]),m=ud[o.color];return s.jsxs("div",{className:"mb-6 space-y-4",children:[t&&r&&s.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-700 rounded-xl",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-700 dark:text-purple-300",children:[s.jsx("span",{className:"text-xl",children:"👤"}),s.jsx("span",{className:"font-bold",children:t}),s.jsxs("span",{className:"text-sm",children:["(",r,")"]}),s.jsx("span",{className:"ml-2 text-sm",children:"님 맞춤 분석"})]})}),l&&s.jsx("div",{className:"p-4 bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 border border-indigo-200 dark:border-indigo-700 rounded-xl",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"text-4xl",children:l.characteristics.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("h3",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-300",children:["당신의 오행: ",l.characteristics.element," ","(",l.characteristics.englishName,")"]}),s.jsxs("span",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-medium",children:[l.year,"년생 ",l.stem]})]}),s.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-400 mb-2",children:l.characteristics.personality}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[s.jsx("span",{className:"font-semibold",children:"유리한 방위:"})," ",l.characteristics.favorableDirection]}),s.jsxs("div",{className:"p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[s.jsx("span",{className:"font-semibold",children:"유리한 계절:"})," ",l.characteristics.favorableSeason]})]}),s.jsxs("div",{className:"mt-2 p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded text-xs text-indigo-800 dark:text-indigo-300",children:["💡 ",s.jsx("strong",{children:"맞춤 조언:"})," ",l.characteristics.advice]})]})]})}),s.jsx("div",{className:`p-6 rounded-xl border ${m.bg} ${m.border}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"text-5xl",children:o.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:`text-2xl font-bold mb-2 ${m.text}`,children:o.title}),s.jsx("p",{className:`text-lg ${m.textLight}`,children:o.description})]})]})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[s.jsxs("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"👍"}),s.jsx("span",{children:"오늘 좋은 방향"})]}),s.jsx("div",{className:"space-y-2",children:n.slice(0,3).map(t=>{const r=e.palaces[t];return s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl",children:"🧭"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-bold text-green-900 dark:text-green-300",children:[r.direction," (",t,"궁)"]}),s.jsx("div",{className:"text-xs text-green-700 dark:text-green-400",children:bd(r.gate,r.star)})]})]},t)})}),s.jsx("div",{className:"mt-3 p-3 bg-green-100 dark:bg-green-900/40 rounded-lg",children:s.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:["💡 ",s.jsx("strong",{children:"활용 팁:"})," 중요한 약속이나 여행은 이 방향으로!"]})})]}),s.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:[s.jsxs("h4",{className:"font-bold text-red-900 dark:text-red-300 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"⚠️"}),s.jsx("span",{children:"주의할 방향"})]}),s.jsx("div",{className:"space-y-2",children:i.slice(0,3).map(t=>{const r=e.palaces[t];return s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl",children:"🚫"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-bold text-red-900 dark:text-red-300",children:[r.direction," (",t,"궁)"]}),s.jsx("div",{className:"text-xs text-red-700 dark:text-red-400",children:yd(r.gate,r.star)})]})]},t)})}),s.jsx("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/40 rounded-lg",children:s.jsxs("p",{className:"text-sm text-red-800 dark:text-red-300",children:["💡 ",s.jsx("strong",{children:"주의 사항:"})," 가능하면 이 방향은 피하세요"]})})]})]}),s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[s.jsxs("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"💼"}),s.jsx("span",{children:"상황별 추천 방향"})]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:c.map((e,t)=>s.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[s.jsx("span",{className:"text-xl",children:e.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-sm text-blue-900 dark:text-blue-300",children:e.situation}),s.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400",children:e.direction})]})]},t))})]})]})});function bd(e,t){return{"휴문":"휴식과 회복에 좋음","생문":"새로운 시작에 좋음","경문":"명예와 성공에 좋음","개문":"기회를 잡기 좋음","놀문":"변화와 도전","상문":"갈등 주의","두문":"막힘과 어려움","사문":"종결과 마무리"}[e]||"평범한 기운"}function yd(e,t){return{"상문":"다툼이나 갈등 조심","두문":"일이 막힐 수 있음","사문":"중요한 일 미루기","놀문":"예상치 못한 변화","휴문":"지나친 안주 주의","생문":"무리한 확장 주의","경문":"허영심 주의","개문":"방어력 약화"}[e]||"주의가 필요함"}const jd={excellent:{bg:"bg-green-500/80",bgHover:"hover:bg-green-500",border:"border-green-400",text:"text-white",glow:"shadow-green-500/50"},good:{bg:"bg-green-400/70",bgHover:"hover:bg-green-400",border:"border-green-300",text:"text-white",glow:"shadow-green-400/50"},neutral:{bg:"bg-gray-400/60",bgHover:"hover:bg-gray-400",border:"border-gray-300",text:"text-white",glow:"shadow-gray-400/50"},bad:{bg:"bg-orange-400/70",bgHover:"hover:bg-orange-400",border:"border-orange-300",text:"text-white",glow:"shadow-orange-400/50"},terrible:{bg:"bg-red-500/80",bgHover:"hover:bg-red-500",border:"border-red-400",text:"text-white",glow:"shadow-red-500/50"}},fd={excellent:"대길",good:"길",neutral:"평",bad:"흉",terrible:"대흉"};function vd({chart:e,selectedPalace:t,onPalaceSelect:r}){return s.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[s.jsxs("div",{className:"mb-4 text-center",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:"🎨 길흉 히트맵"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"색상이 진할수록 강한 길흉을 나타냅니다"})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl backdrop-blur-sm",children:[[4,9,2],[3,5,7],[8,1,6]].map((a,n)=>s.jsx(l.Fragment,{children:a.map(a=>{const n=e.palaces[a],i=jd[n.fortune],l=t===a,d=n.patterns&&n.patterns.length>0,o=d&&n.patterns?n.patterns.reduce((e,t)=>t.strength>e.strength?t:e):null;return s.jsxs("button",{onClick:()=>r(a),className:`\n                    relative aspect-square rounded-lg transition-all duration-300 ease-in-out\n                    ${i.bg} ${i.bgHover}\n                    border-2 ${l?`${i.border} border-4`:"border-white/30"}\n                    ${i.text}\n                    shadow-lg ${l?i.glow:""}\n                    transform ${l?"scale-105":"scale-100"}\n                    hover:scale-110 hover:shadow-xl\n                    cursor-pointer\n                    ${c=n.fortune,{excellent:"brightness-110",good:"brightness-105",neutral:"brightness-100",bad:"brightness-95",terrible:"brightness-90"}[c]}\n                  `,style:{filter:l?"brightness(1.1)":"brightness(1)"},children:[s.jsxs("div",{className:"absolute top-1 left-1 text-xs font-semibold opacity-75",children:[a,"궁"]}),d&&o&&s.jsx("div",{className:"absolute top-1 right-1",children:s.jsx("div",{className:`\n                          w-2 h-2 rounded-full animate-pulse\n                          ${"auspicious"===o.type?"bg-yellow-300":"inauspicious"===o.type?"bg-purple-300":"bg-blue-300"}\n                        `,title:o.name})}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"text-2xl font-bold mb-1",children:fd[n.fortune]}),s.jsx("div",{className:"text-xs opacity-90",children:n.direction})]}),s.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center text-xs font-medium opacity-90",children:n.gate}),l&&s.jsx("div",{className:"absolute inset-0 border-2 border-white rounded-lg animate-pulse"})]},a);var c})},n))}),s.jsxs("div",{className:"mt-6 p-4 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm",children:[s.jsx("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 text-center",children:"🎨 색상 범례"}),s.jsx("div",{className:"flex justify-center gap-3 flex-wrap",children:Object.entries(fd).map(([e,t])=>{const r=jd[e];return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-6 h-6 rounded ${r.bg} border-2 ${r.border}`}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t})]},e)})}),s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-300 dark:border-gray-600",children:s.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-300 animate-pulse"}),s.jsx("span",{children:"길격"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-300 animate-pulse"}),s.jsx("span",{children:"흉격"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-300 animate-pulse"}),s.jsx("span",{children:"중립"})]})]})})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-green-700 dark:text-green-300 mb-1",children:"길한 궁"}),s.jsx("div",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:e.overallFortune.bestPalaces.length})]}),s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/20 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 mb-1",children:"평균"}),s.jsxs("div",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:[e.overallFortune.score,"점"]})]}),s.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-red-700 dark:text-red-300 mb-1",children:"흉한 궁"}),s.jsx("div",{className:"text-xl font-bold text-red-800 dark:text-red-200",children:e.overallFortune.worstPalaces.length})]})]})]})}function kd({baseDate:e,customer:t,onClose:r}){const[n,i]=a.useState("hourly"),[l,d]=a.useState([]),[o,c]=a.useState(null);a.useEffect(()=>{t&&(parseInt(t.birth_date.split("-")[0]),parseInt(t.birth_date.split("-")[1]),parseInt(t.birth_date.split("-")[2]),t.birth_time&&parseInt(t.birth_time.split(":")[0]));const r=[];if("hourly"===n)for(let t=-4;t<=4;t+=2){const a=new Date(e);a.setHours(e.getHours()+t);const s=or({dateTime:a});r.push({dateTime:a,label:0===t?"현재":`${t>0?"+":""}${t}시간`,chart:s})}else if("daily"===n)for(let t=-3;t<=3;t++){const a=new Date(e);a.setDate(e.getDate()+t);const s=or({dateTime:a});r.push({dateTime:a,label:0===t?"오늘":`${t>0?"+":""}${t}일`,chart:s})}else if("weekly"===n)for(let t=-2;t<=2;t++){const a=new Date(e);a.setDate(e.getDate()+7*t);const s=or({dateTime:a});r.push({dateTime:a,label:0===t?"이번 주":`${t>0?"+":""}${t}주`,chart:s})}d(r)},[n,e,t]);const m=e=>e>=80?"text-green-600 dark:text-green-400":e>=60?"text-blue-600 dark:text-blue-400":e>=40?"text-yellow-600 dark:text-yellow-400":e>=20?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400";return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-800",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"📊 시간대별 길흉 변화 비교"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t?`${t.name}님의 운세 변화를 분석합니다`:"전체적인 운세 변화를 분석합니다"})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-white/50 dark:hover:bg-gray-700 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex justify-center gap-3",children:[{value:"hourly",label:"⏰ 시간별",desc:"2시간 단위"},{value:"daily",label:"📅 일별",desc:"하루 단위"},{value:"weekly",label:"📆 주별",desc:"일주일 단위"}].map(({value:e,label:t,desc:r})=>s.jsxs("button",{onClick:()=>i(e),className:"px-6 py-3 rounded-lg font-medium transition-all "+(n===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[s.jsx("div",{children:t}),s.jsx("div",{className:"text-xs opacity-75",children:r})]},e))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-6",children:l.map((e,t)=>{const r="현재"===e.label||"오늘"===e.label||"이번 주"===e.label;return s.jsxs("div",{className:"p-4 rounded-xl border-2 transition-all "+(r?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 shadow-lg":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),children:[s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("div",{className:"text-sm font-bold mb-1 "+(r?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300"),children:e.label}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.dateTime.toLocaleString("ko-KR",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"text-center mb-3 p-2 bg-white dark:bg-gray-900/50 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:e.chart.solarTerm.name}),s.jsxs("div",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:["yang"===e.chart.yinYang?"양둔":"음둔"," ",e.chart.ju,"국"]})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg "+(a=e.chart.overallFortune.score,a>=80?"bg-green-100 dark:bg-green-900/30":a>=60?"bg-blue-100 dark:bg-blue-900/30":a>=40?"bg-yellow-100 dark:bg-yellow-900/30":a>=20?"bg-orange-100 dark:bg-orange-900/30":"bg-red-100 dark:bg-red-900/30"),children:[s.jsx("div",{className:`text-3xl font-bold ${m(e.chart.overallFortune.score)}`,children:e.chart.overallFortune.score}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"excellent"===e.chart.overallFortune.level?"대길":"good"===e.chart.overallFortune.level?"길":"neutral"===e.chart.overallFortune.level?"평":"bad"===e.chart.overallFortune.level?"흉":"대흉"})]})]},t);var a})}),o&&s.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800 rounded-xl border border-blue-200 dark:border-blue-800",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:["🎯 ",o,"궁 변화 추적"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:(x=o,l.map(e=>({label:e.label,fortune:e.chart.palaces[x].fortune,score:e.chart.overallFortune.score}))).map((e,t)=>s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg text-center border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:e.label}),s.jsx("div",{className:"text-sm font-bold "+("excellent"===e.fortune?"text-green-600":"good"===e.fortune?"text-blue-600":"neutral"===e.fortune?"text-yellow-600":"bad"===e.fortune?"text-orange-600":"text-red-600"),children:"excellent"===e.fortune?"대길":"good"===e.fortune?"길":"neutral"===e.fortune?"평":"bad"===e.fortune?"흉":"대흉"})]},t))})]}),s.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"🔍 궁 선택하여 변화 추적"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6,7,8,9].map(e=>s.jsxs("button",{onClick:()=>c(e),className:"px-4 py-2 rounded-lg font-medium transition-all "+(o===e?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[e,"궁"]},e))})]})]}),s.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 text-center",children:s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"💡 시간대별 길흉 변화를 비교하여 최적의 행동 시점을 파악하세요"})})]})});var x}const Nd={general:{gates:{},stars:{},spirits:{},description:"일상적인 활동과 전반적인 운세",icon:"🌟",keywords:["일상","종합","전체"]},business:{gates:{"생문":1,"개문":.8,"경문":.7,"휴문":.3,"두문":-.8,"사문":-1},stars:{"천보":1,"천임":.8,"천충":.5,"천영":.6,"천예":-.9,"천봉":-.5},spirits:{"직부":1,"육합":.8,"구천":.7,"백호":-.9,"현무":-.8},description:"사업, 계약, 거래, 투자, 창업",icon:"💼",keywords:["비즈니스","사업","계약","거래","투자","창업"]},love:{gates:{"생문":1,"개문":.7,"휴문":.8,"경문":.6,"상문":-.7,"사문":-1},stars:{"천임":.9,"천보":.8,"천심":.7,"천영":.5,"천예":-.8,"천충":-.3},spirits:{"육합":1,"태음":.9,"직부":.6,"백호":-.9,"등사":-.7},description:"연애, 만남, 결혼, 프로포즈, 중매",icon:"💕",keywords:["연애","사랑","결혼","만남","프로포즈","이성"]},travel:{gates:{"개문":1,"생문":.8,"휴문":.7,"경문":.6,"두문":-.9,"사문":-1},stars:{"천충":.8,"천보":.7,"천임":.6,"천영":.5,"천예":-.9,"천봉":-.6},spirits:{"구천":1,"직부":.7,"육합":.6,"백호":-.9,"현무":-.8},description:"여행, 출장, 이사, 이동, 귀향",icon:"✈️",keywords:["여행","출장","이사","이동","귀향","관광"]},health:{gates:{"휴문":1,"생문":.9,"개문":.5,"상문":-.8,"사문":-1,"두문":-.6},stars:{"천심":1,"천임":.8,"천보":.7,"천금":.6,"천예":-1,"천봉":-.7},spirits:{"직부":.8,"태음":.7,"구지":.9,"백호":-1,"등사":-.8},description:"건강, 치료, 수술, 검진, 요양",icon:"🏥",keywords:["건강","치료","병원","수술","검진","요양"]},wealth:{gates:{"생문":1,"개문":.8,"경문":.7,"휴문":.5,"사문":-1,"두문":-.7},stars:{"천보":1,"천임":.8,"천금":.7,"천영":.5,"천예":-.9,"천봉":-.6},spirits:{"직부":.9,"육합":.7,"구천":.6,"현무":-1,"백호":-.8},description:"투자, 재테크, 사업 자금, 계약금",icon:"💰",keywords:["재물","투자","재테크","수입","돈","자금"]},lawsuit:{gates:{"경문":1,"개문":.6,"휴문":.5,"상문":-.3,"사문":-.8,"두문":-.5},stars:{"천영":.9,"천임":.8,"천충":.4,"천예":-.9,"천봉":-.7},spirits:{"직부":1,"육합":.7,"구천":.5,"백호":-1,"현무":-.9},description:"소송, 법률, 분쟁, 계약 문제, 고소",icon:"⚖️",keywords:["소송","법률","분쟁","재판","고소","계약"]},education:{gates:{"생문":1,"개문":.9,"경문":.8,"휴문":.6,"두문":-.7,"놀문":-.4},stars:{"천보":.9,"천임":.8,"천심":.7,"천영":.8,"천충":.5,"천예":-.8},spirits:{"직부":.9,"육합":.7,"태음":.6,"등사":-.7,"백호":-.6},description:"시험, 입학, 학업, 자격증, 교육",icon:"📚",keywords:["시험","학업","입학","자격증","공부","교육"]}};function wd(e){return Nd[e||"general"]}function Sd(){return Object.entries(Nd).map(([e,t])=>({value:e,label:Cd(e),icon:t.icon,description:t.description}))}function Cd(e){return{general:"일반 (전체)",business:"비즈니스",love:"연애/결혼",travel:"여행/이동",health:"건강/치료",wealth:"재물/투자",lawsuit:"소송/법률",education:"교육/학업"}[e]}function Md(e){return e>=80?"excellent":e>=60?"good":e>=40?"neutral":e>=20?"bad":"terrible"}function $d(e,t,r,a){const s=wd(t);!t||s.description,Object.values(e.palaces).map(e=>{const r=function(e,t,r,a){let s=50;const n=Wt[e].nature;"auspicious"===n?s+=15:"inauspicious"===n&&(s-=15);const i=Ht[t].nature;if("auspicious"===i?s+=15:"inauspicious"===i&&(s-=15),r){const e=Yt[r].nature;"auspicious"===e?s+=20:"inauspicious"===e&&(s-=20)}if(!a||"general"===a)return{score:s,fortune:Md(s),contextBonus:0};const l=wd(a);let d=0;d+=20*(l.gates[e]||0),d+=15*(l.stars[t]||0),r&&(d+=15*(l.spirits[r]||0));const o=Math.max(0,Math.min(100,s+d));return{score:o,fortune:Md(o),contextBonus:d}}(e.gate,e.star,e.spirit,t);return`${e.palace}궁(${e.direction}): ${e.gate}, ${e.star}, ${e.spirit||"없음"} - ${r.score}점`}).join(", ");let n="";if(a){const e=od(a.birth_date),t=parseInt(a.birth_date.split("-")[0]);parseInt(a.birth_date.split("-")[1]),parseInt(a.birth_date.split("-")[2]);const r=(new Date).getFullYear()-t;e&&(n=`\n\n🙋 고객 정보:\n- 이름: ${a.name}님\n- 생년월일: ${a.birth_date} (${"lunar"===a.lunar_solar?"음력":"양력"})\n- 나이: ${r}세\n- 생년 천간: ${e.stem}\n- 오행: ${e.element}\n- 생시: ${a.birth_time||"미상"}\n- 특징: ${e.characteristics.personality}`)}let i="";if(a){const e=od(a.birth_date);e&&(i=`${a.name}님의 사주(생년 천간: ${e.stem}, 오행: ${e.element})와 귀문둔갑을 연결하여`)}return`당신은 30년 경력의 귀문둔갑 전문가입니다. ${a?a.name+"님에게":"고객에게"} 친구처럼 편하게 조언하듯 자연스럽게 대화하세요.\n${n}\n\n📍 현재 귀문둔갑 상황:\n- 현재 시간: ${e.dateTime.toLocaleString("ko-KR")}\n- 국(局): ${"yang"===e.yinYang?"양둔":"음둔"} ${e.ju}국\n- 절기: ${e.solarTerm.name}\n- 전체 기운: ${e.overallFortune.score}점\n- 추천 방위: ${e.overallFortune.bestPalaces.map(t=>e.palaces[t].direction).join(", ")}\n- 주의 방위: ${e.overallFortune.worstPalaces.map(t=>e.palaces[t].direction).join(", ")}\n\n💬 사용자 질문: "${r}"\n\n✅ 반드시 지킬 사항:\n1. 🌏 순수 한국어만 사용 (한자어 단어는 괜찮지만, 중국어 글자, 영어, 일본어, 아랍어 등 외국어 문자는 절대 금지)\n2. 🚫 <think> 태그나 사고 과정 절대 보여주지 말 것\n3. 📝 마크다운 형식(#, **, -, 등) 사용하지 말 것\n4. 💬 친구에게 말하듯 "~거든요", "~해요", "~네요" 같은 편한 말투 사용\n5. 💡 현실적이고 균형 잡힌 조언 제공:\n   - 좋은 점만 강조하지 말고 주의할 점도 반드시 언급\n   - 낮은 점수(60점 미만) 궁위나 방위는 솔직하게 알려주고 극복 방법 제시\n   - "~하면 좋아요"가 아닌 "~해야 합니다", "~주의하세요" 같은 구체적 표현 사용\n6. 📋 구체적인 실천 방법 제시:\n   - 추상적인 조언 금지 (예: "노력하세요" ❌)\n   - 구체적인 행동 지침 제공 (예: "오전 9시-11시 사이 동쪽 방향에서 계약하세요" ✅)\n   - ${i||""} 시간(예: 오전 9시에서 11시 사이), 방향, 방법을 명확히 제시\n7. ⚠️ 위험 요소 명확히 전달:\n   - 점수가 낮은 궁위는 어떤 문제가 생길 수 있는지 구체적으로 설명\n   - 피해야 할 행동, 조심해야 할 시기와 방위를 명시\n8. 🔮 오행 원리로 간단히 이유 설명\n9. 📏 400-600자 정도로 충분히 설명\n\n지금 바로 순수 한국어로만 답변을 시작하세요 (외국어 문자 사용 절대 금지):`}function Ed({chart:e,context:t,customer:r,onClose:n}){const[i,l]=a.useState([{role:"system",content:r?`안녕하세요 ${r.name}님! 저는 귀문둔갑 AI 상담사입니다. ${r.name}님의 사주 정보를 바탕으로 맞춤 조언을 드리겠습니다. 궁금하신 점을 물어보세요! 😊`:"안녕하세요! 저는 귀문둔갑 AI 상담사입니다. 궁금하신 점을 물어보세요! 😊",timestamp:new Date}]),[d,o]=a.useState(""),[c,m]=a.useState(!1),x=a.useRef(null),g=a.useRef(null),[h,u]=a.useState(new Map),[p,b]=a.useState(!1),y=a.useRef(null);a.useEffect(()=>{var e;null==(e=x.current)||e.scrollIntoView({behavior:"smooth"})},[i]),a.useEffect(()=>{var e;null==(e=g.current)||e.focus()},[]),a.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;y.current=new e,y.current.lang="ko-KR",y.current.continuous=!1,y.current.interimResults=!1,y.current.onresult=e=>{const t=e.results[0][0].transcript;o(t),b(!1)},y.current.onerror=e=>{b(!1)},y.current.onend=()=>{b(!1)}}return()=>{y.current&&y.current.stop()}},[]);const j=(e,t,r)=>{const a=e.toLowerCase();if(a.includes("언제")||a.includes("시간")||a.includes("타이밍"))return t.hourGanZhi,`현재 ${"yang"===t.yinYang?"양둔":"음둔"} ${t.ju}국이며, 전체 운세는 ${t.overallFortune.score}점입니다. ${t.overallFortune.summary} 가장 좋은 방위는 ${t.overallFortune.bestPalaces.map(e=>`${e}궁(${t.palaces[e].direction})`).join(", ")}입니다. 😊`;if(a.includes("방향")||a.includes("방위")||a.includes("어디")){const e=t.overallFortune.bestPalaces[0],r=t.palaces[e];return`가장 좋은 방위는 ${r.direction} 방향(${e}궁)입니다! ${r.interpretation} ✨`}if(a.includes("조심")||a.includes("피해야")||a.includes("위험")){const e=t.overallFortune.worstPalaces[0],r=t.palaces[e];return`${r.direction} 방향(${e}궁)은 조심하세요. ${r.interpretation} 주의사항: ${r.warnings.join(", ")} ⚠️`}if(a.includes("사업")||a.includes("비즈니스")||a.includes("계약")){const e=Object.values(t.palaces).filter(e=>"생문"===e.gate||"개문"===e.gate||"경문"===e.gate);if(e.length>0){const t=e[0];return`비즈니스에는 ${t.direction} 방향이 좋습니다. ${t.gate}과 ${t.star}의 조합이 사업 추진에 유리합니다. 계약이나 미팅을 이 방향에서 진행하세요! 💼`}}if(a.includes("연애")||a.includes("사랑")||a.includes("결혼")){const e=Object.values(t.palaces).filter(e=>"육합"===e.spirit||"태음"===e.spirit);if(e.length>0){const t=e[0];return`연애운은 ${t.direction} 방향이 좋습니다. ${t.spirit}이 작용하여 좋은 인연을 만날 수 있습니다. 이 방향으로 데이트나 만남을 가져보세요! 💕`}}return`현재 ${t.solarTerm.name} 절기이며, ${"yang"===t.yinYang?"양둔":"음둔"} ${t.ju}국입니다. 전체 운세 점수는 ${t.overallFortune.score}점으로 ${t.overallFortune.level} 등급입니다. ${t.overallFortune.summary} 더 구체적인 질문을 해주시면 자세히 답변해드리겠습니다! 😊`},f=async()=>{if(!d.trim()||c)return;const a={role:"user",content:d.trim(),timestamp:new Date};l(e=>[...e,a]),o(""),m(!0);try{const s={role:"assistant",content:await(async a=>{try{const s=`${e.ju}_${e.yinYang}_${t}_${(null==r?void 0:r.id)||"none"}_${a.toLowerCase().trim()}`;if(h.has(s))return h.get(s);const n=$d(e,t,a,r),i=await fetch("/api/v1/qimen/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n,userQuestion:a})});if(!i.ok)return j(a,e,t);const l=await i.json();return l.success&&l.response?(u(e=>new Map(e).set(s,l.response)),l.response):j(a,e,t)}catch(s){return j(a,e)}})(a.content),timestamp:new Date};l(e=>[...e,s])}catch(s){const e={role:"assistant",content:"죄송합니다. 응답 생성 중 오류가 발생했습니다. 다시 시도해주세요.",timestamp:new Date};l(t=>[...t,e])}finally{m(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-center md:items-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-3xl md:rounded-3xl shadow-2xl w-full max-w-5xl h-[85vh] md:h-[750px] flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-4 rounded-t-3xl md:rounded-t-3xl flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-2xl",children:"🤖"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"귀문둔갑 AI 상담사"}),s.jsx("p",{className:"text-blue-100 text-xs",children:"general"!==t&&`${t} 전문 상담`})]})]}),s.jsx("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map((e,t)=>s.jsx("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:s.jsxs("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 "+("user"===e.role?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"assistant"===e.role?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100":"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800"),children:[s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),s.jsx("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},t)),c&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl px-4 py-3",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),s.jsx("div",{ref:x})]}),1===i.length&&s.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"💡 이런 질문을 해보세요:"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:["지금 중요한 계약하기 좋은가요?","어느 방향이 가장 좋나요?","조심해야 할 방위는 어디인가요?","오늘 연애운은 어떤가요?"].map((e,t)=>s.jsx("button",{onClick:()=>o(e),className:"text-xs px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e},t))})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{y.current?p?(y.current.stop(),b(!1)):(y.current.start(),b(!0)):alert("이 브라우저는 음성 인식을 지원하지 않습니다.")},disabled:c,className:`px-3 py-3 rounded-full font-medium transition-all shadow-md ${p?"bg-red-500 text-white animate-pulse-strong":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"} disabled:opacity-50`,title:"음성 입력",children:p?"🎤":"🎙️"}),s.jsx("input",{ref:g,type:"text",value:d,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f())},placeholder:p?"음성 인식 중...":"질문을 입력하세요...",disabled:c,className:"flex-1 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-full text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),s.jsx("button",{onClick:f,disabled:!d.trim()||c,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-medium hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:"전송"})]}),p&&s.jsx("div",{className:"mt-2 text-center text-sm text-red-500 dark:text-red-400 animate-pulse",children:"🎤 듣고 있습니다... 말씀해주세요"})]})]})})}function Dd({message:e,type:t="info",duration:r=3e3,onClose:n}){a.useEffect(()=>{const e=setTimeout(()=>{n()},r);return()=>clearTimeout(e)},[r,n]);return s.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-slide-in-right",children:s.jsxs("div",{className:`${{success:"bg-green-500 dark:bg-green-600",info:"bg-blue-500 dark:bg-blue-600",warning:"bg-orange-500 dark:bg-orange-600",error:"bg-red-500 dark:bg-red-600"}[t]} text-white px-6 py-4 rounded-lg shadow-2xl flex items-center gap-3 min-w-[300px] max-w-md`,children:[s.jsx("span",{className:"text-2xl",children:{success:"✅",info:"ℹ️",warning:"⚠️",error:"❌"}[t]}),s.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),s.jsx("button",{onClick:n,className:"text-white/80 hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}const Td=async(e,t)=>{try{const r=document.getElementById(e);if(!r)throw new Error(`Element with id "${e}" not found`);const a=await et(r,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"}),s=a.toDataURL("image/png"),n=190,i=277,l=a.height*n/a.width;let d=l;const o=new tt({orientation:t.orientation||"portrait",unit:"mm",format:"a4"});let c=10;for(o.setFontSize(20),o.setFont("helvetica","bold"),o.text(t.title,105,c,{align:"center"}),c+=10,t.subtitle&&(o.setFontSize(12),o.setFont("helvetica","normal"),o.text(t.subtitle,105,c,{align:"center"}),c+=10),o.addImage(s,"PNG",10,c,n,l),d-=i-c;d>0;)c=d-l+10,o.addPage(),o.addImage(s,"PNG",10,c,n,l),d-=i;o.save(t.filename)}catch(r){throw new Error("PDF 생성 중 오류가 발생했습니다.")}},Fd=(e=new Date)=>`${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}_${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}`,_d={enabled:!1,contexts:[],minScore:80,timeRange:{start:"09:00",end:"18:00"},frequency:"hourly",permissionGranted:!1,lastCheckTime:null},Pd=k()(N((e,t)=>({settings:_d,history:[],updateSettings:t=>{e(e=>({settings:{...e.settings,...t}}))},toggleEnabled:()=>{e(e=>({settings:{...e.settings,enabled:!e.settings.enabled}}))},requestPermission:async()=>{if(!("Notification"in window))return!1;if("granted"===Notification.permission)return e(e=>({settings:{...e.settings,permissionGranted:!0}})),!0;if("denied"!==Notification.permission)try{const t="granted"===await Notification.requestPermission();return e(e=>({settings:{...e.settings,permissionGranted:t}})),t}catch(t){return!1}return!1},addHistory:t=>{const r={...t,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,clicked:!1,createdAt:new Date};e(e=>({history:[r,...e.history].slice(0,100)}))},markAsClicked:t=>{e(e=>({history:e.history.map(e=>e.id===t?{...e,clicked:!0}:e)}))},clearHistory:()=>{e({history:[]})},updateLastCheckTime:()=>{e(e=>({settings:{...e.settings,lastCheckTime:new Date}}))},resetSettings:()=>{e({settings:_d,history:[]})}}),{name:"qimen-notification-storage",version:1}));function Ad(){return"Notification"in window&&"granted"===Notification.permission}function Ld(e){if(!Ad())return null;try{const t=new Notification(e.title,{body:e.body,icon:e.icon||"/logo192.png",tag:e.tag||"qimen-notification",badge:"/logo192.png",data:e.data,requireInteraction:!1,silent:!1});return e.onClick?t.onclick=r=>{r.preventDefault(),window.focus(),t.close(),e.onClick()}:t.onclick=()=>{window.focus(),t.close()},setTimeout(()=>{t.close()},5e3),t}catch(t){return null}}function Rd(e){if(!e.enabled)return{notified:!1,chart:null,reason:"Notifications disabled"};if(!Ad())return{notified:!1,chart:null,reason:"No notification permission"};const t=new Date,r=t.getHours(),a=t.getMinutes();r.toString().padStart(2,"0"),a.toString().padStart(2,"0");const[s,n]=e.timeRange.start.split(":").map(Number),[i,l]=e.timeRange.end.split(":").map(Number),d=60*r+a;if(d<60*s+n||d>60*i+l)return{notified:!1,chart:null,reason:"Outside time range"};const o=or({dateTime:t});if(o.overallFortune.score<e.minScore)return{notified:!1,chart:o,reason:`Score too low (${o.overallFortune.score} < ${e.minScore})`};const c={excellent:"🌟",good:"✨",neutral:"⚖️",bad:"⚠️",terrible:"❌"}[o.overallFortune.level];const m=function(e){return{excellent:"대길 (大吉)",good:"길 (吉)",neutral:"평 (平)",bad:"흉 (凶)",terrible:"대흉 (大凶)"}[e]}(o.overallFortune.level);return Ld({title:`${c} 귀문둔갑 알림`,body:`지금이 ${m} 시간대입니다! (점수: ${o.overallFortune.score}/100)\n${o.overallFortune.summary}`,icon:"/logo192.png",tag:"qimen-good-time",data:{chart:o,timestamp:t.toISOString()},onClick:()=>{window.location.href="/qimen"}}),{notified:!0,chart:o}}const Od=({isOpen:e,onClose:t})=>{const{settings:r,history:n,updateSettings:i,toggleEnabled:l,requestPermission:d,clearHistory:o}=Pd(),[c,m]=a.useState(Ad());a.useEffect(()=>{m(Ad())},[r.permissionGranted]),a.useEffect(()=>{if(!r.enabled)return;const e=function(e,t){let r;switch(e.frequency){case"realtime":r=3e5;break;case"hourly":default:r=36e5;break;case"daily":r=864e5}const a=Rd(e);t&&t(a);const s=setInterval(()=>{const r=Rd(e);t&&t(r)},r);return()=>{clearInterval(s)}}(r,e=>{e.notified});return e},[r]);return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-background rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-border shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[s.jsx("span",{children:"🔔"}),"귀문둔갑 알림 설정"]}),s.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors text-2xl",children:"×"})]}),!c&&s.jsx("div",{className:"mb-6 p-4 bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:"⚠️"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"알림 권한이 필요합니다"}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mb-3",children:"길한 시간대 알림을 받으려면 브라우저 알림 권한을 허용해야 합니다."}),s.jsx("button",{onClick:async()=>{const e=await d();m(e),e?alert("알림 권한이 허용되었습니다!"):alert("알림 권한이 거부되었습니다. 브라우저 설정에서 수동으로 허용해주세요.")},className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-md text-sm font-medium transition-colors",children:"알림 권한 허용하기"})]})]})}),s.jsx("div",{className:"mb-6 p-4 border border-border rounded-lg bg-muted/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"알림 활성화"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"길한 시간대에 자동으로 알림을 받습니다"})]}),s.jsx("button",{onClick:l,disabled:!c,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors ${r.enabled&&c?"bg-primary-500":"bg-gray-300 dark:bg-gray-600"} ${c?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:s.jsx("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform "+(r.enabled&&c?"translate-x-7":"translate-x-1")})})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"최소 알림 점수"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:r.minScore,onChange:e=>i({minScore:parseInt(e.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary-500"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"점수:"}),s.jsxs("span",{className:"text-lg font-bold text-primary-500",children:[r.minScore,"점 이상"]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.minScore>=80&&"🌟 대길 (大吉) 시간대에만 알림",r.minScore>=60&&r.minScore<80&&"✨ 길 (吉) 이상 시간대에 알림",r.minScore>=40&&r.minScore<60&&"⚖️ 평 (平) 이상 시간대에 알림",r.minScore<40&&"⚠️ 모든 시간대에 알림 (권장하지 않음)"]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"알림 받을 시간대"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-muted-foreground mb-2",children:"시작 시간"}),s.jsx("input",{type:"time",value:r.timeRange.start,onChange:e=>i({timeRange:{...r.timeRange,start:e.target.value}}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-muted-foreground mb-2",children:"종료 시간"}),s.jsx("input",{type:"time",value:r.timeRange.end,onChange:e=>i({timeRange:{...r.timeRange,end:e.target.value}}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:ring-2 focus:ring-primary-500"})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[r.timeRange.start," ~ ",r.timeRange.end," 사이에만 알림을 받습니다"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"알림 빈도"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"realtime",label:"실시간",desc:"5분마다"},{value:"hourly",label:"시간마다",desc:"1시간마다"},{value:"daily",label:"하루 1회",desc:"24시간마다"}].map(e=>s.jsxs("button",{onClick:()=>i({frequency:e.value}),className:"p-3 border rounded-lg text-center transition-colors "+(r.frequency===e.value?"border-primary-500 bg-primary-500/10 text-primary-600":"border-border hover:border-primary-300 hover:bg-muted/50"),children:[s.jsx("div",{className:"font-semibold text-sm",children:e.label}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.desc})]},e.value))})]}),n.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:"알림 기록"}),s.jsx("button",{onClick:o,className:"text-sm text-red-500 hover:text-red-700 transition-colors",children:"기록 삭제"})]}),s.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 border border-border rounded-lg p-3 bg-muted/10",children:n.slice(0,10).map(e=>s.jsxs("div",{className:"text-sm flex items-start gap-2 pb-2 border-b border-border last:border-b-0 last:pb-0",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),s.jsx("span",{className:"flex-1 text-foreground",children:e.message})]},e.id))})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{if(!c)return void alert("먼저 알림 권한을 허용해주세요.");Ld({title:"🔮 귀문둔갑 알림 테스트",body:"알림이 정상적으로 작동하고 있습니다!",icon:"/logo192.png",tag:"qimen-test"})?alert("테스트 알림이 발송되었습니다!"):alert("알림 발송에 실패했습니다.")},disabled:!c,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-md font-medium transition-colors",children:"테스트 알림"}),s.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 bg-muted hover:bg-muted/80 text-foreground rounded-md font-medium transition-colors",children:"닫기"})]})]})}):null},Kd=k()(N((e,t)=>({bookmarks:[],addBookmark:t=>{const r={...t,id:`qb-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date,isShared:!1};return e(e=>({bookmarks:[r,...e.bookmarks]})),r},removeBookmark:t=>{e(e=>({bookmarks:e.bookmarks.filter(e=>e.id!==t)}))},updateBookmark:(t,r)=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===t?{...e,...r,updatedAt:new Date}:e)}))},getBookmark:e=>t().bookmarks.find(t=>t.id===e),searchBookmarks:e=>{let r=t().bookmarks;if(e.query&&e.query.trim()){const t=e.query.toLowerCase();r=r.filter(e=>{var r;return e.note.toLowerCase().includes(t)||(null==(r=e.customerName)?void 0:r.toLowerCase().includes(t))||e.tags.some(e=>e.toLowerCase().includes(t))})}return e.context&&(r=r.filter(t=>t.context===e.context)),e.customerName&&(r=r.filter(t=>t.customerName===e.customerName)),e.dateRange&&(r=r.filter(t=>{const r=new Date(t.dateTime);return r>=e.dateRange.start&&r<=e.dateRange.end})),e.tags&&e.tags.length>0&&(r=r.filter(t=>e.tags.some(e=>t.tags.includes(e)))),void 0!==e.isShared&&(r=r.filter(t=>t.isShared===e.isShared)),r},getAllBookmarks:()=>[...t().bookmarks].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),getAllTags:()=>{const e=t().bookmarks.flatMap(e=>e.tags);return Array.from(new Set(e)).sort()},hasBookmark:(e,r,a)=>t().bookmarks.some(t=>{const s=new Date(t.dateTime).toISOString()===e.toISOString(),n=t.customerName===r,i=t.context===a;return s&&n&&i}),setShared:(t,r)=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===t?{...e,isShared:!0,shareUuid:r,updatedAt:new Date}:e)}))},unsetShared:t=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===t?{...e,isShared:!1,shareUuid:void 0,updatedAt:new Date}:e)}))},clearAll:()=>{confirm("모든 즐겨찾기를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")&&e({bookmarks:[]})}}),{name:"qimen-bookmark-storage",version:1})),Bd=({chart:e,dateTime:t,customerName:r,customerBirthDate:n,context:i,className:l=""})=>{const{hasBookmark:d,addBookmark:o,removeBookmark:c,getAllBookmarks:m}=Kd(),[x,g]=a.useState(!1),[h,u]=a.useState(!1),[p,b]=a.useState(""),[y,j]=a.useState([]),[f,v]=a.useState("");a.useEffect(()=>{g(d(t,r,i))},[t,r,i,d,m()]);const k=()=>{f.trim()&&!y.includes(f.trim())&&(j([...y,f.trim()]),v(""))};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:x?()=>{const e=m().find(e=>new Date(e.dateTime).toISOString()===t.toISOString()&&e.customerName===r&&e.context===i);e&&confirm("이 즐겨찾기를 삭제하시겠습니까?")&&(c(e.id),g(!1),alert("즐겨찾기가 삭제되었습니다."))}:()=>u(!0),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${x?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"} ${l}`,title:x?"즐겨찾기 제거":"즐겨찾기 추가",children:[s.jsx("span",{className:"text-xl",children:x?"⭐":"☆"}),s.jsx("span",{children:x?"즐겨찾기됨":"즐겨찾기"})]}),h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[s.jsx("span",{children:"⭐"}),s.jsx("span",{children:"즐겨찾기 추가"})]}),s.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2",children:"저장할 차트 정보"}),s.jsxs("div",{className:"text-sm space-y-1 text-purple-700 dark:text-purple-300",children:[s.jsxs("p",{children:["📅 시간: ",t.toLocaleString("ko-KR")]}),s.jsxs("p",{children:["⚡ 국(局): ","yang"===e.yinYang?"양둔":"음둔"," ",e.ju,"국"]}),s.jsxs("p",{children:["🌸 절기: ",e.solarTerm.name]}),r&&s.jsxs("p",{children:["👤 고객: ",r]}),s.jsxs("p",{children:["📊 점수: ",e.overallFortune.score,"점 (",e.overallFortune.level,")"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📝 메모 (선택사항)"}),s.jsx("textarea",{value:p,onChange:e=>b(e.target.value),placeholder:"이 차트에 대한 메모를 입력하세요... (예: 중요한 회의 시간)",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:4})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"🏷️ 태그 (선택사항)"}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("input",{type:"text",value:f,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),k())},placeholder:"태그 입력 후 Enter...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),s.jsx("button",{onClick:k,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"추가"})]}),y.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((e,t)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm",children:[e,s.jsx("button",{onClick:()=>(e=>{j(y.filter(t=>t!==e))})(e),className:"hover:text-purple-900 dark:hover:text-purple-100",children:"×"})]},t))}),0===y.length&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 메모와 태그를 비워두면 자동으로 생성됩니다"})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[s.jsx("button",{onClick:()=>{const a=`${"yang"===e.yinYang?"양둔":"음둔"} ${e.ju}국 - ${e.overallFortune.summary.substring(0,50)}...`,s=[e.overallFortune.level,e.solarTerm.name,i];o({chart:e,dateTime:t,customerName:r,customerBirthDate:n,context:i,note:p||a,tags:y.length>0?y:s}),g(!0),u(!1),b(""),j([]),v(""),alert("⭐ 즐겨찾기에 추가되었습니다!")},className:"flex-1 px-6 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-medium hover:from-yellow-600 hover:to-orange-600 transition-all shadow-lg hover:shadow-xl",children:"⭐ 즐겨찾기 추가"}),s.jsx("button",{onClick:()=>u(!1),className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"취소"})]})]})})]})},Id={sm:{width:512,height:512},md:{width:1024,height:1024},lg:{width:2048,height:2048},xl:{width:4096,height:4096}};async function zd(e,t,r={}){const a={format:r.format||"png",size:r.size||"md",includeWatermark:r.includeWatermark??!0,theme:r.theme||"light",quality:r.quality||.95,filename:r.filename},s=document.getElementById(e);if(!s)throw new Error(`Element with ID "${e}" not found`);const n=await et(s,{backgroundColor:"dark"===a.theme?"#1a1a1a":"#ffffff",scale:2,useCORS:!0,allowTaint:!0,logging:!1,width:s.scrollWidth,height:s.scrollHeight}),i=Id[a.size],l=function(e,t,r){const a=document.createElement("canvas");a.width=t,a.height=r;const s=a.getContext("2d");if(!s)throw new Error("Failed to get 2D context");s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high";const n=e.width/e.height;let i=t,l=r,d=0,o=0;n>t/r?(l=t/n,o=(r-l)/2):(i=r*n,d=(t-i)/2);return s.drawImage(e,d,o,i,l),a}(n,i.width,i.height);let d=l;a.includeWatermark&&(d=await async function(e,t,r){const a=e.getContext("2d");if(!a)throw new Error("Failed to get 2D context");const s=e.width,n=e.height,i=Math.floor(.08*n);a.fillStyle="dark"===r?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.7)",a.fillRect(0,n-i,s,i),a.fillStyle="dark"===r?"#ffffff":"#000000",a.font=`bold ${Math.floor(.3*i)}px "Noto Sans KR", sans-serif`,a.textBaseline="middle";const l=`⚡ ${"yang"===t.yinYang?"양둔":"음둔"} ${t.ju}국 | ${t.solarTerm.name}`;a.textAlign="left",a.fillText(l,Math.floor(.03*s),n-i/2);const d="운명나침반.com | 귀문둔갑";a.textAlign="right",a.fillText(d,Math.floor(.97*s),n-i/2);const o=Math.floor(.08*n),c=1.5*o,m=Math.floor(.05*s),x=Math.floor(.05*n),g=t.overallFortune.score>=80?"#10b981":t.overallFortune.score>=60?"#3b82f6":t.overallFortune.score>=40?"#eab308":t.overallFortune.score>=20?"#f97316":"#ef4444";a.fillStyle=g,a.beginPath(),a.arc(m+c/2,x+c/2,c/2,0,2*Math.PI),a.fill(),a.fillStyle="#ffffff",a.font=`bold ${o}px "Noto Sans KR", sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(t.overallFortune.score.toString(),m+c/2,x+c/2);const h="excellent"===t.overallFortune.level?"대길":"good"===t.overallFortune.level?"길":"neutral"===t.overallFortune.level?"평":"bad"===t.overallFortune.level?"흉":"대흉";return a.font=`bold ${.4*o}px "Noto Sans KR", sans-serif`,a.fillStyle="dark"===r?"#ffffff":"#000000",a.fillText(h,m+c/2,x+c+.4*o),e}(l,t,a.theme));return await new Promise((e,t)=>{const r="png"===a.format?"image/png":"image/jpeg";d.toBlob(r=>{r?e(r):t(new Error("Failed to convert canvas to blob"))},r,a.quality)})}const qd=({isOpen:e,onClose:t,chart:r,elementId:n,customerName:i})=>{const[l,d]=a.useState("png"),[o,c]=a.useState("md"),[m,x]=a.useState(!0),[g,h]=a.useState("light"),[u,p]=a.useState(!1),[b,y]=a.useState(!1);return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[s.jsx("span",{children:"📤"}),s.jsx("span",{children:"귀문둔갑 차트 공유"})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2",children:"공유할 차트 정보"}),s.jsxs("div",{className:"text-sm space-y-1 text-purple-700 dark:text-purple-300",children:[s.jsxs("p",{children:["⚡ 국(局): ","yang"===r.yinYang?"양둔":"음둔"," ",r.ju,"국"]}),s.jsxs("p",{children:["🌸 절기: ",r.solarTerm.name]}),s.jsxs("p",{children:["📊 점수: ",r.overallFortune.score,"점 (",r.overallFortune.level,")"]}),i&&s.jsxs("p",{children:["👤 고객: ",i]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"이미지 설정"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📷 포맷"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"png",label:"PNG",desc:"무손실, 투명 배경 지원"},{value:"jpg",label:"JPG",desc:"작은 파일 크기"}].map(e=>s.jsxs("button",{onClick:()=>d(e.value),className:"p-3 border rounded-lg text-left transition-colors "+(l===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[s.jsx("div",{className:"font-semibold",children:e.label}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.desc})]},e.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📏 크기"}),s.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{value:"sm",label:"작게",size:"512px"},{value:"md",label:"중간",size:"1024px"},{value:"lg",label:"크게",size:"2048px"},{value:"xl",label:"최대",size:"4096px"}].map(e=>s.jsxs("button",{onClick:()=>c(e.value),className:"p-3 border rounded-lg text-center transition-colors "+(o===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[s.jsx("div",{className:"font-semibold text-sm",children:e.label}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.size})]},e.value))})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/30 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:"🏷️ 워터마크"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"하단에 출처 및 점수 표시"})]}),s.jsx("button",{onClick:()=>x(!m),className:"relative inline-flex h-8 w-14 items-center rounded-full transition-colors "+(m?"bg-purple-500":"bg-gray-300 dark:bg-gray-600"),children:s.jsx("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform "+(m?"translate-x-7":"translate-x-1")})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"🎨 테마"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"light",label:"밝은 테마",emoji:"☀️"},{value:"dark",label:"어두운 테마",emoji:"🌙"}].map(e=>s.jsxs("button",{onClick:()=>h(e.value),className:"p-3 border rounded-lg text-left transition-colors "+(g===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[s.jsx("span",{className:"text-xl",children:e.emoji})," ",e.label]},e.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:async()=>{p(!0);try{await async function(e,t,r={}){const a=await zd(e,t,r),s={format:r.format||"png",size:r.size||"md",includeWatermark:r.includeWatermark??!0,theme:r.theme||"light",quality:r.quality||.95,filename:r.filename},n=(new Date).toISOString().replace(/[:.]/g,"-").substring(0,19),i=`${s.filename||`귀문둔갑_${"yang"===t.yinYang?"양둔":"음둔"}${t.ju}국_${n}`}.${"png"===s.format?"png":"jpg"}`,l=URL.createObjectURL(a),d=document.createElement("a");d.href=l,d.download=i,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>{URL.revokeObjectURL(l)},100)}(n,r,{format:l,size:o,includeWatermark:m,theme:g,quality:.95}),alert("✅ 이미지가 다운로드되었습니다!")}catch(e){alert("❌ 이미지 다운로드에 실패했습니다.")}finally{p(!1)}},disabled:u,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg font-medium hover:from-green-600 hover:to-teal-600 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{children:"💾"}),s.jsx("span",{children:u?"처리 중...":"이미지 다운로드"})]}),s.jsxs("button",{onClick:async()=>{p(!0),y(!1);try{await async function(e,t,r={}){if(!navigator.clipboard||!navigator.clipboard.write)throw new Error("Clipboard API not supported in this browser");const a=await zd(e,t,r),s=new ClipboardItem({"image/png":a});await navigator.clipboard.write([s])}(n,r,{format:"png",size:o,includeWatermark:m,theme:g}),y(!0),alert("✅ 이미지가 클립보드에 복사되었습니다!"),setTimeout(()=>y(!1),3e3)}catch(e){alert("❌ 클립보드 복사에 실패했습니다. 브라우저에서 지원하지 않을 수 있습니다.")}finally{p(!1)}},disabled:u,className:"px-6 py-3 rounded-lg font-medium transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed "+(b?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gradient-to-r from-blue-400 to-purple-400 text-white hover:from-blue-500 hover:to-purple-500"),children:[s.jsx("span",{children:b?"✅":"📋"}),s.jsx("span",{children:b?"복사됨!":u?"처리 중...":"클립보드 복사"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-3",children:"SNS 공유"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>{alert('🚧 카카오톡 공유 기능은 개발 중입니다.\n\nKakao SDK 설정이 필요합니다.\n대신 "이미지 다운로드" 후 직접 공유해주세요.')},className:"px-4 py-3 bg-yellow-400 hover:bg-yellow-500 text-gray-900 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx("span",{children:"💬"}),s.jsx("span",{children:"카카오톡"})]}),s.jsxs("button",{onClick:()=>{alert('🚧 Facebook 공유 기능은 개발 중입니다.\n\n공개 URL 생성 기능이 필요합니다.\n대신 "이미지 다운로드" 후 직접 공유해주세요.')},className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx("span",{children:"📘"}),s.jsx("span",{children:"Facebook"})]}),s.jsxs("button",{onClick:()=>{alert('🚧 Twitter 공유 기능은 개발 중입니다.\n\n공개 URL 생성 기능이 필요합니다.\n대신 "이미지 다운로드" 후 직접 공유해주세요.')},className:"px-4 py-3 bg-sky-500 hover:bg-sky-600 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx("span",{children:"🐦"}),s.jsx("span",{children:"Twitter"})]}),s.jsxs("button",{onClick:()=>{alert('🚧 공유 URL 생성 기능은 개발 중입니다.\n\n백엔드 서비스 개발이 필요합니다.\n대신 "이미지 다운로드" 후 직접 공유해주세요.')},className:"px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx("span",{children:"🔗"}),s.jsx("span",{children:"URL 복사"})]})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 SNS 공유 기능은 백엔드 서비스 개발 후 사용 가능합니다"})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:s.jsx("button",{onClick:t,className:"w-full px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"닫기"})})]})}):null};function Wd(){const{getAllBookmarks:e}=Kd();return a.useMemo(()=>{const t=e();if(0===t.length)return{totalChecks:0,averageScore:0,highestScore:0,lowestScore:0,mostFrequentContext:"business",bestTimeOfDay:"00:00-00:00",favoriteDirection:"N",bestPalace:"center",weeklyTrend:[],monthlyPatterns:[],hourlyDistribution:[],directionStats:[],contextStats:[]};const r=t.map(e=>e.chart.overallFortune.score),a=t.length,s=Math.round(r.reduce((e,t)=>e+t,0)/r.length),n=Math.max(...r),i=Math.min(...r),l={};t.forEach(e=>{l[e.context]=(l[e.context]||0)+1});const d=Object.entries(l).reduce((e,t)=>t[1]>e[1]?t:e)[0],o={};t.forEach(e=>{const t=new Date(e.dateTime).getHours();o[t]||(o[t]={sum:0,count:0}),o[t].sum+=e.chart.overallFortune.score,o[t].count+=1});const c=Object.entries(o).map(([e,t])=>({hour:parseInt(e),avgScore:Math.round(t.sum/t.count),count:t.count})).sort((e,t)=>e.hour-t.hour),m=c.reduce((e,t)=>t.avgScore>e.avgScore?t:e),x=`${String(m.hour).padStart(2,"0")}:00-${String((m.hour+1)%24).padStart(2,"0")}:00`,g={};t.forEach(e=>{(e.chart.overallFortune.bestPalaces||[]).forEach(t=>{const r=e.chart.palaces[t].direction;g[r]||(g[r]={sum:0,count:0,palaces:{}}),g[r].sum+=e.chart.palaces[t].score||0,g[r].count+=1,g[r].palaces[t]=(g[r].palaces[t]||0)+1})});const h=Object.entries(g).map(([e,t])=>{const r=Math.round(t.sum/t.count),a=Object.entries(t.palaces).reduce((e,t)=>t[1]>e[1]?t:e)[0];return{direction:e,avgScore:r,count:t.count,bestPalace:a}}),u=h.length>0?h.reduce((e,t)=>t.avgScore>e.avgScore?t:e).direction:"N",p=h.length>0?h.reduce((e,t)=>t.avgScore>e.avgScore?t:e).bestPalace:"center",b={};t.forEach(e=>{const t=function(e){const t=e.getFullYear(),r=new Date(t,0,1),a=(e.getTime()-r.getTime())/864e5,s=Math.ceil((a+r.getDay()+1)/7);return`${t}-W${String(s).padStart(2,"0")}`}(new Date(e.dateTime));b[t]||(b[t]={sum:0,count:0}),b[t].sum+=e.chart.overallFortune.score,b[t].count+=1});const y=Object.entries(b).map(([e,t])=>({week:e,avgScore:Math.round(t.sum/t.count),count:t.count})).sort((e,t)=>e.week.localeCompare(t.week)).slice(-12),j={};t.forEach(e=>{const t=function(e){const t=e.getFullYear(),r=e.getMonth()+1;return`${t}-${String(r).padStart(2,"0")}`}(new Date(e.dateTime));var r,a;j[t]||(j[t]={scores:[],levels:{excellent:0,good:0,neutral:0,bad:0,terrible:0}}),j[t].scores.push(e.chart.overallFortune.score),r=j[t].levels,"excellent"===(a=e.chart.overallFortune.level)?r.excellent++:"good"===a?r.good++:"neutral"===a?r.neutral++:"bad"===a?r.bad++:"terrible"===a&&r.terrible++});const f=Object.entries(j).map(([e,t])=>({month:e,excellentDays:t.levels.excellent,goodDays:t.levels.good,neutralDays:t.levels.neutral,badDays:t.levels.bad,terribleDays:t.levels.terrible,avgScore:Math.round(t.scores.reduce((e,t)=>e+t,0)/t.scores.length)})).sort((e,t)=>e.month.localeCompare(t.month)).slice(-12),v={};t.forEach(e=>{const t=e.context;v[t]||(v[t]={sum:0,count:0,successCount:0}),v[t].sum+=e.chart.overallFortune.score,v[t].count+=1,e.chart.overallFortune.score>=60&&(v[t].successCount+=1)});return{totalChecks:a,averageScore:s,highestScore:n,lowestScore:i,mostFrequentContext:d,bestTimeOfDay:x,favoriteDirection:u,bestPalace:p,weeklyTrend:y,monthlyPatterns:f,hourlyDistribution:c,directionStats:h,contextStats:Object.entries(v).map(([e,t])=>({context:e,avgScore:Math.round(t.sum/t.count),count:t.count,successRate:Math.round(t.successCount/t.count*100)}))}},[e])}function Hd(e){if(e.length<10)return"stable";const t=[...e].sort((e,t)=>new Date(e.dateTime).getTime()-new Date(t.dateTime).getTime()),r=Math.floor(e.length/3),a=t.slice(-r),s=t.slice(0,r),n=a.reduce((e,t)=>e+t.chart.overallFortune.score,0)/a.length-s.reduce((e,t)=>e+t.chart.overallFortune.score,0)/s.length;return n>5?"improving":n<-5?"declining":"stable"}function Yd(e,t){const r=[],a=t.hourlyDistribution.reduce((e,t)=>t.avgScore>e.avgScore?t:e);a.count>=3&&r.push({id:"time-best",type:"insight",title:"최적 시간대 발견",description:`${String(a.hour).padStart(2,"0")}:00-${String((a.hour+1)%24).padStart(2,"0")}:00 시간대에서 평균 ${a.avgScore}점으로 가장 높은 운세를 보입니다. 이 시간대에 중요한 일정을 계획하세요.`,confidence:Math.min(95,60+5*a.count),importance:"high",actionable:!0,relatedData:{timeRange:t.bestTimeOfDay,score:a.avgScore}});const s=t.hourlyDistribution.reduce((e,t)=>t.avgScore<e.avgScore?t:e);return s.count>=3&&s.avgScore<40&&r.push({id:"time-worst",type:"warning",title:"주의 필요 시간대",description:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00 시간대는 평균 ${s.avgScore}점으로 저조합니다. 이 시간대는 중요한 결정을 피하는 것이 좋습니다.`,confidence:Math.min(90,55+5*s.count),importance:"medium",actionable:!0,relatedData:{timeRange:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00`,score:s.avgScore}}),r}function Ud(e){const t=[],r=e.contextStats.reduce((e,t)=>t.successRate>e.successRate?t:e);if(r.count>=5&&r.successRate>=70){const e={business:"사업/투자",meeting:"회의/협상",travel:"여행/이동",study:"학습/시험",health:"건강/치료",relationship:"인간관계",decision:"중요결정",lawsuit:"소송/법률"};t.push({id:"context-best",type:"insight",title:"강점 영역 발견",description:`${e[r.context]} 분야에서 ${r.successRate}%의 높은 성공률을 보입니다. 이 분야에 더 집중하시는 것을 권장합니다.`,confidence:Math.min(90,50+3*r.count),importance:"high",actionable:!0,relatedData:{context:r.context,score:r.avgScore}})}const a=e.contextStats.reduce((e,t)=>t.successRate<e.successRate?t:e);if(a.count>=5&&a.successRate<=40){const e={business:"사업/투자",meeting:"회의/협상",travel:"여행/이동",study:"학습/시험",health:"건강/치료",relationship:"인간관계",decision:"중요결정",lawsuit:"소송/법률"};t.push({id:"context-worst",type:"recommendation",title:"개선 필요 영역",description:`${e[a.context]} 분야는 ${a.successRate}%의 낮은 성공률을 보입니다. 이 분야의 활동은 더 신중하게 접근하거나 다른 시간대를 선택하세요.`,confidence:Math.min(85,45+3*a.count),importance:"medium",actionable:!0,relatedData:{context:a.context,score:a.avgScore}})}return t}function Gd(e){const t=[];if(0===e.directionStats.length)return t;const r=e.directionStats.reduce((e,t)=>t.avgScore>e.avgScore?t:e);if(r.count>=5){const e={N:"북쪽",NE:"북동쪽",E:"동쪽",SE:"남동쪽",S:"남쪽",SW:"남서쪽",W:"서쪽",NW:"북서쪽",C:"중앙"};t.push({id:"direction-best",type:"insight",title:"길한 방향 발견",description:`${e[r.direction]} 방향이 평균 ${r.avgScore}점으로 가장 길한 방향입니다. 중요한 활동 시 이 방향을 선택하세요.`,confidence:Math.min(85,50+2*r.count),importance:"medium",actionable:!0,relatedData:{direction:r.direction,score:r.avgScore}})}return t}function Qd(e){const t=[];if(e.monthlyPatterns.length<3)return t;const r=e.monthlyPatterns.slice(-3),a=r.reduce((e,t)=>e+t.avgScore,0)/r.length,s=e.monthlyPatterns.reduce((e,t)=>e+t.avgScore,0)/e.monthlyPatterns.length,n=a-s;return n>10?t.push({id:"monthly-improving",type:"insight",title:"운세 상승 추세",description:`최근 3개월 평균(${Math.round(a)}점)이 전체 평균(${Math.round(s)}점)보다 높습니다. 긍정적인 흐름이 지속되고 있습니다.`,confidence:80,importance:"high",actionable:!1}):n<-10&&t.push({id:"monthly-declining",type:"warning",title:"운세 하락 주의",description:`최근 3개월 평균(${Math.round(a)}점)이 전체 평균(${Math.round(s)}점)보다 낮습니다. 더 신중한 접근이 필요합니다.`,confidence:75,importance:"medium",actionable:!1}),t}function Vd(e,t){const r=function(e){const t=e.length,r=new Set(e.map(e=>new Date(e.dateTime).toDateString())).size;return t>=90&&r>=30?{quality:"excellent",message:"충분한 데이터로 높은 신뢰도의 분석이 가능합니다."}:t>=60&&r>=20?{quality:"good",message:"양호한 데이터로 의미있는 패턴을 도출할 수 있습니다."}:t>=30&&r>=10?{quality:"fair",message:"기본적인 패턴 분석이 가능하나 더 많은 데이터가 필요합니다."}:{quality:"poor",message:"신뢰도 높은 분석을 위해 30일 이상의 데이터를 수집해주세요."}}(e),a=Hd(e),s=[...Yd(0,t),...Ud(t),...Gd(t),...Qd(t)];e.length<30&&s.unshift({id:"data-insufficient",type:"warning",title:"데이터 부족",description:r.message,confidence:100,importance:"high",actionable:!0});const n=function(e,t){const r=[];if(e.length<30)return r;const a=new Date,s=t.hourlyDistribution.reduce((e,t)=>t.avgScore>e.avgScore?t:e),n=t.contextStats.reduce((e,t)=>t.avgScore>e.avgScore?t:e);for(let i=1;i<=7;i++){const l=new Date(a);l.setDate(a.getDate()+i);const d=l.getDay(),o=e.filter(e=>new Date(e.dateTime).getDay()===d);let c=t.averageScore,m=50;const x=[];if(o.length>=3){const e=o.reduce((e,t)=>e+t.chart.overallFortune.score,0)/o.length;c=Math.round((c+e)/2),m+=15,x.push(`같은 요일 평균 ${Math.round(e)}점 기반`)}s.count>=5&&(c=Math.round((c+s.avgScore)/2),m+=10,x.push("최적 시간대 활용"));const g=Hd(e);"improving"===g?(c=Math.min(100,c+5),m+=5,x.push("상승 추세 반영")):"declining"===g&&(c=Math.max(0,c-5),m+=5,x.push("하락 추세 반영")),r.push({date:l,timeRange:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00`,predictedScore:c,confidence:Math.min(85,m),reasons:x,suggestedContext:n.context,suggestedDirection:t.favoriteDirection})}return r}(e,t),i=[],l=[];t.hourlyDistribution.forEach(e=>{const t=`${String(e.hour).padStart(2,"0")}:00-${String((e.hour+1)%24).padStart(2,"0")}:00`;e.avgScore>=70&&e.count>=3?i.push(t):e.avgScore<=40&&e.count>=3&&l.push(t)});const d=t.contextStats.filter(e=>e.successRate>=60).map(e=>e.context),o=t.directionStats.filter(e=>e.avgScore>=t.averageScore).map(e=>e.direction);return{patterns:s,predictions:n,summary:{overallTrend:a,trendConfidence:e.length>=30?75:50,dataQuality:r.quality,dataPoints:e.length,analysisDate:new Date},recommendations:{bestTimes:i,avoidTimes:l,preferredContexts:d,favoriteDirections:o}}}function Jd({isOpen:e,onClose:t}){const r=Wd(),{getAllBookmarks:n}=Kd(),i=n(),[d,x]=a.useState("overview"),g=a.useMemo(()=>Vd(i,r),[i,r]),u=a.useMemo(()=>function(e){const t={high:3,medium:2,low:1};return[...e].sort((e,r)=>{const a=t[r.importance]-t[e.importance];return 0!==a?a:r.confidence-e.confidence})}(g.patterns),[g.patterns]);if(a.useMemo(()=>g.patterns.filter(e=>e.actionable),[g.patterns]),!e)return null;l.useEffect(()=>{const e=e=>{"Escape"===e.key&&t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]);const p=document.documentElement.classList.contains("dark"),b=p?"#e5e7eb":"#374151",y=p?"#374151":"#e5e7eb",j={labels:r.monthlyPatterns.map(e=>e.month),datasets:[{label:"평균 점수",data:r.monthlyPatterns.map(e=>e.avgScore),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",fill:!0,tension:.4}]},f={labels:r.hourlyDistribution.map(e=>`${String(e.hour).padStart(2,"0")}:00`),datasets:[{label:"평균 점수",data:r.hourlyDistribution.map(e=>e.avgScore),backgroundColor:r.hourlyDistribution.map(e=>e.avgScore>=70?"rgba(34, 197, 94, 0.8)":e.avgScore>=50?"rgba(59, 130, 246, 0.8)":e.avgScore>=30?"rgba(251, 191, 36, 0.8)":"rgba(239, 68, 68, 0.8)")}]},v={labels:r.directionStats.map(e=>e.direction),datasets:[{label:"방향별 평균 점수",data:r.directionStats.map(e=>e.avgScore),backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgb(147, 51, 234)",borderWidth:2}]},k={business:"사업/투자",meeting:"회의/협상",travel:"여행/이동",study:"학습/시험",health:"건강/치료",relationship:"인간관계",decision:"중요결정",lawsuit:"소송/법률"},N={labels:r.contextStats.map(e=>k[e.context]),datasets:[{label:"평균 점수",data:r.contextStats.map(e=>e.avgScore),backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(251, 191, 36, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(147, 51, 234, 0.8)","rgba(236, 72, 153, 0.8)","rgba(20, 184, 166, 0.8)","rgba(249, 115, 22, 0.8)"]}]},w={excellent:i.filter(e=>"excellent"===e.chart.overallFortune.level).length,good:i.filter(e=>"good"===e.chart.overallFortune.level).length,neutral:i.filter(e=>"neutral"===e.chart.overallFortune.level).length,bad:i.filter(e=>"bad"===e.chart.overallFortune.level).length,terrible:i.filter(e=>"terrible"===e.chart.overallFortune.level).length},S={labels:["대길","길","평","흉","대흉"],datasets:[{data:[w.excellent,w.good,w.neutral,w.bad,w.terrible],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)"],borderWidth:0}]},C={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:b}}},scales:{x:{ticks:{color:b},grid:{color:y}},y:{ticks:{color:b},grid:{color:y},min:0,max:100}}},M={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:b}}},scales:{r:{ticks:{color:b},grid:{color:y},min:0,max:100}}},$={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:b}}}},E=e=>{switch(e.type){case"insight":return"💡";case"recommendation":return"✅";case"prediction":return"🔮";case"warning":return"⚠️"}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",onClick:t,children:s.jsxs("div",{className:"max-w-7xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-2xl my-8",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"📊 귀문둔갑 통계 대시보드"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["총 ",r.totalChecks,"개의 데이터 분석 | 평균 점수: ",r.averageScore,"점 |"," ","데이터 품질: ","excellent"===g.summary.dataQuality?"우수":"good"===g.summary.dataQuality?"양호":"fair"===g.summary.dataQuality?"보통":"부족"]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl font-bold",children:"✕"})]}),s.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 px-6",children:[{id:"overview",label:"📋 개요",icon:"📋"},{id:"patterns",label:"🔍 패턴 분석",icon:"🔍"},{id:"predictions",label:"🔮 예측",icon:"🔮"},{id:"charts",label:"📊 차트",icon:"📊"}].map(e=>s.jsx("button",{onClick:()=>x(e.id),className:"px-6 py-3 font-medium transition-colors border-b-2 "+(d===e.id?"border-purple-600 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:e.label},e.id))}),s.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:["overview"===d&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 mb-1",children:"총 조회수"}),s.jsx("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:r.totalChecks})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"평균 점수"}),s.jsx("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:r.averageScore})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-lg border border-green-200 dark:border-green-700",children:[s.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 mb-1",children:"최고 점수"}),s.jsx("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:r.highestScore})]}),s.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[s.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 mb-1",children:"최저 점수"}),s.jsx("div",{className:"text-3xl font-bold text-yellow-700 dark:text-yellow-300",children:r.lowestScore})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("h3",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[(()=>{switch(g.summary.overallTrend){case"improving":return"📈";case"stable":return"➡️";case"declining":return"📉"}})()," 전반적 트렌드"]}),s.jsx("div",{className:`text-2xl font-bold ${(()=>{switch(g.summary.overallTrend){case"improving":return"text-green-600 dark:text-green-400";case"stable":return"text-blue-600 dark:text-blue-400";case"declining":return"text-red-600 dark:text-red-400"}})()}`,children:(()=>{switch(g.summary.overallTrend){case"improving":return"상승 추세";case"stable":return"안정적";case"declining":return"하락 추세"}})()}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:["신뢰도: ",g.summary.trendConfidence,"%"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-100",children:"⭐ 주요 인사이트"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"최적 시간대:"})," ",s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:r.bestTimeOfDay})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"선호 방향:"})," ",s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:r.favoriteDirection})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"주요 용도:"})," ",s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:k[r.mostFrequentContext]})]})]})]})]}),g.recommendations.bestTimes.length>0&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border border-green-200 dark:border-green-700",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 text-green-800 dark:text-green-200",children:"✅ 추천 시간대"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:g.recommendations.bestTimes.map((e,t)=>s.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 rounded-full text-sm font-medium",children:e},t))})]}),g.recommendations.avoidTimes.length>0&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-5 rounded-lg border border-red-200 dark:border-red-700",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 text-red-800 dark:text-red-200",children:"⚠️ 주의 필요 시간대"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:g.recommendations.avoidTimes.map((e,t)=>s.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 rounded-full text-sm font-medium",children:e},t))})]})]}),"patterns"===d&&s.jsx("div",{className:"space-y-4",children:0===u.length?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📊"}),s.jsx("p",{children:"분석할 패턴이 충분하지 않습니다."}),s.jsx("p",{className:"text-sm mt-2",children:"30일 이상의 데이터를 수집하면 더 정확한 분석이 가능합니다."})]}):u.map(e=>{const t=(e=>{switch(e.type){case"insight":return"blue";case"recommendation":return"green";case"prediction":return"purple";case"warning":return"yellow"}})(e);return s.jsx("div",{className:`p-5 rounded-lg border ${{blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700",green:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700",purple:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-700",yellow:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"}[t]}`,children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-2xl",children:E(e)}),s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.title}),e.actionable&&s.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 rounded text-xs font-medium",children:"실행 가능"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"신뢰도:"}),s.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:[e.confidence,"%"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"중요도:"}),s.jsx("span",{className:"font-semibold "+("high"===e.importance?"text-red-600 dark:text-red-400":"medium"===e.importance?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400"),children:"high"===e.importance?"높음":"medium"===e.importance?"중간":"낮음"})]})]})]})})},e.id)})}),"predictions"===d&&s.jsx("div",{className:"space-y-4",children:0===g.predictions.length?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🔮"}),s.jsx("p",{children:"예측을 생성하기에 데이터가 부족합니다."}),s.jsx("p",{className:"text-sm mt-2",children:"30일 이상의 데이터를 수집하면 미래 운세를 예측할 수 있습니다."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-5 rounded-lg border border-purple-200 dark:border-purple-700 mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-2 text-purple-800 dark:text-purple-200",children:"🔮 다음 7일간 최적 시간대 예측"}),s.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"과거 패턴을 기반으로 AI가 예측한 결과입니다. 실제 운세는 다를 수 있습니다."})]}),g.predictions.map((e,t)=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.date.toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"})}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.timeRange})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold "+(e.predictedScore>=70?"text-green-600 dark:text-green-400":e.predictedScore>=50?"text-blue-600 dark:text-blue-400":e.predictedScore>=30?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:e.predictedScore}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["신뢰도: ",e.confidence,"%"]})]})]}),s.jsxs("div",{className:"space-y-2 mb-3",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"추천 용도:"})," ",s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:k[e.suggestedContext]})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"추천 방향:"})," ",s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:e.suggestedDirection})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"예측 근거:"}),s.jsx("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:e.reasons.map((e,t)=>s.jsxs("li",{children:["• ",e]},t))})]})]},t))]})}),"charts"===d&&s.jsx("div",{className:"space-y-6",children:0===r.totalChecks?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📊"}),s.jsx("p",{children:"표시할 데이터가 없습니다."}),s.jsx("p",{className:"text-sm mt-2",children:"귀문둔갑 분석을 북마크하면 통계 차트를 확인할 수 있습니다."})]}):s.jsxs(s.Fragment,{children:[r.monthlyPatterns.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"📈 월간 평균 점수 추이"}),s.jsx("div",{style:{height:"300px"},children:s.jsx(h,{data:j,options:C})})]}),r.hourlyDistribution.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"⏰ 시간대별 평균 점수"}),s.jsx("div",{style:{height:"300px"},children:s.jsx(c,{data:f,options:C})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.directionStats.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"🧭 방향별 평균 점수"}),s.jsx("div",{style:{height:"300px"},children:s.jsx(m,{data:v,options:M})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"🎯 운세 레벨 분포"}),s.jsx("div",{style:{height:"300px"},children:s.jsx(o,{data:S,options:$})})]})]}),r.contextStats.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"📂 용도별 평균 점수"}),s.jsx("div",{style:{height:"300px"},children:s.jsx(c,{data:N,options:C})})]})]})})]}),s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["마지막 분석: ",g.summary.analysisDate.toLocaleString("ko-KR")]}),s.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"닫기"})]})]})})}function Zd(){var e;const[t,r]=a.useState(null),[n,i]=a.useState(null),[l,d]=a.useState(new Date),[o,c]=a.useState(!0),[m,x]=a.useState(!1),[g,h]=a.useState(!0),[u,p]=a.useState(!1),[b,y]=a.useState(!1),[j,f]=a.useState(!1),[v,k]=a.useState(null),[N,w]=a.useState(null),[S,C]=a.useState(!1),[M,$]=a.useState("general"),[E,D]=a.useState(!1),[T,F]=a.useState(!1),[_,P]=a.useState(!0),[A,L]=a.useState(null),[R,O]=a.useState(null),[K,B]=a.useState(!1),[I,z]=a.useState(!1),[q,W]=a.useState(!1),[H,Y]=a.useState([]),[U,G]=a.useState(!1);a.useEffect(()=>{C((null==v?void 0:v.id)!==(null==N?void 0:N.id))},[v,N]),a.useEffect(()=>{try{c(!0);const e=N?{year:parseInt(N.birth_date.split("-")[0]),month:parseInt(N.birth_date.split("-")[1]),day:parseInt(N.birth_date.split("-")[2]),hour:N.birth_time?parseInt(N.birth_time.split(":")[0]):void 0}:void 0,a=or({dateTime:l,birthInfo:e});if(t){let e=null,r="";t.solarTerm.name!==a.solarTerm.name?(e="solarTerm",r=`🌸 절기가 변경되었습니다: ${t.solarTerm.name} → ${a.solarTerm.name}`):t.ju!==a.ju||t.yinYang!==a.yinYang?(e="solarTerm",r=`⚡ 국(局)이 변경되었습니다: ${"yang"===t.yinYang?"양둔":"음둔"} ${t.ju}국 → ${"yang"===a.yinYang?"양둔":"음둔"} ${a.ju}국`):t.dayGan!==a.dayGan?(e="day",r=`📅 일간(日干)이 변경되었습니다: ${t.dayGan} → ${a.dayGan}`):t.hourGanZhi.gan===a.hourGanZhi.gan&&t.hourGanZhi.zhi===a.hourGanZhi.zhi||(e="hour",r=`⏰ 시간이 변경되었습니다: ${t.hourGanZhi.gan}${t.hourGanZhi.zhi} → ${a.hourGanZhi.gan}${a.hourGanZhi.zhi}`),e&&r&&(O({message:r,type:"solarTerm"===e?"warning":"info"}),Y(t=>[{timestamp:new Date,ju:a.ju,yinYang:"yang"===a.yinYang?"양둔":"음둔",solarTerm:a.solarTerm.name,type:e},...t.slice(0,9)]))}r(a)}catch(e){}finally{c(!1)}},[l,N]),a.useEffect(()=>{const e=()=>{const e=new Date,t=e.getHours();e.getMinutes(),e.getSeconds();const r=t%2==0?t+2:t+1,a=new Date(e);a.setHours(r,0,0,0);const s=new Date(e);s.setDate(s.getDate()+1),s.setHours(0,0,0,0);const n=a.getTime()-e.getTime(),i=Math.floor(n/36e5),l=Math.floor(n%36e5/6e4),d=Math.floor(n%6e4/1e3);L({hours:i,minutes:l,seconds:d,type:"hour"})};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[]),a.useEffect(()=>{if(!_)return;const e=setInterval(()=>{const e=new Date,t=e.getHours();0===e.getMinutes()&&t%2==1&&d(new Date)},6e4);return()=>clearInterval(e)},[_]);const Q=e=>{i(e)};return o||!t?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"국(局) 계산 중..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 p-4 md:p-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("header",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex justify-center items-center gap-4 mb-2",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 dark:from-purple-400 dark:via-pink-400 dark:to-blue-400",children:"⚡ 귀문둔갑"}),s.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors flex items-center gap-2",children:[s.jsx("span",{children:"📖"}),s.jsx("span",{children:"초보자 가이드"})]}),s.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm font-medium hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition-colors flex items-center gap-2",children:[s.jsx("span",{children:"🔔"}),s.jsx("span",{children:"알림 설정"})]}),s.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-full text-sm font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[s.jsx("span",{children:"📊"}),s.jsx("span",{children:"통계 분석"})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg mb-2",children:"奇門遁甲 - 시간과 방위의 길흉 판단"}),s.jsxs("div",{className:"flex justify-center items-center gap-3 mb-4 flex-wrap",children:[s.jsx("button",{onClick:()=>P(!_),className:"px-3 py-1 rounded-full text-sm font-medium transition-all "+(_?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:_?"🔄 자동 갱신 ON":"⏸️ 자동 갱신 OFF"}),A&&s.jsxs("div",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:["⏱️ 다음 변경까지: ",A.hours>0&&`${A.hours}시간 `,A.minutes,"분 ",A.seconds,"초"]}),H.length>0&&s.jsxs("button",{onClick:()=>G(!U),className:"px-3 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors flex items-center gap-1",children:["📊 변경 히스토리 (",H.length,")"]})]}),s.jsxs("div",{className:"max-w-3xl mx-auto mb-6",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"🎯 목적:"}),s.jsx("select",{value:M,onChange:e=>$(e.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border-2 border-purple-300 dark:border-purple-700 rounded-lg text-gray-900 dark:text-gray-100 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all cursor-pointer",children:Sd().map(e=>s.jsxs("option",{value:e.value,children:[e.icon," ",e.label]},e.value))}),s.jsxs("button",{onClick:()=>D(!E),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[s.jsx("span",{children:"🤖"}),s.jsx("span",{children:"AI에게 질문하기"})]}),s.jsxs("button",{onClick:async()=>{if(t){F(!0);try{const e=N?`${N.name}(${N.birth_date})`:"일반",r=l.toLocaleString("ko-KR");await(async(e,t,r,a)=>{const s=`${a}_${Fd()}.pdf`;await Td(e,{filename:s,title:t,subtitle:r})})("qimen-content","⚡ 귀문둔갑 분석 결과",`${"yang"===t.yinYang?"양둔":"음둔"} ${t.ju}국 | ${t.solarTerm.name} | ${r}`,`귀문둔갑_${e}`),alert("PDF 출력이 완료되었습니다.")}catch(e){alert("PDF 출력 중 오류가 발생했습니다.")}finally{F(!1)}}},disabled:T,className:"px-4 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg font-medium hover:from-green-600 hover:to-teal-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{children:"📄"}),s.jsx("span",{children:T?"PDF 생성 중...":"PDF 출력"})]}),s.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[s.jsx("span",{children:"📊"}),s.jsx("span",{children:"시간대 비교"})]}),s.jsx(Bd,{chart:t,dateTime:l,customerName:null==N?void 0:N.name,customerBirthDate:null==N?void 0:N.birth_date,context:M}),s.jsxs("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg font-medium hover:from-pink-600 hover:to-rose-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[s.jsx("span",{children:"📤"}),s.jsx("span",{children:"공유하기"})]})]}),"general"!==M&&s.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 mb-4",children:["💡 ",s.jsx("strong",{children:null==(e=Sd().find(e=>e.value===M))?void 0:e.description}),"에 특화된 해석을 제공합니다"]})]}),s.jsxs("div",{className:"max-w-2xl mx-auto mb-6",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx(vn,{selectedCustomer:v,onSelect:k,showAddButton:!0}),v&&s.jsx("button",{onClick:()=>{w(v),C(!1)},disabled:!S,className:"px-6 py-2 rounded-lg font-medium transition-all "+(S?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl animate-pulse":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-500 cursor-not-allowed"),children:S?"✨ 적용하기":"✓ 적용됨"})]}),N&&s.jsxs("div",{className:"mt-2 text-sm text-center text-gray-600 dark:text-gray-400",children:["💡 현재 ",s.jsx("strong",{children:N.name}),"님(",N.birth_date,") 기준으로 맞춤 해석 중"]}),v&&S&&s.jsxs("div",{className:"mt-2 text-sm text-center text-orange-600 dark:text-orange-400 font-medium",children:["⚠️ ",s.jsx("strong",{children:v.name}),'님으로 변경하려면 "적용하기" 버튼을 클릭하세요']})]}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsx("button",{onClick:()=>h(!g),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:g?"상세 모드로 보기 ▼":"간단 요약 보기 ▲"}),s.jsx("button",{onClick:()=>p(!u),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(u?"bg-gradient-to-r from-green-500 to-blue-500 text-white shadow-lg":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600"),children:u?"🎨 히트맵 모드":"📊 차트 모드"}),s.jsx("button",{onClick:()=>y(!b),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(b?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600"),children:b?"🎲 3D 모드":"🎯 2D 모드"})]}),s.jsxs("div",{className:"mt-4 flex justify-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"국(局)"}),s.jsxs("span",{className:"ml-2 font-bold text-purple-600 dark:text-purple-400",children:["yang"===t.yinYang?"양둔":"음둔"," ",t.ju,"국"]})]}),s.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"절기"}),s.jsx("span",{className:"ml-2 font-bold text-blue-600 dark:text-blue-400",children:t.solarTerm.name})]}),s.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"시간 간지"}),s.jsxs("span",{className:"ml-2 font-bold text-pink-600 dark:text-pink-400",children:[t.hourGanZhi.gan,t.hourGanZhi.zhi]})]})]})]}),s.jsxs("div",{id:"qimen-content",className:"space-y-6",style:{WebkitPrintColorAdjust:"exact",printColorAdjust:"exact"},children:[s.jsx(ad,{selectedDate:l,onChange:e=>{d(e),i(null)}}),g&&s.jsx(pd,{chart:t,customerName:null==N?void 0:N.name,customerBirthDate:null==N?void 0:N.birth_date}),s.jsx("div",{className:"my-8",children:b?s.jsx(td,{chart:t,selectedPalace:n,onPalaceSelect:Q,autoRotate:!0}):u?s.jsx(vd,{chart:t,selectedPalace:n,onPalaceSelect:Q}):s.jsx(Zl,{chart:t,selectedPalace:n,onPalaceSelect:Q})}),s.jsxs("div",{className:"mb-8 p-6 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm shadow-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"📊 전체 운세"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsx("div",{children:N?(()=>{const e=od(N.birth_date),r=hd(t,e),a=r.personalScore,n=r.bonus;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"text-6xl font-bold "+(a>=80?"text-green-500":a>=60?"text-blue-500":a>=40?"text-yellow-500":a>=20?"text-orange-500":"text-red-500"),children:a}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["당신의 운세",0!==n&&s.jsxs("span",{className:"ml-2 font-bold "+(n>0?"text-green-600":"text-red-600"),children:["(",n>0?"+":"",n,")"]})]}),s.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:a>=80?"대길 🌟":a>=60?"길 ✨":a>=40?"평 ⚖️":a>=20?"흉 ⚠️":"대흉 ❌"})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed mb-2",children:t.overallFortune.summary}),0!==n&&s.jsxs("div",{className:"text-sm p-2 rounded "+(n>0?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300"),children:["💡 ",r.explanation]})]})})():s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"text-6xl font-bold "+(t.overallFortune.score>=80?"text-green-500":t.overallFortune.score>=60?"text-blue-500":t.overallFortune.score>=40?"text-yellow-500":t.overallFortune.score>=20?"text-orange-500":"text-red-500"),children:t.overallFortune.score}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"종합 점수"}),s.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:"excellent"===t.overallFortune.level?"대길 🌟":"good"===t.overallFortune.level?"길 ✨":"neutral"===t.overallFortune.level?"평 ⚖️":"bad"===t.overallFortune.level?"흉 ⚠️":"대흉 ❌"})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:t.overallFortune.summary})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-green-600 dark:text-green-400 mb-2",children:"✅ 길한 방위"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:t.overallFortune.bestPalaces.map(e=>s.jsxs("button",{onClick:()=>Q(e),className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm font-medium hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",children:[e,"궁 (",t.palaces[e].direction,")"]},e))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-red-600 dark:text-red-400 mb-2",children:"⚠️ 불리한 방위"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:t.overallFortune.worstPalaces.map(e=>s.jsxs("button",{onClick:()=>Q(e),className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[e,"궁 (",t.palaces[e].direction,")"]},e))})]})]})]})]})]}),n&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-start justify-center p-4 overflow-y-auto",children:s.jsx("div",{className:"max-w-4xl w-full my-8",children:s.jsx(rd,{palace:t.palaces[n],onClose:()=>i(null)})})}),m&&s.jsx(sd,{onClose:()=>x(!1)}),E&&s.jsx(Ed,{chart:t,context:M,customer:N,onClose:()=>D(!1)}),U&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"📊 차트 변경 히스토리"}),s.jsx("button",{onClick:()=>G(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:0===H.length?s.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"아직 변경 내역이 없습니다."}):s.jsx("div",{className:"space-y-3",children:H.map((e,t)=>s.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("solarTerm"===e.type?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"day"===e.type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"),children:"solarTerm"===e.type?"🌸 절기/국 변경":"day"===e.type?"📅 일간 변경":"⏰ 시간 변경"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.timestamp.toLocaleString("ko-KR")})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsxs("strong",{children:[e.yinYang," ",e.ju,"국"]})," · 절기: ",e.solarTerm]})]})})},t))})})]})}),j&&s.jsx(kd,{baseDate:l,customer:N,onClose:()=>f(!1)}),s.jsx(Od,{isOpen:K,onClose:()=>B(!1)}),s.jsx(qd,{isOpen:I,onClose:()=>z(!1),chart:t,elementId:"qimen-content",customerName:null==N?void 0:N.name}),s.jsx(Jd,{isOpen:q,onClose:()=>W(!1)}),R&&s.jsx(Dd,{message:R.message,type:R.type,onClose:()=>O(null)})]})})}Le.register(Be,Ie,He,Ye,ze,Re,We,qe,Oe,Ke,Ue);const Xd=[{id:"beginner",level:"beginner",title:"귀문둔갑 입문",description:"귀문둔갑의 기본 개념과 구조를 이해합니다",icon:"🌱",estimatedHours:8,lessons:[{id:"beginner-1",title:"귀문둔갑이란 무엇인가?",type:"theory",duration:30,description:"귀문둔갑의 기원과 역사, 활용 분야를 알아봅니다",keyPoints:["귀문둔갑의 유래와 역사","동양 점술에서의 위치","현대적 활용 방법","다른 점술과의 차이점"],content:"# 귀문둔갑이란?\n\n## 기원과 역사\n\n귀문둔갑(奇門遁甲)은 중국 고대로부터 전해 내려오는 시간과 방위를 이용한 예측술입니다.\n'기문(奇門)'은 특별한 문을 의미하며, '둔갑(遁甲)'은 숨겨진 갑(甲)을 뜻합니다.\n\n### 역사적 배경\n- **기원**: 전국시대 병법으로 시작\n- **발전**: 당나라 때 점술로 체계화\n- **현대**: 사업, 투자, 일상 의사결정에 활용\n\n## 귀문둔갑의 구성요소\n\n귀문둔갑은 크게 세 가지 요소로 구성됩니다:\n\n1. **천반(天盤)**: 9성(九星) - 하늘의 기운\n2. **인반(人盤)**: 8문(八門) - 사람의 행동\n3. **지반(地盤)**: 8신(八神) - 땅의 상태\n\n## 활용 분야\n\n귀문둔갑은 다양한 분야에서 활용됩니다:\n\n- 📅 **길일 선택**: 중요한 일정 잡기\n- 🧭 **방위 선택**: 유리한 방향 찾기\n- 💼 **사업 결정**: 투자 시기 판단\n- 🏠 **부동산**: 이사 방향 선택\n- 💑 **인간관계**: 만남 장소 결정\n\n## 다른 점술과의 차이\n\n| 구분 | 귀문둔갑 | 사주 | 타로 |\n|------|----------|------|------|\n| 기반 | 시간+방위 | 생년월일시 | 카드 |\n| 용도 | 의사결정 | 운명 분석 | 심리 상담 |\n| 특징 | 능동적 | 수동적 | 직관적 |\n\n> 💡 **핵심**: 귀문둔갑은 \"언제\", \"어디로\"를 알려주는 실용적 도구입니다.\n",quiz:{passingScore:70,questions:[{id:"beginner-1-q1",question:'귀문둔갑의 "기문(奇門)"이 의미하는 것은?',options:["특별한 문","숨겨진 갑","신비로운 방위","비밀스러운 시간"],correctAnswer:0,explanation:'기문(奇門)은 "특별한 문" 또는 "신비로운 문"을 의미합니다.'},{id:"beginner-1-q2",question:"귀문둔갑이 가장 유용하게 사용되는 상황은?",options:["과거 회상","성격 분석","의사결정 시기와 방향","건강 진단"],correctAnswer:2,explanation:'귀문둔갑은 "언제, 어디로" 행동할지 결정할 때 가장 유용합니다.'},{id:"beginner-1-q3",question:"귀문둔갑의 세 가지 구성요소가 아닌 것은?",options:["천반(9성)","인반(8문)","지반(8신)","시반(12지)"],correctAnswer:3,explanation:"귀문둔갑은 천반, 인반, 지반으로 구성됩니다. 시반(12지)은 포함되지 않습니다."}]}},{id:"beginner-2",title:"9궁(구궁) 이해하기",type:"theory",duration:45,description:"귀문둔갑의 기본 구조인 9궁을 배웁니다",keyPoints:["낙서도(洛書圖)의 원리","9개 궁의 배치와 의미","중앙 5궁의 특수성","방위와 궁의 관계"],content:"# 9궁(구궁) 시스템\n\n## 낙서도(洛書圖)\n\n귀문둔갑의 9궁은 중국 고대 수학 원리인 **낙서도**에 기반합니다.\n\n```\n4  9  2\n3  5  7\n8  1  6\n```\n\n> 💡 모든 행, 열, 대각선의 합이 15가 되는 마방진 구조입니다.\n\n## 9궁의 배치\n\n각 궁은 특정 방위와 의미를 가집니다:\n\n| 궁 | 방위 | 8괘 | 의미 | 상징 |\n|----|------|-----|------|------|\n| 1궁 | 북 | 감(坎) | 지혜, 유동성 | 💧 물 |\n| 2궁 | 서남 | 곤(坤) | 포용, 안정 | 🏔️ 땅 |\n| 3궁 | 동 | 진(震) | 활동, 성장 | ⚡ 번개 |\n| 4궁 | 동남 | 손(巽) | 부드러움, 침투 | 🌬️ 바람 |\n| 5궁 | 중앙 | - | 중심, 전환 | ⭐ 중심 |\n| 6궁 | 서북 | 건(乾) | 권위, 강함 | ☁️ 하늘 |\n| 7궁 | 서 | 태(兌) | 기쁨, 소통 | 🌊 못 |\n| 8궁 | 동북 | 간(艮) | 정지, 산 | 🗻 산 |\n| 9궁 | 남 | 리(離) | 밝음, 명예 | 🔥 불 |\n\n## 5궁의 특수성\n\n중앙 5궁은 다른 궁들과 달리:\n- 방위가 없음 (중심)\n- 8문이 배치되지 않음\n- 에너지 전환의 중심지\n- 2궁 또는 8궁에 임시 배치\n\n## 실전 활용\n\n9궁을 읽는 순서:\n1. 중심(5궁)에서 시작\n2. 시계방향으로 1→2→3...→9\n3. 각 궁의 기운 파악\n4. 방위별 길흉 판단\n\n> 📚 **연습**: 오늘 날짜로 9궁도를 그려보세요.\n",quiz:{passingScore:75,questions:[{id:"beginner-2-q1",question:"낙서도에서 모든 행, 열, 대각선의 합은?",options:["9","12","15","18"],correctAnswer:2,explanation:"낙서도는 모든 행, 열, 대각선의 합이 15가 되는 마방진입니다."},{id:"beginner-2-q2",question:"1궁이 위치한 방위는?",options:["남","북","동","서"],correctAnswer:1,explanation:"1궁은 북쪽에 위치하며, 물의 기운을 상징합니다."},{id:"beginner-2-q3",question:"5궁의 특수성으로 옳은 것은?",options:["가장 강한 길성","방위가 없는 중심","항상 흉성","북쪽 방위"],correctAnswer:1,explanation:"5궁은 중앙에 위치하여 방위가 없으며, 에너지 전환의 중심지입니다."},{id:"beginner-2-q4",question:"9궁이 상징하는 오행은?",options:["물","나무","불","흙"],correctAnswer:2,explanation:"9궁은 남쪽에 위치하며 불(火)의 기운을 상징합니다."}]}},{id:"beginner-3",title:"9성(구성) 알아보기",type:"theory",duration:50,description:"천반을 구성하는 9개의 별을 배웁니다",keyPoints:["9성의 명칭과 의미","길성과 흉성 구분","9성의 성격과 특징","실생활 적용 방법"],content:"# 9성(九星) - 하늘의 기운\n\n## 9성이란?\n\n9성은 귀문둔갑의 **천반(天盤)**을 구성하는 9개의 별입니다.\n각 별은 고유한 성격과 길흉을 가지고 있습니다.\n\n## 9성의 분류\n\n### 🌟 길성 (吉星)\n1. **천보성(天輔星)** ⭐⭐⭐⭐⭐\n   - 의미: 보좌, 지원\n   - 용도: 협력, 파트너십\n   - 키워드: 도움, 협조\n\n2. **천심성(天心星)** ⭐⭐⭐⭐\n   - 의미: 마음, 의료\n   - 용도: 건강, 치료, 상담\n   - 키워드: 치유, 회복\n\n3. **천영성(天英星)** ⭐⭐⭐⭐\n   - 의미: 영광, 명예\n   - 용도: 승진, 시험\n   - 키워드: 성공, 인정\n\n### ⚖️ 중성 (中星)\n4. **천충성(天沖星)** ⚖️\n   - 의미: 충돌, 돌파\n   - 용도: 변화, 개혁\n   - 키워드: 돌진, 개척\n\n5. **천보성(天輔星)** ⚖️\n   - 의미: 도움, 보조\n   - 용도: 협업, 지원\n   - 키워드: 협력, 보좌\n\n### ❌ 흉성 (凶星)\n6. **천임성(天任星)** ❌\n   - 의미: 책임, 부담\n   - 용도: 피해야 할 방향\n   - 키워드: 압박, 스트레스\n\n7. **천주성(天柱星)** ❌❌\n   - 의미: 기둥, 고집\n   - 용도: 완고함 주의\n   - 키워드: 막힘, 정체\n\n8. **천금성(天禽星)** ❌❌❌\n   - 의미: 덫, 구속\n   - 용도: 절대 피할 방향\n   - 키워드: 함정, 곤란\n\n9. **천예성(天芮星)** ❌❌❌❌\n   - 의미: 질병, 재난\n   - 용도: 최악의 방향\n   - 키워드: 병, 재앙\n\n## 9성의 실전 활용\n\n### 상황별 최적 별 선택\n\n| 상황 | 추천 별 | 이유 |\n|------|---------|------|\n| 중요 계약 | 천보성 | 협력 운 상승 |\n| 면접/시험 | 천영성 | 명예 운 상승 |\n| 병원 방문 | 천심성 | 치료 운 상승 |\n| 사업 개시 | 천충성 | 돌파력 강함 |\n\n### 피해야 할 별\n\n- ❌ 천임성: 부담스러운 일\n- ❌❌ 천주성: 새로운 시도\n- ❌❌❌ 천금성: 투자, 계약\n- ❌❌❌❌ 천예성: 모든 중요한 일\n\n> 💡 **실전 팁**: 출장이나 여행 시 천영성 방향으로 가면 좋은 결과를 얻기 쉽습니다.\n\n## 연습 문제\n\n다음 상황에서 어떤 별의 방향을 선택하시겠습니까?\n\n1. 중요한 비즈니스 미팅\n2. 건강 검진\n3. 새로운 사업 론칭\n4. 친구와의 가벼운 만남\n",quiz:{passingScore:75,questions:[{id:"beginner-3-q1",question:"가장 길한 별로 알려진 것은?",options:["천임성","천보성","천예성","천주성"],correctAnswer:1,explanation:"천보성은 보좌와 지원의 의미로 가장 길한 별 중 하나입니다."},{id:"beginner-3-q2",question:"건강과 치료에 가장 좋은 별은?",options:["천영성","천심성","천충성","천보성"],correctAnswer:1,explanation:"천심성은 마음과 의료를 상징하여 건강과 치료에 좋습니다."},{id:"beginner-3-q3",question:"피해야 할 흉성으로 질병과 재난을 의미하는 별은?",options:["천임성","천주성","천금성","천예성"],correctAnswer:3,explanation:"천예성은 질병과 재난을 의미하는 가장 강한 흉성입니다."},{id:"beginner-3-q4",question:"새로운 사업이나 개혁에 적합한 별은?",options:["천충성","천예성","천주성","천임성"],correctAnswer:0,explanation:"천충성은 충돌과 돌파를 의미하여 새로운 시도에 적합합니다."}]}},{id:"beginner-4",title:"8문(팔문) 이해하기",type:"theory",duration:50,description:"인반을 구성하는 8개의 문을 배웁니다",keyPoints:["8문의 명칭과 의미","길문과 흉문 구분","상황별 적합한 문","문의 시간적 활용"],content:"# 8문(八門) - 사람의 행동\n\n## 8문이란?\n\n8문은 귀문둔갑의 **인반(人盤)**을 구성하며, 사람의 행동과 관련됩니다.\n\n## 8문의 분류\n\n### 🚪 생문(生門) - 최고 길문\n- **의미**: 생성, 탄생\n- **용도**: 새로운 시작, 창업, 출산\n- **키워드**: 성장, 발전, 번영\n- **색상**: 초록색 🟢\n\n### 🚪 개문(開門) - 대길문\n- **의미**: 열림, 시작\n- **용도**: 개업, 개시, 대외활동\n- **키워드**: 확장, 기회\n- **색상**: 하늘색 🔵\n\n### 🚪 휴문(休門) - 길문\n- **의미**: 휴식, 회복\n- **용도**: 여행, 요양, 학습\n- **키워드**: 평화, 안정\n- **색상**: 청록색 🟦\n\n### 🚪 경문(景門) - 소길문\n- **의미**: 경치, 외관\n- **용도**: 홍보, 마케팅, 외교\n- **키워드**: 화려함, 명성\n- **색상**: 노란색 🟡\n\n### 🚪 놀문(驚門) - 소흉문\n- **의미**: 놀람, 변화\n- **용도**: 주의 필요\n- **키워드**: 변동, 불안\n- **색상**: 주황색 🟠\n\n### 🚪 상문(傷門) - 흉문\n- **의미**: 상처, 다툼\n- **용도**: 피해야 함\n- **키워드**: 갈등, 손해\n- **색상**: 빨간색 🔴\n\n### 🚪 두문(杜門) - 대흉문\n- **의미**: 막힘, 폐쇄\n- **용도**: 절대 피할 것\n- **키워드**: 정체, 고립\n- **색상**: 검은색 ⚫\n\n### 🚪 사문(死門) - 최악 흉문\n- **의미**: 죽음, 종결\n- **용도**: 모든 활동 금지\n- **키워드**: 끝, 파멸\n- **색상**: 회색 ⚪\n\n## 상황별 최적 문 선택\n\n| 활동 | 최적 문 | 차선 문 | 피할 문 |\n|------|---------|---------|---------|\n| 창업 개업 | 생문 | 개문 | 사문, 두문 |\n| 이직 면접 | 개문 | 생문 | 상문, 두문 |\n| 휴가 여행 | 휴문 | 경문 | 놀문 |\n| 계약 체결 | 생문 | 개문 | 상문, 사문 |\n| 건강 검진 | 휴문 | 생문 | 사문 |\n| 마케팅 | 경문 | 개문 | 두문 |\n\n## 8문과 시간\n\n각 문은 특정 시간대와 연결됩니다:\n\n- **생문**: 오전 7-9시 (진시)\n- **개문**: 오전 9-11시 (사시)\n- **휴문**: 오전 11시-오후 1시 (오시)\n- **경문**: 오후 1-3시 (미시)\n\n> 💡 **활용법**: 중요한 회의는 생문이나 개문 시간대에 잡으세요.\n\n## 실전 예제\n\n**상황**: 새로운 사업 파트너를 만나러 갑니다.\n\n1. ✅ **최선**: 생문 방향, 오전 7-9시\n2. ✅ **차선**: 개문 방향, 오전 9-11시\n3. ❌ **최악**: 사문, 두문 방향은 피하기\n\n## 연습 문제\n\n다음 상황에 가장 적합한 문은?\n\n1. 첫 데이트\n2. 법원 소송\n3. 병원 입원\n4. 신제품 발표회\n",quiz:{passingScore:75,questions:[{id:"beginner-4-q1",question:"새로운 시작과 창업에 가장 좋은 문은?",options:["휴문","생문","사문","두문"],correctAnswer:1,explanation:"생문(生門)은 생성과 탄생을 의미하여 새로운 시작에 최적입니다."},{id:"beginner-4-q2",question:"휴식과 여행에 적합한 문은?",options:["상문","휴문","놀문","두문"],correctAnswer:1,explanation:"휴문(休門)은 휴식과 회복을 의미하여 여행에 좋습니다."},{id:"beginner-4-q3",question:"가장 피해야 할 최악의 문은?",options:["경문","놀문","두문","사문"],correctAnswer:3,explanation:"사문(死門)은 죽음과 종결을 의미하는 최악의 흉문입니다."},{id:"beginner-4-q4",question:"홍보와 마케팅에 적합한 문은?",options:["경문","두문","상문","사문"],correctAnswer:0,explanation:"경문(景門)은 경치와 외관을 의미하여 홍보 활동에 적합합니다."}]}},{id:"beginner-5",title:"8신(팔신) 기초",type:"theory",duration:40,description:"지반을 구성하는 8개의 신을 배웁니다",keyPoints:["8신의 명칭과 역할","8신과 환경의 관계","길신과 흉신","8신의 실용적 활용"],content:'# 8신(八神) - 땅의 상태\n\n## 8신이란?\n\n8신은 귀문둔갑의 **지반(地盤)**을 구성하며, 환경과 상황의 특성을 나타냅니다.\n\n## 8신의 구성\n\n### 🌟 길신\n\n1. **직부(直符)** ⭐⭐⭐⭐⭐\n   - 의미: 정직, 권위\n   - 특징: 가장 강한 길신\n   - 활용: 공식적 활동, 관공서\n\n2. **등사(螣蛇)** ⭐⭐\n   - 의미: 뱀, 유연함\n   - 특징: 변통과 적응\n   - 활용: 협상, 외교\n\n3. **태음(太陰)** ⭐⭐⭐\n   - 의미: 달, 은밀함\n   - 특징: 비밀스러운 일\n   - 활용: 내부 회의, 계획\n\n4. **육합(六合)** ⭐⭐⭐⭐\n   - 의미: 조화, 결합\n   - 특징: 협력과 합의\n   - 활용: 파트너십, 결혼\n\n### ❌ 흉신\n\n5. **백호(白虎)** ❌❌\n   - 의미: 흰 호랑이, 공격\n   - 특징: 폭력, 재해\n   - 활용: 피해야 할 방향\n\n6. **현무(玄武)** ❌❌❌\n   - 의미: 거북뱀, 도둑\n   - 특징: 사기, 배신\n   - 활용: 절대 주의\n\n7. **구진(勾陳)** ❌\n   - 의미: 얽힘, 지연\n   - 특징: 복잡함\n   - 활용: 신중함 필요\n\n8. **주작(朱雀)** ❌\n   - 의미: 붉은 새, 말다툼\n   - 특징: 언쟁, 소송\n   - 활용: 법적 분쟁 주의\n\n## 8신의 실전 활용\n\n### 상황별 8신 매칭\n\n| 활동 | 유리한 신 | 불리한 신 |\n|------|-----------|-----------|\n| 계약 체결 | 육합, 직부 | 현무, 백호 |\n| 비밀 회의 | 태음 | 주작 |\n| 공개 행사 | 직부 | 등사 |\n| 협상 | 육합, 등사 | 구진 |\n\n## 8신과 9성의 조합\n\n8신은 9성과 함께 작용하여 더 정확한 판단을 제공합니다:\n\n- 직부 + 천영성 = 최고 길조 (공식 명예)\n- 현무 + 천예성 = 최악 흉조 (사기 + 재난)\n- 육합 + 천보성 = 대길 (협력 + 지원)\n\n> 💡 **핵심**: 8신은 "어떤 환경"에서 일이 벌어지는지 알려줍니다.\n\n## 연습 문제\n\n1. 중요한 계약 체결 시 가장 좋은 신은?\n2. 비밀 프로젝트 회의에 적합한 신은?\n3. 절대 피해야 할 사기 위험 신은?\n',quiz:{passingScore:70,questions:[{id:"beginner-5-q1",question:"가장 강한 길신으로 권위를 상징하는 것은?",options:["등사","직부","백호","주작"],correctAnswer:1,explanation:"직부(直符)는 정직과 권위를 상징하는 가장 강한 길신입니다."},{id:"beginner-5-q2",question:"협력과 결합을 의미하는 신은?",options:["육합","현무","구진","백호"],correctAnswer:0,explanation:"육합(六合)은 조화와 결합을 의미하여 협력에 좋습니다."},{id:"beginner-5-q3",question:"사기와 배신을 의미하는 흉신은?",options:["직부","등사","현무","태음"],correctAnswer:2,explanation:"현무(玄武)는 도둑과 사기를 의미하는 강한 흉신입니다."}]}},{id:"beginner-6",title:"종합 실습: 첫 번째 국(局) 해석",type:"practice",duration:60,description:"실제 날짜와 시간으로 귀문둔갑 국을 해석해봅니다",keyPoints:["국 세우기 과정","9궁-9성-8문-8신 종합 판독","길흉 판단 기준","실용적 조언 도출"],content:"# 첫 번째 국(局) 해석 실습\n\n## 학습 목표\n\n이제까지 배운 9궁, 9성, 8문, 8신을 종합하여 실제 귀문둔갑 국을 해석해봅니다.\n\n## 실습 과제\n\n**시나리오**:\n- 날짜: 2024년 1월 15일\n- 시간: 오전 10시\n- 목적: 새로운 사업 파트너와 첫 미팅\n\n### 단계 1: 국 확인\n\n앱에서 해당 날짜/시간의 국을 조회합니다.\n\n### 단계 2: 각 궁 분석\n\n각 궁(1-9궁)에 배치된 요소를 확인합니다:\n- 어느 궁에 생문이 있는가?\n- 어느 궁에 천영성이 있는가?\n- 어느 궁에 직부가 있는가?\n\n### 단계 3: 길한 방향 찾기\n\n다음 조합을 찾아봅니다:\n1. 생문 + 천보성 + 육합 = 최고 길조\n2. 개문 + 천영성 + 직부 = 대길\n3. 휴문 + 천심성 + 태음 = 소길\n\n### 단계 4: 피할 방향 확인\n\n다음 조합은 피합니다:\n1. 사문 + 천예성 + 현무 = 최악\n2. 두문 + 천금성 + 백호 = 대흉\n3. 상문 + 천주성 + 구진 = 흉\n\n### 단계 5: 결론 도출\n\n- 최적 방향: [남쪽/북쪽/동쪽/서쪽]\n- 이유: [생문 + 천보성 배치]\n- 조언: 해당 방향의 장소에서 미팅 진행\n\n## 자가 평가 체크리스트\n\n- [ ] 9궁의 배치를 이해했다\n- [ ] 각 궁에 배치된 9성을 확인했다\n- [ ] 8문의 위치를 파악했다\n- [ ] 8신의 역할을 고려했다\n- [ ] 종합적인 판단을 내렸다\n\n## 추가 연습\n\n다음 상황들도 직접 분석해보세요:\n\n1. 중요한 시험 (날짜: 2024-03-15)\n2. 이사 날짜 선택 (2024-05-20)\n3. 결혼식 날짜 (2024-06-08)\n\n> 💡 **팁**: 처음에는 생문과 개문만 찾아도 충분합니다. 점차 세밀하게 분석하세요.\n",practiceData:{scenario:"2024년 1월 15일 오전 10시, 새로운 사업 파트너 미팅",date:"2024-01-15",time:"10:00",expectedResult:"생문이 있는 방향 또는 개문이 있는 방향을 선택. 가능하면 천보성이나 천영성이 함께 있는 궁의 방향으로 이동.",hints:["먼저 생문의 위치를 확인하세요","생문이 있는 궁에 어떤 별이 있는지 확인하세요","해당 방향에 흉신이 없는지 확인하세요","시간대도 고려하세요 (오전 10시는 개문 시간)"]}}]},{id:"intermediate",level:"intermediate",title:"귀문둔갑 심화",description:"복잡한 국 해석과 응용 기법을 학습합니다",icon:"🌿",estimatedHours:12,prerequisites:["beginner"],lessons:[{id:"intermediate-1",title:"음둔/양둔 구분법",type:"theory",duration:60,description:"계절에 따른 음둔과 양둔의 차이를 배웁니다",keyPoints:["동지와 하지의 기준","음둔 18국과 양둔 18국","계절별 적용 방법","음양 전환 시점"],content:"# 음둔(陰遁)과 양둔(陽遁)\n\n## 음양둔의 개념\n\n귀문둔갑은 계절에 따라 **음둔**과 **양둔** 두 가지 방식으로 나뉩니다.\n\n### 양둔 기간\n- **시작**: 동지(冬至) 다음 날\n- **종료**: 하지(夏至) 당일\n- **특징**: 양기가 상승하는 시기\n- **국**: 양둔 1국 ~ 양둔 9국\n\n### 음둔 기간\n- **시작**: 하지 다음 날\n- **종료**: 동지 당일\n- **특징**: 음기가 상승하는 시기\n- **국**: 음둔 1국 ~ 음둔 9국\n\n## 음양둔의 차이점\n\n| 구분 | 양둔 | 음둔 |\n|------|------|------|\n| 기간 | 동지~하지 | 하지~동지 |\n| 방향 | 순행 (1→2→3) | 역행 (9→8→7) |\n| 기운 | 확장, 성장 | 수렴, 정리 |\n| 활동 | 적극적 | 신중함 |\n\n## 음양둔 판별법\n\n### 방법 1: 날짜 확인\n```\n// 2024년 기준\nif (date >= '2023-12-22' && date <= '2024-06-21') {\n  return '양둔';\n} else {\n  return '음둔';\n}\n```\n\n### 방법 2: 절기 활용\n- 동지 후 → 양둔 시작\n- 하지 후 → 음둔 시작\n\n## 실전 활용\n\n### 양둔 시기 전략\n- ✅ 새로운 사업 시작\n- ✅ 확장과 성장\n- ✅ 대외적 활동\n- ✅ 공격적 투자\n\n### 음둔 시기 전략\n- ✅ 내실 다지기\n- ✅ 정리와 마무리\n- ✅ 공부와 수양\n- ✅ 보수적 운영\n\n> 💡 **핵심**: 음양둔을 잘못 적용하면 전혀 다른 결과가 나옵니다!\n\n## 연습 문제\n\n1. 2024년 7월 15일은 음둔인가 양둔인가?\n2. 새로운 사업을 시작하기 좋은 시기는?\n3. 음둔 시기에 적합한 활동은?\n",quiz:{passingScore:80,questions:[{id:"intermediate-1-q1",question:"양둔이 시작되는 시점은?",options:["동지 당일","동지 다음 날","하지 당일","하지 다음 날"],correctAnswer:1,explanation:"양둔은 동지 다음 날부터 시작됩니다."},{id:"intermediate-1-q2",question:"음둔 시기에 가장 적합한 활동은?",options:["공격적 투자","사업 확장","내실 다지기","신규 진출"],correctAnswer:2,explanation:"음둔은 수렴과 정리의 시기로 내실을 다지기에 좋습니다."}]}}]},{id:"advanced",level:"advanced",title:"귀문둔갑 마스터",description:"전문가 수준의 해석 능력을 갖춥니다",icon:"🌳",estimatedHours:20,prerequisites:["beginner","intermediate"],lessons:[{id:"advanced-1",title:"복잡한 국 종합 해석",type:"case-study",duration:90,description:"여러 요소가 얽힌 복잡한 국을 해석하는 방법",keyPoints:["길흉이 혼재된 국 판단","우선순위 결정 기준","상황별 가중치 적용","최종 결정 방법론"],content:"# 복잡한 국 종합 해석\n\n## 고급 해석의 필요성\n\n실제 귀문둔갑 국에서는 길성과 흉성, 길문과 흉문이 섞여 있어\n단순한 판단이 어려운 경우가 많습니다.\n\n## 해석 우선순위\n\n### 레벨 1: 핵심 요소 (가중치 40%)\n1. **문(門)**: 가장 중요 - 행동의 결과\n2. **성(星)**: 두 번째 - 하늘의 기운\n3. **신(神)**: 세 번째 - 환경 상태\n\n### 레벨 2: 보조 요소 (가중치 30%)\n- 궁의 위치 (방위)\n- 시간대\n- 계절 (음둔/양둔)\n\n### 레벨 3: 심화 요소 (가중치 30%)\n- 천지반 관계\n- 공망(空亡) 여부\n- 암간(暗干) 배치\n\n## 혼합 국 판단 사례\n\n### 사례 1: 길문 + 흉성\n- **상황**: 생문 + 천예성\n- **해석**: 생문의 길한 기운이 천예성의 흉함을 완화\n- **결론**: 70% 긍정적, 건강만 주의\n\n### 사례 2: 흉문 + 길성\n- **상황**: 사문 + 천영성\n- **해석**: 사문의 강한 흉함이 우선\n- **결론**: 30% 긍정적, 피하는 것이 좋음\n\n## 가중치 계산 공식\n\n```\n최종 길흉 점수 = (문 점수 × 0.4) + (성 점수 × 0.3) + (신 점수 × 0.3)\n\n점수 범위:\n- 80~100: 매우 길\n- 60~79: 길\n- 40~59: 중립\n- 20~39: 흉\n- 0~19: 대흉\n```\n\n## 실전 예제\n\n**국 상황**:\n- 방위: 남쪽 (9궁)\n- 문: 경문 (소길)\n- 성: 천충성 (중성)\n- 신: 직부 (대길)\n\n**계산**:\n- 문 점수: 70 × 0.4 = 28\n- 성 점수: 50 × 0.3 = 15\n- 신 점수: 90 × 0.3 = 27\n- **합계: 70점 → 길**\n\n## 상황별 특수 고려사항\n\n### 사업/투자\n- 문과 성에 높은 가중치 (50:50)\n- 신은 보조 참고 (20%)\n\n### 건강/치료\n- 성에 최고 가중치 (60%)\n- 문 30%, 신 10%\n\n### 인간관계\n- 신에 높은 가중치 (50%)\n- 문 30%, 성 20%\n\n> 💡 **마스터 팁**: 경험이 쌓이면 직관적으로 판단할 수 있게 됩니다.\n\n## 고급 연습 문제\n\n다음 국을 종합 해석하세요:\n\n1. 생문 + 천임성 + 백호 (동쪽)\n2. 개문 + 천영성 + 현무 (서쪽)\n3. 사문 + 천보성 + 육합 (남쪽)\n\n각 경우에 대해:\n- 점수를 계산하고\n- 길흉을 판단하고\n- 실행 여부를 결정하세요\n",quiz:{passingScore:85,questions:[{id:"advanced-1-q1",question:"귀문둔갑 해석에서 가장 중요한 요소는?",options:["성(星)","문(門)","신(神)","궁(宮)"],correctAnswer:1,explanation:"문(門)이 가장 중요하며, 행동의 직접적인 결과를 나타냅니다."},{id:"advanced-1-q2",question:"생문 + 천예성의 조합은 어떻게 해석되는가?",options:["완전 길조","생문이 흉함을 완화","완전 흉조","중립"],correctAnswer:1,explanation:"생문의 강한 길함이 천예성의 흉함을 어느 정도 완화시킵니다."}]}}]}];function eo(e,t){const r=(a=e,Xd.find(e=>e.id===a));var a;if(!r)return 0;const s=r.lessons.length,n=t.filter(e=>r.lessons.some(t=>t.id===e)).length;return Math.round(n/s*100)}const to=[...[{id:"qimen-dunjia",term:"귀문둔갑",hanja:"奇門遁甲",pronunciation:"기문둔갑",category:"basic",shortDescription:"시간과 방위를 이용한 동양 예측술",detailedDescription:"귀문둔갑은 중국 고대로부터 전해 내려오는 시공간 점술입니다.\n\n**구성**:\n- 기문(奇門): 신비로운 문, 특별한 방법\n- 둔갑(遁甲): 숨겨진 갑, 보이지 않는 힘\n\n**활용**:\n- 길일 선택 (날짜 잡기)\n- 방위 선택 (방향 정하기)\n- 의사결정 지원\n- 사업 전략 수립\n\n**특징**:\n- 시간 중심 (매 2시간마다 변화)\n- 방위 중심 (8방위 + 중앙)\n- 3차원 분석 (천·인·지)",relatedTerms:["jiugong","jiuxing","bamen","bashen"],examples:["오늘 중요한 회의가 있는데, 귀문둔갑으로 방향을 정했습니다","귀문둔갑에서 생문 방향으로 가세요"],icon:"🧭"},{id:"jiugong",term:"구궁",hanja:"九宮",pronunciation:"구궁",category:"palace",shortDescription:"귀문둔갑의 9개 공간 구획",detailedDescription:"구궁은 귀문둔갑의 기본 구조로 9개의 공간을 의미합니다.\n\n**배치**:\n```\n4(동남)  9(남)   2(서남)\n3(동)    5(중)   7(서)\n8(동북)  1(북)   6(서북)\n```\n\n**특징**:\n- 낙서도(洛書圖) 배치\n- 각 궁은 고유한 방위와 의미\n- 5궁은 중앙으로 특수한 위치\n\n**활용**:\n- 방위 결정의 기준\n- 길흉 판단의 기본 틀",relatedTerms:["luoshu","bagua"],icon:"⚛️",synonyms:["9궁","구궁도"]},{id:"tianpan",term:"천반",hanja:"天盤",category:"basic",shortDescription:"하늘의 기운을 나타내는 판, 9성이 배치됨",detailedDescription:"천반은 귀문둔갑 삼반(三盤) 중 하나로 하늘의 기운을 나타냅니다.\n\n**구성**: 9성(九星)이 배치\n- 천봉성(天蓬星)\n- 천영성(天英星)\n- 천심성(天心星)\n- 등\n\n**의미**:\n- 하늘의 뜻\n- 운명적 요소\n- 자연의 흐름\n\n**활용**:\n- 전체적인 운세 파악\n- 길흉의 큰 방향 판단",relatedTerms:["renpan","dipan","jiuxing"],icon:"☁️"},{id:"renpan",term:"인반",hanja:"人盤",category:"basic",shortDescription:"사람의 행동을 나타내는 판, 8문이 배치됨",detailedDescription:"인반은 귀문둔갑 삼반 중 하나로 사람의 행동을 나타냅니다.\n\n**구성**: 8문(八門)이 배치\n- 생문(生門)\n- 사문(死門)\n- 개문(開門)\n- 등\n\n**의미**:\n- 인간의 행동\n- 의지와 선택\n- 노력의 방향\n\n**활용**:\n- 행동의 결과 예측\n- 최적 타이밍 선택",relatedTerms:["tianpan","dipan","bamen"],icon:"👤"},{id:"dipan",term:"지반",hanja:"地盤",category:"basic",shortDescription:"땅의 상태를 나타내는 판, 8신이 배치됨",detailedDescription:"지반은 귀문둔갑 삼반 중 하나로 땅과 환경의 상태를 나타냅니다.\n\n**구성**: 8신(八神)이 배치\n- 직부(直符)\n- 백호(白虎)\n- 현무(玄武)\n- 등\n\n**의미**:\n- 환경 조건\n- 상황의 특성\n- 외부 요인\n\n**활용**:\n- 환경 적합성 판단\n- 장소 선택 기준",relatedTerms:["tianpan","renpan","bashen"],icon:"🌍"},{id:"yindun",term:"음둔",hanja:"陰遁",category:"basic",shortDescription:"하지부터 동지까지의 국, 역행 방식",detailedDescription:"음둔은 귀문둔갑에서 하지(夏至) 이후 동지(冬至)까지 사용하는 방식입니다.\n\n**기간**:\n- 시작: 하지 다음 날\n- 종료: 동지 당일\n- 기간: 약 6개월\n\n**특징**:\n- 역행 방식 (9→8→7→...)\n- 음기 상승기\n- 수렴과 정리\n\n**적합한 활동**:\n- 내실 다지기\n- 정리와 마무리\n- 학습과 수양\n- 보수적 운영\n\n**주의사항**:\n- 확장보다는 안정\n- 신중한 의사결정",relatedTerms:["yangdun","dongzhi","xiazhi"],icon:"🌙"},{id:"yangdun",term:"양둔",hanja:"陽遁",category:"basic",shortDescription:"동지부터 하지까지의 국, 순행 방식",detailedDescription:"양둔은 귀문둔갑에서 동지(冬至) 이후 하지(夏至)까지 사용하는 방식입니다.\n\n**기간**:\n- 시작: 동지 다음 날\n- 종료: 하지 당일\n- 기간: 약 6개월\n\n**특징**:\n- 순행 방식 (1→2→3→...)\n- 양기 상승기\n- 확장과 성장\n\n**적합한 활동**:\n- 새로운 시작\n- 사업 확장\n- 대외 활동\n- 공격적 투자\n\n**주의사항**:\n- 과도한 확장 경계\n- 체력 안배 필요",relatedTerms:["yindun","dongzhi","xiazhi"],icon:"☀️"}],...[{id:"tianpeng",term:"천봉성",hanja:"天蓬星",category:"star",shortDescription:"도적과 수난을 의미하는 흉성",detailedDescription:"천봉성은 9성 중 가장 강한 흉성 중 하나입니다.\n\n**특징**:\n- 성질: 물(水)\n- 길흉: 대흉성\n- 색상: 검은색\n\n**의미**:\n- 도둑, 사기\n- 수난, 재난\n- 음모, 배신\n\n**피해야 할 활동**:\n- 중요한 계약\n- 큰 투자\n- 새로운 시작\n\n**대처법**:\n- 이 방향은 피하기\n- 불가피한 경우 극도로 신중",relatedTerms:["jiuxing","tianrui"],icon:"⚫"},{id:"tianrui",term:"천예성",hanja:"天芮星",category:"star",shortDescription:"질병과 불길함을 의미하는 흉성",detailedDescription:"천예성은 질병과 재난을 상징하는 흉성입니다.\n\n**특징**:\n- 성질: 흙(土)\n- 길흉: 흉성\n- 색상: 황색\n\n**의미**:\n- 질병, 병마\n- 불길함\n- 쇠약, 노쇠\n\n**피해야 할 활동**:\n- 건강 관련 결정\n- 위험한 여행\n- 수술 날짜\n\n**대처법**:\n- 건강 검진은 다른 방향\n- 치료는 천심성 방향",relatedTerms:["jiuxing","tianpeng","tianxin"],icon:"🤒"},{id:"tianxin",term:"천심성",hanja:"天心星",category:"star",shortDescription:"의료와 치유를 의미하는 길성",detailedDescription:"천심성은 마음과 치유를 상징하는 길성입니다.\n\n**특징**:\n- 성질: 금(金)\n- 길흉: 대길성\n- 색상: 흰색\n\n**의미**:\n- 치유, 회복\n- 의료, 건강\n- 정신, 마음\n\n**적합한 활동**:\n- 병원 방문\n- 건강 검진\n- 심리 상담\n- 명상, 수양\n\n**효과**:\n- 빠른 회복\n- 정확한 진단\n- 마음의 평화",relatedTerms:["jiuxing","tianrui"],icon:"💚"},{id:"tianying",term:"천영성",hanja:"天英星",category:"star",shortDescription:"명예와 영광을 의미하는 길성",detailedDescription:"천영성은 명예와 성공을 상징하는 길성입니다.\n\n**특징**:\n- 성질: 화(火)\n- 길흉: 대길성\n- 색상: 빨간색\n\n**의미**:\n- 명예, 영광\n- 성공, 승진\n- 인정, 명성\n\n**적합한 활동**:\n- 시험, 면접\n- 발표, 프레젠테이션\n- 승진 면담\n- 공개 행사\n\n**효과**:\n- 좋은 평가\n- 성공 확률 증가\n- 명성 상승",relatedTerms:["jiuxing","tianfu"],icon:"🌟"},{id:"tianfu",term:"천보성",hanja:"天輔星",category:"star",shortDescription:"보좌와 협력을 의미하는 최고 길성",detailedDescription:"천보성은 9성 중 가장 길한 별로 알려져 있습니다.\n\n**특징**:\n- 성질: 목(木)\n- 길흉: 최고 길성\n- 색상: 청색\n\n**의미**:\n- 보좌, 도움\n- 협력, 지원\n- 성장, 발전\n\n**적합한 활동**:\n- 파트너십 체결\n- 중요한 계약\n- 사업 시작\n- 투자 결정\n\n**효과**:\n- 귀인의 도움\n- 순조로운 진행\n- 성공적 결과",relatedTerms:["jiuxing","tianying"],icon:"⭐"},{id:"tianchong",term:"천충성",hanja:"天沖星",category:"star",shortDescription:"충돌과 돌파를 의미하는 중성",detailedDescription:"천충성은 충돌과 돌파력을 상징하는 별입니다.\n\n**특징**:\n- 성질: 목(木)\n- 길흉: 중성 (상황에 따라 변동)\n- 색상: 청록색\n\n**의미**:\n- 돌파, 개척\n- 충돌, 변화\n- 혁신, 개혁\n\n**적합한 활동**:\n- 새로운 도전\n- 혁신적 프로젝트\n- 답답한 상황 타개\n\n**주의사항**:\n- 과도한 충돌 피하기\n- 신중한 계획 필요",relatedTerms:["jiuxing"],icon:"⚡"}],...[{id:"shengmen",term:"생문",hanja:"生門",category:"gate",shortDescription:"생성과 시작을 의미하는 최고 길문",detailedDescription:"생문은 8문 중 가장 길한 문으로 생성과 탄생을 상징합니다.\n\n**특징**:\n- 오행: 토(土)\n- 길흉: 최고 길문\n- 색상: 초록색 🟢\n- 시간: 오전 7-9시\n\n**의미**:\n- 생성, 탄생\n- 성장, 발전\n- 번영, 풍요\n\n**최적 활동**:\n- 창업, 개업\n- 출산\n- 새로운 프로젝트 시작\n- 투자, 계약\n\n**효과**:\n- 순조로운 시작\n- 지속적 성장\n- 좋은 결과",relatedTerms:["bamen","kaimen","simen"],examples:["창업일은 생문 방향으로 정했습니다","오늘 생문이 남쪽에 있으니 남쪽 카페에서 만나요"],icon:"🌱"},{id:"kaimen",term:"개문",hanja:"開門",category:"gate",shortDescription:"열림과 기회를 의미하는 대길문",detailedDescription:"개문은 열림과 시작을 상징하는 큰 길문입니다.\n\n**특징**:\n- 오행: 금(金)\n- 길흉: 대길문\n- 색상: 하늘색 🔵\n- 시간: 오전 9-11시\n\n**의미**:\n- 열림, 개방\n- 시작, 개시\n- 기회, 확장\n\n**최적 활동**:\n- 개업식\n- 중요한 만남\n- 새로운 기회 포착\n- 대외 활동\n\n**효과**:\n- 문이 열림\n- 기회 증가\n- 순조로운 진행",relatedTerms:["bamen","shengmen","xiumen"],icon:"🚪"},{id:"xiumen",term:"휴문",hanja:"休門",category:"gate",shortDescription:"휴식과 안정을 의미하는 길문",detailedDescription:"휴문은 휴식과 회복을 상징하는 길문입니다.\n\n**특징**:\n- 오행: 수(水)\n- 길흉: 길문\n- 색상: 청록색 🟦\n- 시간: 오전 11시-오후 1시\n\n**의미**:\n- 휴식, 회복\n- 평화, 안정\n- 학습, 수양\n\n**최적 활동**:\n- 여행, 휴가\n- 학습, 공부\n- 요양, 휴식\n- 평화로운 만남\n\n**효과**:\n- 심신 회복\n- 평온한 시간\n- 좋은 학습 효과",relatedTerms:["bamen","kaimen","jingmen"],icon:"😌"},{id:"jingmen",term:"경문",hanja:"景門",category:"gate",shortDescription:"경치와 외관을 의미하는 소길문",detailedDescription:"경문은 외관과 명성을 상징하는 소길문입니다.\n\n**특징**:\n- 오행: 화(火)\n- 길흉: 소길문\n- 색상: 노란색 🟡\n- 시간: 오후 1-3시\n\n**의미**:\n- 경치, 외관\n- 화려함, 명성\n- 홍보, 마케팅\n\n**최적 활동**:\n- 홍보 활동\n- 마케팅 행사\n- 외교, 교류\n- 공개 발표\n\n**주의사항**:\n- 실속보다 외관\n- 겉치레 주의",relatedTerms:["bamen","xiumen"],icon:"✨"},{id:"shangmen",term:"상문",hanja:"傷門",category:"gate",shortDescription:"상처와 다툼을 의미하는 흉문",detailedDescription:"상문은 상처와 갈등을 상징하는 흉문입니다.\n\n**특징**:\n- 오행: 목(木)\n- 길흉: 흉문\n- 색상: 빨간색 🔴\n- 시간: 오후 3-5시\n\n**의미**:\n- 상처, 손상\n- 다툼, 갈등\n- 손해, 피해\n\n**피해야 할 활동**:\n- 중요한 협상\n- 새로운 계약\n- 투자 결정\n- 위험한 일\n\n**대처법**:\n- 이 방향 피하기\n- 다툼 조심\n- 신중한 언행",relatedTerms:["bamen","dumen","simen"],icon:"🤕"},{id:"dumen",term:"두문",hanja:"杜門",category:"gate",shortDescription:"막힘과 폐쇄를 의미하는 대흉문",detailedDescription:"두문은 막힘과 정체를 상징하는 대흉문입니다.\n\n**특징**:\n- 오행: 목(木)\n- 길흉: 대흉문\n- 색상: 검은색 ⚫\n- 시간: 오후 5-7시\n\n**의미**:\n- 막힘, 폐쇄\n- 정체, 고립\n- 은둔, 차단\n\n**피해야 할 활동**:\n- 모든 중요한 일\n- 새로운 시도\n- 대외 활동\n- 확장 계획\n\n**대처법**:\n- 절대 피하기\n- 내부 정리나 공부만\n- 수양 시간으로 활용",relatedTerms:["bamen","shangmen","simen"],icon:"🚫"},{id:"simen",term:"사문",hanja:"死門",category:"gate",shortDescription:"죽음과 종결을 의미하는 최악 흉문",detailedDescription:"사문은 8문 중 가장 흉한 문으로 종결과 끝을 상징합니다.\n\n**특징**:\n- 오행: 토(土)\n- 길흉: 최악 흉문\n- 색상: 회색 ⚪\n- 시간: 오후 7-9시\n\n**의미**:\n- 죽음, 종결\n- 끝, 파멸\n- 재난, 불운\n\n**절대 피해야 할 활동**:\n- 모든 중요한 활동\n- 새로운 시작\n- 계약, 투자\n- 건강 관련 결정\n\n**유일한 용도**:\n- 종결이 필요한 경우 (이별, 해고 등)\n- 그 외는 절대 피하기",relatedTerms:["bamen","shengmen","dumen"],icon:"💀"},{id:"jingmen-alarm",term:"놀문",hanja:"驚門",category:"gate",shortDescription:"놀람과 변화를 의미하는 소흉문",detailedDescription:"놀문은 놀람과 급변을 상징하는 소흉문입니다.\n\n**특징**:\n- 오행: 금(金)\n- 길흉: 소흉문\n- 색상: 주황색 🟠\n- 시간: 오후 9-11시\n\n**의미**:\n- 놀람, 충격\n- 변화, 변동\n- 불안, 긴장\n\n**주의 활동**:\n- 변동성 큰 투자\n- 중요한 발표\n- 예상 외 상황 대비\n\n**활용 가능**:\n- 변화가 필요한 경우\n- 현상 타파\n- 신선한 자극",relatedTerms:["bamen"],icon:"😱"}],...[{id:"zhifu",term:"직부",hanja:"直符",category:"god",shortDescription:"정직과 권위를 의미하는 최고 길신",detailedDescription:"직부는 8신 중 가장 길한 신으로 정직과 권위를 상징합니다.\n\n**특징**:\n- 성질: 양(陽)\n- 길흉: 최고 길신\n- 상징: 천자, 권력\n\n**의미**:\n- 정직, 정의\n- 권위, 위엄\n- 공식성, 합법성\n\n**최적 활동**:\n- 공식적 행사\n- 관공서 업무\n- 법적 절차\n- 권위 있는 만남\n\n**효과**:\n- 공정한 대우\n- 권위 인정\n- 순조로운 진행",relatedTerms:["bashen","xuanwu"],icon:"👑"},{id:"taishe",term:"등사",hanja:"螣蛇",category:"god",shortDescription:"뱀처럼 유연한 변통을 의미하는 신",detailedDescription:"등사는 뱀과 같은 유연함과 변통을 상징합니다.\n\n**특징**:\n- 성질: 음(陰)\n- 길흉: 소길신\n- 상징: 뱀, 변화\n\n**의미**:\n- 유연함, 변통\n- 적응, 융통\n- 교묘함\n\n**적합한 활동**:\n- 협상, 외교\n- 유연한 대처\n- 상황 적응\n\n**주의사항**:\n- 과도한 변통 주의\n- 원칙 지키기",relatedTerms:["bashen","zhifu"],icon:"🐍"},{id:"taiyin",term:"태음",hanja:"太陰",category:"god",shortDescription:"달처럼 은밀함을 의미하는 길신",detailedDescription:"태음은 달과 같은 은밀함과 음성을 상징합니다.\n\n**특징**:\n- 성질: 음(陰)\n- 길흉: 길신\n- 상징: 달, 여성\n\n**의미**:\n- 은밀함, 비밀\n- 음성, 내부\n- 여성성, 부드러움\n\n**적합한 활동**:\n- 비밀 회의\n- 내부 계획\n- 사적인 만남\n- 조용한 활동\n\n**효과**:\n- 비밀 유지\n- 안전한 진행\n- 조용한 성공",relatedTerms:["bashen","liuhe"],icon:"🌙"},{id:"liuhe",term:"육합",hanja:"六合",category:"god",shortDescription:"조화와 결합을 의미하는 대길신",detailedDescription:"육합은 조화와 합의를 상징하는 대길신입니다.\n\n**특징**:\n- 성질: 양(陽)\n- 길흉: 대길신\n- 상징: 결합, 화합\n\n**의미**:\n- 조화, 합의\n- 결합, 연합\n- 협력, 파트너십\n\n**최적 활동**:\n- 파트너십 체결\n- 결혼, 약혼\n- 협업 시작\n- 합의 도출\n\n**효과**:\n- 좋은 관계\n- 원만한 합의\n- 성공적 협력",relatedTerms:["bashen","taiyin","baihu"],icon:"🤝"},{id:"baihu",term:"백호",hanja:"白虎",category:"god",shortDescription:"흰 호랑이, 공격과 재해를 의미하는 흉신",detailedDescription:"백호는 흰 호랑이로 폭력과 재해를 상징하는 흉신입니다.\n\n**특징**:\n- 성질: 양(陽)\n- 길흉: 대흉신\n- 상징: 호랑이, 폭력\n\n**의미**:\n- 폭력, 공격\n- 재해, 사고\n- 피해, 손상\n\n**피해야 할 활동**:\n- 위험한 활동\n- 중요한 여행\n- 큰 투자\n- 법적 분쟁\n\n**대처법**:\n- 이 방향 피하기\n- 안전 최우선\n- 보수적 행동",relatedTerms:["bashen","xuanwu","liuhe"],icon:"🐯"},{id:"xuanwu",term:"현무",hanja:"玄武",category:"god",shortDescription:"거북뱀, 도둑과 사기를 의미하는 최악 흉신",detailedDescription:"현무는 거북과 뱀이 합쳐진 형상으로 사기를 상징하는 최악의 흉신입니다.\n\n**특징**:\n- 성질: 음(陰)\n- 길흉: 최악 흉신\n- 상징: 도둑, 배신\n\n**의미**:\n- 사기, 기만\n- 도둑, 절도\n- 배신, 배반\n\n**절대 피해야 할 활동**:\n- 모든 중요한 거래\n- 계약 체결\n- 투자 결정\n- 신뢰 관계 구축\n\n**대처법**:\n- 절대 피하기\n- 의심하고 확인\n- 계약서 꼼꼼히",relatedTerms:["bashen","zhifu","baihu"],icon:"🐢🐍"},{id:"gouchen",term:"구진",hanja:"勾陳",category:"god",shortDescription:"얽힘과 지연을 의미하는 흉신",detailedDescription:"구진은 얽힘과 복잡함을 상징하는 흉신입니다.\n\n**특징**:\n- 성질: 양(陽)\n- 길흉: 흉신\n- 상징: 얽힘, 복잡\n\n**의미**:\n- 얽힘, 지연\n- 복잡함, 난해\n- 막힘, 정체\n\n**주의 활동**:\n- 복잡한 거래\n- 시간 중요한 일\n- 빠른 결정 필요 시\n\n**대처법**:\n- 여유 시간 확보\n- 단순화 노력\n- 명확한 계획",relatedTerms:["bashen","zhuque"],icon:"🔗"},{id:"zhuque",term:"주작",hanja:"朱雀",category:"god",shortDescription:"붉은 새, 말다툼과 소송을 의미하는 흉신",detailedDescription:"주작은 붉은 새로 언쟁과 소송을 상징하는 흉신입니다.\n\n**특징**:\n- 성질: 양(陽)\n- 길흉: 흉신\n- 상징: 새, 언쟁\n\n**의미**:\n- 말다툼, 언쟁\n- 소송, 분쟁\n- 구설수, 비방\n\n**피해야 할 활동**:\n- 중요한 협상\n- 법적 절차\n- 민감한 대화\n- 공개 발언\n\n**대처법**:\n- 신중한 언행\n- 법적 자문\n- 증거 확보",relatedTerms:["bashen","gouchen"],icon:"🦅"}],...[{id:"wuxing",term:"오행",hanja:"五行",category:"element",shortDescription:"우주의 5가지 기본 원소",detailedDescription:"오행은 동양 철학의 근간을 이루는 5가지 원소입니다.\n\n**구성**:\n1. 목(木) - 나무\n2. 화(火) - 불\n3. 토(土) - 흙\n4. 금(金) - 쇠\n5. 수(水) - 물\n\n**상생 관계**:\n- 목생화(木生火): 나무가 불을 낳음\n- 화생토(火生土): 불이 흙을 낳음\n- 토생금(土生金): 흙이 쇠를 낳음\n- 금생수(金生水): 쇠가 물을 낳음\n- 수생목(水生木): 물이 나무를 낳음\n\n**상극 관계**:\n- 목극토(木克土): 나무가 흙을 이김\n- 토극수(土克水): 흙이 물을 이김\n- 수극화(水克火): 물이 불을 이김\n- 화극금(火克金): 불이 쇠를 이김\n- 금극목(金克木): 쇠가 나무를 이김",relatedTerms:["mu","huo","tu","jin","shui"],icon:"🌈"},{id:"mu",term:"목",hanja:"木",category:"element",shortDescription:"나무 기운, 성장과 발전",detailedDescription:"목(木)은 오행 중 나무를 의미합니다.\n\n**특징**:\n- 방위: 동쪽\n- 계절: 봄\n- 색상: 청색, 녹색\n- 성격: 성장, 발전\n\n**의미**:\n- 생명력, 성장\n- 확장, 발전\n- 유연함, 적응\n\n**활용**:\n- 새로운 시작\n- 성장 기대\n- 창의적 활동",relatedTerms:["wuxing","huo","tu"],icon:"🌳"},{id:"huo",term:"화",hanja:"火",category:"element",shortDescription:"불 기운, 열정과 명예",detailedDescription:"화(火)는 오행 중 불을 의미합니다.\n\n**특징**:\n- 방위: 남쪽\n- 계절: 여름\n- 색상: 빨간색\n- 성격: 열정, 명예\n\n**의미**:\n- 열정, 적극성\n- 명예, 명성\n- 화려함, 밝음\n\n**활용**:\n- 공개 행사\n- 명예로운 일\n- 열정적 활동",relatedTerms:["wuxing","mu","tu"],icon:"🔥"},{id:"tu",term:"토",hanja:"土",category:"element",shortDescription:"흙 기운, 안정과 신뢰",detailedDescription:"토(土)는 오행 중 흙을 의미합니다.\n\n**특징**:\n- 방위: 중앙\n- 계절: 환절기\n- 색상: 황색\n- 성격: 안정, 신뢰\n\n**의미**:\n- 안정, 중심\n- 신뢰, 믿음\n- 포용, 수용\n\n**활용**:\n- 중재, 조정\n- 안정적 활동\n- 신뢰 구축",relatedTerms:["wuxing","huo","jin"],icon:"🏔️"},{id:"jin",term:"금",hanja:"金",category:"element",shortDescription:"쇠 기운, 정의와 결단",detailedDescription:"금(金)은 오행 중 쇠를 의미합니다.\n\n**특징**:\n- 방위: 서쪽\n- 계절: 가을\n- 색상: 흰색\n- 성격: 정의, 결단\n\n**의미**:\n- 정의, 공정\n- 결단, 강함\n- 수확, 결실\n\n**활용**:\n- 공정한 판단\n- 결단력 발휘\n- 정리 정돈",relatedTerms:["wuxing","tu","shui"],icon:"⚙️"},{id:"shui",term:"수",hanja:"水",category:"element",shortDescription:"물 기운, 지혜와 유동성",detailedDescription:"수(水)는 오행 중 물을 의미합니다.\n\n**특징**:\n- 방위: 북쪽\n- 계절: 겨울\n- 색상: 검은색, 청색\n- 성격: 지혜, 유동\n\n**의미**:\n- 지혜, 학문\n- 유동성, 변화\n- 저장, 축적\n\n**활용**:\n- 학습, 연구\n- 유연한 대처\n- 재정 관리",relatedTerms:["wuxing","jin","mu"],icon:"💧"}],...[{id:"kongwang",term:"공망",hanja:"空亡",category:"advanced",shortDescription:"빈 망, 기운이 없는 상태",detailedDescription:"공망은 기운이 비어 있는 상태를 의미합니다.\n\n**특징**:\n- 에너지 부재\n- 무효화\n- 실속 없음\n\n**의미**:\n- 헛수고\n- 실속 없음\n- 무의미한 결과\n\n**대처법**:\n- 공망 시기 피하기\n- 중요한 일 미루기\n- 내부 정리 시간",relatedTerms:[],icon:"⭕"},{id:"fuyin",term:"복음",hanja:"伏吟",category:"advanced",shortDescription:"같은 기운이 겹쳐 정체됨",detailedDescription:"복음은 같은 기운이 중복되어 정체된 상태입니다.\n\n**특징**:\n- 정체, 막힘\n- 답답함\n- 변화 없음\n\n**의미**:\n- 현상 유지\n- 발전 없음\n- 지루함\n\n**대처법**:\n- 새로운 시도 미루기\n- 기다리기\n- 준비 기간",relatedTerms:["fanyin"],icon:"🔄"},{id:"fanyin",term:"반음",hanja:"反吟",category:"advanced",shortDescription:"반대 기운이 충돌함",detailedDescription:"반음은 반대 기운이 충돌하는 상태입니다.\n\n**특징**:\n- 충돌, 갈등\n- 변화, 동요\n- 불안정\n\n**의미**:\n- 갈등, 대립\n- 급변화\n- 혼란\n\n**대처법**:\n- 신중한 판단\n- 안정 추구\n- 갈등 회피",relatedTerms:["fuyin"],icon:"⚡"}]];function ro(e){return to.find(t=>t.id===e)}function ao(e){const t=ro(e);return t&&t.relatedTerms?t.relatedTerms.map(e=>ro(e)).filter(e=>void 0!==e):[]}const so={basic:{name:"기본 개념",icon:"📚",description:"귀문둔갑의 핵심 기본 개념"},star:{name:"9성",icon:"⭐",description:"천반을 구성하는 9개의 별"},gate:{name:"8문",icon:"🚪",description:"인반을 구성하는 8개의 문"},god:{name:"8신",icon:"👼",description:"지반을 구성하는 8개의 신"},palace:{name:"궁",icon:"🏛️",description:"9개의 공간 구획"},stem:{name:"천간",icon:"☁️",description:"10개의 하늘 기운"},branch:{name:"지지",icon:"🌍",description:"12개의 땅 기운"},element:{name:"오행",icon:"🌈",description:"5가지 기본 원소"},advanced:{name:"고급 개념",icon:"🎓",description:"심화 학습 용어"}};const no=l.memo(function({lesson:e,isCompleted:t,quizScore:r,onComplete:n,onStartQuiz:i,onStartPractice:l}){const[d,o]=a.useState(!0),c=a.useMemo(()=>({theory:"📖",practice:"🎯",quiz:"❓","case-study":"📋"}[e.type]),[e.type]),m={blue:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-700",text:"text-blue-900 dark:text-blue-300",button:"bg-blue-500 hover:bg-blue-600"},green:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-700",text:"text-green-900 dark:text-green-300",button:"bg-green-500 hover:bg-green-600"},purple:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-200 dark:border-purple-700",text:"text-purple-900 dark:text-purple-300",button:"bg-purple-500 hover:bg-purple-600"},orange:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-700",text:"text-orange-900 dark:text-orange-300",button:"bg-orange-500 hover:bg-orange-600"}}[a.useMemo(()=>({theory:"blue",practice:"green",quiz:"purple","case-study":"orange"}[e.type]),[e.type])];return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:`p-6 rounded-xl border ${m.bg} ${m.border}`,children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-4xl",children:c}),s.jsxs("div",{children:[s.jsx("h1",{className:`text-2xl font-bold ${m.text}`,children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsxs("span",{className:"px-3 py-1 bg-white dark:bg-gray-800 rounded-full text-sm font-medium",children:["⏱️ ",e.duration,"분"]}),t&&s.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 rounded-full text-sm font-bold",children:"✅ 완료"}),void 0!==r&&s.jsxs("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 rounded-full text-sm font-bold",children:["📊 ",r,"점"]})]})]})}),e.keyPoints.length>0&&s.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl p-6",children:[s.jsxs("button",{onClick:()=>o(!d),className:"w-full flex items-center justify-between text-left",children:[s.jsx("h2",{className:"text-xl font-bold text-yellow-900 dark:text-yellow-300 flex items-center gap-2",children:"💡 핵심 포인트"}),s.jsx("span",{className:"text-2xl",children:d?"▼":"▶"})]}),d&&s.jsx("ul",{className:"mt-4 space-y-2",children:e.keyPoints.map((e,t)=>s.jsxs("li",{className:"flex items-start gap-2 text-yellow-800 dark:text-yellow-400",children:[s.jsx("span",{className:"text-yellow-600 dark:text-yellow-500",children:"✓"}),s.jsx("span",{children:e})]},t))})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 shadow-sm",children:s.jsx("div",{className:"prose dark:prose-invert max-w-none",children:s.jsx(u,{components:{h1:({children:e})=>s.jsx("h1",{className:"text-3xl font-bold mt-8 mb-4 text-gray-900 dark:text-white border-b-2 border-gray-200 dark:border-gray-700 pb-2",children:e}),h2:({children:e})=>s.jsx("h2",{className:"text-2xl font-bold mt-6 mb-3 text-gray-800 dark:text-gray-200",children:e}),h3:({children:e})=>s.jsx("h3",{className:"text-xl font-semibold mt-4 mb-2 text-gray-700 dark:text-gray-300",children:e}),p:({children:e})=>s.jsx("p",{className:"my-4 text-gray-700 dark:text-gray-300 leading-relaxed",children:e}),ul:({children:e})=>s.jsx("ul",{className:"my-4 space-y-2 list-disc list-inside",children:e}),ol:({children:e})=>s.jsx("ol",{className:"my-4 space-y-2 list-decimal list-inside",children:e}),li:({children:e})=>s.jsx("li",{className:"text-gray-700 dark:text-gray-300 ml-4",children:e}),blockquote:({children:e})=>s.jsx("blockquote",{className:"border-l-4 border-blue-500 dark:border-blue-400 pl-4 py-2 my-4 bg-blue-50 dark:bg-blue-900/20 rounded-r",children:e}),code:({children:e,className:t})=>(null==t?void 0:t.includes("language-"))?s.jsx("pre",{className:"bg-gray-900 dark:bg-gray-950 text-gray-100 p-4 rounded-lg overflow-x-auto my-4",children:s.jsx("code",{children:e})}):s.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-1.5 py-0.5 rounded text-sm",children:e}),table:({children:e})=>s.jsx("div",{className:"overflow-x-auto my-4",children:s.jsx("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 border border-gray-300 dark:border-gray-600",children:e})}),thead:({children:e})=>s.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e}),tbody:({children:e})=>s.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:e}),th:({children:e})=>s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:e}),td:({children:e})=>s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:e})},children:e.content})})}),"practice"===e.type&&e.practiceData&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 dark:from-green-900/20 dark:to-teal-900/20 border border-green-200 dark:border-green-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-green-900 dark:text-green-300 mb-4 flex items-center gap-2",children:"🎯 실습 과제"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-400 mb-2",children:"시나리오"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e.practiceData.scenario})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-400 mb-2",children:"📅 날짜"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e.practiceData.date})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-400 mb-2",children:"⏰ 시간"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e.practiceData.time})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-400 mb-2",children:"💡 힌트"}),s.jsx("ul",{className:"space-y-2",children:e.practiceData.hints.map((e,t)=>s.jsxs("li",{className:"flex items-start gap-2 text-gray-700 dark:text-gray-300",children:[s.jsxs("span",{className:"text-green-600 dark:text-green-500",children:[t+1,"."]}),s.jsx("span",{children:e})]},t))})]}),l&&s.jsx("button",{onClick:l,className:"w-full py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition-colors",children:"🎯 실습 시작하기"})]})]}),e.quiz&&i&&s.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-700 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-purple-900 dark:text-purple-300 mb-2",children:"❓ 퀴즈로 학습 점검"}),s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:["총 ",e.quiz.questions.length,"문제 • 합격 기준:"," ",e.quiz.passingScore,"점"]})]}),s.jsx("button",{onClick:i,className:"px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white font-bold rounded-lg transition-colors",children:"퀴즈 시작"})]})}),!t&&s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:n,className:`px-8 py-4 ${m.button} text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105`,children:"✅ 레슨 완료하기"})}),t&&s.jsxs("div",{className:"text-center p-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-xl",children:[s.jsx("p",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:"🎉 이 레슨을 완료했습니다!"}),s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"다음 레슨으로 이동하세요"})]})]})});function io({score:e,passingScore:t,totalQuestions:r,correctCount:a,onRetry:n,onExit:i}){const l=e>=t;return s.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"rounded-xl p-8 text-white text-center shadow-xl "+(l?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-orange-500 to-red-500"),children:[s.jsx("div",{className:"text-6xl mb-4",children:l?"🎉":"📚"}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:l?"축하합니다!":"조금 더 공부가 필요해요"}),s.jsx("p",{className:"text-lg opacity-90",children:l?"퀴즈를 통과했습니다!":"다시 한 번 도전해보세요"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsxs("div",{className:"text-6xl font-bold text-gray-900 dark:text-white mb-2",children:[e,"점"]}),s.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[a," / ",r," 문제 정답"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 overflow-hidden mb-2",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-500 "+(l?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-orange-500 to-red-500"),style:{width:`${e}%`}})}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:"0점"}),s.jsxs("span",{className:"font-bold",children:["합격선: ",t,"점"]}),s.jsx("span",{children:"100점"})]})]}),s.jsxs("div",{className:"rounded-xl p-6 border-2 "+(l?"bg-green-50 dark:bg-green-900/20 border-green-500 dark:border-green-600":"bg-orange-50 dark:bg-orange-900/20 border-orange-500 dark:border-orange-600"),children:[s.jsx("h3",{className:"font-bold text-lg mb-2 "+(l?"text-green-900 dark:text-green-300":"text-orange-900 dark:text-orange-300"),children:l?"✨ 완벽해요!":"💪 다시 도전하세요!"}),s.jsx("p",{className:""+(l?"text-green-800 dark:text-green-400":"text-orange-800 dark:text-orange-400"),children:l?"이 레슨의 핵심 개념을 잘 이해하셨습니다. 다음 레슨으로 넘어가세요!":"레슨 내용을 다시 복습하고 퀴즈에 재도전해보세요. 충분히 합격할 수 있어요!"})]}),s.jsxs("div",{className:"flex gap-4",children:[!l&&s.jsx("button",{onClick:n,className:"flex-1 py-4 bg-orange-500 hover:bg-orange-600 text-white font-bold rounded-xl transition-colors",children:"🔄 다시 시도"}),s.jsx("button",{onClick:i,className:`flex-1 py-4 ${l?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-600"} text-white font-bold rounded-xl transition-colors`,children:l?"다음 레슨으로 →":"레슨으로 돌아가기"})]})]})}const lo=l.memo(function({quiz:e,onComplete:t,onExit:r}){const[n,i]=a.useState(0),[l,d]=a.useState(null),[o,c]=a.useState(!1),[m,x]=a.useState("unanswered"),[g,h]=a.useState([]),u=e.questions[n],p=n===e.questions.length-1,b=e.questions.length,y=a.useMemo(()=>Math.round((n+1)/b*100),[n,b]),j=a.useCallback(()=>{if(null===l)return;const e=l===u.correctAnswer;x(e?"correct":"incorrect"),c(!0),h(t=>[...t,{questionId:u.id,selectedAnswer:l,isCorrect:e}])},[l,u]),f=a.useCallback(()=>{if(p){const e=g.filter(e=>e.isCorrect).length+("correct"===m?1:0),r=Math.round(e/b*100);t(r)}else i(e=>e+1),d(null),c(!1),x("unanswered")},[p,g,m,b,t]),v=a.useCallback(e=>{"unanswered"===m&&d(e)},[m]);return s.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-6 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"❓ 퀴즈"}),s.jsx("button",{onClick:r,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"나가기"})]}),s.jsxs("div",{className:"mb-2 flex items-center justify-between text-sm",children:[s.jsxs("span",{children:["문제 ",n+1," / ",b]}),s.jsxs("span",{children:[y,"% 완료"]})]}),s.jsx("div",{className:"w-full bg-white/20 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"bg-white h-full rounded-full transition-all duration-300",style:{width:`${y}%`}})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 shadow-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:u.question}),s.jsx("div",{className:"space-y-3",children:u.options.map((e,t)=>{const r=l===t,a=t===u.correctAnswer,n="unanswered"!==m;let i="bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600",d="border-gray-200 dark:border-gray-600",o="text-gray-900 dark:text-white";return n?a?(i="bg-green-50 dark:bg-green-900/20",d="border-green-500 dark:border-green-600",o="text-green-900 dark:text-green-300"):r&&!a&&(i="bg-red-50 dark:bg-red-900/20",d="border-red-500 dark:border-red-600",o="text-red-900 dark:text-red-300"):r&&(i="bg-purple-50 dark:bg-purple-900/20",d="border-purple-500 dark:border-purple-600",o="text-purple-900 dark:text-purple-300"),s.jsx("button",{onClick:()=>v(t),disabled:"unanswered"!==m,className:`w-full p-4 rounded-lg border-2 ${i} ${d} ${o} text-left transition-all transform hover:scale-[1.02] disabled:cursor-not-allowed disabled:transform-none`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-white dark:bg-gray-600 flex items-center justify-center font-bold",children:String.fromCharCode(65+t)}),s.jsx("span",{className:"flex-1 font-medium",children:e}),n&&a&&s.jsx("span",{className:"text-2xl",children:"✅"}),n&&r&&!a&&s.jsx("span",{className:"text-2xl",children:"❌"})]})},t)})}),o&&s.jsx("div",{className:"mt-6 p-4 rounded-lg border-2 "+("correct"===m?"bg-green-50 dark:bg-green-900/20 border-green-500 dark:border-green-600":"bg-red-50 dark:bg-red-900/20 border-red-500 dark:border-red-600"),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-3xl",children:"correct"===m?"🎉":"📚"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 "+("correct"===m?"text-green-900 dark:text-green-300":"text-red-900 dark:text-red-300"),children:"correct"===m?"정답입니다!":"아쉽네요..."}),s.jsx("p",{className:""+("correct"===m?"text-green-800 dark:text-green-400":"text-red-800 dark:text-red-400"),children:u.explanation})]})]})}),s.jsx("div",{className:"mt-6 flex justify-end gap-3",children:o?s.jsx("button",{onClick:f,className:"px-8 py-3 bg-purple-500 hover:bg-purple-600 text-white font-bold rounded-lg transition-colors",children:p?"결과 보기":"다음 문제"}):s.jsx("button",{onClick:j,disabled:null===l,className:"px-8 py-3 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors",children:"답변 제출"})})]}),"unanswered"===m&&s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border border-blue-200 dark:border-blue-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300 flex items-start gap-2",children:[s.jsx("span",{className:"text-lg",children:"💡"}),s.jsx("span",{children:'답을 선택한 후 "답변 제출" 버튼을 클릭하세요. 제출 후에는 정답과 해설을 확인할 수 있습니다.'})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["합격 기준: ",e.passingScore,"점"]}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["현재 진행: ",g.length," / ",b," 문제 완료"]})]})})]})});function oo(){const[e,t]=a.useState("courses"),[r,n]=a.useState(null),[i,l]=a.useState(null),[d,o]=a.useState(null),[c,m]=a.useState(0),[x,g]=a.useState([{userId:"demo-user",courseId:"beginner",completedLessons:[],quizScores:{}}]),[h,u]=a.useState(""),[p,b]=a.useState(null),[y,j]=a.useState(null),f=a.useMemo(()=>{if(!r)return null;const e=x.find(e=>e.courseId===r.id);return e?{...e,progressPercentage:eo(r.id,e.completedLessons)}:null},[r,x]),v=a.useCallback(e=>{n(e),t("courses")},[]),k=a.useCallback(e=>{l(e),t("lesson")},[]),N=a.useCallback(()=>{i&&r&&g(e=>{const t=e.map(e=>e.courseId!==r.id||e.completedLessons.includes(i.id)?e:{...e,completedLessons:[...e.completedLessons,i.id]});return t.some(e=>e.courseId===r.id)||t.push({userId:"demo-user",courseId:r.id,completedLessons:[i.id],quizScores:{}}),t})},[i,r]),w=a.useCallback(()=>{t("quiz"),o(null)},[]),S=a.useCallback(e=>{var a;if(!i||!r)return;const s=(null==(a=i.quiz)?void 0:a.questions.length)||0,n=Math.round(e/100*s);o(e),m(n),t("quiz-result"),g(t=>t.map(t=>t.courseId===r.id?{...t,quizScores:{...t.quizScores,[i.id]:e}}:t))},[i,r]),C=a.useCallback(()=>{t("quiz"),o(null)},[]),M=a.useMemo(()=>{return h.trim()?function(e){const t=e.toLowerCase();return to.filter(e=>{var r;return e.term.toLowerCase().includes(t)||e.hanja.toLowerCase().includes(t)||e.shortDescription.toLowerCase().includes(t)||e.detailedDescription.toLowerCase().includes(t)||(null==(r=e.synonyms)?void 0:r.some(e=>e.toLowerCase().includes(t)))})}(h):p?(e=p,to.filter(t=>t.category===e)):to;var e},[h,p]),$=a.useCallback(e=>{if(!r)return!1;const t=x.find(e=>e.courseId===r.id);return(null==t?void 0:t.completedLessons.includes(e))||!1},[r,x]),E=a.useCallback(e=>{if(!r)return;const t=x.find(e=>e.courseId===r.id);return null==t?void 0:t.quizScores[e]},[r,x]);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 to-pink-50 dark:from-gray-900 dark:to-gray-800",children:[s.jsx("header",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-4xl",children:"🎓"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"귀문둔갑 학습센터"}),s.jsx("p",{className:"text-purple-100 text-sm",children:"체계적으로 배우는 귀문둔갑의 모든 것"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{t("courses"),n(null),l(null)},className:"px-4 py-2 rounded-lg transition-colors "+("courses"===e||"lesson"===e||"quiz"===e||"quiz-result"===e?"bg-white text-purple-600 font-bold":"bg-white/20 hover:bg-white/30"),children:"📚 학습 코스"}),s.jsx("button",{onClick:()=>t("glossary"),className:"px-4 py-2 rounded-lg transition-colors "+("glossary"===e?"bg-white text-purple-600 font-bold":"bg-white/20 hover:bg-white/30"),children:"📖 용어사전"})]})]})})}),s.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:["courses"===e&&!r&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"학습 코스 선택"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:Xd.map(e=>{const t=x.find(t=>t.courseId===e.id),r=t?eo(e.id,t.completedLessons):0,a={beginner:"from-green-500 to-emerald-500",intermediate:"from-blue-500 to-cyan-500",advanced:"from-purple-500 to-pink-500"};return s.jsxs("button",{onClick:()=>v(e),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 text-left hover:shadow-xl transition-all transform hover:scale-105",children:[s.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-r ${a[e.level]} flex items-center justify-center text-4xl mb-4 shadow-lg`,children:e.icon}),s.jsx("div",{className:"mb-2",children:s.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-medium text-gray-700 dark:text-gray-300",children:{beginner:"초급",intermediate:"중급",advanced:"고급"}[e.level]})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:["📖 ",e.lessons.length,"개 레슨"]}),s.jsxs("span",{children:["⏱️ ",e.estimatedHours,"시간"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[s.jsx("span",{children:"진행률"}),s.jsxs("span",{children:[r,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:`bg-gradient-to-r ${a[e.level]} h-full rounded-full transition-all`,style:{width:`${r}%`}})})]})]})]},e.id)})})]}),"courses"===e&&r&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("button",{onClick:()=>n(null),className:"text-purple-600 dark:text-purple-400 hover:underline",children:"← 코스 목록으로"})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[s.jsx("span",{className:"text-5xl",children:r.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:r.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:r.description}),f&&s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1",children:[s.jsx("span",{children:"전체 진행률"}),s.jsxs("span",{children:[f.progressPercentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-full rounded-full transition-all",style:{width:`${f.progressPercentage}%`}})})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.completedLessons.length," /"," ",r.lessons.length," 레슨 완료"]})]})]})]}),s.jsx("div",{className:"space-y-3",children:r.lessons.map((e,t)=>{const r=$(e.id),a=E(e.id);return s.jsx("button",{onClick:()=>k(e),className:"w-full bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg p-4 text-left transition-all border-2 border-transparent hover:border-purple-300 dark:hover:border-purple-600",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center font-bold text-gray-700 dark:text-gray-300 border-2 border-gray-200 dark:border-gray-600",children:t+1}),s.jsx("span",{className:"text-2xl",children:{theory:"📖",practice:"🎯",quiz:"❓","case-study":"📋"}[e.type]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["⏱️ ",e.duration,"분"]}),r&&s.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 rounded text-xs font-bold",children:"✅ 완료"}),void 0!==a&&s.jsxs("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 rounded text-xs font-bold",children:[a,"점"]})]})]})},e.id)})})]})]}),"lesson"===e&&i&&r&&s.jsxs("div",{children:[s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:()=>{t("courses"),l(null)},className:"text-purple-600 dark:text-purple-400 hover:underline",children:["← ",r.title,"로 돌아가기"]})}),s.jsx(no,{lesson:i,isCompleted:$(i.id),quizScore:E(i.id),onComplete:N,onStartQuiz:i.quiz?w:void 0})]}),"quiz"===e&&(null==i?void 0:i.quiz)&&s.jsx(lo,{quiz:i.quiz,onComplete:S,onExit:()=>t("lesson")}),"quiz-result"===e&&(null==i?void 0:i.quiz)&&null!==d&&s.jsx(io,{score:d,passingScore:i.quiz.passingScore,totalQuestions:i.quiz.questions.length,correctCount:c,onRetry:C,onExit:()=>t("lesson")}),"glossary"===e&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"📖 귀문둔갑 용어사전"}),s.jsx("input",{type:"text",value:h,onChange:e=>{u(e.target.value),b(null)},placeholder:"용어 검색... (예: 생문, 천영성, 직부)",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500"}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>{b(null),u("")},className:"px-3 py-1 rounded-full text-sm "+(p||h?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600":"bg-purple-500 text-white"),children:"전체"}),Object.entries(so).map(([e,t])=>s.jsxs("button",{onClick:()=>{b(e),u("")},className:"px-3 py-1 rounded-full text-sm "+(p===e?"bg-purple-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:[t.icon," ",t.name]},e))]})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(e=>s.jsx("button",{onClick:()=>j(e),className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 text-left hover:shadow-lg transition-all hover:border-purple-300 dark:hover:border-purple-600",children:s.jsxs("div",{className:"flex items-start gap-3",children:[e.icon&&s.jsx("span",{className:"text-2xl",children:e.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:e.term}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.hanja})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.shortDescription}),s.jsxs("span",{className:"mt-2 inline-block px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs text-gray-600 dark:text-gray-400",children:[so[e.category].icon," ",so[e.category].name]})]})]})},e.id))}),0===M.length&&s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"검색 결과가 없습니다."})]}),y&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>j(null),children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[y.icon&&s.jsx("span",{className:"text-4xl",children:y.icon}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.term}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[y.hanja,y.pronunciation&&` (${y.pronunciation})`]})]})]}),s.jsx("button",{onClick:()=>j(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl",children:"×"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"한 줄 설명"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:y.shortDescription})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"상세 설명"}),s.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 whitespace-pre-line",children:y.detailedDescription})]}),y.examples&&y.examples.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"사용 예시"}),s.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300",children:y.examples.map((e,t)=>s.jsx("li",{children:e},t))})]}),y.relatedTerms&&y.relatedTerms.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"관련 용어"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ao(y.id).map(e=>s.jsx("button",{onClick:()=>j(e),className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 rounded-full text-sm hover:bg-purple-200 dark:hover:bg-purple-900/60",children:e.term},e.id))})]})]})]})})]})]})}var co=(e=>(e.PROSPEROUS="旺",e.FAVORABLE="利",e.FLAT="平",e.WEAK="陷",e.UNFAVORABLE="凶",e))(co||{});const mo={"文昌":{name:"文昌",category:"lucky",nature:"auspicious",element:"金",score:8,description:"문예, 학문, 시험운을 주관하는 길성. 총명하고 문장력이 뛰어남",effects:{positive:["학업 성취","시험 합격","문서운","명예","재능"],negative:["현실성 부족","이상주의"]},keywords:["학문","시험","문서","총명","문장"]},"文曲":{name:"文曲",category:"lucky",nature:"auspicious",element:"水",score:7,description:"문예, 구변, 예술적 재능을 주관. 언변과 표현력이 좋음",effects:{positive:["언변","예술","외교","다재다능","인기"],negative:["산만함","일관성 부족"]},keywords:["언변","예술","외교","구변","재치"]},"左輔":{name:"左輔",category:"lucky",nature:"auspicious",element:"土",score:10,description:"귀인의 도움, 보좌, 협력을 상징. 리더십과 조직력",effects:{positive:["귀인 도움","리더십","조직력","협력","보좌"],negative:["독립성 부족"]},keywords:["귀인","도움","보좌","리더십","협력"]},"右弼":{name:"右弼",category:"lucky",nature:"auspicious",element:"水",score:10,description:"보좌, 협조, 조화를 상징. 인간관계가 원만함",effects:{positive:["인화","협조","조화","중재","보좌"],negative:["주체성 부족"]},keywords:["보좌","협조","조화","인화","중재"]},"天魁":{name:"天魁",category:"lucky",nature:"auspicious",element:"火",score:9,description:"낮의 귀인. 공개적이고 명예로운 도움을 받음",effects:{positive:["귀인 출현","명예","승진","공식 도움","권위"],negative:[]},keywords:["귀인","명예","승진","권위","공식"]},"天鉞":{name:"天鉞",category:"lucky",nature:"auspicious",element:"火",score:9,description:"밤의 귀인. 은밀하고 실질적인 도움을 받음",effects:{positive:["은밀한 도움","위기 해결","실질적 지원","보호"],negative:[]},keywords:["귀인","은밀","도움","보호","해결"]},"祿存":{name:"祿存",category:"lucky",nature:"auspicious",element:"土",score:12,description:"재물, 복록을 상징. 금전운이 좋고 안정적",effects:{positive:["재물","복록","안정","저축","수입"],negative:["인색함","보수적"]},keywords:["재물","복록","안정","저축","수입"]},"擎羊":{name:"擎羊",category:"unlucky",nature:"inauspicious",element:"金",score:-7,description:"형벌, 사고, 수술을 상징. 급하고 충동적",effects:{positive:["추진력","결단력","용기"],negative:["사고","수술","형벌","충동","다툼"]},keywords:["형벌","사고","수술","충동","급함"]},"陀羅":{name:"陀羅",category:"unlucky",nature:"inauspicious",element:"金",score:-6,description:"지연, 끈기, 집착을 상징. 일이 늦어지고 복잡함",effects:{positive:["끈기","인내","신중"],negative:["지연","집착","우유부단","복잡","지체"]},keywords:["지연","집착","끈기","복잡","지체"]},"火星":{name:"火星",category:"unlucky",nature:"inauspicious",element:"火",score:-5,description:"급성, 화재, 폭발을 상징. 성격이 급하고 충동적",effects:{positive:["신속","적극","열정"],negative:["화재","급성","충동","사고","폭발"]},keywords:["급성","화재","충동","신속","열정"]},"鈴星":{name:"鈴星",category:"unlucky",nature:"inauspicious",element:"火",score:-5,description:"서서히 타는 불. 만성적 문제, 불화",effects:{positive:["열정","지속","노력"],negative:["만성병","불화","소송","구설","번뇌"]},keywords:["만성","불화","소송","구설","번뇌"]},"地劫":{name:"地劫",category:"unlucky",nature:"inauspicious",element:"火",score:-8,description:"공허, 손실, 도난을 상징. 재물 손실",effects:{positive:["직관","영감","초월"],negative:["손실","도난","공허","사기","낭비"]},keywords:["손실","도난","공허","사기","낭비"]},"地空":{name:"地空",category:"unlucky",nature:"inauspicious",element:"火",score:-8,description:"허무, 좌절, 실패를 상징. 계획이 무산됨",effects:{positive:["철학","종교","초월"],negative:["실패","좌절","허무","무산","손해"]},keywords:["실패","좌절","허무","무산","손해"]},"化祿":{name:"化祿",category:"transformation",nature:"auspicious",element:"土",score:15,description:"재물운 상승. 수입 증가, 인기, 명예",effects:{positive:["재물 증가","인기","명예","기회","성공"],negative:[]},keywords:["재물","인기","명예","기회","성공"]},"化權":{name:"化權",category:"transformation",nature:"auspicious",element:"木",score:12,description:"권력운 상승. 지위 향상, 리더십, 영향력",effects:{positive:["권력","지위","리더십","영향력","승진"],negative:["고집","독선"]},keywords:["권력","지위","리더십","영향력","승진"]},"化科":{name:"化科",category:"transformation",nature:"auspicious",element:"金",score:10,description:"명예운 상승. 시험 합격, 학문 성취, 명성",effects:{positive:["명예","시험","학문","명성","인정"],negative:[]},keywords:["명예","시험","학문","명성","인정"]},"化忌":{name:"化忌",category:"transformation",nature:"inauspicious",element:"水",score:-10,description:"불운, 장애, 좌절. 계획이 틀어지고 어려움 발생",effects:{positive:[],negative:["불운","장애","좌절","어려움","손실"]},keywords:["불운","장애","좌절","어려움","손실"]},"天官":{name:"天官",category:"year",nature:"auspicious",element:"土",score:6,description:"관록, 지위, 공직운. 승진과 명예",effects:{positive:["승진","지위","관록","명예","공직"],negative:[]},keywords:["승진","지위","관록","명예","공직"]},"天福":{name:"天福",category:"year",nature:"auspicious",element:"土",score:7,description:"복덕, 행복, 평안. 길운이 함께함",effects:{positive:["복덕","행복","평안","길운","안정"],negative:[]},keywords:["복덕","행복","평안","길운","안정"]},"天廚":{name:"天廚",category:"year",nature:"auspicious",element:"土",score:5,description:"의식주, 음식, 생활 안정. 풍족함",effects:{positive:["의식주","음식","생활","풍족","안정"],negative:["식탐"]},keywords:["의식주","음식","생활","풍족","안정"]},"天才":{name:"天才",category:"year",nature:"auspicious",element:"金",score:6,description:"재능, 총명, 영리함. 학습 능력 뛰어남",effects:{positive:["재능","총명","영리","학습","지혜"],negative:[]},keywords:["재능","총명","영리","학습","지혜"]},"天壽":{name:"天壽",category:"year",nature:"auspicious",element:"土",score:8,description:"장수, 건강, 수명. 장수 운이 좋음",effects:{positive:["장수","건강","수명","장생","복"],negative:[]},keywords:["장수","건강","수명","장생","복"]},"天月":{name:"天月",category:"month",nature:"inauspicious",element:"火",score:-4,description:"질병, 건강 문제, 병고. 건강 주의",effects:{positive:[],negative:["질병","건강 문제","병고","통증","허약"]},keywords:["질병","건강","병고","통증","허약"]},"陰煞":{name:"陰煞",category:"month",nature:"inauspicious",element:"水",score:-5,description:"음험, 암해, 은밀한 해. 배신과 모함",effects:{positive:[],negative:["음험","암해","배신","모함","은밀"]},keywords:["음험","암해","배신","모함","은밀"]},"天貴":{name:"天貴",category:"hour",nature:"auspicious",element:"火",score:7,description:"귀인, 명예, 고귀함. 지위가 높아짐",effects:{positive:["귀인","명예","고귀","지위","품격"],negative:[]},keywords:["귀인","명예","고귀","지위","품격"]},"天傷":{name:"天傷",category:"hour",nature:"inauspicious",element:"金",score:-3,description:"상처, 다침, 부상. 사고 조심",effects:{positive:[],negative:["상처","다침","부상","사고","통증"]},keywords:["상처","다침","부상","사고","통증"]},"台輔":{name:"台輔",category:"general",nature:"auspicious",element:"土",score:7,description:"보좌, 도움, 협력. 귀인의 지원",effects:{positive:["보좌","도움","협력","지원","귀인"],negative:[]},keywords:["보좌","도움","협력","지원","귀인"]},"封誥":{name:"封誥",category:"general",nature:"auspicious",element:"土",score:6,description:"명예, 인정, 포상. 공적 인정",effects:{positive:["명예","인정","포상","공적","칭찬"],negative:[]},keywords:["명예","인정","포상","공적","칭찬"]},"恩光":{name:"恩光",category:"general",nature:"auspicious",element:"火",score:5,description:"은덕, 빛, 영광. 좋은 평판",effects:{positive:["은덕","빛","영광","평판","명성"],negative:[]},keywords:["은덕","빛","영광","평판","명성"]},"天巫":{name:"天巫",category:"general",nature:"neutral",element:"水",score:2,description:"종교, 신비, 영감. 직관력 뛰어남",effects:{positive:["종교","신비","영감","직관","감수성"],negative:["미신","환상"]},keywords:["종교","신비","영감","직관","감수성"]},"天德":{name:"天德",category:"general",nature:"auspicious",element:"土",score:8,description:"덕행, 도덕, 선행. 화를 복으로 바꿈",effects:{positive:["덕행","도덕","선행","화해","해결"],negative:[]},keywords:["덕행","도덕","선행","화해","해결"]},"月德":{name:"月德",category:"general",nature:"auspicious",element:"土",score:7,description:"덕행, 평화, 안정. 평온함",effects:{positive:["덕행","평화","안정","평온","조화"],negative:[]},keywords:["덕행","평화","안정","평온","조화"]},"解神":{name:"解神",category:"general",nature:"auspicious",element:"木",score:6,description:"해결, 화해, 풀림. 문제 해결",effects:{positive:["해결","화해","풀림","타협","조정"],negative:[]},keywords:["해결","화해","풀림","타협","조정"]},"天官符":{name:"天官符",category:"general",nature:"inauspicious",element:"金",score:-4,description:"관재, 소송, 법적 문제. 관청 일",effects:{positive:[],negative:["관재","소송","법적 문제","관청","분쟁"]},keywords:["관재","소송","법적","관청","분쟁"]},"孤辰":{name:"孤辰",category:"general",nature:"inauspicious",element:"火",score:-3,description:"고독, 독립, 외로움. 혼자 있음",effects:{positive:["독립","자주","집중"],negative:["고독","외로움","고립","인연 부족"]},keywords:["고독","독립","외로움","고립","인연"]},"寡宿":{name:"寡宿",category:"general",nature:"inauspicious",element:"水",score:-3,description:"고독, 외로움, 배우자 인연 박함",effects:{positive:["집중","독립","사색"],negative:["고독","외로움","배우자 인연 부족","이별"]},keywords:["고독","외로움","배우자","이별","독립"]},"蜚廉":{name:"蜚廉",category:"general",nature:"inauspicious",element:"火",score:-2,description:"분주, 바쁨, 소모. 쉴 틈 없음",effects:{positive:["활동","역동"],negative:["분주","바쁨","소모","피곤","불안"]},keywords:["분주","바쁨","소모","피곤","활동"]},"破碎":{name:"破碎",category:"general",nature:"inauspicious",element:"金",score:-4,description:"파괴, 손상, 깨짐. 물건 파손",effects:{positive:[],negative:["파괴","손상","파손","손실","깨짐"]},keywords:["파괴","손상","파손","손실","깨짐"]},"華蓋":{name:"華蓋",category:"general",nature:"neutral",element:"木",score:1,description:"예술, 고독, 종교. 예술적 재능과 고독",effects:{positive:["예술","재능","종교","철학","사색"],negative:["고독","외로움","고립"]},keywords:["예술","재능","고독","종교","사색"]},"咸池":{name:"咸池",category:"general",nature:"neutral",element:"水",score:0,description:"이성운, 유흥, 색정. 이성 관계 복잡",effects:{positive:["매력","인기","사교"],negative:["유흥","색정","스캔들","문란","유혹"]},keywords:["이성","유흥","매력","스캔들","사교"]},"天馬":{name:"天馬",category:"general",nature:"neutral",element:"火",score:5,description:"변동, 이동, 바쁨을 상징. 활동적이고 역동적",effects:{positive:["이동","변화","활동","기회","역동"],negative:["불안정","분주","정착 어려움"]},keywords:["이동","변동","활동","바쁨","역동"]},"紅鸞":{name:"紅鸞",category:"general",nature:"auspicious",element:"水",score:8,description:"결혼, 연애, 기쁜 일. 혼인운이 좋음",effects:{positive:["결혼","연애","기쁨","인연","만남"],negative:["감정 소모"]},keywords:["결혼","연애","기쁨","인연","혼인"]},"天喜":{name:"天喜",category:"general",nature:"auspicious",element:"水",score:7,description:"기쁨, 경사, 좋은 소식. 희소식이 들림",effects:{positive:["기쁨","경사","희소식","축하","행복"],negative:[]},keywords:["기쁨","경사","희소식","축하","행복"]},"天空":{name:"天空",category:"general",nature:"inauspicious",element:"火",score:-4,description:"공상, 이상, 비현실적. 실속이 없음",effects:{positive:["창의","상상","예술"],negative:["공상","비현실","실속 없음","낭비"]},keywords:["공상","이상","비현실","창의","상상"]},"天刑":{name:"天刑",category:"general",nature:"inauspicious",element:"火",score:-3,description:"형벌, 소송, 법적 문제. 다툼과 분쟁",effects:{positive:["정의감","엄격","원칙"],negative:["소송","형벌","분쟁","다툼","처벌"]},keywords:["소송","형벌","분쟁","다툼","정의"]},"天姚":{name:"天姚",category:"general",nature:"neutral",element:"水",score:0,description:"이성운, 매력, 유혹. 이성 관계가 복잡",effects:{positive:["매력","인기","예술","감수성"],negative:["유혹","스캔들","복잡","애정 문제"]},keywords:["이성","매력","유혹","인기","감수성"]},"天哭":{name:"天哭",category:"general",nature:"inauspicious",element:"金",score:-2,description:"슬픔, 눈물, 이별. 감정적 고통",effects:{positive:["감수성","공감","예술"],negative:["슬픔","눈물","이별","상실","애도"]},keywords:["슬픔","눈물","이별","상실","감정"]},"天虛":{name:"天虛",category:"general",nature:"inauspicious",element:"水",score:-2,description:"허약, 건강 문제, 공허함",effects:{positive:["섬세","조심","신중"],negative:["허약","건강 문제","공허","불안"]},keywords:["허약","건강","공허","불안","섬세"]},"龍池":{name:"龍池",category:"general",nature:"auspicious",element:"水",score:4,description:"예술적 재능, 문예, 미적 감각",effects:{positive:["예술","문예","미적 감각","창의","재능"],negative:[]},keywords:["예술","문예","미감","창의","재능"]},"鳳閣":{name:"鳳閣",category:"general",nature:"auspicious",element:"火",score:4,description:"명예, 지위, 권위. 고상함",effects:{positive:["명예","지위","권위","고상","품격"],negative:[]},keywords:["명예","지위","권위","고상","품격"]}};const xo={"甲":{"祿":"廉貞","權":"破軍","科":"武曲","忌":"太陽"},"乙":{"祿":"天機","權":"天梁","科":"紫微","忌":"太陰"},"丙":{"祿":"天同","權":"天機","科":"天府","忌":"廉貞"},"丁":{"祿":"太陰","權":"天同","科":"天機","忌":"巨門"},"戊":{"祿":"貪狼","權":"太陰","科":"天機","忌":"天機"},"己":{"祿":"武曲","權":"貪狼","科":"天梁","忌":"天府"},"庚":{"祿":"太陽","權":"武曲","科":"太陰","忌":"天同"},"辛":{"祿":"巨門","權":"太陽","科":"天府","忌":"天府"},"壬":{"祿":"天梁","權":"紫微","科":"天府","忌":"武曲"},"癸":{"祿":"破軍","權":"巨門","科":"太陰","忌":"貪狼"}};function go(e,t){const r=t.find(t=>t.star===e);return r?r.transformation:null}const ho={"化祿":20,"化權":15,"化科":12,"化忌":-15},uo=["寅","卯","辰","巳","午","未","申","酉","戌","亥","子","丑"],po=["命宮","兄弟宮","夫妻宮","子女宮","財帛宮","疾厄宮","遷移宮","奴僕宮","官祿宮","田宅宮","福德宮","父母宮"],bo=["紫微","天機","太陽","武曲","天同","廉貞"],yo=["天府","太陰","貪狼","巨門","天相","天梁","七殺","破軍"],jo={0:"金四局",1:"金四局",2:"水二局",3:"水二局",4:"火六局",5:"火六局",6:"木三局",7:"木三局",8:"土五局",9:"土五局"};function fo(e){return uo.indexOf(e)}function vo(e){const t=(e+1)%24;return["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"][Math.floor(t/2)]}function ko(e,t,r,a){const s={},n=fo(e),i=function(e){const t=function(e){return["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"][((e-1984)%10+10)%10]}(e),r=xo[t];return[{star:r.祿,transformation:"化祿"},{star:r.權,transformation:"化權"},{star:r.科,transformation:"化科"},{star:r.忌,transformation:"化忌"}]}(a);return po.forEach((e,a)=>{const l=uo[(n+a)%12],d=t[l]||[],o=[...r[l]||[]];d.forEach(e=>{const t=go(e,i);t&&o.push(t)});const c=function(e,t,r){let a=50;const s={"紫微":20,"天機":10,"太陽":15,"武曲":12,"天同":15,"廉貞":8,"天府":18,"太陰":12,"貪狼":10,"巨門":5,"天相":14,"天梁":16,"七殺":7,"破軍":6};return e.forEach(e=>{a+=s[e]||5;const t=go(e,r);t&&(a+=ho[t])}),t.forEach(e=>{const t=(null==(r=mo[e])?void 0:r.score)||0;var r;a+=t}),Math.max(0,Math.min(100,a))}(d,o,i),m=c>=80?co.PROSPEROUS:c>=60?co.FAVORABLE:c>=40?co.FLAT:c>=20?co.WEAK:co.UNFAVORABLE;s[e]={name:e,branch:l,mainStars:d,auxiliaryStars:o,strength:m,luckyScore:c,description:No(e,d),keywords:wo(e,d)}}),s}function No(e,t,r){let a={"命宮":"당신의 전반적인 성격과 운명을 나타냅니다.","兄弟宮":"형제자매와의 관계, 친구운을 나타냅니다.","夫妻宮":"배우자와의 인연, 결혼운을 나타냅니다.","子女宮":"자녀운, 자녀와의 관계를 나타냅니다.","財帛宮":"재물운, 금전 관리 능력을 나타냅니다.","疾厄宮":"건강 상태, 체질적 특성을 나타냅니다.","遷移宮":"외출운, 이동 및 변화운을 나타냅니다.","奴僕宮":"부하, 친구의 도움을 나타냅니다.","官祿宮":"직업, 사업운, 명예를 나타냅니다.","田宅宮":"부동산운, 가정환경을 나타냅니다.","福德宮":"정신세계, 취미, 여가를 나타냅니다.","父母宮":"부모, 상사와의 관계를 나타냅니다."}[e];return t.length>0&&(a+=` ${t[0]}이(가) 자리하여 영향을 미칩니다.`),a}function wo(e,t){const r=[],a={"紫微":["리더십","권위","고귀함"],"天機":["지혜","계획","변화"],"太陽":["명예","권력","외향적"],"武曲":["재물","용기","결단력"],"天同":["복덕","평화","안정"],"廉貞":["정열","변화","활동적"],"天府":["재물","안정","보수적"],"太陰":["모성","재능","예술"],"貪狼":["욕망","인기","다재다능"],"巨門":["언변","분쟁","탐구"],"天相":["보좌","조화","외교"],"天梁":["수명","해결","노련함"],"七殺":["권력","고독","강함"],"破軍":["파괴","혁신","변화"]};return t.forEach(e=>{a[e]&&r.push(...a[e])}),r.slice(0,5)}function So(e,t,r,a){if(!r)return`${e}세부터 ${e+9}세까지의 운세입니다.`;const s=r.luckyScore>=80?"매우 좋은":r.luckyScore>=60?"좋은":r.luckyScore>=40?"보통의":r.luckyScore>=20?"어려운":"매우 어려운";return`${e}세~${e+9}세는 ${t}(${{"命宮":"인생의 기본 운세","兄弟宮":"형제자매와 친구 관계","夫妻宮":"배우자와 결혼 생활","子女宮":"자녀와의 관계","財帛宮":"재물과 수입","疾厄宮":"건강과 체력","遷移宮":"이동과 변화","奴僕宮":"부하와 친구의 도움","官祿宮":"직업과 명예","田宅宮":"부동산과 가정","福德宮":"정신적 안정과 복","父母宮":"부모와 상사의 도움"}[t]})이 주관하는 시기로 ${s} 운세입니다. ${r.mainStars.join(", ")||"주성 없음"}의 영향을 받습니다.`}function Co(e,t,r,a){const s=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),l=s-r+1,d=(((fo(e)+l-1)%12+n-1)%12+i-1)%12,o=uo[d],c=po[d%12],m=a[c],x=m?m.luckyScore:50,g=["일","월","화","수","목","금","토"][t.getDay()],h=function(e,t,r,a,s,n){if(!n)return`${e}년 ${t}월 ${r}일 (${a})의 운세입니다.`;const i=n.luckyScore>=80?"매우 유리":n.luckyScore>=60?"유리":n.luckyScore>=40?"보통":n.luckyScore>=20?"주의 필요":"불리";return`${t}/${r}(${a})은 ${s}의 영향으로 ${{"命宮":"자신의 능력을 발휘하기","兄弟宮":"친구와 협력하기","夫妻宮":"배우자와 상담하기","子女宮":"자녀와 시간 보내기","財帛宮":"재물 관리 및 계약","疾厄宮":"건강 관리","遷移宮":"이동 및 변화","奴僕宮":"팀워크","官祿宮":"업무 및 명예 활동","田宅宮":"부동산 및 가정 일","福德宮":"휴식 및 취미","父母宮":"윗사람과의 상담"}[s]}에 ${i}합니다. 점수: ${n.luckyScore}점`}(s,n,i,g,c,m),u=m?m.keywords.slice(0,3):["노력","기회","주의"];return{date:`${s}-${String(n).padStart(2,"0")}-${String(i).padStart(2,"0")}`,year:s,month:n,day:i,age:l,palace:c,branch:o,description:h,luckyScore:x,keywords:u,dayOfWeek:g}}function Mo(e){const t=function(e){const t=function(e){return((e-1984)%60+60)%60}(e),r=Math.floor(t/10)%10;return jo[r]||"水二局"}(e.year),r=function(e,t){let r=0;r=(r+e-1)%12;const a=vo(t);return r=(r-["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"].indexOf(a)+12)%12,uo[r]}(e.month,e.hour),a=function(e,t){let r=0;r=(r+e-1)%12;const a=vo(t);return r=(r+["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"].indexOf(a))%12,uo[r]}(e.month,e.hour),s=function(e){const t={};uo.forEach(e=>{t[e]=[]});const r=fo(e);bo.forEach((e,a)=>{t[uo[(r-a+12)%12]].push(e)});const a=(6-r+12)%12;return yo.forEach((e,r)=>{t[uo[(a+r)%12]].push(e)}),t}(function(e,t,r){const a={"水二局":0,"木三局":2,"金四局":4,"土五局":5,"火六局":6}[r],s=(e-1)%12,n=Math.floor(t/2);return uo[(a+s+n)%12]}(e.day,e.hour,t)),n=function(e,t,r,a,s){const n={};uo.forEach(e=>{n[e]=[]});const i=fo(e),l=t%10,d=t%12,o=(r+1)%12,c=(i+s/2)%12;n[uo[Math.floor(c)]].push("文昌");const m=(i-s/2+12)%12;n[uo[Math.floor(m)]].push("文曲"),n[uo[(i+1)%12]].push("左輔"),n[uo[(i-1+12)%12]].push("右弼"),n[uo[(i+[1,0,11,11,1,0,7,8,7,8][l])%12]].push("天魁"),n[uo[(i+[7,8,2,2,4,4,10,10,4,4][l])%12]].push("天鉞");const x=[2,3,5,6,5,6,8,9,11,0];n[uo[(i+x[l])%12]].push("祿存"),n[uo[(i+x[l]+1)%12]].push("擎羊"),n[uo[(i+x[l]-1+12)%12]].push("陀羅"),n[uo[(i+[2,3,1,0,11,9,8,7,6,5,4,3][d])%12]].push("火星"),n[uo[(i+[3,2,4,5,6,8,9,10,11,0,1,2][d])%12]].push("鈴星"),n[uo[(i+(11-d)+12)%12]].push("地劫"),n[uo[(i+d+1)%12]].push("地空"),n[uo[(i+[2,11,8,5,2,11,8,5,2,11,8,5][d])%12]].push("天馬");const g=(3-d+12)%12;n[uo[g]].push("紅鸞"),n[uo[(g+6)%12]].push("天喜"),n[uo[(i+d)%12]].push("天空"),n[uo[(10+d)%12]].push("天刑"),n[uo[(7-d+12)%12]].push("天姚"),n[uo[(i+5)%12]].push("天哭"),n[uo[(i+11)%12]].push("天虛"),n[uo[(i+4)%12]].push("龍池"),n[uo[(i+10)%12]].push("鳳閣");const h=d;({0:["天官"],1:["天福"],2:["天廚"],3:["天才"],4:["天壽"],5:["天官"],6:["天福"],7:["天廚"],8:["天才"],9:["天壽"],10:["天官"],11:["天福"]}[h]||[]).forEach(e=>{n[uo[h]].push(e)}),({0:["天月"],1:["陰煞"],2:["天月"],3:["陰煞"],4:["天月"],5:["陰煞"],6:["天月"],7:["陰煞"],8:["天月"],9:["陰煞"],10:["天月"],11:["陰煞"]}[o]||[]).forEach(e=>{n[uo[o]].push(e)});const u=fo(vo(s));return n[uo[u]].push("天貴"),n[uo[(u+6)%12]].push("天傷"),["台輔","封誥","恩光","天巫","天德","月德","解神"].forEach((e,t)=>{n[uo[(i+l+2*t)%12]].push(e)}),n[uo[(i+[2,2,5,5,5,8,8,8,11,11,11,2][d])%12]].push("孤辰"),n[uo[(i+[10,10,1,1,1,4,4,4,7,7,7,10][d])%12]].push("寡宿"),n[uo[(i+d+5)%12]].push("蜚廉"),n[uo[(i+d+9)%12]].push("破碎"),n[uo[(i+d+4)%12]].push("華蓋"),n[uo[(i+d-1+12)%12]].push("咸池"),n}(r,e.year,e.month,e.day,e.hour),i=ko(r,s,n,e.year),l=function(e,t,r,a,s){const n=[],i={"水二局":2,"木三局":3,"金四局":4,"土五局":5,"火六局":6}[t],l=r%10%2==0,d="male"===a&&l||"female"===a&&!l,o=fo(e);for(let c=0;c<8;c++){const e=i+10*c,t=(o+c*(d?1:-1)+12)%12,r=uo[t],a=po[t%12],l=s[a],m=l?l.luckyScore:50,x=So(e,a,l),g=l?l.keywords.slice(0,3):["변화","성장","도전"];n.push({startAge:e,endAge:e+9,palace:a,branch:r,direction:d?"forward":"backward",description:x,luckyScore:m,keywords:g})}return n}(r,t,e.year,e.gender,i),d=(new Date).getFullYear(),o=(new Date).getMonth()+1,c=function(e,t,r,a){const s=t-r+1,n=(fo(e)+s-1)%12,i=uo[n],l=po[n%12],d=a[l],o=d?d.luckyScore:50,c=function(e,t,r,a){if(!a)return`${e}년 ${t}세의 운세입니다.`;const s=a.luckyScore>=80?"매우 좋습니다":a.luckyScore>=60?"좋습니다":a.luckyScore>=40?"보통입니다":a.luckyScore>=20?"주의가 필요합니다":"매우 조심해야 합니다";return`${e}년 (${t}세)은 ${r}의 영향을 받아 ${{"命宮":"자신의 운명에 집중하는","兄弟宮":"형제와 친구의 도움을 받는","夫妻宮":"배우자와 관계가 중요한","子女宮":"자녀와의 인연이 있는","財帛宮":"재물과 수입이 주목받는","疾厄宮":"건강 관리가 중요한","遷移宮":"변화와 이동이 많은","奴僕宮":"사람들의 도움을 받는","官祿宮":"직업과 명예가 빛나는","田宅宮":"가정과 부동산이 안정되는","福德宮":"정신적으로 충만한","父母宮":"부모와 상사의 은혜를 받는"}[r]} 해입니다. 올해 운세는 ${s}.`}(t,s,l,d);return{year:t,age:s,palace:l,branch:i,description:c,luckyScore:o,keywords:d?d.keywords.slice(0,3):["기회","변화","성장"]}}(r,d,e.year,i),m=function(e,t,r,a,s){const n=t-a+1,i=((fo(e)+n-1)%12+r-1)%12,l=uo[i],d=po[i%12],o=s[d],c=o?o.luckyScore:50,m=function(e,t,r,a,s){if(!s)return`${e}년 ${t}월의 운세입니다.`;return`${e}년 ${t}월 (${r}세)은 ${a}의 영향을 받는 달입니다. 이번 달 운세는 ${s.luckyScore>=80?"매우 좋습니다":s.luckyScore>=60?"좋습니다":s.luckyScore>=40?"보통입니다":s.luckyScore>=20?"주의가 필요합니다":"매우 조심해야 합니다"}.`}(t,r,n,d,o);return{year:t,month:r,age:n,palace:d,branch:l,description:m,luckyScore:c,keywords:o?o.keywords.slice(0,3):["변화","기회","노력"]}}(r,d,o,e.year,i),x=function(e,t,r){const a=new Date,s=[];for(let n=0;n<7;n++){const i=new Date(a);i.setDate(a.getDate()+n);const l=Co(e,i,t,r);s.push(l)}return s}(r,e.year,i),g=function(e){const t=e["命宮"],r=e["財帛宮"],a=e["官祿宮"],s=Math.round((t.luckyScore+r.luckyScore+a.luckyScore)/3);return{score:s,level:s>=80?"excellent":s>=60?"good":s>=40?"neutral":s>=20?"bad":"terrible",summary:"자미두수 명반 분석 결과입니다. 14주성의 배치를 통해 전반적인 운세를 분석했습니다.",strengths:["명궁의 길성 배치","재물궁의 안정적 구조"],weaknesses:["일부 궁위의 흉성 영향"],advice:["길한 방위로 이동하세요","재물 관리에 주의하세요"],luckyElements:["긍정적 사고","적극적 행동"],unluckyElements:["과도한 욕심","성급한 판단"]}}(i),h={personality:i["命宮"].keywords,career:i["官祿宮"].keywords,wealth:i["財帛宮"].keywords,health:i["疾厄宮"].keywords,relationships:i["兄弟宮"].keywords};return{birthInfo:{...e,lunar:e.lunar||!1},bureau:t,palaces:i,lifePalaceBranch:r,bodyPalaceBranch:a,majorFortunes:l,yearlyFortune:c,monthlyFortune:m,weeklyFortunes:x,overallFortune:g,characteristics:h}}function $o({chart:e,selectedPalace:t,onPalaceSelect:r}){const a={};["命宮","兄弟宮","夫妻宮","子女宮","財帛宮","疾厄宮","遷移宮","奴僕宮","官祿宮","田宅宮","福德宮","父母宮"].forEach(t=>{const r=e.palaces[t];a[r.branch]=t});const n=e=>e>=80?"text-green-700 dark:text-green-300":e>=60?"text-blue-700 dark:text-blue-300":e>=40?"text-gray-700 dark:text-gray-300":e>=20?"text-orange-700 dark:text-orange-300":"text-red-700 dark:text-red-300",i=(a,i)=>{if(!a)return s.jsx("div",{className:"aspect-square flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:"⭐"}),s.jsx("div",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:"자미두수"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"紫微斗數"})]})});const l=e.palaces[a],d=t===a,o="命宮"===a;return s.jsx("button",{onClick:()=>r(a),className:`\n          aspect-square w-full p-3 rounded-lg border-2 transition-all duration-200\n          ${c=l.luckyScore,c>=80?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":c>=60?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700":c>=40?"bg-gray-50 dark:bg-gray-800/20 border-gray-300 dark:border-gray-700":c>=20?"bg-orange-50 dark:bg-orange-900/20 border-orange-300 dark:border-orange-700":"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700"}\n          ${d?"ring-4 ring-purple-500 scale-105 shadow-xl":"hover:scale-102 hover:shadow-lg"}\n          ${o?"ring-2 ring-purple-300 dark:ring-purple-700":""}\n        `,children:s.jsxs("div",{className:"h-full flex flex-col justify-between text-left",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:i}),o&&s.jsx("span",{className:"text-xs bg-purple-200 dark:bg-purple-800 text-purple-700 dark:text-purple-300 px-1.5 py-0.5 rounded",children:"命"})]}),s.jsx("h3",{className:`text-sm font-bold mb-2 ${n(l.luckyScore)}`,children:a})]}),s.jsxs("div",{className:"flex-1 space-y-0.5",children:[l.mainStars.slice(0,2).map((e,t)=>s.jsxs("div",{className:"text-xs font-medium text-purple-700 dark:text-purple-300 truncate",children:["★ ",e]},t)),l.mainStars.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",l.mainStars.length-2,"성"]})]}),s.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:l.strength}),s.jsx("span",{className:`text-sm font-bold ${n(l.luckyScore)}`,children:l.luckyScore})]})})]})});var c};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"📊 12궁위 명반"}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["명궁: ",e.lifePalaceBranch," · 신궁: ",e.bodyPalaceBranch]})]}),s.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-4xl mx-auto",children:[["巳","午","未","申"],["辰","","","酉"],["卯","","","戌"],["寅","丑","子","亥"]].map((e,t)=>e.map((e,r)=>{const n=e?a[e]:null;return s.jsx("div",{children:i(n,e)},`${t}-${r}`)}))}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-center gap-6 flex-wrap text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-green-100 dark:bg-green-900/30 border-2 border-green-300 dark:border-green-700 rounded"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"대길 (80+)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-100 dark:bg-blue-900/30 border-2 border-blue-300 dark:border-blue-700 rounded"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"길 (60+)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-gray-100 dark:bg-gray-800/30 border-2 border-gray-300 dark:border-gray-700 rounded"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"평 (40+)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-orange-100 dark:bg-orange-900/30 border-2 border-orange-300 dark:border-orange-700 rounded"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"흉 (20+)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-700 rounded"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"대흉 (20-)"})]})]})}),!t&&s.jsx("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"💡 궁위를 클릭하면 상세 정보를 확인할 수 있습니다"})]})}function Eo({palace:e,onClose:t}){l.useEffect(()=>{const e=e=>{"Escape"===e.key&&t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]);return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 "+(r=e.luckyScore,r>=80?"bg-green-50 dark:bg-green-900/20":r>=60?"bg-blue-50 dark:bg-blue-900/20":r>=40?"bg-gray-50 dark:bg-gray-800/20":r>=20?"bg-orange-50 dark:bg-orange-900/20":"bg-red-50 dark:bg-red-900/20"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:e.name}),s.jsx("span",{className:"text-lg text-gray-500 dark:text-gray-400",children:e.branch})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"닫기",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"길흉 점수"}),s.jsx("div",{className:`text-5xl font-bold ${(e=>e>=80?"text-green-600 dark:text-green-400":e>=60?"text-blue-600 dark:text-blue-400":e>=40?"text-gray-600 dark:text-gray-400":e>=20?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400")(e.luckyScore)}`,children:e.luckyScore})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"상태"}),s.jsx("div",{className:"text-2xl font-bold text-gray-700 dark:text-gray-200",children:(e=>e>=80?"대길 🌟":e>=60?"길 ✨":e>=40?"평 ⚖️":e>=20?"흉 ⚠️":"대흉 ❌")(e.luckyScore)}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:e.strength})]})]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:"📝 해석"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:e.description})]}),e.mainStars.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"⭐ 주성 (主星)"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:e.mainStars.map((e,t)=>s.jsxs("div",{className:"px-4 py-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"⭐"}),s.jsx("div",{className:"text-sm font-bold text-purple-700 dark:text-purple-300",children:e})]},t))})]}),e.auxiliaryStars.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"✨ 보조성"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.auxiliaryStars.map((e,t)=>s.jsx("span",{className:"px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-full text-sm text-blue-700 dark:text-blue-300",children:e},t))})]}),e.keywords.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"🔑 키워드"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.keywords.map((e,t)=>s.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 border border-purple-200 dark:border-purple-800 rounded-full text-sm font-medium text-purple-700 dark:text-purple-300",children:e},t))})]}),0===e.mainStars.length&&0===e.auxiliaryStars.length&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-4xl mb-4",children:"🌙"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"이 궁위에는 주요 별자리가 배치되지 않았습니다"})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:s.jsx("button",{onClick:t,className:"w-full px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"닫기"})})]})});var r}function Do({chart:e,customer:t,selectedPalace:r,onClose:n}){const[i,l]=a.useState([{role:"system",content:t?`안녕하세요 ${t.name}님! 저는 자미두수 AI 상담사입니다. ${t.name}님의 명반(命盤) 정보를 바탕으로 맞춤 조언을 드리겠습니다. 궁금하신 점을 물어보세요! ⭐`:"안녕하세요! 저는 자미두수 AI 상담사입니다. 궁금하신 점을 물어보세요! ⭐",timestamp:new Date}]),[d,o]=a.useState(""),[c,m]=a.useState(!1),[x,g]=a.useState("general"),h=a.useRef(null),u=a.useRef(null),[p,b]=a.useState(new Map),[y,j]=a.useState(!1),f=a.useRef(null);a.useEffect(()=>{var e;null==(e=h.current)||e.scrollIntoView({behavior:"smooth"})},[i]),a.useEffect(()=>{var e;null==(e=u.current)||e.focus()},[]),a.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;f.current=new e,f.current.lang="ko-KR",f.current.continuous=!1,f.current.interimResults=!1,f.current.onresult=e=>{const t=e.results[0][0].transcript;o(t),j(!1)},f.current.onerror=e=>{j(!1)},f.current.onend=()=>{j(!1)}}return()=>{f.current&&f.current.stop()}},[]);const v=async a=>{try{const s=(a=>{var s,n;const i=t?`[고객 정보]\n- 이름: ${t.name}\n- 생년월일시: ${t.birth_date} ${t.birth_time||"시간 미상"}\n- 성별: ${"male"===t.gender?"남성":"female"===t.gender?"여성":"미상"}\n- 음양력: ${"lunar"===t.lunar_solar?"음력":"양력"}\n`:"",l=r?`[선택한 궁위: ${r}]\n- 궁위: ${r} (${e.palaces[r].branch})\n- 주성: ${e.palaces[r].mainStars.join(", ")||"없음"}\n- 보조성: ${e.palaces[r].auxiliaryStars.join(", ")||"없음"}\n- 길흉점수: ${e.palaces[r].luckyScore}점\n- 해석: ${e.palaces[r].description}\n`:"";return`당신은 자미두수(紫微斗數) 전문가입니다. 아래 명반 정보를 바탕으로 사용자의 질문에 친절하게 답변해주세요.\n\n${i}\n[명반 기본 정보]\n- 납음오행 국수: ${e.bureau}\n- 명궁: ${e.lifePalaceBranch} (${e.palaces["命宮"].mainStars.join(", ")||"없음"})\n- 신궁: ${e.bodyPalaceBranch}\n- 종합 점수: ${e.overallFortune.score}점 (${e.overallFortune.level})\n- 종합 평가: ${e.overallFortune.summary}\n\n[12궁위 주성 배치]\n${Object.entries(e.palaces).map(([e,t])=>`- ${e} (${t.branch}): ${t.mainStars.join(", ")||"없음"} (${t.luckyScore}점)`).join("\n")}\n\n[사화성 (四化星) - 생년 천간에 따른 특별한 영향]\n${Object.entries(e.palaces).filter(([e,t])=>t.auxiliaryStars.some(e=>["化祿","化權","化科","化忌"].includes(e))).map(([e,t])=>{const r=t.auxiliaryStars.filter(e=>["化祿","化權","化科","化忌"].includes(e)),a=t.mainStars.find(e=>r.length>0);return r.map(t=>`- ${e}: ${a}이(가) ${t} (재물운/권력운/명예운/불운에 큰 영향)`).join("\n")}).join("\n")}\n\n[주요 특성]\n- 성격: ${e.characteristics.personality.join(", ")}\n- 직업: ${e.characteristics.career.join(", ")}\n- 재물: ${e.characteristics.wealth.join(", ")}\n- 건강: ${e.characteristics.health.join(", ")}\n- 인간관계: ${e.characteristics.relationships.join(", ")}\n\n[대운 (大運) - 10년 단위 운세]\n- 현재 대운: ${(null==(s=e.majorFortunes.find(t=>e.yearlyFortune.age>=t.startAge&&e.yearlyFortune.age<=t.endAge))?void 0:s.description)||"대운 정보 없음"}\n- 대운 점수: ${(null==(n=e.majorFortunes.find(t=>e.yearlyFortune.age>=t.startAge&&e.yearlyFortune.age<=t.endAge))?void 0:n.luckyScore)||50}점\n\n[유년운 (流年) - 올해 운세]\n- ${e.yearlyFortune.description}\n- 올해 점수: ${e.yearlyFortune.luckyScore}점\n- 올해 키워드: ${e.yearlyFortune.keywords.join(", ")}\n\n[유월운 (流月運) - 이번 달 운세]\n- ${e.monthlyFortune.description}\n- 이번 달 점수: ${e.monthlyFortune.luckyScore}점\n- 이번 달 키워드: ${e.monthlyFortune.keywords.join(", ")}\n\n[이번 주 일진 (7일 운세)]\n${e.weeklyFortunes.map(e=>`- ${e.date} (${e.dayOfWeek}요일): ${e.palace} ${e.branch} | ${e.luckyScore}점 | ${e.keywords.join(", ")}\n  → ${e.description}`).join("\n")}\n\n⚠️ 중요: 사용자가 "이번 주 중 언제", "어느 날", "무슨 요일" 같은 질문을 하면 위 7일 일진 정보를 바탕으로 구체적인 날짜와 요일을 추천해주세요!\n- 점수가 가장 높은 날을 1순위로 추천\n- 해당 날짜의 궁위 특성과 키워드를 언급\n- 피해야 할 낮은 점수의 날도 함께 알려주기\n\n${l}\n[상담 목적]\n${{general:"종합 운세",career:"직업/관록궁 중심 분석",wealth:"재물/재백궁 중심 분석",health:"건강/질액궁 중심 분석",relationship:"인간관계/노복궁 중심 분석",marriage:"결혼/부부궁 중심 분석",family:"가족/부모궁/형제궁 중심 분석",study:"학업/자녀궁 중심 분석"}[x]}\n\n[사용자 질문]\n${a}\n\n[답변 지침]\n🚫 절대 금지 사항:\n1. 영어, 중국어, 일본어, 러시아어, 아랍어 등 모든 외국어 사용 절대 금지\n2. 마크다운 형식(#, **, -, 등) 사용 금지\n3. <think> 태그나 사고 과정 노출 금지\n4. 불완전한 문장 금지 (예: "에 이 있어", "과 점수가" 등)\n\n✅ 반드시 지킬 사항:\n1. 오직 한국어만 사용 (숫자, 문장부호 포함)\n2. 궁위 이름은 반드시 완전하게 표현\n   - 좋은 예: "관록궁이 57점으로 낮아 경쟁에서 어려움을 겪을 수 있어요"\n   - 나쁜 예: "공식운이 57점으로 낮아 에 이 있어" (불완전)\n3. 친구처럼 자연스럽고 친근한 말투 (~해요, ~네요, ~거든요)\n4. 구체적인 궁위명, 주성명, 점수를 정확히 언급\n5. 💡 현실적이고 균형 잡힌 조언 제공:\n   - 좋은 점만 강조하지 말고 주의할 점도 반드시 언급\n   - 낮은 점수(60점 미만)는 솔직하게 알려주고 극복 방법 제시\n   - "~하면 좋아요"가 아닌 "~해야 합니다", "~주의하세요" 같은 구체적 표현 사용\n6. 📋 구체적인 실천 방법 제시:\n   - 추상적인 조언 금지 (예: "노력하세요" ❌)\n   - 구체적인 행동 지침 제공 (예: "매일 아침 30분 운동하세요" ✅)\n   - 시기, 방법, 대상을 명확히 제시\n7. ⚠️ 위험 요소 명확히 전달:\n   - 점수가 낮은 궁위는 어떤 문제가 생길 수 있는지 구체적으로 설명\n   - 피해야 할 행동, 조심해야 할 시기를 명시\n8. 200자 내외로 간결하게 답변\n9. 같은 질문이라도 매번 다양한 표현과 관점으로 답변\n\n📋 12궁위 정확한 표현:\n명궁, 부모궁, 복덕궁, 전택궁, 관록궁, 노복궁, 천이궁, 질액궁, 재백궁, 자녀궁, 부부궁, 형제궁`})(a),n=await fetch("/api/v1/ziwei/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s,userQuestion:a})});if(!n.ok)return k(a);const i=await n.json();return i.success&&i.response?i.response:k(a)}catch(s){return k(a)}},k=r=>{const a=r.toLowerCase(),s=e.palaces["命宮"],n=e.palaces["官祿宮"],i=e.palaces["財帛宮"],l=e.palaces["夫妻宮"];return a.includes("직업")||a.includes("일")||a.includes("사업")||a.includes("진로")?`${(null==t?void 0:t.name)||"당신"}님의 관록궁(직업운)은 ${n.branch}에 ${n.mainStars.join(", ")}이 있어요. ${n.description} 점수는 ${n.luckyScore}점으로, ${n.luckyScore>=60?"좋은 직업운":"노력이 필요한 시기"}입니다. ${e.characteristics.career.slice(0,2).join(", ")} 분야가 잘 맞을 거예요! 💼`:a.includes("재물")||a.includes("돈")||a.includes("재산")||a.includes("금전")?`${(null==t?void 0:t.name)||"당신"}님의 재백궁(재물운)은 ${i.branch}에 ${i.mainStars.join(", ")}이 있어요. ${i.description} 점수는 ${i.luckyScore}점입니다. ${e.characteristics.wealth.slice(0,2).join(", ")} 방식으로 재물을 모으시면 좋을 것 같아요! 💰`:a.includes("결혼")||a.includes("배우자")||a.includes("부부")?`${(null==t?void 0:t.name)||"당신"}님의 부부궁(결혼운)은 ${l.branch}에 ${l.mainStars.join(", ")}이 있어요. ${l.description} 점수는 ${l.luckyScore}점으로, ${l.luckyScore>=60?"좋은 인연":"서로 이해하고 노력하는 관계"}가 예상됩니다. 💕`:a.includes("성격")||a.includes("특징")||a.includes("나는")?`${(null==t?void 0:t.name)||"당신"}님의 명궁은 ${s.branch}에 ${s.mainStars.join(", ")}이 있어요. ${s.description} 성격적으로는 ${e.characteristics.personality.slice(0,3).join(", ")} 특징이 있으시네요. 이런 성격이 ${(null==t?void 0:t.name)||"당신"}님의 큰 강점이에요! ⭐`:`${(null==t?void 0:t.name)||"당신"}님의 명반을 보면, ${e.bureau}이며 종합 점수는 ${e.overallFortune.score}점입니다. ${e.overallFortune.summary} 더 구체적으로 궁금한 점을 말씀해 주시면 자세히 답변드릴게요! ⭐`},N=async()=>{if(!d.trim()||c)return;const e={role:"user",content:d.trim(),timestamp:new Date};l(t=>[...t,e]),o(""),m(!0);try{const t={role:"assistant",content:await v(e.content),timestamp:new Date};l(e=>[...e,t])}catch{const e={role:"assistant",content:"죄송합니다. 응답 생성 중 오류가 발생했습니다. 다시 시도해주세요.",timestamp:new Date};l(t=>[...t,e])}finally{m(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-center md:items-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-3xl md:rounded-3xl shadow-2xl w-full max-w-5xl h-[85vh] md:h-[750px] flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 rounded-t-3xl md:rounded-t-3xl flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-2xl",children:"⭐"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"자미두수 AI 상담사"}),s.jsx("p",{className:"text-purple-100 text-xs",children:(null==t?void 0:t.name)&&`${t.name}님 전문 상담`})]})]}),s.jsx("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:s.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-x-auto",children:s.jsx("div",{className:"flex gap-2 flex-nowrap",children:[{key:"general",icon:"⭐",label:"종합"},{key:"career",icon:"💼",label:"직업"},{key:"wealth",icon:"💰",label:"재물"},{key:"health",icon:"❤️",label:"건강"},{key:"relationship",icon:"👥",label:"인간관계"},{key:"marriage",icon:"💕",label:"결혼"},{key:"family",icon:"🏠",label:"가족"},{key:"study",icon:"📚",label:"학업"}].map(e=>s.jsxs("button",{onClick:()=>g(e.key),className:"px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all "+(x===e.key?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"),children:[e.icon," ",e.label]},e.key))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map((e,t)=>s.jsx("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:s.jsxs("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 "+("user"===e.role?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"assistant"===e.role?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100":"bg-purple-50 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300 border border-purple-200 dark:border-purple-800"),children:[s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),s.jsx("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},t)),c&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl px-4 py-3",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),s.jsx("div",{ref:h})]}),1===i.length&&s.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"💡 이런 질문을 해보세요:"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:{general:["내 운세가 어떤가요?","가장 강한 궁위는 어디인가요?","주의해야 할 점은 무엇인가요?","내 명반의 특징은 뭔가요?"],career:["어떤 직업이 잘 맞나요?","사업을 시작해도 될까요?","이직 시기가 언제인가요?","승진 운은 어떤가요?"],wealth:["재물운이 좋은가요?","투자를 해도 될까요?","돈은 어떻게 모아야 하나요?","재물이 언제 들어오나요?"],health:["건강은 어떤가요?","조심해야 할 질병은 뭐가 있나요?","건강을 위해 뭘 해야 하나요?","수술 시기는 언제가 좋나요?"],relationship:["대인관계가 어떤가요?","좋은 인연을 만날 수 있나요?","친구 관계는 어떤가요?","사람들과 어떻게 지내야 하나요?"],marriage:["결혼운이 좋은가요?","배우자는 어떤 사람인가요?","결혼 시기는 언제인가요?","부부 관계는 어떤가요?"],family:["가족운이 어떤가요?","부모님과의 관계는?","형제자매 관계는 어떤가요?","가정에서 주의할 점은?"],study:["학업운이 좋은가요?","어떤 공부가 잘 맞나요?","시험 운은 어떤가요?","학업에서 주의할 점은?"]}[x].map((e,t)=>s.jsx("button",{onClick:()=>o(e),className:"text-xs px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e},t))})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{f.current?y?(f.current.stop(),j(!1)):(f.current.start(),j(!0)):alert("이 브라우저는 음성 인식을 지원하지 않습니다.")},disabled:c,className:`px-3 py-3 rounded-full font-medium transition-all shadow-md ${y?"bg-red-500 text-white animate-pulse-strong":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"} disabled:opacity-50`,title:"음성 입력",children:y?"🎤":"🎙️"}),s.jsx("input",{ref:u,type:"text",value:d,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},placeholder:y?"음성 인식 중...":"질문을 입력하세요...",disabled:c,className:"flex-1 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-full text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),s.jsx("button",{onClick:N,disabled:!d.trim()||c,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-medium hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:"전송"})]}),y&&s.jsx("div",{className:"mt-2 text-center text-sm text-red-500 dark:text-red-400 animate-pulse",children:"🎤 듣고 있습니다... 말씀해주세요"})]})]})})}function To({onClose:e}){const[t,r]=a.useState("what");return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[85vh] overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"📖 자미두수 초보자 가이드"}),s.jsx("p",{className:"text-purple-100",children:"송나라 시대부터 전해지는 정밀 운명 분석 시스템"})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"닫기",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>r("what"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("what"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"자미두수란?"}),s.jsx("button",{onClick:()=>r("how"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("how"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"사용 방법"}),s.jsx("button",{onClick:()=>r("terms"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("terms"===t?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"용어 설명"})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(85vh-200px)]",children:["what"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"⭐ 자미두수란?"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:["자미두수(紫微斗數)는 ",s.jsx("strong",{children:"태어난 생년월일시"}),"를 바탕으로",s.jsx("strong",{children:" 14개의 주요 별(14주성)"}),"과 ",s.jsx("strong",{children:"12개의 인생 영역(12궁위)"}),"을 분석하는 중국 송나라 시대부터 전해지는 운명 분석 시스템입니다."]}),s.jsx("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:["💡 ",s.jsx("strong",{children:"마치 당신만의 우주 지도처럼"}),", 태어날 때 하늘의 별자리 배치를 기록하여 성격, 직업, 재물, 건강, 결혼 등 인생 전반을 깊이 있게 이해할 수 있습니다."]})})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"💡 무엇을 알 수 있나요?"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🎭"}),s.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-1",children:"성격과 재능"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"타고난 성격, 강점, 약점, 인생에서 중요하게 여기는 가치관"})]}),s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"💼"}),s.jsx("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-1",children:"직업과 재물"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"적성에 맞는 직업, 재물운, 사업 성공 가능성"})]}),s.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"💑"}),s.jsx("h4",{className:"font-bold text-pink-900 dark:text-pink-300 mb-1",children:"결혼과 인간관계"}),s.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-400",children:"배우자 운, 연애 스타일, 가족 관계, 친구 관계"})]}),s.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"❤️"}),s.jsx("h4",{className:"font-bold text-red-900 dark:text-red-300 mb-1",children:"건강과 수명"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:"주의해야 할 건강 문제, 체질, 장수 가능성"})]}),s.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"📅"}),s.jsx("h4",{className:"font-bold text-orange-900 dark:text-orange-300 mb-1",children:"대운과 유년운"}),s.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:"10년 단위 인생 변화, 매년 달라지는 운세"})]}),s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🏠"}),s.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-1",children:"자녀와 가정"}),s.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"자녀 운, 가정 생활, 부모와의 인연"})]})]})]}),s.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"⚠️ 참고사항"}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-1",children:[s.jsxs("li",{children:["• 자미두수는 태어난 시간이 ",s.jsx("strong",{children:"매우 중요"}),"합니다. 정확한 시간을 입력하세요."]}),s.jsx("li",{children:"• 음력/양력 구분이 중요합니다. 1985년 이후 출생자는 대부분 양력입니다."}),s.jsxs("li",{children:["• 운명은 고정된 것이 아니라 ",s.jsx("strong",{children:"참고하고 준비하는 도구"}),"입니다."]}),s.jsx("li",{children:"• 부정적인 해석도 나올 수 있지만, 미리 알고 대비하면 피해갈 수 있습니다!"})]})]})]}),"how"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"📱 화면 구성 및 사용법"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"고객 선택하기"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:['화면 상단의 "고객 선택하기" 버튼을 눌러 ',s.jsx("strong",{children:"생년월일시"}),"를 입력하세요. 이미 등록된 고객이 있다면 선택만 하면 됩니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 음력/양력 구분이 매우 중요합니다! 1985년 이후 출생자는 대부분 양력입니다. 태어난 시간(시, 분)을 정확히 입력할수록 분석이 정확해집니다."]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"기본 명반 정보 확인"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["첫 번째 카드에서 ",s.jsx("strong",{children:"납음오행 국수"}),", ",s.jsx("strong",{children:"명궁"}),", ",s.jsx("strong",{children:"신궁"}),"을 확인할 수 있습니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"명궁(命宮)"}),": 당신의 핵심 성격과 인생 방향"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"신궁(身宮)"}),": 중년 이후 인생에서 중요해지는 영역"]}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"납음오행 국수"}),": 수국(2), 목국(3), 금국(4), 토국(5), 화국(6) 중 하나"]})]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"종합 운세 점수"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["두 번째 카드에서 ",s.jsx("strong",{children:"종합 점수(0-100점)"}),"를 확인할 수 있습니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 70점 이상이면 매우 좋은 명반입니다. 50-70점은 평균, 50점 미만은 주의가 필요하지만 노력으로 극복 가능합니다!"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"4"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"주요 특성 5가지"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["세 번째 카드에서 ",s.jsx("strong",{children:"성격, 직업, 재물, 건강, 인간관계"})," 5가지 핵심 특성을 확인하세요."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 각 영역별로 3-5개씩 키워드가 나옵니다. 자신과 맞는지 체크하고, 특히 ",s.jsx("strong",{children:"직업"})," 부분은 진로 선택 시 참고하세요!"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"올해 운세 (유년운)"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["네 번째 섹션에서 ",s.jsx("strong",{children:"올해(2025년) 운세"}),"를 확인할 수 있습니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 올해 주관 궁위가 어디인지 확인하세요. 예를 들어 재백궁이면 재물운이, 관록궁이면 직장운이 특히 중요한 해입니다!"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"6"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"현재 대운 (10년 운세)"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["대운은 ",s.jsx("strong",{children:"10년 단위"}),"로 변화하는 큰 흐름입니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsx("p",{children:"💡 예: 20-29세는 복덕궁 대운 → 학업과 자기계발의 시기"}),s.jsx("p",{children:"💡 예: 30-39세는 재백궁 대운 → 재물 형성의 중요한 시기"}),s.jsxs("p",{children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 현재 대운의 키워드를 보고 이 10년 동안 집중할 분야를 파악하세요!"]})]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"7"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"12궁위 차트 보기"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["하단의 ",s.jsx("strong",{children:"12궁위 차트"}),"를 보면 각 인생 영역에 어떤 별들이 있는지 시각적으로 확인할 수 있습니다."]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["💡 ",s.jsx("strong",{children:"실전 팁:"})," 각 궁위를 클릭하면 상세 해석이 나옵니다. 특히 관심 있는 영역(부부궁, 재백궁, 관록궁 등)을 중점적으로 확인하세요!"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"8"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"AI 상담사에게 질문하기"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:'"🤖 AI 상담 시작하기" 버튼을 누르면 궁금한 점을 자유롭게 물어볼 수 있습니다.'}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[s.jsx("p",{children:'💡 예시 질문: "제 명반에서 재물운이 어떤가요?"'}),s.jsx("p",{children:'💡 예시 질문: "올해 전직하려고 하는데 괜찮을까요?"'}),s.jsx("p",{children:'💡 예시 질문: "결혼 운은 언제쯤 좋아지나요?"'}),s.jsx("p",{children:'💡 예시 질문: "자녀 궁에 있는 별들은 무슨 의미인가요?"'})]})]})]})]})]}),s.jsxs("section",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[s.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3 text-lg",children:"🎯 실전 활용 시나리오"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"🎓"}),s.jsx("span",{children:"시나리오 1: 진로 결정 (20대 초반)"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"}),' 주요 특성 카드에서 "직업" 섹션 확인',s.jsx("br",{}),s.jsx("strong",{children:"2단계:"})," 관록궁(사업/직장 운)을 클릭하여 상세 보기",s.jsx("br",{}),s.jsx("strong",{children:"3단계:"})," 현재 대운의 키워드 확인 (학업? 창업? 취업?)",s.jsx("br",{}),s.jsx("strong",{children:"4단계:"}),' AI에게 "제 명반으로 공무원과 민간 기업 중 어디가 더 맞나요?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"5단계:"})," 종합하여 진로 방향 설정"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"💑"}),s.jsx("span",{children:"시나리오 2: 결혼 시기 및 배우자 타입"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"})," 부부궁을 클릭하여 어떤 별들이 있는지 확인",s.jsx("br",{}),s.jsx("strong",{children:"2단계:"}),' 주요 특성에서 "인간관계" 확인',s.jsx("br",{}),s.jsx("strong",{children:"3단계:"})," 유년운과 대운에서 부부궁이 활성화되는 시기 찾기",s.jsx("br",{}),s.jsx("strong",{children:"4단계:"}),' AI에게 "제 명반으로 볼 때 배우자는 어떤 성격일까요?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"5단계:"})," 복덕궁과 부부궁을 교차 확인 (이상형과 실제 배우자 타입)"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"💰"}),s.jsx("span",{children:"시나리오 3: 재테크 및 사업 타이밍"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"})," 재백궁(재물 운)을 클릭하여 상세 확인",s.jsx("br",{}),s.jsx("strong",{children:"2단계:"}),' 주요 특성에서 "재물" 키워드 확인',s.jsx("br",{}),s.jsx("strong",{children:"3단계:"})," 올해 운세(유년운)의 점수가 60점 이상인지 체크",s.jsx("br",{}),s.jsx("strong",{children:"4단계:"})," 현재 대운이 재물과 관련된 궁위인지 확인",s.jsx("br",{}),s.jsx("strong",{children:"5단계:"}),' AI에게 "지금 창업하면 성공할 수 있을까요?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"6단계:"})," 부정적이라면 언제가 좋을지 재문의"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[s.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx("span",{children:"❤️"}),s.jsx("span",{children:"시나리오 4: 건강 관리 포인트"})]}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"1단계:"})," 질액궁(건강 운)을 클릭하여 주의사항 확인",s.jsx("br",{}),s.jsx("strong",{children:"2단계:"}),' 주요 특성에서 "건강" 섹션의 키워드 정리',s.jsx("br",{}),s.jsx("strong",{children:"3단계:"})," 약한 부위(예: 호흡기, 소화기 등) 파악",s.jsx("br",{}),s.jsx("strong",{children:"4단계:"}),' AI에게 "제 명반으로 볼 때 어떤 건강 검진을 받아야 하나요?" 질문',s.jsx("br",{}),s.jsx("strong",{children:"5단계:"})," 매년 건강검진 항목 선택 시 참고"]})]})]})]}),s.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"⚠️ 자주 묻는 질문 (FAQ)"}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-2",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"종합 점수가 낮게 나왔어요. 인생이 불행한 건가요?"}),s.jsx("br",{}),"A: 아닙니다! 점수는 타고난 명반의 강약일 뿐입니다. 노력, 환경, 교육으로 얼마든지 극복 가능합니다. 오히려 약한 부분을 미리 알고 대비하는 것이 더 유리합니다!"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"태어난 시간을 정확히 모르는데 어떻게 하나요?"}),s.jsx("br",{}),'A: 부모님께 확인하거나, 출생증명서를 확인하세요. 정말 모르겠다면 오전(09:00), 정오(12:00), 오후(15:00) 등 추정 시간으로 입력 후 "명궁"이 자신과 맞는지 확인해보세요.']})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"12궁위가 너무 복잡해요. 어디부터 봐야 하나요?"}),s.jsx("br",{}),"A: 처음엔 ",s.jsx("strong",{children:"명궁, 재백궁, 관록궁, 부부궁"})," 4가지만 집중하세요. 이것만으로도 성격, 재물, 직업, 결혼을 파악할 수 있습니다!"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"대운과 유년운은 뭐가 다른가요?"}),s.jsx("br",{}),"A: ",s.jsx("strong",{children:"대운"}),"은 10년 단위 큰 흐름(예: 20대 전반은 학업 시기),",s.jsx("strong",{children:"유년운"}),"은 그 해만의 운세(예: 2025년은 직장 변동의 해)입니다."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"flex-shrink-0 font-bold",children:"Q:"}),s.jsxs("div",{children:[s.jsx("strong",{children:"음력 생일인데 양력으로 입력하면 결과가 달라지나요?"}),s.jsx("br",{}),"A: 네! 완전히 다른 결과가 나옵니다. 반드시 정확하게 선택하세요. 1985년 이후 출생자는 대부분 양력입니다."]})]})]})]})]}),"terms"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"⭐ 14주성(十四主星) - 14개의 주요 별"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"자미두수의 핵심! 14개의 별이 12궁위에 배치되어 운명을 결정합니다."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-purple-700 dark:text-purple-400 mb-2",children:"👑 자미성계 (紫微星系) - 황제의 별들"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-2",children:[s.jsxs("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded",children:[s.jsx("strong",{children:"자미성"}),": 황제, 리더십, 고귀함"]}),s.jsxs("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded",children:[s.jsx("strong",{children:"천기성"}),": 지혜, 계획, 참모"]}),s.jsxs("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded",children:[s.jsx("strong",{children:"태양성"}),": 명예, 권위, 남성성"]}),s.jsxs("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded",children:[s.jsx("strong",{children:"무곡성"}),": 재물, 식복, 풍요"]}),s.jsxs("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded",children:[s.jsx("strong",{children:"천동성"}),": 복덕, 평화, 안정"]}),s.jsxs("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded",children:[s.jsx("strong",{children:"염정성"}),": 재능, 예술, 매력"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-700 dark:text-blue-400 mb-2",children:"💼 천부성계 (天府星系) - 재상의 별들"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-2",children:[s.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[s.jsx("strong",{children:"천부성"}),": 재물, 보수적, 안정"]}),s.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[s.jsx("strong",{children:"태음성"}),": 모성, 부드러움, 여성성"]}),s.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[s.jsx("strong",{children:"탐랑성"}),": 욕망, 다재다능, 변화"]}),s.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[s.jsx("strong",{children:"거문성"}),": 문학, 예술, 섬세함"]}),s.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[s.jsx("strong",{children:"천상성"}),": 희생, 박애, 종교"]}),s.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[s.jsx("strong",{children:"천량성"}),": 장수, 의료, 봉사"]}),s.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[s.jsx("strong",{children:"칠살성"}),": 무예, 용맹, 강단"]}),s.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[s.jsx("strong",{children:"파군성"}),": 개척, 파괴, 혁신"]})]})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"🏛️ 12궁위(十二宮位) - 12개 인생 영역"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"인생의 12가지 중요한 영역을 나타냅니다."}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-green-900 dark:text-green-300 mb-1",children:"1. 명궁 (命宮)"}),s.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"성격, 외모, 인생 방향의 핵심"})]}),s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300 mb-1",children:"2. 부모궁 (父母宮)"}),s.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:"부모 인연, 유년기 환경"})]}),s.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-purple-900 dark:text-purple-300 mb-1",children:"3. 복덕궁 (福德宮)"}),s.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-400",children:"행복, 취미, 정신세계"})]}),s.jsxs("div",{className:"p-3 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-pink-900 dark:text-pink-300 mb-1",children:"4. 전택궁 (田宅宮)"}),s.jsx("div",{className:"text-sm text-pink-700 dark:text-pink-400",children:"부동산 운, 집안 환경"})]}),s.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-1",children:"5. 관록궁 (官祿宮)"}),s.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:"직업, 사회적 지위, 사업운"})]}),s.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-red-900 dark:text-red-300 mb-1",children:"6. 노복궁 (奴僕宮)"}),s.jsx("div",{className:"text-sm text-red-700 dark:text-red-400",children:"친구, 부하, 동료 관계"})]}),s.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-orange-900 dark:text-orange-300 mb-1",children:"7. 천이궁 (遷移宮)"}),s.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-400",children:"외지 생활, 여행, 이동 운"})]}),s.jsxs("div",{className:"p-3 bg-teal-50 dark:bg-teal-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-teal-900 dark:text-teal-300 mb-1",children:"8. 질액궁 (疾厄宮)"}),s.jsx("div",{className:"text-sm text-teal-700 dark:text-teal-400",children:"건강, 질병, 체질"})]}),s.jsxs("div",{className:"p-3 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-cyan-900 dark:text-cyan-300 mb-1",children:"9. 재백궁 (財帛宮)"}),s.jsx("div",{className:"text-sm text-cyan-700 dark:text-cyan-400",children:"재물 운, 돈 관리 능력"})]}),s.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-1",children:"10. 자녀궁 (子女宮)"}),s.jsx("div",{className:"text-sm text-indigo-700 dark:text-indigo-400",children:"자녀 운, 자녀와의 인연"})]}),s.jsxs("div",{className:"p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-rose-900 dark:text-rose-300 mb-1",children:"11. 부부궁 (夫妻宮)"}),s.jsx("div",{className:"text-sm text-rose-700 dark:text-rose-400",children:"결혼 운, 배우자 타입"})]}),s.jsxs("div",{className:"p-3 bg-lime-50 dark:bg-lime-900/20 rounded-lg",children:[s.jsx("div",{className:"font-bold text-lime-900 dark:text-lime-300 mb-1",children:"12. 형제궁 (兄弟宮)"}),s.jsx("div",{className:"text-sm text-lime-700 dark:text-lime-400",children:"형제자매, 동업자 관계"})]})]})]}),s.jsxs("section",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-2",children:"🎯 간단히 기억하세요!"}),s.jsxs("ul",{className:"text-sm text-purple-700 dark:text-purple-400 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"명궁"}),": 나 자신 (성격/외모)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"재백궁"}),": 돈 (재물운)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"관록궁"}),": 직업 (사회적 성공)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"부부궁"}),": 결혼 (배우자/연애)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"복덕궁"}),": 행복 (정신적 만족)"]})]}),s.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-3",children:"💡 이 5가지만 제대로 이해해도 자미두수의 80%는 알 수 있습니다!"})]})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:s.jsx("button",{onClick:e,className:"w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl",children:"시작하기"})})]})})}function Fo(){const[e,t]=a.useState(null),[r,n]=a.useState(null),[i,l]=a.useState(!1),[d,o]=a.useState(null),[c,m]=a.useState(!1),[x,g]=a.useState(!1),[h,u]=a.useState(null),[p,b]=a.useState(null),[y,j]=a.useState(!1);a.useEffect(()=>{j((null==h?void 0:h.id)!==(null==p?void 0:p.id))},[h,p]),a.useEffect(()=>{if(p)try{l(!0),o(null);const e=p.birth_date.split("-").map(Number),r=p.birth_time?p.birth_time.split(":").map(Number):[12,0],a=Mo({year:e[0],month:e[1],day:e[2],hour:r[0],minute:r[1],lunar:"lunar"===p.lunar_solar,gender:p.gender});t(a)}catch(e){const t=e instanceof Error?e.message:"알 수 없는 오류";o(t)}finally{l(!1)}else t(null)},[p]);return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 p-4 md:p-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("header",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex justify-center items-center gap-4 mb-2",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 dark:from-purple-400 dark:via-pink-400 dark:to-blue-400",children:"⭐ 자미두수"}),s.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors flex items-center gap-2",children:[s.jsx("span",{children:"📖"}),s.jsx("span",{children:"초보자 가이드"})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"紫微斗數 - 14주성과 12궁위로 보는 정밀 운명 분석"})]}),s.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap",children:[s.jsx(vn,{selectedCustomer:h,onSelect:u,showAddButton:!0}),h&&s.jsx("button",{onClick:()=>{b(h),j(!1)},disabled:!y,className:"px-6 py-2 rounded-lg font-medium transition-all "+(y?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl animate-pulse":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-500 cursor-not-allowed"),children:y?"✨ 적용하기":"✓ 적용됨"})]}),p&&s.jsxs("div",{className:"mt-4 text-sm text-center text-gray-600 dark:text-gray-400",children:["💡 현재 ",s.jsx("strong",{children:p.name}),"님 (",p.birth_date," ",p.birth_time,")의 명반(命盤)을 분석 중입니다"]}),h&&y&&s.jsxs("div",{className:"mt-4 text-sm text-center text-orange-600 dark:text-orange-400 font-medium",children:["⚠️ ",s.jsx("strong",{children:h.name}),'님으로 변경하려면 "적용하기" 버튼을 클릭하세요']})]})}),i&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"명반(命盤) 계산 중..."})]}),d&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),s.jsx("h3",{className:"text-xl font-bold text-red-700 dark:text-red-300 mb-2",children:"차트 계산 실패"}),s.jsx("p",{className:"text-red-600 dark:text-red-400",children:d})]}),!i&&!e&&!d&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-12 text-center",children:[s.jsx("div",{className:"text-6xl mb-6",children:"🔮"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"고객을 선택해주세요"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:['위의 "고객 선택하기" 버튼을 클릭하여',s.jsx("br",{}),"명반(命盤) 분석을 시작하세요"]}),s.jsxs("div",{className:"space-y-3 text-left max-w-md mx-auto",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:"⭐"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200",children:"14주성"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"자미성계 6성 + 천부성계 8성의 별자리 배치"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🏛️"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200",children:"12궁위"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"명궁, 부부궁, 재백궁 등 인생 12개 영역 분석"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:"📅"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200",children:"대운·유년운"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"10년 단위 대운과 1년 단위 유년운 예측"})]})]})]})]}),!i&&e&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"📊 기본 명반 정보"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"납음오행 국수"}),s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.bureau})]}),s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"명궁(命宮)"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.lifePalaceBranch})]}),s.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"신궁(身宮)"}),s.jsx("div",{className:"text-2xl font-bold text-pink-600 dark:text-pink-400",children:e.bodyPalaceBranch})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"🌟 종합 운세"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"text-6xl font-bold "+(e.overallFortune.score>=80?"text-green-500":e.overallFortune.score>=60?"text-blue-500":e.overallFortune.score>=40?"text-yellow-500":e.overallFortune.score>=20?"text-orange-500":"text-red-500"),children:e.overallFortune.score}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"종합 점수"}),s.jsx("div",{className:"text-xl font-bold text-gray-700 dark:text-gray-200",children:"excellent"===e.overallFortune.level?"대길 🌟":"good"===e.overallFortune.level?"길 ✨":"neutral"===e.overallFortune.level?"평 ⚖️":"bad"===e.overallFortune.level?"흉 ⚠️":"대흉 ❌"})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:e.overallFortune.summary})]}),s.jsxs("div",{className:"space-y-4",children:[e.overallFortune.strengths.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-green-600 dark:text-green-400 mb-2",children:"✅ 강점"}),s.jsx("ul",{className:"space-y-1",children:e.overallFortune.strengths.map((e,t)=>s.jsx("li",{className:"text-sm text-gray-700 dark:text-gray-300 pl-4 relative before:content-['•'] before:absolute before:left-0",children:e},t))})]}),e.overallFortune.weaknesses.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-red-600 dark:text-red-400 mb-2",children:"⚠️ 약점"}),s.jsx("ul",{className:"space-y-1",children:e.overallFortune.weaknesses.map((e,t)=>s.jsx("li",{className:"text-sm text-gray-700 dark:text-gray-300 pl-4 relative before:content-['•'] before:absolute before:left-0",children:e},t))})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"💎 주요 특성"}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-purple-600 dark:text-purple-400 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"🎭"}),s.jsx("span",{children:"성격"})]}),s.jsx("ul",{className:"space-y-2",children:e.characteristics.personality.map((e,t)=>s.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:["• ",e]},t))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"💼"}),s.jsx("span",{children:"직업"})]}),s.jsx("ul",{className:"space-y-2",children:e.characteristics.career.map((e,t)=>s.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:["• ",e]},t))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-green-600 dark:text-green-400 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"💰"}),s.jsx("span",{children:"재물"})]}),s.jsx("ul",{className:"space-y-2",children:e.characteristics.wealth.map((e,t)=>s.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:["• ",e]},t))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"❤️"}),s.jsx("span",{children:"건강"})]}),s.jsx("ul",{className:"space-y-2",children:e.characteristics.health.map((e,t)=>s.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:["• ",e]},t))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-pink-600 dark:text-pink-400 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"👥"}),s.jsx("span",{children:"인간관계"})]}),s.jsx("ul",{className:"space-y-2",children:e.characteristics.relationships.map((e,t)=>s.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:["• ",e]},t))})]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl shadow-lg p-6 border border-orange-200 dark:border-orange-800",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[s.jsx("span",{children:"📅"}),s.jsx("span",{children:"올해 운세 (流年運)"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.yearlyFortune.year,"년 (",e.yearlyFortune.age,"세)"]}),s.jsxs("div",{className:"text-3xl font-bold "+(e.yearlyFortune.luckyScore>=80?"text-green-600":e.yearlyFortune.luckyScore>=60?"text-blue-600":e.yearlyFortune.luckyScore>=40?"text-yellow-600":e.yearlyFortune.luckyScore>=20?"text-orange-600":"text-red-600"),children:[e.yearlyFortune.luckyScore,"점"]})]}),s.jsxs("div",{className:"p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["주관 궁위: ",s.jsx("strong",{className:"text-orange-600 dark:text-orange-400",children:e.yearlyFortune.palace})," (",e.yearlyFortune.branch,")"]}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:e.yearlyFortune.description})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.yearlyFortune.keywords.map((e,t)=>s.jsxs("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-xs font-medium",children:["#",e]},t))})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl shadow-lg p-6 border border-purple-200 dark:border-purple-800",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[s.jsx("span",{children:"🌊"}),s.jsx("span",{children:"현재 대운 (大運)"})]}),(()=>{const t=e.majorFortunes.find(t=>e.yearlyFortune.age>=t.startAge&&e.yearlyFortune.age<=t.endAge);return t?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.startAge,"세 ~ ",t.endAge,"세"]}),s.jsxs("div",{className:"text-3xl font-bold "+(t.luckyScore>=80?"text-green-600":t.luckyScore>=60?"text-blue-600":t.luckyScore>=40?"text-yellow-600":t.luckyScore>=20?"text-orange-600":"text-red-600"),children:[t.luckyScore,"점"]})]}),s.jsxs("div",{className:"p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["주관 궁위: ",s.jsx("strong",{className:"text-purple-600 dark:text-purple-400",children:t.palace})," (",t.branch,")"]}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:t.description})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((e,t)=>s.jsxs("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-xs font-medium",children:["#",e]},t))})]}):s.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"대운 정보를 찾을 수 없습니다"})})()]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-100 via-pink-100 to-blue-100 dark:from-purple-900/20 dark:via-pink-900/20 dark:to-blue-900/20 rounded-xl shadow-lg p-6 text-center border border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-4xl mb-3",children:"🤖⭐"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"AI 상담사와 대화하기"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["자미두수 AI가 ",(null==p?void 0:p.name)||"당신","님의 명반을 분석하여",s.jsx("br",{}),"직업, 재물, 건강, 결혼 등 궁금한 점을 자세히 답변해드립니다"]}),s.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-bold hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:"🤖 AI 상담 시작하기"})]}),s.jsx($o,{chart:e,selectedPalace:r,onPalaceSelect:n}),r&&s.jsx(Eo,{palace:e.palaces[r],onClose:()=>n(null)}),c&&s.jsx(Do,{chart:e,customer:p,selectedPalace:r,onClose:()=>m(!1)})]}),x&&s.jsx(To,{onClose:()=>g(!1)})]})})}const _o=[{id:"major-0",name:"The Fool",nameKo:"바보",number:0,suit:"major",uprightMeaning:"새로운 시작, 순수함, 자유로운 정신, 모험심",reversedMeaning:"무모함, 경솔함, 무책임, 준비 부족",uprightKeywords:["새로운 시작","순수","자유","모험","가능성"],reversedKeywords:["무모함","경솔함","무책임","망설임"],symbolism:"절벽 끝에 서서 앞으로 나아가는 청년. 무한한 가능성과 새로운 시작을 상징",description:"인생의 새로운 여정의 시작. 두려움 없이 앞으로 나아가는 순수한 영혼",imagePath:"/tarot/00-TheFool.jpg"},{id:"major-1",name:"The Magician",nameKo:"마법사",number:1,suit:"major",uprightMeaning:"창조력, 의지력, 능력 발휘, 집중력",reversedMeaning:"조작, 속임수, 능력 낭비, 자신감 부족",uprightKeywords:["창조","의지","능력","집중","행동"],reversedKeywords:["조작","속임수","낭비","미숙"],symbolism:"한 손은 하늘, 한 손은 땅을 가리키며 네 가지 원소를 다루는 마법사",description:"가진 능력과 자원을 활용하여 목표를 달성할 수 있는 힘",imagePath:"/tarot/01-TheMagician.jpg"},{id:"major-2",name:"The High Priestess",nameKo:"여사제",number:2,suit:"major",uprightMeaning:"직관, 내면의 지혜, 비밀, 신비",reversedMeaning:"직관 무시, 비밀 폭로, 내면의 혼란",uprightKeywords:["직관","지혜","신비","내면","잠재의식"],reversedKeywords:["직관 무시","비밀","혼란","표면적"],symbolism:"달의 여신 앞에 앉아 내면의 지혜를 담고 있는 여사제",description:"내면의 목소리에 귀 기울이고 직관을 따를 때",imagePath:"/tarot/02-TheHighPriestess.jpg"},{id:"major-3",name:"The Empress",nameKo:"여황제",number:3,suit:"major",uprightMeaning:"풍요, 창조성, 모성, 자연과의 조화",reversedMeaning:"의존, 창조력 부족, 과잉보호",uprightKeywords:["풍요","창조","모성","자연","성장"],reversedKeywords:["의존","부족","과잉","정체"],symbolism:"풍요로운 자연 속에서 왕좌에 앉은 임신한 여황제",description:"창조적 에너지와 풍요로움이 넘치는 시기",imagePath:"/tarot/03-TheEmpress.jpg"},{id:"major-4",name:"The Emperor",nameKo:"황제",number:4,suit:"major",uprightMeaning:"권위, 구조, 리더십, 안정성",reversedMeaning:"독재, 경직, 통제 과잉, 권위 남용",uprightKeywords:["권위","리더십","구조","안정","질서"],reversedKeywords:["독재","경직","통제","남용"],symbolism:"왕좌에 앉아 세상을 다스리는 황제",description:"질서와 구조를 세우고 리더십을 발휘할 때",imagePath:"/tarot/04-TheEmperor.jpg"},{id:"major-5",name:"The Hierophant",nameKo:"교황",number:5,suit:"major",uprightMeaning:"전통, 영적 지혜, 교육, 멘토",reversedMeaning:"반항, 비정통, 독단적 신념",uprightKeywords:["전통","영성","교육","멘토","도덕"],reversedKeywords:["반항","비정통","독단","자유"],symbolism:"종교적 권위를 상징하는 교황",description:"전통적 가치와 영적 가르침을 따를 때",imagePath:"/tarot/05-TheHierophant.jpg"},{id:"major-6",name:"The Lovers",nameKo:"연인",number:6,suit:"major",uprightMeaning:"사랑, 조화, 선택, 관계",reversedMeaning:"불화, 선택의 어려움, 관계 문제",uprightKeywords:["사랑","조화","선택","관계","합일"],reversedKeywords:["불화","갈등","선택 실패","분리"],symbolism:"천사의 축복 아래 서 있는 연인",description:"중요한 선택의 순간, 사랑과 조화의 관계",imagePath:"/tarot/06-TheLovers.jpg"},{id:"major-7",name:"The Chariot",nameKo:"전차",number:7,suit:"major",uprightMeaning:"승리, 의지력, 통제, 전진",reversedMeaning:"방향 상실, 통제 불능, 좌절",uprightKeywords:["승리","의지","통제","전진","결단"],reversedKeywords:["방향 상실","통제 불능","좌절","정체"],symbolism:"두 마리의 스핑크스가 끄는 전차를 모는 전사",description:"강한 의지로 장애물을 극복하고 목표를 향해 전진",imagePath:"/tarot/07-TheChariot.jpg"},{id:"major-8",name:"Strength",nameKo:"힘",number:8,suit:"major",uprightMeaning:"내면의 힘, 용기, 인내, 부드러운 통제",reversedMeaning:"자신감 부족, 자기 의심, 약함",uprightKeywords:["내면의 힘","용기","인내","자제","연민"],reversedKeywords:["약함","의심","두려움","통제 불능"],symbolism:"사자의 입을 부드럽게 다루는 여성",description:"내면의 힘과 용기로 어려움을 극복",imagePath:"/tarot/08-Strength.jpg"},{id:"major-9",name:"The Hermit",nameKo:"은둔자",number:9,suit:"major",uprightMeaning:"내면 탐구, 고독, 영적 깨달음, 성찰",reversedMeaning:"고립, 외로움, 철수, 깨달음 거부",uprightKeywords:["내면 탐구","고독","지혜","성찰","깨달음"],reversedKeywords:["고립","외로움","거부","미성숙"],symbolism:"등불을 들고 홀로 산을 오르는 노인",description:"홀로 내면을 성찰하고 진리를 찾는 시간",imagePath:"/tarot/09-TheHermit.jpg"},{id:"major-10",name:"Wheel of Fortune",nameKo:"운명의 수레바퀴",number:10,suit:"major",uprightMeaning:"변화, 순환, 운명, 행운",reversedMeaning:"불운, 저항, 정체, 변화 거부",uprightKeywords:["변화","순환","운명","행운","전환점"],reversedKeywords:["불운","정체","저항","역행"],symbolism:"끊임없이 돌아가는 운명의 바퀴",description:"인생의 순환과 변화, 새로운 기회의 도래",imagePath:"/tarot/10-WheelOfFortune.jpg"},{id:"major-11",name:"Justice",nameKo:"정의",number:11,suit:"major",uprightMeaning:"공정함, 진실, 법칙, 균형",reversedMeaning:"불공정, 편견, 책임 회피",uprightKeywords:["공정","진실","법칙","균형","책임"],reversedKeywords:["불공정","편견","회피","불균형"],symbolism:"칼과 저울을 든 정의의 여신",description:"공정한 판단과 진실이 드러나는 때",imagePath:"/tarot/11-Justice.jpg"},{id:"major-12",name:"The Hanged Man",nameKo:"매달린 남자",number:12,suit:"major",uprightMeaning:"희생, 관점의 전환, 포기, 수용",reversedMeaning:"무의미한 희생, 저항, 지연",uprightKeywords:["희생","관점 전환","포기","수용","새로운 시각"],reversedKeywords:["무의미한 희생","저항","지연","집착"],symbolism:"거꾸로 매달린 남자가 평온한 표정을 짓고 있음",description:"관점을 바꾸면 새로운 깨달음을 얻는 시기",imagePath:"/tarot/12-TheHangedMan.jpg"},{id:"major-13",name:"Death",nameKo:"죽음",number:13,suit:"major",uprightMeaning:"변화, 끝과 시작, 변신, 재탄생",reversedMeaning:"변화 저항, 정체, 두려움",uprightKeywords:["변화","끝","시작","변신","재탄생"],reversedKeywords:["저항","정체","두려움","집착"],symbolism:"말을 탄 해골 기사 - 변화와 변신의 상징",description:"낡은 것이 끝나고 새로운 것이 시작되는 전환점",imagePath:"/tarot/13-Death.jpg"},{id:"major-14",name:"Temperance",nameKo:"절제",number:14,suit:"major",uprightMeaning:"균형, 조화, 절제, 치유",reversedMeaning:"불균형, 과잉, 조화 부족",uprightKeywords:["균형","조화","절제","치유","중용"],reversedKeywords:["불균형","과잉","부족","불협화"],symbolism:"두 잔 사이에 물을 부어 섞는 천사",description:"균형과 조화를 이루며 중용의 길을 가는 때",imagePath:"/tarot/14-Temperance.jpg"},{id:"major-15",name:"The Devil",nameKo:"악마",number:15,suit:"major",uprightMeaning:"속박, 유혹, 중독, 물질주의",reversedMeaning:"해방, 자유, 깨달음, 중독 극복",uprightKeywords:["속박","유혹","중독","물질","탐욕"],reversedKeywords:["해방","자유","깨달음","극복"],symbolism:"쇠사슬에 묶인 남녀와 악마",description:"물질적 욕망이나 중독에서 벗어날 필요가 있음",imagePath:"/tarot/15-TheDevil.jpg"},{id:"major-16",name:"The Tower",nameKo:"탑",number:16,suit:"major",uprightMeaning:"급격한 변화, 파괴, 깨달음, 해방",reversedMeaning:"변화 회피, 재앙 지연, 두려움",uprightKeywords:["급변","파괴","깨달음","해방","위기"],reversedKeywords:["회피","지연","두려움","저항"],symbolism:"번개에 맞아 무너지는 탑",description:"기존의 틀이 무너지고 새로운 진실이 드러나는 때",imagePath:"/tarot/16-TheTower.jpg"},{id:"major-17",name:"The Star",nameKo:"별",number:17,suit:"major",uprightMeaning:"희망, 영감, 평온, 치유",reversedMeaning:"절망, 신뢰 상실, 희망 부족",uprightKeywords:["희망","영감","평온","치유","낙관"],reversedKeywords:["절망","불신","비관","상실"],symbolism:"물가에서 별빛 아래 물을 붓는 여성",description:"희망과 치유의 빛이 비치는 평화로운 시기",imagePath:"/tarot/17-TheStar.jpg"},{id:"major-18",name:"The Moon",nameKo:"달",number:18,suit:"major",uprightMeaning:"환상, 두려움, 잠재의식, 직관",reversedMeaning:"환상 해소, 진실 발견, 명료함",uprightKeywords:["환상","두려움","잠재의식","직관","혼란"],reversedKeywords:["명료","진실","해소","깨달음"],symbolism:"달빛 아래 개와 늑대가 짖고 있는 신비로운 풍경",description:"불확실하고 혼란스러운 시기, 직관에 귀 기울여야 함",imagePath:"/tarot/18-TheMoon.jpg"},{id:"major-19",name:"The Sun",nameKo:"태양",number:19,suit:"major",uprightMeaning:"성공, 기쁨, 활력, 긍정",reversedMeaning:"일시적 좌절, 지연된 성공, 낙관 부족",uprightKeywords:["성공","기쁨","활력","긍정","밝음"],reversedKeywords:["좌절","지연","비관","어두움"],symbolism:"태양 아래 백마를 타고 있는 어린아이",description:"모든 것이 밝게 빛나고 성공을 거두는 시기",imagePath:"/tarot/19-TheSun.jpg"},{id:"major-20",name:"Judgement",nameKo:"심판",number:20,suit:"major",uprightMeaning:"부활, 평가, 깨달음, 소명",reversedMeaning:"자기 의심, 후회, 책임 회피",uprightKeywords:["부활","평가","깨달음","소명","변화"],reversedKeywords:["의심","후회","회피","정체"],symbolism:"천사의 나팔 소리에 무덤에서 일어나는 사람들",description:"과거를 평가하고 새로운 삶으로 부활하는 시기",imagePath:"/tarot/20-Judgement.jpg"},{id:"major-21",name:"The World",nameKo:"세계",number:21,suit:"major",uprightMeaning:"완성, 성취, 조화, 통합",reversedMeaning:"미완성, 지연, 목표 미달",uprightKeywords:["완성","성취","조화","통합","완전"],reversedKeywords:["미완성","지연","미달","불완전"],symbolism:"월계관 속에서 춤추는 여성과 네 가지 원소",description:"목표를 달성하고 완전함에 이르는 시기",imagePath:"/tarot/21-TheWorld.jpg"},{id:"wands-1",name:"Ace of Wands",nameKo:"완드 에이스",number:1,suit:"wands",uprightMeaning:"새로운 시작, 영감, 창조적 에너지, 잠재력",reversedMeaning:"지연, 에너지 부족, 방향 상실",uprightKeywords:["새로운 시작","영감","창조","잠재력","행동"],reversedKeywords:["지연","부족","방향 상실","정체"],symbolism:"하늘에서 손이 나와 완드를 쥐고 있음",description:"새로운 프로젝트나 모험의 시작, 열정적인 에너지",imagePath:"/tarot/Wands01.jpg"},{id:"wands-2",name:"Two of Wands",nameKo:"완드 2",number:2,suit:"wands",uprightMeaning:"계획, 결정, 미래 전망, 진보",reversedMeaning:"계획 부족, 우유부단, 두려움",uprightKeywords:["계획","결정","전망","진보","비전"],reversedKeywords:["우유부단","두려움","혼란","지연"],symbolism:"성벽 위에서 세계를 내려다보는 남자",description:"미래를 계획하고 다음 단계를 결정하는 시기",imagePath:"/tarot/Wands02.jpg"},{id:"wands-3",name:"Three of Wands",nameKo:"완드 3",number:3,suit:"wands",uprightMeaning:"확장, 예측, 리더십, 기회",reversedMeaning:"지연, 좌절, 기회 상실",uprightKeywords:["확장","예측","리더십","기회","성장"],reversedKeywords:["지연","좌절","상실","장애물"],symbolism:"해안에서 멀리 바다를 바라보는 남자",description:"계획이 실현되고 새로운 기회가 펼쳐지는 때",imagePath:"/tarot/Wands03.jpg"},{id:"wands-4",name:"Four of Wands",nameKo:"완드 4",number:4,suit:"wands",uprightMeaning:"축하, 조화, 안정, 성취",reversedMeaning:"불안정, 긴장, 축하 연기",uprightKeywords:["축하","조화","안정","성취","기쁨"],reversedKeywords:["불안정","긴장","연기","불협화"],symbolism:"완드로 장식된 아치 아래 축하하는 사람들",description:"목표 달성을 축하하고 안정을 즐기는 시기",imagePath:"/tarot/Wands04.jpg"},{id:"wands-5",name:"Five of Wands",nameKo:"완드 5",number:5,suit:"wands",uprightMeaning:"경쟁, 갈등, 도전, 의견 충돌",reversedMeaning:"갈등 회피, 조화 추구, 내적 갈등",uprightKeywords:["경쟁","갈등","도전","충돌","경쟁심"],reversedKeywords:["회피","조화","내적 갈등","해소"],symbolism:"다섯 사람이 완드로 싸우는 모습",description:"경쟁과 갈등 속에서 자신의 위치를 찾는 시기",imagePath:"/tarot/Wands05.jpg"},{id:"wands-6",name:"Six of Wands",nameKo:"완드 6",number:6,suit:"wands",uprightMeaning:"승리, 인정, 성공, 자부심",reversedMeaning:"실패, 인정 부족, 자만심",uprightKeywords:["승리","인정","성공","자부심","명예"],reversedKeywords:["실패","부족","자만","낙담"],symbolism:"말을 타고 승리의 월계관을 쓴 남자",description:"노력이 인정받고 승리를 거두는 시기",imagePath:"/tarot/Wands06.jpg"},{id:"wands-7",name:"Seven of Wands",nameKo:"완드 7",number:7,suit:"wands",uprightMeaning:"방어, 도전 맞서기, 인내, 용기",reversedMeaning:"압도됨, 포기, 방어 실패",uprightKeywords:["방어","도전","인내","용기","고집"],reversedKeywords:["압도","포기","실패","약함"],symbolism:"높은 곳에서 여섯 개의 완드에 맞서는 남자",description:"자신의 입장을 지키며 도전에 맞서는 시기",imagePath:"/tarot/Wands07.jpg"},{id:"wands-8",name:"Eight of Wands",nameKo:"완드 8",number:8,suit:"wands",uprightMeaning:"빠른 행동, 진전, 소식, 여행",reversedMeaning:"지연, 좌절, 느린 진행",uprightKeywords:["빠른 행동","진전","소식","여행","가속"],reversedKeywords:["지연","좌절","느림","정체"],symbolism:"하늘을 날아가는 여덟 개의 완드",description:"일이 빠르게 진행되고 변화가 일어나는 시기",imagePath:"/tarot/Wands08.jpg"},{id:"wands-9",name:"Nine of Wands",nameKo:"완드 9",number:9,suit:"wands",uprightMeaning:"인내, 회복력, 경계, 마지막 도전",reversedMeaning:"탈진, 포기, 방어적 태도",uprightKeywords:["인내","회복력","경계","끈기","방어"],reversedKeywords:["탈진","포기","방어적","약함"],symbolism:"부상당한 남자가 여덟 개의 완드 뒤에 서 있음",description:"마지막 도전을 앞두고 인내하는 시기",imagePath:"/tarot/Wands09.jpg"},{id:"wands-10",name:"Ten of Wands",nameKo:"완드 10",number:10,suit:"wands",uprightMeaning:"부담, 책임, 과중한 짐, 완수",reversedMeaning:"짐 내려놓기, 위임, 책임 회피",uprightKeywords:["부담","책임","짐","완수","스트레스"],reversedKeywords:["내려놓기","위임","회피","해방"],symbolism:"열 개의 완드를 짊어지고 가는 남자",description:"과중한 책임을 지고 있지만 목표에 가까워지는 시기",imagePath:"/tarot/Wands10.jpg"},{id:"wands-11",name:"Page of Wands",nameKo:"완드 시종",number:11,suit:"wands",uprightMeaning:"열정, 탐험, 소식, 새로운 아이디어",reversedMeaning:"무모함, 산만함, 계획 부족",uprightKeywords:["열정","탐험","소식","아이디어","호기심"],reversedKeywords:["무모","산만","부족","경솔"],symbolism:"완드를 들고 있는 젊은 청년",description:"새로운 가능성을 탐험하고 열정적으로 시작하는 시기",imagePath:"/tarot/Wands11.jpg"},{id:"wands-12",name:"Knight of Wands",nameKo:"완드 기사",number:12,suit:"wands",uprightMeaning:"행동, 모험, 열정, 충동",reversedMeaning:"성급함, 무모함, 좌절",uprightKeywords:["행동","모험","열정","충동","에너지"],reversedKeywords:["성급","무모","좌절","방향 상실"],symbolism:"말을 타고 질주하는 기사",description:"열정적으로 행동하고 모험을 추구하는 시기",imagePath:"/tarot/Wands12.jpg"},{id:"wands-13",name:"Queen of Wands",nameKo:"완드 여왕",number:13,suit:"wands",uprightMeaning:"자신감, 열정, 독립, 카리스마",reversedMeaning:"이기심, 질투, 자기중심",uprightKeywords:["자신감","열정","독립","카리스마","활력"],reversedKeywords:["이기심","질투","자기중심","불안"],symbolism:"왕좌에 앉아 해바라기와 검은 고양이를 거느린 여왕",description:"자신감과 카리스마로 목표를 달성하는 시기",imagePath:"/tarot/Wands13.jpg"},{id:"wands-14",name:"King of Wands",nameKo:"완드 왕",number:14,suit:"wands",uprightMeaning:"리더십, 비전, 기업가 정신, 열정",reversedMeaning:"독재, 성급함, 무모함",uprightKeywords:["리더십","비전","기업가","열정","권위"],reversedKeywords:["독재","성급","무모","압제"],symbolism:"왕좌에 앉아 완드를 든 왕",description:"강한 리더십과 비전으로 이끄는 시기",imagePath:"/tarot/Wands14.jpg"},{id:"cups-1",name:"Ace of Cups",nameKo:"컵 에이스",number:1,suit:"cups",uprightMeaning:"새로운 사랑, 감정의 시작, 직관, 창조성",reversedMeaning:"감정 억압, 사랑 부족, 상실",uprightKeywords:["새로운 사랑","감정","직관","창조성","기쁨"],reversedKeywords:["억압","부족","상실","슬픔"],symbolism:"하늘에서 손이 나와 넘치는 컵을 쥐고 있음",description:"새로운 감정과 사랑이 시작되는 시기",imagePath:"/tarot/Cups01.jpg"},{id:"cups-2",name:"Two of Cups",nameKo:"컵 2",number:2,suit:"cups",uprightMeaning:"파트너십, 사랑, 조화, 결합",reversedMeaning:"불화, 관계 단절, 불균형",uprightKeywords:["파트너십","사랑","조화","결합","상호성"],reversedKeywords:["불화","단절","불균형","분리"],symbolism:"남녀가 컵을 교환하며 맹세하는 모습",description:"균형 잡힌 관계와 상호 이해가 깊어지는 시기",imagePath:"/tarot/Cups02.jpg"},{id:"cups-3",name:"Three of Cups",nameKo:"컵 3",number:3,suit:"cups",uprightMeaning:"축하, 우정, 공동체, 기쁨",reversedMeaning:"과잉, 고립, 관계 문제",uprightKeywords:["축하","우정","공동체","기쁨","사교"],reversedKeywords:["과잉","고립","문제","불화"],symbolism:"세 여성이 컵을 들고 춤추는 모습",description:"친구들과 함께 기쁨을 나누는 시기",imagePath:"/tarot/Cups03.jpg"},{id:"cups-4",name:"Four of Cups",nameKo:"컵 4",number:4,suit:"cups",uprightMeaning:"명상, 재평가, 무관심, 불만족",reversedMeaning:"새로운 관점, 동기 부여, 각성",uprightKeywords:["명상","재평가","무관심","불만","내면"],reversedKeywords:["관점","동기","각성","수용"],symbolism:"나무 아래 앉아 세 개의 컵을 무시하는 남자",description:"현재 상황을 재평가하고 내면을 돌아보는 시기",imagePath:"/tarot/Cups04.jpg"},{id:"cups-5",name:"Five of Cups",nameKo:"컵 5",number:5,suit:"cups",uprightMeaning:"상실, 슬픔, 후회, 실망",reversedMeaning:"수용, 용서, 앞으로 나아가기",uprightKeywords:["상실","슬픔","후회","실망","애도"],reversedKeywords:["수용","용서","앞으로","치유"],symbolism:"쓰러진 컵을 바라보며 슬퍼하는 사람",description:"상실과 슬픔을 경험하지만 희망은 남아있는 시기",imagePath:"/tarot/Cups05.jpg"},{id:"cups-6",name:"Six of Cups",nameKo:"컵 6",number:6,suit:"cups",uprightMeaning:"향수, 추억, 순수, 재회",reversedMeaning:"과거에 집착, 미래 지향, 성숙",uprightKeywords:["향수","추억","순수","재회","과거"],reversedKeywords:["집착","미래","성숙","해방"],symbolism:"어린이들이 꽃이 담긴 컵을 나누는 모습",description:"과거의 좋은 추억을 회상하는 시기",imagePath:"/tarot/Cups06.jpg"},{id:"cups-7",name:"Seven of Cups",nameKo:"컵 7",number:7,suit:"cups",uprightMeaning:"선택, 환상, 가능성, 혼란",reversedMeaning:"명료함, 결정, 현실 직시",uprightKeywords:["선택","환상","가능성","혼란","꿈"],reversedKeywords:["명료","결정","현실","집중"],symbolism:"구름 속에 떠 있는 일곱 개의 컵",description:"많은 선택지 앞에서 혼란스러운 시기",imagePath:"/tarot/Cups07.jpg"},{id:"cups-8",name:"Eight of Cups",nameKo:"컵 8",number:8,suit:"cups",uprightMeaning:"포기, 떠남, 영적 탐구, 전환",reversedMeaning:"두려움, 정체, 회피",uprightKeywords:["포기","떠남","탐구","전환","성장"],reversedKeywords:["두려움","정체","회피","집착"],symbolism:"여덟 개의 컵을 뒤로하고 떠나는 사람",description:"더 높은 목표를 위해 현재를 떠나는 시기",imagePath:"/tarot/Cups08.jpg"},{id:"cups-9",name:"Nine of Cups",nameKo:"컵 9",number:9,suit:"cups",uprightMeaning:"만족, 성취, 소원 성취, 행복",reversedMeaning:"불만족, 탐욕, 허영",uprightKeywords:["만족","성취","소원","행복","감사"],reversedKeywords:["불만족","탐욕","허영","과잉"],symbolism:"아홉 개의 컵 앞에 만족스럽게 앉아있는 남자",description:"소원이 이루어지고 만족스러운 시기",imagePath:"/tarot/Cups09.jpg"},{id:"cups-10",name:"Ten of Cups",nameKo:"컵 10",number:10,suit:"cups",uprightMeaning:"가족 행복, 조화, 사랑, 완전",reversedMeaning:"불화, 가족 문제, 이별",uprightKeywords:["가족","행복","조화","사랑","완전"],reversedKeywords:["불화","문제","이별","갈등"],symbolism:"무지개 아래 가족이 함께하는 모습",description:"가족과 함께 완전한 행복을 누리는 시기",imagePath:"/tarot/Cups10.jpg"},{id:"cups-11",name:"Page of Cups",nameKo:"컵 시종",number:11,suit:"cups",uprightMeaning:"창의성, 직관, 소식, 새로운 감정",reversedMeaning:"감정적 미숙, 비현실적, 실망",uprightKeywords:["창의성","직관","소식","감정","순수"],reversedKeywords:["미숙","비현실","실망","불안정"],symbolism:"컵을 들고 있는 젊은이",description:"새로운 감정과 창의적 영감이 찾아오는 시기",imagePath:"/tarot/Cups11.jpg"},{id:"cups-12",name:"Knight of Cups",nameKo:"컵 기사",number:12,suit:"cups",uprightMeaning:"로맨스, 매력, 이상주의, 메시지",reversedMeaning:"비현실적, 변덕, 무책임",uprightKeywords:["로맨스","매력","이상","메시지","감성"],reversedKeywords:["비현실","변덕","무책임","환상"],symbolism:"말을 타고 컵을 들고 있는 기사",description:"로맨틱한 제안이나 이상적인 기회가 오는 시기",imagePath:"/tarot/Cups12.jpg"},{id:"cups-13",name:"Queen of Cups",nameKo:"컵 여왕",number:13,suit:"cups",uprightMeaning:"직관, 공감, 돌봄, 정서적 안정",reversedMeaning:"정서 불안, 의존, 조종",uprightKeywords:["직관","공감","돌봄","안정","사랑"],reversedKeywords:["불안","의존","조종","불균형"],symbolism:"왕좌에 앉아 화려한 컵을 들고 있는 여왕",description:"직관과 공감으로 다른 이를 돌보는 시기",imagePath:"/tarot/Cups13.jpg"},{id:"cups-14",name:"King of Cups",nameKo:"컵 왕",number:14,suit:"cups",uprightMeaning:"감정 통제, 외교, 균형, 지혜",reversedMeaning:"감정 억압, 조종, 냉담",uprightKeywords:["통제","외교","균형","지혜","성숙"],reversedKeywords:["억압","조종","냉담","불안정"],symbolism:"바다 위 왕좌에 앉아 컵을 든 왕",description:"감정을 현명하게 다루고 균형을 유지하는 시기",imagePath:"/tarot/Cups14.jpg"},{id:"swords-1",name:"Ace of Swords",nameKo:"검 에이스",number:1,suit:"swords",uprightMeaning:"명료함, 진실, 돌파구, 새로운 아이디어",reversedMeaning:"혼란, 잘못된 판단, 정보 부족",uprightKeywords:["명료함","진실","돌파구","아이디어","정의"],reversedKeywords:["혼란","오판","부족","불명확"],symbolism:"하늘에서 손이 나와 검을 쥐고 있음",description:"진실이 드러나고 명료한 판단을 내리는 시기",imagePath:"/tarot/Swords01.jpg"},{id:"swords-2",name:"Two of Swords",nameKo:"검 2",number:2,suit:"swords",uprightMeaning:"교착 상태, 결정 회피, 균형",reversedMeaning:"결정, 진실 직시, 해결",uprightKeywords:["교착","회피","균형","딜레마","중립"],reversedKeywords:["결정","진실","해결","행동"],symbolism:"눈을 가린 채 두 개의 검을 든 여성",description:"어려운 선택을 앞두고 결정을 미루는 시기",imagePath:"/tarot/Swords02.jpg"},{id:"swords-3",name:"Three of Swords",nameKo:"검 3",number:3,suit:"swords",uprightMeaning:"상처, 슬픔, 배신, 이별",reversedMeaning:"치유, 용서, 회복",uprightKeywords:["상처","슬픔","배신","이별","고통"],reversedKeywords:["치유","용서","회복","해방"],symbolism:"세 개의 검이 심장을 꿰뚫고 있는 모습",description:"감정적 상처와 슬픔을 경험하는 시기",imagePath:"/tarot/Swords03.jpg"},{id:"swords-4",name:"Four of Swords",nameKo:"검 4",number:4,suit:"swords",uprightMeaning:"휴식, 명상, 회복, 재충전",reversedMeaning:"탈진, 스트레스, 휴식 부족",uprightKeywords:["휴식","명상","회복","재충전","평화"],reversedKeywords:["탈진","스트레스","부족","불안"],symbolism:"누워서 쉬고 있는 기사",description:"휴식을 취하고 에너지를 회복하는 시기",imagePath:"/tarot/Swords04.jpg"},{id:"swords-5",name:"Five of Swords",nameKo:"검 5",number:5,suit:"swords",uprightMeaning:"갈등, 패배, 불명예, 자기중심",reversedMeaning:"화해, 용서, 패배 인정",uprightKeywords:["갈등","패배","불명예","자기중심","승리"],reversedKeywords:["화해","용서","인정","해결"],symbolism:"다섯 개의 검을 들고 승리를 거둔 남자",description:"승리했지만 대가가 큰 갈등의 시기",imagePath:"/tarot/Swords05.jpg"},{id:"swords-6",name:"Six of Swords",nameKo:"검 6",number:6,suit:"swords",uprightMeaning:"전환, 여행, 이동, 회복",reversedMeaning:"정체, 저항, 과거에 집착",uprightKeywords:["전환","여행","이동","회복","앞으로"],reversedKeywords:["정체","저항","집착","지연"],symbolism:"배를 타고 강을 건너는 가족",description:"어려움을 뒤로하고 더 나은 곳으로 이동하는 시기",imagePath:"/tarot/Swords06.jpg"},{id:"swords-7",name:"Seven of Swords",nameKo:"검 7",number:7,suit:"swords",uprightMeaning:"기만, 전략, 도피, 비밀",reversedMeaning:"진실 폭로, 양심, 책임",uprightKeywords:["기만","전략","도피","비밀","교활함"],reversedKeywords:["진실","양심","책임","폭로"],symbolism:"검을 몰래 훔쳐 도망가는 남자",description:"전략적으로 행동하거나 기만이 있는 시기",imagePath:"/tarot/Swords07.jpg"},{id:"swords-8",name:"Eight of Swords",nameKo:"검 8",number:8,suit:"swords",uprightMeaning:"속박, 제한, 무력감, 피해자 의식",reversedMeaning:"해방, 자유, 제한 극복",uprightKeywords:["속박","제한","무력감","피해자","갇힘"],reversedKeywords:["해방","자유","극복","권한 회복"],symbolism:"눈을 가리고 묶인 채 검에 둘러싸인 여성",description:"스스로를 제한하고 갇혀있다고 느끼는 시기",imagePath:"/tarot/Swords08.jpg"},{id:"swords-9",name:"Nine of Swords",nameKo:"검 9",number:9,suit:"swords",uprightMeaning:"불안, 걱정, 악몽, 두려움",reversedMeaning:"희망, 회복, 두려움 극복",uprightKeywords:["불안","걱정","악몽","두려움","스트레스"],reversedKeywords:["희망","회복","극복","해방"],symbolism:"침대에서 머리를 감싸 쥐고 있는 사람",description:"걱정과 불안에 시달리는 시기",imagePath:"/tarot/Swords09.jpg"},{id:"swords-10",name:"Ten of Swords",nameKo:"검 10",number:10,suit:"swords",uprightMeaning:"끝, 배신, 패배, 위기",reversedMeaning:"회복, 재생, 최악 극복",uprightKeywords:["끝","배신","패배","위기","바닥"],reversedKeywords:["회복","재생","극복","새 시작"],symbolism:"열 개의 검에 찔린 채 쓰러진 사람",description:"최악의 상황이지만 곧 새로운 시작이 올 시기",imagePath:"/tarot/Swords10.jpg"},{id:"swords-11",name:"Page of Swords",nameKo:"검 시종",number:11,suit:"swords",uprightMeaning:"호기심, 경계, 소식, 새로운 아이디어",reversedMeaning:"소문, 거짓말, 준비 부족",uprightKeywords:["호기심","경계","소식","아이디어","정보"],reversedKeywords:["소문","거짓","부족","경솔"],symbolism:"검을 들고 경계하는 젊은이",description:"호기심을 갖고 새로운 정보를 탐색하는 시기",imagePath:"/tarot/Swords11.jpg"},{id:"swords-12",name:"Knight of Swords",nameKo:"검 기사",number:12,suit:"swords",uprightMeaning:"행동, 야망, 결단력, 성급함",reversedMeaning:"무모함, 공격성, 성급한 결정",uprightKeywords:["행동","야망","결단","성급","돌진"],reversedKeywords:["무모","공격","경솔","혼란"],symbolism:"말을 타고 질주하는 기사",description:"빠르고 결단력 있게 행동하는 시기",imagePath:"/tarot/Swords12.jpg"},{id:"swords-13",name:"Queen of Swords",nameKo:"검 여왕",number:13,suit:"swords",uprightMeaning:"명료함, 독립, 진실, 객관성",reversedMeaning:"냉담, 잔인함, 감정 결여",uprightKeywords:["명료","독립","진실","객관","지성"],reversedKeywords:["냉담","잔인","감정 결여","비판적"],symbolism:"왕좌에 앉아 검을 들고 있는 여왕",description:"명료한 판단과 독립적 사고를 하는 시기",imagePath:"/tarot/Swords13.jpg"},{id:"swords-14",name:"King of Swords",nameKo:"검 왕",number:14,suit:"swords",uprightMeaning:"지적 권위, 진실, 공정, 논리",reversedMeaning:"독단, 냉혹함, 조종",uprightKeywords:["권위","진실","공정","논리","지성"],reversedKeywords:["독단","냉혹","조종","무자비"],symbolism:"왕좌에 앉아 검을 든 왕",description:"논리와 지성으로 공정하게 판단하는 시기",imagePath:"/tarot/Swords14.jpg"},{id:"pentacles-1",name:"Ace of Pentacles",nameKo:"펜타클 에이스",number:1,suit:"pentacles",uprightMeaning:"새로운 기회, 번영, 물질적 성공",reversedMeaning:"기회 상실, 재정 불안정",uprightKeywords:["기회","번영","성공","물질","시작"],reversedKeywords:["상실","불안정","지연","실패"],symbolism:"하늘에서 손이 나와 펜타클을 쥐고 있음",description:"새로운 재정적 기회와 물질적 성공의 시작",imagePath:"/tarot/Pentacles01.jpg"},{id:"pentacles-2",name:"Two of Pentacles",nameKo:"펜타클 2",number:2,suit:"pentacles",uprightMeaning:"균형, 다중 작업, 유연성",reversedMeaning:"불균형, 과부하, 우선순위 부족",uprightKeywords:["균형","다중 작업","유연성","조정","적응"],reversedKeywords:["불균형","과부하","혼란","부족"],symbolism:"두 개의 펜타클을 저글링하는 남자",description:"여러 일을 균형있게 조정하는 시기",imagePath:"/tarot/Pentacles02.jpg"},{id:"pentacles-3",name:"Three of Pentacles",nameKo:"펜타클 3",number:3,suit:"pentacles",uprightMeaning:"팀워크, 협력, 기술, 성과",reversedMeaning:"협력 부족, 비효율, 기술 부족",uprightKeywords:["팀워크","협력","기술","성과","품질"],reversedKeywords:["부족","비효율","불협화","실패"],symbolism:"성당에서 일하는 장인",description:"협력과 전문성으로 성과를 내는 시기",imagePath:"/tarot/Pentacles03.jpg"},{id:"pentacles-4",name:"Four of Pentacles",nameKo:"펜타클 4",number:4,suit:"pentacles",uprightMeaning:"안정, 소유, 통제, 절약",reversedMeaning:"인색함, 탐욕, 자기중심",uprightKeywords:["안정","소유","통제","절약","보존"],reversedKeywords:["인색","탐욕","자기중심","집착"],symbolism:"펜타클을 꽉 쥐고 있는 남자",description:"안정을 유지하되 너무 집착하지 않도록 주의하는 시기",imagePath:"/tarot/Pentacles04.jpg"},{id:"pentacles-5",name:"Five of Pentacles",nameKo:"펜타클 5",number:5,suit:"pentacles",uprightMeaning:"재정 어려움, 상실, 고립, 걱정",reversedMeaning:"회복, 개선, 도움 받기",uprightKeywords:["어려움","상실","고립","걱정","빈곤"],reversedKeywords:["회복","개선","도움","희망"],symbolism:"눈 내리는 밤 교회 밖에서 고통받는 사람들",description:"재정적 어려움을 겪지만 도움을 구할 수 있는 시기",imagePath:"/tarot/Pentacles05.jpg"},{id:"pentacles-6",name:"Six of Pentacles",nameKo:"펜타클 6",number:6,suit:"pentacles",uprightMeaning:"관대함, 나눔, 자선, 균형",reversedMeaning:"이기심, 불공정, 불균형",uprightKeywords:["관대함","나눔","자선","균형","공정"],reversedKeywords:["이기심","불공정","불균형","착취"],symbolism:"저울을 들고 가난한 이에게 나눠주는 남자",description:"나누고 베푸는 균형잡힌 시기",imagePath:"/tarot/Pentacles06.jpg"},{id:"pentacles-7",name:"Seven of Pentacles",nameKo:"펜타클 7",number:7,suit:"pentacles",uprightMeaning:"인내, 장기 목표, 평가, 성장",reversedMeaning:"좌절, 지연, 노력 부족",uprightKeywords:["인내","장기","평가","성장","투자"],reversedKeywords:["좌절","지연","부족","실망"],symbolism:"농작물을 바라보며 기다리는 농부",description:"인내심을 갖고 장기적 성과를 기다리는 시기",imagePath:"/tarot/Pentacles07.jpg"},{id:"pentacles-8",name:"Eight of Pentacles",nameKo:"펜타클 8",number:8,suit:"pentacles",uprightMeaning:"기술, 노력, 숙련, 집중",reversedMeaning:"완벽주의, 과로, 기술 부족",uprightKeywords:["기술","노력","숙련","집중","성장"],reversedKeywords:["완벽주의","과로","부족","실수"],symbolism:"펜타클을 정성껏 만드는 장인",description:"기술을 연마하고 성장하는 시기",imagePath:"/tarot/Pentacles08.jpg"},{id:"pentacles-9",name:"Nine of Pentacles",nameKo:"펜타클 9",number:9,suit:"pentacles",uprightMeaning:"자립, 풍요, 성취, 우아함",reversedMeaning:"의존, 재정 불안, 과시",uprightKeywords:["자립","풍요","성취","우아","독립"],reversedKeywords:["의존","불안","과시","부족"],symbolism:"정원에서 여유를 즐기는 여성",description:"자립하여 풍요를 누리는 성공의 시기",imagePath:"/tarot/Pentacles09.jpg"},{id:"pentacles-10",name:"Ten of Pentacles",nameKo:"펜타클 10",number:10,suit:"pentacles",uprightMeaning:"부, 유산, 가족, 전통",reversedMeaning:"재정 손실, 가족 분쟁, 불안정",uprightKeywords:["부","유산","가족","전통","완성"],reversedKeywords:["손실","분쟁","불안정","부담"],symbolism:"가족과 함께 부를 누리는 모습",description:"가족과 함께 물질적 풍요를 누리는 완성의 시기",imagePath:"/tarot/Pentacles10.jpg"},{id:"pentacles-11",name:"Page of Pentacles",nameKo:"펜타클 시종",number:11,suit:"pentacles",uprightMeaning:"학습, 야망, 새로운 시작, 계획",reversedMeaning:"계획 부족, 게으름, 실패",uprightKeywords:["학습","야망","시작","계획","기회"],reversedKeywords:["부족","게으름","실패","무관심"],symbolism:"펜타클을 들고 있는 젊은이",description:"새로운 학습과 계획을 시작하는 시기",imagePath:"/tarot/Pentacles11.jpg"},{id:"pentacles-12",name:"Knight of Pentacles",nameKo:"펜타클 기사",number:12,suit:"pentacles",uprightMeaning:"책임감, 신중함, 근면, 인내",reversedMeaning:"게으름, 정체, 완벽주의",uprightKeywords:["책임감","신중","근면","인내","안정"],reversedKeywords:["게으름","정체","완벽주의","고집"],symbolism:"말을 타고 펜타클을 든 기사",description:"책임감을 갖고 꾸준히 일하는 시기",imagePath:"/tarot/Pentacles12.jpg"},{id:"pentacles-13",name:"Queen of Pentacles",nameKo:"펜타클 여왕",number:13,suit:"pentacles",uprightMeaning:"실용성, 풍요, 양육, 안정",reversedMeaning:"자기중심, 질투, 불안정",uprightKeywords:["실용","풍요","양육","안정","현실"],reversedKeywords:["자기중심","질투","불안정","탐욕"],symbolism:"왕좌에 앉아 펜타클을 든 여왕",description:"실용적이고 안정적으로 풍요를 관리하는 시기",imagePath:"/tarot/Pentacles13.jpg"},{id:"pentacles-14",name:"King of Pentacles",nameKo:"펜타클 왕",number:14,suit:"pentacles",uprightMeaning:"부, 비즈니스, 리더십, 성공",reversedMeaning:"탐욕, 무능함, 재정 손실",uprightKeywords:["부","비즈니스","리더십","성공","권위"],reversedKeywords:["탐욕","무능","손실","부패"],symbolism:"왕좌에 앉아 펜타클을 든 왕",description:"재정적 성공과 안정적 리더십을 발휘하는 시기",imagePath:"/tarot/Pentacles14.jpg"}];const Po=[{id:"one-card",name:"One Card",nameKo:"원 카드",description:"오늘의 운세, 간단한 질문에 대한 답변",cardCount:1,exampleQuestions:["오늘 나에게 필요한 메시지는 무엇인가요?","오늘의 운세는 어떤가요?","지금 내가 가장 집중해야 할 것은?","이번 주 나에게 가장 중요한 것은?","오늘 조심해야 할 일이 있나요?","지금 나에게 필요한 조언은?","오늘의 행운 키워드는?","이 결정을 내려도 괜찮을까요?"],positions:[{position:1,name:"답변",meaning:"질문에 대한 직접적인 답변과 조언"}]},{id:"three-card-past-present-future",name:"Three Card (Past-Present-Future)",nameKo:"쓰리 카드 (과거-현재-미래)",description:"시간의 흐름에 따른 상황 파악",cardCount:3,exampleQuestions:["이 관계는 어떻게 발전할까요?","내 커리어는 앞으로 어떻게 될까요?","이 상황은 앞으로 어떻게 변할까요?","내 인생의 다음 단계는 무엇인가요?","이 문제는 언제 해결될까요?","내 사랑은 어떻게 흘러갈까요?","내 금전 운은 앞으로 어떻게 될까요?","건강 상태는 앞으로 어떻게 변할까요?","이 프로젝트의 결과는 어떻게 될까요?","내가 원하는 것을 이룰 수 있을까요?"],positions:[{position:1,name:"과거",meaning:"과거의 영향, 현재 상황의 원인"},{position:2,name:"현재",meaning:"현재의 상황과 에너지"},{position:3,name:"미래",meaning:"현재의 흐름이 이어질 경우 예상되는 결과"}]},{id:"three-card-situation-action-outcome",name:"Three Card (Situation-Action-Outcome)",nameKo:"쓰리 카드 (상황-행동-결과)",description:"문제 해결을 위한 행동 지침",cardCount:3,exampleQuestions:["이 프로젝트를 성공시키려면 어떻게 해야 하나요?","이 문제를 해결하려면 무엇을 해야 하나요?","목표 달성을 위한 최선의 방법은?","이 상황에서 어떤 행동을 취해야 할까요?","이 일을 성공시키려면 뭘 해야 할까요?","관계 개선을 위해 내가 할 수 있는 건?","돈을 모으려면 어떻게 해야 할까요?","승진하려면 무엇이 필요한가요?","시험에 합격하려면 어떻게 해야 하나요?","건강을 회복하려면 무엇을 해야 할까요?"],positions:[{position:1,name:"상황",meaning:"현재의 상황과 문제"},{position:2,name:"행동",meaning:"취해야 할 행동이나 태도"},{position:3,name:"결과",meaning:"행동을 취했을 때의 예상 결과"}]},{id:"five-card",name:"Five Card",nameKo:"파이브 카드",description:"심층적인 상황 분석과 해결책",cardCount:5,exampleQuestions:["이 상황을 종합적으로 이해하고 싶습니다","지금 내 인생에서 일어나고 있는 일은?","이 결정을 내리기 전에 알아야 할 것은?","현재 상황의 전체 그림을 보여주세요","내 인생의 전반적인 흐름은 어떤가요?","이 문제의 근본 원인은 무엇인가요?","내가 놓치고 있는 것은 무엇인가요?","지금 나에게 가장 필요한 변화는?"],positions:[{position:1,name:"과거",meaning:"과거의 경험과 영향"},{position:2,name:"현재",meaning:"현재의 상황"},{position:3,name:"숨겨진 영향",meaning:"잠재의식, 숨겨진 요인"},{position:4,name:"조언",meaning:"취해야 할 행동과 태도"},{position:5,name:"결과",meaning:"최종적인 결과와 전망"}]},{id:"celtic-cross",name:"Celtic Cross",nameKo:"켈틱 크로스",description:"가장 포괄적인 10장 배치, 깊이 있는 분석",cardCount:10,exampleQuestions:["내 인생의 전체적인 방향성을 알고 싶습니다","이 중대한 결정에 대해 깊이 있는 조언이 필요합니다","복잡한 상황을 완전히 이해하고 싶습니다","내 삶의 모든 측면을 종합적으로 봐주세요","인생의 중요한 전환점에서 조언이 필요합니다","이 관계의 모든 면을 깊이 알고 싶습니다","내 커리어의 전체 흐름을 파악하고 싶습니다","복잡한 문제를 근본적으로 해결하고 싶습니다"],positions:[{position:1,name:"현재 상황",meaning:"질문자의 현재 위치와 상태"},{position:2,name:"도전과 장애물",meaning:"현재 직면한 문제나 장애물"},{position:3,name:"의식적 목표",meaning:"의식적으로 추구하는 것"},{position:4,name:"잠재의식",meaning:"무의식의 영향, 과거의 영향"},{position:5,name:"과거",meaning:"과거의 사건과 경험"},{position:6,name:"가까운 미래",meaning:"곧 다가올 사건이나 변화"},{position:7,name:"당신의 태도",meaning:"현재의 태도와 접근 방식"},{position:8,name:"외부 영향",meaning:"주변 환경과 타인의 영향"},{position:9,name:"희망과 두려움",meaning:"내면의 희망과 두려움"},{position:10,name:"최종 결과",meaning:"현재의 흐름이 이어질 경우 최종 결과"}]},{id:"relationship",name:"Relationship Spread",nameKo:"관계 스프레드",description:"연애, 우정, 가족 관계 분석",cardCount:7,exampleQuestions:["이 사람과의 관계는 어떻게 발전할까요?","우리 관계에서 개선해야 할 점은?","상대방은 나를 어떻게 생각하고 있나요?","이 관계의 미래는 어떻게 될까요?","이 사람과 연애해도 괜찮을까요?","우리 관계가 더 나아질 수 있을까요?","이별 후 복원이 가능할까요?","소원이는 나를 좋아하나요?","이 사람과 결혼하면 행복할까요?","친구와의 갈등을 어떻게 풀어야 할까요?","가족 관계를 개선하려면 어떻게 해야 할까요?","직장 상사와의 관계는 어떻게 될까요?"],positions:[{position:1,name:"당신",meaning:"당신의 현재 상태와 감정"},{position:2,name:"상대방",meaning:"상대방의 현재 상태와 감정"},{position:3,name:"관계의 현재",meaning:"두 사람 관계의 현재 상태"},{position:4,name:"당신의 욕구",meaning:"당신이 원하는 것"},{position:5,name:"상대방의 욕구",meaning:"상대방이 원하는 것"},{position:6,name:"조언",meaning:"관계 개선을 위한 조언"},{position:7,name:"관계의 미래",meaning:"관계가 나아갈 방향"}]},{id:"career",name:"Career Spread",nameKo:"진로/커리어 스프레드",description:"직업, 사업, 프로젝트 관련 조언",cardCount:6,exampleQuestions:["이직을 해도 괜찮을까요?","내 사업은 성공할 수 있을까요?","승진 기회가 올까요?","커리어에서 다음 단계는 무엇인가요?","지금 창업해도 괜찮을까요?","이 회사에 입사하면 어떨까요?","프리랜서로 전환하는 게 좋을까요?","내 일이 인정받을 수 있을까요?","연봉 협상은 어떻게 해야 할까요?","직장을 그만둬도 괜찮을까요?","새로운 분야로 전환해도 될까요?","사업 확장 시기가 맞나요?"],positions:[{position:1,name:"현재 상황",meaning:"현재의 직업적 상황"},{position:2,name:"강점",meaning:"당신의 강점과 자원"},{position:3,name:"약점",meaning:"극복해야 할 약점이나 장애물"},{position:4,name:"기회",meaning:"다가오는 기회"},{position:5,name:"조언",meaning:"취해야 할 행동"},{position:6,name:"결과",meaning:"예상되는 결과"}]},{id:"decision-making",name:"Decision Making Spread",nameKo:"선택 스프레드",description:"두 가지 선택지 중 결정할 때",cardCount:7,exampleQuestions:["A회사와 B회사 중 어디로 이직해야 할까요?","유학을 가야 할까요, 취업을 해야 할까요?","결혼해야 할까요, 더 기다려야 할까요?","두 가지 선택 중 어느 것이 나에게 더 좋을까요?","집을 살까요, 전세로 살까요?","투자를 할까요, 저축을 할까요?","헤어져야 할까요, 관계를 이어가야 할까요?","대학원에 갈까요, 취업할까요?","서울로 갈까요, 지방에 남을까요?","공무원 시험 vs 민간 취업, 어느 게 나을까요?"],positions:[{position:1,name:"현재 상황",meaning:"선택을 앞둔 현재 상황"},{position:2,name:"선택지 A - 장점",meaning:"첫 번째 선택의 긍정적 측면"},{position:3,name:"선택지 A - 단점",meaning:"첫 번째 선택의 부정적 측면"},{position:4,name:"선택지 A - 결과",meaning:"첫 번째 선택 시 예상 결과"},{position:5,name:"선택지 B - 장점",meaning:"두 번째 선택의 긍정적 측면"},{position:6,name:"선택지 B - 단점",meaning:"두 번째 선택의 부정적 측면"},{position:7,name:"선택지 B - 결과",meaning:"두 번째 선택 시 예상 결과"}]},{id:"year-ahead",name:"Year Ahead Spread",nameKo:"올해의 운세",description:"12개월 동안의 운세 전망",cardCount:13,exampleQuestions:["올해 나에게는 어떤 일들이 기다리고 있나요?","2025년 나의 운세는 어떤가요?","올 한 해 매달 주의해야 할 점은?","이번 해의 전체적인 흐름을 알고 싶습니다","올해 나에게 행운이 올 시기는 언제인가요?","이번 해에 조심해야 할 달은 언제인가요?","올해의 연애운은 어떤가요?","올해의 재물운은 어떤가요?"],positions:[{position:1,name:"올해 전체",meaning:"올해 전체의 주제와 에너지"},{position:2,name:"1월",meaning:"1월의 운세와 주제"},{position:3,name:"2월",meaning:"2월의 운세와 주제"},{position:4,name:"3월",meaning:"3월의 운세와 주제"},{position:5,name:"4월",meaning:"4월의 운세와 주제"},{position:6,name:"5월",meaning:"5월의 운세와 주제"},{position:7,name:"6월",meaning:"6월의 운세와 주제"},{position:8,name:"7월",meaning:"7월의 운세와 주제"},{position:9,name:"8월",meaning:"8월의 운세와 주제"},{position:10,name:"9월",meaning:"9월의 운세와 주제"},{position:11,name:"10월",meaning:"10월의 운세와 주제"},{position:12,name:"11월",meaning:"11월의 운세와 주제"},{position:13,name:"12월",meaning:"12월의 운세와 주제"}]}];function Ao(e){return Po.find(t=>t.id===e)}function Lo(e,t){const r=["The Fool","The Magician","The Empress","The Lovers","The Chariot","Strength","The Star","The Sun","The World"],a=["The Tower","The Devil","Death","The Hanged Man","The Moon"],s=["Ace of Wands","Ace of Cups","Ace of Pentacles","Ace of Swords","Six of Wands","Nine of Cups","Ten of Cups","Ten of Pentacles","Four of Wands","Six of Pentacles","Nine of Pentacles"],n=["Five of Cups","Five of Pentacles","Five of Swords","Five of Wands","Ten of Swords","Nine of Swords","Eight of Swords","Seven of Swords","Three of Swords"];return t?r.includes(e.name)?{status:"부정적",message:"역방향으로 나와 **상황이 불리**합니다. 조심스럽게 진행하세요."}:s.includes(e.name)?{status:"부정적",message:"역방향으로 **좋지 않은 상황**입니다. 재검토가 필요합니다."}:a.includes(e.name)?{status:"긍정적",message:"역방향으로 **위기가 완화**됩니다. 희망이 보입니다."}:n.includes(e.name)?{status:"중립",message:"역방향으로 **상황이 개선** 중입니다. 긍정적 변화가 시작됩니다."}:{status:"중립",message:"역방향으로 **재평가가 필요**합니다. 다른 관점에서 접근하세요."}:r.includes(e.name)?{status:"매우 긍정적",message:"이 카드는 **매우 좋은 징조**입니다. 상황이 유리하게 전개될 것입니다."}:s.includes(e.name)?{status:"긍정적",message:"이 카드는 **긍정적인 신호**입니다. 좋은 결과가 기대됩니다."}:a.includes(e.name)?{status:"매우 부정적",message:"이 카드는 **주의가 필요**합니다. 어려운 상황이 예상됩니다."}:n.includes(e.name)?{status:"부정적",message:"이 카드는 **불리한 조건**을 나타냅니다. 신중하게 대처하세요."}:{status:"중립",message:"이 카드는 **가능성이 열려있는** 상태입니다. 당신의 선택에 달려있습니다."}}const Ro={love:["연애","사랑","결혼","이별","남자친구","여자친구","배우자","짝사랑","연인","데이트","고백","프러포즈","재회","복연","소개팅","만남","애인","파트너","썸","커플","부부","이혼","재혼"],career:["직장","회사","취업","이직","승진","면접","커리어","일","사업","창업","프로젝트","업무","상사","동료","직원","사장","성과","성취","목표","비즈니스","경력","진로","직업"],finance:["돈","재정","재산","투자","주식","부동산","저축","수입","지출","빚","대출","경제","금전","수익","손실","금융","자산","코인","암호화폐","펀드","예금","보험"],health:["건강","병","질병","치료","병원","의사","약","수술","다이어트","운동","체중","몸","정신","우울","불안","스트레스","통증","회복","재활","건강검진","체력","피로"],relationship:["친구","가족","부모","형제","자매","아들","딸","자식","시부모","장인","장모","친정","시댁","친구","지인","사람","관계","인간관계","소통","갈등","화해","이해","신뢰"],spiritual:["영적","성장","깨달음","자아","내면","명상","수행","영성","철학","종교","신앙","믿음","진리","의미","정체성","가치관","목적","방향","인생","삶"],decision:["선택","결정","고민","망설임","갈림길","기로","딜레마","판단","결심","결단","선택지","옵션","대안","방법"],general:["운세","오늘","이번주","이번달","올해","미래","전체","종합"]};const Oo={love:{focusAreas:["감정의 흐름","상대방의 마음","관계의 진전","소통 방식"],interpretationTips:["컵 수트는 감정과 사랑의 상태를 나타냅니다","연인 카드는 선택과 관계의 조화를 의미합니다","역방향 카드는 관계의 문제나 감정의 혼란을 나타낼 수 있습니다","메이저 아르카나는 관계의 중대한 전환점을 암시합니다"],actionAdvice:["솔직한 대화로 마음을 표현하세요","상대방의 입장을 이해하려 노력하세요","성급하게 결론내리지 말고 시간을 가지세요","자신의 감정을 먼저 정리하세요"]},career:{focusAreas:["업무 성과","인간관계","발전 기회","장애물"],interpretationTips:["완드 수트는 행동력과 추진력을 나타냅니다","펜타클 수트는 실질적 성과와 안정성을 의미합니다","황제/여황제는 리더십과 안정적 구조를 암시합니다","전차는 목표 달성과 승리를 나타냅니다"],actionAdvice:["명확한 목표를 설정하고 계획을 세우세요","전문성을 키우는 데 집중하세요","협력과 네트워킹을 활용하세요","현실적으로 가능한 것부터 시작하세요"]},finance:{focusAreas:["수입원","지출 관리","투자 기회","재정 안정성"],interpretationTips:["펜타클 수트는 금전과 물질적 상황을 나타냅니다","에이스는 새로운 재정 기회를 암시합니다","4는 안정과 보존, 10은 완성과 풍요를 의미합니다","5는 재정적 어려움이나 손실을 경고합니다"],actionAdvice:["수입과 지출을 철저히 관리하세요","장기적 관점에서 계획을 세우세요","위험 분산을 고려하세요","전문가의 조언을 구하는 것도 좋습니다"]},health:{focusAreas:["신체 상태","정신 건강","생활 습관","회복력"],interpretationTips:["검 수트는 정신적 스트레스와 불안을 나타낼 수 있습니다","힘 카드는 내면의 회복력과 치유 능력을 의미합니다","절제 카드는 균형과 조화로운 건강을 암시합니다","역방향 카드는 건강 문제에 주의가 필요함을 나타냅니다"],actionAdvice:["규칙적인 생활 습관을 유지하세요","충분한 휴식과 수면을 취하세요","스트레스 관리에 신경 쓰세요","필요하다면 전문의 상담을 받으세요"]},relationship:{focusAreas:["소통","이해","갈등 해결","유대감"],interpretationTips:["컵 수트는 감정적 연결과 관계를 나타냅니다","2는 파트너십과 협력을, 3은 공동체와 우정을 의미합니다","검 수트의 충돌 카드는 갈등을 암시합니다","6은 조화와 균형, 치유를 나타냅니다"],actionAdvice:["열린 마음으로 대화하세요","경청과 공감이 중요합니다","작은 것부터 함께 해결해 나가세요","시간이 필요하다면 여유를 가지세요"]},spiritual:{focusAreas:["내면의 목소리","영적 성장","깨달음","방향성"],interpretationTips:["은둔자는 내면 탐구와 성찰을 나타냅니다","여사제는 직관과 내면의 지혜를 의미합니다","별은 희망과 영감을, 달은 잠재의식을 나타냅니다","메이저 아르카나는 영혼의 여정을 상징합니다"],actionAdvice:["명상이나 성찰의 시간을 가지세요","내면의 목소리에 귀 기울이세요","서두르지 말고 천천히 나아가세요","의미 있는 경험을 추구하세요"]},decision:{focusAreas:["선택지 분석","장단점","결과 예측","직관"],interpretationTips:["연인 카드는 중요한 선택의 순간을 나타냅니다","검 2는 결정의 어려움과 딜레마를 의미합니다","정의 카드는 공정한 판단과 균형을 암시합니다","각 선택지의 결과를 신중히 평가하세요"],actionAdvice:["충분한 정보를 수집하세요","장단점을 객관적으로 비교하세요","직관도 중요하게 고려하세요","결정 후에는 흔들리지 말고 나아가세요"]},general:{focusAreas:["전반적 흐름","주요 이슈","기회와 도전","방향성"],interpretationTips:["메이저 아르카나는 중요한 생애 사건을 나타냅니다","수트의 흐름을 보고 전체적 테마를 파악하세요","긍정과 부정의 균형을 살펴보세요","과거-현재-미래의 연결을 이해하세요"],actionAdvice:["현재 상황을 객관적으로 파악하세요","우선순위를 정하고 집중하세요","균형 잡힌 삶을 추구하세요","변화를 두려워하지 마세요"]}};const Ko={"The Fool":{upright:"immediate",reversed:"waiting"},"The Magician":{upright:"immediate",reversed:"soon"},"The High Priestess":{upright:"waiting",reversed:"gradual"},"The Empress":{upright:"gradual",reversed:"mid-term"},"The Emperor":{upright:"mid-term",reversed:"long-term"},"The Hierophant":{upright:"mid-term",reversed:"waiting"},"The Lovers":{upright:"soon",reversed:"waiting"},"The Chariot":{upright:"immediate",reversed:"mid-term"},Strength:{upright:"gradual",reversed:"waiting"},"The Hermit":{upright:"long-term",reversed:"mid-term"},"Wheel of Fortune":{upright:"cyclical",reversed:"waiting"},Justice:{upright:"mid-term",reversed:"long-term"},"The Hanged Man":{upright:"waiting",reversed:"gradual"},Death:{upright:"soon",reversed:"gradual"},Temperance:{upright:"gradual",reversed:"waiting"},"The Devil":{upright:"immediate",reversed:"soon"},"The Tower":{upright:"immediate",reversed:"soon"},"The Star":{upright:"near-future",reversed:"mid-term"},"The Moon":{upright:"cyclical",reversed:"waiting"},"The Sun":{upright:"soon",reversed:"near-future"},Judgement:{upright:"soon",reversed:"mid-term"},"The World":{upright:"near-future",reversed:"long-term"},"Ace of Wands":{upright:"immediate",reversed:"soon"},"Two of Wands":{upright:"soon",reversed:"mid-term"},"Three of Wands":{upright:"near-future",reversed:"mid-term"},"Four of Wands":{upright:"soon",reversed:"near-future"},"Five of Wands":{upright:"immediate",reversed:"soon"},"Six of Wands":{upright:"soon",reversed:"near-future"},"Seven of Wands":{upright:"immediate",reversed:"soon"},"Eight of Wands":{upright:"immediate",reversed:"soon"},"Nine of Wands":{upright:"waiting",reversed:"gradual"},"Ten of Wands":{upright:"near-future",reversed:"mid-term"},"Ace of Cups":{upright:"soon",reversed:"near-future"},"Two of Cups":{upright:"soon",reversed:"near-future"},"Three of Cups":{upright:"soon",reversed:"near-future"},"Four of Cups":{upright:"waiting",reversed:"gradual"},"Five of Cups":{upright:"gradual",reversed:"soon"},"Six of Cups":{upright:"cyclical",reversed:"near-future"},"Seven of Cups":{upright:"waiting",reversed:"gradual"},"Eight of Cups":{upright:"soon",reversed:"near-future"},"Nine of Cups":{upright:"near-future",reversed:"mid-term"},"Ten of Cups":{upright:"long-term",reversed:"mid-term"},"Ace of Swords":{upright:"immediate",reversed:"soon"},"Two of Swords":{upright:"waiting",reversed:"soon"},"Three of Swords":{upright:"immediate",reversed:"soon"},"Four of Swords":{upright:"waiting",reversed:"soon"},"Five of Swords":{upright:"immediate",reversed:"soon"},"Six of Swords":{upright:"gradual",reversed:"mid-term"},"Seven of Swords":{upright:"immediate",reversed:"soon"},"Eight of Swords":{upright:"waiting",reversed:"gradual"},"Nine of Swords":{upright:"immediate",reversed:"soon"},"Ten of Swords":{upright:"immediate",reversed:"soon"},"Ace of Pentacles":{upright:"soon",reversed:"near-future"},"Two of Pentacles":{upright:"cyclical",reversed:"gradual"},"Three of Pentacles":{upright:"gradual",reversed:"mid-term"},"Four of Pentacles":{upright:"waiting",reversed:"gradual"},"Five of Pentacles":{upright:"gradual",reversed:"near-future"},"Six of Pentacles":{upright:"cyclical",reversed:"gradual"},"Seven of Pentacles":{upright:"mid-term",reversed:"long-term"},"Eight of Pentacles":{upright:"gradual",reversed:"mid-term"},"Nine of Pentacles":{upright:"long-term",reversed:"mid-term"},"Ten of Pentacles":{upright:"long-term",reversed:"mid-term"},"Page of Wands":{upright:"soon",reversed:"near-future"},"Knight of Wands":{upright:"immediate",reversed:"soon"},"Queen of Wands":{upright:"soon",reversed:"near-future"},"King of Wands":{upright:"near-future",reversed:"mid-term"},"Page of Cups":{upright:"soon",reversed:"near-future"},"Knight of Cups":{upright:"gradual",reversed:"near-future"},"Queen of Cups":{upright:"near-future",reversed:"mid-term"},"King of Cups":{upright:"mid-term",reversed:"long-term"},"Page of Swords":{upright:"immediate",reversed:"soon"},"Knight of Swords":{upright:"immediate",reversed:"soon"},"Queen of Swords":{upright:"soon",reversed:"near-future"},"King of Swords":{upright:"near-future",reversed:"mid-term"},"Page of Pentacles":{upright:"gradual",reversed:"mid-term"},"Knight of Pentacles":{upright:"gradual",reversed:"mid-term"},"Queen of Pentacles":{upright:"mid-term",reversed:"long-term"},"King of Pentacles":{upright:"long-term",reversed:"mid-term"}},Bo={immediate:{period:"지금 당장 (1-3일 이내)",action:"**즉시 행동**하세요. 지체하면 기회를 놓칠 수 있습니다."},soon:{period:"곧 (1-2주 이내)",action:"**빠르게 준비**하고 실행하세요. 시기가 다가오고 있습니다."},"near-future":{period:"가까운 미래 (1-2개월)",action:"**조금 더 준비**하세요. 아직 시간이 있지만 서두르는 것이 좋습니다."},"mid-term":{period:"중기적 (3-6개월)",action:"**차근차근 계획**하고 진행하세요. 서두르지 말고 꾸준히 노력하세요."},"long-term":{period:"장기적 (6개월 이상)",action:"**장기적 관점**에서 접근하세요. 인내심을 가지고 기반을 다지세요."},gradual:{period:"점진적 (단계별 진행)",action:"**한 걸음씩** 나아가세요. 급격한 변화보다는 꾸준한 노력이 필요합니다."},cyclical:{period:"순환적 (반복적)",action:"**타이밍을 잘 포착**하세요. 기회는 다시 돌아오니 놓치지 마세요."},waiting:{period:"대기 필요 (아직 아님)",action:"**서두르지 마세요**. 지금은 관찰하고 준비하는 시기입니다."}};function Io(e,t){const r=Ko[e.name];if(!r)return{attribute:"near-future",message:"가까운 미래에 변화가 일어날 것입니다.",actionWindow:"1-2개월 이내에 행동하세요."};const a=t?r.reversed:r.upright,s=Bo[a];return{attribute:a,message:`이 카드의 시기는 **${s.period}**입니다.`,actionWindow:s.action}}function zo(e,t,r){const a=Ao(e);if(!a)return"";const s=t.map(e=>{const t=e.isReversed?"역방향":"정방향",r=e.isReversed?e.card.reversedMeaning:e.card.uprightMeaning,a=e.isReversed?e.card.reversedKeywords:e.card.uprightKeywords,s=Lo(e.card,e.isReversed),n=Io(e.card,e.isReversed);return`\n${e.position}. ${e.positionName} (${e.positionMeaning})\n   카드: ${e.card.nameKo} (${e.card.name})\n   방향: ${t}\n   길흉: ${s.status} - ${s.message}\n   타이밍: ${n.message} ${n.actionWindow}\n   의미: ${r}\n   키워드: ${a.join(", ")}\n   상징: ${e.card.symbolism}\n      `.trim()}).join("\n\n"),n=function(e){const t=e.toLowerCase(),r={love:0,career:0,finance:0,health:0,relationship:0,spiritual:0,decision:0,general:0};for(const[n,i]of Object.entries(Ro))for(const e of i)t.includes(e)&&(r[n]+=1);let a="general",s=0;for(const[n,i]of Object.entries(r))i>s&&(s=i,a=n);return a}(r),i=Oo[n],l={love:"연애/사랑",career:"직업/커리어",finance:"재정/금전",health:"건강",relationship:"인간관계",spiritual:"영적 성장",decision:"선택/결정",general:"종합"}[n],d=function(e){const t=[];if(e.length<2)return t;const r=e.filter(e=>"major"===e.card.suit);r.length>=3&&t.push({type:"amplification",cards:r.map(e=>e.card),positions:r.map(e=>e.positionName),strength:"strong",message:"**메이저 아르카나가 3장 이상 출현**했습니다. 이는 **인생의 중대한 전환점**을 의미합니다.",advice:"이 시기는 운명적인 변화가 일어나는 중요한 순간입니다. 신중하되 과감하게 결정을 내리세요."});const a=["wands","cups","swords","pentacles"];for(const l of a){const r=e.filter(e=>e.card.suit===l);if(r.length>=3){const e={wands:{message:"**지팡이 수트 3장 이상** - 행동, 열정, 창조성이 핵심 테마입니다.",advice:"지금은 **적극적으로 행동**할 때입니다. 아이디어를 실행에 옮기고 새로운 프로젝트를 시작하세요."},cups:{message:"**컵 수트 3장 이상** - 감정, 관계, 사랑이 핵심 테마입니다.",advice:"**감정적 연결**에 주목하세요. 관계를 깊이 있게 발전시키고 마음의 소리에 귀 기울이세요."},swords:{message:"**검 수트 3장 이상** - 사고, 갈등, 결단이 핵심 테마입니다.",advice:"**명확한 판단**이 필요합니다. 복잡한 상황을 논리적으로 분석하고 어려운 결정을 내려야 합니다."},pentacles:{message:"**펜타클 수트 3장 이상** - 물질, 재정, 실용성이 핵심 테마입니다.",advice:"**현실적 계획**에 집중하세요. 재정 관리, 커리어 발전, 장기적 안정성을 추구하세요."}};t.push({type:"synergy",cards:r.map(e=>e.card),positions:r.map(e=>e.positionName),strength:"strong",message:e[l].message,advice:e[l].advice})}}for(let l=0;l<e.length-1;l++){const r=e[l],a=e[l+1],s=Lo(r.card,r.isReversed),n=Lo(a.card,a.isReversed);("매우 긍정적"===s.status&&"매우 부정적"===n.status||"매우 부정적"===s.status&&"매우 긍정적"===n.status)&&t.push({type:"conflict",cards:[r.card,a.card],positions:[r.positionName,a.positionName],strength:"strong",message:`**극단적 대조**가 나타났습니다. ${r.positionName}과 ${a.positionName} 사이에 큰 변화가 있습니다.`,advice:"급격한 변화에 대비하세요. 좋은 상황에서 방심하지 말고, 어려운 상황에서도 희망을 잃지 마세요."})}const s=e.map(e=>e.card.name);if(s.includes("The Tower")&&s.includes("The Star")){const r=e.find(e=>"The Tower"===e.card.name),a=e.find(e=>"The Star"===e.card.name);t.push({type:"transformation",cards:[r.card,a.card],positions:[r.positionName,a.positionName],strength:"strong",message:"**타워와 별의 조합** - 파괴 후 희망과 재건이 따릅니다.",advice:"현재의 위기는 새로운 시작을 위한 과정입니다. 무너진 것을 두려워하지 말고, 더 나은 미래를 준비하세요."})}if(s.includes("Death")&&s.includes("Judgement")){const r=e.find(e=>"Death"===e.card.name),a=e.find(e=>"Judgement"===e.card.name);t.push({type:"transformation",cards:[r.card,a.card],positions:[r.positionName,a.positionName],strength:"strong",message:"**죽음과 심판의 조합** - 과거를 완전히 끝내고 새롭게 태어납니다.",advice:"과거에 대한 집착을 버리세요. 완전히 새로운 시작이 가능한 시기입니다. 과감하게 변화하세요."})}if(s.includes("The Lovers")&&s.includes("The Devil")){const r=e.find(e=>"The Lovers"===e.card.name),a=e.find(e=>"The Devil"===e.card.name);t.push({type:"warning",cards:[r.card,a.card],positions:[r.positionName,a.positionName],strength:"strong",message:"**연인과 악마의 조합** - 관계에서 집착, 의존, 유혹의 위험이 있습니다.",advice:"건강하지 못한 관계 패턴을 경계하세요. 사랑이 속박이 되지 않도록 주의하세요."})}const n=e.filter(e=>e.card.name.startsWith("Ace of"));n.length>=2&&t.push({type:"opportunity",cards:n.map(e=>e.card),positions:n.map(e=>e.positionName),strength:"strong",message:"**에이스 카드 다중 출현** - 여러 분야에서 새로운 시작의 기회가 옵니다.",advice:"지금은 씨앗을 뿌릴 때입니다. 다양한 가능성에 열린 마음으로 도전하세요."});const i=["Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten"];for(const l of i){const r=e.filter(e=>e.card.name.includes(l));if(r.length>=3){const e={Two:{message:"**숫자 2가 반복** - 선택, 균형, 파트너십이 중요합니다.",advice:"협력과 조화를 추구하세요. 중요한 선택을 앞두고 있습니다."},Three:{message:"**숫자 3이 반복** - 창조, 성장, 표현이 활발합니다.",advice:"창의성을 발휘하고 소통하세요. 협업을 통해 더 큰 성과를 낼 수 있습니다."},Four:{message:"**숫자 4가 반복** - 안정, 기초, 구조가 핵심입니다.",advice:"탄탄한 기반을 다지세요. 서두르지 말고 차근차근 진행하세요."},Five:{message:"**숫자 5가 반복** - 변화, 도전, 갈등이 많습니다.",advice:"변화를 받아들이세요. 어려움 속에서 성장의 기회를 찾으세요."},Six:{message:"**숫자 6이 반복** - 조화, 책임, 치유가 필요합니다.",advice:"균형을 회복하세요. 타인에 대한 책임과 자신에 대한 돌봄 사이의 조화를 찾으세요."},Seven:{message:"**숫자 7이 반복** - 성찰, 평가, 전략이 중요합니다.",advice:"깊이 생각하세요. 행동하기 전에 현재 상황을 신중히 평가하세요."},Eight:{message:"**숫자 8이 반복** - 움직임, 발전, 힘이 증가합니다.",advice:"적극적으로 행동하세요. 추진력을 가지고 목표를 향해 나아가세요."},Nine:{message:"**숫자 9가 반복** - 완성, 성취, 완결이 가까워집니다.",advice:"마무리에 집중하세요. 거의 다 왔으니 끝까지 완수하세요."},Ten:{message:"**숫자 10이 반복** - 순환의 끝, 새로운 시작이 옵니다.",advice:"한 사이클이 끝나고 있습니다. 배운 것을 정리하고 새로운 단계로 나아가세요."}};e[l]&&t.push({type:"synergy",cards:r.map(e=>e.card),positions:r.map(e=>e.positionName),strength:"moderate",message:e[l].message,advice:e[l].advice})}}if(3===e.length&&e.some(e=>"과거"===e.positionName)&&e.some(e=>"현재"===e.positionName)&&e.some(e=>"미래"===e.positionName)){const r=e.find(e=>"과거"===e.positionName),a=e.find(e=>"현재"===e.positionName),s=e.find(e=>"미래"===e.positionName),n=Lo(r.card,r.isReversed),i=Lo(a.card,a.isReversed),l=Lo(s.card,s.isReversed);(n.status.includes("부정")&&l.status.includes("긍정")||"부정적"===n.status&&"중립"===i.status&&l.status.includes("긍정"))&&t.push({type:"opportunity",cards:[r.card,a.card,s.card],positions:["과거","현재","미래"],strength:"strong",message:"**상승 추세** - 어려움을 극복하고 점점 좋아지는 흐름입니다.",advice:"현재의 노력을 계속하세요. 상황이 긍정적으로 변화하고 있습니다."}),(n.status.includes("긍정")&&l.status.includes("부정")||n.status.includes("긍정")&&"중립"===i.status&&l.status.includes("부정"))&&t.push({type:"warning",cards:[r.card,a.card,s.card],positions:["과거","현재","미래"],strength:"strong",message:"**하락 추세** - 현재 방향을 유지하면 상황이 악화될 수 있습니다.",advice:"지금이 변화의 시점입니다. 현재의 접근 방식을 재검토하고 수정하세요."})}return t}(t);let o="";d.length>0&&(o=`\n\n카드 조합 특이사항:\n${d.map((e,t)=>`${t+1}. [${{synergy:"시너지",conflict:"충돌",amplification:"증폭",transformation:"변형",balance:"균형",warning:"경고",opportunity:"기회"}[e.type]}] ${e.message}\n   조언: ${e.advice}\n   관련 카드: ${e.cards.map(e=>e.nameKo).join(", ")}`).join("\n\n")}`);const c=function(e){const t={immediate:0,soon:0,"near-future":0,"mid-term":0,"long-term":0,gradual:0,cyclical:0,waiting:0};e.forEach(e=>{const r=Io(e.card,e.isReversed);t[r.attribute]+=1});let r=0,a="near-future";for(const[o,c]of Object.entries(t))c>r&&(r=c,a=o);const s=Bo[a];let n="";const i=[],l=t.immediate+t.soon,d=t.waiting+t.gradual;return l>=2?(n=`전체적으로 **빠른 행동**이 필요한 시기입니다. ${s.period}가 핵심입니다.`,i.push("지금이 결정과 행동의 시기입니다"),i.push("기회를 놓치지 않도록 신속하게 움직이세요"),i.push("직관을 믿고 과감하게 시작하세요")):d>=2?(n=`전체적으로 **신중하고 점진적인 접근**이 필요합니다. ${s.period}가 중요합니다.`,i.push("서두르지 말고 충분히 준비하세요"),i.push("장기적 관점에서 계획을 세우세요"),i.push("인내심을 가지고 단계적으로 진행하세요")):t.cyclical>=1?(n=`**타이밍이 중요**한 상황입니다. ${s.period}를 고려하세요.`,i.push("적절한 시기를 기다리세요"),i.push("기회가 다시 오면 놓치지 마세요"),i.push("주기적으로 상황을 점검하세요")):(n=`**균형 잡힌 시간 계획**이 필요합니다. ${s.period}를 염두에 두세요.`,i.push("급하거나 느린 것이 아닌, 적절한 타이밍을 찾으세요"),i.push("상황에 따라 유연하게 대응하세요"),i.push("필요하면 행동하고, 그렇지 않으면 기다리세요")),{dominant:a,summary:n,recommendations:i}}(t),m=`\n\n타이밍 분석:\n${c.summary}\n주요 행동 시기:\n${c.recommendations.map((e,t)=>`${t+1}. ${e}`).join("\n")}`,x=function(e){const t={critical:0,high:0,moderate:0,low:0,safe:0},r=[],a=[],s=[];e.forEach(e=>{const a=Ho(e.card,e.isReversed);t[a.level]+=1,"critical"!==a.level&&"high"!==a.level||r.push(e)});let n="safe";t.critical>0||t.high>=2?n="critical":t.high>=1?n="high":t.moderate>=2?n="moderate":t.moderate>=1&&(n="low");let i="";"critical"===n?(i="🚨 **매우 위험한 상황**입니다. 즉각적인 행동이 필요합니다.",a.push("현재 상황은 심각하며, 신속하고 현명한 대응이 필수입니다"),s.push("모든 중요한 결정을 중단하고 상황을 재평가하세요"),s.push("전문가나 신뢰할 수 있는 조언자의 도움을 구하세요")):"high"===n?(i="⚠️ **위험도가 높습니다**. 매우 신중한 접근이 필요합니다.",a.push("잘못된 선택이 큰 문제를 초래할 수 있습니다"),s.push("모든 선택지를 신중하게 평가하고 위험을 최소화하세요")):"moderate"===n?(i="⚡ **주의가 필요**한 상황입니다. 신중하게 진행하세요.",a.push("예상치 못한 문제가 발생할 수 있으니 주의하세요"),s.push("계획을 철저히 검토하고 대비책을 마련하세요")):"low"===n?(i="💡 **전반적으로 안정적**이지만 작은 주의가 필요합니다.",s.push("기본적인 관리와 모니터링을 지속하세요")):(i="✅ **안전하고 긍정적**인 상황입니다.",s.push("현재의 좋은 흐름을 유지하면서 기회를 활용하세요"));return{maxLevel:n,summary:i,criticalCards:r,allWarnings:a,allPrecautions:s}}(t);let g=`\n\n위험도 분석:\n${x.summary}`;return x.allWarnings.length>0&&(g+=`\n\n경고사항:\n${x.allWarnings.map((e,t)=>`${t+1}. ${e}`).join("\n")}`),g+=`\n\n예방 및 대응책:\n${x.allPrecautions.map((e,t)=>`${t+1}. ${e}`).join("\n")}`,x.criticalCards.length>0&&(g+=`\n\n특히 주의할 카드:\n${x.criticalCards.map(e=>{const t=Ho(e.card,e.isReversed);return`- ${e.positionName} (${e.card.nameKo}): ${t.message}`}).join("\n")}`),`\n타로 리딩 요청\n\n사용자 질문: ${r}\n질문 카테고리: ${l}\n\n스프레드: ${a.nameKo} (${a.name})\n설명: ${a.description}\n\n뽑힌 카드들:\n${s}${o}${m}${g}\n\n---\n\n상황별 해석 가이드 (${l}):\n\n집중 영역: ${i.focusAreas.join(", ")}\n\n핵심 해석 팁:\n${i.interpretationTips.map((e,t)=>`${t+1}. ${e}`).join("\n")}\n\n권장 행동:\n${i.actionAdvice.map((e,t)=>`${t+1}. ${e}`).join("\n")}\n\n---\n\n위 타로 카드들을 바탕으로 사용자의 질문에 대한 명확하고 직접적인 해석을 제공해주세요.\n\n필수 요구사항:\n1. **길흉 판단을 분명히 하세요**\n   - 좋은 카드: "매우 긍정적입니다", "좋은 결과가 예상됩니다", "유리한 상황입니다"\n   - 나쁜 카드: "어려운 상황입니다", "주의가 필요합니다", "불리한 조건입니다"\n   - 중립 카드: "가능성이 열려있습니다", "당신의 선택에 달려있습니다"\n\n2. **구체적인 조언을 하세요**\n   - "~하는 것이 좋습니다", "~은 피하세요", "~에 집중하세요"\n   - 막연한 조언 대신 실행 가능한 행동 지침\n\n3. **현실적으로 말하세요**\n   - 과도한 낙관이나 위로 금지\n   - 객관적 사실과 가능성 중심으로 전달\n   - "모든 것이 잘 될 거예요" 같은 애매한 표현 금지\n\n4. **각 위치별로 명확한 메시지**\n   - 각 카드가 해당 위치에서 의미하는 바를 직접적으로 설명\n   - 긍정/부정/중립을 명확히 구분하여 전달\n\n5. **카드 조합 해석 반영**\n   ${d.length>0?`- 위에 제시된 ${d.length}개의 카드 조합 특이사항을 반드시 해석에 반영하세요\n   - 조합에서 발견된 시너지, 충돌, 변형 등을 해석에 포함하세요\n   - 조합 분석에서 나온 조언을 종합 해석에 통합하세요`:"- 개별 카드의 의미를 종합하여 해석하세요"}\n\n6. **상황별 맞춤 해석 (${l})**\n   - 위에 제시된 "상황별 해석 가이드"를 적극 활용하세요\n   - 집중 영역: ${i.focusAreas.join(", ")}에 초점을 맞추세요\n   - 핵심 해석 팁을 반드시 적용하여 ${l} 상황에 특화된 해석을 제공하세요\n   - 권장 행동 지침을 구체적으로 반영하세요\n   - 질문의 맥락에 맞는 실질적이고 구체적인 조언을 제공하세요\n\n7. **타이밍 정보 적극 반영**\n   - 위에 제시된 "타이밍 분석"을 반드시 활용하세요\n   - 각 카드의 시기 정보(즉시, 곧, 가까운 미래, 중기적, 장기적, 점진적, 순환적, 대기)를 구체적으로 언급하세요\n   - "언제" 행동해야 하는지 명확하게 전달하세요 (예: "1-2주 이내", "3-6개월 후", "지금 당장" 등)\n   - 급한 것과 느긋한 것을 구분하여 우선순위를 제시하세요\n   - ${c.summary}를 해석에 적극 반영하세요\n\n8. **위험도 평가 명확히 전달**\n   - 위에 제시된 "위험도 분석"을 반드시 반영하세요\n   - 현재 상황의 위험 수준(${x.maxLevel})을 솔직하고 명확하게 전달하세요\n   ${x.allWarnings.length>0?`- 경고사항 ${x.allWarnings.length}가지를 구체적으로 언급하고 왜 위험한지 설명하세요`:""}\n   - 예방 및 대응책을 실행 가능한 형태로 제시하세요\n   ${x.criticalCards.length>0?`- 특히 주의할 카드 ${x.criticalCards.length}장에 대해서는 별도로 강조하세요`:""}\n   - 위험도가 높을수록 더 직접적이고 강하게 경고하세요\n   - 안전한 상황이면 "안심하셔도 됩니다", "긍정적인 상황입니다"라고 명확히 말하세요\n\n답변 구조:\n1. **전체 흐름 요약** (2-3문장, 길흉 판단 포함${d.length>0?", 주요 카드 조합 언급":""}, 타이밍 요약 포함, 위험도 수준 언급, ${l} 맥락 반영)\n2. **각 카드 위치별 해석** (위치마다 긍정/부정 명시, 각 카드의 타이밍 정보 포함, ${l} 관점에서 설명)\n${d.length>0?"3. **카드 조합의 의미** (조합에서 발견된 특별한 패턴과 그 의미)\n4":"3"}. **위험도 평가와 경고** (현재 위험 수준 명시${x.allWarnings.length>0?", 경고사항 설명":""}${x.criticalCards.length>0?", 특히 주의할 카드 강조":""}, 예방 및 대응책 제시)\n${d.length>0?"5":"4"}. **${l} 맞춤 행동 지침** (${l} 상황에 특화된 구체적 조언 3가지, 피해야 할 일 2가지, 위험도에 따른 우선순위 반영)\n${d.length>0?"6":"5"}. **타이밍과 행동 계획** (각 행동을 언제 해야 하는지 구체적 시기 명시, ${c.recommendations.join(", ")} 반영, 위험도에 따른 긴급도 조정, ${l} 특성 고려)\n  `.trim()}const qo={"The Fool":{upright:"moderate",reversed:"high"},"The Magician":{upright:"safe",reversed:"moderate"},"The High Priestess":{upright:"safe",reversed:"moderate"},"The Empress":{upright:"safe",reversed:"moderate"},"The Emperor":{upright:"safe",reversed:"moderate"},"The Hierophant":{upright:"safe",reversed:"moderate"},"The Lovers":{upright:"safe",reversed:"high"},"The Chariot":{upright:"safe",reversed:"moderate"},Strength:{upright:"safe",reversed:"moderate"},"The Hermit":{upright:"low",reversed:"moderate"},"Wheel of Fortune":{upright:"low",reversed:"moderate"},Justice:{upright:"safe",reversed:"moderate"},"The Hanged Man":{upright:"moderate",reversed:"low"},Death:{upright:"high",reversed:"moderate"},Temperance:{upright:"safe",reversed:"moderate"},"The Devil":{upright:"critical",reversed:"high"},"The Tower":{upright:"critical",reversed:"high"},"The Star":{upright:"safe",reversed:"moderate"},"The Moon":{upright:"high",reversed:"moderate"},"The Sun":{upright:"safe",reversed:"low"},Judgement:{upright:"moderate",reversed:"moderate"},"The World":{upright:"safe",reversed:"moderate"},"Ace of Wands":{upright:"safe",reversed:"moderate"},"Two of Wands":{upright:"low",reversed:"moderate"},"Three of Wands":{upright:"safe",reversed:"moderate"},"Four of Wands":{upright:"safe",reversed:"moderate"},"Five of Wands":{upright:"moderate",reversed:"moderate"},"Six of Wands":{upright:"safe",reversed:"moderate"},"Seven of Wands":{upright:"moderate",reversed:"moderate"},"Eight of Wands":{upright:"low",reversed:"moderate"},"Nine of Wands":{upright:"moderate",reversed:"moderate"},"Ten of Wands":{upright:"moderate",reversed:"moderate"},"Ace of Cups":{upright:"safe",reversed:"moderate"},"Two of Cups":{upright:"safe",reversed:"moderate"},"Three of Cups":{upright:"safe",reversed:"moderate"},"Four of Cups":{upright:"moderate",reversed:"low"},"Five of Cups":{upright:"high",reversed:"moderate"},"Six of Cups":{upright:"safe",reversed:"moderate"},"Seven of Cups":{upright:"moderate",reversed:"moderate"},"Eight of Cups":{upright:"moderate",reversed:"moderate"},"Nine of Cups":{upright:"safe",reversed:"moderate"},"Ten of Cups":{upright:"safe",reversed:"moderate"},"Ace of Swords":{upright:"low",reversed:"moderate"},"Two of Swords":{upright:"moderate",reversed:"moderate"},"Three of Swords":{upright:"critical",reversed:"high"},"Four of Swords":{upright:"low",reversed:"moderate"},"Five of Swords":{upright:"high",reversed:"moderate"},"Six of Swords":{upright:"low",reversed:"moderate"},"Seven of Swords":{upright:"high",reversed:"moderate"},"Eight of Swords":{upright:"high",reversed:"moderate"},"Nine of Swords":{upright:"critical",reversed:"high"},"Ten of Swords":{upright:"critical",reversed:"high"},"Ace of Pentacles":{upright:"safe",reversed:"moderate"},"Two of Pentacles":{upright:"low",reversed:"moderate"},"Three of Pentacles":{upright:"safe",reversed:"moderate"},"Four of Pentacles":{upright:"moderate",reversed:"moderate"},"Five of Pentacles":{upright:"critical",reversed:"high"},"Six of Pentacles":{upright:"safe",reversed:"moderate"},"Seven of Pentacles":{upright:"low",reversed:"moderate"},"Eight of Pentacles":{upright:"safe",reversed:"moderate"},"Nine of Pentacles":{upright:"safe",reversed:"moderate"},"Ten of Pentacles":{upright:"safe",reversed:"moderate"},"Page of Wands":{upright:"safe",reversed:"moderate"},"Knight of Wands":{upright:"low",reversed:"moderate"},"Queen of Wands":{upright:"safe",reversed:"moderate"},"King of Wands":{upright:"safe",reversed:"moderate"},"Page of Cups":{upright:"safe",reversed:"moderate"},"Knight of Cups":{upright:"low",reversed:"moderate"},"Queen of Cups":{upright:"safe",reversed:"moderate"},"King of Cups":{upright:"safe",reversed:"moderate"},"Page of Swords":{upright:"low",reversed:"moderate"},"Knight of Swords":{upright:"moderate",reversed:"moderate"},"Queen of Swords":{upright:"low",reversed:"moderate"},"King of Swords":{upright:"safe",reversed:"moderate"},"Page of Pentacles":{upright:"safe",reversed:"moderate"},"Knight of Pentacles":{upright:"safe",reversed:"moderate"},"Queen of Pentacles":{upright:"safe",reversed:"moderate"},"King of Pentacles":{upright:"safe",reversed:"moderate"}},Wo={critical:{emoji:"🚨",label:"치명적 위험",description:"**즉각적인 대응이 필요**합니다. 현재 상황이 매우 심각하며, 지금 행동하지 않으면 큰 손실이나 위기가 발생할 수 있습니다."},high:{emoji:"⚠️",label:"높은 위험",description:"**심각한 주의가 필요**합니다. 잘못된 선택이나 방치할 경우 상황이 악화될 가능성이 높습니다."},moderate:{emoji:"⚡",label:"중간 위험",description:"**주의가 필요**합니다. 신중하게 접근하고 예방적 조치를 취하는 것이 좋습니다."},low:{emoji:"💡",label:"낮은 위험",description:"**가벼운 경계가 필요**합니다. 큰 문제는 없으나 방심하지 말고 꾸준히 관리하세요."},safe:{emoji:"✅",label:"안전",description:"**긍정적인 상황**입니다. 현재 방향을 유지하면서 기회를 적극 활용하세요."}};function Ho(e,t){const r=qo[e.name];if(!r)return{level:"moderate",message:"주의가 필요한 상황입니다.",warnings:["상황을 신중하게 판단하세요"],precautions:["예방적 조치를 고려하세요"]};const a=t?r.reversed:r.upright,s=Wo[a],n=[],i=[];switch(a){case"critical":n.push("지금 즉시 행동하지 않으면 회복 불가능한 손실이 발생할 수 있습니다"),n.push("현재 상황은 매우 위험하며 긴급한 대응이 필요합니다"),i.push("즉시 전문가의 조언을 구하세요"),i.push("모든 결정을 중단하고 상황을 재평가하세요"),i.push("신뢰할 수 있는 사람들과 상의하세요");break;case"high":n.push("잘못된 판단이 큰 문제로 이어질 수 있습니다"),n.push("현재 방향을 유지하면 상황이 악화될 가능성이 높습니다"),i.push("현재 계획을 신중하게 재검토하세요"),i.push("위험 요소를 식별하고 대비책을 마련하세요"),i.push("성급한 결정을 피하고 충분히 고민하세요");break;case"moderate":n.push("방심하면 예상치 못한 문제가 발생할 수 있습니다"),i.push("신중하게 접근하고 준비를 철저히 하세요"),i.push("예방적 조치를 미리 준비하세요"),i.push("정기적으로 상황을 점검하세요");break;case"low":n.push("작은 실수가 나중에 문제가 될 수 있습니다"),i.push("기본적인 주의를 게을리하지 마세요"),i.push("꾸준히 관리하고 모니터링하세요");break;case"safe":n.push("현재는 안전하지만 방심은 금물입니다"),i.push("현재의 좋은 상황을 유지하기 위해 노력하세요"),i.push("기회를 적극 활용하되 과신은 피하세요")}return{level:a,message:`${s.emoji} ${s.label}: ${s.description}`,warnings:n,precautions:i}}function Yo({card:e,isReversed:t=!1,isFlipped:r=!1,onClick:a,className:n=""}){return s.jsxs("div",{onClick:a,className:`relative cursor-pointer transition-all duration-500 hover:scale-105 ${n}`,style:{transformStyle:"preserve-3d",transform:r?"rotateY(180deg)":"rotateY(0deg)"},children:[s.jsx("div",{className:"absolute inset-0 rounded-xl shadow-lg overflow-hidden",style:{backfaceVisibility:"hidden"},children:s.jsx("img",{src:"/image/back/back.webp",alt:"타로 카드 뒷면",className:"w-full h-full object-cover"})}),s.jsx("div",{className:"absolute inset-0 bg-white rounded-xl shadow-lg border-2 border-gray-300 overflow-hidden",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:s.jsxs("div",{className:"relative w-full h-full "+(t?"rotate-180":""),children:[s.jsx("div",{className:"absolute inset-0",children:e.imagePath?s.jsx("img",{src:e.imagePath,alt:e.nameKo,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:s.jsx("div",{className:"text-5xl text-gray-400 font-bold",children:e.number})})}),s.jsxs("div",{className:"absolute top-0 left-0 right-0 text-center bg-gradient-to-b from-black/70 to-transparent py-2 px-2",children:[s.jsx("div",{className:"text-[10px] font-semibold text-white/90 mb-0.5",children:"major"===e.suit?"Major Arcana":e.suit.toUpperCase()}),s.jsx("div",{className:"text-xs font-bold text-white leading-tight drop-shadow-lg",children:e.nameKo})]}),t&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 text-center bg-gradient-to-t from-red-600/90 to-transparent py-1.5",children:s.jsx("div",{className:"text-xs font-semibold text-white drop-shadow-lg",children:"↓ 역방향 ↓"})})]})})]})}function Uo({card:e,isReversed:t,positionName:r,positionMeaning:a}){const n=t?e.reversedMeaning:e.uprightMeaning,i=t?e.reversedKeywords:e.uprightKeywords;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[r&&s.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:r}),a&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.nameKo}),s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold "+(t?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"),children:t?"역방향 ↓":"정방향 ↑"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.name})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"카드 의미"}),s.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:n})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"키워드"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((e,t)=>s.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:e},t))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"상징"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.symbolism})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"해석"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]})}function Go({cardPositions:e,spreadName:t,spreadDescription:r,onCardClick:n}){const[i,l]=a.useState(null),[d,o]=a.useState(new Set);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r})]}),s.jsx("div",{className:`grid ${(()=>{const t=e.length;return 1===t?"grid-cols-1":3===t?"grid-cols-1 sm:grid-cols-3":5===t?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5":6===t?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3":7===t?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4":10===t?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5":13===t?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-7":"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"})()} gap-8 justify-items-center`,children:e.map(e=>s.jsxs("div",{className:"flex flex-col items-center space-y-4 max-w-[180px]",children:[s.jsxs("div",{className:"text-center px-3 py-2 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 rounded-lg w-full",children:[s.jsxs("div",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 mb-1",children:[e.position,". ",e.positionName]}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 leading-tight",children:e.positionMeaning})]}),s.jsx(Yo,{card:e.card,isReversed:e.isReversed,isFlipped:d.has(e.position),onClick:()=>(e=>{o(t=>{const r=new Set(t);return r.has(e.position)?r.delete(e.position):r.add(e.position),r}),l(e),null==n||n(e)})(e),className:"w-40 h-64 shadow-xl"}),d.has(e.position)&&s.jsxs("div",{className:"text-center px-2 py-1 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700 w-full",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 truncate",children:e.card.nameKo}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-0.5",children:e.isReversed?"역방향 ↓":"정방향 ↑"})]})]},e.position))}),s.jsx("div",{className:"mt-24 mb-12 pt-8 border-t-2 border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-6 px-4",children:[s.jsx("button",{onClick:()=>{const t=new Set(e.map(e=>e.position));o(t)},className:"px-10 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-lg font-bold rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all shadow-2xl hover:shadow-3xl hover:scale-105 transform relative z-10",children:"🔓 모든 카드 펼치기"}),s.jsx("button",{onClick:()=>o(new Set),className:"px-10 py-4 bg-gradient-to-r from-gray-500 to-gray-600 text-white text-lg font-bold rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all shadow-2xl hover:shadow-3xl hover:scale-105 transform relative z-10",children:"🔒 모든 카드 뒤집기"})]})}),i&&d.has(i.position)&&s.jsxs("div",{className:"mt-12 pt-8 border-t-4 border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"mb-4 text-center",children:s.jsx("h3",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:"📖 선택한 카드 상세 정보"})}),s.jsx(Uo,{card:i.card,isReversed:i.isReversed,positionName:i.positionName,positionMeaning:i.positionMeaning})]})]})}const Qo="tarot_readings";function Vo(){try{const e=localStorage.getItem(Qo);if(!e)return[];return JSON.parse(e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}catch(e){return[]}}function Jo({onClose:e}){const[t,r]=a.useState([]),[n,i]=a.useState(null);a.useEffect(()=>{l()},[]);const l=()=>{const e=Vo();r(e)},d=e=>{if(window.confirm("이 타로 기록을 삭제하시겠습니까?")){const t=function(e){try{const t=Vo(),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(localStorage.setItem(Qo,JSON.stringify(r)),!0)}catch(t){return!1}}(e);t&&(l(),n===e&&i(null))}};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"📜 타로 기록"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["총 ",t.length,"개의 기록"]})]}),s.jsxs("div",{className:"flex gap-2",children:[t.length>0&&s.jsx("button",{onClick:()=>{try{const e=function(){const e=Vo();return JSON.stringify(e,null,2)}(),t=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`타로기록_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),alert("타로 기록을 내보냈습니다")}catch(e){alert("내보내기 실패")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all text-sm",children:"내보내기"}),s.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all text-sm",children:"닫기"})]})]}),0===t.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🔮"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"아직 저장된 타로 기록이 없습니다"})]}):s.jsx("div",{className:"space-y-4",children:t.map(e=>{return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 cursor-pointer hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-all",onClick:()=>i(n===e.id?null:e.id),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded-full font-semibold",children:e.spreadName}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:(t=e.createdAt,new Date(t).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.question}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.cards.length,"장의 카드"]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("button",{onClick:t=>{t.stopPropagation(),d(e.id)},className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-all",title:"삭제",children:"🗑️"}),s.jsx("div",{className:"text-gray-400",children:n===e.id?"▲":"▼"})]})]})}),n===e.id&&s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"질문"}),s.jsx("p",{className:"text-gray-900 dark:text-white",children:e.question})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"카드 배치"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.cards.map((e,t)=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm mb-1",children:e.positionName}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.positionMeaning})]}),s.jsx("div",{className:"mb-3",children:s.jsx("div",{className:"w-full h-48 relative",children:s.jsx(Yo,{card:e.card,isReversed:e.isReversed,isFlipped:!0,className:"w-full h-full"})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:e.card.nameKo}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:e.isReversed?"역방향 ↓":"정방향 ↑"})]})]},t))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"🤖"}),s.jsx("span",{children:"AI 타로 해석"})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:s.jsx("div",{className:"prose dark:prose-invert max-w-none",children:s.jsx("div",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200 text-sm",children:e.aiInterpretation})})})]})]})]},e.id);var t})})]})}function Zo(){const[e,t]=a.useState("select-spread"),[r,n]=a.useState(""),[i,l]=a.useState(""),[d,o]=a.useState([]),[c,m]=a.useState(""),[x,g]=a.useState(!1),[h,u]=a.useState(!1),p=()=>{const e=Po.find(e=>e.id===r);if(!e)return;const a=(s=e.cardCount,[..._o].sort(()=>Math.random()-.5).slice(0,s));var s;const n=function(e,t){const r=Ao(e);return r?t.length<r.cardCount?null:r.positions.map((e,r)=>({card:t[r],position:e.position,positionName:e.name,positionMeaning:e.meaning,isReversed:Math.random()>.5})):null}(r,a);n?(o(n),setTimeout(()=>{t("show-result")},1e3)):alert("카드 배치에 실패했습니다")},b=(e,t,r)=>{let a=`📖 **${r}** 타로 해석\n\n`;return a+=`💭 **질문**: ${t}\n\n`,a+="⚠️ *AI 서비스가 일시적으로 사용 불가능하여 심화 해석을 제공합니다.*\n\n",a+="---\n\n",a+="## 🎴 카드별 상세 해석\n\n",e.forEach((e,t)=>{const r=e.isReversed?"역방향 ↓":"정방향 ↑",s=e.isReversed?e.card.reversedMeaning:e.card.uprightMeaning,n=e.isReversed?e.card.reversedKeywords:e.card.uprightKeywords;a+=`### ${t+1}. ${e.positionName}: ${e.card.nameKo} (${r})\n\n`,a+=`**위치의 의미**: ${e.positionMeaning}\n\n`,a+=`**카드 해석**: ${s}\n\n`,a+=`**핵심 키워드**: ${n.join(" · ")}\n\n`,a+="**이 위치에서의 메시지**: ",a+=y(e),a+="\n\n---\n\n"}),a+="## 🔗 카드 조합 분석\n\n",a+=j(e),a+="\n\n",a+="## 🌟 종합 해석\n\n",a+=f(e,r),a+="\n\n",a+="## 💡 실천적 조언\n\n",a+=v(e),a+="\n\n",a+="## ⏰ 타이밍 가이드\n\n",a+=k(e),a+="\n\n",a+="---\n\n",a+="🔮 **마무리 메시지**\n\n",a+="타로는 당신의 내면에 이미 존재하는 지혜를 끌어내는 거울입니다. ",a+="이 카드들은 현재 상황의 에너지를 반영하며, 당신이 더 나은 선택을 할 수 있도록 안내합니다. ",a+="운명은 정해진 것이 아니라 당신의 의지와 행동으로 만들어가는 것임을 기억하세요.\n\n",a+="✨ 이 해석이 당신의 여정에 빛이 되기를 바랍니다.",a},y=(e,t)=>{const r=e.isReversed,a=e.card.suit;return"major"===a?r?"중요한 전환점이나 큰 흐름이 지연되거나 내면화되고 있습니다. 외적 변화보다는 내적 성찰이 필요한 시기입니다.":"인생의 중요한 국면이나 큰 흐름을 나타냅니다. 이는 피할 수 없는 중요한 메시지이자 성장의 기회입니다.":"wands"===a?r?"열정과 행동의 에너지가 차단되거나 방향을 잃었습니다. 동기를 재점검할 필요가 있습니다.":"창의성과 열정, 행동력이 필요한 영역입니다. 적극적으로 나아가세요.":"cups"===a?r?"감정적 균형이 깨지거나 관계에서 어려움을 겪고 있습니다. 감정을 돌아볼 시간입니다.":"감정, 관계, 직관의 영역입니다. 마음의 소리에 귀 기울이세요.":"swords"===a?r?"사고와 논리가 혼란스럽거나 과도한 걱정에 사로잡혀 있습니다. 명료함이 필요합니다.":"이성적 판단과 결단이 필요한 시기입니다. 진실을 직시하세요.":"pentacles"===a?r?"물질적 안정이나 실용적 계획에 문제가 있습니다. 재정비가 필요합니다.":"현실적이고 물질적인 측면을 다룹니다. 실용적 접근이 효과적입니다.":"이 카드는 현재 상황에서 중요한 역할을 하고 있습니다."},j=(e,t)=>{if(1===e.length)return`단일 카드 리딩에서 ${e[0].card.nameKo}는 현재 상황의 핵심을 명확히 보여줍니다. 이 카드의 메시지에 집중하세요.`;let r="";const a=e.filter(e=>"major"===e.card.suit).length,s=e.filter(e=>e.isReversed).length;if(a>=.6*e.length?r+=`🌟 **중요도**: 메이저 아르카나가 ${a}장 나왔습니다. 이는 현재 상황이 인생의 중요한 전환점이거나 큰 의미를 가진 시기임을 나타냅니다. 우주가 당신에게 중요한 메시지를 전하고 있습니다.\n\n`:0===a&&(r+="📊 **일상적 영역**: 모든 카드가 마이너 아르카나입니다. 이는 일상적이고 관리 가능한 상황을 나타내며, 당신의 선택과 노력으로 충분히 개선할 수 있는 영역입니다.\n\n"),s>=.6*e.length?r+=`⚠️ **에너지 흐름**: ${s}장의 역방향 카드는 현재 에너지가 내면으로 향하고 있거나, 외적 진행에 장애가 있음을 시사합니다. 서두르기보다는 성찰과 재정비가 필요한 시기입니다.\n\n`:0===s&&(r+="✨ **순조로운 흐름**: 모든 카드가 정방향입니다. 에너지가 순조롭게 흐르고 있으며, 상황이 비교적 명확하고 진행 중입니다.\n\n"),e.length>=3){const t=e[0];e[Math.floor(e.length/2)];const a=e[e.length-1];r+="🔄 **흐름 패턴**: ",t.isReversed&&!a.isReversed?r+="어려운 시작에서 긍정적 결말로 이어지는 상승 곡선을 보입니다. 초기의 어려움을 극복하면 좋은 결과를 얻을 수 있습니다.":!t.isReversed&&a.isReversed?r+="좋은 시작이지만 결과에 주의가 필요합니다. 과신하지 말고 신중하게 마무리해야 합니다.":t.isReversed||a.isReversed?r+="도전적인 상황이지만, 이는 성장의 기회입니다. 인내심을 가지고 접근하세요.":r+="전반적으로 긍정적인 흐름입니다. 현재의 방향을 유지하세요.",r+="\n\n"}return r},f=(e,t,r)=>{const a=e.some(e=>e.isReversed),s=e.every(e=>e.isReversed);e.some(e=>"major"===e.card.suit);let n="";return t.includes("원 카드")||1===e.length?(n+="이 하나의 카드는 지금 당신이 가장 주목해야 할 핵심 메시지를 담고 있습니다. ",n+=a?"역방향으로 나온 만큼, 외적 행동보다는 내면의 통찰과 재고가 필요한 시점입니다.":"정방향으로 나타난 명확한 에너지를 받아들이고 그 방향으로 나아가세요."):t.includes("과거현재미래")||t.includes("쓰리 카드")?(n+="과거의 영향이 현재에 어떻게 작용하고 있으며, 어떤 미래가 펼쳐질지 보여줍니다. ",e.length>=3&&(n+=`${e[0].card.nameKo}의 과거 에너지가 ${e[1].card.nameKo}의 현재 상황을 만들었고, `,n+=`${e[2].card.nameKo}는 이 흐름이 향하는 방향을 시사합니다.`)):t.includes("켈틱")?(n+="켈틱 크로스는 상황을 다각도로 분석하는 가장 포괄적인 스프레드입니다. ",n+="현재 상황의 핵심부터 주변 환경, 내면의 상태, 최종 결과까지 전체적인 그림을 제공합니다."):t.includes("관계")?(n+="관계의 역학과 각 당사자의 감정, 그리고 관계의 방향성을 보여줍니다. ",n+="두 에너지가 어떻게 상호작용하는지 주목하세요."):t.includes("진로")||t.includes("커리어")?(n+="직업과 커리어 경로에 대한 통찰을 제공합니다. ",n+="당신의 재능, 장애물, 기회를 종합적으로 보여주며 실용적 결정을 돕습니다."):n+="뽑힌 카드들의 조합은 현재 상황의 다층적 면모를 드러냅니다.",n+="\n\n",s?(n+="모든 카드가 역방향이라는 것은 큰 의미를 지닙니다. 지금은 외부로 향하기보다 내면을 돌아보고, ",n+="기존의 접근 방식을 재평가할 시기입니다. 급하게 행동하지 말고 충분한 성찰 시간을 가지세요."):a?(n+="정방향과 역방향 카드가 함께 나타나 균형 잡힌 시각을 제공합니다. ",n+="어떤 영역은 순조롭게 진행되고 있지만, 어떤 영역은 재고가 필요합니다."):(n+="모든 카드가 정방향으로 나타나 에너지가 명확하고 순조롭게 흐르고 있습니다. ",n+="당신의 의도와 우주의 흐름이 일치하고 있으니, 자신감을 가지고 나아가세요."),n},v=(e,t)=>{let r="";const a=e.flatMap(e=>e.isReversed?e.card.reversedKeywords:e.card.uprightKeywords);a.some(e=>e.includes("행동")||e.includes("열정")||e.includes("도전"))&&(r+="✅ **행동하기**: 생각만 하지 말고 구체적인 첫걸음을 내디디세요. 작은 행동이 큰 변화를 만듭니다.\n\n"),a.some(e=>e.includes("대기")||e.includes("인내")||e.includes("수용"))&&(r+="⏸️ **기다리기**: 서두르지 마세요. 때로는 기다림이 가장 현명한 행동입니다. 상황이 자연스럽게 무르익도록 하세요.\n\n"),a.some(e=>e.includes("소통")||e.includes("표현")||e.includes("대화"))&&(r+="💬 **소통하기**: 마음속 생각을 솔직하게 표현하세요. 대화는 오해를 풀고 관계를 개선하는 열쇠입니다.\n\n"),a.some(e=>e.includes("계획")||e.includes("전략")||e.includes("준비"))&&(r+="📋 **계획하기**: 치밀한 준비와 계획이 성공의 기초입니다. 세부사항을 점검하고 체계적으로 접근하세요.\n\n"),a.some(e=>e.includes("직관")||e.includes("감정")||e.includes("마음"))&&(r+="💖 **마음 듣기**: 논리보다 직관을, 머리보다 가슴의 소리에 귀 기울이세요. 당신의 내면은 이미 답을 알고 있습니다.\n\n");return e.filter(e=>e.isReversed).length>e.length/2&&(r+="🔄 **재정비**: 현재 방식이 효과적이지 않다는 신호입니다. 접근법을 바꾸거나, 휴식을 취하거나, 계획을 수정하세요.\n\n"),""===r&&(r="카드가 제시하는 방향을 존중하되, 최종 선택은 당신의 자유의지에 달려 있습니다. 두려움보다는 지혜로, 충동보다는 깊은 성찰로 결정하세요."),r},k=e=>{const t=e.some(e=>e.card.name.includes("Ace")),r=e.some(e=>e.card.name.includes("World")||e.card.name.includes("Ten")||e.card.name.includes("Wheel")),a=e.filter(e=>e.isReversed).length;let s="";return t&&!r?s+="🌱 **시작의 시기**: 새로운 시작과 기회의 에너지가 감지됩니다. 앞으로 1-3개월 내에 중요한 시작이나 기회가 찾아올 수 있습니다.\n\n":r&&(s+="🎯 **완성의 시기**: 한 사이클이 마무리되고 있습니다. 수확의 시기이거나, 곧 새로운 국면으로 전환될 것입니다.\n\n"),a>e.length/2?s+="⏳ **대기 권장**: 지금은 급하게 진행하기보다는 준비와 숙고의 시간입니다. 몇 주에서 몇 달의 여유를 가지세요.\n\n":0===a&&(s+="⚡ **즉시 행동**: 에너지가 활발하게 움직이고 있습니다. 지금이 바로 행동할 때입니다. 기회를 놓치지 마세요.\n\n"),s+="📅 **다시 점검할 시기**: 이 리딩의 에너지는 대략 3개월 정도 유효합니다. 그 이후에는 상황이 변화할 수 있으니, 필요하다면 다시 타로에 질문하세요.",s},N=Po.find(e=>e.id===r);return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-purple-900 dark:to-indigo-900 py-8 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8 relative",children:[s.jsx("button",{onClick:()=>u(!h),className:"absolute right-0 top-0 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all",children:h?"타로 보기":"📜 기록 보기"}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"🔮 타로 카드 점술"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"마음을 가다듬고 질문을 떠올려보세요"})]}),h&&s.jsx(Jo,{onClose:()=>u(!1)}),!h&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-center items-center gap-4",children:[s.jsx(Xo,{label:"스프레드 선택",isActive:"select-spread"===e,isCompleted:["enter-question","drawing-cards","show-result"].includes(e)}),s.jsx("div",{className:"w-12 h-0.5 bg-gray-300 dark:bg-gray-700"}),s.jsx(Xo,{label:"질문 입력",isActive:"enter-question"===e,isCompleted:["drawing-cards","show-result"].includes(e)}),s.jsx("div",{className:"w-12 h-0.5 bg-gray-300 dark:bg-gray-700"}),s.jsx(Xo,{label:"카드 뽑기",isActive:"drawing-cards"===e,isCompleted:"show-result"===e}),s.jsx("div",{className:"w-12 h-0.5 bg-gray-300 dark:bg-gray-700"}),s.jsx(Xo,{label:"결과 확인",isActive:"show-result"===e,isCompleted:!1})]})}),"select-spread"===e&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"타로 스프레드를 선택하세요"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Po.map(e=>s.jsxs("button",{onClick:()=>{return r=e.id,n(r),void t("enter-question");var r},className:"p-4 bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900 dark:to-pink-900 rounded-lg hover:shadow-md transition-all text-left",children:[s.jsx("div",{className:"font-bold text-gray-900 dark:text-white mb-2",children:e.nameKo}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:["카드 수: ",e.cardCount,"장"]})]},e.id))})]}),"enter-question"===e&&N&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"질문을 입력하세요"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["선택한 스프레드: ",s.jsx("span",{className:"font-semibold",children:N.nameKo})," (",N.cardCount,"장)"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:N.description})]}),s.jsx("textarea",{value:i,onChange:e=>l(e.target.value),placeholder:"예: 이번 달 사업이 잘 될까요?",className:"w-full h-32 p-4 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),N.exampleQuestions&&N.exampleQuestions.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"💡 질문 예시 (클릭하면 자동 입력됩니다)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:N.exampleQuestions.map((e,t)=>s.jsx("button",{onClick:()=>l(e),className:"px-3 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg text-sm hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",children:e},t))})]}),s.jsxs("div",{className:"flex justify-between mt-4",children:[s.jsx("button",{onClick:()=>t("select-spread"),className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all",children:"뒤로"}),s.jsx("button",{onClick:()=>{i.trim()?(t("drawing-cards"),p()):alert("질문을 입력해주세요")},disabled:!i.trim(),className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"카드 뽑기"})]})]}),"drawing-cards"===e&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-12 text-center",children:[s.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"🔮"}),s.jsx("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"카드를 뽑고 있습니다..."})]}),"show-result"===e&&N&&d.length>0&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:s.jsx(Go,{cardPositions:d,spreadName:N.nameKo,spreadDescription:N.description})}),s.jsxs("div",{id:"tarot-reading-content",className:"space-y-6 bg-white dark:bg-gray-900 p-8",style:{WebkitPrintColorAdjust:"exact",printColorAdjust:"exact"},children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border-2 border-purple-200 dark:border-purple-700 p-8 mb-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-center text-purple-700 dark:text-purple-300 mb-3",children:"🔮 타로 카드 상담 결과"}),s.jsx("div",{className:"text-center text-gray-700 dark:text-gray-300 text-lg mb-3",children:(new Date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}),s.jsxs("div",{className:"text-center text-purple-600 dark:text-purple-400 font-semibold",children:[N.nameKo," | ",N.description]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl border-l-4 border-blue-500 p-6 mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-blue-800 dark:text-blue-300 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"💭"}),s.jsx("span",{children:"당신의 질문"})]}),s.jsx("p",{className:"text-lg text-gray-800 dark:text-gray-200 leading-relaxed",children:i})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-6 mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"🎴 뽑힌 카드들"}),s.jsx("div",{className:"space-y-4",children:d.map((e,t)=>{const r=e.isReversed?"역방향 ↓":"정방향 ↑",a=e.isReversed?e.card.reversedMeaning:e.card.uprightMeaning,n=e.isReversed?e.card.reversedKeywords:e.card.uprightKeywords;return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[t+1,". ",e.positionName]}),s.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-semibold "+(e.isReversed?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"),children:r})]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.positionMeaning}),s.jsxs("div",{className:"mb-3",children:[s.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-bold text-lg",children:e.card.nameKo}),s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:["(",e.card.name,")"]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("strong",{className:"text-gray-700 dark:text-gray-300",children:"의미:"}),s.jsx("span",{className:"text-gray-800 dark:text-gray-200 ml-2",children:a})]}),s.jsxs("div",{children:[s.jsx("strong",{className:"text-gray-700 dark:text-gray-300",children:"키워드:"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-2",children:n.join(", ")})]})]},t)})})]}),c&&s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl border-2 border-amber-200 dark:border-amber-700 p-6",children:[s.jsxs("h3",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4 flex items-center gap-2",children:[s.jsx("span",{children:"🤖"}),s.jsx("span",{children:"AI 타로 해석"})]}),s.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:s.jsx("div",{className:"whitespace-pre-wrap text-gray-900 dark:text-gray-100 leading-relaxed",children:c})})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-200 dark:border-gray-700 text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"이 타로 리딩은 참고용이며, 최종 결정은 본인의 판단에 따라 이루어져야 합니다."}),s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Generated by 운명나침반 Tarot System"})]})]}),!c&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:async()=>{if(0!==d.length){g(!0),m("");try{const e=zo(r,d,i),t=await fetch("/api/v1/tarot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,userQuestion:i})});if(!t.ok)throw new Error("AI 해석 요청 실패");const a=await t.json();if(!a.success)throw new Error(a.error||"AI 해석 실패");{m(a.response);const e=Po.find(e=>e.id===r);e&&function(e){try{const t=Vo(),r={...e,id:`tarot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:(new Date).toISOString()},a=[r,...t].slice(0,100);return localStorage.setItem(Qo,JSON.stringify(a)),r}catch(t){throw t}}({userId:1,spreadId:r,spreadName:e.nameKo,question:i,cards:d,aiInterpretation:a.response})}}catch(e){const t=Po.find(e=>e.id===r),a=b(d,i,(null==t?void 0:t.nameKo)||"");m(a)}finally{g(!1)}}},disabled:x,className:"px-8 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-lg font-semibold rounded-full hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:x?"🤖 AI가 해석 중...":"🤖 AI 해석 받기"})}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsx("button",{onClick:()=>{t("select-spread"),n(""),l(""),o([]),m("")},className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all",children:"처음으로"}),c&&s.jsx("button",{onClick:async()=>{try{if(!N)return;const e=Fd();await(async(e,t,r)=>{const a=`타로_상담_${e}_${r}.pdf`;await Td("tarot-reading-content",{filename:a,title:"🔮 타로 카드 상담 결과",subtitle:`${e} | ${r}`})})(N.nameKo,0,e),alert("PDF 다운로드가 완료되었습니다!")}catch(e){alert("PDF 생성 중 오류가 발생했습니다.")}},className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all flex items-center gap-2",children:"📄 PDF 다운로드"})]})]})]})]})})}function Xo({label:e,isActive:t,isCompleted:r}){return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all "+(r?"bg-green-500 text-white":t?"bg-purple-500 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:r?"✓":t?"•":"○"}),s.jsx("div",{className:"text-xs mt-2 "+(t||r?"text-gray-900 dark:text-white font-semibold":"text-gray-500 dark:text-gray-500"),children:e})]})}const ec=({className:e})=>s.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),tc=({className:e})=>s.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})});function rc({size:e="md",showLabel:t=!1}){const{theme:r,toggleTheme:a}=Hi(),n={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return s.jsxs("button",{onClick:a,className:`\n        ${{sm:"p-1.5 text-sm",md:"p-2 text-base",lg:"p-3 text-lg"}[e]} \n        rounded-lg \n        bg-background \n        hover:bg-muted \n        border border-border \n        transition-all duration-200 \n        flex items-center space-x-2\n        focus:outline-none \n        focus:ring-2 \n        focus:ring-primary \n        focus:ring-offset-2\n        ${t?"px-3":""}\n      `,"aria-label":("light"===r?"다크":"라이트")+" 모드로 전환",title:("light"===r?"다크":"라이트")+" 모드로 전환",children:["light"===r?s.jsx(tc,{className:`${n[e]} text-foreground`}):s.jsx(ec,{className:`${n[e]} text-foreground`}),t&&s.jsx("span",{className:"text-sm font-medium text-foreground",children:"light"===r?"다크 모드":"라이트 모드"})]})}const ac=()=>{var e,t,r,i,l,d,o,c;const[m,x]=a.useState(!1),[h,u]=a.useState(!1),b=g(),y=n(),{isAuthenticated:j,user:f,logout:v}=rt(),k=[{path:"/",label:"캘린더",icon:"📅"},{path:"/saju",label:"사주분석",icon:"🔮"},{path:"/qimen",label:"귀문둔갑",icon:"⚡"},{path:"/ziwei",label:"자미두수",icon:"⭐"},{path:"/tarot",label:"타로",icon:"🃏"},{path:"/compatibility",label:"궁합",icon:"💑"},{path:"/settings",label:"설정",icon:"⚙️"}],N=e=>b.pathname===e,w=async()=>{await v(),u(!1),y("/")},S=()=>{y("/auth?mode=login")},C=()=>{y("/auth?mode=signup")};return"/auth"===b.pathname?null:s.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs(p,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-2xl",children:"🧭"}),s.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]})}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("nav",{className:"hidden md:flex items-center space-x-2",children:k.map(e=>s.jsxs(p,{to:e.path,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5\n                    "+(N(e.path)?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[s.jsx("span",{children:e.icon}),s.jsx("span",{children:e.label})]},e.path))})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(rc,{}),j&&f?s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>u(!h),className:"hidden md:flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:(null==(t=null==(e=null==f?void 0:f.name)?void 0:e.charAt(0))?void 0:t.toUpperCase())||(null==(i=null==(r=null==f?void 0:f.email)?void 0:r.charAt(0))?void 0:i.toUpperCase())||"U"})}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(null==f?void 0:f.name)||(null==f?void 0:f.email)||"User"}),s.jsx("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null==f?void 0:f.name)||(null==f?void 0:f.email)||"User"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(null==f?void 0:f.email)||""})]}),s.jsxs(p,{to:"/settings",onClick:()=>u(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[s.jsx("span",{className:"mr-2",children:"⚙️"}),"설정"]}),s.jsxs(p,{to:"/dashboard",onClick:()=>u(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[s.jsx("span",{className:"mr-2",children:"📊"}),"대시보드"]}),s.jsxs("button",{onClick:w,className:"flex items-center w-full px-4 py-2 text-sm text-red-700 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[s.jsx("span",{className:"mr-2",children:"🚪"}),"로그아웃"]})]})})]}):s.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[s.jsx("button",{onClick:S,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:"로그인"}),s.jsx("button",{onClick:C,className:"px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"회원가입"})]}),s.jsx("button",{onClick:()=>x(!m),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"메뉴 열기",children:s.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:m?s.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):s.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),m&&s.jsx("nav",{className:"md:hidden py-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[k.map(e=>s.jsxs(p,{to:e.path,onClick:()=>x(!1),className:"px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2\n                    "+(N(e.path)?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[s.jsx("span",{children:e.icon}),s.jsx("span",{children:e.label})]},e.path)),s.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 mt-2",children:j&&f?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium",children:(null==(d=null==(l=null==f?void 0:f.name)?void 0:l.charAt(0))?void 0:d.toUpperCase())||(null==(c=null==(o=null==f?void 0:f.email)?void 0:o.charAt(0))?void 0:c.toUpperCase())||"U"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(null==f?void 0:f.name)||(null==f?void 0:f.email)||"User"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(null==f?void 0:f.email)||""})]})]}),s.jsx("button",{onClick:w,className:"w-full px-3 py-2 text-left text-sm text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"🚪 로그아웃"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:S,className:"w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"로그인"}),s.jsx("button",{onClick:C,className:"w-full px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"회원가입"})]})})]})})]})})},sc=()=>{const e=(new Date).getFullYear();return s.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"py-12 grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("span",{className:"text-2xl",children:"🧭"}),s.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"전통 사주명리학과 현대 AI 기술을 결합한 가장 정확한 운세 서비스"}),s.jsx("div",{className:"flex space-x-3",children:[{icon:"📘",label:"Facebook",url:"https://facebook.com"},{icon:"🐦",label:"Twitter",url:"https://twitter.com"},{icon:"📷",label:"Instagram",url:"https://instagram.com"},{icon:"📺",label:"YouTube",url:"https://youtube.com"},{icon:"💬",label:"KakaoTalk",url:"#"}].map(e=>s.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors","aria-label":e.label,children:s.jsx("span",{className:"text-lg",children:e.icon})},e.label))})]}),Object.entries({"서비스":[{label:"오늘의 운세",path:"/fortune"},{label:"사주 분석",path:"/saju"},{label:"궁합 보기",path:"/compatibility"},{label:"캘린더",path:"/calendar"}],"정보":[{label:"이용약관",path:"/terms"},{label:"개인정보처리방침",path:"/privacy"},{label:"공지사항",path:"/notice"},{label:"자주 묻는 질문",path:"/faq"}],"회사":[{label:"회사소개",path:"/about"},{label:"채용정보",path:"/careers"},{label:"제휴문의",path:"/partnership"},{label:"고객센터",path:"/support"}]}).map(([e,t])=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4",children:e}),s.jsx("ul",{className:"space-y-3",children:t.map(e=>s.jsx("li",{children:s.jsx(p,{to:e.path,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:e.label})},e.path))})]},e))]}),s.jsx("div",{className:"py-8 border-t border-gray-200 dark:border-gray-800",children:s.jsxs("div",{className:"max-w-md mx-auto text-center md:text-left md:max-w-none md:flex md:justify-between md:items-center",children:[s.jsxs("div",{className:"mb-4 md:mb-0",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"운세 소식을 받아보세요"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"매주 당신의 운세와 행운의 팁을 이메일로 전달해드립니다"})]}),s.jsxs("div",{className:"flex max-w-md mx-auto md:mx-0",children:[s.jsx("input",{type:"email",placeholder:"이메일 주소 입력",className:"flex-1 px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-l-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500"}),s.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm font-medium rounded-r-lg hover:from-purple-700 hover:to-pink-700 transition-colors",children:"구독하기"})]})]})}),s.jsx("div",{className:"py-6 border-t border-gray-200 dark:border-gray-800",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["© ",e," 운명나침반. All rights reserved."]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:"Made with ❤️ in Korea"}),s.jsx("span",{children:"|"}),s.jsx("span",{children:"Version 1.0.0"})]})]})}),s.jsx("div",{className:"py-4 border-t border-gray-200 dark:border-gray-800",children:s.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[s.jsx("span",{children:"🔒"}),s.jsx("span",{children:"SSL 보안 연결"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[s.jsx("span",{children:"✅"}),s.jsx("span",{children:"개인정보보호 인증"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[s.jsx("span",{children:"🏆"}),s.jsx("span",{children:"2024 베스트 운세앱 선정"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[s.jsx("span",{children:"📊"}),s.jsx("span",{children:"누적 사용자 100만+"})]})]})})]})})},nc=({children:e})=>{const{isAuthenticated:t,isLoading:r}=rt(),a=g();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"로딩 중..."})]})}):t?s.jsx(s.Fragment,{children:e}):s.jsx(b,{to:"/auth?mode=login",state:{from:a},replace:!0})};function ic(){return a.useEffect(()=>{(async()=>{if(!Ra().enabled)return;await _a()&&Oa()})()},[]),s.jsx(Wi,{children:s.jsx(y,{children:s.jsx(Ft,{children:s.jsx(Na,{children:s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(ac,{}),s.jsx("main",{className:"flex-1",children:s.jsxs(j,{children:[s.jsx(f,{path:"/auth",element:s.jsx(ot,{})}),s.jsx(f,{path:"/",element:s.jsx(nc,{children:s.jsx(Ta,{})})}),s.jsx(f,{path:"/calendar",element:s.jsx(b,{to:"/",replace:!0})}),s.jsx(f,{path:"/dashboard",element:s.jsx(nc,{children:s.jsx(Sr,{})})}),s.jsx(f,{path:"/admin",element:s.jsx(nc,{children:s.jsx(Dr,{})})}),s.jsx(f,{path:"/admin/users",element:s.jsx(nc,{children:s.jsx(Tr,{})})}),s.jsx(f,{path:"/fortune",element:s.jsx(nc,{children:s.jsx(Ga,{})})}),s.jsx(f,{path:"/saju",element:s.jsx(nc,{children:s.jsx(zi,{})})}),s.jsx(f,{path:"/customers",element:s.jsx(nc,{children:s.jsx(Ya,{})})}),s.jsx(f,{path:"/test-api",element:s.jsx(nc,{children:s.jsx(Vl,{})})}),s.jsx(f,{path:"/saju/six-areas",element:s.jsx(nc,{children:s.jsxs("div",{className:"p-8 text-center",children:["6대 영역 분석이 통합 시스템으로 이전되었습니다. ",s.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})})}),s.jsx(f,{path:"/saju/detailed",element:s.jsx(nc,{children:s.jsxs("div",{className:"p-8 text-center",children:["17대 세부운세가 통합 시스템으로 이전되었습니다. ",s.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})})}),s.jsx(f,{path:"/saju/personality",element:s.jsx(nc,{children:s.jsxs("div",{className:"p-8 text-center",children:["7대 성향 분석이 통합 시스템으로 이전되었습니다. ",s.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})})}),s.jsx(f,{path:"/saju-chart",element:s.jsx(nc,{children:s.jsx(_s,{})})}),s.jsx(f,{path:"/saju/interpretation",element:s.jsx(nc,{children:s.jsx(As,{})})}),s.jsx(f,{path:"/diary",element:s.jsx(nc,{children:s.jsx(Fa,{})})}),s.jsx(f,{path:"/diary/:date",element:s.jsx(nc,{children:s.jsx(Fa,{})})}),s.jsx(f,{path:"/settings",element:s.jsx(nc,{children:s.jsx(Ua,{})})}),s.jsx(f,{path:"/search",element:s.jsx(nc,{children:s.jsx(Ql,{})})}),s.jsx(f,{path:"/compatibility",element:s.jsx(nc,{children:s.jsx($l,{})})}),s.jsx(f,{path:"/learning/:courseId",element:s.jsx(nc,{children:s.jsx(El,{})})}),s.jsx(f,{path:"/qimen",element:s.jsx(nc,{children:s.jsx(Zd,{})})}),s.jsx(f,{path:"/qimen/learning",element:s.jsx(nc,{children:s.jsx(oo,{})})}),s.jsx(f,{path:"/ziwei",element:s.jsx(nc,{children:s.jsx(Fo,{})})}),s.jsx(f,{path:"/tarot",element:s.jsx(nc,{children:s.jsx(Zo,{})})})]})}),s.jsx(sc,{})]})})})})})}v.createRoot(document.getElementById("root")).render(s.jsx(l.StrictMode,{children:s.jsx(ic,{})})),async function(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&confirm("새 버전이 있습니다. 업데이트하시겠습니까?")&&(t.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),e}catch(e){return}}().then(e=>{}).catch(e=>{});
