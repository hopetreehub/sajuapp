import{r as e,j as a,D as t,m as r,n as s,e as i}from"./react-vendor-BqNk2DgB.js";import{u as n}from"./sajuSettingsStore-Btb3FM7R.js";import{I as o,c as l,B as c}from"./BirthInfoHeader-DjgGSw5u.js";import{C as d,A as m,p as h,a as g,b as u,c as x,d as y,e as p,f as b,P as j,g as f,i as v}from"./chart-vendor-DwU5C6A5.js";import{i as k}from"./index-DlHBBt9Z.js";import{C as N}from"./chartStyleUtils-CydmOjwm.js";import"./vendor-DgwlXjR1.js";import"./three-vendor-B4pyqsGd.js";import"./accurateSajuCalculator-Ch7eb-v_.js";import"./ui-vendor-Bq31Dxb8.js";import"./document-vendor-kJlPqfgG.js";import"./calendar-vendor-Bhba01pF.js";class w{static analyzeFromSaju(e){const{fiveElements:a}=e;return{wood:a.wood||0,fire:a.fire||0,earth:a.earth||0,metal:a.metal||0,water:a.water||0}}static analyzeElementRelationships(e){const a=e.wood+e.fire+e.earth+e.metal+e.water,t={wood_fire:Math.min(e.wood*e.fire/100,100),fire_earth:Math.min(e.fire*e.earth/100,100),earth_metal:Math.min(e.earth*e.metal/100,100),metal_water:Math.min(e.metal*e.water/100,100),water_wood:Math.min(e.water*e.wood/100,100)},r={wood_earth:Math.min(e.wood*e.earth/100,100),fire_metal:Math.min(e.fire*e.metal/100,100),earth_water:Math.min(e.earth*e.water/100,100),metal_wood:Math.min(e.metal*e.wood/100,100),water_fire:Math.min(e.water*e.fire/100,100)},s=Object.values(e),i=a/5,n=s.reduce((e,a)=>e+Math.pow(a-i,2),0)/5,o=Math.max(0,100-n),l=[],c=[],d=[];return Object.entries(e).forEach(([e,t])=>{const r=t/a;r>.3?l.push(e):r<.1&&c.push(e),0===t&&d.push(e)}),{mutual_generation:t,mutual_destruction:r,balance_score:o,dominant_elements:l,weak_elements:c,missing_elements:d}}static generateRecommendations(e,a){return{colors:this.getColorRecommendations(e),directions:this.getDirectionRecommendations(e),activities:this.getActivityRecommendations(e),lifestyle:this.getLifestyleRecommendations(e)}}static getElementDetails(){return{wood:{name:"Wood",korean:"목(木)",icon:"🌳",color:{primary:"#10B981",secondary:"#34D399",background:"#ECFDF5"},characteristics:{positive:["창의성","성장력","유연성","진취성"],negative:["성급함","변덕","우유부단","과도한 이상주의"]},season:"봄",direction:"동쪽",body_parts:["간","담","눈","근육"],emotions:["분노","짜증","좌절감"]},fire:{name:"Fire",korean:"화(火)",icon:"🔥",color:{primary:"#EF4444",secondary:"#F87171",background:"#FEF2F2"},characteristics:{positive:["열정","활력","리더십","표현력"],negative:["성급함","충동성","과열","소진"]},season:"여름",direction:"남쪽",body_parts:["심장","소장","혀","혈관"],emotions:["기쁨","흥분","조급함"]},earth:{name:"Earth",korean:"토(土)",icon:"🏔️",color:{primary:"#A16207",secondary:"#D97706",background:"#FFFBEB"},characteristics:{positive:["안정성","신뢰성","포용력","인내력"],negative:["고집","보수성","느림","걱정"]},season:"늦여름",direction:"중앙",body_parts:["비장","위","입","살"],emotions:["걱정","우려","사려깊음"]},metal:{name:"Metal",korean:"금(金)",icon:"⚡",color:{primary:"#FCD34D",secondary:"#FDE047",background:"#FEFCE8"},characteristics:{positive:["정의감","원칙성","완결력","논리성"],negative:["경직성","냉정함","비판적","완벽주의"]},season:"가을",direction:"서쪽",body_parts:["폐","대장","코","피부"],emotions:["슬픔","우울","아쉬움"]},water:{name:"Water",korean:"수(水)",icon:"💧",color:{primary:"#3B82F6",secondary:"#60A5FA",background:"#EFF6FF"},characteristics:{positive:["지혜","융통성","적응력","직관력"],negative:["우유부단","소극성","냉담","변덕"]},season:"겨울",direction:"북쪽",body_parts:["신장","방광","귀","뼈"],emotions:["두려움","불안","신중함"]}}}static getColorRecommendations(e){const a=Object.entries(e).sort(([,e],[,a])=>e-a)[0][0],t=Object.entries(e).sort(([,e],[,a])=>a-e)[0][0],r={wood:{color:"초록색",hex:"#10B981",effect:"성장과 창의성 증진"},fire:{color:"빨간색",hex:"#EF4444",effect:"활력과 열정 증진"},earth:{color:"갈색",hex:"#A16207",effect:"안정성과 신뢰성 증진"},metal:{color:"금색",hex:"#FCD34D",effect:"논리성과 완결력 증진"},water:{color:"파란색",hex:"#3B82F6",effect:"지혜와 적응력 증진"}};return{beneficial:[{name:r[a].color,hex:r[a].hex,description:`부족한 ${a} 오행을 보완하여 ${r[a].effect}`}],avoid:[{name:r[t].color,hex:r[t].hex,reason:`과도한 ${t} 오행을 더욱 강화시켜 불균형 초래`}]}}static getDirectionRecommendations(e){const a=Object.entries(e).sort(([,e],[,a])=>e-a)[0][0];return{beneficial:[{direction:{wood:"동쪽",fire:"남쪽",earth:"중앙",metal:"서쪽",water:"북쪽"}[a],element:a,benefit:`부족한 ${a} 오행 에너지 보충`}],avoid:[]}}static getActivityRecommendations(e){return{beneficial:[{activity:"산책, 원예",element:"wood",effect:"목 오행 보충으로 창의성 증진"},{activity:"운동, 사교활동",element:"fire",effect:"화 오행 보충으로 활력 증진"},{activity:"명상, 요가",element:"earth",effect:"토 오행 보충으로 안정성 증진"},{activity:"독서, 학습",element:"metal",effect:"금 오행 보충으로 논리성 증진"},{activity:"수영, 음악감상",element:"water",effect:"수 오행 보충으로 지혜 증진"}],avoid:[]}}static getLifestyleRecommendations(e){return{diet:[{food:"녹색 채소",element:"wood",benefit:"간 건강과 해독 기능 강화"},{food:"붉은 과일",element:"fire",benefit:"심장 건강과 순환 기능 강화"},{food:"곡물류",element:"earth",benefit:"소화 기능과 영양 흡수 강화"},{food:"견과류",element:"metal",benefit:"폐 기능과 면역력 강화"},{food:"해산물",element:"water",benefit:"신장 기능과 수분 대사 강화"}],exercise:[{type:"스트레칭",element:"wood",effect:"유연성과 순환 개선"},{type:"유산소 운동",element:"fire",effect:"심폐 기능과 활력 증진"},{type:"근력 운동",element:"earth",effect:"근육량과 기초대사 증진"},{type:"호흡 운동",element:"metal",effect:"폐활량과 집중력 증진"},{type:"수영",element:"water",effect:"전신 순환과 유연성 증진"}],career:[{field:"예술, 디자인",element:"wood",aptitude:"창의성과 미적 감각 활용"},{field:"영업, 마케팅",element:"fire",aptitude:"소통능력과 추진력 활용"},{field:"관리, 서비스",element:"earth",aptitude:"신뢰성과 책임감 활용"},{field:"분석, 연구",element:"metal",aptitude:"논리성과 체계성 활용"},{field:"상담, 교육",element:"water",aptitude:"지혜와 포용력 활용"}]}}static generateChartData(e){const a=this.getElementDetails();return{labels:Object.keys(e).map(e=>a[e].korean),datasets:[{data:Object.values(e),backgroundColor:Object.keys(e).map(e=>a[e].color.primary),borderColor:Object.keys(e).map(e=>a[e].color.secondary),borderWidth:2,hoverOffset:10}]}}}d.register(m,h,g);const F=({sajuData:r,height:s=350,className:i="",showLegend:n=!0,showTooltips:l=!0})=>{const[c,d]=e.useState(null),[m,h]=e.useState(!1),[g,u]=e.useState(null),x=e.useMemo(()=>w.analyzeFromSaju(r),[r]),y=e.useMemo(()=>w.analyzeElementRelationships(x),[x]),p=e.useMemo(()=>w.generateRecommendations(x,y),[x,y]),b=e.useMemo(()=>w.getElementDetails(),[]);e.useEffect(()=>{(async()=>{if(r){h(!0),u(null);try{const e=await k.getComprehensiveInterpretation(r);d(e)}catch(e){u("해석 데이터를 불러올 수 없습니다.")}finally{h(!1)}}})()},[r]);const j=e.useMemo(()=>w.generateChartData(x),[x]),f=e.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:n,position:"right",labels:{font:{family:"Noto Sans KR, sans-serif",size:12},padding:15,usePointStyle:!0,pointStyle:"circle",generateLabels:e=>{var a;const t=e.data.datasets;if(t.length>0){const r=t[0];return(null==(a=e.data.labels)?void 0:a.map((e,a)=>{const t=r.data[a],s=r.data.reduce((e,a)=>e+a,0);return{text:`${e} (${s>0?(t/s*100).toFixed(1):"0.0"}%)`,fillStyle:(Array.isArray(r.backgroundColor)?r.backgroundColor[a]:r.backgroundColor)||"#000",strokeStyle:(Array.isArray(r.borderColor)?r.borderColor[a]:r.borderColor)||"#000",lineWidth:2,hidden:!1,index:a}}))||[]}return[]}}},tooltip:{enabled:l,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{label(e){const a=e.label||"",t=e.parsed,r=e.dataset.data.reduce((e,a)=>e+a,0),s=r>0?(t/r*100).toFixed(1):"0.0",i=Object.keys(x)[e.dataIndex];return[`${a}: ${t}점 (${s}%)`,`특성: ${b[i].characteristics.positive.join(", ")}`]}}}},cutout:"50%",animation:{animateRotate:!0,animateScale:!0,duration:1e3}}),[n,l,x,b]),v=(()=>{const e=y.balance_score;return e>=80?{status:"매우 균형",color:"text-green-600",icon:"🟢"}:e>=60?{status:"균형 양호",color:"text-blue-600",icon:"🔵"}:e>=40?{status:"보통",color:"text-yellow-600",icon:"🟡"}:{status:"불균형",color:"text-red-600",icon:"🔴"}})();return Object.values(x).some(e=>e>0)?a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"🎯 오행 균형도"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"목, 화, 토, 금, 수 다섯 요소의 조화 상태"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${v.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:v.icon}),v.status]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["균형점수: ",y.balance_score.toFixed(0),"점"]})]})]}),a.jsxs("div",{className:"relative mb-6",style:{height:s-150},children:[a.jsx(t,{data:j,options:f}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:y.balance_score.toFixed(0)}),a.jsx("div",{className:"text-xs text-gray-500",children:"균형점수"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-1",children:"💪 강한 오행"}),y.dominant_elements.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300",children:y.dominant_elements.map(e=>b[e].korean).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-xs",children:"균형적 분포"})]}),a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-red-800 dark:text-red-200 mb-1",children:"⚠️ 약한 오행"}),y.weak_elements.length>0?a.jsx("div",{className:"text-red-700 dark:text-red-300",children:y.weak_elements.map(e=>b[e].korean).join(", ")}):a.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs",children:"특별히 약한 요소 없음"})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"🎨 추천 색상"}),p.colors.beneficial.length>0?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:p.colors.beneficial[0].hex}}),a.jsx("span",{className:"text-blue-700 dark:text-blue-300 text-xs",children:p.colors.beneficial[0].name})]}):a.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:"균형 유지"})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx(o,{interpretation:c,loading:m,error:g,category:"basic"})})]}):a.jsx("div",{className:`flex items-center justify-center ${i}`,style:{height:s},children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📊"}),a.jsx("div",{className:"text-lg font-medium",children:"오행 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})})},E={bijeon:{name:"Bijeon",koreanName:"비견",hanja:"比肩",category:"self",icon:"🤝",color:{primary:"#6366F1",secondary:"#818CF8",background:"#EEF2FF"},keywords:["자아","동등","협력","자존심"],positiveTraits:["협동성","동료애","공정함","균형감각"],negativeTraits:["고집","경직성","비타협적","자기중심적"],description:"자아와 동등한 기운으로 협력과 경쟁을 나타냄",roles:["팀워크","동료관계","자아실현","공정한 경쟁"]},geopjae:{name:"Geopjae",koreanName:"겁재",hanja:"劫財",category:"self",icon:"⚡",color:{primary:"#8B5CF6",secondary:"#A78BFA",background:"#F3F4F6"},keywords:["경쟁","도전","변화","투쟁"],positiveTraits:["도전정신","변화적응","추진력","개척정신"],negativeTraits:["성급함","충동성","파괴성","불안정"],description:"재물을 빼앗는 기운으로 경쟁과 도전을 의미",roles:["혁신","변화주도","경쟁력","위기대응"]},siksin:{name:"Siksin",koreanName:"식신",hanja:"食神",category:"expression",icon:"🎨",color:{primary:"#10B981",secondary:"#34D399",background:"#ECFDF5"},keywords:["표현","재능","즐거움","창작"],positiveTraits:["재능","표현력","유쾌함","창의성"],negativeTraits:["방만함","안일함","현실도피","의존성"],description:"일간이 생하는 기운으로 재능과 표현력을 나타냄",roles:["예술","창작","엔터테인먼트","서비스"]},sanggwan:{name:"Sanggwan",koreanName:"상관",hanja:"傷官",category:"expression",icon:"🚀",color:{primary:"#F59E0B",secondary:"#FBBF24",background:"#FFFBEB"},keywords:["창조","반항","혁신","비판"],positiveTraits:["창조력","혁신성","독창성","예술성"],negativeTraits:["반항성","비판적","불안정","극단적"],description:"관을 상하게 하는 기운으로 창조와 혁신을 의미",roles:["혁신","창업","예술","비판"]},pyeonjae:{name:"Pyeonjae",koreanName:"편재",hanja:"偏財",category:"wealth",icon:"💰",color:{primary:"#EF4444",secondary:"#F87171",background:"#FEF2F2"},keywords:["활동","사교","유동","기회"],positiveTraits:["사교성","활동력","기회포착","유연성"],negativeTraits:["산만함","불안정","투기성","낭비"],description:"일간이 극하는 동성 재물로 활동적 재물을 의미",roles:["영업","사교","서비스","유통"]},jeongjae:{name:"Jeongjae",koreanName:"정재",hanja:"正財",category:"wealth",icon:"🏦",color:{primary:"#DC2626",secondary:"#EF4444",background:"#FEF2F2"},keywords:["근면","절약","안정","축적"],positiveTraits:["근면성","절약정신","계획성","안정성"],negativeTraits:["보수성","소심함","경직성","물질주의"],description:"일간이 극하는 이성 재물로 정당한 재물을 의미",roles:["관리","회계","저축","투자"]},pyeongwan:{name:"Pyeongwan",koreanName:"편관",hanja:"偏官",category:"authority",icon:"⚔️",color:{primary:"#7C2D12",secondary:"#A16207",background:"#FEF3C7"},keywords:["개척","모험","권력","압박"],positiveTraits:["개척정신","추진력","결단력","리더십"],negativeTraits:["독선적","권위적","성급함","강압적"],description:"일간을 극하는 동성 관성으로 개척과 권력을 의미",roles:["개척","경영","군사","혁신"]},jeonggwan:{name:"Jeonggwan",koreanName:"정관",hanja:"正官",category:"authority",icon:"👑",color:{primary:"#92400E",secondary:"#D97706",background:"#FEF3C7"},keywords:["명예","권위","질서","책임"],positiveTraits:["책임감","신뢰성","품격","리더십"],negativeTraits:["보수성","형식적","권위의존","소극성"],description:"일간을 극하는 이성 관성으로 명예와 권위를 의미",roles:["관리","행정","교육","상담"]},pyeongin:{name:"Pyeongin",koreanName:"편인",hanja:"偏印",category:"support",icon:"🔮",color:{primary:"#3B82F6",secondary:"#60A5FA",background:"#EFF6FF"},keywords:["직감","독창","신비","특별함"],positiveTraits:["직감력","독창성","신비성","특별함"],negativeTraits:["외로움","비현실적","변덕","까다로움"],description:"일간을 생하는 동성 인성으로 직감과 독창성을 의미",roles:["연구","창작","상담","치료"]},jeongin:{name:"Jeongin",koreanName:"정인",hanja:"正印",category:"support",icon:"📚",color:{primary:"#1D4ED8",secondary:"#3B82F6",background:"#EFF6FF"},keywords:["학습","보호","지혜","인덕"],positiveTraits:["학습력","인덕","보호본능","지혜"],negativeTraits:["의존성","소극성","현실도피","게으름"],description:"일간을 생하는 이성 인성으로 학습과 보호를 의미",roles:["교육","학습","상담","보육"]}},C={self:{name:"자아성",description:"자아와 관련된 기운",tenGods:["bijeon","geopjae"]},expression:{name:"표현성",description:"재능과 표현에 관련된 기운",tenGods:["siksin","sanggwan"]},wealth:{name:"재물성",description:"재물과 관련된 기운",tenGods:["pyeonjae","jeongjae"]},authority:{name:"관성",description:"권위와 명예에 관련된 기운",tenGods:["pyeongwan","jeonggwan"]},support:{name:"인성",description:"학습과 보호에 관련된 기운",tenGods:["pyeongin","jeongin"]}},M=.15,$=.03,S=85,T=70,A=50;class B{static analyzeFromSaju(e){const{tenGods:a}=e;return{bijeon:a.bijeon||0,geopjae:a.geopjae||0,siksin:a.siksin||0,sanggwan:a.sanggwan||0,pyeonjae:a.pyeonjae||0,jeongjae:a.jeongjae||0,pyeongwan:a.pyeongwan||0,jeonggwan:a.jeonggwan||0,pyeongin:a.pyeongin||0,jeongin:a.jeongin||0}}static performFullAnalysis(e){const a=this.analyzeFromSaju(e),t=Object.values(a).reduce((e,a)=>e+a,0),r={};Object.entries(a).forEach(([e,a])=>{r[e]=t>0?a/t:0});const s=[],i=[],n=[];Object.entries(r).forEach(([e,t])=>{const r=e;0===a[r]?n.push(r):t>=M?s.push(r):t<=$&&i.push(r)});const o=this.calculateBalance(a),l=this.analyzePersonality(a),c=this.generateRecommendations(a,l);return{data:a,total:t,percentages:r,dominant:s,weak:i,missing:n,balance:o,personality:l,recommendations:c}}static calculateBalance(e){const a=Object.values(e).reduce((e,a)=>e+a,0);if(0===a)return{score:0,status:"poor",description:"십성 데이터가 부족합니다"};const t=Object.entries(C).map(([t,r])=>r.tenGods.reduce((a,t)=>a+e[t],0)/a),r=1/Object.keys(C).length,s=t.reduce((e,a)=>e+Math.pow(a-r,2),0)/t.length,i=Math.max(0,Math.min(100,100-500*s));let n,o;return i>=S?(n="excellent",o="매우 균형 잡힌 십성 분포"):i>=T?(n="good",o="균형 잡힌 십성 분포"):i>=A?(n="fair",o="보통 수준의 십성 분포"):(n="poor",o="불균형한 십성 분포"),{score:i,status:n,description:o}}static analyzePersonality(e){var a;const t=Object.values(e).reduce((e,a)=>e+a,0);if(0===t)return{leadership:0,creativity:0,stability:0,sociability:0,independence:0,overall:"분석 불가"};const r=Math.round((e.jeonggwan+e.pyeongwan)/t*100),s=Math.round((e.siksin+e.sanggwan)/t*100),i=Math.round((e.jeongin+e.pyeongin)/t*100),n=Math.round((e.jeongjae+e.pyeonjae)/t*100),o=Math.round((e.bijeon+e.geopjae)/t*100),l={leadership:r,creativity:s,stability:i,sociability:n,independence:o},c=Math.max(...Object.values(l));return{leadership:r,creativity:s,stability:i,sociability:n,independence:o,overall:{leadership:"리더십형 - 권위와 책임감이 강한 성향",creativity:"창의형 - 표현력과 창조성이 뛰어난 성향",stability:"안정형 - 학습과 보호본능이 강한 성향",sociability:"사교형 - 대인관계와 재물관리에 뛰어난 성향",independence:"독립형 - 자아실현과 경쟁에 강한 성향"}[(null==(a=Object.entries(l).find(([,e])=>e===c))?void 0:a[0])||"stability"]||"균형형 - 다양한 면에서 고른 성향"}}static generateRecommendations(e,a){return{career:this.getCareerRecommendations(e),relationships:this.getRelationshipAdvice(e,a),development:this.getDevelopmentSuggestions(e),caution:this.getCautionAreas(e)}}static getCareerRecommendations(e){const a=Object.values(e).reduce((e,a)=>e+a,0),t=[],r=e.jeonggwan+e.pyeongwan;r/a>=.2&&t.push({field:"관리직, 행정직, 공무원",tenGod:"jeonggwan",suitability:Math.round(r/a*100),reason:"강한 관성으로 권위와 책임을 잘 감당할 수 있음"});const s=e.siksin+e.sanggwan;s/a>=.2&&t.push({field:"예술, 창작, 엔터테인먼트",tenGod:"siksin",suitability:Math.round(s/a*100),reason:"뛰어난 표현력과 창의성을 활용할 수 있음"});const i=e.jeongjae+e.pyeonjae;return i/a>=.2&&t.push({field:"영업, 마케팅, 금융",tenGod:"jeongjae",suitability:Math.round(i/a*100),reason:"재물 관리와 대인관계 능력이 뛰어남"}),t.length>0?t:[{field:"균형 잡힌 다양한 분야",tenGod:"bijeon",suitability:70,reason:"고른 십성 분포로 다양한 분야에 적응 가능"}]}static getRelationshipAdvice(e,a){const t=[];return a.sociability>30&&t.push({type:"대인관계",advice:"뛰어난 사교성을 활용하여 네트워킹을 적극적으로 활용하세요",basedOn:["jeongjae","pyeonjae"]}),a.independence>30&&t.push({type:"자아실현",advice:"독립적인 성향을 살려 자신만의 영역을 구축하세요",basedOn:["bijeon","geopjae"]}),t.length>0?t:[{type:"균형발전",advice:"다양한 관계를 통해 균형 잡힌 성장을 추구하세요",basedOn:["jeongin"]}]}static getDevelopmentSuggestions(e){const a=[];return Object.entries(e).sort(([,e],[,a])=>e-a).slice(0,2).map(([e])=>e).forEach(e=>{const t=E[e];a.push({area:`${t.koreanName} 개발`,method:`${t.positiveTraits.join(", ")} 관련 활동 증가`,targetTenGod:e})}),a}static getCautionAreas(e){const a=[],t=Object.values(e).reduce((e,a)=>e+a,0);return Object.entries(e).forEach(([e,r])=>{if(r/t>.3){const t=E[e];a.push({issue:`${t.koreanName} 과다`,reason:`${t.negativeTraits.join(", ")} 경향이 나타날 수 있음`,solution:`${t.positiveTraits[0]} 측면을 적절히 조절하고 다른 십성을 균형있게 발전시키세요`})}}),a}static generateChartData(e){const a=Object.keys(e).map(e=>`${E[e].koreanName}\n${E[e].hanja}`),t=Object.values(e),r=Object.keys(e).map(e=>E[e].color.primary);return{labels:a,datasets:[{label:"십성 분포",data:t,backgroundColor:r.map(e=>`${e}80`),borderColor:r,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}static generateCategoryChartData(e){const a=Object.entries(C).map(([a,t])=>{const r=t.tenGods.reduce((a,t)=>a+e[t],0);return{category:a,name:t.name,value:r}});return{labels:a.map(e=>e.name),datasets:[{data:a.map(e=>e.value),backgroundColor:["#6366F1","#10B981","#EF4444","#F59E0B","#3B82F6"],borderWidth:2}]}}}d.register(u,x,y,m,p,h,g);const O=({sajuData:s,height:i=400,className:n="",chartType:l="bar",showCategory:c=!1})=>{const[d,m]=e.useState("individual"),[h,g]=e.useState(null),[u,x]=e.useState(!1),[y,p]=e.useState(null),b=e.useMemo(()=>B.performFullAnalysis(s),[s]);e.useEffect(()=>{(async()=>{if(s){x(!0),p(null);try{const e=await k.getPersonalityAnalysis(s);g({personality:e})}catch(e){p("성격 분석 데이터를 불러올 수 없습니다.")}finally{x(!1)}}})()},[s]);const j=e.useMemo(()=>B.generateChartData(b.data),[b.data]),f=e.useMemo(()=>B.generateCategoryChartData(b.data),[b.data]),v=e.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{title:e=>e[0].label||"",label(e){const a=e.parsed.x,t=b.total>0?(a/b.total*100).toFixed(1):"0.0",r=Object.keys(b.data)[e.dataIndex],s=E[r];return[`점수: ${a}점 (${t}%)`,`특성: ${s.keywords.join(", ")}`,`장점: ${s.positiveTraits.join(", ")}`]}}}},scales:{x:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{font:{family:"Noto Sans KR, sans-serif",size:11}}},y:{grid:{display:!1},ticks:{font:{family:"Noto Sans KR, sans-serif",size:11},callback(e){return this.getLabelForValue(e).split("\n")[0]}}}},animation:{duration:1e3}}),[b.data,b.total]),N=e.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{font:{family:"Noto Sans KR, sans-serif",size:11},padding:15,usePointStyle:!0,pointStyle:"rectRounded",generateLabels:e=>{var a;const t=e.data.datasets;if(t.length>0){const r=t[0];return(null==(a=e.data.labels)?void 0:a.filter((e,a)=>r.data[a]>0).map((e,a)=>{const t=r.data[a];return{text:`${e} (${b.total>0?(t/b.total*100).toFixed(1):"0.0"}%)`,fillStyle:(Array.isArray(r.backgroundColor)?r.backgroundColor[a]:r.backgroundColor)||"#000",strokeStyle:(Array.isArray(r.borderColor)?r.borderColor[a]:r.borderColor)||"#000",lineWidth:2,hidden:!1,index:a}}))||[]}return[]}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",callbacks:{label(e){const a=e.parsed,t=b.total>0?(a/b.total*100).toFixed(1):"0.0";return`${e.label}: ${a}점 (${t}%)`}}}},cutout:"40%",animation:{animateRotate:!0,duration:1e3}}),[b.total]),w=(()=>{const e=b.balance.score;return e>=80?{status:"매우 균형",color:"text-green-600",icon:"🟢"}:e>=60?{status:"균형 양호",color:"text-blue-600",icon:"🔵"}:e>=40?{status:"보통",color:"text-yellow-600",icon:"🟡"}:{status:"불균형",color:"text-red-600",icon:"🔴"}})();return 0===b.total?a.jsx("div",{className:`flex items-center justify-center ${n}`,style:{height:i},children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📊"}),a.jsx("div",{className:"text-lg font-medium",children:"십성 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})}):a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${n}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"⭐ 십성 분포도"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"10가지 십성의 강도와 성격 특성 분석"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[a.jsx("button",{onClick:()=>m("individual"),className:"px-3 py-1 text-xs transition-colors "+("individual"===d?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"개별십성"}),a.jsx("button",{onClick:()=>m("category"),className:"px-3 py-1 text-xs transition-colors "+("category"===d?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"카테고리"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${w.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:w.icon}),w.status]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["균형점수: ",b.balance.score.toFixed(0),"점"]})]})]})]}),a.jsx("div",{className:"mb-6",style:{height:i-200},children:"individual"===d?"bar"===l?a.jsx(r,{data:j,options:v}):a.jsx(t,{data:j,options:N}):a.jsx(t,{data:f,options:N})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🧠 성격 특성"}),a.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm",children:b.personality.overall})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"💪 강한 십성"}),b.dominant.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300 text-sm",children:b.dominant.map(e=>E[e].koreanName).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm",children:"균형적 분포"})]}),a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-purple-800 dark:text-purple-200 mb-2",children:"🎯 추천 분야"}),b.recommendations.career.length>0?a.jsx("div",{className:"text-purple-700 dark:text-purple-300 text-sm",children:b.recommendations.career[0].field}):a.jsx("div",{className:"text-purple-600 dark:text-purple-400 text-sm",children:"다양한 분야 적합"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"핵심 능력치"}),Object.entries({"리더십":b.personality.leadership,"창의성":b.personality.creativity,"안정성":b.personality.stability,"사교성":b.personality.sociability,"독립성":b.personality.independence}).map(([e,t])=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-16 text-xs text-gray-600 dark:text-gray-400",children:e}),a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-purple-500",style:{width:`${t}%`}})}),a.jsx("div",{className:"w-8 text-xs text-gray-500 text-right",children:t})]},e))]}),a.jsx("div",{className:"mt-6",children:a.jsx(o,{interpretation:h,loading:u,error:y,category:"personality"})})]})},R={ja:{name:"Ja",koreanName:"자",hanja:"子",animal:"쥐",animalEmoji:"🐭",element:"water",season:"winter",month:11,direction:"북",time:"23:00-01:00",color:{primary:"#1E40AF",secondary:"#3B82F6",background:"#EFF6FF"},characteristics:["영리함","적응력","기회포착"],positiveTraits:["지혜","민첩성","실용성","생존력"],negativeTraits:["욕심","계산적","의심","소심함"],compatibility:["jin","sin"],conflict:["o"]},chuk:{name:"Chuk",koreanName:"축",hanja:"丑",animal:"소",animalEmoji:"🐂",element:"earth",season:"winter",month:12,direction:"북동",time:"01:00-03:00",color:{primary:"#92400E",secondary:"#D97706",background:"#FEF3C7"},characteristics:["성실함","인내력","신뢰성"],positiveTraits:["근면","신중함","책임감","안정성"],negativeTraits:["완고함","보수적","느림","고집"],compatibility:["sa","yu"],conflict:["mi"]},in:{name:"In",koreanName:"인",hanja:"寅",animal:"호랑이",animalEmoji:"🐅",element:"wood",season:"spring",month:1,direction:"동북",time:"03:00-05:00",color:{primary:"#059669",secondary:"#10B981",background:"#ECFDF5"},characteristics:["용맹함","리더십","정의감"],positiveTraits:["용기","추진력","정의감","보호본능"],negativeTraits:["성급함","독선","고집","감정적"],compatibility:["o","sul"],conflict:["sin"]},myo:{name:"Myo",koreanName:"묘",hanja:"卯",animal:"토끼",animalEmoji:"🐰",element:"wood",season:"spring",month:2,direction:"동",time:"05:00-07:00",color:{primary:"#16A34A",secondary:"#22C55E",background:"#F0FDF4"},characteristics:["온화함","예술성","직관력"],positiveTraits:["부드러움","예술감각","평화주의","직관"],negativeTraits:["우유부단","소심함","의존성","현실도피"],compatibility:["mi","hae"],conflict:["yu"]},jin:{name:"Jin",koreanName:"진",hanja:"辰",animal:"용",animalEmoji:"🐉",element:"earth",season:"spring",month:3,direction:"동남",time:"07:00-09:00",color:{primary:"#CA8A04",secondary:"#EAB308",background:"#FEFCE8"},characteristics:["역동성","변화","신비성"],positiveTraits:["포용력","변화적응","신비성","창조력"],negativeTraits:["변덕","과도함","신경질","불안정"],compatibility:["ja","yu"],conflict:["sul"]},sa:{name:"Sa",koreanName:"사",hanja:"巳",animal:"뱀",animalEmoji:"🐍",element:"fire",season:"summer",month:4,direction:"남동",time:"09:00-11:00",color:{primary:"#DC2626",secondary:"#EF4444",background:"#FEF2F2"},characteristics:["지혜","신중함","신비함"],positiveTraits:["지혜","통찰력","신중함","집중력"],negativeTraits:["의심","질투","복잡함","집착"],compatibility:["chuk","yu"],conflict:["hae"]},o:{name:"O",koreanName:"오",hanja:"午",animal:"말",animalEmoji:"🐎",element:"fire",season:"summer",month:5,direction:"남",time:"11:00-13:00",color:{primary:"#E11D48",secondary:"#F43F5E",background:"#FFF1F2"},characteristics:["활동성","열정","자유로움"],positiveTraits:["활력","자유로움","열정","진취성"],negativeTraits:["성급함","변덕","불안정","산만함"],compatibility:["in","sul"],conflict:["ja"]},mi:{name:"Mi",koreanName:"미",hanja:"未",animal:"양",animalEmoji:"🐑",element:"earth",season:"summer",month:6,direction:"남서",time:"13:00-15:00",color:{primary:"#A16207",secondary:"#D97706",background:"#FEF3C7"},characteristics:["온순함","협조성","예술성"],positiveTraits:["온순함","협조성","예술성","평화주의"],negativeTraits:["우유부단","의존성","소극적","걱정"],compatibility:["myo","hae"],conflict:["chuk"]},sin:{name:"Sin",koreanName:"신",hanja:"申",animal:"원숭이",animalEmoji:"🐵",element:"metal",season:"autumn",month:7,direction:"서남",time:"15:00-17:00",color:{primary:"#F59E0B",secondary:"#FBBF24",background:"#FFFBEB"},characteristics:["재치","활발함","변화"],positiveTraits:["재치","활발함","적응력","창의성"],negativeTraits:["변덕","경박함","불안정","장난"],compatibility:["ja","jin"],conflict:["in"]},yu:{name:"Yu",koreanName:"유",hanja:"酉",animal:"닭",animalEmoji:"🐓",element:"metal",season:"autumn",month:8,direction:"서",time:"17:00-19:00",color:{primary:"#D97706",secondary:"#F59E0B",background:"#FEF3C7"},characteristics:["정확성","부지런함","완벽주의"],positiveTraits:["정확성","부지런함","완벽주의","책임감"],negativeTraits:["까다로움","비판적","경직성","걱정"],compatibility:["chuk","sa","jin"],conflict:["myo"]},sul:{name:"Sul",koreanName:"술",hanja:"戌",animal:"개",animalEmoji:"🐕",element:"earth",season:"autumn",month:9,direction:"서북",time:"19:00-21:00",color:{primary:"#92400E",secondary:"#B45309",background:"#FEF3C7"},characteristics:["충성심","정의감","보호본능"],positiveTraits:["충성심","정의감","보호본능","신뢰성"],negativeTraits:["완고함","의심","보수적","걱정"],compatibility:["in","o"],conflict:["jin"]},hae:{name:"Hae",koreanName:"해",hanja:"亥",animal:"돼지",animalEmoji:"🐷",element:"water",season:"winter",month:10,direction:"북서",time:"21:00-23:00",color:{primary:"#1E40AF",secondary:"#2563EB",background:"#EFF6FF"},characteristics:["관대함","성실함","단순함"],positiveTraits:["관대함","성실함","정직함","포용력"],negativeTraits:["단순함","게으름","욕심","고집"],compatibility:["myo","mi"],conflict:["sa"]}},D={harmony:{name:"조화",description:"서로를 보완하고 발전시키는 관계",color:"#10B981",icon:"🤝"},conflict:{name:"충돌",description:"서로 대립하고 견제하는 관계",color:"#EF4444",icon:"⚔️"},punishment:{name:"형",description:"서로를 억제하고 제약하는 관계",color:"#F59E0B",icon:"⚠️"},destruction:{name:"파괴",description:"서로를 해치고 파괴하는 관계",color:"#DC2626",icon:"💥"},neutral:{name:"중립",description:"특별한 영향을 주고받지 않는 관계",color:"#6B7280",icon:"➖"}};class P{static analyzeFromSaju(e){const a={ja:Math.floor(30*Math.random()),chuk:Math.floor(30*Math.random()),in:Math.floor(30*Math.random()),myo:Math.floor(30*Math.random()),jin:Math.floor(30*Math.random()),sa:Math.floor(30*Math.random()),o:Math.floor(30*Math.random()),mi:Math.floor(30*Math.random()),sin:Math.floor(30*Math.random()),yu:Math.floor(30*Math.random()),sul:Math.floor(30*Math.random()),hae:Math.floor(30*Math.random())},t=this.getYearBranch(e.birthInfo.year);return t&&(a[t]+=30),a}static performFullAnalysis(e){const a=this.analyzeFromSaju(e),t=Object.values(a).reduce((e,a)=>e+a,0),r=[],s=[];Object.entries(a).forEach(([e,a])=>{const t=e;0===a?s.push(t):a>=30&&r.push(t)});const i=this.analyzeInteractions(a),n=this.calculateOverallHarmony(a,i),o=this.calculateSeasonalBalance(a),l=this.analyzeAnimalPersonality(a,r),c=this.generateRecommendations(a,r,s);return{data:a,total:t,dominant:r,missing:s,interactions:i,overallHarmony:n,seasonalBalance:o,animalPersonality:l,recommendations:c}}static getYearBranch(e){return["sin","yu","sul","hae","ja","chuk","in","myo","jin","sa","o","mi"][e%12]||null}static analyzeInteractions(e){const a={},t=Object.entries(e).filter(([e,a])=>a>10).map(([e])=>e);for(let r=0;r<t.length;r++)for(let e=r+1;e<t.length;e++){const s=t[r],i=t[e];a[`${s}-${i}`]=this.analyzeRelationship(s,i)}return a}static analyzeRelationship(e,a){const t=R[e];return t.compatibility.includes(a)?{relationship:{type:"harmony",strength:80,description:"서로 조화를 이루며 시너지를 발생시킴"},effects:["긍정적 에너지 증폭","목표 달성 용이","관계 개선"],recommendations:["함께 협력하면 좋은 결과","파트너십 강화 필요"]}:t.conflict.includes(a)?{relationship:{type:"conflict",strength:70,description:"서로 대립하고 충돌하는 관계"},effects:["갈등 가능성","스트레스 증가","의견 충돌"],recommendations:["중재자 필요","거리두기 권장","이해와 배려 필요"]}:{relationship:{type:"neutral",strength:30,description:"특별한 영향 없는 중립적 관계"},effects:["평범한 관계","특별한 영향 없음"],recommendations:["자연스러운 관계 유지"]}}static calculateOverallHarmony(e,a){let t=50;Object.values(a).forEach(e=>{"harmony"===e.relationship.type?t+=10:"conflict"===e.relationship.type&&(t-=10)});const r=Object.values(e),s=r.reduce((e,a)=>e+a,0)/r.length,i=r.reduce((e,a)=>e+Math.pow(a-s,2),0)/r.length;return t+=Math.max(0,30-Math.sqrt(i)),Math.max(0,Math.min(100,t))}static calculateSeasonalBalance(e){const a=(e.in||0)+(e.myo||0)+(e.jin||0),t=(e.sa||0)+(e.o||0)+(e.mi||0),r=(e.sin||0)+(e.yu||0)+(e.sul||0),s=(e.hae||0)+(e.ja||0)+(e.chuk||0),i=a+t+r+s,n=i>0?a/i*100:25,o=i>0?t/i*100:25,l=i>0?r/i*100:25,c=i>0?s/i*100:25,d=[Math.abs(n-25),Math.abs(o-25),Math.abs(l-25),Math.abs(c-25)],m=Math.max(...d);return{spring:n,summer:o,autumn:l,winter:c,balance:Math.max(0,100-2*m)}}static analyzeAnimalPersonality(e,a){const t=a[0]||"ja",r=R[t];return{primaryAnimal:`${r.animalEmoji} ${r.animal}형 인격`,traits:r.positiveTraits,compatibility:r.compatibility.map(e=>R[e].animal),cautions:r.negativeTraits,lifePattern:`${r.time} 시간대에 활동적, ${r.direction}방향 선호`}}static generateRecommendations(e,a,t){const r=[],s=[],i=[],n=[];if(a.forEach(e=>{const a=R[e];r.push({color:a.color.primary,hex:a.color.primary,reason:`${a.animal}의 기운을 강화`}),s.push({direction:a.direction,benefit:`${a.element} 오행 에너지 증진`}),i.push({period:a.time,activity:"중요한 일정",effect:"최상의 컨디션과 운세"})}),a.length>0){const e=R[a[0]];n.push({compatible:e.compatibility.map(e=>R[e].animal),avoid:e.conflict.map(e=>R[e].animal),reason:"간지 상성과 상충 관계"})}return{colors:r.slice(0,3),directions:s.slice(0,2),timing:i.slice(0,3),relationships:n.slice(0,1)}}}d.register(b,j,f,v,h,g);const z=({sajuData:t,height:r=400,className:i="",showRelationships:n=!0,showSeasonalBalance:l=!0})=>{const[c,d]=e.useState("branches"),[m,h]=e.useState(!1);e.useEffect(()=>{const e=()=>{h(document.documentElement.classList.contains("dark"))};e();const a=new MutationObserver(e);return a.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>a.disconnect()},[]);const[g,u]=e.useState(null),[x,y]=e.useState(!1),[p,b]=e.useState(null),j=e.useMemo(()=>P.performFullAnalysis(t),[t]);e.useEffect(()=>{(async()=>{if(t){y(!0),b(null);try{const e=await k.getSpiritualAnalysis(t);u({spiritual:e})}catch(e){b("신살 분석 데이터를 불러올 수 없습니다.")}finally{y(!1)}}})()},[t]);const f=e.useMemo(()=>[{label:"12간지 분포",values:Object.values(j.data),timeFrame:"base"}],[j.data]),v=e.useMemo(()=>{const e=Object.keys(j.data).map(e=>{const a=R[e];return`${a.koreanName} ${a.animalEmoji}`});return N.createStandardRadarConfig(e,f,m,!0)},[f,m]),w=v.data,F=e.useMemo(()=>{const{seasonalBalance:e}=j;return[{label:"계절별 균형",values:[e.spring,e.summer,e.autumn,e.winter],timeFrame:"base"}]},[j.seasonalBalance]),E=e.useMemo(()=>N.createStandardRadarConfig(["봄 🌸","여름 ☀️","가을 🍂","겨울 ❄️"],F,m,!0),[F,m]),C=E.data,M=e.useMemo(()=>{var e,a,t,r,s,i,n,o,l,d,h,g,u;const x="branches"===c?v.options:E.options;return{...x,responsive:!0,maintainAspectRatio:!1,plugins:{...null==x?void 0:x.plugins,legend:{...null==(e=null==x?void 0:x.plugins)?void 0:e.legend,display:!1},tooltip:{...null==(a=null==x?void 0:x.plugins)?void 0:a.tooltip,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{...null==(r=null==(t=null==x?void 0:x.plugins)?void 0:t.tooltip)?void 0:r.callbacks,label(e){const a=e.parsed.r,t=j.total>0?(a/j.total*100).toFixed(1):"0.0";if("branches"===c){const r=Object.keys(j.data)[e.dataIndex],s=R[r];return[`${e.label}: ${a}점 (${t}%)`,`원소: ${s.element}`,`특성: ${s.characteristics.join(", ")}`]}return`${e.label}: ${a.toFixed(1)}점`}}}},scales:{...null==x?void 0:x.scales,r:{...null==(s=null==x?void 0:x.scales)?void 0:s.r,beginAtZero:!0,min:0,max:"branches"===c?1.2*Math.max(...Object.values(j.data)):100,ticks:{...null==(n=null==(i=null==x?void 0:x.scales)?void 0:i.r)?void 0:n.ticks,stepSize:"branches"===c?10:20,display:!1,font:{family:"Noto Sans KR, sans-serif",size:10},color:m?"#9CA3AF":"#6B7280"},grid:{...null==(l=null==(o=null==x?void 0:x.scales)?void 0:o.r)?void 0:l.grid,color:m?"rgba(156, 163, 175, 0.2)":"rgba(156, 163, 175, 0.3)"},angleLines:{...null==(h=null==(d=null==x?void 0:x.scales)?void 0:d.r)?void 0:h.angleLines,color:m?"rgba(156, 163, 175, 0.2)":"rgba(156, 163, 175, 0.3)"},pointLabels:{...null==(u=null==(g=null==x?void 0:x.scales)?void 0:g.r)?void 0:u.pointLabels,font:{family:"Noto Sans KR, sans-serif",size:11,weight:500},color:m?"#E5E7EB":"#1F2937",padding:10}}},animation:{...null==x?void 0:x.animation,duration:1e3}}},[c,v,E,j.data,j.total,m]),$=(()=>{const e=j.overallHarmony;return e>=80?{status:"매우 조화",color:"text-green-600 dark:text-green-400",icon:"🟢"}:e>=60?{status:"조화 양호",color:"text-blue-600 dark:text-blue-400",icon:"🔵"}:e>=40?{status:"보통",color:"text-yellow-600 dark:text-yellow-400",icon:"🟡"}:{status:"부조화",color:"text-red-600 dark:text-red-400",icon:"🔴"}})();return 0===j.total?a.jsx("div",{className:`flex items-center justify-center ${i}`,style:{height:r},children:a.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"text-4xl mb-2",children:"🐲"}),a.jsx("div",{className:"text-lg font-medium",children:"12간지 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})}):a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"🐲 12간지 상호작용"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"12지지의 분포와 상호 관계 분석"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[a.jsx("button",{onClick:()=>d("branches"),className:"px-3 py-1 text-xs transition-colors "+("branches"===c?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:"12간지"}),a.jsx("button",{onClick:()=>d("seasonal"),className:"px-3 py-1 text-xs transition-colors "+("seasonal"===c?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:"계절균형"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${$.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:$.icon}),$.status]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["조화도: ",j.overallHarmony.toFixed(0),"점"]})]})]})]}),a.jsx("div",{className:"mb-6",style:{height:r-250},children:a.jsx(s,{data:"branches"===c?w:C,options:M})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-purple-800 dark:text-purple-200 mb-2",children:j.animalPersonality.primaryAnimal}),a.jsx("div",{className:"text-purple-700 dark:text-purple-300 text-sm",children:j.animalPersonality.traits.slice(0,3).join(", ")})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"💪 강한 간지"}),j.dominant.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300 text-sm",children:j.dominant.map(e=>{const a=R[e];return`${a.koreanName}(${a.animal})`}).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm",children:"균형적 분포"})]}),l&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🌈 계절 균형"}),a.jsxs("div",{className:"text-blue-700 dark:text-blue-300 text-sm",children:["균형도: ",j.seasonalBalance.balance.toFixed(0),"점"]})]})]}),n&&j.dominant.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"주요 관계 패턴"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(j.interactions).slice(0,3).map(([e,t])=>{const[r,s]=e.split("-"),i=D[t.relationship.type];return a.jsxs("div",{className:"px-2 py-1 text-xs rounded-full flex items-center space-x-1",style:{backgroundColor:`${i.color}20`,color:i.color},children:[a.jsx("span",{children:i.icon}),a.jsxs("span",{children:[R[r].koreanName,"-",R[s].koreanName]})]},e)})})]}),a.jsx("div",{className:"mt-6",children:a.jsx(o,{interpretation:g,loading:x,error:p,category:"spiritual"})})]})},_=()=>{const t=i(),{birthInfo:r}=n(),[s,o]=e.useState("fiveElements"),[d,m]=e.useState("bar"),h=e.useMemo(()=>{if(!r)return null;try{return l(r)}catch(e){return null}},[r]);return r&&h?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsx(c,{birthInfo:r,fourPillars:{year:{heavenly:h.fourPillars.year.heavenly,earthly:h.fourPillars.year.earthly,combined:`${h.fourPillars.year.heavenly}${h.fourPillars.year.earthly}`},month:{heavenly:h.fourPillars.month.heavenly,earthly:h.fourPillars.month.earthly,combined:`${h.fourPillars.month.heavenly}${h.fourPillars.month.earthly}`},day:{heavenly:h.fourPillars.day.heavenly,earthly:h.fourPillars.day.earthly,combined:`${h.fourPillars.day.heavenly}${h.fourPillars.day.earthly}`},hour:{heavenly:h.fourPillars.hour.heavenly,earthly:h.fourPillars.hour.earthly,combined:`${h.fourPillars.hour.heavenly}${h.fourPillars.hour.earthly}`}},userName:r.name,showEditButton:!0,onEditClick:()=>t("/settings")})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>o("fiveElements"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("fiveElements"===s?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"🎯 오행균형도"}),a.jsx("button",{onClick:()=>o("tenGods"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("tenGods"===s?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"⭐ 십성분포도"}),a.jsx("button",{onClick:()=>o("twelveEarthly"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("twelveEarthly"===s?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"🐲 12간지상호작용"})]}),"tenGods"===s&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"차트 타입:"}),a.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[a.jsx("button",{onClick:()=>m("bar"),className:"px-3 py-1 text-sm transition-colors "+("bar"===d?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:"막대"}),a.jsx("button",{onClick:()=>m("doughnut"),className:"px-3 py-1 text-sm transition-colors "+("doughnut"===d?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:"도넛"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.jsx("div",{className:"lg:col-span-2",children:"fiveElements"===s?a.jsx(F,{sajuData:h,height:450,showLegend:!0,showTooltips:!0}):"tenGods"===s?a.jsx(O,{sajuData:h,height:450,chartType:d,showCategory:!0}):a.jsx(z,{sajuData:h,height:450,showRelationships:!0,showSeasonalBalance:!0})})}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총점"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[h.totalScore.toFixed(0),"점"]})]}),a.jsx("div",{className:"text-4xl",children:"💯"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"평균"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[h.averageScore.toFixed(1),"점"]})]}),a.jsx("div",{className:"text-4xl",children:"📊"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"일간"}),a.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:h.dayMaster})]}),a.jsx("div",{className:"text-4xl",children:"☯️"})]})})]}),a.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/saju"),className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"사주 분석으로"}),a.jsx("button",{onClick:()=>t("/six-areas"),className:"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"6대 영역 분석"})]})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📊"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"사주 정보가 필요합니다"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"차트를 확인하려면 먼저 생년월일 정보를 입력해주세요."}),a.jsx("button",{onClick:()=>t("/settings"),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"생년월일 입력하기"})]})})})};export{_ as default};
