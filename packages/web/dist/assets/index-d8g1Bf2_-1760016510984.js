var qx=Object.defineProperty;var Jx=(t,e,s)=>e in t?qx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var $=(t,e,s)=>Jx(t,typeof e!="symbol"?e+"":e,s);import{r as j,a as Xx,g as Qx,R as Sr,u as He,b as Zx,c as C0,d as _0,L as Bs,B as ep,e as tp,f as je,N as sp}from"./react-vendor-CN0IqQCA-1760016510984.js";import{f as V,i as St,s as Cr,e as _r,a as Mr,b as ar,c as ir,d as Ei,g as kn,h as wn,j as np,k as M0,l as zr,m as $s,n as rp,o as Hc,p as ap,q as Co,r as zc,t as zn}from"./calendar-vendor-BztppQHM-1760016510984.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var E0={exports:{}},ti={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=j,op=Symbol.for("react.element"),lp=Symbol.for("react.fragment"),cp=Object.prototype.hasOwnProperty,dp=ip.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hp={key:!0,ref:!0,__self:!0,__source:!0};function T0(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)cp.call(e,n)&&!hp.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:op,type:t,key:i,ref:o,props:r,_owner:dp.current}}ti.Fragment=lp;ti.jsx=T0;ti.jsxs=T0;E0.exports=ti;var a=E0.exports,_o={},Uc=Xx;_o.createRoot=Uc.createRoot,_o.hydrateRoot=Uc.hydrateRoot;const up={},Wc=t=>{let e;const s=new Set,n=(h,m)=>{const u=typeof h=="function"?h(e):h;if(!Object.is(u,e)){const g=e;e=m??(typeof u!="object"||u===null)?u:Object.assign({},e,u),s.forEach(f=>f(e,g))}},r=()=>e,c={setState:n,getState:r,getInitialState:()=>d,subscribe:h=>(s.add(h),()=>s.delete(h)),destroy:()=>{(up?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},d=e=t(n,r,c);return c},mp=t=>t?Wc(t):Wc;var A0={exports:{}},D0={},P0={exports:{}},R0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=j;function gp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fp=typeof Object.is=="function"?Object.is:gp,xp=qs.useState,pp=qs.useEffect,bp=qs.useLayoutEffect,yp=qs.useDebugValue;function vp(t,e){var s=e(),n=xp({inst:{value:s,getSnapshot:e}}),r=n[0].inst,i=n[1];return bp(function(){r.value=s,r.getSnapshot=e,Ti(r)&&i({inst:r})},[t,s,e]),pp(function(){return Ti(r)&&i({inst:r}),t(function(){Ti(r)&&i({inst:r})})},[t]),yp(s),s}function Ti(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!fp(t,s)}catch{return!0}}function jp(t,e){return e()}var kp=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jp:vp;R0.useSyncExternalStore=qs.useSyncExternalStore!==void 0?qs.useSyncExternalStore:kp;P0.exports=R0;var wp=P0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var si=j,Np=wp;function Sp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cp=typeof Object.is=="function"?Object.is:Sp,_p=Np.useSyncExternalStore,Mp=si.useRef,Ep=si.useEffect,Tp=si.useMemo,Ap=si.useDebugValue;D0.useSyncExternalStoreWithSelector=function(t,e,s,n,r){var i=Mp(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Tp(function(){function c(g){if(!d){if(d=!0,h=g,g=n(g),r!==void 0&&o.hasValue){var f=o.value;if(r(f,g))return m=f}return m=g}if(f=m,Cp(h,g))return f;var p=n(g);return r!==void 0&&r(f,p)?(h=g,f):(h=g,m=p)}var d=!1,h,m,u=s===void 0?null:s;return[function(){return c(e())},u===null?void 0:function(){return c(u())}]},[e,s,n,r]);var l=_p(t,i[0],i[1]);return Ep(function(){o.hasValue=!0,o.value=l},[l]),Ap(l),l};A0.exports=D0;var Dp=A0.exports;const Pp=Qx(Dp),L0={},{useDebugValue:Rp}=Sr,{useSyncExternalStoreWithSelector:Lp}=Pp;let Yc=!1;const Op=t=>t;function Ip(t,e=Op,s){(L0?"production":void 0)!=="production"&&s&&!Yc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Yc=!0);const n=Lp(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,s);return Rp(n),n}const Gc=t=>{(L0?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?mp(t):t,s=(n,r)=>Ip(e,n,r);return Object.assign(s,e),s},Sl=t=>t?Gc(t):Gc,Xt=Sl(t=>({isAuthenticated:!1,isLoading:!1,error:null,user:null,referralStats:null,isLoadingReferralStats:!1,referralCode:"",isValidatingReferral:!1,referralValidation:null,myReferralCode:null,isGeneratingReferralCode:!1,login:async(e,s)=>{t({isLoading:!0,error:null});try{const n=typeof e=="string"?e:e.email,r=typeof e=="string"?s:e.password,i=(n==null?void 0:n.split("@")[0])||"User";t({isAuthenticated:!0,user:{email:n,name:i,id:Date.now().toString(),createdAt:new Date().toISOString()},isLoading:!1})}catch{t({error:"Login failed",isLoading:!1})}},logout:()=>{t({isAuthenticated:!1,user:null})},signUp:async e=>{t({isLoading:!0,error:null});try{const s={id:`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,email:e.email,name:e.name,createdAt:new Date().toISOString(),referredBy:e.referralCode};t({isAuthenticated:!0,user:s,isLoading:!1})}catch{t({error:"Signup failed",isLoading:!1})}},loadReferralStats:async e=>{t({isLoadingReferralStats:!0});try{t({referralStats:{totalReferrals:0,pendingReferrals:0,confirmedReferrals:0,totalCommission:0},isLoadingReferralStats:!1})}catch{t({error:"Failed to load referral stats",isLoadingReferralStats:!1})}},setError:e=>{t({error:e})},setReferralCode:e=>{t({referralCode:e})},validateReferralCode:async e=>{if(!e||e.length!==6)return t({referralValidation:null}),!1;t({isValidatingReferral:!0});try{await new Promise(o=>setTimeout(o,1e3));const s=e.toUpperCase()!=="INVALID"&&e.length===6,n=s?"친구":void 0,r=s?`유효한 추천 코드입니다! ${n}님의 추천으로 특별 혜택을 받으실 수 있습니다.`:"존재하지 않는 추천 코드입니다. 다시 확인해주세요.";return t({referralValidation:{isValid:s,message:r,referrerName:n},isValidatingReferral:!1}),s}catch{return t({referralValidation:{isValid:!1,message:"추천 코드 확인 중 오류가 발생했습니다."},isValidatingReferral:!1}),!1}},clearReferralValidation:()=>{t({referralValidation:null,isValidatingReferral:!1})},generateMyReferralCode:async()=>{t({isGeneratingReferralCode:!0});try{await new Promise(s=>setTimeout(s,500));const e=Math.random().toString(36).substr(2,6).toUpperCase();t({myReferralCode:e,isGeneratingReferralCode:!1})}catch{t({error:"추천 코드 생성에 실패했습니다.",isGeneratingReferralCode:!1})}}})),Mo={isValidReferralCode:t=>{if(!t)return!1;const e=t.trim().toUpperCase();return/^[A-Z0-9]{6}$/.test(e)},isValidEmail:t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim()):!1,getPasswordStrength:t=>{if(!t)return{score:0,feedback:"비밀번호를 입력해주세요."};let e=0;const s=[];t.length>=8?e++:s.push("8자 이상"),/[a-z]/.test(t)?e++:s.push("소문자 포함"),/[A-Z]/.test(t)?e++:s.push("대문자 포함"),/[0-9]/.test(t)?e++:s.push("숫자 포함"),/[^A-Za-z0-9]/.test(t)?e++:s.push("특수문자 포함");const r=["매우 약함","약함","보통","강함","매우 강함"][Math.min(e,4)];return{score:Math.min(e,4),feedback:s.length>0?`${r} (추가 권장: ${s.join(", ")})`:`${r}`}},sanitizeInput:t=>t?t.replace(/[<>'&]/g,"").trim():""},Ur="WELCOME1",Os={TITLE:"🎉 운명나침반 공식 웰컴 혜택",SUBTITLE:"추천인 코드가 없어도 특별한 혜택을 드려요!",DESCRIPTION:"신규 가입자 전용 웰컴 패키지가 자동으로 적용됩니다",BENEFITS:["프리미엄 사주 분석 1회 무료","궁합 분석 서비스 무제한 (7일)","특별 운세 리포트 제공","VIP 고객 지원 서비스"],CTA_MESSAGE:"더 많은 혜택을 받고 싶다면 친구 추천 코드를 입력해보세요!",AUTO_APPLIED:"✅ 웰컴 혜택이 자동으로 적용되었습니다"},Fp=({className:t="",onValidationChange:e,disabled:s=!1})=>{const{referralCode:n,isValidatingReferral:r,referralValidation:i,setReferralCode:o,validateReferralCode:l,clearReferralValidation:c}=Xt(),[d,h]=j.useState(!1),[m,u]=j.useState(""),[g,f]=j.useState(null),[p,b]=j.useState(!1);j.useEffect(()=>{n?(u(n),h(!0),b(!0)):e==null||e(!0,Ur)},[n,e]);const y=j.useCallback(w=>{g&&clearTimeout(g);const k=setTimeout(async()=>{if(w.length===6){const M=await l(w);e==null||e(M,M?w:Ur),b(M)}else w.length===0&&(c(),e==null||e(!0,Ur),b(!1))},500);f(k)},[g,l,c,e]),v=w=>{const k=w.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");k.length<=6&&(u(k),o(k),y(k))},N=()=>{s||(h(!d),!d&&m&&c())},S=()=>{u(""),o(""),c(),e==null||e(!0,Ur),b(!1)},C=()=>!m||m.length<6?"":r?"border-blue-500 ring-2 ring-blue-200":i!=null&&i.isValid?"border-green-500 ring-2 ring-green-200":i&&!i.isValid?"border-red-500 ring-2 ring-red-200":"",_=()=>r?a.jsx("div",{className:"animate-spin text-blue-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):i!=null&&i.isValid?a.jsx("div",{className:"text-green-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}):i&&!i.isValid&&m.length===6?a.jsx("div",{className:"text-red-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}):null;return a.jsxs("div",{className:`space-y-4 ${t}`,children:[!p&&a.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 p-6 rounded-xl border border-yellow-200 dark:border-yellow-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-3xl mb-3 block",children:"🎉"}),a.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:Os.TITLE}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:Os.SUBTITLE}),a.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-100 dark:bg-green-900/20 px-3 py-2 rounded-lg border border-green-200 dark:border-green-700 mb-4",children:[a.jsx("span",{className:"text-green-600",children:"✅"}),a.jsx("span",{className:"text-green-700 dark:text-green-400 text-sm font-medium",children:Os.AUTO_APPLIED})]}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-2",children:[a.jsx("p",{className:"font-medium mb-2",children:Os.DESCRIPTION}),Os.BENEFITS.map((w,k)=>a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("span",{className:"text-yellow-500",children:"✨"}),a.jsx("span",{className:"text-xs",children:w})]},k))]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:Os.CTA_MESSAGE})]})}),p&&(i==null?void 0:i.isValid)&&a.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 p-6 rounded-xl border border-green-200 dark:border-green-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-3xl mb-3 block",children:"🎊"}),a.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"친구 추천 혜택 적용 완료!"}),a.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-200 dark:bg-green-800/30 px-4 py-2 rounded-lg border border-green-300 dark:border-green-600 mb-3",children:[a.jsx("span",{className:"text-green-600",children:"✅"}),a.jsxs("span",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:["추천인 코드: ",m]})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i==null?void 0:i.referrerName,"님의 추천으로 특별 혜택을 받으실 수 있습니다!"]})]})}),a.jsxs("button",{type:"button",onClick:N,disabled:s,className:`
          w-full flex items-center justify-between px-4 py-3 
          bg-gradient-to-r from-purple-50 to-pink-50 
          dark:from-purple-900/20 dark:to-pink-900/20 
          border border-purple-200 dark:border-purple-700 
          rounded-lg text-left transition-all duration-200
          ${s?"opacity-50 cursor-not-allowed":"hover:from-purple-100 hover:to-pink-100 dark:hover:from-purple-800/30 dark:hover:to-pink-800/30 cursor-pointer"}
          ${d?"rounded-b-none border-b-0":""}
        `,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:"👫"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"친구 추천 코드가 있으신가요?"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p?"친구 추천으로 더 많은 혜택을 받고 계시네요!":d?"친구가 알려준 6자리 코드를 입력하고 추가 혜택을 받아보세요":"클릭하여 친구 코드를 입력하고 추가 혜택을 받아보세요"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[p&&(i==null?void 0:i.isValid)&&a.jsx("span",{className:"text-green-600 text-sm font-medium",children:"적용됨"}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),d&&a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-l border-r border-b border-purple-200 dark:border-purple-700 rounded-b-lg px-4 py-4 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["친구 추천 코드 ",a.jsx("span",{className:"text-gray-400",children:"(6자리 영문/숫자)"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:m,onChange:v,disabled:s||r,placeholder:"예: AB12CD",className:`
                  w-full px-4 py-3 pr-12 
                  border-2 rounded-lg text-lg font-mono tracking-widest text-center
                  placeholder-gray-400 
                  focus:outline-none focus:ring-0
                  disabled:opacity-50 disabled:cursor-not-allowed
                  bg-white dark:bg-gray-800 
                  text-gray-800 dark:text-gray-200
                  ${C()||"border-gray-300 dark:border-gray-600 focus:border-purple-500"}
                  transition-all duration-200
                `,maxLength:6}),a.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[_(),m&&!r&&a.jsx("button",{type:"button",onClick:S,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",disabled:s,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(6)].map((w,k)=>a.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-200 ${k<m.length?"bg-purple-500":"bg-gray-200 dark:bg-gray-600"}`},k))})]}),i&&m.length>0&&a.jsx("div",{className:`p-3 rounded-lg border ${i.isValid?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700"}`,children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:`mt-0.5 ${i.isValid?"text-green-600":"text-red-600"}`,children:i.isValid?"✅":"❌"}),a.jsx("div",{className:`text-sm ${i.isValid?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:i.message})]})}),r&&a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-600",children:[a.jsx("div",{className:"animate-spin",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),a.jsx("span",{className:"text-sm",children:"친구 추천 코드 확인 중..."})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-blue-600 mt-0.5",children:"💝"}),a.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:[a.jsx("p",{className:"font-medium mb-1",children:"친구 추천 추가 혜택"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:"• 웰컴 혜택 + 친구 추천 혜택 모두 적용"}),a.jsx("li",{children:"• 프리미엄 기능 추가 1개월 연장"}),a.jsx("li",{children:"• 특별 사주 분석 리포트 제공"}),a.jsx("li",{children:"• 친구와 함께 쓰는 궁합 다이어리"})]})]})]})}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[a.jsx("p",{children:"• 친구 추천 코드는 회원가입 시에만 입력할 수 있습니다"}),a.jsx("p",{children:"• 친구 코드가 없어도 웰컴 혜택은 자동으로 적용됩니다"}),a.jsx("p",{children:"• 잘못된 코드를 여러 번 입력하면 일시적으로 제한될 수 있습니다"})]})]})]})},Bp=({className:t="",onSuccess:e,onLoginClick:s})=>{const n=He(),{signUp:r,isLoading:i,error:o}=Xt(),[l,c]=j.useState({email:"",password:"",confirmPassword:"",name:"",agreedToTerms:!1,agreedToPrivacy:!1,agreedToMarketing:!1}),[d,h]=j.useState({email:{isValid:!1,message:""},password:{isValid:!1,message:""},confirmPassword:{isValid:!1,message:""},name:{isValid:!1,message:""}}),[m,u]=j.useState(!1),[g,f]=j.useState(""),[p,b]=j.useState(!1),[y,v]=j.useState({score:0,feedback:""});j.useEffect(()=>{const k=Mo.isValidEmail(l.email);h(D=>({...D,email:{isValid:k,message:l.email&&!k?"올바른 이메일 주소를 입력해주세요.":""}}));const M=l.name.trim().length>=2;h(D=>({...D,name:{isValid:M,message:l.name&&!M?"이름은 2자 이상 입력해주세요.":""}}));const E=l.password.length>=8,A=Mo.getPasswordStrength(l.password);v(A),h(D=>({...D,password:{isValid:E,message:l.password&&!E?"비밀번호는 8자리 이상 입력해주세요.":""}}));const O=l.password===l.confirmPassword&&l.confirmPassword.length>0;h(D=>({...D,confirmPassword:{isValid:O,message:l.confirmPassword&&!O?"비밀번호가 일치하지 않습니다.":""}}));const R=k&&E&&O&&M,T=l.agreedToTerms&&l.agreedToPrivacy;b(R&&T)},[l]);const N=(k,M)=>{c(E=>({...E,[k]:M}))},S=(k,M)=>{u(k),f(M)},C=async k=>{if(k.preventDefault(),!(!p||i))try{await r({email:l.email,password:l.password,name:l.name,referralCode:m?g:void 0}),e==null||e(),n("/settings")}catch(M){console.error("회원가입 실패:",M)}},_=()=>y.score<=1?"text-red-500":y.score<=2?"text-yellow-500":y.score<=3?"text-blue-500":"text-green-500",w=k=>{const M=`
      w-full px-4 py-3 border-2 rounded-lg 
      focus:outline-none focus:ring-0 transition-all duration-200
      bg-white dark:bg-gray-800 
      text-gray-800 dark:text-gray-200
    `;return!l[k]||l[k]===""?`${M} border-gray-300 dark:border-gray-600 focus:border-purple-500`:d[k].isValid?`${M} border-green-500 focus:border-green-600`:`${M} border-red-500 focus:border-red-600`};return a.jsxs("div",{className:`max-w-md mx-auto ${t}`,children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mb-4",children:a.jsx("span",{className:"text-white text-2xl",children:"🔮"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"운명나침반 가입하기"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"개인화된 사주 분석으로 운명을 확인해보세요"})]}),o&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-red-600",children:"⚠️"}),a.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm",children:o})]})}),a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이메일 주소 *"}),a.jsx("input",{type:"email",value:l.email,onChange:k=>N("email",k.target.value),placeholder:"example@email.com",className:w("email"),disabled:i}),d.email.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이름 *"}),a.jsx("input",{type:"text",value:l.name,onChange:k=>N("name",k.target.value),placeholder:"홍길동",className:w("name"),disabled:i}),d.name.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호 *"}),a.jsx("input",{type:"password",value:l.password,onChange:k=>N("password",k.target.value),placeholder:"8자 이상 입력",className:w("password"),disabled:i}),l.password&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:`text-sm ${_()}`,children:y.feedback}),a.jsx("div",{className:"mt-1 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${y.score<=1?"bg-red-500":y.score<=2?"bg-yellow-500":y.score<=3?"bg-blue-500":"bg-green-500"}`,style:{width:`${y.score/4*100}%`}})})]}),d.password.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호 확인 *"}),a.jsx("input",{type:"password",value:l.confirmPassword,onChange:k=>N("confirmPassword",k.target.value),placeholder:"비밀번호를 다시 입력",className:w("confirmPassword"),disabled:i}),d.confirmPassword.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.confirmPassword.message})]}),a.jsx(Fp,{onValidationChange:S,disabled:i}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("input",{type:"checkbox",id:"terms",checked:l.agreedToTerms,onChange:k=>N("agreedToTerms",k.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:i}),a.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"font-medium",children:"서비스 이용약관"}),"에 동의합니다 ",a.jsx("span",{className:"text-red-500",children:"*"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("input",{type:"checkbox",id:"privacy",checked:l.agreedToPrivacy,onChange:k=>N("agreedToPrivacy",k.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:i}),a.jsxs("label",{htmlFor:"privacy",className:"text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"font-medium",children:"개인정보 처리방침"}),"에 동의합니다 ",a.jsx("span",{className:"text-red-500",children:"*"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("input",{type:"checkbox",id:"marketing",checked:l.agreedToMarketing,onChange:k=>N("agreedToMarketing",k.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:i}),a.jsx("label",{htmlFor:"marketing",className:"text-sm text-gray-700 dark:text-gray-300",children:"마케팅 정보 수신에 동의합니다 (선택)"})]})]}),a.jsx("button",{type:"submit",disabled:!p||i,className:`
              w-full py-4 px-6 rounded-lg font-medium text-lg transition-all duration-200
              ${p&&!i?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}
            `,children:i?a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),a.jsx("span",{children:"가입 처리 중..."})]}):"회원가입 완료"}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["이미 계정이 있으신가요?"," ",a.jsx("button",{type:"button",onClick:s,className:"text-purple-600 hover:text-purple-700 font-medium hover:underline",disabled:i,children:"로그인하기"})]})})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"가입하시면 개인화된 사주 분석과 운세 정보를 받아보실 수 있습니다."})})]})},$p=({className:t="",onSuccess:e,onSignUpClick:s})=>{const n=He(),{login:r,isLoading:i,error:o}=Xt(),[l,c]=j.useState({email:"",password:"",rememberMe:!1}),[d,h]=j.useState({email:{isValid:!1,message:""},password:{isValid:!1,message:""}}),[m,u]=j.useState(!1);j.useEffect(()=>{const b=Mo.isValidEmail(l.email),y=l.email&&!b?"올바른 이메일 주소를 입력해주세요.":"",v=l.password.length>=8,N=l.password&&!v?"비밀번호는 8자리 이상입니다.":"";h({email:{isValid:b,message:y},password:{isValid:v,message:N}}),u(b&&v)},[l.email,l.password]);const g=(b,y)=>{c(v=>({...v,[b]:y}))},f=async b=>{if(b.preventDefault(),!(!m||i))try{await r({email:l.email,password:l.password}),e==null||e(),n("/dashboard")}catch(y){console.error("로그인 실패:",y)}},p=b=>{const y=`
      w-full px-4 py-3 border-2 rounded-lg 
      focus:outline-none focus:ring-0 transition-all duration-200
      bg-white dark:bg-gray-800 
      text-gray-800 dark:text-gray-200
      placeholder-gray-400
    `;return!l[b]||l[b]===""?`${y} border-gray-300 dark:border-gray-600 focus:border-purple-500`:d[b].isValid?`${y} border-green-500 focus:border-green-600`:`${y} border-red-500 focus:border-red-600`};return a.jsxs("div",{className:`max-w-md mx-auto ${t}`,children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mb-4",children:a.jsx("span",{className:"text-white text-2xl",children:"🔮"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"운명나침반 로그인"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"나만의 운세 분석을 계속해보세요"})]}),o&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-red-600",children:"⚠️"}),a.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm",children:o})]})}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이메일 주소"}),a.jsx("input",{type:"email",value:l.email,onChange:b=>g("email",b.target.value),placeholder:"example@email.com",className:p("email"),disabled:i}),d.email.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호"}),a.jsx("input",{type:"password",value:l.password,onChange:b=>g("password",b.target.value),placeholder:"비밀번호를 입력하세요",className:p("password"),disabled:i}),d.password.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.password.message})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:l.rememberMe,onChange:b=>g("rememberMe",b.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500",disabled:i}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"로그인 상태 유지"})]}),a.jsx("button",{type:"button",className:"text-sm text-purple-600 hover:text-purple-700 hover:underline",disabled:i,children:"비밀번호 찾기"})]}),a.jsx("button",{type:"submit",disabled:!m||i,className:`
              w-full py-4 px-6 rounded-lg font-medium text-lg transition-all duration-200
              ${m&&!i?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}
            `,children:i?a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),a.jsx("span",{children:"로그인 중..."})]}):"로그인"}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["아직 계정이 없으신가요?"," ",a.jsx("button",{type:"button",onClick:s,className:"text-purple-600 hover:text-purple-700 font-medium hover:underline",disabled:i,children:"회원가입하기"})]})})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:"소셜 계정으로 간편 로그인"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:"🌐"}),a.jsx("div",{className:"text-xs text-gray-500",children:"구글"})]})}),a.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:"💬"}),a.jsx("div",{className:"text-xs text-gray-500",children:"카카오"})]})}),a.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:"📱"}),a.jsx("div",{className:"text-xs text-gray-500",children:"네이버"})]})})]}),a.jsx("div",{className:"text-center text-xs text-gray-400 mt-2",children:"(준비 중)"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"로그인하시면 개인화된 사주 분석과 캘린더 기능을 이용하실 수 있습니다."})})]})},Vp=()=>{const[t,e]=Zx(),s=He(),{isAuthenticated:n,user:r}=Xt(),i=t.get("mode")||"login",o=i==="signup"||i==="login"?i:"login",[l,c]=j.useState(o);j.useEffect(()=>{n&&r&&s("/dashboard")},[n,r,s]);const d=()=>{c("signup"),e({mode:"signup"},{replace:!0})},h=()=>{c("login"),e({mode:"login"},{replace:!0})},m=()=>{};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 dark:from-purple-900 dark:via-gray-900 dark:to-blue-900 flex flex-col justify-center py-12 px-4",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-300/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-3/4 right-1/4 w-96 h-96 bg-pink-300/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-80 h-80 bg-blue-300/20 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"inline-flex items-center space-x-2 mb-6",children:[a.jsx("span",{className:"text-4xl",children:"🔮"}),a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg max-w-md mx-auto",children:"AI와 전통 사주학이 만나 당신의 운명을 안내합니다"})]}),a.jsx("div",{className:"max-w-md mx-auto mb-8",children:a.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm p-1 rounded-xl shadow-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[a.jsx("button",{onClick:h,className:`
                  py-3 px-6 text-sm font-medium rounded-lg transition-all duration-200
                  ${l==="login"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white"}
                `,children:"로그인"}),a.jsx("button",{onClick:d,className:`
                  py-3 px-6 text-sm font-medium rounded-lg transition-all duration-200
                  ${l==="signup"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white"}
                `,children:"회원가입"})]})})}),a.jsx("div",{className:"transition-all duration-300",children:l==="signup"?a.jsx(Bp,{onSuccess:m,onLoginClick:h}):a.jsx($p,{onSuccess:m,onSignUpClick:d})}),a.jsxs("div",{className:"mt-12 max-w-4xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 dark:text-white mb-8",children:"운명나침반과 함께 하는 특별한 경험"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:a.jsx("span",{className:"text-white text-2xl",children:"📊"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"개인화 사주 분석"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"생년월일시를 바탕으로 한 정확한 사주 해석과 운세 분석을 제공합니다."})]}),a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:a.jsx("span",{className:"text-white text-2xl",children:"📅"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"스마트 캘린더"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"일정 관리와 운세 정보가 통합된 지능형 캘린더로 하루를 계획하세요."})]}),a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-green-500 to-teal-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:a.jsx("span",{className:"text-white text-2xl",children:"📝"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"다이어리 & 운세"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"매일의 기록과 함께 개인 맞춤 운세와 조언을 받아보세요."})]})]})]}),l==="signup"&&a.jsx("div",{className:"mt-12 max-w-md mx-auto",children:a.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 p-6 rounded-xl border border-yellow-200 dark:border-yellow-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"🎁"}),a.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"친구 추천 혜택"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"추천인 코드로 가입하시면 특별한 혜택을 드려요!"}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[a.jsx("div",{children:"✨ 프리미엄 기능 1개월 무료"}),a.jsx("div",{children:"🔍 특별 사주 분석 무료 제공"}),a.jsx("div",{children:"💕 궁합 분석 서비스 무료"})]})]})})})]}),a.jsxs("footer",{className:"relative z-10 mt-16 text-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("p",{children:"© 2024 운명나침반. 모든 권리 보유."}),a.jsxs("div",{className:"mt-2 space-x-4",children:[a.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"이용약관"}),a.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"개인정보처리방침"}),a.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"고객지원"})]})]})]})};function O0(t,e){return function(){return t.apply(e,arguments)}}const{toString:Hp}=Object.prototype,{getPrototypeOf:Cl}=Object,{iterator:ni,toStringTag:I0}=Symbol,ri=(t=>e=>{const s=Hp.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ot=t=>(t=t.toLowerCase(),e=>ri(e)===t),ai=t=>e=>typeof e===t,{isArray:fn}=Array,or=ai("undefined");function Er(t){return t!==null&&!or(t)&&t.constructor!==null&&!or(t.constructor)&&$e(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const F0=ot("ArrayBuffer");function zp(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&F0(t.buffer),e}const Up=ai("string"),$e=ai("function"),B0=ai("number"),Tr=t=>t!==null&&typeof t=="object",Wp=t=>t===!0||t===!1,ba=t=>{if(ri(t)!=="object")return!1;const e=Cl(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(I0 in t)&&!(ni in t)},Yp=t=>{if(!Tr(t)||Er(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Gp=ot("Date"),Kp=ot("File"),qp=ot("Blob"),Jp=ot("FileList"),Xp=t=>Tr(t)&&$e(t.pipe),Qp=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||$e(t.append)&&((e=ri(t))==="formdata"||e==="object"&&$e(t.toString)&&t.toString()==="[object FormData]"))},Zp=ot("URLSearchParams"),[eb,tb,sb,nb]=["ReadableStream","Request","Response","Headers"].map(ot),rb=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ar(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),fn(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{if(Er(t))return;const i=s?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(n=0;n<o;n++)l=i[n],e.call(null,t[l],l,t)}}function $0(t,e){if(Er(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,r;for(;n-- >0;)if(r=s[n],e===r.toLowerCase())return r;return null}const ms=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V0=t=>!or(t)&&t!==ms;function Eo(){const{caseless:t}=V0(this)&&this||{},e={},s=(n,r)=>{const i=t&&$0(e,r)||r;ba(e[i])&&ba(n)?e[i]=Eo(e[i],n):ba(n)?e[i]=Eo({},n):fn(n)?e[i]=n.slice():e[i]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Ar(arguments[n],s);return e}const ab=(t,e,s,{allOwnKeys:n}={})=>(Ar(e,(r,i)=>{s&&$e(r)?t[i]=O0(r,s):t[i]=r},{allOwnKeys:n}),t),ib=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ob=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},lb=(t,e,s,n)=>{let r,i,o;const l={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!n||n(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=s!==!1&&Cl(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},cb=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},db=t=>{if(!t)return null;if(fn(t))return t;let e=t.length;if(!B0(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},hb=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Cl(Uint8Array)),ub=(t,e)=>{const n=(t&&t[ni]).call(t);let r;for(;(r=n.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},mb=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},gb=ot("HTMLFormElement"),fb=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,r){return n.toUpperCase()+r}),Kc=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),xb=ot("RegExp"),H0=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};Ar(s,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(n[i]=o||r)}),Object.defineProperties(t,n)},pb=t=>{H0(t,(e,s)=>{if($e(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if($e(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},bb=(t,e)=>{const s={},n=r=>{r.forEach(i=>{s[i]=!0})};return fn(t)?n(t):n(String(t).split(e)),s},yb=()=>{},vb=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function jb(t){return!!(t&&$e(t.append)&&t[I0]==="FormData"&&t[ni])}const kb=t=>{const e=new Array(10),s=(n,r)=>{if(Tr(n)){if(e.indexOf(n)>=0)return;if(Er(n))return n;if(!("toJSON"in n)){e[r]=n;const i=fn(n)?[]:{};return Ar(n,(o,l)=>{const c=s(o,r+1);!or(c)&&(i[l]=c)}),e[r]=void 0,i}}return n};return s(t,0)},wb=ot("AsyncFunction"),Nb=t=>t&&(Tr(t)||$e(t))&&$e(t.then)&&$e(t.catch),z0=((t,e)=>t?setImmediate:e?((s,n)=>(ms.addEventListener("message",({source:r,data:i})=>{r===ms&&i===s&&n.length&&n.shift()()},!1),r=>{n.push(r),ms.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",$e(ms.postMessage)),Sb=typeof queueMicrotask<"u"?queueMicrotask.bind(ms):typeof process<"u"&&process.nextTick||z0,Cb=t=>t!=null&&$e(t[ni]),P={isArray:fn,isArrayBuffer:F0,isBuffer:Er,isFormData:Qp,isArrayBufferView:zp,isString:Up,isNumber:B0,isBoolean:Wp,isObject:Tr,isPlainObject:ba,isEmptyObject:Yp,isReadableStream:eb,isRequest:tb,isResponse:sb,isHeaders:nb,isUndefined:or,isDate:Gp,isFile:Kp,isBlob:qp,isRegExp:xb,isFunction:$e,isStream:Xp,isURLSearchParams:Zp,isTypedArray:hb,isFileList:Jp,forEach:Ar,merge:Eo,extend:ab,trim:rb,stripBOM:ib,inherits:ob,toFlatObject:lb,kindOf:ri,kindOfTest:ot,endsWith:cb,toArray:db,forEachEntry:ub,matchAll:mb,isHTMLForm:gb,hasOwnProperty:Kc,hasOwnProp:Kc,reduceDescriptors:H0,freezeMethods:pb,toObjectSet:bb,toCamelCase:fb,noop:yb,toFiniteNumber:vb,findKey:$0,global:ms,isContextDefined:V0,isSpecCompliantForm:jb,toJSONObject:kb,isAsyncFn:wb,isThenable:Nb,setImmediate:z0,asap:Sb,isIterable:Cb};function Z(t,e,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}P.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.status}}});const U0=Z.prototype,W0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{W0[t]={value:t}});Object.defineProperties(Z,W0);Object.defineProperty(U0,"isAxiosError",{value:!0});Z.from=(t,e,s,n,r,i)=>{const o=Object.create(U0);return P.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Z.call(o,t.message,e,s,n,r),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const _b=null;function To(t){return P.isPlainObject(t)||P.isArray(t)}function Y0(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function qc(t,e,s){return t?t.concat(e).map(function(r,i){return r=Y0(r),!s&&i?"["+r+"]":r}).join(s?".":""):e}function Mb(t){return P.isArray(t)&&!t.some(To)}const Eb=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function ii(t,e,s){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=P.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,b){return!P.isUndefined(b[p])});const n=s.metaTokens,r=s.visitor||h,i=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(r))throw new TypeError("visitor must be a function");function d(f){if(f===null)return"";if(P.isDate(f))return f.toISOString();if(P.isBoolean(f))return f.toString();if(!c&&P.isBlob(f))throw new Z("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(f)||P.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function h(f,p,b){let y=f;if(f&&!b&&typeof f=="object"){if(P.endsWith(p,"{}"))p=n?p:p.slice(0,-2),f=JSON.stringify(f);else if(P.isArray(f)&&Mb(f)||(P.isFileList(f)||P.endsWith(p,"[]"))&&(y=P.toArray(f)))return p=Y0(p),y.forEach(function(N,S){!(P.isUndefined(N)||N===null)&&e.append(o===!0?qc([p],S,i):o===null?p:p+"[]",d(N))}),!1}return To(f)?!0:(e.append(qc(b,p,i),d(f)),!1)}const m=[],u=Object.assign(Eb,{defaultVisitor:h,convertValue:d,isVisitable:To});function g(f,p){if(!P.isUndefined(f)){if(m.indexOf(f)!==-1)throw Error("Circular reference detected in "+p.join("."));m.push(f),P.forEach(f,function(y,v){(!(P.isUndefined(y)||y===null)&&r.call(e,y,P.isString(v)?v.trim():v,p,u))===!0&&g(y,p?p.concat(v):[v])}),m.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return g(t),e}function Jc(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function _l(t,e){this._pairs=[],t&&ii(t,this,e)}const G0=_l.prototype;G0.append=function(e,s){this._pairs.push([e,s])};G0.toString=function(e){const s=e?function(n){return e.call(this,n,Jc)}:Jc;return this._pairs.map(function(r){return s(r[0])+"="+s(r[1])},"").join("&")};function Tb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function K0(t,e,s){if(!e)return t;const n=s&&s.encode||Tb;P.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let i;if(r?i=r(e,s):i=P.isURLSearchParams(e)?e.toString():new _l(e,s).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Xc{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(n){n!==null&&e(n)})}}const q0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ab=typeof URLSearchParams<"u"?URLSearchParams:_l,Db=typeof FormData<"u"?FormData:null,Pb=typeof Blob<"u"?Blob:null,Rb={isBrowser:!0,classes:{URLSearchParams:Ab,FormData:Db,Blob:Pb},protocols:["http","https","file","blob","url","data"]},Ml=typeof window<"u"&&typeof document<"u",Ao=typeof navigator=="object"&&navigator||void 0,Lb=Ml&&(!Ao||["ReactNative","NativeScript","NS"].indexOf(Ao.product)<0),Ob=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ib=Ml&&window.location.href||"http://localhost",Fb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ml,hasStandardBrowserEnv:Lb,hasStandardBrowserWebWorkerEnv:Ob,navigator:Ao,origin:Ib},Symbol.toStringTag,{value:"Module"})),Te={...Fb,...Rb};function Bb(t,e){return ii(t,new Te.classes.URLSearchParams,{visitor:function(s,n,r,i){return Te.isNode&&P.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function $b(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Vb(t){const e={},s=Object.keys(t);let n;const r=s.length;let i;for(n=0;n<r;n++)i=s[n],e[i]=t[i];return e}function J0(t){function e(s,n,r,i){let o=s[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=s.length;return o=!o&&P.isArray(r)?r.length:o,c?(P.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!l):((!r[o]||!P.isObject(r[o]))&&(r[o]=[]),e(s,n,r[o],i)&&P.isArray(r[o])&&(r[o]=Vb(r[o])),!l)}if(P.isFormData(t)&&P.isFunction(t.entries)){const s={};return P.forEachEntry(t,(n,r)=>{e($b(n),r,s,0)}),s}return null}function Hb(t,e,s){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const Dr={transitional:q0,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",r=n.indexOf("application/json")>-1,i=P.isObject(e);if(i&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return r?JSON.stringify(J0(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e)||P.isReadableStream(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Bb(e,this.formSerializer).toString();if((l=P.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ii(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||r?(s.setContentType("application/json",!1),Hb(e)):e}],transformResponse:[function(e){const s=this.transitional||Dr.transitional,n=s&&s.forcedJSONParsing,r=this.responseType==="json";if(P.isResponse(e)||P.isReadableStream(e))return e;if(e&&P.isString(e)&&(n&&!this.responseType||r)){const o=!(s&&s.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?Z.from(l,Z.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Te.classes.FormData,Blob:Te.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{Dr.headers[t]={}});const zb=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ub=t=>{const e={};let s,n,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),s=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!s||e[s]&&zb[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},Qc=Symbol("internals");function Nn(t){return t&&String(t).trim().toLowerCase()}function ya(t){return t===!1||t==null?t:P.isArray(t)?t.map(ya):String(t)}function Wb(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const Yb=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ai(t,e,s,n,r){if(P.isFunction(n))return n.call(this,e,s);if(r&&(e=s),!!P.isString(e)){if(P.isString(n))return e.indexOf(n)!==-1;if(P.isRegExp(n))return n.test(e)}}function Gb(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function Kb(t,e){const s=P.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(r,i,o){return this[n].call(this,e,r,i,o)},configurable:!0})})}let Ve=class{constructor(e){e&&this.set(e)}set(e,s,n){const r=this;function i(l,c,d){const h=Nn(c);if(!h)throw new Error("header name must be a non-empty string");const m=P.findKey(r,h);(!m||r[m]===void 0||d===!0||d===void 0&&r[m]!==!1)&&(r[m||c]=ya(l))}const o=(l,c)=>P.forEach(l,(d,h)=>i(d,h,c));if(P.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(P.isString(e)&&(e=e.trim())&&!Yb(e))o(Ub(e),s);else if(P.isObject(e)&&P.isIterable(e)){let l={},c,d;for(const h of e){if(!P.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?P.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,s)}else e!=null&&i(s,e,n);return this}get(e,s){if(e=Nn(e),e){const n=P.findKey(this,e);if(n){const r=this[n];if(!s)return r;if(s===!0)return Wb(r);if(P.isFunction(s))return s.call(this,r,n);if(P.isRegExp(s))return s.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Nn(e),e){const n=P.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Ai(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let r=!1;function i(o){if(o=Nn(o),o){const l=P.findKey(n,o);l&&(!s||Ai(n,n[l],l,s))&&(delete n[l],r=!0)}}return P.isArray(e)?e.forEach(i):i(e),r}clear(e){const s=Object.keys(this);let n=s.length,r=!1;for(;n--;){const i=s[n];(!e||Ai(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const s=this,n={};return P.forEach(this,(r,i)=>{const o=P.findKey(n,i);if(o){s[o]=ya(r),delete s[i];return}const l=e?Gb(i):String(i).trim();l!==i&&delete s[i],s[l]=ya(r),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return P.forEach(this,(n,r)=>{n!=null&&n!==!1&&(s[r]=e&&P.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[Qc]=this[Qc]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=Nn(o);n[l]||(Kb(r,o),n[l]=!0)}return P.isArray(e)?e.forEach(i):i(e),this}};Ve.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(Ve.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});P.freezeMethods(Ve);function Di(t,e){const s=this||Dr,n=e||s,r=Ve.from(n.headers);let i=n.data;return P.forEach(t,function(l){i=l.call(s,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function X0(t){return!!(t&&t.__CANCEL__)}function xn(t,e,s){Z.call(this,t??"canceled",Z.ERR_CANCELED,e,s),this.name="CanceledError"}P.inherits(xn,Z,{__CANCEL__:!0});function Q0(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new Z("Request failed with status code "+s.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function qb(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Jb(t,e){t=t||10;const s=new Array(t),n=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),h=n[i];o||(o=d),s[r]=c,n[r]=d;let m=i,u=0;for(;m!==r;)u+=s[m++],m=m%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),d-o<e)return;const g=h&&d-h;return g?Math.round(u*1e3/g):void 0}}function Xb(t,e){let s=0,n=1e3/e,r,i;const o=(d,h=Date.now())=>{s=h,r=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const h=Date.now(),m=h-s;m>=n?o(d,h):(r=d,i||(i=setTimeout(()=>{i=null,o(r)},n-m)))},()=>r&&o(r)]}const Aa=(t,e,s=3)=>{let n=0;const r=Jb(50,250);return Xb(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=r(c),h=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(m)},s)},Zc=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},ed=t=>(...e)=>P.asap(()=>t(...e)),Qb=Te.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Te.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Te.origin),Te.navigator&&/(msie|trident)/i.test(Te.navigator.userAgent)):()=>!0,Zb=Te.hasStandardBrowserEnv?{write(t,e,s,n,r,i){const o=[t+"="+encodeURIComponent(e)];P.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),P.isString(n)&&o.push("path="+n),P.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ey(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ty(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Z0(t,e,s){let n=!ey(e);return t&&(n||s==!1)?ty(t,e):e}const td=t=>t instanceof Ve?{...t}:t;function Ns(t,e){e=e||{};const s={};function n(d,h,m,u){return P.isPlainObject(d)&&P.isPlainObject(h)?P.merge.call({caseless:u},d,h):P.isPlainObject(h)?P.merge({},h):P.isArray(h)?h.slice():h}function r(d,h,m,u){if(P.isUndefined(h)){if(!P.isUndefined(d))return n(void 0,d,m,u)}else return n(d,h,m,u)}function i(d,h){if(!P.isUndefined(h))return n(void 0,h)}function o(d,h){if(P.isUndefined(h)){if(!P.isUndefined(d))return n(void 0,d)}else return n(void 0,h)}function l(d,h,m){if(m in e)return n(d,h);if(m in t)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,h,m)=>r(td(d),td(h),m,!0)};return P.forEach(Object.keys({...t,...e}),function(h){const m=c[h]||r,u=m(t[h],e[h],h);P.isUndefined(u)&&m!==l||(s[h]=u)}),s}const em=t=>{const e=Ns({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=e;e.headers=o=Ve.from(o),e.url=K0(Z0(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(P.isFormData(s)){if(Te.hasStandardBrowserEnv||Te.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...h]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...h].join("; "))}}if(Te.hasStandardBrowserEnv&&(n&&P.isFunction(n)&&(n=n(e)),n||n!==!1&&Qb(e.url))){const d=r&&i&&Zb.read(i);d&&o.set(r,d)}return e},sy=typeof XMLHttpRequest<"u",ny=sy&&function(t){return new Promise(function(s,n){const r=em(t);let i=r.data;const o=Ve.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=r,h,m,u,g,f;function p(){g&&g(),f&&f(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function y(){if(!b)return;const N=Ve.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:N,config:t,request:b};Q0(function(w){s(w),p()},function(w){n(w),p()},C),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(n(new Z("Request aborted",Z.ECONNABORTED,t,b)),b=null)},b.onerror=function(){n(new Z("Network Error",Z.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let S=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const C=r.transitional||q0;r.timeoutErrorMessage&&(S=r.timeoutErrorMessage),n(new Z(S,C.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,t,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&P.forEach(o.toJSON(),function(S,C){b.setRequestHeader(C,S)}),P.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),l&&l!=="json"&&(b.responseType=r.responseType),d&&([u,f]=Aa(d,!0),b.addEventListener("progress",u)),c&&b.upload&&([m,g]=Aa(c),b.upload.addEventListener("progress",m),b.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(h=N=>{b&&(n(!N||N.type?new xn(null,t,b):N),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const v=qb(r.url);if(v&&Te.protocols.indexOf(v)===-1){n(new Z("Unsupported protocol "+v+":",Z.ERR_BAD_REQUEST,t));return}b.send(i||null)})},ry=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,r;const i=function(d){if(!r){r=!0,l();const h=d instanceof Error?d:this.reason;n.abort(h instanceof Z?h:new xn(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new Z(`timeout ${e} of ms exceeded`,Z.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>P.asap(l),c}},ay=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,r;for(;n<s;)r=n+e,yield t.slice(n,r),n=r},iy=async function*(t,e){for await(const s of oy(t))yield*ay(s,e)},oy=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},sd=(t,e,s,n)=>{const r=iy(t,e);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await r.next();if(d){l(),c.close();return}let m=h.byteLength;if(s){let u=i+=m;s(u)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},oi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",tm=oi&&typeof ReadableStream=="function",ly=oi&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),sm=(t,...e)=>{try{return!!t(...e)}catch{return!1}},cy=tm&&sm(()=>{let t=!1;const e=new Request(Te.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),nd=64*1024,Do=tm&&sm(()=>P.isReadableStream(new Response("").body)),Da={stream:Do&&(t=>t.body)};oi&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Da[e]&&(Da[e]=P.isFunction(t[e])?s=>s[e]():(s,n)=>{throw new Z(`Response type '${e}' is not supported`,Z.ERR_NOT_SUPPORT,n)})})})(new Response);const dy=async t=>{if(t==null)return 0;if(P.isBlob(t))return t.size;if(P.isSpecCompliantForm(t))return(await new Request(Te.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(P.isArrayBufferView(t)||P.isArrayBuffer(t))return t.byteLength;if(P.isURLSearchParams(t)&&(t=t+""),P.isString(t))return(await ly(t)).byteLength},hy=async(t,e)=>{const s=P.toFiniteNumber(t.getContentLength());return s??dy(e)},uy=oi&&(async t=>{let{url:e,method:s,data:n,signal:r,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:h,withCredentials:m="same-origin",fetchOptions:u}=em(t);d=d?(d+"").toLowerCase():"text";let g=ry([r,i&&i.toAbortSignal()],o),f;const p=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let b;try{if(c&&cy&&s!=="get"&&s!=="head"&&(b=await hy(h,n))!==0){let C=new Request(e,{method:"POST",body:n,duplex:"half"}),_;if(P.isFormData(n)&&(_=C.headers.get("content-type"))&&h.setContentType(_),C.body){const[w,k]=Zc(b,Aa(ed(c)));n=sd(C.body,nd,w,k)}}P.isString(m)||(m=m?"include":"omit");const y="credentials"in Request.prototype;f=new Request(e,{...u,signal:g,method:s.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:y?m:void 0});let v=await fetch(f,u);const N=Do&&(d==="stream"||d==="response");if(Do&&(l||N&&p)){const C={};["status","statusText","headers"].forEach(M=>{C[M]=v[M]});const _=P.toFiniteNumber(v.headers.get("content-length")),[w,k]=l&&Zc(_,Aa(ed(l),!0))||[];v=new Response(sd(v.body,nd,w,()=>{k&&k(),p&&p()}),C)}d=d||"text";let S=await Da[P.findKey(Da,d)||"text"](v,t);return!N&&p&&p(),await new Promise((C,_)=>{Q0(C,_,{data:S,headers:Ve.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:f})})}catch(y){throw p&&p(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,t,f),{cause:y.cause||y}):Z.from(y,y&&y.code,t,f)}}),Po={http:_b,xhr:ny,fetch:uy};P.forEach(Po,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const rd=t=>`- ${t}`,my=t=>P.isFunction(t)||t===null||t===!1,nm={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:e}=t;let s,n;const r={};for(let i=0;i<e;i++){s=t[i];let o;if(n=s,!my(s)&&(n=Po[(o=String(s)).toLowerCase()],n===void 0))throw new Z(`Unknown adapter '${o}'`);if(n)break;r[o||"#"+i]=n}if(!n){const i=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(rd).join(`
`):" "+rd(i[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Po};function Pi(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new xn(null,t)}function ad(t){return Pi(t),t.headers=Ve.from(t.headers),t.data=Di.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),nm.getAdapter(t.adapter||Dr.adapter)(t).then(function(n){return Pi(t),n.data=Di.call(t,t.transformResponse,n),n.headers=Ve.from(n.headers),n},function(n){return X0(n)||(Pi(t),n&&n.response&&(n.response.data=Di.call(t,t.transformResponse,n.response),n.response.headers=Ve.from(n.response.headers))),Promise.reject(n)})}const rm="1.11.0",li={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{li[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const id={};li.transitional=function(e,s,n){function r(i,o){return"[Axios v"+rm+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(e===!1)throw new Z(r(o," has been removed"+(s?" in "+s:"")),Z.ERR_DEPRECATED);return s&&!id[o]&&(id[o]=!0,console.warn(r(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,o,l):!0}};li.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function gy(t,e,s){if(typeof t!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const i=n[r],o=e[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new Z("option "+i+" must be "+c,Z.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Z("Unknown option "+i,Z.ERR_BAD_OPTION)}}const va={assertOptions:gy,validators:li},ht=va.validators;let ps=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Xc,response:new Xc}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=Ns(this.defaults,s);const{transitional:n,paramsSerializer:r,headers:i}=s;n!==void 0&&va.assertOptions(n,{silentJSONParsing:ht.transitional(ht.boolean),forcedJSONParsing:ht.transitional(ht.boolean),clarifyTimeoutError:ht.transitional(ht.boolean)},!1),r!=null&&(P.isFunction(r)?s.paramsSerializer={serialize:r}:va.assertOptions(r,{encode:ht.function,serialize:ht.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),va.assertOptions(s,{baseUrl:ht.spelling("baseURL"),withXsrfToken:ht.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&P.merge(i.common,i[s.method]);i&&P.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),s.headers=Ve.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(s)===!1||(c=c&&p.synchronous,l.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let h,m=0,u;if(!c){const f=[ad.bind(this),void 0];for(f.unshift(...l),f.push(...d),u=f.length,h=Promise.resolve(s);m<u;)h=h.then(f[m++],f[m++]);return h}u=l.length;let g=s;for(m=0;m<u;){const f=l[m++],p=l[m++];try{g=f(g)}catch(b){p.call(this,b);break}}try{h=ad.call(this,g)}catch(f){return Promise.reject(f)}for(m=0,u=d.length;m<u;)h=h.then(d[m++],d[m++]);return h}getUri(e){e=Ns(this.defaults,e);const s=Z0(e.baseURL,e.url,e.allowAbsoluteUrls);return K0(s,e.params,e.paramsSerializer)}};P.forEach(["delete","get","head","options"],function(e){ps.prototype[e]=function(s,n){return this.request(Ns(n||{},{method:e,url:s,data:(n||{}).data}))}});P.forEach(["post","put","patch"],function(e){function s(n){return function(i,o,l){return this.request(Ns(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ps.prototype[e]=s(),ps.prototype[e+"Form"]=s(!0)});let fy=class am{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(r);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,l){n.reason||(n.reason=new xn(i,o,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new am(function(r){e=r}),cancel:e}}};function xy(t){return function(s){return t.apply(null,s)}}function py(t){return P.isObject(t)&&t.isAxiosError===!0}const Ro={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ro).forEach(([t,e])=>{Ro[e]=t});function im(t){const e=new ps(t),s=O0(ps.prototype.request,e);return P.extend(s,ps.prototype,e,{allOwnKeys:!0}),P.extend(s,e,null,{allOwnKeys:!0}),s.create=function(r){return im(Ns(t,r))},s}const ie=im(Dr);ie.Axios=ps;ie.CanceledError=xn;ie.CancelToken=fy;ie.isCancel=X0;ie.VERSION=rm;ie.toFormData=ii;ie.AxiosError=Z;ie.Cancel=ie.CanceledError;ie.all=function(e){return Promise.all(e)};ie.spread=xy;ie.isAxiosError=py;ie.mergeConfig=Ns;ie.AxiosHeaders=Ve;ie.formToJSON=t=>J0(P.isHTMLForm(t)?new FormData(t):t);ie.getAdapter=nm.getAdapter;ie.HttpStatusCode=Ro;ie.default=ie;const{Axios:VM,AxiosError:HM,CanceledError:zM,isCancel:UM,CancelToken:WM,VERSION:YM,all:GM,Cancel:KM,isAxiosError:qM,spread:JM,toFormData:XM,AxiosHeaders:QM,HttpStatusCode:ZM,formToJSON:eE,getAdapter:tE,mergeConfig:sE}=ie;function by(){return"/api"}const yy=by(),we=ie.create({baseURL:yy,headers:{"Content-Type":"application/json"}}),Tt={getEvents:async t=>(await we.get("/events",{params:t})).data.data||[],getEvent:async t=>(await we.get(`/events/${t}`)).data.data,createEvent:async t=>(await we.post("/events",t)).data.data,updateEvent:async(t,e)=>(await we.put(`/events/${t}`,e)).data.data,deleteEvent:async t=>{await we.delete(`/events/${t}`)}},od={getTags:async()=>(await we.get("/tags")).data,getTag:async t=>(await we.get(`/tags/${t}`)).data,createTag:async t=>(await we.post("/tags",t)).data,updateTag:async(t,e)=>(await we.put(`/tags/${t}`,e)).data,deleteTag:async t=>{await we.delete(`/tags/${t}`)},addTagsToEvent:async(t,e)=>(await we.post(`/tags/events/${t}/tags`,{tagIds:e})).data,getEventTags:async t=>(await we.get(`/tags/events/${t}/tags`)).data,removeTagFromEvent:async(t,e)=>{await we.delete(`/tags/events/${t}/tags/${e}`)}},ci={getComprehensiveInterpretation:async t=>{try{const r=await(await fetch("/api/saju/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(r.success&&r.data){const{fourPillars:i,ohHaengBalance:o,interpretation:l,sajuString:c}=r.data;return{basic:{dayMaster:i.day.heaven,dayMasterStrength:"중화",yongshin:"화",gyeokguk:"정격",summary:l,sajuString:c,ohHaengBalance:o}}}else throw new Error("사주 계산 실패")}catch(e){return console.error("사주 계산 오류:",e),{basic:{dayMaster:"계산중",dayMasterStrength:"분석중",yongshin:"분석중",gyeokguk:"분석중",summary:"사주 계산 중 오류가 발생했습니다.",sajuString:"계산 실패",ohHaengBalance:{wood:20,fire:20,earth:20,metal:20,water:20}}}}},getBasicAnalysis:async t=>{const e=await we.post("/saju/calculate",t);return{dayMaster:e.data.data.fourPillars.day.heaven,dayMasterStrength:"중화",yongshin:"화",gyeokguk:"정격",summary:e.data.data.interpretation}},getJohooAnalysis:async t=>({season:"봄",seasonalCharacteristics:["성장","발전"],johooNeeds:{fire:30,water:20},monthlyDetails:{},recommendations:["적극적인 활동","새로운 시작"],careerGuidance:["창의적 분야","리더십 발휘"]}),getSpiritualAnalysis:async t=>({beneficialSpirits:["천을귀인","문창귀인"],harmfulSpirits:["겁살","망신살"],dominantInfluence:"길신이 우세",mitigation:["선행 쌓기","정직한 생활"],activation:["학습과 연구","예술 활동"]}),getPersonalityAnalysis:async t=>({dominantTraits:{leadership:80,creativity:70},strengths:["리더십","창의성","추진력"],weaknesses:["성급함","완벽주의"],developmentAreas:["인내심","협력"],recommendations:["팀워크 향상","감정 조절"]}),getFortuneAnalysis:async t=>({currentYear:{overall:75,career:80,health:70},monthlyTrends:[],luckyElements:["화","토"],cautionPeriods:["7월","12월"]}),getCareerGuidance:async t=>({suitableCareers:["경영","교육","예술","IT"],avoidCareers:["반복 업무","단순 노동"],careerTiming:"30대 중반 이후 큰 성과",successFactors:["리더십","창의성","소통능력"],workEnvironment:"자율적이고 창의적인 환경"}),getRelationshipAnalysis:async t=>({marriageCompatibility:{overall:80,communication:75},relationshipPattern:"적극적이고 주도적",challenges:["성급함","고집"],advice:["상대방 배려","소통 강화"],timing:"30대 초반이 길한 시기"}),getHealthGuidance:async t=>({constitution:{type:"화체질",strength:70},vulnerabilities:["심장","소화기"],preventiveCare:["규칙적 운동","스트레스 관리"],seasonalCare:{spring:"간 건강",summer:"심장 건강"},lifestyle:["규칙적 생활","균형 잡힌 식단"]})},Oe={getDiaries:async t=>(await ie.get("http://localhost:5002/api/diaries",{params:t,headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,getDiariesForDateRange:async(t,e)=>(await we.get("/diaries/search",{params:{startDate:t,endDate:e},headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,getDiaryByDate:async t=>(await we.get(`/diaries?date=${t}`,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,createDiary:async t=>(await we.post("/diaries",t,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,updateDiary:async(t,e)=>(await we.put(`/diaries?id=${t}`,e,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,deleteDiary:async t=>{await we.delete(`/diaries?id=${t}`,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})},searchDiaries:async t=>(await we.get("/diaries/search",{params:t,headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data},Sn={getTodos:async()=>(await ie.get("http://localhost:4012/api/calendar/todos")).data,getTodosByDate:async t=>(await ie.get(`http://localhost:4012/api/calendar/todos/${t}`)).data,createTodo:async t=>(await ie.post("http://localhost:4012/api/calendar/todos",t)).data,updateTodo:async(t,e)=>(await ie.put(`http://localhost:4012/api/calendar/todos/${t}`,e)).data,deleteTodo:async t=>{await ie.delete(`http://localhost:4012/api/calendar/todos/${t}`)},toggleTodo:async t=>(await ie.patch(`http://localhost:4012/api/calendar/todos/${t}/toggle`)).data},om=j.createContext(void 0),lt=()=>{const t=j.useContext(om);if(!t)throw new Error("useCalendar must be used within a CalendarProvider");return t},vy=({children:t})=>{const[e,s]=j.useState(new Date),[n,r]=j.useState("month"),[i,o]=j.useState(null),[l,c]=j.useState([]),[d,h]=j.useState([]),[m,u]=j.useState(!1),[g]=j.useState({timezone:"Asia/Seoul",weekStartsOn:0,defaultView:"month",showLunarCalendar:!0,showFortune:!0,theme:"light",language:"ko"}),f=T=>({id:T.id,text:T.title,title:T.title,description:T.description,completed:T.completed===1||T.completed===!0,priority:T.priority,date:T.date,createdAt:T.created_at,updatedAt:T.updated_at}),p=T=>({title:T.text||T.title||"",description:T.description,date:T.date||"",priority:T.priority||"medium",completed:T.completed?1:0});j.useEffect(()=>{b()},[]);const b=async()=>{try{u(!0);const D=(await Sn.getTodos()).map(f);h(D)}catch(T){console.error("Failed to load todos:",T)}finally{u(!1)}},y=j.useCallback(()=>{const T=new Date(e);switch(n){case"year":T.setFullYear(e.getFullYear()-1);break;case"month":T.setMonth(e.getMonth()-1);break;case"week":T.setDate(e.getDate()-7);break;case"day":T.setDate(e.getDate()-1);break}s(T)},[e,n]),v=j.useCallback(()=>{const T=new Date(e);switch(n){case"year":T.setFullYear(e.getFullYear()+1);break;case"month":T.setMonth(e.getMonth()+1);break;case"week":T.setDate(e.getDate()+7);break;case"day":T.setDate(e.getDate()+1);break}s(T)},[e,n]),N=j.useCallback(()=>{s(new Date)},[]),S=j.useCallback(T=>{const D={...T,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c(L=>[...L,D])},[]),C=j.useCallback((T,D)=>{c(L=>L.map(F=>F.id===T?{...F,...D,updated_at:new Date().toISOString()}:F))},[]),_=j.useCallback(T=>{c(D=>D.filter(L=>L.id!==T))},[]),w=j.useCallback((T,D)=>l.filter(L=>{const F=new Date(L.start_time),I=new Date(L.end_time);return F>=T&&F<=D||I>=T&&I<=D||F<=T&&I>=D}),[l]),k=j.useCallback(async T=>{try{const D=p(T),L=await Sn.createTodo(D),F=f(L);return h(I=>[...I,F]),F}catch(D){console.error("Failed to add todo:",D);const L={...T,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date};return h(F=>[...F,L]),L}},[]),M=j.useCallback(async(T,D)=>{try{const L=p(D),F=await Sn.updateTodo(T,L),I=f(F);h(U=>U.map(B=>B.id===T?I:B))}catch(L){console.error("Failed to update todo:",L),h(F=>F.map(I=>I.id===T?{...I,...D,updatedAt:new Date}:I))}},[]),E=j.useCallback(async T=>{try{await Sn.deleteTodo(T),h(D=>D.filter(L=>L.id!==T))}catch(D){console.error("Failed to delete todo:",D),h(L=>L.filter(F=>F.id!==T))}},[]),A=j.useCallback(async T=>{try{const D=await Sn.toggleTodo(T),L=f(D);h(F=>F.map(I=>I.id===T?L:I))}catch(D){console.error("Failed to toggle todo:",D),h(L=>L.map(F=>F.id===T?{...F,completed:!F.completed,updatedAt:new Date}:F))}},[]),O=j.useCallback(T=>{const D=V(T,"yyyy-MM-dd");return d.filter(L=>L.date===D)},[d]),R={currentDate:e,viewMode:n,events:l,selectedDate:i,settings:g,todos:d,setCurrentDate:s,setViewMode:r,setSelectedDate:o,navigatePrevious:y,navigateNext:v,navigateToday:N,addEvent:S,updateEvent:C,deleteEvent:_,getEventsForDateRange:w,addTodo:k,updateTodo:M,deleteTodo:E,toggleTodo:A,getTodosForDate:O};return a.jsx(om.Provider,{value:R,children:t})},jy=async(t=[])=>{const e=new Date,s=V(e,"yyyy-MM-dd");try{const[n,r]=await Promise.all([Tt.getEvents({start_date:s,end_date:s}),Oe.getDiaryByDate(s).catch(()=>null)]),i=t.filter(l=>St(new Date(l.date),e)),o=i.filter(l=>l.completed).length;return{events:n||[],todos:i,diary:r,hasScheduledEvents:((n==null?void 0:n.length)||0)>0,completedTodos:o,totalTodos:i.length}}catch(n){return console.error("Failed to fetch today data:",n),{events:[],todos:[],diary:null,hasScheduledEvents:!1,completedTodos:0,totalTodos:0}}},ky=async(t=[])=>{const e=new Date,s=Cr(e,{weekStartsOn:0}),n=_r(e,{weekStartsOn:0}),r=Mr({start:s,end:n});try{const[i,o]=await Promise.all([Tt.getEvents({start_date:V(s,"yyyy-MM-dd"),end_date:V(n,"yyyy-MM-dd")}),Promise.all(r.map(u=>Oe.getDiaryByDate(V(u,"yyyy-MM-dd")).catch(()=>null)))]),l=t.filter(u=>{const g=new Date(u.date);return g>=s&&g<=n}),c=l.filter(u=>u.completed).length,d=l.length>0?c/l.length*100:0,h=o.filter(u=>u&&u.mood).map(u=>({date:u.date,mood:u.mood||"😐"})),m=r.map(u=>{const g=V(u,"yyyy-MM-dd"),f=(i==null?void 0:i.filter(y=>V(new Date(y.start_time),"yyyy-MM-dd")===g))||[],p=l.filter(y=>V(new Date(y.date),"yyyy-MM-dd")===g),b=o.some(y=>y&&y.date===g);return{date:g,events:f.length,todos:p.length,diary:b}});return{completionRate:Math.round(d),totalEvents:(i==null?void 0:i.length)||0,totalDiaries:o.filter(u=>u).length,moodTrend:h,activityData:m}}catch(i){return console.error("Failed to fetch weekly stats:",i),{completionRate:0,totalEvents:0,totalDiaries:0,moodTrend:[],activityData:[]}}},wy=async(t=[])=>{const e=new Date,s=ar(e),n=ir(e),r=Mr({start:s,end:n});try{const[i,o]=await Promise.all([Tt.getEvents({start_date:V(s,"yyyy-MM-dd"),end_date:V(n,"yyyy-MM-dd")}),Promise.all(r.map(u=>Oe.getDiaryByDate(V(u,"yyyy-MM-dd")).catch(()=>null)))]),l=t.filter(u=>{const g=new Date(u.date);return g>=s&&g<=n}),c=r.map(u=>{const g=V(u,"yyyy-MM-dd"),f=(i==null?void 0:i.filter(v=>V(new Date(v.start_time),"yyyy-MM-dd")===g))||[],p=l.filter(v=>V(new Date(v.date),"yyyy-MM-dd")===g),b=o.some(v=>v&&v.date===g);let y=0;return f.length>0&&(y+=1),p.length>0&&(y+=1),b&&(y+=1),p.filter(v=>v.completed).length>0&&(y+=1),{date:g,intensity:Math.min(y,4)}}),d=new Map;i==null||i.forEach(u=>{u.tags&&Array.isArray(u.tags)&&u.tags.forEach(g=>{const f=typeof g=="string"?g:g.name;d.set(f,(d.get(f)||0)+1)})});const h=Array.from(d.entries()).sort((u,g)=>g[1]-u[1]).slice(0,10).map(([u,g],f)=>({name:u,count:g,color:["#3B82F6","#8B5CF6","#10B981","#F59E0B","#EF4444","#6366F1","#EC4899","#14B8A6","#F97316","#84CC16"][f]||"#6B7280"})),m=((i==null?void 0:i.length)||0)+l.length+o.filter(u=>u).length;return{activityHeatmap:c,tagDistribution:h,totalActivities:m}}catch(i){return console.error("Failed to fetch monthly stats:",i),{activityHeatmap:[],tagDistribution:[],totalActivities:0}}},Ny=async(t=[])=>{try{const[e,s,n]=await Promise.all([jy(t),ky(t),wy(t)]);return{today:e,week:s,month:n}}catch(e){throw console.error("Failed to fetch dashboard data:",e),e}},Sy=t=>[{id:"add-event",label:"일정 추가",icon:"📅",color:"bg-blue-500 hover:bg-blue-600",action:()=>{var e;(e=t==null?void 0:t.onAddEvent)==null||e.call(t)}},{id:"add-todo",label:"할일 추가",icon:"✅",color:"bg-green-500 hover:bg-green-600",action:()=>{var e;(e=t==null?void 0:t.onAddTodo)==null||e.call(t)}},{id:"write-diary",label:"일기 작성",icon:"📝",color:"bg-purple-500 hover:bg-purple-600",action:()=>{var e;(e=t==null?void 0:t.onWriteDiary)==null||e.call(t)}},{id:"view-calendar",label:"캘린더 보기",icon:"🗓️",color:"bg-orange-500 hover:bg-orange-600",action:()=>{window.location.href="/calendar"}}],Cy={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},_y=(t,e,s)=>{let n;const r=Cy[t];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?n+" 후":n+" 전":n},My={full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},Ey={full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ty={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Ay={date:Ei({formats:My,defaultWidth:"full"}),time:Ei({formats:Ey,defaultWidth:"full"}),dateTime:Ei({formats:Ty,defaultWidth:"full"})},Dy={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},Py=(t,e,s,n)=>Dy[t],Ry={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},Ly={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},Oy={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},Iy={narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},Fy={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},By={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},$y=(t,e)=>{const s=Number(t);switch(String(e==null?void 0:e.unit)){case"minute":case"second":return String(s);case"date":return s+"일";default:return s+"번째"}},Vy={ordinalNumber:$y,era:kn({values:Ry,defaultWidth:"wide"}),quarter:kn({values:Ly,defaultWidth:"wide",argumentCallback:t=>t-1}),month:kn({values:Oy,defaultWidth:"wide"}),day:kn({values:Iy,defaultWidth:"wide"}),dayPeriod:kn({values:Fy,defaultWidth:"wide",formattingValues:By,defaultFormattingWidth:"wide"})},Hy=/^(\d+)(일|번째)?/i,zy=/\d+/i,Uy={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},Wy={any:[/^(bc|기원전)/i,/^(ad|서기)/i]},Yy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},Gy={any:[/1/i,/2/i,/3/i,/4/i]},Ky={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},qy={any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},Jy={narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},Xy={any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},Qy={any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},Zy={any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},ev={ordinalNumber:np({matchPattern:Hy,parsePattern:zy,valueCallback:t=>parseInt(t,10)}),era:wn({matchPatterns:Uy,defaultMatchWidth:"wide",parsePatterns:Wy,defaultParseWidth:"any"}),quarter:wn({matchPatterns:Yy,defaultMatchWidth:"wide",parsePatterns:Gy,defaultParseWidth:"any",valueCallback:t=>t+1}),month:wn({matchPatterns:Ky,defaultMatchWidth:"wide",parsePatterns:qy,defaultParseWidth:"any"}),day:wn({matchPatterns:Jy,defaultMatchWidth:"wide",parsePatterns:Xy,defaultParseWidth:"any"}),dayPeriod:wn({matchPatterns:Qy,defaultMatchWidth:"any",parsePatterns:Zy,defaultParseWidth:"any"})},ye={code:"ko",formatDistance:_y,formatLong:Ay,formatRelative:Py,localize:Vy,match:ev,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const lm=j.forwardRef(tv);function sv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const nv=j.forwardRef(sv);function rv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const av=j.forwardRef(rv);function iv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ov=j.forwardRef(iv);function lv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const El=j.forwardRef(lv);function cv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.143 17.082a24.248 24.248 0 0 0 3.844.148m-3.844-.148a23.856 23.856 0 0 1-5.455-1.31 8.964 8.964 0 0 0 2.3-5.542m3.155 6.852a3 3 0 0 0 5.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 0 0 3.536-1.003A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53"}))}const dv=j.forwardRef(cv);function hv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Ri=j.forwardRef(hv);function uv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const We=j.forwardRef(uv);function mv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Ut=j.forwardRef(mv);function gv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Pa=j.forwardRef(gv);function fv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ct=j.forwardRef(fv);function xv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const pn=j.forwardRef(xv);function pv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const cm=j.forwardRef(pv);function bv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const yv=j.forwardRef(bv);function vv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const jv=j.forwardRef(vv);function kv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const wv=j.forwardRef(kv);function Nv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Sv=j.forwardRef(Nv);function Cv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Un=j.forwardRef(Cv);function _v({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Mv=j.forwardRef(_v);function Ev({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const ja=j.forwardRef(Ev);function Tv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const dm=j.forwardRef(Tv);function Av({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const ld=j.forwardRef(Av);function Dv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Js=j.forwardRef(Dv);function Pv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Rv=j.forwardRef(Pv);function Lv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ov=j.forwardRef(Lv);function Iv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Fv=j.forwardRef(Iv);function Bv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Tl=j.forwardRef(Bv);function $v({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Vv=j.forwardRef($v);function Hv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const zv=j.forwardRef(Hv);function Uv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const hm=j.forwardRef(Uv),cd=(t,e,s="시간 오류")=>{try{if(!t)return s;const n=typeof t=="string"?new Date(t):t;return M0(n)?V(n,e,{locale:ye}):s}catch(n){return console.error("Date formatting error:",n,"Input:",t),s}},Wv=t=>{try{if(!t)return!1;const e=typeof t=="string"?new Date(t):t;return M0(e)?e<new Date:!1}catch(e){return console.error("Date comparison error:",e,"Input:",t),!1}};function Yv({todayData:t,loading:e}){const s=new Date;if(e)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-full"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-2/3"})]})]})});const n=t.totalTodos>0?Math.round(t.completedTodos/t.totalTodos*100):0;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"오늘의 요약"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:cd(s,"yyyy년 M월 d일 EEEE","날짜 오류")})]}),a.jsx("div",{className:"text-2xl",children:"📊"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800/50 rounded-lg",children:a.jsx(Ut,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.events.length}),a.jsx("p",{className:"text-sm text-blue-600/70 dark:text-blue-400/70",children:"오늘 일정"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[a.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800/50 rounded-lg",children:a.jsx(Ct,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[t.completedTodos,"/",t.totalTodos]}),a.jsx("p",{className:"text-sm text-green-600/70 dark:text-green-400/70",children:"완료된 할일"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-800/50 rounded-lg",children:a.jsx(We,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.diary?"작성됨":"미작성"}),a.jsx("p",{className:"text-sm text-purple-600/70 dark:text-purple-400/70",children:"오늘 일기"})]})]})]}),t.totalTodos>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"할일 완료율"}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Ut,{className:"h-5 w-5"}),"오늘 일정 (",t.events.length,")"]}),t.events.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Ut,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"오늘 예정된 일정이 없습니다"})]}):a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.events.map(r=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(pn,{className:"h-4 w-4 text-gray-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:r.title}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.all_day?"종일":cd(r.start_time,"HH:mm","--:--")})]}),!r.all_day&&Wv(r.start_time)&&a.jsx(jv,{className:"h-4 w-4 text-orange-500"})]},r.id))})]}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Ct,{className:"h-5 w-5"}),"오늘 할일 (",t.todos.length,")"]}),t.todos.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Ct,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"오늘 예정된 할일이 없습니다"})]}):a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.todos.map(r=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${r.completed?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-500"}`,children:r.completed&&a.jsx(Ct,{className:"h-3 w-3 text-white"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-medium truncate ${r.completed?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-white"}`,children:r.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${r.priority==="high"?"bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400":r.priority==="medium"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-600 dark:bg-green-900/20 dark:text-green-400"}`,children:r.priority==="high"?"높음":r.priority==="medium"?"보통":"낮음"})})]})]},r.id))})]}),a.jsx("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-purple-300 dark:border-purple-600",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(We,{className:"h-6 w-6 text-purple-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.diary?"오늘 일기가 작성되었습니다":"오늘 일기를 작성해보세요"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.diary?`기분: ${t.diary.mood||"😐"}`:"하루를 마무리하며 생각을 정리해보세요"})]})]})})]})}function Gv({weeklyData:t,loading:e}){if(e)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-600 rounded mb-4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-full"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-2/3"})]})]})});const s=Math.max(...t.activityData.map(n=>n.events+n.todos+(n.diary?1:0)),1);return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"주간 통계"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"지난 7일간의 활동 요약"})]}),a.jsx("div",{className:"text-2xl",children:"📈"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[t.completionRate,"%"]}),a.jsx("div",{className:"text-xs text-green-600/70 dark:text-green-400/70 mt-1",children:"할일 완료율"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.totalEvents}),a.jsx("div",{className:"text-xs text-blue-600/70 dark:text-blue-400/70 mt-1",children:"총 일정"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.totalDiaries}),a.jsx("div",{className:"text-xs text-purple-600/70 dark:text-purple-400/70 mt-1",children:"일기 작성"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-lg",children:[a.jsx("div",{className:"text-2xl",children:t.moodTrend.length>0?t.moodTrend[t.moodTrend.length-1].mood:"😐"}),a.jsx("div",{className:"text-xs text-yellow-600/70 dark:text-yellow-400/70 mt-1",children:"최근 기분"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:[a.jsx(Pa,{className:"h-5 w-5"}),"일별 활동량"]}),a.jsx("div",{className:"space-y-3",children:t.activityData.map((n,r)=>{const i=n.events+n.todos+(n.diary?1:0),o=s>0?i/s*100:0,l=V(new Date(n.date),"E",{locale:ye}),c=V(new Date(n.date),"d");return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"w-12 text-xs text-gray-500 dark:text-gray-400",children:[l," ",c]}),a.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[a.jsxs("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative overflow-hidden",children:[o>0&&a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-full rounded-full transition-all duration-300",style:{width:`${o}%`}}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-start pl-2 gap-1",children:[n.events>0&&a.jsx(Ut,{className:"h-3 w-3 text-white"}),n.todos>0&&a.jsx(Ct,{className:"h-3 w-3 text-white"}),n.diary&&a.jsx(We,{className:"h-3 w-3 text-white"})]})]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 w-8 text-right",children:i})]})]},n.date)})})]}),t.moodTrend.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:"📊 기분 트렌드"}),a.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:t.moodTrend.map((n,r)=>{const i=new Date(n.date),o=V(i,"E",{locale:ye}),l=V(i,"d");return a.jsxs("div",{className:"flex-shrink-0 text-center p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-2xl mb-1",children:n.mood}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[o," ",l]})]},n.date)})})]}),t.totalEvents===0&&t.totalDiaries===0&&t.completionRate===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Pa,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"이번 주 활동 기록이 없습니다"}),a.jsx("p",{className:"text-sm",children:"일정을 추가하고 일기를 작성해보세요!"})]})]})}function Kv({monthlyData:t,loading:e}){const s=new Date,n=ar(s),r=ir(s),i=Cr(n,{weekStartsOn:0}),o=_r(r,{weekStartsOn:0}),l=Mr({start:i,end:o});if(e)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:Array.from({length:42}).map((m,u)=>a.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-600 rounded"},u))})]})});const c=m=>{switch(m){case 0:return"bg-gray-100 dark:bg-gray-700";case 1:return"bg-green-200 dark:bg-green-800/50";case 2:return"bg-green-300 dark:bg-green-700/70";case 3:return"bg-green-400 dark:bg-green-600/80";case 4:return"bg-green-500 dark:bg-green-500";default:return"bg-gray-100 dark:bg-gray-700"}},d=m=>{const u=V(m,"yyyy-MM-dd"),g=t.activityHeatmap.find(f=>f.date===u);return(g==null?void 0:g.intensity)||0},h=["일","월","화","수","목","금","토"];return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"월간 활동 히트맵"}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[V(s,"yyyy년 M월",{locale:ye})," 활동량 시각화"]})]}),a.jsx("div",{className:"text-2xl",children:"📅"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:h.map(m=>a.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400 font-medium",children:m},m))}),a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:l.map(m=>{const u=d(m),g=m>=n&&m<=r,f=V(m,"yyyy-MM-dd")===V(s,"yyyy-MM-dd");return a.jsx("div",{className:`
                aspect-square flex items-center justify-center text-xs font-medium rounded-lg transition-all cursor-pointer
                ${g?c(u):"bg-gray-50 dark:bg-gray-800/50"}
                ${g?"text-gray-800 dark:text-gray-200":"text-gray-400 dark:text-gray-500"}
                ${f?"ring-2 ring-blue-500":""}
                hover:scale-105
              `,title:`${V(m,"M월 d일",{locale:ye})}: 활동량 ${u}`,children:V(m,"d")},m.toISOString())})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"적음"}),a.jsx("div",{className:"flex gap-1",children:[0,1,2,3,4].map(m=>a.jsx("div",{className:`w-3 h-3 rounded-sm ${c(m)}`},m))}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"많음"})]}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["총 활동: ",t.totalActivities,"개"]})]}),t.tagDistribution.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"🏷️ 인기 태그"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.tagDistribution.slice(0,6).map(m=>a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:m.color}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:m.name}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[m.count,"회 사용"]})]})]},m.name))})]}),t.totalActivities===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"text-4xl mb-3",children:"📊"}),a.jsx("p",{children:"이번 달 활동 기록이 없습니다"}),a.jsx("p",{className:"text-sm",children:"일정과 일기를 작성하여 활동을 기록해보세요!"})]})]})}function qv({actions:t,loading:e}){return e?a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((s,n)=>a.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-600 rounded-lg"},n))})]})}):a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"빠른 액션"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"자주 사용하는 기능들을 빠르게 실행하세요"})]}),a.jsx("div",{className:"text-2xl",children:"⚡"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map(s=>a.jsxs("button",{onClick:s.action,className:`
              flex flex-col items-center justify-center p-4 rounded-lg text-white
              ${s.color} 
              transition-all duration-200 hover:scale-105 hover:shadow-lg
              focus:outline-none focus:ring-4 focus:ring-opacity-50
            `,children:[a.jsx("div",{className:"text-2xl mb-2",children:s.icon}),a.jsx("span",{className:"text-sm font-medium text-center",children:s.label})]},s.id))}),a.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"text-blue-500 text-lg",children:"💡"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"생산성 팁"}),a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"매일 아침 오늘 할 일을 정리하고, 저녁에는 하루를 되돌아보며 일기를 작성해보세요."})]})]})})]})}const Jv=({tag:t,onDelete:e,onClick:s,size:n="medium",deletable:r=!1})=>{const i={small:"text-xs px-2 py-0.5",medium:"text-sm px-3 py-1",large:"text-base px-4 py-2"},o=l=>{l.stopPropagation(),e==null||e()};return a.jsxs("span",{className:`
        inline-flex items-center gap-1 rounded-full font-medium
        ${i[n]}
        ${s?"cursor-pointer hover:opacity-80":""}
        transition-opacity
      `,style:{backgroundColor:`${t.color}20`,color:t.color,border:`1px solid ${t.color}40`},onClick:s,children:[a.jsx("span",{children:t.name}),r&&e&&a.jsx("button",{className:"ml-1 hover:opacity-60 focus:outline-none",onClick:o,"aria-label":`Remove ${t.name} tag`,children:a.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},Xv=({selectedTags:t,onTagsChange:e,placeholder:s="태그를 선택하세요",allowCreate:n=!0})=>{const[r,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(""),[h,m]=j.useState(!1),[u,g]=j.useState(!1),[f,p]=j.useState(""),[b,y]=j.useState("#3B82F6"),v=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280","#F97316"];j.useEffect(()=>{N()},[]);const N=async()=>{try{m(!0);const k=await od.getTags();i(k)}catch(k){console.error("Failed to load tags:",k)}finally{m(!1)}},S=k=>{t.find(M=>M.id===k.id)||e([...t,k]),l(!1),d("")},C=k=>{e(t.filter(M=>M.id!==k))},_=async()=>{if(f.trim())try{g(!0);const k=await od.createTag({name:f.trim(),color:b});i([...r,k]),S(k),p(""),y("#3B82F6")}catch(k){console.error("Failed to create tag:",k)}finally{g(!1)}},w=r.filter(k=>k.name.toLowerCase().includes(c.toLowerCase())&&!t.find(M=>M.id===k.id));return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.map(k=>a.jsx(Jv,{tag:k,size:"small",deletable:!0,onDelete:()=>C(k.id)},k.id))}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>l(!o),children:a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:t.length>0?`${t.length}개 태그 선택됨`:s})}),o&&a.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg",children:[a.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:a.jsx("input",{type:"text",className:"w-full px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"태그 검색...",value:c,onChange:k=>d(k.target.value),onClick:k=>k.stopPropagation()})}),a.jsx("div",{className:"max-h-48 overflow-y-auto",children:h?a.jsx("div",{className:"p-3 text-center text-gray-500",children:"로딩 중..."}):w.length>0?w.map(k=>a.jsxs("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",onClick:()=>S(k),children:[a.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:k.color}}),a.jsx("span",{className:"text-sm",children:k.name})]},k.id)):a.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:c?"일치하는 태그가 없습니다":"사용 가능한 태그가 없습니다"})}),n&&a.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"새 태그 이름",value:f,onChange:k=>p(k.target.value),onClick:k=>k.stopPropagation()}),a.jsx("div",{className:"flex gap-1",children:v.map(k=>a.jsx("button",{type:"button",className:`w-6 h-6 rounded-full border-2 ${b===k?"border-gray-800 dark:border-gray-200":"border-transparent"}`,style:{backgroundColor:k},onClick:()=>y(k)},k))})]}),a.jsx("button",{type:"button",className:"w-full px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",onClick:_,disabled:!f.trim()||u,children:u?"생성 중...":"새 태그 만들기"})]})]})]})]})},um=({isOpen:t,onClose:e,onSave:s,event:n,initialDate:r})=>{const{addTodo:i}=lt(),[o,l]=j.useState("event"),[c,d]=j.useState({title:"",description:"",start_time:r?V(r,"yyyy-MM-dd'T'HH:mm"):V(new Date,"yyyy-MM-dd'T'HH:mm"),end_time:r?V(new Date(r.getTime()+60*60*1e3),"yyyy-MM-dd'T'HH:mm"):V(new Date(Date.now()+60*60*1e3),"yyyy-MM-dd'T'HH:mm"),all_day:!1,location:"",type:"personal",color:"#3b82f6",reminder_minutes:15,tags:[]}),[h,m]=j.useState([]),[u,g]=j.useState({text:"",priority:"medium",date:r?V(r,"yyyy-MM-dd"):V(new Date,"yyyy-MM-dd")});j.useEffect(()=>{n?(d(n),m(n.tags||[]),l("event")):r&&(d(y=>({...y,start_time:V(r,"yyyy-MM-dd'T'HH:mm"),end_time:V(new Date(r.getTime()+60*60*1e3),"yyyy-MM-dd'T'HH:mm")})),g(y=>({...y,date:V(r,"yyyy-MM-dd")})))},[n,r]);const f=()=>{if(!u.text.trim()){alert("할일 내용을 입력해주세요.");return}try{i({text:u.text.trim(),completed:!1,priority:u.priority,date:u.date}),e()}catch(y){console.error("Failed to save todo:",y),alert("할일 저장에 실패했습니다.")}},p=async y=>{if(y.preventDefault(),o==="todo"){f();return}if(!c.title||!c.start_time||!c.end_time){alert("제목과 시간을 입력해주세요.");return}try{const v={title:c.title,description:c.description,start_time:c.start_time?`${c.start_time}:00`:c.start_time,end_time:c.end_time?`${c.end_time}:00`:c.end_time,all_day:c.all_day,location:c.location,type:c.type,color:c.color,reminder_minutes:c.reminder_minutes===void 0?void 0:c.reminder_minutes};let N;n!=null&&n.id?(N=await Tt.updateEvent(n.id,v),N.tags=h):(N=await Tt.createEvent(v),N.tags=h),s(N),e()}catch(v){console.error("Failed to save event - Full error:",v),v.response?(console.error("Response status:",v.response.status),console.error("Response data:",v.response.data)):v.request?console.error("Request was made but no response:",v.request):console.error("Error message:",v.message),alert(`일정 저장에 실패했습니다: ${v.message||"알 수 없는 오류"}`)}},b=async()=>{if(n!=null&&n.id&&window.confirm("이 일정을 삭제하시겠습니까?"))try{await Tt.deleteEvent(n.id),e(),window.location.reload()}catch(y){console.error("Failed to delete event:",y),alert("일정 삭제에 실패했습니다.")}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-background rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto border border-border",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:n?"일정 수정":"새 작성"}),!n&&a.jsxs("div",{className:"flex mb-6 bg-muted rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>l("event"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${o==="event"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"📅 일정"}),a.jsx("button",{type:"button",onClick:()=>l("todo"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${o==="todo"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"✅ 할일"})]}),a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o==="todo"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"할일 내용*"}),a.jsx("input",{type:"text",value:u.text,onChange:y=>g({...u,text:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",placeholder:"할일을 입력하세요...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"우선순위"}),a.jsx("div",{className:"flex space-x-2",children:[{value:"high",label:"높음",icon:"🔴"},{value:"medium",label:"보통",icon:"🟡"},{value:"low",label:"낮음",icon:"🟢"}].map(y=>a.jsxs("button",{type:"button",onClick:()=>g({...u,priority:y.value}),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium border transition-colors ${u.priority===y.value?"border-primary-500 bg-primary-500/10 text-primary-600":"border-border hover:border-primary-300"}`,children:[a.jsx("span",{className:"mr-1",children:y.icon}),y.label]},y.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"날짜"}),a.jsx("input",{type:"date",value:u.date,onChange:y=>g({...u,date:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"제목*"}),a.jsx("input",{type:"text",value:c.title,onChange:y=>d({...c,title:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"설명"}),a.jsx("textarea",{value:c.description||"",onChange:y=>d({...c,description:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",rows:3})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:c.all_day,onChange:y=>d({...c,all_day:y.target.checked}),className:"mr-2"}),a.jsx("label",{className:"text-sm text-foreground",children:"종일"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"시작*"}),a.jsx("input",{type:"datetime-local",value:c.start_time,onChange:y=>d({...c,start_time:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"종료*"}),a.jsx("input",{type:"datetime-local",value:c.end_time,onChange:y=>d({...c,end_time:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"위치"}),a.jsx("input",{type:"text",value:c.location||"",onChange:y=>d({...c,location:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"유형"}),a.jsxs("select",{value:c.type,onChange:y=>d({...c,type:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",children:[a.jsx("option",{value:"personal",children:"개인"}),a.jsx("option",{value:"work",children:"업무"}),a.jsx("option",{value:"holiday",children:"휴일"}),a.jsx("option",{value:"other",children:"기타"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"색상"}),a.jsx("input",{type:"color",value:c.color||"#3b82f6",onChange:y=>d({...c,color:y.target.value}),className:"w-full h-10 border border-border rounded-md bg-background"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"태그"}),a.jsx(Xv,{selectedTags:h,onTagsChange:m,placeholder:"태그를 선택하거나 새로 만들기",allowCreate:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"알림 (분)"}),a.jsxs("select",{value:c.reminder_minutes,onChange:y=>d({...c,reminder_minutes:parseInt(y.target.value)}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",children:[a.jsx("option",{value:"0",children:"없음"}),a.jsx("option",{value:"5",children:"5분 전"}),a.jsx("option",{value:"10",children:"10분 전"}),a.jsx("option",{value:"15",children:"15분 전"}),a.jsx("option",{value:"30",children:"30분 전"}),a.jsx("option",{value:"60",children:"1시간 전"}),a.jsx("option",{value:"1440",children:"1일 전"})]})]})]}),a.jsxs("div",{className:"flex justify-between pt-4",children:[a.jsx("div",{children:(n==null?void 0:n.id)&&a.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-red-600 hover:bg-red-500/10 rounded-md",children:"삭제"})}),a.jsxs("div",{className:"space-x-2",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-foreground hover:bg-muted rounded-md",children:"취소"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600",children:n?"수정":o==="todo"?"할일 저장":"일정 저장"})]})]})]})]})}):null};function Qv({isOpen:t,onClose:e,children:s,className:n=""}){return j.useEffect(()=>{const r=i=>{i.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[t,e]),t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:e,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),a.jsx("div",{className:`
          relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl 
          max-w-lg w-full mx-4 max-h-[90vh] overflow-auto
          transform transition-all duration-200 scale-100
          ${n}
        `,onClick:r=>r.stopPropagation(),children:s})]}):null}const dd=[{emoji:"😊",label:"기쁨",traditional:"희(喜)",color:"wuxing-fire",element:"화(火)"},{emoji:"😢",label:"슬픔",traditional:"애(哀)",color:"wuxing-metal",element:"금(金)"},{emoji:"😠",label:"분노",traditional:"노(怒)",color:"wuxing-wood",element:"목(木)"},{emoji:"😰",label:"두려움",traditional:"공(恐)",color:"wuxing-water",element:"수(水)"},{emoji:"🤔",label:"생각",traditional:"사(思)",color:"wuxing-earth",element:"토(土)"},{emoji:"😌",label:"평온",traditional:"정(靜)",color:"yinyang-yin",element:"음(陰)"},{emoji:"🌟",label:"활기",traditional:"양(陽)",color:"yinyang-yang",element:"양(陽)"},{emoji:"😐",label:"담담",traditional:"무(無)",color:"wuxing-metal-light",element:"중용"}];function Zv({isOpen:t,onClose:e,date:s,onSave:n}){const[r,i]=j.useState(s),[o,l]=j.useState(""),[c,d]=j.useState(""),[h,m]=j.useState(!1),[u,g]=j.useState(null),[f,p]=j.useState(null),[b,y]=j.useState(null),[v,N]=j.useState(!1),S=j.useCallback(async()=>{var w;m(!0),y(null);try{const k=V(s,"yyyy-MM-dd"),M=await Oe.getDiaryByDate(k);g(M),l(M.content),d(M.mood||"")}catch(k){((w=k.response)==null?void 0:w.status)===404?(g(null),l(""),d("")):(console.error("Failed to fetch diary:",k),y("일기를 불러오는데 실패했습니다."))}finally{m(!1)}},[s]);j.useEffect(()=>{t&&s&&S()},[s,t,S]);const C=async()=>{if(o.trim()){m(!0),y(null);try{const k={date:V(s,"yyyy-MM-dd"),content:o.trim(),mood:c||"😐",weather:void 0,tags:[]};let M;u!=null&&u.id?M=await Oe.updateDiary(u.id,k):M=await Oe.createDiary(k),n&&n(M),alert(u?"일기가 수정되었습니다.":"일기가 저장되었습니다."),e()}catch(w){console.error("Failed to save diary:",w),y("일기 저장에 실패했습니다. 다시 시도해주세요.")}finally{m(!1)}}},_=()=>{o!==((u==null?void 0:u.content)||"")||c!==((u==null?void 0:u.mood)||"")?window.confirm("작성 중인 내용이 있습니다. 정말 닫으시겠습니까?")&&e():e()};return a.jsx(Qv,{isOpen:t,onClose:_,className:"max-w-2xl",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["📝 ",V(s,"yyyy년 M월 d일 EEEE",{locale:ye})," 일기"]}),a.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xl",children:"✕"})]}),b&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["⚠️ ",b]})}),h&&!u&&a.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"📖 일기를 불러오는 중..."})}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎭"}),"오늘의 마음을 선택해주세요",a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(오행 감정론 기반)"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:dd.map(({emoji:w,label:k,traditional:M,color:E,element:A})=>a.jsxs("button",{onClick:()=>d(w),className:`
                  group relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-300 hover:scale-105
                  ${c===w?`border-${E} bg-gradient-to-br from-${E}/10 to-${E}/20 shadow-lg`:"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-800"}
                `,style:{borderColor:c===w?`hsl(var(--${E.replace("wuxing-","").replace("yinyang-","")}))`:void 0},children:[a.jsxs("div",{className:"relative mb-2",children:[a.jsx("span",{className:"text-2xl transition-transform group-hover:scale-110",children:w}),c===w&&a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs text-white",children:"✓"})})]}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:k}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:M}),a.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:A}),c===w&&a.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-transparent via-white/20 to-transparent opacity-50 pointer-events-none"})]},w))}),c&&a.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(()=>{const w=dd.find(k=>k.emoji===c);return a.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[a.jsx("span",{className:"font-semibold",children:w==null?void 0:w.traditional})," - ",w==null?void 0:w.element," 기운의 감정입니다.",(w==null?void 0:w.element)==="화(火)"&&" 밝고 활발한 에너지를 나타냅니다.",(w==null?void 0:w.element)==="금(金)"&&" 차분하고 정제된 에너지를 나타냅니다.",(w==null?void 0:w.element)==="목(木)"&&" 성장하고 발전하려는 에너지를 나타냅니다.",(w==null?void 0:w.element)==="수(水)"&&" 유연하고 깊이 있는 에너지를 나타냅니다.",(w==null?void 0:w.element)==="토(土)"&&" 안정되고 신중한 에너지를 나타냅니다.",(w==null?void 0:w.element)==="음(陰)"&&" 고요하고 내향적인 에너지를 나타냅니다.",(w==null?void 0:w.element)==="양(陽)"&&" 활발하고 외향적인 에너지를 나타냅니다.",(w==null?void 0:w.element)==="중용"&&" 균형잡힌 중도의 마음을 나타냅니다."]})})()})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"오늘 하루는 어떠셨나요?"}),a.jsx("textarea",{value:o,onChange:w=>l(w.target.value),placeholder:"오늘 있었던 일, 느낀 점, 감사한 일 등을 자유롭게 적어보세요...",rows:8,className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg resize-none bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsxs("div",{className:"flex justify-between mt-2",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:[o.length," / 1000자"]}),a.jsx("span",{className:"text-xs text-gray-400",children:"Tab 키로 들여쓰기 가능"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:_,disabled:h,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"취소"}),a.jsx("button",{onClick:C,disabled:!o.trim()||h,className:`
              px-6 py-2 rounded-lg text-white font-medium transition-colors
              ${o.trim()&&!h?"bg-purple-600 hover:bg-purple-700":"bg-gray-400 cursor-not-allowed"}
            `,children:h?"저장 중...":u?"수정하기":"저장하기"})]}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["💡 ",a.jsx("strong",{children:"팁:"})," 일기는 자동으로 저장되지 않습니다. 작성 완료 후 반드시 저장 버튼을 눌러주세요."]})})]})})}function e2({userId:t}){const[e,s]=j.useState(null),[n,r]=j.useState([]),[i,o]=j.useState(!0);j.useEffect(()=>{l(),c()},[t]);const l=async()=>{try{s({totalCoursesEnrolled:5,completedCourses:2,inProgressCourses:3,totalLessonsCompleted:24,totalStudyTime:14400,averageScore:87,streak:7,certificates:2}),o(!1)}catch(m){console.error("학습 통계 로딩 실패:",m),o(!1)}},c=()=>{r([{week:"1주",lessonsCompleted:2,studyTime:1800},{week:"2주",lessonsCompleted:4,studyTime:2400},{week:"3주",lessonsCompleted:6,studyTime:3200},{week:"4주",lessonsCompleted:5,studyTime:2800},{week:"5주",lessonsCompleted:7,studyTime:4200}])},d=m=>{const u=Math.floor(m/3600),g=Math.floor(m%3600/60);return u>0?`${u}시간 ${g}분`:`${g}분`},h=Math.max(...n.map(m=>m.lessonsCompleted));return i?a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]})]})}):e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:a.jsx(We,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.completedCourses}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"완료한 강좌"})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:a.jsx(pn,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Math.floor(e.totalStudyTime/3600)}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"총 학습시간"})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:a.jsx(Js,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.averageScore}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"평균 점수"})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:a.jsx(Ut,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.streak}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"연속 학습일"})]})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"주간 학습 진도"}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Pa,{className:"h-4 w-4 mr-1"}),"최근 5주"]})]}),a.jsx("div",{className:"space-y-4",children:n.map((m,u)=>a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-8 text-sm text-gray-600 dark:text-gray-400",children:m.week}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[m.lessonsCompleted,"개 레슨"]}),a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:d(m.studyTime)})]}),a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${m.lessonsCompleted/h*100}%`}})})]})]},u))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"강좌 진행 현황"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료"}),a.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[e.completedCourses,"개"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"진행중"}),a.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:[e.inProgressCourses,"개"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"전체 진행률"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(e.completedCourses/e.totalCoursesEnrolled*100),"%"]})]}),a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full",style:{width:`${e.completedCourses/e.totalCoursesEnrolled*100}%`}})})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"성취 현황"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Fv,{className:"h-8 w-8 text-yellow-500"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["수료증 ",e.certificates,"개"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"강좌 완주 인증"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((m,u)=>a.jsx(Js,{className:`h-5 w-5 ${u<Math.floor(e.averageScore/20)?"text-yellow-500 fill-current":"text-gray-300 dark:text-gray-600"}`},u))}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["평균 ",e.averageScore,"점"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"퀴즈 성적"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-3",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["🔥 ",e.streak,"일 연속 학습 중!"]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"계속해서 꾸준히 학습해보세요"})]})]})]})]})]}):null}function t2({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const Ra=j.forwardRef(t2);function s2({course:t,progress:e,showEnrollButton:s=!0,onEnroll:n}){const r=He(),[i,o]=j.useState(!1),l={beginner:"초급",intermediate:"중급",advanced:"고급",expert:"전문가"},c={basic:"기초",fortune:"운세",compatibility:"궁합",professional:"전문가",special:"특강"},d=p=>p===0?"무료":new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(p),h=p=>{const b=Math.floor(p/60),y=p%60;return b>0?`${b}시간 ${y}분`:`${y}분`},m=async()=>{if(n){o(!0);try{await n(t.id)}catch(p){console.error("수강신청 실패:",p)}finally{o(!1)}}},u=()=>{r(`/learning/${t.id}`)},g=()=>{r(`/learning/${t.id}`)},f=()=>e!=null&&e.isEnrolled?e.status==="completed"?a.jsxs("button",{onClick:g,className:"w-full px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[a.jsx(Ra,{className:"h-4 w-4 mr-1"}),"다시 보기"]}):e.progress>0?a.jsxs("button",{onClick:u,className:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[a.jsx(ja,{className:"h-4 w-4 mr-1"}),"이어서 보기"]}):a.jsxs("button",{onClick:g,className:"w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[a.jsx(ja,{className:"h-4 w-4 mr-1"}),"시작하기"]}):a.jsx("button",{onClick:m,disabled:i||t.status!=="published",className:"w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"수강신청 중...":t.price===0?"무료 수강하기":`${d(t.price)} 결제`});return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden group hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-purple-400 to-blue-500 overflow-hidden",children:[t.thumbnail?a.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"}):a.jsx("div",{className:"flex items-center justify-center h-full text-white",children:a.jsx(We,{className:"h-16 w-16 opacity-50"})}),a.jsxs("div",{className:"absolute top-3 left-3",children:[(e==null?void 0:e.status)==="completed"&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[a.jsx(Ra,{className:"h-3 w-3 mr-1"}),"완료"]}),(e==null?void 0:e.isEnrolled)&&e.status!=="completed"&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[a.jsx(ja,{className:"h-3 w-3 mr-1"}),"수강중"]}),t.status!=="published"&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:[a.jsx(Sv,{className:"h-3 w-3 mr-1"}),"준비중"]})]}),a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white/90 text-gray-900",children:d(t.price)})}),(e==null?void 0:e.isEnrolled)&&e.status!=="completed"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50",children:a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-white text-xs mb-1",children:[a.jsx("span",{children:"진도율"}),a.jsxs("span",{children:[e.progress,"%"]})]}),a.jsx("div",{className:"bg-white/20 rounded-full h-1",children:a.jsx("div",{className:"bg-white h-1 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})})]})})]}),a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:c[t.category]}),a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:l[t.level]})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:t.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:t.description}),a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Vv,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.instructor_name})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(pn,{className:"h-3 w-3 mr-1"}),h(t.duration)]}),a.jsxs("span",{className:"flex items-center",children:[a.jsx(We,{className:"h-3 w-3 mr-1"}),t.lessons_count,"개 강의"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Js,{className:"h-3 w-3 mr-1 text-yellow-500"}),a.jsx("span",{children:t.rating.toFixed(1)})]}),a.jsxs("span",{children:["(",t.enrollment_count,")"]})]})]}),s&&f(),(e==null?void 0:e.isEnrolled)&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.completedLessons,"/",e.totalLessons," 강의 완료",e.status==="completed"&&a.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:"🎉 수료 완료"})]})})]})]})}function n2(){const{todos:t,addTodo:e}=lt(),[s,n]=j.useState(null),[r,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState(!1),[h,m]=j.useState("overview"),[u,g]=j.useState([]),[f,p]=j.useState(!1),[b,y]=j.useState(!1),[v,N]=j.useState(!1),S=Sy({onAddEvent:()=>p(!0),onAddTodo:()=>N(!0),onWriteDiary:()=>y(!0)}),C=async(k=!1)=>{k?d(!0):i(!0),l(null);try{const M=await Ny(t);n(M)}catch(M){console.error("Failed to load dashboard data:",M),l("대시보드 데이터를 불러오는데 실패했습니다.")}finally{i(!1),d(!1)}};j.useEffect(()=>{C(),_()},[t]);const _=async()=>{try{g([{id:"1",title:"사주 기초 입문 과정",description:"사주의 기본 개념부터 실전 해석까지",level:"beginner",category:"basic",status:"published",instructor_id:"1",instructor_name:"김사주 선생님",price:0,rating:4.8,enrollment_count:1234,duration:240,lessons_count:12,created_at:"2024-01-01"},{id:"2",title:"고급 사주 해석법",description:"전문가 수준의 사주 분석 기법",level:"advanced",category:"professional",status:"published",instructor_id:"2",instructor_name:"이운세 선생님",price:99e3,rating:4.9,enrollment_count:567,duration:480,lessons_count:24,created_at:"2024-02-01"}])}catch(k){console.error("수강 강좌 로딩 실패:",k)}},w=()=>{C(!0)};return r&&!s?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-48 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-32"})]}),a.jsx("div",{className:"animate-pulse",children:a.jsx("div",{className:"h-10 w-24 bg-gray-200 dark:bg-gray-600 rounded"})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"}),a.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"}),a.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"})]})]})]})}):o?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"😵"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"오류가 발생했습니다"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:o}),a.jsx("button",{onClick:()=>C(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"다시 시도"})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:h==="overview"?"📊 대시보드":"🎓 학습 현황"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:h==="overview"?"한눈에 보는 나의 활동 현황":"학습 진도와 성취를 확인하세요"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 border border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>m("overview"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${h==="overview"?"bg-purple-600 text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"개요"}),a.jsx("button",{onClick:()=>m("learning"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${h==="learning"?"bg-purple-600 text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"학습"})]}),a.jsxs("button",{onClick:w,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[a.jsx(ov,{className:`h-4 w-4 ${c?"animate-spin":""}`}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:c?"새로고침 중...":"새로고침"})]})]})]}),h==="overview"?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s&&a.jsx(Yv,{todayData:s.today,loading:r}),s&&a.jsx(Gv,{weeklyData:s.week,loading:r})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsx(qv,{actions:S,loading:r}),s&&a.jsx(Kv,{monthlyData:s.month,loading:r})]})]}):a.jsxs("div",{className:"space-y-8",children:[a.jsx(e2,{userId:"user-1"}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"수강 중인 강좌"}),u.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"수강 중인 강좌가 없습니다"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"새로운 강좌를 수강해보세요"}),a.jsx("button",{onClick:()=>window.location.href="/saju",className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"강좌 둘러보기"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(k=>a.jsx(s2,{course:k,progress:{courseId:k.id,enrollmentId:`enrollment-${k.id}`,progress:k.id==="1"?25:60,completedLessons:k.id==="1"?3:14,totalLessons:k.lessons_count,isEnrolled:!0,status:(k.id==="1","enrolled")},showEnrollButton:!1},k.id))})]})]}),s&&a.jsx("div",{className:"mt-8 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"text-3xl",children:"🎯"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"오늘의 인사이트"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[s.today.totalTodos===0&&a.jsx("p",{children:"• 오늘 할일을 추가하여 하루를 계획해보세요"}),s.today.diary===null&&a.jsx("p",{children:"• 하루를 마무리하며 일기를 작성해보세요"}),s.week.completionRate>80&&a.jsxs("p",{children:["• 이번 주 할일 완료율이 ",s.week.completionRate,"%입니다. 정말 잘하고 계시네요! 🎉"]}),s.week.completionRate<50&&s.week.completionRate>0&&a.jsx("p",{children:"• 할일 완료율이 낮습니다. 작은 목표부터 차근차근 시작해보세요"}),s.month.totalActivities===0&&a.jsx("p",{children:"• 이번 달의 첫 활동을 기록해보세요!"})]})]})]})})]}),f&&a.jsx(um,{isOpen:f,onClose:()=>p(!1),onSave:k=>{p(!1),C(!0)}}),b&&a.jsx(Zv,{isOpen:b,date:new Date,onClose:()=>y(!1),onSave:()=>{y(!1),C(!0)}}),v&&(()=>{const k=prompt("새로운 할일을 입력하세요:");return k&&(e({text:k,completed:!1,priority:"medium",date:new Date().toISOString().split("T")[0]}),C(!0)),N(!1),null})()]})}function r2({stats:t}){const e=r=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(r),s=r=>new Intl.NumberFormat("ko-KR").format(r),n=[{title:"전체 강좌",value:s(t.totalCourses),icon:We,color:"blue",bgColor:"bg-blue-50 dark:bg-blue-900/20",iconColor:"text-blue-600 dark:text-blue-400",textColor:"text-blue-600 dark:text-blue-400",description:"개설된 강좌 수"},{title:"전체 학생",value:s(t.totalStudents),icon:Tl,color:"green",bgColor:"bg-green-50 dark:bg-green-900/20",iconColor:"text-green-600 dark:text-green-400",textColor:"text-green-600 dark:text-green-400",description:"등록된 학생 수"},{title:"수강신청",value:s(t.totalEnrollments),icon:lm,color:"purple",bgColor:"bg-purple-50 dark:bg-purple-900/20",iconColor:"text-purple-600 dark:text-purple-400",textColor:"text-purple-600 dark:text-purple-400",description:"총 수강신청 건수",subStats:[{label:"진행중",value:t.activeEnrollments},{label:"완료",value:t.completedEnrollments}]},{title:"총 수익",value:e(t.totalRevenue),icon:cm,color:"emerald",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",iconColor:"text-emerald-600 dark:text-emerald-400",textColor:"text-emerald-600 dark:text-emerald-400",description:"전체 매출 현황"},{title:"평균 평점",value:t.averageRating.toFixed(1),icon:Js,color:"yellow",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",iconColor:"text-yellow-600 dark:text-yellow-400",textColor:"text-yellow-600 dark:text-yellow-400",description:"강좌 평균 만족도",suffix:"/5.0"},{title:"완료율",value:`${t.completionRate}%`,icon:Ct,color:"indigo",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",iconColor:"text-indigo-600 dark:text-indigo-400",textColor:"text-indigo-600 dark:text-indigo-400",description:"수강 완료율"}];return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((r,i)=>a.jsxs("div",{className:`${r.bgColor} rounded-xl p-6 border border-opacity-20`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`p-3 ${r.bgColor} rounded-lg`,children:a.jsx(r.icon,{className:`h-6 w-6 ${r.iconColor}`})}),r.color==="green"&&t.totalEnrollments>0&&a.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[a.jsx(El,{className:"h-4 w-4 mr-1"}),a.jsxs("span",{className:"text-xs font-medium",children:["+",Math.round(t.activeEnrollments/t.totalEnrollments*100),"%"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r.title}),a.jsxs("div",{className:"flex items-baseline space-x-2",children:[a.jsx("p",{className:`text-2xl font-bold ${r.textColor}`,children:r.value}),r.suffix&&a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.suffix})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.description}),r.subStats&&a.jsx("div",{className:"flex space-x-4 mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:r.subStats.map((o,l)=>a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o.label}),a.jsx("p",{className:`text-sm font-semibold ${r.textColor}`,children:s(o.value)})]},l))})]})]},i))})}function a2({courses:t,onRefresh:e}){const[s,n]=j.useState(""),[r,i]=j.useState("all"),[o,l]=j.useState("all"),[c,d]=j.useState("all"),h={beginner:"초급",intermediate:"중급",advanced:"고급",expert:"전문가"},m={basic:"기초",fortune:"운세",compatibility:"궁합",professional:"전문가",special:"특강"},u={draft:"초안",published:"공개",archived:"보관됨",coming_soon:"출시 예정"},g={draft:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",published:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",archived:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",coming_soon:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"},f=t.filter(y=>{const v=y.title.toLowerCase().includes(s.toLowerCase()),N=r==="all"||y.status===r,S=o==="all"||y.category===o,C=c==="all"||y.level===c;return v&&N&&S&&C}),p=y=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(y),b=y=>new Date(y).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"강좌 관리"}),a.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["총 ",f.length,"개의 강좌"]})]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(dm,{className:"h-4 w-4"}),"새 강좌 추가"]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"강좌명 검색...",value:s,onChange:y=>n(y.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("select",{value:r,onChange:y=>i(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"모든 상태"}),a.jsx("option",{value:"draft",children:"초안"}),a.jsx("option",{value:"published",children:"공개"}),a.jsx("option",{value:"archived",children:"보관됨"}),a.jsx("option",{value:"coming_soon",children:"출시 예정"})]}),a.jsxs("select",{value:o,onChange:y=>l(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"모든 카테고리"}),a.jsx("option",{value:"basic",children:"기초"}),a.jsx("option",{value:"fortune",children:"운세"}),a.jsx("option",{value:"compatibility",children:"궁합"}),a.jsx("option",{value:"professional",children:"전문가"}),a.jsx("option",{value:"special",children:"특강"})]}),a.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"모든 레벨"}),a.jsx("option",{value:"beginner",children:"초급"}),a.jsx("option",{value:"intermediate",children:"중급"}),a.jsx("option",{value:"advanced",children:"고급"}),a.jsx("option",{value:"expert",children:"전문가"})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:f.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(We,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"강좌가 없습니다"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"새로운 강좌를 추가하거나 검색 조건을 변경해보세요"}),a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"새 강좌 추가"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"강좌 정보"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"상태"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"가격"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"통계"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"생성일"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"작업"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:f.map(y=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:a.jsx(We,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:y.title}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:m[y.category]}),a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:h[y.level]})]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g[y.status]}`,children:u[y.status]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.price===0?"무료":p(y.price)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Tl,{className:"h-4 w-4 mr-1"}),y.enrollment_count]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Js,{className:"h-4 w-4 mr-1"}),y.rating.toFixed(1)]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:b(y.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400",children:a.jsx(wv,{className:"h-4 w-4"})}),a.jsx("button",{className:"text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400",children:a.jsx(Mv,{className:"h-4 w-4"})}),a.jsx("button",{className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:a.jsx(Ov,{className:"h-4 w-4"})})]})})]},y.id))})]})})})]})}function i2({stats:t}){const e=parseFloat(t.completionRate),s=(i,o=0)=>{const l=i*360/100,c=o+l,d=50+40*Math.cos(Math.PI*o/180),h=50+40*Math.sin(Math.PI*o/180),m=50+40*Math.cos(Math.PI*c/180),u=50+40*Math.sin(Math.PI*c/180),g=l>180?1:0;return i===100?"M 50 10 A 40 40 0 1 1 49.99 10 Z":`M 50 50 L ${d} ${h} A 40 40 0 ${g} 1 ${m} ${u} Z`},n=t.totalEnrollments>0?t.activeEnrollments/t.totalEnrollments*100:0,r=t.totalEnrollments>0?t.completedEnrollments/t.totalEnrollments*100:0;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"수강신청 현황"}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["전체 ",t.totalEnrollments.toLocaleString(),"건"]})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 transform -rotate-90",children:[a.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-gray-200 dark:text-gray-700"}),r>0&&a.jsx("path",{d:s(r,0),fill:"currentColor",className:"text-green-500"}),n>0&&a.jsx("path",{d:s(n,r*360/100),fill:"currentColor",className:"text-blue-500"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[e.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"완료율"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"완료"}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.completedEnrollments.toLocaleString(),"건 (",r.toFixed(1),"%)"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"진행중"}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.activeEnrollments.toLocaleString(),"건 (",n.toFixed(1),"%)"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-300 dark:bg-gray-600 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"기타"}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(t.totalEnrollments-t.activeEnrollments-t.completedEnrollments).toLocaleString(),"건"]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.totalStudents.toLocaleString()}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"총 학생 수"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[t.averageRating.toFixed(1),"/5.0"]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"평균 만족도"})]})]})]})}function o2({totalRevenue:t}){const e=r=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(r),s=[{month:"1월",revenue:t*.08},{month:"2월",revenue:t*.06},{month:"3월",revenue:t*.12},{month:"4월",revenue:t*.09},{month:"5월",revenue:t*.15},{month:"6월",revenue:t*.11},{month:"7월",revenue:t*.13},{month:"8월",revenue:t*.1},{month:"9월",revenue:t*.16}],n=Math.max(...s.map(r=>r.revenue));return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"월별 매출 현황"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"2024년 누적 매출"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 dark:text-green-400",children:[a.jsx(El,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:"+12.5%"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(cm,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"}),a.jsx("span",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:e(t)})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"전체 매출 합계"})]}),a.jsx("div",{className:"space-y-3",children:s.map((r,i)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 text-xs text-gray-500 dark:text-gray-400 text-right",children:r.month}),a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative overflow-hidden",children:a.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${r.revenue/n*100}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-full"})})})}),a.jsx("div",{className:"w-20 text-xs text-gray-600 dark:text-gray-300 text-right",children:e(r.revenue)})]},i))}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:e(s[s.length-1].revenue)}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"이번 달"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:e(t/s.length)}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"월 평균"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:"+12.5%"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"전월 대비"})]})]})]})}function l2(){const[t,e]=j.useState(null),[s,n]=j.useState([]),[r,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState("overview"),h=async()=>{try{const g=await fetch("/api/academy/stats/overview");if(!g.ok)throw new Error("Failed to fetch academy stats");const f=await g.json();if(f.success)e(f.data);else throw new Error(f.error||"Failed to load stats")}catch(g){console.error("Failed to load academy stats:",g),l("통계 데이터를 불러오는데 실패했습니다.")}},m=async()=>{try{const g=await fetch("/api/academy/courses?limit=10&sort_by=created_at&sort_order=desc");if(!g.ok)throw new Error("Failed to fetch courses");const f=await g.json();if(f.success)n(f.data.courses);else throw new Error(f.error||"Failed to load courses")}catch(g){console.error("Failed to load courses:",g),l("강좌 데이터를 불러오는데 실패했습니다.")}};j.useEffect(()=>{(async()=>{i(!0),l(null);try{await Promise.all([h(),m()])}catch(f){console.error("Failed to load dashboard data:",f)}finally{i(!1)}})()},[]);const u=async()=>{await Promise.all([h(),m()])};return r?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"animate-pulse mb-8",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-64 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-48"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((g,f)=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-1/2"})]},f))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded"})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded"})})]})]})}):o?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"❌"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"데이터를 불러올 수 없습니다"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:o}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"새로고침"})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(lm,{className:"h-8 w-8 text-blue-600"}),"아카데미 관리 대시보드"]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"운명나침반 교육 플랫폼 관리 및 현황"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"새로고침"}),a.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(dm,{className:"h-4 w-4"}),"새 강좌"]})]})]}),a.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-8",children:[{key:"overview",label:"개요",icon:Pa},{key:"courses",label:"강좌 관리",icon:We},{key:"enrollments",label:"수강 현황",icon:Tl},{key:"analytics",label:"분석",icon:El}].map(({key:g,label:f,icon:p})=>a.jsxs("button",{onClick:()=>d(g),className:`flex items-center gap-2 px-6 py-3 border-b-2 transition-colors ${c===g?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.jsx(p,{className:"h-4 w-4"}),f]},g))}),c==="overview"&&a.jsxs("div",{className:"space-y-8",children:[t&&a.jsx(r2,{stats:t}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t&&a.jsx(i2,{stats:t}),t&&a.jsx(o2,{totalRevenue:t.totalRevenue})]})]}),c==="courses"&&a.jsx(a2,{courses:s,onRefresh:u}),c==="enrollments"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"수강 현황 관리"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"수강생 관리 기능이 곧 추가됩니다."})]}),c==="analytics"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"상세 분석"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"상세 분석 대시보드가 곧 추가됩니다."})]})]})})}const Al=({viewMode:t,currentDate:e})=>{const[s,n]=j.useState({diaries:[],diaryDates:new Set,loading:!1,error:null}),r=j.useCallback(()=>{let c,d;switch(t){case"year":c=new Date(e.getFullYear(),0,1),d=new Date(e.getFullYear(),11,31);break;case"month":c=ar(e),d=ir(e);break;case"week":c=Cr(e,{weekStartsOn:0}),d=_r(e,{weekStartsOn:0});break;case"day":c=e,d=e;break;default:c=ar(e),d=ir(e)}return{startDate:V(c,"yyyy-MM-dd"),endDate:V(d,"yyyy-MM-dd")}},[t,e]),i=j.useCallback(async()=>{n(c=>({...c,loading:!0,error:null}));try{const{startDate:c,endDate:d}=r(),h=await Oe.getDiariesForDateRange(c,d),m=new Set;h.forEach(u=>{u.date&&(u.content&&u.content.trim()||u.images&&u.images.length>0)&&m.add(u.date)}),n({diaries:h,diaryDates:m,loading:!1,error:null})}catch(c){console.error("Failed to load diaries:",c),n(d=>({...d,loading:!1,error:"Failed to load diary entries"}))}},[r]),o=j.useCallback(c=>{const d=typeof c=="string"?c:V(c,"yyyy-MM-dd");return s.diaryDates.has(d)},[s.diaryDates]),l=j.useCallback(c=>{const d=typeof c=="string"?c:V(c,"yyyy-MM-dd");return s.diaries.find(h=>h.date===d)},[s.diaries]);return j.useEffect(()=>{i()},[i]),{diaries:s.diaries,diaryDates:s.diaryDates,loading:s.loading,error:s.error,hasDiary:o,getDiaryForDate:l,reloadDiaries:i}},hd={reflection:["오늘 하루 가장 감사했던 순간은 언제였나요?","마음 깊은 곳의 진짜 기분을 솔직하게 적어보세요.","오늘 나에게 가장 소중했던 것은 무엇인가요?","하루를 돌아보며, 나는 어떤 사람이었는지 생각해보세요.","오늘의 나에게 전하고 싶은 한 마디가 있다면?","마음속 깊은 곳의 목소리에 귀 기울여보세요.","오늘 나를 가장 행복하게 만든 순간을 기억해보세요.","지금 이 순간 내 마음은 어떤 색깔인가요?","오늘 하루 나는 누구를 위해 살았나요?","마음이 가장 평화로웠던 시간을 떠올려보세요.","오늘의 나에게 칭찬해주고 싶은 점이 있다면?","하루 종일 가슴 한편에 머물렀던 생각을 적어보세요.","오늘 나는 어떤 마음으로 사람들을 만났나요?","지금 이 순간 내가 가장 그리운 것은 무엇인가요?","오늘의 경험 중 마음에 가장 깊이 새겨두고 싶은 것은?"],emotion:["때로는 슬픔도 소중한 감정입니다. 있는 그대로 받아들여보세요.","웃었던 순간들을 기억해보세요. 그 따뜻함을 글로 남겨보세요.","기쁨이든 슬픔이든, 지금 이 감정도 소중한 나의 일부입니다.","마음이 무거울 때일수록, 작은 행복을 찾아보세요.","감정을 억누르지 말고, 종이 위에 자유롭게 풀어놓으세요.","오늘의 감정들이 내일의 나를 더 단단하게 만들어줄 거예요.","눈물이 나더라도 괜찮아요. 그것도 마음을 정화하는 방법입니다.","행복했던 순간을 글로 적으면서 그 기분을 다시 느껴보세요.","마음속 감정들을 색깔로 표현한다면 어떤 색일까요?","오늘 느낀 모든 감정들에게 고마움을 전해보세요.","감정의 파도가 지나가는 것을 지켜보며 기록해보세요.","내 마음의 날씨는 지금 어떤가요? 맑음? 흐림? 비?","감정도 계절처럼 변한다는 걸 기억하세요.","오늘의 감정을 한 줄로 요약한다면?","마음이 시키는 대로 자유롭게 써보세요."],relationship:["오늘 만난 사람들 중 누구에게 고마움을 느꼈나요?","가족이나 친구에게 하고 싶었던 말을 적어보세요.","오늘 누군가에게 따뜻함을 전했던 순간이 있나요?","소중한 사람과의 대화 중 기억에 남는 말이 있다면?","오늘 누군가의 미소가 나를 행복하게 만들었나요?","마음을 나누고 싶은 사람이 지금 생각나시나요?","오늘 받은 작은 친절이나 배려를 기록해보세요.","누군가에게 미안한 마음이 있다면 솔직하게 적어보세요.","오늘 내가 누군가에게 도움이 되었던 순간이 있나요?","가장 그리운 사람에게 편지를 쓴다면?","오늘의 만남들이 내게 준 의미를 생각해보세요.","혼자였지만 외롭지 않았던 순간, 함께였지만 외로웠던 순간은?","오늘 누군가의 마음을 이해할 수 있었던 순간이 있나요?","내가 사랑하는 사람들의 얼굴을 떠올리며 써보세요.","오늘 새로운 인연이나 깊어진 관계가 있었나요?"],growth:["오늘 새롭게 배운 것이나 깨달은 점이 있다면 기록해보세요.","어제보다 조금이라도 나아진 모습을 찾아보세요.","오늘 나의 한계를 뛰어넘으려 노력했던 순간이 있나요?","실수나 실패에서도 배울 점을 찾아보세요.","미래의 나에게 지금의 경험이 어떤 도움이 될까요?","오늘의 도전이 내일의 성장으로 이어질 거예요.","작은 변화라도 그것이 시작이라는 걸 기억하세요.","오늘 내가 용기를 냈던 순간을 기록해보세요.","어려운 상황에서도 포기하지 않은 나를 칭찬해주세요.","오늘의 경험이 나를 더 지혜롭게 만들었나요?","새로운 시각으로 바라본 것들이 있다면?","오늘 내가 한 선택들을 돌아보며 배운 점은?","힘들었지만 끝까지 해낸 일이 있나요?","오늘의 나를 어제의 나와 비교해보세요.","성장하고 있는 나 자신을 믿어보세요."],gratitude:["오늘 가장 감사한 세 가지를 적어보세요.","작은 일상 속에서 찾은 행복을 기록해보세요.","나를 위해 힘써준 사람들을 떠올리며 감사 인사를 써보세요.","오늘 내가 누릴 수 있었던 것들에 감사해보세요.","건강한 하루를 보낼 수 있어서 감사하다는 마음을 적어보세요.","따뜻한 잠자리, 맛있는 음식... 당연한 것들에 감사해보세요.","오늘 나를 웃게 만든 것들을 나열해보세요.","사계절의 변화, 자연의 아름다움에 감사한 마음을 써보세요.","가족, 친구들의 존재에 대한 감사함을 표현해보세요.","오늘 하루 무사히 보낼 수 있어서 감사합니다.","내가 가진 작은 재능이나 능력에 감사해보세요.","어려움 속에서도 나를 지켜준 것들을 생각해보세요.","오늘의 모든 순간들이 선물이었다고 생각해보세요.","나를 사랑해주는 사람들이 있어서 감사합니다.","지금 이 순간, 글을 쓸 수 있어서 감사합니다."]};function c2(t){const e=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();return e*1e4+s*100+n}function ud(t){const e=Math.sin(t)*1e4;return e-Math.floor(e)}function md(t){const e=c2(t),s=Object.keys(hd),n=Math.floor(ud(e)*s.length),r=s[n],i=hd[r],o=Math.floor(ud(e+1)*i.length);return{advice:i[o],category:r}}function gd(t){return{reflection:"🤔",emotion:"💝",relationship:"👥",growth:"🌱",gratitude:"🙏"}[t]}function Wr(t){return{reflection:"#8B5CF6",emotion:"#EC4899",relationship:"#3B82F6",growth:"#10B981",gratitude:"#F59E0B"}[t]}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),h2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),fd=t=>{const e=h2(t);return e.charAt(0).toUpperCase()+e.slice(1)},mm=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim(),u2=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...m2,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:mm("lucide",r),...!i&&!u2(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>j.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(t,e)=>{const s=j.forwardRef(({className:n,...r},i)=>j.createElement(g2,{ref:i,iconNode:e,className:mm(`lucide-${d2(fd(t))}`,`lucide-${t}`,n),...r}));return s.displayName=fd(t),s};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],x2=Ye("activity",f2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],b2=Ye("briefcase",p2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],v2=Ye("camera",y2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],k2=Ye("check",j2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],N2=Ye("chevron-left",w2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],C2=Ye("chevron-right",S2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],M2=Ye("info",_2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],T2=Ye("plus",E2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],D2=Ye("search",A2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],xd=Ye("sparkles",P2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],L2=Ye("trash-2",R2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],I2=Ye("users",O2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gm=Ye("x",F2);function B2({images:t,currentIndex:e,isOpen:s,onClose:n,onNext:r,onPrev:i}){const[o,l]=j.useState(e),[c,d]=j.useState(!0);j.useEffect(()=>{l(e)},[e]),j.useEffect(()=>{if(!s)return;const g=f=>{f.key==="Escape"?n():f.key==="ArrowLeft"?m():f.key==="ArrowRight"&&h()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s,o,t.length]);const h=()=>{if(t.length<=1)return;const g=(o+1)%t.length;l(g),d(!0),r==null||r()},m=()=>{if(t.length<=1)return;const g=(o-1+t.length)%t.length;l(g),d(!0),i==null||i()},u=()=>{d(!1)};return!s||!t||t.length===0?null:a.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center",onClick:n,children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent",children:[a.jsxs("div",{className:"text-white text-sm font-medium",children:[o+1," / ",t.length]}),a.jsx("button",{onClick:n,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors backdrop-blur-sm","aria-label":"닫기",children:a.jsx(gm,{className:"w-6 h-6 text-white"})})]}),a.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center",onClick:g=>g.stopPropagation(),children:[c&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-white/20 border-t-white rounded-full animate-spin"})}),a.jsx("img",{src:t[o],alt:`이미지 ${o+1}`,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl",onLoad:u,style:{display:c?"none":"block"}}),t.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:g=>{g.stopPropagation(),m()},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-all backdrop-blur-sm group","aria-label":"이전 이미지",children:a.jsx(N2,{className:"w-6 h-6 text-white group-hover:scale-110 transition-transform"})}),a.jsx("button",{onClick:g=>{g.stopPropagation(),h()},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-all backdrop-blur-sm group","aria-label":"다음 이미지",children:a.jsx(C2,{className:"w-6 h-6 text-white group-hover:scale-110 transition-transform"})})]})]}),t.length>1&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/50 to-transparent",children:a.jsx("div",{className:"flex items-center justify-center gap-2 overflow-x-auto max-w-full",children:t.map((g,f)=>a.jsx("button",{onClick:p=>{p.stopPropagation(),l(f),d(!0)},className:`
                  relative w-16 h-16 rounded-lg overflow-hidden border-2 transition-all flex-shrink-0
                  ${f===o?"border-white scale-110 shadow-xl":"border-white/30 hover:border-white/60 hover:scale-105"}
                `,children:a.jsx("img",{src:g,alt:`썸네일 ${f+1}`,className:"w-full h-full object-cover"})},f))})}),a.jsxs("div",{className:"absolute bottom-4 left-4 text-white/60 text-xs",children:[a.jsx("div",{children:"ESC: 닫기"}),a.jsx("div",{children:"← →: 이미지 이동"})]})]})}const pd=[{emoji:"😊",label:"기분 좋음"},{emoji:"😐",label:"보통"},{emoji:"😢",label:"슬픔"},{emoji:"😠",label:"화남"},{emoji:"😴",label:"피곤함"},{emoji:"🤔",label:"고민"},{emoji:"😍",label:"설렘"},{emoji:"😱",label:"놀람"}];function di({isOpen:t,onClose:e,date:s,onSave:n}){const[r,i]=j.useState(s),[o,l]=j.useState(""),[c,d]=j.useState("😊"),[h,m]=j.useState(!1),[u,g]=j.useState(null),[f,p]=j.useState(null),[b,y]=j.useState(!1),[v,N]=j.useState(0),[S,C]=j.useState([]),[_,w]=j.useState(!1),[k,M]=j.useState(!1),[E,A]=j.useState(0),O=md(r),R=md(zr(r)),T=zr(r),D=j.useCallback(async H=>{var Y,ee;m(!0);try{const G=V(H,"yyyy-MM-dd"),pe=V(zr(H,1),"yyyy-MM-dd");try{const q=await Oe.getDiaryByDate(G);g(q),l(q.content||""),d(q.mood||"😊"),C(q.images||[])}catch(q){((Y=q.response)==null?void 0:Y.status)===404&&g(null)}try{const q=await Oe.getDiaryByDate(pe);p(q)}catch(q){((ee=q.response)==null?void 0:ee.status)===404&&p(null)}}catch(G){console.error("Failed to load diaries:",G)}finally{m(!1)}},[]),L=j.useCallback(async()=>{if(o.trim()){y(!0);try{const Y={date:V(r,"yyyy-MM-dd"),content:o.trim(),mood:c,weather:void 0,images:S.length>0?S:void 0,tags:[]};if(u!=null&&u.id)await Oe.updateDiary(u.id,Y);else{const ee=await Oe.createDiary(Y);g(ee)}}catch(H){console.error("Auto save failed:",H)}finally{y(!1)}}},[o,r,c,S,u]);j.useEffect(()=>{t&&(i(s),D(s))},[t,s,D]),j.useEffect(()=>{t&&r&&D(r)},[r,t,D]),j.useEffect(()=>{if(!o.trim()||!u)return;const H=setTimeout(()=>{(o!==(u==null?void 0:u.content)||c!==(u==null?void 0:u.mood)||JSON.stringify(S)!==JSON.stringify((u==null?void 0:u.images)||[]))&&L()},3e3);return()=>clearTimeout(H)},[o,c,S,u,L]),j.useEffect(()=>{N(o.length)},[o]),j.useEffect(()=>{if(u){const H=JSON.stringify(S),Y=JSON.stringify(u.images||[]);H!==Y&&C(u.images||[])}else S.length>0&&C([])},[u,S]);const F=async()=>{var H,Y,ee,G,pe;if(o.trim()){m(!0);try{const q=V(r,"yyyy-MM-dd");let Ce;S.length>0&&(Ce=S);const J={date:q,content:o.trim(),mood:c,weather:void 0,images:Ce,tags:[]};let ge;u!=null&&u.id?ge=await Oe.updateDiary(u.id,J):ge=await Oe.createDiary(J),g(ge),n&&n(ge),alert("일기가 저장되었습니다!")}catch(q){console.error("일기 저장 실패 상세 정보:"),console.error("Error object:",q),console.error("Error message:",q==null?void 0:q.message),console.error("Error response:",q==null?void 0:q.response),console.error("Error status:",(H=q==null?void 0:q.response)==null?void 0:H.status),console.error("Error data:",(Y=q==null?void 0:q.response)==null?void 0:Y.data);let Ce="일기 저장에 실패했습니다.";((ee=q==null?void 0:q.response)==null?void 0:ee.status)===413?Ce="이미지 크기가 너무 큽니다. 더 작은 이미지를 선택해주세요.":((G=q==null?void 0:q.response)==null?void 0:G.status)===500?Ce="서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.":((pe=q==null?void 0:q.response)==null?void 0:pe.status)===404?Ce="다이어리 서비스에 연결할 수 없습니다.":q!=null&&q.message&&(Ce=`저장 실패: ${q.message}`),alert(Ce)}finally{m(!1)}}},I=()=>{i(zr(r))},U=()=>{i(rp(r,1))},B=H=>{H.key==="ArrowLeft"&&H.ctrlKey?I():H.key==="ArrowRight"&&H.ctrlKey?U():H.key==="Escape"?e():H.key==="s"&&H.ctrlKey&&(H.preventDefault(),F())},z=async H=>new Promise(Y=>{const ee=document.createElement("canvas"),G=ee.getContext("2d"),pe=new Image;pe.onload=()=>{let{width:q,height:Ce}=pe;const J=H.size/(1024*1024);let ge=1920,ss=1920,dt=.85;J>20?(ge=1200,ss=1200,dt=.7):J>10?(ge=1600,ss=1600,dt=.75):J>5&&(ge=1920,ss=1920,dt=.8);const Mi=Math.min(ge/q,ss/Ce);Mi<1&&(q=Math.floor(q*Mi),Ce=Math.floor(Ce*Mi)),ee.width=q,ee.height=Ce,G.imageSmoothingEnabled=!0,G.imageSmoothingQuality="high",G.drawImage(pe,0,0,q,Ce);const Hr=document.createElement("canvas");Hr.width=Hr.height=1,Hr.getContext("2d").fillRect(0,0,1,1);const Vc=Hr.toDataURL("image/webp").startsWith("data:image/webp");let jn;if(Vc?jn=ee.toDataURL("image/webp",dt):jn=ee.toDataURL("image/jpeg",dt),jn.length*3/4/(1024*1024)>2&&dt>.5){const Kx=Math.max(.5,dt*.8);jn=ee.toDataURL(Vc?"image/webp":"image/jpeg",Kx)}Y(jn)},pe.src=URL.createObjectURL(H)}),K=async H=>{const Y=H.target.files;if(!(!Y||Y.length===0)){if(S.length+Y.length>3){alert("최대 3장까지 업로드 가능합니다");return}w(!0);try{const ee=[];for(const G of Array.from(Y)){if(!G.type.startsWith("image/")){alert("이미지 파일만 업로드 가능합니다");continue}if(G.size>50*1024*1024){alert("파일 크기는 50MB 이하만 가능합니다");continue}const pe=await z(G),Ce=pe.length*3/4/(1024*1024);ee.push(pe)}C(G=>[...G,...ee])}catch(ee){console.error("Image upload failed:",ee),alert("이미지 업로드 중 오류가 발생했습니다")}finally{w(!1),H.target.value=""}}},W=H=>{C(Y=>Y.filter((ee,G)=>G!==H))};return t?a.jsxs("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,onKeyDown:B,tabIndex:-1,children:[a.jsxs("div",{className:"diary-book-container relative max-w-6xl w-full max-h-[90vh] overflow-hidden",onClick:H=>H.stopPropagation(),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/20 to-gray-700/40 dark:from-slate-900/40 dark:to-slate-700/60 rounded-2xl transform rotate-1 scale-105"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800/30 to-gray-600/50 dark:from-slate-800/50 dark:to-slate-600/70 rounded-2xl transform -rotate-1 scale-102"}),a.jsxs("div",{className:"relative bg-gradient-to-b from-amber-50 to-amber-100 dark:from-slate-800 dark:to-slate-900 rounded-2xl shadow-2xl border-2 border-amber-200 dark:border-slate-700 p-8",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:"text-sm font-medium text-amber-700 dark:text-gray-400",children:V(r,"yyyy년 M월",{locale:ye})}),a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("h1",{className:"text-2xl font-light text-amber-800 dark:text-gray-200 tracking-wide",style:{fontFamily:"Georgia, serif"},children:"하루의 여백"}),a.jsx("div",{className:"w-20 h-0.5 bg-gradient-to-r from-amber-400 to-amber-600 dark:from-purple-500 dark:to-indigo-500 mx-auto mt-2 rounded-full"})]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:"✕"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-8 min-h-[500px]",children:[a.jsxs("div",{className:"diary-page relative",children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-red-300 dark:bg-slate-600 rounded-full"}),a.jsxs("div",{className:"pl-6",children:[a.jsxs("div",{className:"border-b-2 border-dashed border-amber-300 dark:border-slate-600 pb-3 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-amber-700 dark:text-gray-300",children:V(T,"M월 d일",{locale:ye})}),a.jsx("p",{className:"text-sm text-amber-600 dark:text-gray-400",children:V(T,"EEEE",{locale:ye})})]}),(f==null?void 0:f.mood)&&a.jsx("span",{className:"text-2xl",children:f.mood})]}),a.jsx("div",{className:"mt-3 p-2 bg-amber-100/50 dark:bg-slate-700/30 rounded-lg border border-amber-200 dark:border-slate-600",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"text-amber-600 dark:text-gray-400",children:gd(R.category)}),a.jsx("span",{className:"text-amber-700 dark:text-gray-300 leading-relaxed",children:R.advice})]})})]}),a.jsx("div",{className:"diary-content",children:f?a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap text-sm",style:{fontFamily:"Georgia, serif"},children:f.content}),a.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[f.content.length,"자"]})]}):a.jsxs("div",{className:"text-center text-gray-400 dark:text-gray-500 italic py-8",children:[a.jsx("p",{className:"text-sm",children:"어제의 일기가 없습니다"}),a.jsx("span",{className:"text-2xl",children:"📝"})]})})]})]}),a.jsx("div",{className:"hidden lg:block absolute left-1/2 top-16 bottom-16 w-px bg-gradient-to-b from-amber-300 via-amber-400 to-amber-300 dark:from-transparent dark:via-slate-500 dark:to-transparent"}),a.jsxs("div",{className:"diary-page relative",children:[a.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-red-300 dark:bg-slate-600 rounded-full"}),a.jsxs("div",{className:"pr-6",children:[a.jsxs("div",{className:"border-b-2 border-dashed border-amber-300 dark:border-slate-600 pb-3 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-amber-700 dark:text-gray-300",children:V(r,"M월 d일",{locale:ye})}),a.jsx("p",{className:"text-sm text-amber-600 dark:text-gray-400",children:V(r,"EEEE",{locale:ye})})]}),a.jsx("div",{className:"flex gap-1",children:pd.slice(0,4).map(({emoji:H})=>{var Y;return a.jsx("button",{onClick:()=>d(H),className:`text-xl p-1 rounded transition-all hover:scale-110 ${c===H?"bg-amber-200 dark:bg-slate-700 shadow-sm":"hover:bg-amber-100 dark:hover:bg-slate-800"}`,title:(Y=pd.find(ee=>ee.emoji===H))==null?void 0:Y.label,children:H},H)})})]}),a.jsx("div",{className:"mt-3 p-3 rounded-lg border-2 border-dashed shadow-sm",style:{backgroundColor:`${Wr(O.category)}15`,borderColor:`${Wr(O.category)}40`},children:a.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[a.jsx("span",{className:"text-base mt-1",style:{color:Wr(O.category)},children:gd(O.category)}),a.jsx("span",{className:"leading-relaxed font-medium",style:{color:Wr(O.category)},children:O.advice})]})})]}),a.jsxs("div",{className:"diary-content",children:[a.jsx("textarea",{value:o,onChange:H=>l(H.target.value),placeholder:"오늘 하루는 어땠나요? 마음속 이야기를 자유롭게 적어보세요...",className:"w-full h-64 p-0 border-none bg-transparent resize-none focus:outline-none text-gray-700 dark:text-gray-300 placeholder-amber-400 dark:placeholder-gray-500 leading-relaxed",style:{fontFamily:"Georgia, serif",fontSize:"14px",lineHeight:"24px",background:`repeating-linear-gradient(
                        transparent,
                        transparent 23px,
                        rgba(251, 191, 36, 0.2) 23px,
                        rgba(251, 191, 36, 0.2) 24px
                      )`}}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 
                                       bg-slate-100 dark:bg-slate-700 
                                       hover:bg-slate-200 dark:hover:bg-slate-600 
                                       rounded-lg cursor-pointer transition-colors w-fit
                                       ${_?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx(v2,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:_?"압축 중...":"사진 추가"}),a.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:K,disabled:_})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"최대 3장 • 자동 WebP 압축 • 50MB 이하"})]}),S.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3",children:S.map((H,Y)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:H,className:"w-full h-20 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity",alt:`업로드된 이미지 ${Y+1}`,onClick:()=>{A(Y),M(!0)}}),a.jsx("button",{onClick:()=>W(Y),className:`absolute top-1 right-1 
                                         bg-red-500 hover:bg-red-600 text-white 
                                         rounded-full w-5 h-5 flex items-center justify-center
                                         opacity-0 group-hover:opacity-100 
                                         transition-opacity text-xs font-bold`,children:a.jsx(gm,{className:"w-3 h-3"})})]},Y))}),_&&a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500"}),a.jsx("span",{children:"이미지 업로드 중..."})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 mt-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:[v,"자"]}),b&&a.jsx("span",{className:"text-blue-500 animate-pulse",children:"자동 저장 중..."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-amber-500",children:"✨"}),a.jsx("span",{children:"일기장"})]})]})]})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-amber-200 dark:border-slate-700",children:[a.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 text-amber-700 dark:text-gray-300 hover:bg-amber-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-lg",children:"◀"}),a.jsx("span",{className:"text-sm font-medium",children:"어제"})]}),a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[!$s(r)&&a.jsx("button",{onClick:()=>i(new Date),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium transition-colors",children:"오늘"}),a.jsx("div",{className:"text-xs text-amber-600 dark:text-gray-500",children:"Ctrl + ← → 로 페이지 이동"})]}),a.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 text-amber-700 dark:text-gray-300 hover:bg-amber-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-sm font-medium",children:"내일"}),a.jsx("span",{className:"text-lg",children:"▶"})]})]}),a.jsx("div",{className:"flex justify-end items-center mt-4",children:a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{onClick:F,disabled:!o.trim()||h,className:`
                  px-6 py-2 rounded-lg font-medium transition-colors
                  ${o.trim()&&!h?"bg-amber-500 hover:bg-amber-600 text-white shadow-sm":"bg-gray-300 dark:bg-gray-600 text-gray-500 cursor-not-allowed"}
                `,children:h?"저장 중...":`저장하기 ${o.length>0?`(${o.length}자)`:""}`})})})]})]}),a.jsx(B2,{images:S,currentIndex:E,isOpen:k,onClose:()=>M(!1)})]}):null}function Dl({isOpen:t,onClose:e,todo:s}){const{updateTodo:n}=lt(),[r,i]=j.useState(""),[o,l]=j.useState("medium"),[c,d]=j.useState(!1),[h,m]=j.useState("");j.useEffect(()=>{s&&(i(s.text),l(s.priority),d(s.hasTime||!1),m(s.startTime||""))},[s]);const u=g=>{g.preventDefault(),!(!s||!r.trim())&&(n(s.id,{text:r.trim(),priority:o,hasTime:c,startTime:c?h:void 0}),e())};return!t||!s?null:a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"할일 수정"}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"할일 내용"}),a.jsx("input",{type:"text",value:r,onChange:g=>i(g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700",placeholder:"할일을 입력하세요",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"우선순위"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>l("high"),className:`flex-1 py-2 px-3 rounded-md ${o==="high"?"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"🔴 높음"}),a.jsx("button",{type:"button",onClick:()=>l("medium"),className:`flex-1 py-2 px-3 rounded-md ${o==="medium"?"bg-yellow-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"🟡 보통"}),a.jsx("button",{type:"button",onClick:()=>l("low"),className:`flex-1 py-2 px-3 rounded-md ${o==="low"?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"🟢 낮음"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:"시간 지정"})]}),c&&a.jsx("input",{type:"time",value:h,onChange:g=>m(g.target.value),className:"mt-2 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700"})]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"수정"}),a.jsx("button",{type:"button",onClick:e,className:"flex-1 py-2 px-4 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"취소"})]})]})]})]})})}function $2({pattern:t="clouds",opacity:e=.1,className:s=""}){const n={clouds:"M10,20 Q15,10 20,20 Q25,10 30,20 Q35,10 40,20",waves:"M0,15 Q5,5 10,15 Q15,25 20,15 Q25,5 30,15 Q35,25 40,15",mountains:"M0,25 L5,15 L10,20 L15,10 L20,20 L25,15 L30,25 L35,10 L40,25",bamboo:"M10,5 L10,25 M15,8 L15,25 M20,5 L20,25"};return a.jsx("div",{className:`absolute inset-0 overflow-hidden pointer-events-none ${s}`,children:a.jsxs("svg",{className:"w-full h-full",style:{opacity:e},viewBox:"0 0 40 30",preserveAspectRatio:"xMidYMid slice",children:[a.jsx("defs",{children:a.jsx("pattern",{id:t,x:"0",y:"0",width:"40",height:"30",patternUnits:"userSpaceOnUse",children:a.jsx("path",{d:n[t],fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-gray-400 dark:text-gray-600"})})}),a.jsx("rect",{width:"100%",height:"100%",fill:`url(#${t})`})]})})}const V2={};function H2(t,e){let s;try{s=t()}catch{return}return{getItem:r=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=s.getItem(r))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,i)=>s.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>s.removeItem(r)}}const lr=t=>e=>{try{const s=t(e);return s instanceof Promise?s:{then(n){return lr(n)(s)},catch(n){return this}}}catch(s){return{then(n){return this},catch(n){return lr(n)(s)}}}},z2=(t,e)=>(s,n,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...e},o=!1;const l=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...b)},n,r);const h=lr(i.serialize),m=()=>{const b=i.partialize({...n()});let y;const v=h({state:b,version:i.version}).then(N=>d.setItem(i.name,N)).catch(N=>{y=N});if(y)throw y;return v},u=r.setState;r.setState=(b,y)=>{u(b,y),m()};const g=t((...b)=>{s(...b),m()},n,r);let f;const p=()=>{var b;if(!d)return;o=!1,l.forEach(v=>v(n()));const y=((b=i.onRehydrateStorage)==null?void 0:b.call(i,n()))||void 0;return lr(d.getItem.bind(d))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var N;return f=i.merge(v,(N=n())!=null?N:g),s(f,!0),m()}).then(()=>{y==null||y(f,void 0),o=!0,c.forEach(v=>v(f))}).catch(v=>{y==null||y(void 0,v)})};return r.persist={setOptions:b=>{i={...i,...b},b.getStorage&&(d=b.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},p(),f||g},U2=(t,e)=>(s,n,r)=>{let i={storage:H2(()=>localStorage),partialize:p=>p,version:0,merge:(p,b)=>({...b,...p}),...e},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...p)},n,r);const h=()=>{const p=i.partialize({...n()});return d.setItem(i.name,{state:p,version:i.version})},m=r.setState;r.setState=(p,b)=>{m(p,b),h()};const u=t((...p)=>{s(...p),h()},n,r);r.getInitialState=()=>u;let g;const f=()=>{var p,b;if(!d)return;o=!1,l.forEach(v=>{var N;return v((N=n())!=null?N:u)});const y=((b=i.onRehydrateStorage)==null?void 0:b.call(i,(p=n())!=null?p:u))||void 0;return lr(d.getItem.bind(d))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var N;const[S,C]=v;if(g=i.merge(C,(N=n())!=null?N:u),s(g,!0),S)return h()}).then(()=>{y==null||y(g,void 0),g=n(),o=!0,c.forEach(v=>v(g))}).catch(v=>{y==null||y(void 0,v)})};return r.persist={setOptions:p=>{i={...i,...p},p.storage&&(d=p.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:p=>(l.add(p),()=>{l.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},i.skipHydration||f(),g||u},W2=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((V2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),z2(t,e)):U2(t,e),fm=W2,Xs=Sl()(fm(t=>({birthInfo:null,setBirthInfo:e=>t({birthInfo:e}),clearBirthInfo:()=>t({birthInfo:null})}),{name:"saju-settings"})),xm=["갑","을","병","정","무","기","경","신","임","계"],pm={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수",인:"목",묘:"목",사:"화",오:"화",진:"토",술:"토",축:"토",미:"토",유:"금",자:"수",해:"수"},Yr={생:{목:"화",화:"토",토:"금",금:"수",수:"목"},극:{목:"토",화:"금",토:"수",금:"목",수:"화"}},Cn={excellent:{level:"excellent",label:"대길",color:"#10b981",icon:"🌟"},good:{level:"good",label:"길함",color:"#22c55e",icon:"✨"},normal:{level:"normal",label:"보통",color:"#f59e0b",icon:"⭐"},caution:{level:"caution",label:"주의",color:"#f97316",icon:"⚠️"},bad:{level:"bad",label:"흉함",color:"#ef4444",icon:"🚨"}},bd=["#4f46e5","#059669","#dc2626","#7c3aed","#ea580c","#0891b2"],yd=[1,3,5,7,9,11,13,17,19,21,23,29];function Y2(t){const e=new Date(1900,0,1),r=(Math.floor((t.getTime()-e.getTime())/(1e3*60*60*24))+36)%60%10;return xm[r]}function bm(t){return t>=85?Cn.excellent:t>=70?Cn.good:t>=50?Cn.normal:t>=30?Cn.caution:Cn.bad}function G2(t,e){return t===e?75:Yr.생[t]===e?85:Yr.생[e]===t?90:Yr.극[t]===e?45:Yr.극[e]===t?35:60}function K2(t){const e=(t.year-4)%10,s=xm[e];return pm[s]||"목"}function q2(t,e,s){const n=bm(t),i={excellent:["오늘은 모든 일이 순조롭게 풀리는 대길한 날입니다. 새로운 도전을 시작하기에 좋습니다.","행운의 기운이 가득한 하루입니다. 중요한 결정을 내리기에 최적의 시기입니다.","긍정적인 에너지가 충만한 날입니다. 주변 사람들과의 관계도 더욱 좋아질 것입니다."],good:["전반적으로 좋은 흐름을 타는 하루입니다. 계획했던 일들을 추진해보세요.","운세가 상승하는 시기입니다. 적극적인 자세로 임하면 좋은 결과가 있을 것입니다.","안정적이고 평화로운 하루가 될 것입니다. 차분한 마음으로 일을 처리하세요."],normal:["무난한 하루가 예상됩니다. 평소보다 신중하게 행동하는 것이 좋겠습니다.","큰 변화보다는 현재 상황을 유지하는 것이 바람직한 시기입니다.","조급해하지 말고 차근차근 진행하면 좋은 결과를 얻을 수 있습니다."],caution:["조심스럽게 행동하는 것이 필요한 하루입니다. 성급한 판단은 피하세요.","작은 일도 꼼꼼히 확인하고 진행하는 것이 좋겠습니다.","어려움이 있더라도 포기하지 말고 꾸준히 노력하세요."],bad:["오늘은 새로운 일을 시작하기보다는 기존 일을 정리하는 것이 좋겠습니다.","주변 사람들과의 갈등을 피하고 조화를 이루도록 노력하세요.","힘든 시기이지만 이또한 지나갈 것입니다. 긍정적인 마음을 유지하세요."]}[n.level],o=Math.floor(Math.random()*i.length);return i[o]}function J2(t,e=new Date){const s=K2(t),n=Y2(e),r=pm[n]||"목",i=G2(s,r),o=e.getDate(),l=e.getMonth()+1,c=e.getFullYear(),d=(t.year+t.month+t.day+t.hour)%100,h=Math.min(100,Math.max(0,i+(o+d)%31-15)),m=Math.min(100,Math.max(0,i+(l+d)%31-15)),u=Math.min(100,Math.max(0,i+(c+d)%31-15)),g=Math.min(100,Math.max(0,i+(o*l+d)%31-15)),f=Math.min(100,Math.max(0,i+(o+l+d)%31-15)),p=Math.min(100,Math.max(0,i+(c+o+d)%31-15)),b=(o+d)%bd.length,y=(l+d)%yd.length;return{date:V(e,"yyyy-MM-dd"),totalLuck:h,loveLuck:m,wealthLuck:u,healthLuck:g,careerLuck:f,studyLuck:p,message:q2(h),luckyColor:bd[b],luckyNumber:yd[y],advice:`오늘의 기운: ${s}행이 ${r}행과 만나는 날입니다.`}}function ym(t){return bm(t)}const X2=t=>t.toISOString().split("T")[0],Q2=(t,e)=>!t||!e?!1:t.year===e.year&&t.month===e.month&&t.day===e.day&&t.hour===e.hour&&t.minute===e.minute&&t.isLunar===e.isLunar&&t.gender===e.gender,vm=Sl()(fm((t,e)=>({dailyFortune:null,lastCalculatedDate:null,lastBirthInfo:null,calculateFortune:(s,n)=>{const r=e(),i=X2(n);if(r.lastCalculatedDate===i&&Q2(r.lastBirthInfo,s)&&r.dailyFortune)return r.dailyFortune;try{const o=J2(s,n);return t({dailyFortune:o,lastCalculatedDate:i,lastBirthInfo:s}),o}catch(o){return console.error("[FortuneStore] 운세 계산 실패:",o),null}},clearCache:()=>{t({dailyFortune:null,lastCalculatedDate:null,lastBirthInfo:null})}}),{name:"fortune-storage",partialize:t=>({dailyFortune:t.dailyFortune,lastCalculatedDate:t.lastCalculatedDate,lastBirthInfo:t.lastBirthInfo})})),Z2=({date:t,compact:e=!1})=>{const{birthInfo:s}=Xs(),{calculateFortune:n}=vm(),r=j.useMemo(()=>s?n(s,t):null,[s,t,n]);if(!r||!s)return null;const i=ym(r.totalLuck);return e?a.jsxs("div",{className:"absolute bottom-1 right-1 flex items-center gap-0.5",children:[a.jsx("span",{className:"text-xs",title:`오늘의 운세: ${i.label} (${Math.round(r.totalLuck)}%)`,children:r.totalLuck>=80?"🌟":r.totalLuck>=60?"⭐":r.totalLuck>=40?"☆":"⚪"}),a.jsx("div",{className:"w-12 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${r.totalLuck}%`,backgroundColor:i.color}})})]}):a.jsxs("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold",children:"일간 운세"}),a.jsx("span",{className:"text-lg",children:i.icon||"🔮"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-bold",style:{color:i.color},children:[Math.round(r.totalLuck),"%"]}),a.jsx("div",{className:"text-xs",style:{color:i.color},children:i.label})]})]}),a.jsxs("div",{className:"grid grid-cols-5 gap-1 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"연애"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.loveLuck),"%"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"재물"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.wealthLuck),"%"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"건강"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.healthLuck),"%"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"직업"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.careerLuck),"%"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"학업"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.studyLuck),"%"]})]})]}),!e&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300",style:{backgroundColor:r.luckyColor},title:`행운의 색: ${r.luckyColor}`}),a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"색상"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-bold",children:r.luckyNumber}),a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"숫자"})]})]}),!e&&r.message&&a.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 italic",children:["💡 ",r.message]})]})};var te={KOREAN_LUNAR_MIN_VALUE:10000101,KOREAN_LUNAR_MAX_VALUE:20501118,KOREAN_SOLAR_MIN_VALUE:10000213,KOREAN_SOLAR_MAX_VALUE:20501231,KOREAN_LUNAR_BASE_YEAR:1e3,SOLAR_LUNAR_DAY_DIFF:43,LUNAR_SMALL_MONTH_DAY:29,LUNAR_BIG_MONTH_DAY:30,SOLAR_SMALL_YEAR_DAY:365,SOLAR_BIG_YEAR_DAY:366,SOLAR_DAYS:[31,28,31,30,31,30,31,31,30,31,30,31,29],KOREAN_CHEONGAN:[44049,51012,48337,51221,47924,44592,44221,49888,51076,44228].map(function(t){return String.fromCharCode(t)}),KOREAN_GANJI:[51088,52629,51064,47896,51652,49324,50724,48120,49888,50976,49696,54644].map(function(t){return String.fromCharCode(t)}),KOREAN_GAPJA_UNIT:[45380,50900,51068].map(function(t){return String.fromCharCode(t)}),CHINESE_CHEONGAN:[30002,20057,19993,19969,25098,24049,24218,36763,22764,30328].map(function(t){return String.fromCharCode(t)}),CHINESE_GANJI:[23376,19985,23493,21359,36784,24051,21320,26410,30003,37193,25100,20133].map(function(t){return String.fromCharCode(t)}),CHINESE_GAPJA_UNIT:[24180,26376,26085].map(function(t){return String.fromCharCode(t)}),INTERCALATION_STR:[50980,38287].map(function(t){return String.fromCharCode(t)}),KOREAN_LUNAR_DATA:[2194016855,2197734699,2193886506,2194017621,3271595437,2193884522,2194016621,2197837021,3267626157,2193885773,2197827149,2193885990,3271600982,2194016981,2193883994,2197842298,3267758427,2193884315,2197834395,2193885771,3271674533,2193884842,2194016981,2197852893,3267625653,2194016599,2197705902,2194017431,3267626571,2197759306,2194017705,2197857974,3267757677,2193883758,2197907758,2193885486,3267628182,2197835157,2193886538,2197867881,3267627864,2194148715,2197918315,2193883741,3267627307,2197838507,2193885845,2193886026,3271696043,2193883861,2197927258,2194015419,3267625563,2197845303,2193884459,2193884821,3271571285,2193884842,2198063797,2193883765,3267626166,2197850718,2193885782,2193886502,3271581350,2194017621,2193884586,2197822826,3267758445,2197861551,2193884317,2193885773,3271589165,2193885862,2194017109,2197833173,3267625818,2194016605,2197885299,2193884251,3271596623,2193884747,2193885861,2197842793,3267757749,2193883866,2197826230,2194016567,3271476375,2194017431,2193884747,2197718698,3267759525,2193884596,2198030957,2193883822,3267628641,2197826862,2193886358,2197855565,2193886538,2194017637,2197906837,2194015581,3267625581,2197826141,2193885483,2197858967,3267627669,2193886026,2197850970,2194016981,3267757403,2197832375,2193884247,2193884459,3271564587,2193884821,2197853997,2193884586,3267758773,2197837037,2193884342,2194016855,3271504974,2193886502,2197929618,2194017621,3267626410,2197850554,2194016621,2193884334,3271576221,2193885773,2193886501,2197827365,3267627860,2198056297,2193883866,2194016605,3271648411,2193884315,2193885771,2197834571,3267626661,2197863251,2193884852,2194016950,3271657814,2194016663,2193884311,2197833367,3267626315,2197735077,2194017701,2193884588,3271797429,2193883758,2193885486,2197843118,3267628182,2193886538,2197827402,2194017621,3271603563,2194015579,2193883741,2197846333,3267627303,2193885845,2197904661,2193886026,3267758933,2197885653,2194015451,2197721694,3267758679,2193884459,2197842603,2193884821,3267626666,2197830570,2194016949,2197861559,3267626158,2194016855,2197714222,2193886502,3267759763,2197837525,2193884586,2194016693,3271566701,2193884334,2197924429,2193885773,3267628326,2197843301,2193886034,2194017642,3271567066,2194016605,2197931165,2193884315,3267627595,2197850795,2193884837,2193886036,3271576500,2194016950,2194016603,2197824823,3267626135,2197853775,2193884491,2193884837,3271653061,2193884588,2194016950,2197895278,3267627310,2197867671,2193886358,2193886538,3271593386,2194017109,2193884522,2197969627,3267625565,2193885486,2197826859,2193885845,3271597389,2193885994,2194017109,2197845365,3267626202,2194016859,2197833047,2193884459,3271674515,2193884819,2193884842,2197850842,3267758821,2193884342,2197834414,2194016855,3267626279,2197759270,2194017875,2197857995,3267626410,2194015661,2197906605,2193884334,3267627598,2197835085,2193886502,2197863763,3267627858,2194017130,2197919082,2194015575,3267626141,2197903899,2193885771,2193885861,3271564965,2193886034,2197863258,2194016950,3267758427,2197841079,2193884311,2193884747,3271571275,2193884837,2197862067,2193884588,3267758774,2197914285,2193884318,2193885773,3271581003,2193885989,2193886034,2197892690,3267758938,2197858654,2194016603,2193884315,3271584343,2193885771,2193885861,2197834661,3267626708,2197867222,2194016950,2194016567,2197849247,2193884311,2193884747,2197706442,3267759525,2193884586,2197822828,2194016878,3271604527,2193885486,2193886358,2197847381,3267628362,2194017621,2197894485,2193884522,3267758701,2197822045,2193885483,2197850715,3267627669,2193885994,2197904170,2194016981,3267626202,2197822650,2194016855,2197853487,3267626279,2193884819,2197845683,2193884842,3267758773,2197828981,2193884342,2197867111,3267627566,2193886486,2197851798,2193886538,3267759530,2197837290,2194015597,2193884334,3271632989,2193885741,2197859607,2193885861,3267627858,2197847412,2194016986,2194015581,3271570747,2193884251,2193885739,2197887531,3267627685,2197855061,2193884850,2194016982,3271644470,2194016567,2193884247,2197830231,3267626283,2197727910,2194017685,2193884586,3271654060,2194016878,2193884462,2197830830,3267627606,2197863723,2193886506,2194017621,3271595437,2193884522,2194016877,2197837149,3267626283,2193885837,2197827157,2193885994,3271600982,2194016981,2193884378,2197842554,3267758679,2193884443,2197899799,2193884755,3271673513,2193884586,2194016949,2197852861,3267625654,2194016823,2197706030,2193886486,2194017867,2197698386,2194017706,2197927348,3267757421,2193883822,2197846589,2193885741,3267628309,2197835157,2193886034,2197867369,3267758810,2194015581,2197918299,2193884251,3267627563,2197838507,2193885845,2193886034,3271564970,2194016950,2197865819,2194015415,3267626071,2197845303,2193884459,2193884821,3271640725,2193884586,2197867189,2194016878,3267626158,2197850718,2193885782,2193886506,3271585450,2194017621,2193884522,2197891418,3267758429,2197861551,2193884315,2193885773,3271589165,2193885994,2194017109,2197833173,3267625690,2194016603,2197885271,2193884315,3271596623,2193884747,2193884841,2197842666,3267757749,2193883830,2197826222,2194016567,3271537814,2193886358,2194017867,2197714610,3267759530,2194015661,2197828461,2193883758,3267627310,2197826861,2193886357,2197855565,3267627850,2194017129,2197906778,2194015579,3267625565,2197826139,2193885483,2197858967,3267626645,2193885002,2197850970,2194016950,3267757371,2197832375,2193883735,2193884459,3271564587,2193884821,2197853869,2193884586,3267758773,2197837037,2193884334,2194016855,3271504974,2193886506,2197929364,2194017109,2193884522,2197846394,2194016605,2193884334,3271576219,2193885773,2193886501,2197887658,3267758933,2197853549,2193883866,2194016603,3271578807,2193884311,2193885771,2197834571,3267626665,2197867221,2194015669,2193883830,3271592286,2194016559,2193884311,2197702294,3267628362,2197868197,2194017641,2194015597,3271664309,2193883758,2193885486,2197843117,3267628181,2193886538,2197827402,2194017113,3271607661,2194015579,2193883741,2197846331,3267627307,2193885845,2197904149,2193884874,3267758805,2197885622,2194015419,2197852767,3267625559,2193884459,2197711530,2194017941,3267626666,2197830570,2194016949,2197861559,3267626158,2194016855,2197714221,2193886502,3267759509,2197837269,2193884522,2194016621,3271566685,2193884334,2197858895,2193885773,3267628325,2197843305,2194017109,2193883994,3271568058,2194016603,2197931163,2193884311,3267627595,2197850923,2193884837,2193884884,3271772853,2193883830,2194016567,2197824815,3267626135,2197722702,2193886538,2194017957,3271648937,2194015597,2193883830,2197895262,3267627310,2197863575,2193885845,2193886538,3271593386,2194017101,2194015595,2197832411,3267625565,2193885485,2197826859,2193885845,3271596877,2193884842,2194016981,2197841269,3267757243,2193883739,2197894231,2193884459,3271539348,2194017941,2193884842,2197850842,3267758517,2193884342,2197834414,2194016847,3267495206,2197892390,2194017621,2197923241,3267626346,2194016621,2197906589,2193884318,3267627597,2197835085,2193886501,2197863763,3267627860,2194017114,2197915994,2194016603,3267626139,2197834391,2193885771,2193885861,3271564965,2193884884,2197994203,2193883830,3267758391,2197841071,2193884311,2193884747,3271440202,2194017701,2197862069,2194015597,3267625646,2197846334,2193885486,2193886358,3271646485,2193886538,2194017701,2197894485,3267626346,2197846650,2194016861,2193885485,3271584427,2193885845,2193886026,2197834666,3267758805,2193884506,2197891258,2194016859,3271587127,2193884459,2193884819,2197903125,3267626666,2194016981,2197829045,2193884342,3271592542,2193885774,2193886502,2197843622,3267628370,2194017706,2197898858,2194015597,3267626158,2197830301,2193885773,2197847339,3267627813,2193886546,2197904724,2194017114,3267757405,2197828955,2193884315,2197845591,2193885771,2193885861,2197842789,2193884882,3267758810,2197833142,2194016567,2193884311,3271571095,2193884749,2197714602,2194017701,3267626410,2197838572,2194016942,2193885486,3271572782,2193886358,2197916997,2193886538,3267759445,2197906837,2193884522,2194016877,3271574877,2193884461,2193885845,2197896341,3267627850,2197912394,2194016981,2193884506,3271645754,2194016859,2193884459,2197899799,3267626643,2197853867,2193884842,2194016949,3271582965,2193884342,2194016855,2197701934,3267628310,2194017939,2197698386,2194017706,3271652778,2194015597,2193884334,2197903901,3267627565,2193886485,2197835173,2193886034,3271597418,2194016986,2194015581,2197906075,3267626075,2193885739,2197838635,2193885845,3267627858,2197891762,2194016982,2197910870,3267757367,2193884247,2197837399,2193884459,3267626645,2197829525,2193884586,2197858998,3267758701,2193884334,2197842542,2193885782,3267628330,2197839530,2194017621,2193884586,3271572330,2194016877,2197845181,2193884331,3267627661,2197839189,2193885994,2194017109,3271574997,2193884378,2194016605,2197824855,3267626139,2197842583,2193884747,2193884841,2197834666,2194015925,2193883834,2197826230,3267758391,2197710126,2193886486,2194017867,3271448274,2194017705,2194015669,2197828461,3267625646,2193885742,2197827117,2193886357,3271585109,2193886034,2194017129,2197833178,3267757405,2193883741,2197830235,2193885739,3271654027,2193885845,2193886026,2197904170,3267758805,2194015579,2197832375,2193883735,3271595311,2193884459,2193884821,2197841621,3267626410,2194016949,2197833069,2193884334,3267758679,2197763158,2193886506,2197913226,3267759445,2193884586,2197838554,2194016605,3267626158,2197834411,2193885773,2197851435,3267627817,2194017109,2197845365,2193883866,3267758429,2197837015,2193884315,2193885771,3271637579,2193884841,2197850841,2194015925,3267625654,2197903670,2194016567,2193884311,3271444118,2193886794,2197860006,2194017705,3267757485,2197906093,2193883822,2193885486,3271580845,2193886357,2193886538,2197896522,3267758953,2197845370,2194015579,2193883741,3271579995,2193885483,2193885845,2197835157,3267627850,2194017109,2197825237,2194015579,3271582327,2193883735,2193884459,2197707434,3267759765,2193884842,2197830570,2194016949,2197849277,2193884334,2194016855,2197706061,3267628326,2194017685,2197898837,2193884522,3267758509,2197824861,2193884334,2197842523,3267627597,2193886501,2197839273,2194017109,3267626346,2197826266,2194016605,2197845179,3267626139,2193885771,2197838667,2193884841,3267627732,2197965749,2193883830,2194016603,3271566647,2193884311,2197710422,2193886794,3267759781,2197903017,2194015669,2193883830,3271637166,2193885486,2197912717,2193886357,3267628362,2197908874,2194017129,2194015597,3271639643,2193883741,2193885485,2197826859,3267627669,2197847381,2193886026,2194017109,3271644501,2194015451,2193883739,2197895255,3267626283,2197850779,2193884821,2193884842,3271584490,2194016949,2193884342,2197834414,3267758679,2193884455,2197698342,2194017685,3271587509,2193884522,2194016685,2197837021,3267626158,2193885774,2197835085,2193886501,3271593305,2193886036,2194017642,2197907802,3267758427,2193884315,2197834395,2193885771,3271600935,2193884837,2193884884,2197973877,3267625654,2194016603,2197836983,2193884311,3267626571,2197698378,2194017957,2197849817,3267757485,2193883830,2197838190,2193885486,3267628182,2197835413,2193886538,2194017701,3271567189,2193884524,2197977787,2193883741,3267627309,2197839019,2193885845,2193886026,3271637834,2194017109,2197853533,2193884346,3267758683,2197837143,2193884459,2193885845,3271576469,2193884842,2194016981,2197825205,3267626166,2197842542,2194016855,2193884455,3271448230,2194017683,2193884586,2197830506,3267758445,2197861551,2193884334,2193885773,3271650573,2193886501,2193886546,2197839316,3267758954,2194016621,2197824859,2193884315,3271588439,2193885771,2193885989,2197904165,3267626708,2194016986,2197895350]},Pl=function(){function t(){this.solarCalendar={year:0,month:0,day:0},this.lunarCalendar={year:0,month:0,day:0,intercalation:!1},this.gapjaYearInx=[0,0,0],this.gapjaMonthInx=[0,0,1],this.gapjaDayInx=[0,0,2]}return t.prototype.getLunarData=function(e){return te.KOREAN_LUNAR_DATA[e-te.KOREAN_LUNAR_BASE_YEAR]},t.prototype.getLunarIntercalationMonth=function(e){return e>>12&15},t.prototype.getLunarDays=function(e){var s=this.getLunarData(e);return s>>17&511},t.prototype.getLunarDays2=function(e,s,n){var r=0,i=this.getLunarData(e);return n&&this.getLunarIntercalationMonth(i)==s?r=(i>>16&1)>0?te.LUNAR_BIG_MONTH_DAY:te.LUNAR_SMALL_MONTH_DAY:r=(i>>12-s&1)>0?te.LUNAR_BIG_MONTH_DAY:te.LUNAR_SMALL_MONTH_DAY,r},t.prototype.getLunarDaysBeforeBaseYear=function(e){for(var s=0,n=te.KOREAN_LUNAR_BASE_YEAR;n<e+1;n++)s+=this.getLunarDays(n);return s},t.prototype.getLunarDaysBeforeBaseMonth=function(e,s,n){var r=0;if(e>=te.KOREAN_LUNAR_BASE_YEAR&&s>0){for(var i=1;i<s+1;i++)r+=this.getLunarDays2(e,i,!1);if(n){var o=this.getLunarIntercalationMonth(this.getLunarData(e));o>0&&o<s+1&&(r+=this.getLunarDays2(e,o,!0))}}return r},t.prototype.getLunarAbsDays=function(e,s,n,r){var i=0;return i=this.getLunarDaysBeforeBaseYear(e-1)+this.getLunarDaysBeforeBaseMonth(e,s-1,!0)+n,r&&this.getLunarIntercalationMonth(this.getLunarData(e))==s&&(i+=this.getLunarDays2(e,s,!1)),i},t.prototype.isSolarIntercalationYear=function(e){return(e>>30&1)>0},t.prototype.getSolarDays=function(e){var s=0,n=this.getLunarData(e);return s=this.isSolarIntercalationYear(n)?te.SOLAR_BIG_YEAR_DAY:te.SOLAR_SMALL_YEAR_DAY,s},t.prototype.getSolarDays2=function(e,s){var n=0,r=this.getLunarData(e);return s==2&&this.isSolarIntercalationYear(r)?n=te.SOLAR_DAYS[12]:n=te.SOLAR_DAYS[s-1],n},t.prototype.getSolarDayBeforeBaseYear=function(e){for(var s=0,n=te.KOREAN_LUNAR_BASE_YEAR;n<e+1;n++)s+=this.getSolarDays(n);return s},t.prototype.getSolarDaysBeforeBaseMonth=function(e,s){for(var n=0,r=1;r<s+1;r++)n+=this.getSolarDays2(e,r);return n},t.prototype.getSolarAbsDays=function(e,s,n){var r=0;return r=this.getSolarDayBeforeBaseYear(e-1)+this.getSolarDaysBeforeBaseMonth(e,s-1)+n,r-=te.SOLAR_LUNAR_DAY_DIFF,r},t.prototype.setSolarDateByLunarDate=function(e,s,n,r){var i=this.getLunarAbsDays(e,s,n,r),o=0,l=0,c=0;o=i<this.getSolarAbsDays(e+1,1,1)?e:e+1;for(var d=12;d>0;d--){var h=this.getSolarAbsDays(o,d,1);if(i>=h){l=d,c=i-h+1;break}}this.solarCalendar={year:o,month:l,day:c}},t.prototype.setLunarDateBySolarDate=function(e,s,n){var r=this.getSolarAbsDays(e,s,n),i=0,o=0,l=0,c=!1;i=r>=this.getLunarAbsDays(e,1,1,!1)?e:e-1;for(var d=12;d>0;d--){var h=this.getLunarAbsDays(i,d,1,!1);if(r>=h){o=d,this.getLunarIntercalationMonth(this.getLunarData(i))==d&&(c=r>=this.getLunarAbsDays(i,d,1,!0)),l=r-this.getLunarAbsDays(i,o,1,c)+1;break}}this.lunarCalendar={year:i,month:o,day:l,intercalation:c}},t.prototype.checkValidDate=function(e,s,n,r,i){var o=!1,l=n*1e4+r*100+i;if((e?te.KOREAN_LUNAR_MIN_VALUE:te.KOREAN_SOLAR_MIN_VALUE)<=l&&(e?te.KOREAN_LUNAR_MAX_VALUE:te.KOREAN_SOLAR_MAX_VALUE)>=l&&r>0&&r<13&&i>0){var c=e?this.getLunarDays2(n,r,s):this.getSolarDays2(n,r);if(!e&&n==1582&&r==10){if(i>4&&i<15)return!1;c+=10}i<=c&&(o=!0)}return o},t.prototype.setLunarDate=function(e,s,n,r){var i=!1;return this.checkValidDate(!0,r,e,s,n)&&(this.lunarCalendar={year:e,month:s,day:n,intercalation:r&&this.getLunarIntercalationMonth(this.getLunarData(e))==s},this.setSolarDateByLunarDate(e,s,n,r),i=!0),i},t.prototype.setSolarDate=function(e,s,n){var r=!1;return this.checkValidDate(!1,!1,e,s,n)&&(this.solarCalendar={year:e,month:s,day:n},this.setLunarDateBySolarDate(e,s,n),r=!0),r},t.prototype.setGapJa=function(){var e=this.getLunarAbsDays(this.lunarCalendar.year,this.lunarCalendar.month,this.lunarCalendar.day,!!this.lunarCalendar.intercalation);if(e>0){this.gapjaYearInx[0]=(this.lunarCalendar.year+6-te.KOREAN_LUNAR_BASE_YEAR)%te.KOREAN_CHEONGAN.length,this.gapjaYearInx[1]=(this.lunarCalendar.year+0-te.KOREAN_LUNAR_BASE_YEAR)%te.KOREAN_GANJI.length;var s=this.lunarCalendar.month;s+=12*(this.lunarCalendar.year-te.KOREAN_LUNAR_BASE_YEAR),this.gapjaMonthInx[0]=(s+3)%te.KOREAN_CHEONGAN.length,this.gapjaMonthInx[1]=(s+1)%te.KOREAN_GANJI.length,this.gapjaDayInx[0]=(e+4)%te.KOREAN_CHEONGAN.length,this.gapjaDayInx[1]=(e+2)%te.KOREAN_GANJI.length}},t.prototype.getGapJaIndex=function(){return this.setGapJa(),{cheongan:{year:this.gapjaYearInx[0],month:this.gapjaMonthInx[0],day:this.gapjaDayInx[0]},ganji:{year:this.gapjaYearInx[1],month:this.gapjaMonthInx[1],day:this.gapjaDayInx[1]}}},t.prototype.getGapja=function(e){var s=this.getGapJaIndex(),n=e?te.CHINESE_CHEONGAN:te.KOREAN_CHEONGAN,r=e?te.CHINESE_GANJI:te.KOREAN_GANJI,i=e?te.CHINESE_GAPJA_UNIT:te.KOREAN_GAPJA_UNIT,o=e?"".concat(te.INTERCALATION_STR[1]).concat(te.CHINESE_GAPJA_UNIT[1]):"".concat(te.INTERCALATION_STR[0]).concat(te.KOREAN_GAPJA_UNIT[1]);return{year:"".concat(n[s.cheongan.year]).concat(r[s.ganji.year]).concat(i[this.gapjaYearInx[2]]),month:"".concat(n[s.cheongan.month]).concat(r[s.ganji.month]).concat(i[this.gapjaMonthInx[2]]),day:"".concat(n[s.cheongan.day]).concat(r[s.ganji.day]).concat(i[this.gapjaDayInx[2]]),intercalation:this.lunarCalendar.intercalation?o:""}},t.prototype.getKoreanGapja=function(){return this.getGapja()},t.prototype.getChineseGapja=function(){return this.getGapja(!0)},t.prototype.getLunarCalendar=function(){return this.lunarCalendar},t.prototype.getSolarCalendar=function(){return this.solarCalendar},t}();const e1=(t,e,s,n=!1)=>{try{const r=new Pl;r.setLunarDate(t,e,s,n);const i=r.getSolarYear(),o=r.getSolarMonth(),l=r.getSolarDay();return new Date(i||t,(o||e)-1,l||s)}catch(r){return console.error("Error converting lunar to solar:",r),new Date(t,e-1,s)}},t1={입춘:{month:2,day:4},우수:{month:2,day:19},경칩:{month:3,day:6},춘분:{month:3,day:21},청명:{month:4,day:5},곡우:{month:4,day:20},입하:{month:5,day:6},소만:{month:5,day:21},망종:{month:6,day:6},하지:{month:6,day:21},소서:{month:7,day:7},대서:{month:7,day:23},입추:{month:8,day:8},처서:{month:8,day:23},백로:{month:9,day:8},추분:{month:9,day:23},한로:{month:10,day:8},상강:{month:10,day:23},입동:{month:11,day:8},소설:{month:11,day:22},대설:{month:12,day:7},동지:{month:12,day:22},소한:{month:1,day:6},대한:{month:1,day:20}},s1=t=>{const e=t.getMonth()+1,s=t.getDate();for(const[n,r]of Object.entries(t1))if(r.month===e&&r.day===s)return n;return null},n1=["일","월","화","수","목","금","토"];function vd({events:t,onCreateEvent:e,onDateClick:s,onEditEvent:n,onDeleteEvent:r,highlightedEventId:i}){const{currentDate:o,getTodosForDate:l,deleteTodo:c}=lt(),[d,h]=j.useState(null),[m,u]=j.useState(!1),[g,f]=j.useState(new Date),[p,b]=j.useState(null),{diaryDates:y}=Al({viewMode:"month",currentDate:o}),v=j.useMemo(()=>{const E=ar(o),A=ir(o),O=Cr(E,{weekStartsOn:0}),R=_r(A,{weekStartsOn:0});return Mr({start:O,end:R})},[o]),N=j.useMemo(()=>{const E=new Map,A=new Set;return v.forEach(O=>{if(Hc(O,o)){const R=V(O,"yyyy-MM-dd"),T=s1(O);T&&(A.has(T)||(A.add(T),E.set(R,T)))}}),E},[v,o]),S=E=>t.filter(A=>{const O=new Date(A.start_time);return St(O,E)}).slice(0,3),C=j.useMemo(()=>{const E=new Map;return v.forEach(A=>{const O=V(A,"yyyy-MM-dd");E.set(O,l(A))}),E},[v,l]),_=E=>{switch(E){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return"⚪"}},w=(E,A)=>{s?s(E,A):e(E)},k=(E,A)=>{A.stopPropagation(),n(E)},M=E=>{f(E),u(!0)};return a.jsxs("div",{className:"h-full flex flex-col bg-background",children:[a.jsxs("div",{className:"relative grid grid-cols-7 border-b border-border bg-gradient-to-r from-hanbok-white via-white to-hanbok-white",children:[a.jsx($2,{pattern:"clouds",opacity:.05}),n1.map((E,A)=>a.jsxs("div",{className:`
              relative px-2 py-4 text-center font-bold tracking-wider
              ${A===0?"text-hanbok-red":A===6?"text-hanbok-blue":"text-gray-700 dark:text-gray-300"}
              ${A===0||A===6?"text-base":"text-sm"}
              transition-colors duration-200 hover:bg-white/50
            `,children:[a.jsx("span",{className:"relative z-10",children:E}),(A===0||A===6)&&a.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-0.5 bg-current opacity-30 rounded"})]},E))]}),a.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-6 gap-px bg-border",children:v.map(E=>{const A=ap(E),O=Hc(E,o),R=$s(E),T=S(E),D=V(E,"yyyy-MM-dd"),L=C.get(D)||[],F=L.filter(B=>!B.completed),I=L.filter(B=>B.completed),U=N.get(D)||null;return a.jsxs("div",{onClick:B=>w(E,B),onMouseEnter:()=>h(E),onMouseLeave:()=>h(null),className:`
                relative p-2 cursor-pointer transition-all duration-200 group
                bg-background hover:bg-gradient-to-br hover:from-hanbok-white hover:to-white
                ${O?"":"bg-muted/30"}
                ${R?"bg-gradient-to-br from-hanbok-yellow/20 to-yinyang-yang/10 shadow-inner border-2 border-yinyang-yang/30":""}
                ${A===0?"hover:from-hanbok-red/5 hover:to-red-50":""}
                ${A===6?"hover:from-hanbok-blue/5 hover:to-blue-50":""}
                min-h-[120px] border border-gray-100 dark:border-gray-800
              `,children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:`
                        font-bold transition-all duration-200
                        ${R?"bg-gradient-to-br from-yinyang-yang to-hanbok-yellow text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg text-sm":"text-base"}
                        ${O?"":"text-muted-foreground opacity-50"}
                        ${A===0?"text-hanbok-red":""}
                        ${A===6?"text-hanbok-blue":""}
                        group-hover:scale-110
                      `,children:V(E,"d")}),R&&a.jsx("span",{className:"text-xs animate-pulse",children:"✨"})]}),a.jsx("div",{className:"flex flex-col",children:U&&a.jsx("span",{className:"text-[9px] text-hanbok-red font-bold bg-hanbok-red/10 px-1 py-0.5 rounded mt-0.5 truncate",children:U})})]}),O&&a.jsxs("div",{className:"flex items-center gap-1",children:[y.has(V(E,"yyyy-MM-dd"))&&a.jsx("button",{onClick:B=>{B.stopPropagation(),M(E)},className:"p-1 rounded text-xs transition-all hover:scale-110 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:"📖"}),L.length>0&&a.jsxs(a.Fragment,{children:[F.filter(B=>B.priority==="high").length>0&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full",children:F.filter(B=>B.priority==="high").length}),F.filter(B=>B.priority==="medium").length>0&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-yellow-500 rounded-full",children:F.filter(B=>B.priority==="medium").length}),F.filter(B=>B.priority==="low").length>0&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-green-500 rounded-full",children:F.filter(B=>B.priority==="low").length}),I.length>0&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-gray-500 bg-gray-200 rounded-full",children:"✓"})]})]})]}),a.jsxs("div",{className:"space-y-1",children:[T.map(B=>a.jsxs("div",{className:`text-xs p-1 rounded cursor-pointer hover:opacity-80 group flex items-center ${i===B.id?"ring-2 ring-primary animate-pulse":""}`,style:{backgroundColor:`${B.color||"#3b82f6"}20`,color:B.color||"#3b82f6",borderLeft:`2px solid ${B.color||"#3b82f6"}`},onClick:z=>k(B,z),children:[a.jsxs("span",{className:"flex-1 truncate",children:[B.all_day&&a.jsx("span",{className:"font-semibold",children:"종일 "}),!B.all_day&&V(new Date(B.start_time),"HH:mm")," ",B.title]}),r&&a.jsx("button",{onClick:z=>{z.stopPropagation(),confirm(`"${B.title}" 일정을 삭제하시겠습니까?`)&&(r==null||r(B.id))},className:"opacity-50 hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-1 text-lg font-bold",title:"일정 삭제",children:"×"})]},B.id)),t.filter(B=>B.id&&St(new Date(B.start_time),E)).length>3&&a.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:["+",t.filter(B=>B.id&&St(new Date(B.start_time),E)).length-3,"개 더보기"]})]}),O&&a.jsx(Z2,{date:E,compact:!0}),d&&St(d,E)&&L.length>0&&a.jsxs("div",{className:"absolute z-50 top-full left-0 mt-2 w-64 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3",children:[a.jsxs("div",{className:"text-sm font-semibold mb-2 text-gray-800 dark:text-gray-200",children:["할일 목록 (",L.length,"개)"]}),a.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:[L.slice(0,5).map(B=>a.jsxs("div",{className:"flex items-start gap-2 text-xs group",children:[a.jsx("span",{children:_(B.priority)}),a.jsx("span",{className:`flex-1 cursor-pointer hover:underline ${B.completed?"line-through text-gray-500":"text-gray-700 dark:text-gray-300"}`,onClick:z=>{z.stopPropagation(),b(B)},children:B.text}),a.jsx("button",{onClick:z=>{z.stopPropagation(),b(B)},className:"opacity-0 group-hover:opacity-100 text-blue-500 hover:text-blue-700 transition-opacity text-xs",title:"할일 수정",children:"✏️"}),a.jsx("button",{onClick:z=>{z.stopPropagation(),c(B.id)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity",title:"할일 삭제",children:"×"})]},B.id)),L.length>5&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["+",L.length-5,"개 더보기"]})]})]})]},E.toISOString())})}),a.jsx(di,{isOpen:m,onClose:()=>u(!1),date:g,onSave:()=>u(!1)}),a.jsx(Dl,{isOpen:!!p,onClose:()=>b(null),todo:p})]})}function r1({date:t,hour:e,onClose:s,onAddEvent:n,onAddTodo:r}){const[i,o]=j.useState("event"),[l,c]=j.useState(""),[d,h]=j.useState(""),[m,u]=j.useState(e?`${e.toString().padStart(2,"0")}:00`:"09:00"),[g,f]=j.useState(e?`${(e+1).toString().padStart(2,"0")}:00`:"10:00"),[p,b]=j.useState("medium"),[y,v]=j.useState(!!e),N=S=>{if(S.preventDefault(),!!l.trim()){if(i==="event"){const C=new Date(t),[_,w]=m.split(":").map(Number);C.setHours(_,w,0,0);const k=new Date(t),[M,E]=g.split(":").map(Number);k.setHours(M,E,0,0),n({title:l.trim(),description:d.trim()||void 0,start_time:C.toISOString(),end_time:k.toISOString(),all_day:!1,location:void 0,color:"#3b82f6"})}else{const C={text:l.trim(),description:d.trim()||void 0,completed:!1,priority:p,date:V(t,"yyyy-MM-dd"),hasTime:y,startTime:y?m:void 0,endTime:y?g:void 0};r(C)}s()}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[V(t,"M월 d일")," 항목 추가"]}),a.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:a.jsx(hm,{className:"h-5 w-5 text-gray-500"})})]}),a.jsxs("form",{onSubmit:N,className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"추가할 항목"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"itemType",value:"event",checked:i==="event",onChange:S=>o(S.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"📅 일정"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"itemType",value:"todo",checked:i==="todo",onChange:S=>o(S.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"✅ 할일"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:i==="event"?"일정 제목":"할일 내용"}),a.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:i==="event"?"일정 제목을 입력하세요":"할일을 입력하세요",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"설명 (선택사항)"}),a.jsx("textarea",{value:d,onChange:S=>h(S.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white resize-none",placeholder:"추가 설명을 입력하세요"})]}),i==="todo"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"우선순위"}),a.jsxs("select",{value:p,onChange:S=>b(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"high",children:"🔴 높음"}),a.jsx("option",{value:"medium",children:"🟡 보통"}),a.jsx("option",{value:"low",children:"🟢 낮음"})]})]}),a.jsxs("div",{children:[i==="todo"&&a.jsx("div",{className:"mb-3",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y,onChange:S=>v(S.target.checked),className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"시간 지정"})]})}),(i==="event"||y)&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"시작 시간"}),a.jsx("input",{type:"time",value:m,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:i==="event"?"종료 시간":"종료 시간 (선택)"}),a.jsx("input",{type:"time",value:g,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:i==="event"})]})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"취소"}),a.jsx("button",{type:"submit",disabled:!l.trim(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i==="event"?"일정 추가":"할일 추가"})]})]})]})})}const ns={event:{background:"#3b82f620",border:"#3b82f6",text:"#3b82f6"},todo:{high:{background:"#ef444420",border:"#ef4444",text:"#ef4444"},medium:{background:"#f59e0b20",border:"#f59e0b",text:"#f59e0b"},low:{background:"#10b98120",border:"#10b981",text:"#10b981"}}},jd=Array.from({length:11},(t,e)=>e+9);function a1({events:t,onCreateEvent:e,onDateClick:s,onEditEvent:n,onDeleteEvent:r,highlightedEventId:i}){const{currentDate:o,getTodosForDate:l,addTodo:c,deleteTodo:d,toggleTodo:h}=lt(),[m,u]=j.useState(!1),[g,f]=j.useState(new Date),[p,b]=j.useState(),[y,v]=j.useState(!1),[N,S]=j.useState(new Date),[C,_]=j.useState(null),{diaryDates:w}=Al({viewMode:"week",currentDate:o}),k=j.useMemo(()=>{const I=Cr(o,{weekStartsOn:0}),U=_r(o,{weekStartsOn:0});return Mr({start:I,end:U})},[o]),M=I=>{switch(I){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return""}},E=I=>{S(I),v(!0)},A=(I,U)=>!t||t.length===0?[]:t.filter(B=>{if(!B.start_time)return!1;try{const z=new Date(B.start_time);if(isNaN(z.getTime()))return!1;const K=Co(z);return St(z,I)&&K===U}catch{return!1}}),O=(I,U)=>l(I).filter(z=>{if(!z.hasTime||!z.startTime)return!1;try{const[K]=z.startTime.split(":").map(Number);return K===U}catch{return!1}}),R=I=>l(I).filter(B=>!B.hasTime||!B.startTime),T=new Date().getHours(),D=new Date().getMinutes(),L=(T*60+D)/(24*60)*100,F=j.useMemo(()=>{const I=new Map;return k.forEach(U=>{const B=V(U,"yyyy-MM-dd"),z=t.filter(K=>{if(!K.all_day||!K.start_time)return!1;try{const W=new Date(K.start_time);return isNaN(W.getTime())?!1:St(W,U)}catch{return!1}});I.set(B,z)}),I},[t,k]);return a.jsxs("div",{className:"h-full flex flex-col bg-background",children:[a.jsxs("div",{className:"grid grid-cols-8 border-b border-border bg-muted sticky top-0 z-10",children:[a.jsx("div",{className:"p-3 text-center text-sm font-semibold text-muted-foreground",children:"시간"}),k.map(I=>{const U=I.getDay(),B=$s(I);return a.jsxs("div",{className:`
                p-3 text-center border-l border-border
                ${B?"bg-primary/10":""}
              `,children:[a.jsx("div",{className:`text-xs font-medium ${U===0?"text-red-600":U===6?"text-blue-600":"text-muted-foreground"}`,children:V(I,"EEE",{locale:ye})}),a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx("div",{className:`text-lg font-semibold ${B?"text-primary":"text-foreground"}`,children:V(I,"d")}),w.has(V(I,"yyyy-MM-dd"))&&a.jsx("button",{onClick:()=>E(I),className:"p-1 rounded-full text-xs transition-all hover:scale-110 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:"📖"})]})]},I.toISOString())})]}),Array.from(F.values()).some(I=>I.length>0)&&a.jsxs("div",{className:"grid grid-cols-8 border-b border-border bg-muted/30",children:[a.jsx("div",{className:"p-2 text-center text-xs font-semibold text-muted-foreground border-r border-border",children:"종일"}),k.map(I=>{const U=V(I,"yyyy-MM-dd"),B=F.get(U)||[];return a.jsx("div",{className:"p-1 border-l border-border",children:B.map(z=>a.jsxs("div",{className:"text-xs p-1 mb-1 rounded truncate cursor-pointer hover:opacity-80 group flex items-center justify-between",style:{backgroundColor:ns.event.background,color:ns.event.text,borderLeft:`2px solid ${ns.event.border}`},onClick:K=>{K.stopPropagation(),n(z)},children:[a.jsx("span",{className:"truncate",children:z.title}),r&&a.jsx("button",{onClick:K=>{K.stopPropagation(),confirm(`"${z.title}" 일정을 삭제하시겠습니까?`)&&r(z.id)},className:"opacity-60 hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-1 flex-shrink-0 text-sm font-bold",title:"일정 삭제",children:"×"})]},z.id))},`allday-${I.toISOString()}`)})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs("div",{className:"relative",children:[k.some(I=>$s(I))&&a.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${L}%`},children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-16"}),a.jsx("div",{className:"flex-1 h-0.5 bg-red-500"}),a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full -ml-1"})]})}),a.jsxs("div",{className:"grid grid-cols-8",children:[a.jsx("div",{className:"border-r border-border",children:jd.map(I=>a.jsx("div",{className:"h-16 px-2 py-1 text-xs text-muted-foreground text-right",children:V(new Date().setHours(I,0,0,0),"HH:mm")},I))}),k.map(I=>{const U=$s(I);return a.jsx("div",{className:"border-r border-border",children:jd.map(B=>{const z=A(I,B),K=O(I,B);return a.jsxs("div",{className:`
                          h-16 border-b border-border/50 p-1 cursor-pointer
                          hover:bg-muted/50 transition-colors
                          ${U&&T===B?"bg-primary/10":""}
                        `,onClick:W=>{s?s(I,W):(f(new Date(I)),b(B),u(!0))},children:[z.map(W=>{if(!W.id||!W.start_time||!W.title)return null;try{const H=new Date(W.start_time);return isNaN(H.getTime())?null:a.jsxs("div",{className:"text-xs p-1 mb-1 rounded truncate cursor-pointer hover:opacity-80 group flex items-center justify-between",style:{backgroundColor:ns.event.background,color:ns.event.text,borderLeft:`2px solid ${ns.event.border}`},onClick:Y=>{Y.stopPropagation(),n(W)},children:[a.jsxs("span",{className:"truncate",children:[V(H,"HH:mm")," ",W.title]}),r&&a.jsx("button",{onClick:Y=>{Y.stopPropagation(),confirm(`"${W.title}" 일정을 삭제하시겠습니까?`)&&r(W.id)},className:"opacity-60 hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-1 flex-shrink-0 text-sm font-bold",title:"일정 삭제",children:"×"})]},W.id)}catch{return null}}),K.map(W=>{const H=ns.todo[W.priority];return a.jsxs("div",{className:"text-xs p-1 mb-1 rounded truncate cursor-pointer hover:opacity-80 flex items-center space-x-1",style:{backgroundColor:H.background,color:H.text,borderLeft:`2px solid ${H.border}`},onClick:Y=>{Y.stopPropagation()},children:[a.jsx("button",{onClick:Y=>{Y.stopPropagation(),h(W.id)},className:`
                                w-2 h-2 rounded-full border flex items-center justify-center text-xs
                                ${W.completed?"bg-green-500 border-green-500 text-white":"border-orange-400"}
                              `,children:W.completed&&"✓"}),a.jsx("span",{className:"text-xs",children:M(W.priority)}),a.jsxs("span",{className:`flex-1 ${W.completed?"line-through opacity-60":""}`,children:[W.startTime," ",W.text]})]},W.id)})]},`${I.toISOString()}-${B}`)})},I.toISOString())})]}),a.jsx("div",{className:"mt-4 border-t border-border",children:a.jsxs("div",{className:"grid grid-cols-8 bg-border gap-px",children:[a.jsx("div",{className:"bg-muted p-3 text-center text-sm font-semibold text-muted-foreground",children:"할일"}),k.map(I=>{const U=R(I),B=$s(I);return a.jsxs("div",{className:`
                    bg-background p-3 min-h-[120px]
                    ${B?"bg-primary/5":""}
                  `,children:[w.has(V(I,"yyyy-MM-dd"))&&a.jsx("div",{className:"mb-2 flex items-center",children:a.jsxs("button",{onClick:()=>E(I),className:"p-1 rounded text-xs transition-all hover:scale-105 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:["📖 ",a.jsx("span",{className:"ml-1 text-xs",children:"일기"})]})}),a.jsx("div",{className:"space-y-1 mb-2",children:U.map(z=>a.jsxs("div",{className:"flex items-center space-x-1 group",children:[a.jsx("button",{onClick:()=>h(z.id),className:`
                            w-3 h-3 rounded-full border flex items-center justify-center text-xs
                            ${z.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600"}
                          `,children:z.completed&&"✓"}),a.jsx("span",{className:"text-xs",children:M(z.priority)}),a.jsx("span",{className:`
                            flex-1 text-xs truncate cursor-pointer hover:underline
                            ${z.completed?"line-through text-gray-500":"text-gray-800 dark:text-gray-200"}
                          `,onClick:()=>_(z),children:z.text}),a.jsx("button",{onClick:()=>_(z),className:"opacity-0 group-hover:opacity-100 text-blue-500 hover:text-blue-700 text-xs",title:"수정",children:"✏️"}),a.jsx("button",{onClick:()=>d(z.id),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 text-xs",children:"×"})]},z.id))})]},`todos-${I.toISOString()}`)})]})})]})}),m&&a.jsx(r1,{date:g,hour:p,onClose:()=>u(!1),onAddEvent:I=>{e(new Date(I.start_time)),u(!1)},onAddTodo:I=>{c(I),u(!1)}}),a.jsx(di,{isOpen:y,onClose:()=>v(!1),date:N,onSave:()=>v(!1)}),a.jsx(Dl,{isOpen:!!C,onClose:()=>_(null),todo:C})]})}const kd=({label:t,score:e,icon:s,description:n})=>{const r=ym(e),i=Math.round(e);return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all hover:scale-105 border border-border/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:s}),a.jsx("h3",{className:"text-xl font-bold text-foreground",children:t})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold",style:{color:r.color},children:[i,"%"]}),a.jsx("div",{className:"text-sm font-medium",style:{color:r.color},children:r.label})]})]}),a.jsx("div",{className:"w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${i}%`,backgroundColor:r.color,boxShadow:`0 0 10px ${r.color}40`}})}),n&&a.jsx("p",{className:"text-sm text-muted-foreground mt-3 italic",children:n})]})},i1=()=>a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-8 flex items-center gap-3",children:[a.jsx("span",{className:"animate-pulse",children:"✨"}),"오늘의 운세"]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 flex-1",children:[1,2,3,4,5].map(t=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 animate-pulse",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),a.jsx("div",{className:"w-24 h-6 bg-muted rounded"})]}),a.jsx("div",{className:"w-16 h-8 bg-muted rounded"})]}),a.jsx("div",{className:"w-full h-4 bg-muted rounded-full"})]},t))})]}),o1=()=>{const t=He(),{user:e}=Xt();return a.jsx("div",{className:"h-full flex flex-col items-center justify-center",children:a.jsxs("div",{className:"max-w-md text-center",children:[a.jsx("div",{className:"text-6xl mb-6",children:"🔮"}),a.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"운세를 확인하려면 설정이 필요합니다"}),a.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"생년월일시 정보를 입력하여 맞춤 운세를 받아보세요"}),a.jsx("button",{onClick:()=>{t("/settings")},className:"px-8 py-4 bg-primary-500 text-white text-lg font-semibold rounded-xl hover:bg-primary-600 transition-colors shadow-lg",children:"설정하러 가기"}),e&&a.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[a.jsxs("p",{children:["로그인된 계정: ",e.email]}),a.jsx("p",{className:"text-xs mt-1",children:"설정 페이지에서 생년월일시를 입력하면 자동으로 운세가 계산됩니다"})]})]})})},wd={총운:"하루 전반적인 운의 흐름을 나타냅니다",연애운:"사랑과 인간관계의 조화를 보여줍니다",재물운:"금전적 이득과 재산 증식의 기회를 알려줍니다",건강운:"신체와 정신의 건강 상태를 나타냅니다",직업운:"업무 성과와 경력 발전 가능성을 보여줍니다"},l1=({currentDate:t,onDiaryClick:e,hasDiary:s})=>{const{birthInfo:n,setBirthInfo:r}=Xs(),{user:i}=Xt();Sr.useEffect(()=>{if(!n){const d=localStorage.getItem("sajuapp-personal-info");if(d)try{const h=JSON.parse(d);if(h.birthDate&&h.birthTime){const m=new Date(h.birthDate),[u,g]=h.birthTime.split(":").map(Number),f={year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate(),hour:u||0,minute:g||0,isLunar:h.calendarType==="lunar",isMale:h.gender==="male",name:h.gender==="male"?"사용자(남)":"사용자(여)"};r(f)}}catch(h){console.error("[TodayFortuneSection] localStorage 파싱 오류:",h)}}},[n,r]);const{calculateFortune:o}=vm(),l=j.useMemo(()=>n?o(n,t):null,[n,t,o]);if(!n)return a.jsx(o1,{});if(!l)return a.jsx(i1,{});const c=[{label:"총운",score:l.totalLuck,icon:"🌟"},{label:"연애운",score:l.loveLuck,icon:"💕"},{label:"재물운",score:l.wealthLuck,icon:"💰"},{label:"건강운",score:l.healthLuck,icon:"🏥"},{label:"직업운",score:l.careerLuck,icon:"💼"}];return a.jsxs("div",{className:"h-full flex flex-col p-2",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-4xl font-bold text-foreground mb-2 flex items-center gap-3",children:[a.jsx("span",{className:"text-yellow-500",children:"✨"}),"오늘의 운세"]}),a.jsx("p",{className:"text-lg text-muted-foreground",children:"당신의 사주명리로 풀어보는 오늘 하루"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6 flex-1",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(kd,{label:c[0].label,score:c[0].score,icon:c[0].icon,description:wd[c[0].label]})}),c.slice(1).map(d=>a.jsx(kd,{label:d.label,score:d.score,icon:d.icon,description:wd[d.label]},d.label))]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 rounded-2xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"오늘의 행운 아이템"}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full shadow-lg flex items-center justify-center bg-white dark:bg-gray-800",children:a.jsx("div",{className:"w-12 h-12 rounded-full",style:{backgroundColor:l.luckyColor},title:"행운의 색상"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"행운의 색상"}),a.jsx("div",{className:"font-bold text-lg",children:l.luckyColor})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 text-white rounded-full flex items-center justify-center text-2xl font-bold shadow-lg",children:l.luckyNumber}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"행운의 숫자"}),a.jsxs("div",{className:"font-bold text-lg",children:["숫자 ",l.luckyNumber]})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl p-6 shadow-lg",children:[a.jsxs("h3",{className:"text-xl font-bold text-foreground mb-3 flex items-center gap-2",children:[a.jsx("span",{children:"💌"}),"오늘의 메시지"]}),a.jsx("p",{className:"text-lg text-foreground leading-relaxed mb-3",children:l.message}),l.advice&&a.jsxs("p",{className:"text-sm text-muted-foreground italic border-t border-border/30 pt-3",children:["💡 ",l.advice]})]})]})]})},c1=Array.from({length:10},(t,e)=>e+9);function d1({events:t,onCreateEvent:e,onEditEvent:s,onDeleteEvent:n}){const{currentDate:r,getTodosForDate:i,deleteTodo:o,toggleTodo:l}=lt(),[c,d]=j.useState(!1),[h,m]=j.useState(null),u=j.useMemo(()=>i(r),[r,i]),g=k=>{switch(k){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return"🟡"}},f=j.useMemo(()=>u.filter(k=>k.hasTime&&k.startTime),[u]),p=j.useMemo(()=>u.filter(k=>!k.hasTime||!k.startTime),[u]),b=j.useMemo(()=>t.filter(k=>{const M=new Date(k.start_time);return St(M,r)}).sort((k,M)=>new Date(k.start_time).getTime()-new Date(M.start_time).getTime()),[t,r]),y=b.filter(k=>k.all_day),v=b.filter(k=>!k.all_day),N=new Date().getHours(),S=new Date().getMinutes(),_=N>=9&&N<=18?((N-9)*60+S)/(10*60)*100:-1,w=k=>{const M=new Date(k.start_time),E=new Date(k.end_time),A=Co(M),O=Co(E),R=Math.max((A-9)*60+zc(M),0),T=Math.min((O-9)*60+zc(E),10*60),D=R/(10*60)*100,L=(T-R)/(10*60)*100;return{top:`${D}%`,height:`${Math.max(L,2)}%`}};return a.jsxs("div",{className:"h-full flex flex-col lg:flex-row bg-background",children:[a.jsxs("div",{className:"lg:w-1/2 w-full lg:border-r border-b lg:border-b-0 border-border p-6 overflow-auto bg-gradient-to-br from-background to-muted/20 h-1/2 lg:h-full",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-foreground mb-1",children:V(r,"yyyy년 M월 d일",{locale:ye})}),a.jsx("p",{className:"text-xl text-muted-foreground",children:V(r,"EEEE",{locale:ye})})]}),a.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-gradient-to-r from-primary-500/10 to-primary-600/10 border border-primary-500/20",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"빠른 작성"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("button",{onClick:()=>{const k=new Date(r);k.setHours(new Date().getHours(),0,0,0),e(k)},className:"px-3 py-2 text-sm bg-blue-500/10 hover:bg-blue-500/20 text-blue-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[a.jsx("span",{children:"📅"})," 일정"]}),a.jsxs("button",{onClick:()=>{const k=new Date(r);k.setHours(new Date().getHours(),0,0,0),e(k)},className:"px-3 py-2 text-sm bg-amber-500/10 hover:bg-amber-500/20 text-amber-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[a.jsx("span",{children:"✅"})," 할일"]}),a.jsxs("button",{onClick:()=>d(!0),className:"px-3 py-2 text-sm bg-purple-500/10 hover:bg-purple-500/20 text-purple-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[a.jsx("span",{children:"📖"})," 일기"]})]})]}),a.jsx("div",{className:"h-full flex flex-col",children:a.jsx(l1,{currentDate:r})})]}),a.jsxs("div",{className:"lg:w-1/2 w-full overflow-auto h-1/2 lg:h-full",children:[y.length>0&&a.jsxs("div",{className:"p-4 border-b border-border bg-muted/30",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"종일 일정"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(k=>a.jsxs("div",{className:"group inline-flex items-center px-3 py-1 rounded-full text-sm cursor-pointer hover:opacity-80 transition-opacity",style:{backgroundColor:k.color||"#3b82f6",color:"white"},onClick:()=>s(k),title:k.description||k.title,children:[a.jsx("span",{children:k.title}),n&&a.jsx("button",{onClick:M=>{M.stopPropagation(),confirm(`"${k.title}" 일정을 삭제하시겠습니까?`)&&n(k.id)},className:"opacity-0 group-hover:opacity-100 ml-2 hover:text-red-200 transition-opacity",title:"일정 삭제",children:"×"})]},k.id))})]}),a.jsxs("div",{className:"relative min-h-full",children:[St(r,new Date)&&_>=0&&a.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${_}%`},children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-20"}),a.jsx("div",{className:"flex-1 h-0.5 bg-red-500"}),a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full -ml-1.5"})]})}),a.jsxs("div",{className:"relative",children:[c1.map(k=>a.jsxs("div",{className:"flex border-b border-border/30",style:{height:"100px"},children:[a.jsx("div",{className:"w-20 px-4 py-3 text-muted-foreground text-right",children:a.jsx("div",{className:"text-xl font-semibold",children:V(new Date().setHours(k,0,0,0),"HH:mm")})}),a.jsxs("div",{className:"flex-1 relative cursor-pointer hover:bg-muted/20 transition-colors group",onClick:()=>{const M=new Date(r);M.setHours(k,0,0,0),e(M)},title:`${k}:00에 일정 추가`,children:[a.jsx("div",{className:"absolute top-1/2 left-0 right-0 border-t border-border/15"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-500/20 flex items-center justify-center",children:a.jsx("span",{className:"text-primary-600 text-lg",children:"+"})})})]})]},k)),a.jsxs("div",{className:"absolute top-0 left-20 right-0 bottom-0",children:[v.map(k=>{const M=w(k);return a.jsx("div",{className:"absolute left-4 right-1/2 p-4 rounded-xl cursor-pointer hover:shadow-lg transition-all hover:scale-[1.02] mr-2 group",style:{...M,backgroundColor:`${k.color||"#3b82f6"}15`,borderLeft:`4px solid ${k.color||"#3b82f6"}`,border:`1px solid ${k.color||"#3b82f6"}30`},onClick:()=>s(k),children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"text-sm font-semibold mb-1",style:{color:k.color||"#3b82f6"},children:[V(new Date(k.start_time),"HH:mm")," - ",V(new Date(k.end_time),"HH:mm")]}),a.jsx("div",{className:"font-semibold text-foreground text-lg mb-1",children:k.title}),k.description&&a.jsx("div",{className:"text-sm text-muted-foreground",children:k.description}),k.location&&a.jsxs("div",{className:"text-sm text-muted-foreground mt-2 flex items-center gap-1",children:[a.jsx("span",{children:"📍"})," ",k.location]})]}),n&&a.jsx("button",{onClick:E=>{E.stopPropagation(),confirm(`"${k.title}" 일정을 삭제하시겠습니까?`)&&n(k.id)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-2 text-lg",title:"일정 삭제",children:"×"})]})},k.id)}),f.map(k=>{const[M,E]=(k.startTime||"09:00").split(":").map(Number);new Date(r).setHours(M,E,0,0);const O=Math.max(((M-9)*60+E)/(10*60)*100,0);return a.jsx("div",{className:"absolute left-1/2 right-4 p-3 rounded-lg cursor-pointer hover:shadow-md transition-all ml-2",style:{top:`${O}%`,height:"40px",backgroundColor:k.completed?"#10b98115":"#fbbf2415",borderLeft:`3px solid ${k.completed?"#10b981":"#fbbf24"}`,opacity:k.completed?.7:1},onClick:()=>l(k.id),children:a.jsxs("div",{className:"flex items-center justify-between h-full",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:k.completed,onChange:()=>l(k.id),className:"w-4 h-4",onClick:R=>R.stopPropagation()}),a.jsx("span",{className:"text-sm font-medium",children:g(k.priority)}),a.jsx("span",{className:`text-sm ${k.completed?"line-through text-muted-foreground":""}`,children:k.text}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",k.startTime,")"]})]}),a.jsx("button",{onClick:R=>{R.stopPropagation(),o(k.id)},className:"text-red-500 hover:text-red-700 text-sm px-2",children:"✕"})]})},k.id)})]})]})]}),p.length>0&&a.jsxs("div",{className:"p-4 border-t border-border bg-muted/10",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"시간 미지정 할일"}),a.jsx("div",{className:"space-y-2",children:p.map(k=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background border border-border hover:shadow-sm transition-all",style:{opacity:k.completed?.6:1},children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("input",{type:"checkbox",checked:k.completed,onChange:()=>l(k.id),className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:g(k.priority)}),a.jsx("span",{className:`text-sm flex-1 cursor-pointer hover:underline ${k.completed?"line-through text-muted-foreground":""}`,onClick:()=>m(k),children:k.text})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>m(k),className:"text-blue-500 hover:text-blue-700 text-sm px-2 py-1",children:"수정"}),a.jsx("button",{onClick:()=>o(k.id),className:"text-red-500 hover:text-red-700 text-sm px-2 py-1",children:"삭제"})]})]},k.id))})]})]}),a.jsx(di,{isOpen:c,onClose:()=>d(!1),date:r,onSave:()=>{d(!1)}}),a.jsx(Dl,{isOpen:!!h,onClose:()=>m(null),todo:h})]})}const jm=j.createContext(void 0),h1=()=>{const t=j.useContext(jm);if(!t)throw new Error("useYearlyMemo must be used within a YearlyMemoProvider");return t},u1=({children:t})=>{const[e,s]=j.useState([]);j.useEffect(()=>{const h=localStorage.getItem("yearlyMemos");if(h)try{const u=JSON.parse(h).map(g=>({...g,createdAt:new Date(g.createdAt),updatedAt:new Date(g.updatedAt)}));s(u)}catch(m){console.error("Failed to load memos from localStorage:",m)}},[]),j.useEffect(()=>{e.length>0&&localStorage.setItem("yearlyMemos",JSON.stringify(e))},[e]);const n=h=>{const m={...h,id:`memo-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date};s(u=>[...u,m])},r=(h,m)=>{s(u=>u.map(g=>g.id===h?{...g,...m,updatedAt:new Date}:g))},i=h=>{s(m=>m.filter(u=>u.id!==h))},o=h=>{s(m=>m.map(u=>u.id===h?{...u,completed:!u.completed,updatedAt:new Date}:u))},l=(h,m)=>e.filter(u=>u.year===h&&u.month===m).sort((u,g)=>(u.position||0)-(g.position||0)),d={memos:e,addMemo:n,updateMemo:r,deleteMemo:i,toggleComplete:o,getMemosByMonth:l,getMonthStatistics:(h,m)=>{const u=l(h,m),g=u.reduce((f,p)=>(f[p.type]=(f[p.type]||0)+1,f),{});return{total:u.length,byType:g,completed:u.filter(f=>f.completed).length}}};return a.jsx(jm.Provider,{value:d,children:t})},_n={goal:{icon:"🎯",label:"목표",color:"#9333EA",bgColor:"bg-purple-100 dark:bg-purple-900/30",textColor:"text-purple-600 dark:text-purple-400"},event:{icon:"📅",label:"이벤트",color:"#3B82F6",bgColor:"bg-blue-100 dark:bg-blue-900/30",textColor:"text-blue-600 dark:text-blue-400"},memo:{icon:"📝",label:"메모",color:"#EAB308",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",textColor:"text-yellow-600 dark:text-yellow-400"},milestone:{icon:"🏆",label:"마일스톤",color:"#22C55E",bgColor:"bg-green-100 dark:bg-green-900/30",textColor:"text-green-600 dark:text-green-400"}},m1={high:{icon:"🔴",label:"높음"},medium:{icon:"🟡",label:"보통"},low:{icon:"🟢",label:"낮음"}},g1=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];function f1({_events:t,_onCreateEvent:e,_onEditEvent:s,_onDateClick:n,_highlightedEventId:r}){const{currentDate:i,setCurrentDate:o,setViewMode:l}=lt(),{getMemosByMonth:c,addMemo:d,deleteMemo:h,toggleComplete:m,getMonthStatistics:u}=h1(),{diaries:g}=Al({viewMode:"year",currentDate:i}),f=i.getFullYear(),[p,b]=j.useState(null),[y,v]=j.useState(null),[N,S]=j.useState(null),[C,_]=j.useState("all"),[w,k]=j.useState(""),[M,E]=j.useState(""),[A,O]=j.useState("memo"),[R,T]=j.useState("medium"),[D,L]=j.useState(""),F=z=>{let K=c(f,z);if(C!=="all"&&(K=K.filter(W=>W.type===C)),w){const W=w.toLowerCase();K=K.filter(H=>{var Y;return H.title.toLowerCase().includes(W)||((Y=H.description)==null?void 0:Y.toLowerCase().includes(W))})}return K},I=z=>{if(!M.trim())return;const K=_n[A];d({year:f,month:z,type:A,title:M,description:D,color:K.color,importance:R,completed:!1,position:0}),E(""),L(""),O("memo"),T("medium"),v(null)},U=z=>{if(!g||g.length===0)return 0;const K=String(z).padStart(2,"0"),W=`${f}-${K}`;return g.filter(H=>H.date&&H.date.startsWith(W)).length},B=j.useMemo(()=>{let z=0,K=0;const W={goal:0,event:0,memo:0,milestone:0};for(let H=1;H<=12;H++){const Y=u(f,H);z+=Y.total,K+=Y.completed,Object.entries(Y.byType).forEach(([ee,G])=>{W[ee]+=G})}return{totalMemos:z,completedMemos:K,typeCount:W}},[f,u]);return a.jsx("div",{className:"h-full overflow-auto bg-background p-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:[f,"년 연간 계획"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(D2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"검색...",value:w,onChange:z=>k(z.target.value),className:`pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                           bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100
                           focus:ring-2 focus:ring-purple-500`})]}),a.jsxs("select",{value:C,onChange:z=>_(z.target.value),className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100`,children:[a.jsx("option",{value:"all",children:"모든 타입"}),Object.entries(_n).map(([z,K])=>a.jsxs("option",{value:z,children:[K.icon," ",K.label]},z))]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:B.totalMemos}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전체"})]}),a.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:B.completedMemos}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료"})]}),Object.entries(_n).map(([z,K])=>a.jsxs("div",{className:`text-center p-3 rounded-lg ${K.bgColor}`,children:[a.jsx("div",{className:`text-2xl font-bold ${K.textColor}`,children:B.typeCount[z]||0}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:K.label})]},z))]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g1.map((z,K)=>{const W=K+1,H=F(W),Y=u(f,W),ee=y===W;return a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md 
                         transition-all duration-200 border border-gray-200 dark:border-gray-700`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:z}),a.jsx("button",{onClick:()=>v(ee?null:W),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(T2,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]}),a.jsxs("div",{className:"mt-2 flex gap-2 text-xs",children:[Y.total>0&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[Y.total,"개 항목"]}),Y.completed>0&&a.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[Y.completed,"개 완료"]})]}),U(W)>0&&a.jsxs("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:["📔 ",U(W)]})]})]}),a.jsxs("div",{className:"p-4 space-y-2 max-h-64 overflow-y-auto",children:[ee&&a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg space-y-2",children:[a.jsx("input",{type:"text",placeholder:"제목 입력...",value:M,onChange:G=>E(G.target.value),onKeyPress:G=>G.key==="Enter"&&I(W),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 
                                 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,autoFocus:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{value:A,onChange:G=>O(G.target.value),className:`flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 
                                   rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,children:Object.entries(_n).map(([G,pe])=>a.jsx("option",{value:G,children:pe.label},G))}),a.jsx("select",{value:R,onChange:G=>T(G.target.value),className:`flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 
                                   rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,children:Object.entries(m1).map(([G,pe])=>a.jsx("option",{value:G,children:pe.label},G))})]}),a.jsxs("div",{className:"flex gap-1 justify-end",children:[a.jsx("button",{onClick:()=>I(W),className:"px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:"추가"}),a.jsx("button",{onClick:()=>{v(null),E("")},className:`px-2 py-1 text-xs bg-gray-300 dark:bg-gray-600 text-gray-700 
                                   dark:text-gray-300 rounded hover:bg-gray-400 dark:hover:bg-gray-500`,children:"취소"})]})]}),H.length===0&&!ee?a.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm py-4",children:"메모가 없습니다"}):H.slice(0,5).map(G=>{const pe=_n[G.type];return G.id,a.jsx("div",{className:`p-2 rounded-lg border ${G.completed?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600":`${pe.bgColor} border-gray-200 dark:border-gray-600`} group hover:shadow-sm transition-all`,children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("button",{onClick:()=>m(G.id),className:`mt-0.5 w-4 h-4 rounded border-2 flex items-center justify-center
                                ${G.completed?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-600 hover:border-purple-500"}`,children:G.completed&&a.jsx(k2,{className:"w-3 h-3 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-sm",children:pe.icon}),a.jsx("span",{className:`text-sm font-medium ${G.completed?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:G.title})]}),G.description&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:G.description})]}),a.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>h(G.id),className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",children:a.jsx(L2,{className:"w-3 h-3 text-red-500"})})})]})},G.id)}),H.length>5&&a.jsxs("button",{onClick:()=>{o(new Date(f,K,1)),l("month")},className:`w-full text-center text-xs text-purple-600 dark:text-purple-400 
                               hover:text-purple-700 dark:hover:text-purple-300 py-1`,children:["+",H.length-5,"개 더 보기"]})]})]},W)})})]})})}function x1({isOpen:t,onClose:e,date:s,position:n,onSelectAction:r}){const i=j.useRef(null);if(j.useEffect(()=>{const h=u=>{i.current&&!i.current.contains(u.target)&&e()},m=u=>{u.key==="Escape"&&e()};return t&&(document.addEventListener("mousedown",h),document.addEventListener("keydown",m)),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",m)}},[t,e]),!t)return null;const o={x:Math.min(n.x,window.innerWidth-200),y:Math.min(n.y,window.innerHeight-160)},l=[{type:"event",icon:"📅",label:"일정,할일 추가",description:"새로운 일정과 할일을 만듭니다",color:"text-blue-600 dark:text-blue-400"},{type:"diary",icon:"📝",label:"일기 쓰기",description:"오늘의 일기를 작성합니다",color:"text-purple-600 dark:text-purple-400"}],c=h=>new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(h),d=h=>{r(h),e()};return a.jsx("div",{className:"fixed inset-0 z-50",style:{background:"rgba(0, 0, 0, 0.1)"},children:a.jsxs("div",{ref:i,className:"absolute bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 p-4 min-w-[240px] max-w-[280px]",style:{left:o.x,top:o.y},children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"작업 선택"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-lg",children:"✕"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(s)})]}),a.jsx("div",{className:"space-y-2",children:l.map(h=>a.jsx("button",{onClick:()=>d(h.type),className:"w-full text-left p-3 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-150 group",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("span",{className:"text-xl flex-shrink-0",children:h.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:`text-sm font-medium ${h.color} group-hover:opacity-80`,children:h.label}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]}),a.jsx("div",{className:"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors",children:"→"})]})},h.type))}),a.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-600",children:a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"ESC 키로 닫기"})})]})})}const p1=({className:t})=>a.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),b1=({className:t})=>a.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})});function y1(){const{currentDate:t,setCurrentDate:e,viewMode:s,setViewMode:n,navigatePrevious:r,navigateNext:i,navigateToday:o}=lt(),[l,c]=j.useState([]),[d,h]=j.useState(null),[m,u]=j.useState(!1),[g,f]=j.useState(null),[p,b]=j.useState(""),[y,v]=j.useState([]),[N,S]=j.useState(null),[C,_]=j.useState(!1),[w,k]=j.useState({x:0,y:0}),[M,E]=j.useState(null),[A,O]=j.useState(!1),[R,T]=j.useState(null),D=J=>{T(J),O(!0)};j.useEffect(()=>{L()},[]),j.useEffect(()=>{if(p){const J=l.filter(ge=>{var ss,dt;return ge.title.toLowerCase().includes(p.toLowerCase())||((ss=ge.description)==null?void 0:ss.toLowerCase().includes(p.toLowerCase()))||((dt=ge.location)==null?void 0:dt.toLowerCase().includes(p.toLowerCase()))});v(J)}else v(l)},[p,l]);const L=async()=>{try{const J=await Tt.getEvents();c(J)}catch(J){console.error("Failed to load events:",J)}},F=J=>{f(J||null),h(null),u(!0)},I=J=>{h(J),u(!0)},U=J=>{L()},B=async J=>{try{await Tt.deleteEvent(J),L()}catch(ge){console.error("Failed to delete event:",ge)}},z=()=>{u(!1),h(null),f(null)},K=(J,ge)=>{E(J),k({x:ge.clientX,y:ge.clientY}),_(!0)},W=J=>{if(M){switch(J){case"event":f(M),h(null),u(!0);break;case"diary":T(M),O(!0);break}_(!1)}},H=()=>{_(!1),E(null)},Y=()=>{O(!1),T(null)},ee=()=>{if(y.length===0||!p)return;const J=y[0],ge=new Date(J.start_time);e(ge),s==="year"&&n("month"),S(J.id||null),setTimeout(()=>{S(null)},3e3)},G=J=>{J.key==="Enter"?ee():J.key==="Escape"&&(b(""),S(null))},pe=()=>{const J={events:p?y:l,onCreateEvent:F,onDateClick:K,onEditEvent:I,onDeleteEvent:B,highlightedEventId:N,onDiaryClick:D},ge={_events:J.events,_onCreateEvent:J.onCreateEvent,_onDateClick:J.onDateClick,_onEditEvent:J.onEditEvent,_highlightedEventId:J.highlightedEventId};switch(s){case"year":return a.jsx(f1,{...ge});case"month":return a.jsx(vd,{...J});case"week":return a.jsx(a1,{...J});case"day":return a.jsx(d1,{...J});default:return a.jsx(vd,{...J})}},q={year:"년",month:"월",week:"주",day:"일"},Ce=()=>{switch(s){case"year":return V(t,"yyyy년",{locale:ye});case"month":return V(t,"yyyy년 M월",{locale:ye});case"week":return V(t,"yyyy년 M월 w주차",{locale:ye});case"day":return V(t,"yyyy년 M월 d일 EEEE",{locale:ye});default:return""}};return a.jsxs("div",{className:"h-screen flex flex-col",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:Ce()}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["year","month","week","day"].map(J=>a.jsx("button",{onClick:()=>n(J),className:`
                    px-3 py-1 rounded-md text-sm font-medium transition-colors
                    ${s===J?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100"}
                  `,children:q[J]},J))}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(p1,{className:"w-5 h-5"})}),a.jsx("button",{onClick:o,className:"px-3 py-1 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"오늘"}),a.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(b1,{className:"w-5 h-5"})})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex-1 max-w-md relative",children:[a.jsx("input",{type:"text",placeholder:"일정, 할일, 일기 검색...",value:p,onChange:J=>b(J.target.value),onKeyDown:G,className:"w-full px-4 py-2 pl-10 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"}),a.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p&&a.jsx("button",{onClick:()=>b(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.length,"개의 결과"]})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:pe()}),a.jsx(um,{isOpen:m,onClose:z,onSave:U,event:d,initialDate:g||void 0}),a.jsx(x1,{isOpen:C,onClose:H,date:M||new Date,position:w,onSelectAction:W}),a.jsx(di,{isOpen:A,onClose:Y,date:R||new Date})]})}function Nd(){const{date:t}=C0(),e=He(),[s,n]=j.useState(new Date),[r,i]=j.useState(""),[o,l]=j.useState(3),[c,d]=j.useState([]),[h,m]=j.useState(""),[u,g]=j.useState([]),[f,p]=j.useState("");j.useEffect(()=>{t&&n(new Date(t))},[t]);const b={1:{emoji:"😢",label:"매우 나쁨",color:"text-red-500"},2:{emoji:"😕",label:"나쁨",color:"text-orange-500"},3:{emoji:"😐",label:"보통",color:"text-yellow-500"},4:{emoji:"🙂",label:"좋음",color:"text-green-500"},5:{emoji:"😄",label:"매우 좋음",color:"text-blue-500"}},y=()=>{h.trim()&&!c.includes(h.trim())&&(d([...c,h.trim()]),m(""))},v=w=>{d(c.filter(k=>k!==w))},N=()=>{f.trim()&&(g([...u,{id:Date.now().toString(),text:f.trim(),completed:!1}]),p(""))},S=w=>{g(u.map(k=>k.id===w?{...k,completed:!k.completed}:k))},C=w=>{g(u.filter(k=>k.id!==w))},_=()=>{alert("다이어리가 저장되었습니다!")};return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:V(s,"yyyy년 M월 d일",{locale:ye})}),a.jsx("p",{className:"text-muted-foreground",children:V(s,"EEEE",{locale:ye})})]}),a.jsx("input",{type:"date",value:V(s,"yyyy-MM-dd"),onChange:w=>{const k=new Date(w.target.value);n(k),e(`/diary/${V(k,"yyyy-MM-dd")}`)},className:"px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg p-4 bg-muted",children:[a.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"오늘의 운세"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"오늘은 새로운 시작을 하기에 좋은 날입니다. 긍정적인 에너지가 충만한 하루가 될 것입니다."})]})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"오늘의 기분"}),a.jsx("div",{className:"flex justify-around",children:[1,2,3,4,5].map(w=>{const k=b[w];return a.jsxs("button",{onClick:()=>l(w),className:`
                    flex flex-col items-center p-3 rounded-lg transition-all
                    ${o===w?"bg-muted ring-2 ring-primary-500":"hover:bg-muted/50"}
                  `,children:[a.jsx("span",{className:`text-3xl mb-1 ${k.color}`,children:k.emoji}),a.jsx("span",{className:"text-xs text-muted-foreground",children:k.label})]},w)})})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"일기 내용"}),a.jsx("textarea",{value:r,onChange:w=>i(w.target.value),placeholder:"오늘은 어떤 하루였나요?",className:"w-full h-64 p-4 border border-border rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"태그"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:c.map(w=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary/20 text-primary border border-primary/30",children:["#",w,a.jsx("button",{onClick:()=>v(w),className:"ml-2 text-primary hover:text-primary/80",children:"×"})]},w))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:h,onChange:w=>m(w.target.value),onKeyPress:w=>w.key==="Enter"&&y(),placeholder:"태그 추가 (Enter로 추가)",className:"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"}),a.jsx("button",{onClick:y,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"추가"})]})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"오늘의 할일"}),a.jsxs("div",{className:"space-y-3 mb-4",children:[u.map(w=>a.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:w.completed,onChange:()=>S(w.id),className:"w-4 h-4 text-primary rounded border-border focus:ring-primary/50"}),a.jsx("span",{className:`flex-1 ${w.completed?"text-muted-foreground line-through":"text-foreground"}`,children:w.text}),a.jsx("button",{onClick:()=>C(w.id),className:"text-muted-foreground hover:text-red-500 transition-colors",children:"×"})]},w.id)),u.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"할일을 추가해보세요"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:f,onChange:w=>p(w.target.value),onKeyPress:w=>w.key==="Enter"&&N(),placeholder:"할일 추가 (Enter로 추가)",className:"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"}),a.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"추가"})]}),u.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[a.jsx("span",{children:"완료율"}),a.jsxs("span",{children:[u.filter(w=>w.completed).length,"/",u.length," (",Math.round(u.filter(w=>w.completed).length/u.length*100),"%)"]})]}),a.jsx("div",{className:"w-full bg-muted rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${u.length?u.filter(w=>w.completed).length/u.length*100:0}%`}})})]})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"연결된 일정"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"이 날짜에 등록된 캘린더 일정이 여기에 표시됩니다."})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{onClick:()=>e("/diary"),className:"px-6 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors",children:"취소"}),a.jsx("button",{onClick:_,className:"px-6 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"저장"})]})]})})}const km=async()=>{if(!("Notification"in window))return!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="denied")return!1;try{return await Notification.requestPermission()==="granted"}catch(t){return console.error("Failed to request notification permission:",t),!1}},wm=()=>"Notification"in window&&Notification.permission==="granted",Nm=t=>{if(!wm())return null;try{const e=new Notification(t.title,{body:t.body,icon:t.icon||"/favicon.ico",tag:t.tag,badge:t.badge,data:t.data,requireInteraction:t.requireInteraction||!1,silent:t.silent||!1});return t.requireInteraction||setTimeout(()=>{e.close()},5e3),e}catch(e){return console.error("Failed to show notification:",e),null}},v1=(t,e,s,n)=>{const r=Date.now(),o=s.getTime()-r;if(o<=0)return null;const l=24*60*60*1e3;return o>l?null:window.setTimeout(()=>{Nm({title:t,body:e,icon:"/favicon.ico",requireInteraction:!0,...n})},o)},Sm="notification-settings",Rl=()=>{try{const t=localStorage.getItem(Sm);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load notification settings:",t)}return{enabled:!1,eventReminders:!0,diaryReminders:!0,todoDeadlines:!0,reminderMinutes:15}},j1=t=>{try{localStorage.setItem(Sm,JSON.stringify(t))}catch(e){console.error("Failed to save notification settings:",e)}},k1=()=>{const t=Rl();if(!t.enabled||!t.diaryReminders)return null;const e=new Date,s=new Date;return s.setHours(21,0,0,0),e.getHours()>=21&&s.setDate(s.getDate()+1),v1("📝 일기 작성 시간","오늘 하루는 어떠셨나요? 일기를 작성해보세요.",s,{tag:"diary-reminder",data:{type:"diary"},requireInteraction:!1})},w1=async()=>{!Rl().enabled||!await km()||k1()},N1=()=>{Nm({title:"🧭 운명나침반",body:"알림이 정상적으로 작동합니다!",requireInteraction:!1})};function S1(){const[t,e]=j.useState(Rl()),[s,n]=j.useState("default"),[r,i]=j.useState(!1),[o,l]=j.useState(!1);j.useEffect(()=>{"Notification"in window&&n(Notification.permission)},[]);const c=(m,u)=>{const g={...t,[m]:u};e(g),j1(g),l(!0),setTimeout(()=>l(!1),2e3)},d=async()=>{i(!0);try{const m=await km();n(m?"granted":"denied"),m&&c("enabled",!0)}catch(m){console.error("Permission request failed:",m)}finally{i(!1)}},h=()=>{wm()?N1():alert("알림 권한이 필요합니다.")};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:a.jsx(Ri,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"알림 설정"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"일정, 할일, 일기 알림을 관리합니다"})]})]}),o&&a.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 animate-fade-in",children:[a.jsx(Ct,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:"저장됨"})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-lg border",children:s==="granted"?a.jsxs("div",{className:"flex items-center gap-3 text-green-600 dark:text-green-400",children:[a.jsx(Ri,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 승인됨"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"브라우저 알림을 받을 수 있습니다"})]})]}):s==="denied"?a.jsxs("div",{className:"flex items-center gap-3 text-red-600 dark:text-red-400",children:[a.jsx(dv,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 거부됨"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"브라우저 설정에서 알림을 허용해주세요"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 text-yellow-600 dark:text-yellow-400",children:[a.jsx(Ri,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 필요"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"알림을 받으려면 권한을 허용해주세요"})]})]}),a.jsx("button",{onClick:d,disabled:r,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 text-sm font-medium",children:r?"요청 중...":"권한 요청"})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"알림 활성화"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"모든 알림을 활성화/비활성화합니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.enabled,onChange:m=>c("enabled",m.target.checked),disabled:s!=="granted",className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600 peer-disabled:opacity-50"})]})]}),t.enabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"일정 알림"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"예정된 일정 시작 전에 알림을 받습니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.eventReminders,onChange:m=>c("eventReminders",m.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"할일 마감 알림"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"할일 마감 시간 전에 알림을 받습니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.todoDeadlines,onChange:m=>c("todoDeadlines",m.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"일기 작성 리마인더"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"매일 저녁 9시에 일기 작성을 안내합니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.diaryReminders,onChange:m=>c("diaryReminders",m.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"알림 시간"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"일정/할일 시작/마감 몇 분 전에 알림을 받을지 설정합니다"})]}),a.jsxs("select",{value:t.reminderMinutes,onChange:m=>c("reminderMinutes",parseInt(m.target.value)),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:5,children:"5분 전"}),a.jsx("option",{value:10,children:"10분 전"}),a.jsx("option",{value:15,children:"15분 전"}),a.jsx("option",{value:30,children:"30분 전"}),a.jsx("option",{value:60,children:"1시간 전"})]})]})]})]}),t.enabled&&s==="granted"&&a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:a.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm font-medium",children:"📱 테스트 알림 보내기"})})]})}var Qs={},C1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Cm={},Ge={};let Ll;const _1=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ge.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ge.getSymbolTotalCodewords=function(e){return _1[e]};Ge.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Ge.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ll=e};Ge.isKanjiModeEnabled=function(){return typeof Ll<"u"};Ge.toSJIS=function(e){return Ll(e)};var hi={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+s)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,r){if(t.isValid(n))return n;try{return e(n)}catch{return r}}})(hi);function _m(){this.buffer=[],this.length=0}_m.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let s=0;s<e;s++)this.putBit((t>>>e-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var M1=_m;function Pr(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Pr.prototype.set=function(t,e,s,n){const r=t*this.size+e;this.data[r]=s,n&&(this.reservedBit[r]=!0)};Pr.prototype.get=function(t,e){return this.data[t*this.size+e]};Pr.prototype.xor=function(t,e,s){this.data[t*this.size+e]^=s};Pr.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var E1=Pr,Mm={};(function(t){const e=Ge.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const r=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*r-2))*2,l=[i-7];for(let c=1;c<r-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const r=[],i=t.getRowColCoords(n),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||r.push([i[l],i[c]]);return r}})(Mm);var Em={};const T1=Ge.getSymbolSize,Sd=7;Em.getPositions=function(e){const s=T1(e);return[[0,0],[s-Sd,0],[0,s-Sd]]};var Tm={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},t.from=function(r){return t.isValid(r)?parseInt(r,10):void 0},t.getPenaltyN1=function(r){const i=r.size;let o=0,l=0,c=0,d=null,h=null;for(let m=0;m<i;m++){l=c=0,d=h=null;for(let u=0;u<i;u++){let g=r.get(m,u);g===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=g,l=1),g=r.get(u,m),g===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=g,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(r){const i=r.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=r.get(l,c)+r.get(l,c+1)+r.get(l+1,c)+r.get(l+1,c+1);(d===4||d===0)&&o++}return o*e.N2},t.getPenaltyN3=function(r){const i=r.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let h=0;h<i;h++)l=l<<1&2047|r.get(d,h),h>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|r.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(r){let i=0;const o=r.data.length;for(let c=0;c<o;c++)i+=r.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function s(n,r,i){switch(n){case t.Patterns.PATTERN000:return(r+i)%2===0;case t.Patterns.PATTERN001:return r%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(r+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return r*i%2+r*i%3===0;case t.Patterns.PATTERN110:return(r*i%2+r*i%3)%2===0;case t.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(r,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,s(r,c,l))},t.getBestMask=function(r,i){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),t.applyMask(d,r);const h=t.getPenaltyN1(r)+t.getPenaltyN2(r)+t.getPenaltyN3(r)+t.getPenaltyN4(r);t.applyMask(d,r),h<c&&(c=h,l=d)}return l}})(Tm);var ui={};const It=hi,Gr=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Kr=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ui.getBlocksCount=function(e,s){switch(s){case It.L:return Gr[(e-1)*4+0];case It.M:return Gr[(e-1)*4+1];case It.Q:return Gr[(e-1)*4+2];case It.H:return Gr[(e-1)*4+3];default:return}};ui.getTotalCodewordsCount=function(e,s){switch(s){case It.L:return Kr[(e-1)*4+0];case It.M:return Kr[(e-1)*4+1];case It.Q:return Kr[(e-1)*4+2];case It.H:return Kr[(e-1)*4+3];default:return}};var Am={},mi={};const Wn=new Uint8Array(512),La=new Uint8Array(256);(function(){let e=1;for(let s=0;s<255;s++)Wn[s]=e,La[e]=s,e<<=1,e&256&&(e^=285);for(let s=255;s<512;s++)Wn[s]=Wn[s-255]})();mi.log=function(e){if(e<1)throw new Error("log("+e+")");return La[e]};mi.exp=function(e){return Wn[e]};mi.mul=function(e,s){return e===0||s===0?0:Wn[La[e]+La[s]]};(function(t){const e=mi;t.mul=function(n,r){const i=new Uint8Array(n.length+r.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<r.length;l++)i[o+l]^=e.mul(n[o],r[l]);return i},t.mod=function(n,r){let i=new Uint8Array(n);for(;i.length-r.length>=0;){const o=i[0];for(let c=0;c<r.length;c++)i[c]^=e.mul(r[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},t.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let i=0;i<n;i++)r=t.mul(r,new Uint8Array([1,e.exp(i)]));return r}})(Am);const Dm=Am;function Ol(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ol.prototype.initialize=function(e){this.degree=e,this.genPoly=Dm.generateECPolynomial(this.degree)};Ol.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(e.length+this.degree);s.set(e);const n=Dm.mod(s,this.genPoly),r=this.degree-n.length;if(r>0){const i=new Uint8Array(this.degree);return i.set(n,r),i}return n};var A1=Ol,Pm={},Qt={},Il={};Il.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var yt={};const Rm="[0-9]+",D1="[A-Z $%*+\\-./:]+";let cr="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";cr=cr.replace(/u/g,"\\u");const P1="(?:(?![A-Z0-9 $%*+\\-./:]|"+cr+`)(?:.|[\r
]))+`;yt.KANJI=new RegExp(cr,"g");yt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");yt.BYTE=new RegExp(P1,"g");yt.NUMERIC=new RegExp(Rm,"g");yt.ALPHANUMERIC=new RegExp(D1,"g");const R1=new RegExp("^"+cr+"$"),L1=new RegExp("^"+Rm+"$"),O1=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");yt.testKanji=function(e){return R1.test(e)};yt.testNumeric=function(e){return L1.test(e)};yt.testAlphanumeric=function(e){return O1.test(e)};(function(t){const e=Il,s=yt;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return s.testNumeric(i)?t.NUMERIC:s.testAlphanumeric(i)?t.ALPHANUMERIC:s.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+r)}}t.from=function(i,o){if(t.isValid(i))return i;try{return n(i)}catch{return o}}})(Qt);(function(t){const e=Ge,s=ui,n=hi,r=Qt,i=Il,o=7973,l=e.getBCHDigit(o);function c(u,g,f){for(let p=1;p<=40;p++)if(g<=t.getCapacity(p,f,u))return p}function d(u,g){return r.getCharCountIndicator(u,g)+4}function h(u,g){let f=0;return u.forEach(function(p){const b=d(p.mode,g);f+=b+p.getBitsLength()}),f}function m(u,g){for(let f=1;f<=40;f++)if(h(u,f)<=t.getCapacity(f,g,r.MIXED))return f}t.from=function(g,f){return i.isValid(g)?parseInt(g,10):f},t.getCapacity=function(g,f,p){if(!i.isValid(g))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=r.BYTE);const b=e.getSymbolTotalCodewords(g),y=s.getTotalCodewordsCount(g,f),v=(b-y)*8;if(p===r.MIXED)return v;const N=v-d(p,g);switch(p){case r.NUMERIC:return Math.floor(N/10*3);case r.ALPHANUMERIC:return Math.floor(N/11*2);case r.KANJI:return Math.floor(N/13);case r.BYTE:default:return Math.floor(N/8)}},t.getBestVersionForData=function(g,f){let p;const b=n.from(f,n.M);if(Array.isArray(g)){if(g.length>1)return m(g,b);if(g.length===0)return 1;p=g[0]}else p=g;return c(p.mode,p.getLength(),b)},t.getEncodedBits=function(g){if(!i.isValid(g)||g<7)throw new Error("Invalid QR Code version");let f=g<<12;for(;e.getBCHDigit(f)-l>=0;)f^=o<<e.getBCHDigit(f)-l;return g<<12|f}})(Pm);var Lm={};const Lo=Ge,Om=1335,I1=21522,Cd=Lo.getBCHDigit(Om);Lm.getEncodedBits=function(e,s){const n=e.bit<<3|s;let r=n<<10;for(;Lo.getBCHDigit(r)-Cd>=0;)r^=Om<<Lo.getBCHDigit(r)-Cd;return(n<<10|r)^I1};var Im={};const F1=Qt;function Zs(t){this.mode=F1.NUMERIC,this.data=t.toString()}Zs.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Zs.prototype.getLength=function(){return this.data.length};Zs.prototype.getBitsLength=function(){return Zs.getBitsLength(this.data.length)};Zs.prototype.write=function(e){let s,n,r;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),r=parseInt(n,10),e.put(r,10);const i=this.data.length-s;i>0&&(n=this.data.substr(s),r=parseInt(n,10),e.put(r,i*3+1))};var B1=Zs;const $1=Qt,Li=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function en(t){this.mode=$1.ALPHANUMERIC,this.data=t}en.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};en.prototype.getLength=function(){return this.data.length};en.prototype.getBitsLength=function(){return en.getBitsLength(this.data.length)};en.prototype.write=function(e){let s;for(s=0;s+2<=this.data.length;s+=2){let n=Li.indexOf(this.data[s])*45;n+=Li.indexOf(this.data[s+1]),e.put(n,11)}this.data.length%2&&e.put(Li.indexOf(this.data[s]),6)};var V1=en;const H1=Qt;function tn(t){this.mode=H1.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}tn.getBitsLength=function(e){return e*8};tn.prototype.getLength=function(){return this.data.length};tn.prototype.getBitsLength=function(){return tn.getBitsLength(this.data.length)};tn.prototype.write=function(t){for(let e=0,s=this.data.length;e<s;e++)t.put(this.data[e],8)};var z1=tn;const U1=Qt,W1=Ge;function sn(t){this.mode=U1.KANJI,this.data=t}sn.getBitsLength=function(e){return e*13};sn.prototype.getLength=function(){return this.data.length};sn.prototype.getBitsLength=function(){return sn.getBitsLength(this.data.length)};sn.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let s=W1.toSJIS(this.data[e]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),t.put(s,13)}};var Y1=sn,Fm={exports:{}};(function(t){var e={single_source_shortest_paths:function(s,n,r){var i={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,d,h,m,u,g,f,p,b;!l.empty();){c=l.pop(),d=c.value,m=c.cost,u=s[d]||{};for(h in u)u.hasOwnProperty(h)&&(g=u[h],f=m+g,p=o[h],b=typeof o[h]>"u",(b||p>f)&&(o[h]=f,l.push(h,f),i[h]=d))}if(typeof r<"u"&&typeof o[r]>"u"){var y=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(y)}return i},extract_shortest_path_from_predecessor_list:function(s,n){for(var r=[],i=n;i;)r.push(i),s[i],i=s[i];return r.reverse(),r},find_path:function(s,n,r){var i=e.single_source_shortest_paths(s,n,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(s){var n=e.PriorityQueue,r={},i;s=s||{};for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r.queue=[],r.sorter=s.sorter||n.default_sorter,r},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var r={value:s,cost:n};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Fm);var G1=Fm.exports;(function(t){const e=Qt,s=B1,n=V1,r=z1,i=Y1,o=yt,l=Ge,c=G1;function d(y){return unescape(encodeURIComponent(y)).length}function h(y,v,N){const S=[];let C;for(;(C=y.exec(N))!==null;)S.push({data:C[0],index:C.index,mode:v,length:C[0].length});return S}function m(y){const v=h(o.NUMERIC,e.NUMERIC,y),N=h(o.ALPHANUMERIC,e.ALPHANUMERIC,y);let S,C;return l.isKanjiModeEnabled()?(S=h(o.BYTE,e.BYTE,y),C=h(o.KANJI,e.KANJI,y)):(S=h(o.BYTE_KANJI,e.BYTE,y),C=[]),v.concat(N,S,C).sort(function(w,k){return w.index-k.index}).map(function(w){return{data:w.data,mode:w.mode,length:w.length}})}function u(y,v){switch(v){case e.NUMERIC:return s.getBitsLength(y);case e.ALPHANUMERIC:return n.getBitsLength(y);case e.KANJI:return i.getBitsLength(y);case e.BYTE:return r.getBitsLength(y)}}function g(y){return y.reduce(function(v,N){const S=v.length-1>=0?v[v.length-1]:null;return S&&S.mode===N.mode?(v[v.length-1].data+=N.data,v):(v.push(N),v)},[])}function f(y){const v=[];for(let N=0;N<y.length;N++){const S=y[N];switch(S.mode){case e.NUMERIC:v.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:v.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:v.push([S,{data:S.data,mode:e.BYTE,length:d(S.data)}]);break;case e.BYTE:v.push([{data:S.data,mode:e.BYTE,length:d(S.data)}])}}return v}function p(y,v){const N={},S={start:{}};let C=["start"];for(let _=0;_<y.length;_++){const w=y[_],k=[];for(let M=0;M<w.length;M++){const E=w[M],A=""+_+M;k.push(A),N[A]={node:E,lastCount:0},S[A]={};for(let O=0;O<C.length;O++){const R=C[O];N[R]&&N[R].node.mode===E.mode?(S[R][A]=u(N[R].lastCount+E.length,E.mode)-u(N[R].lastCount,E.mode),N[R].lastCount+=E.length):(N[R]&&(N[R].lastCount=E.length),S[R][A]=u(E.length,E.mode)+4+e.getCharCountIndicator(E.mode,v))}}C=k}for(let _=0;_<C.length;_++)S[C[_]].end=0;return{map:S,table:N}}function b(y,v){let N;const S=e.getBestModeForData(y);if(N=e.from(v,S),N!==e.BYTE&&N.bit<S.bit)throw new Error('"'+y+'" cannot be encoded with mode '+e.toString(N)+`.
 Suggested mode is: `+e.toString(S));switch(N===e.KANJI&&!l.isKanjiModeEnabled()&&(N=e.BYTE),N){case e.NUMERIC:return new s(y);case e.ALPHANUMERIC:return new n(y);case e.KANJI:return new i(y);case e.BYTE:return new r(y)}}t.fromArray=function(v){return v.reduce(function(N,S){return typeof S=="string"?N.push(b(S,null)):S.data&&N.push(b(S.data,S.mode)),N},[])},t.fromString=function(v,N){const S=m(v,l.isKanjiModeEnabled()),C=f(S),_=p(C,N),w=c.find_path(_.map,"start","end"),k=[];for(let M=1;M<w.length-1;M++)k.push(_.table[w[M]].node);return t.fromArray(g(k))},t.rawSplit=function(v){return t.fromArray(m(v,l.isKanjiModeEnabled()))}})(Im);const gi=Ge,Oi=hi,K1=M1,q1=E1,J1=Mm,X1=Em,Oo=Tm,Io=ui,Q1=A1,Oa=Pm,Z1=Lm,ej=Qt,Ii=Im;function tj(t,e){const s=t.size,n=X1.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],o=n[r][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||s<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||s<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(i+l,o+c,!0,!0):t.set(i+l,o+c,!1,!0))}}function sj(t){const e=t.size;for(let s=8;s<e-8;s++){const n=s%2===0;t.set(s,6,n,!0),t.set(6,s,n,!0)}}function nj(t,e){const s=J1.getPositions(e);for(let n=0;n<s.length;n++){const r=s[n][0],i=s[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(r+o,i+l,!0,!0):t.set(r+o,i+l,!1,!0)}}function rj(t,e){const s=t.size,n=Oa.getEncodedBits(e);let r,i,o;for(let l=0;l<18;l++)r=Math.floor(l/3),i=l%3+s-8-3,o=(n>>l&1)===1,t.set(r,i,o,!0),t.set(i,r,o,!0)}function Fi(t,e,s){const n=t.size,r=Z1.getEncodedBits(e,s);let i,o;for(i=0;i<15;i++)o=(r>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(n-15+i,8,o,!0),i<8?t.set(8,n-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(n-8,8,1,!0)}function aj(t,e){const s=t.size;let n=-1,r=s-1,i=7,o=0;for(let l=s-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(r,l-c)){let d=!1;o<e.length&&(d=(e[o]>>>i&1)===1),t.set(r,l-c,d),i--,i===-1&&(o++,i=7)}if(r+=n,r<0||s<=r){r-=n,n=-n;break}}}function ij(t,e,s){const n=new K1;s.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),ej.getCharCountIndicator(c.mode,t)),c.write(n)});const r=gi.getSymbolTotalCodewords(t),i=Io.getTotalCodewordsCount(t,e),o=(r-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return oj(n,t,e)}function oj(t,e,s){const n=gi.getSymbolTotalCodewords(e),r=Io.getTotalCodewordsCount(e,s),i=n-r,o=Io.getBlocksCount(e,s),l=n%o,c=o-l,d=Math.floor(n/o),h=Math.floor(i/o),m=h+1,u=d-h,g=new Q1(u);let f=0;const p=new Array(o),b=new Array(o);let y=0;const v=new Uint8Array(t.buffer);for(let w=0;w<o;w++){const k=w<c?h:m;p[w]=v.slice(f,f+k),b[w]=g.encode(p[w]),f+=k,y=Math.max(y,k)}const N=new Uint8Array(n);let S=0,C,_;for(C=0;C<y;C++)for(_=0;_<o;_++)C<p[_].length&&(N[S++]=p[_][C]);for(C=0;C<u;C++)for(_=0;_<o;_++)N[S++]=b[_][C];return N}function lj(t,e,s,n){let r;if(Array.isArray(t))r=Ii.fromArray(t);else if(typeof t=="string"){let d=e;if(!d){const h=Ii.rawSplit(t);d=Oa.getBestVersionForData(h,s)}r=Ii.fromString(t,d||40)}else throw new Error("Invalid data");const i=Oa.getBestVersionForData(r,s);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=ij(e,s,r),l=gi.getSymbolSize(e),c=new q1(l);return tj(c,e),sj(c),nj(c,e),Fi(c,s,0),e>=7&&rj(c,e),aj(c,o),isNaN(n)&&(n=Oo.getBestMask(c,Fi.bind(null,c,s))),Oo.applyMask(n,c),Fi(c,s,n),{modules:c,version:e,errorCorrectionLevel:s,maskPattern:n,segments:r}}Cm.create=function(e,s){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Oi.M,r,i;return typeof s<"u"&&(n=Oi.from(s.errorCorrectionLevel,Oi.M),r=Oa.from(s.version),i=Oo.from(s.maskPattern),s.toSJISFunc&&gi.setToSJISFunction(s.toSJISFunc)),lj(e,r,n,i)};var Bm={},Fl={};(function(t){function e(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const r=parseInt(n.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const r=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:r,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,r){return r.width&&r.width>=n+r.margin*2?r.width/(n+r.margin*2):r.scale},t.getImageWidth=function(n,r){const i=t.getScale(n,r);return Math.floor((n+r.margin*2)*i)},t.qrToImageData=function(n,r,i){const o=r.modules.size,l=r.modules.data,c=t.getScale(o,i),d=Math.floor((o+i.margin*2)*c),h=i.margin*c,m=[i.color.light,i.color.dark];for(let u=0;u<d;u++)for(let g=0;g<d;g++){let f=(u*d+g)*4,p=i.color.light;if(u>=h&&g>=h&&u<d-h&&g<d-h){const b=Math.floor((u-h)/c),y=Math.floor((g-h)/c);p=m[l[b*o+y]?1:0]}n[f++]=p.r,n[f++]=p.g,n[f++]=p.b,n[f]=p.a}}})(Fl);(function(t){const e=Fl;function s(r,i,o){r.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=n()),c=e.getOptions(c);const h=e.getImageWidth(i.modules.size,c),m=d.getContext("2d"),u=m.createImageData(h,h);return e.qrToImageData(u.data,i,c),s(m,d,h),m.putImageData(u,0,0),d},t.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=t.render(i,o,c),h=c.type||"image/png",m=c.rendererOpts||{};return d.toDataURL(h,m.quality)}})(Bm);var $m={};const cj=Fl;function _d(t,e){const s=t.a/255,n=e+'="'+t.hex+'"';return s<1?n+" "+e+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function Bi(t,e,s){let n=t+e;return typeof s<"u"&&(n+=" "+s),n}function dj(t,e,s){let n="",r=0,i=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),d=Math.floor(l/e);!c&&!i&&(i=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=i?Bi("M",c+s,.5+d+s):Bi("m",r,0),r=0,i=!1),c+1<e&&t[l+1]||(n+=Bi("h",o),o=0)):r++}return n}$m.render=function(e,s,n){const r=cj.getOptions(s),i=e.modules.size,o=e.modules.data,l=i+r.margin*2,c=r.color.light.a?"<path "+_d(r.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+_d(r.color.dark,"stroke")+' d="'+dj(o,i,r.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof n=="function"&&n(null,u),u};const hj=C1,Fo=Cm,Vm=Bm,uj=$m;function Bl(t,e,s,n,r){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!hj())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(r=s,s=e,e=n=void 0):o===3&&(e.getContext&&typeof r>"u"?(r=n,n=void 0):(r=n,n=s,s=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(s=e,e=n=void 0):o===2&&!e.getContext&&(n=s,s=e,e=void 0),new Promise(function(c,d){try{const h=Fo.create(s,n);c(t(h,e,n))}catch(h){d(h)}})}try{const c=Fo.create(s,n);r(null,t(c,e,n))}catch(c){r(c)}}Qs.create=Fo.create;Qs.toCanvas=Bl.bind(null,Vm.render);Qs.toDataURL=Bl.bind(null,Vm.renderToDataURL);Qs.toString=Bl.bind(null,function(t,e,s){return uj.render(t,s)});var So;let Mn=(So=class{static async generateToCanvas(e,s,n){const r={...this.defaultOptions,...n};try{await Qs.toCanvas(e,s,r)}catch(i){throw console.error("QR코드 생성 실패:",i),new Error("QR코드를 생성할 수 없습니다.")}}static async generateToDataURL(e,s){const n={...this.defaultOptions,...s};try{return await Qs.toDataURL(e,n)}catch(r){throw console.error("QR코드 생성 실패:",r),new Error("QR코드를 생성할 수 없습니다.")}}static async generateToBlob(e,s){const n={...this.defaultOptions,width:400,...s};try{const r=await this.generateToDataURL(e,n);return await(await fetch(r)).blob()}catch(r){throw console.error("QR코드 Blob 생성 실패:",r),new Error("QR코드 파일을 생성할 수 없습니다.")}}static createReferralUrl(e,s){return`${s||window.location.origin}/auth?mode=signup&ref=${e}`}static downloadFile(e,s){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}static async downloadReferralQRCode(e,s){try{const n=this.createReferralUrl(e),r=await this.generateToBlob(n,s),i=`referral-qr-${e}.png`;this.downloadFile(r,i)}catch(n){throw console.error("QR코드 다운로드 실패:",n),n}}static async shareReferralQRCode(e,s){if(!navigator.share)throw new Error("이 브라우저는 공유 기능을 지원하지 않습니다.");try{const n=this.createReferralUrl(e),r=await this.generateToBlob(n,s),i=new File([r],`referral-qr-${e}.png`,{type:"image/png"});await navigator.share({title:"🔮 운명나침반 추천 QR코드",text:`추천인 코드: ${e}
함께 가입하면 특별 혜택을 받을 수 있어요!`,url:n,files:[i]})}catch(n){if(n instanceof Error&&n.name==="AbortError")return;throw console.error("QR코드 공유 실패:",n),new Error("QR코드를 공유할 수 없습니다.")}}},$(So,"defaultOptions",{width:200,margin:2,color:{dark:"#4338CA",light:"#FFFFFF"},errorCorrectionLevel:"M"}),So);const mj=({referralCode:t,className:e=""})=>{const s=j.useRef(null),[n,r]=j.useState(!1),[i,o]=j.useState(null),[l,c]=j.useState("idle"),[d,h]=j.useState("idle");j.useEffect(()=>{if(!t||!s.current)return;(async()=>{r(!0),o(null);try{const f=Mn.createReferralUrl(t);await Mn.generateToCanvas(s.current,f,{width:160,color:{dark:"#667eea",light:"#ffffff"}})}catch(f){o("QR코드를 생성할 수 없습니다."),console.error("QR코드 생성 오류:",f)}finally{r(!1)}})()},[t]);const m=async()=>{if(t){c("downloading");try{await Mn.downloadReferralQRCode(t,{width:400,color:{dark:"#667eea",light:"#ffffff"}}),c("success"),setTimeout(()=>c("idle"),2e3)}catch(g){console.error("다운로드 실패:",g),c("error"),setTimeout(()=>c("idle"),2e3)}}},u=async()=>{if(t){h("sharing");try{if(typeof navigator.share=="function")await Mn.shareReferralQRCode(t,{width:400,color:{dark:"#667eea",light:"#ffffff"}}),h("success");else{const g=Mn.createReferralUrl(t);await navigator.clipboard.writeText(g),h("success")}setTimeout(()=>h("idle"),2e3)}catch(g){console.error("공유 실패:",g),h("error"),setTimeout(()=>h("idle"),2e3)}}};return a.jsx("div",{className:`bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600 rounded-xl p-6 text-white ${e}`,children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center justify-center",children:[a.jsx("span",{className:"mr-2",children:"📱"}),"QR코드로 쉽게 공유하기"]}),a.jsx("div",{className:"inline-block bg-white p-4 rounded-xl shadow-lg mb-4",children:n?a.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-indigo-500 border-t-transparent rounded-full"})}):i?a.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-2xl mb-2",children:"❌"}),a.jsx("div",{className:"text-xs",children:i})]})}):a.jsx("canvas",{ref:s,className:"block",style:{imageRendering:"pixelated"}})}),a.jsx("p",{className:"text-sm opacity-90 mb-4",children:"QR코드를 스캔하면 바로 가입 페이지로 이동해요!"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[a.jsx("button",{onClick:m,disabled:l==="downloading"||n||!!i,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${l==="downloading"?"bg-gray-400 cursor-not-allowed":l==="success"?"bg-green-500 hover:bg-green-600":l==="error"?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"}`,children:l==="downloading"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block mr-2",children:"⏳"}),"다운로드 중..."]}):l==="success"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"✅"}),"다운로드 완료"]}):l==="error"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"❌"}),"다운로드 실패"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"💾"}),"PNG 다운로드"]})}),a.jsx("button",{onClick:u,disabled:d==="sharing"||n||!!i,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${d==="sharing"?"bg-gray-400 cursor-not-allowed":d==="success"?"bg-green-500 hover:bg-green-600":d==="error"?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"}`,children:d==="sharing"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block mr-2",children:"⏳"}),"공유 중..."]}):d==="success"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"✅"}),"공유 완료"]}):d==="error"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"❌"}),"공유 실패"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"🔗"}),typeof navigator.share=="function"?"QR 공유하기":"링크 복사"]})})]}),a.jsx("div",{className:"mt-4 text-xs opacity-75",children:a.jsx("p",{children:"💡 QR코드를 저장해서 오프라인에서도 공유해보세요!"})})]})})},gj=({className:t=""})=>{const{user:e,myReferralCode:s,isGeneratingReferralCode:n,referralStats:r,isLoadingReferralStats:i,error:o,generateMyReferralCode:l,loadReferralStats:c}=Xt(),[d,h]=j.useState("idle"),[m,u]=j.useState(!1);j.useEffect(()=>{e&&!s&&l()},[e,s,l]);const g=async()=>{if(s)try{await navigator.clipboard.writeText(s),h("copied"),setTimeout(()=>h("idle"),2e3)}catch(v){console.error("복사 실패:",v),h("error"),setTimeout(()=>h("idle"),2e3)}},f=async()=>{!m&&(!r||Object.keys(r).length===0)&&(e!=null&&e.id)&&await c(e.id),u(!m)},p=()=>s?`${window.location.origin}/auth?mode=signup&ref=${s}`:"",b=()=>s?`🔮 운명나침반에서 당신의 운명을 확인해보세요!

추천인 코드: ${s}
링크: ${p()}

✨ 함께 가입하면 특별 혜택을 받을 수 있어요!`:"",y=v=>{const N=b(),S=p();switch(v){case"kakao":window.Kakao&&window.Kakao.Share?window.Kakao.Share.sendDefault({objectType:"text",text:N,link:{mobileWebUrl:S,webUrl:S}}):g();break;case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(S)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(N)}`,"_blank");break;case"copy":navigator.clipboard.writeText(N),h("copied"),setTimeout(()=>h("idle"),2e3);break}};return e?a.jsxs("div",{className:`space-y-6 ${t}`,children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎁"}),"내 추천 코드"]}),a.jsxs("button",{onClick:f,className:"text-sm text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 flex items-center space-x-1",children:[a.jsx("span",{children:"실적 보기"}),a.jsx("svg",{className:`w-4 h-4 transition-transform ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full mr-3"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"추천 코드 생성 중..."})]}):s?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700 rounded-lg p-4",children:a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"text-2xl font-mono tracking-widest text-purple-700 dark:text-purple-300",children:s})})}),a.jsx("button",{onClick:g,className:`px-4 py-3 rounded-lg font-medium transition-all duration-200 ${d==="copied"?"bg-green-500 text-white":d==="error"?"bg-red-500 text-white":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:d==="copied"?"✓ 복사됨":d==="error"?"❌ 실패":"📋 복사"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[a.jsxs("button",{onClick:()=>y("kakao"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"💬"}),a.jsx("span",{children:"카카오톡"})]}),a.jsxs("button",{onClick:()=>y("facebook"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"📘"}),a.jsx("span",{children:"페이스북"})]}),a.jsxs("button",{onClick:()=>y("twitter"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"🐦"}),a.jsx("span",{children:"트위터"})]}),a.jsxs("button",{onClick:()=>y("copy"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"📎"}),a.jsx("span",{children:"링크복사"})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:a.jsx("span",{className:"font-medium",children:"친구 추천 혜택"})}),a.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:"• 친구가 가입하면 둘 다 프리미엄 기능 1개월 무료"}),a.jsx("li",{children:"• 특별 사주 분석 리포트 제공"}),a.jsx("li",{children:"• 궁합 분석 서비스 무제한 이용"})]})]}),a.jsx(mj,{referralCode:s,className:"mt-4"})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"추천 코드를 생성할 수 없습니다."}),a.jsx("button",{onClick:l,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"다시 시도"})]})]}),m&&a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-xl p-6 border border-green-200 dark:border-green-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"📊"}),"추천 실적"]}),i?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-green-500 border-t-transparent rounded-full mr-3"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"실적 로딩 중..."})]}):r?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r.totalReferred}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총 추천 인원"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.pendingRewards}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"대기 중인 혜택"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:r.totalRewards}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"받은 총 혜택"})]})]}),r.referredUsers.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"추천한 친구들"}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.referredUsers.map(v=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:v.name.charAt(0).toUpperCase()})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:v.name}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[new Date(v.joinedAt).toLocaleDateString("ko-KR")," 가입"]})]})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${v.rewardStatus==="completed"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:v.rewardStatus==="completed"?"혜택 지급 완료":"혜택 대기 중"})]},v.id))})]}),r.referredUsers.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"아직 추천한 친구가 없어요"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"친구들에게 추천 코드를 공유해보세요!"})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"실적 정보를 불러올 수 없습니다."}),a.jsx("button",{onClick:()=>(e==null?void 0:e.id)&&c(e.id),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"다시 시도"})]})]}),o&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-red-600",children:"⚠️"}),a.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm",children:o})]})})]}):null},Rr="/api/customers";async function Hm(t=1,e=20,s=""){var i,o;const n=new URLSearchParams({page:t.toString(),limit:e.toString(),search:s}),r=`${Rr}?${n}`;try{const l=await fetch(r);if(!l.ok){const d=await l.text();throw console.error("[Customer API] 응답 에러:",d),new Error(`고객 목록을 불러오는데 실패했습니다 (${l.status})`)}const c=await l.json();return{success:c.success,data:c.data||[],total:c.total||((i=c.data)==null?void 0:i.length)||0,page:t,totalPages:Math.ceil((c.total||((o=c.data)==null?void 0:o.length)||0)/e)}}catch(l){throw console.error("[Customer API] 요청 실패:",l),l}}async function fj(t){const e=`${Rr}?id=${t}`,s=await fetch(e);if(!s.ok)throw new Error("고객 정보를 불러오는데 실패했습니다");return s.json()}async function zm(t){const s=await fetch(Rr,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.json();throw new Error(n.error||"고객 등록에 실패했습니다")}return s.json()}async function xj(t,e){const s=`${Rr}?id=${t}`,n=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"고객 정보 수정에 실패했습니다")}return n.json()}async function pj(t){const e=`${Rr}?id=${t}`,s=await fetch(e,{method:"DELETE"});if(!s.ok){const n=await s.json();throw new Error(n.error||"고객 삭제에 실패했습니다")}return s.json()}function Um({embedded:t=!1}){const[e,s]=j.useState([]),[n,r]=j.useState(0),[i,o]=j.useState(1),[l,c]=j.useState(""),[d,h]=j.useState(!1),[m,u]=j.useState(null),[g,f]=j.useState(!1),[p,b]=j.useState({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""});j.useEffect(()=>{y()},[i,l]);const y=async()=>{try{f(!0);const w=await Hm(i,20,l);s(w.data),r(w.totalPages)}catch(w){console.error("Error loading customers:",w),alert("고객 목록을 불러오는데 실패했습니다")}finally{f(!1)}},v=async w=>{w.preventDefault();try{m?(await xj(m.id,p),alert("고객 정보가 수정되었습니다")):(await zm(p),alert("고객이 등록되었습니다")),h(!1),u(null),C(),y()}catch(k){alert(k.message||"저장 중 오류가 발생했습니다")}},N=w=>{u(w),b({name:w.name,birth_date:w.birth_date,birth_time:w.birth_time,phone:w.phone,lunar_solar:w.lunar_solar,gender:w.gender,memo:w.memo||""}),h(!0)},S=async w=>{if(confirm("정말 삭제하시겠습니까?"))try{await pj(w),alert("고객이 삭제되었습니다"),y()}catch(k){alert(k.message||"삭제 중 오류가 발생했습니다")}},C=()=>{b({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""})},_=()=>{u(null),C(),h(!0)};return a.jsx("div",{className:t?"w-full":"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:a.jsxs("div",{className:t?"w-full":"max-w-7xl mx-auto",children:[a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${t?"border border-gray-200 dark:border-gray-600":""}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:`${t?"text-lg":"text-2xl"} font-bold text-gray-900 dark:text-white`,children:"🗂️ 고객 관리"}),a.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"➕ 새 고객 등록"})]}),a.jsx("div",{className:"mb-6",children:a.jsx("input",{type:"text",placeholder:"🔍 이름 또는 전화번호로 검색...",value:l,onChange:w=>c(w.target.value),className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white`})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"번호"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"이름"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"생년월일"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"생시"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"전화번호"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"음/양"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"성별"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"관리"})]})}),a.jsx("tbody",{children:g?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"로딩 중..."})}):e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"등록된 고객이 없습니다"})}):e.filter(w=>w!=null).map((w,k)=>a.jsxs("tr",{className:"border-b dark:border-gray-700",children:[a.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:(i-1)*20+k+1}),a.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white font-medium",children:w.name}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:w.birth_date}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:w.birth_time}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:w.phone}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:w.lunar_solar==="lunar"?"음력":"양력"}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:w.gender==="male"?"남":"여"}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("button",{onClick:()=>N(w),className:"text-blue-600 hover:text-blue-800 mr-3",children:"✏️"}),a.jsx("button",{onClick:()=>S(w.id),className:"text-red-600 hover:text-red-800",children:"🗑️"})]})]},w.id))})]})}),n>1&&a.jsxs("div",{className:"flex justify-center mt-6 space-x-2",children:[a.jsx("button",{onClick:()=>o(w=>Math.max(1,w-1)),disabled:i===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"◀"}),[...Array(n)].map((w,k)=>a.jsx("button",{onClick:()=>o(k+1),className:`px-3 py-1 border rounded ${i===k+1?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:k+1},k)),a.jsx("button",{onClick:()=>o(w=>Math.min(n,w+1)),disabled:i===n,className:"px-3 py-1 border rounded disabled:opacity-50",children:"▶"})]})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-900 dark:text-white",children:m?"고객 정보 수정":"새 고객 등록"}),a.jsxs("form",{onSubmit:v,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"이름 *"}),a.jsx("input",{type:"text",required:!0,value:p.name,onChange:w=>b({...p,name:w.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"생년월일 *"}),a.jsx("input",{type:"date",required:!0,value:p.birth_date,onChange:w=>b({...p,birth_date:w.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"생시 * (24시간 형식)"}),a.jsx("input",{type:"time",required:!0,value:p.birth_time,onChange:w=>b({...p,birth_time:w.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"전화번호 *"}),a.jsx("input",{type:"tel",required:!0,placeholder:"010-1234-5678",value:p.phone,onChange:w=>b({...p,phone:w.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"음력/양력"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"solar",checked:p.lunar_solar==="solar",onChange:w=>b({...p,lunar_solar:"solar"}),className:"mr-2"}),"양력"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"lunar",checked:p.lunar_solar==="lunar",onChange:w=>b({...p,lunar_solar:"lunar"}),className:"mr-2"}),"음력"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"성별 *"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"male",checked:p.gender==="male",onChange:w=>b({...p,gender:"male"}),className:"mr-2"}),"남"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"female",checked:p.gender==="female",onChange:w=>b({...p,gender:"female"}),className:"mr-2"}),"여"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"메모"}),a.jsx("textarea",{value:p.memo,onChange:w=>b({...p,memo:w.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>{h(!1),u(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"취소"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"수정하기":"등록하기"})]})]})]})})]})})}function bj(){const t=He(),{settings:e}=lt(),{setBirthInfo:s}=Xs(),[n,r]=j.useState(e),[i,o]=j.useState("general"),[l,c]=j.useState({birthDate:"",birthTime:"",calendarType:"solar",gender:"",birthPlace:""}),[d,h]=j.useState("idle");j.useEffect(()=>{const f=localStorage.getItem("sajuapp-personal-info");if(f)try{const p=JSON.parse(f);c(p)}catch(p){console.error("Failed to parse saved personal info:",p)}},[]);const m=[{id:"general",label:"일반",icon:"⚙️"},{id:"calendar",label:"캘린더",icon:"📅"},{id:"diary",label:"다이어리",icon:"📝"},{id:"notifications",label:"알림",icon:"🔔"},{id:"account",label:"계정",icon:"👤"},{id:"customers",label:"고객관리",icon:"👥"}],u=()=>l.birthDate?l.birthTime?l.gender?!0:(alert("성별을 선택해주세요."),!1):(alert("출생시간을 입력해주세요."),!1):(alert("생년월일을 입력해주세요."),!1),g=async()=>{if(!(i==="general"&&!u())){h("saving");try{if(i==="general"){localStorage.setItem("sajuapp-personal-info",JSON.stringify(l));const f={year:new Date(l.birthDate).getFullYear(),month:new Date(l.birthDate).getMonth()+1,day:new Date(l.birthDate).getDate(),hour:parseInt(l.birthTime.split(":")[0])||0,minute:parseInt(l.birthTime.split(":")[1])||0,isLunar:l.calendarType==="lunar",isMale:l.gender==="male",name:l.gender==="male"?"사용자(남)":"사용자(여)",useTrueSolarTime:l.useTrueSolarTime||!1};s(f);const p=Xs.getState().birthInfo;window.dispatchEvent(new CustomEvent("personalInfoUpdated",{detail:l}))}localStorage.setItem("sajuapp-settings",JSON.stringify(n)),h("saved"),setTimeout(()=>{h("idle"),i==="general"&&window.confirm("설정이 저장되었습니다. 운세를 확인하러 캘린더로 이동하시겠습니까?")&&t("/calendar")},2e3)}catch(f){console.error("Failed to save settings:",f),h("error"),alert("설정 저장에 실패했습니다. 다시 시도해주세요.")}}};return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground mb-6",children:"설정"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("div",{className:"w-64",children:a.jsx("nav",{className:"bg-background rounded-lg shadow-sm border border-border p-2",children:m.map(f=>a.jsxs("button",{onClick:()=>o(f.id),className:`
                    w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors
                    ${i===f.id?"bg-primary/10 text-primary":"text-foreground hover:bg-muted"}
                  `,children:[a.jsx("span",{className:"text-xl",children:f.icon}),a.jsx("span",{className:"font-medium",children:f.label})]},f.id))})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6",children:[i==="general"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"일반 설정"}),a.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200 dark:border-purple-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎂"}),"사주 정보 (개인화 운세를 위해 필요)"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"생년월일 *"}),a.jsx("input",{type:"date",value:l.birthDate,onChange:f=>c({...l,birthDate:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",placeholder:"YYYY-MM-DD"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"출생 시간 *"}),a.jsx("input",{type:"time",step:"1800",value:l.birthTime,onChange:f=>c({...l,birthTime:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"24시간 형식으로 입력해주세요 (예: 14:30)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"달력 종류 *"}),a.jsxs("select",{value:l.calendarType,onChange:f=>c({...l,calendarType:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[a.jsx("option",{value:"solar",children:"양력"}),a.jsx("option",{value:"lunar",children:"음력"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"성별 *"}),a.jsxs("select",{value:l.gender,onChange:f=>c({...l,gender:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[a.jsx("option",{value:"",children:"선택해주세요"}),a.jsx("option",{value:"male",children:"남성"}),a.jsx("option",{value:"female",children:"여성"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"전통 사주학에서 성별에 따른 해석이 달라집니다"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"출생지 (선택사항)"}),a.jsx("input",{type:"text",value:l.birthPlace,onChange:f=>c({...l,birthPlace:f.target.value}),placeholder:"예: 서울시 강남구",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"더 정확한 시간 계산을 위해 출생지를 입력할 수 있습니다"})]}),a.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:a.jsxs("label",{className:"flex items-start cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l.useTrueSolarTime||!1,onChange:f=>c({...l,useTrueSolarTime:f.target.checked}),className:"mt-1 mr-3 w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"진태양시(真太陽時) 보정 적용"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"한국 표준시와 실제 태양시의 차이(약 30분)를 보정합니다. 전통 사주학에서 권장하는 방법입니다."}),a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"💡 예: 09:15 입력 시 → 08:45로 자동 보정되어 시주 계산"})]})]})}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",a.jsx("strong",{children:"개인정보 보호:"})," 입력하신 정보는 개인화된 운세 제공을 위해서만 사용되며, 로컬에 안전하게 저장됩니다."]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"테마"}),a.jsxs("select",{value:n.theme,onChange:f=>r({...n,theme:f.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"light",children:"라이트"}),a.jsx("option",{value:"dark",children:"다크"}),a.jsx("option",{value:"system",children:"시스템 설정 따르기"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"언어"}),a.jsxs("select",{value:n.language,onChange:f=>r({...n,language:f.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"ko",children:"한국어"}),a.jsx("option",{value:"en",children:"English"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"시간대"}),a.jsxs("select",{value:n.timezone,onChange:f=>r({...n,timezone:f.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"Asia/Seoul",children:"서울 (GMT+9)"}),a.jsx("option",{value:"America/New_York",children:"뉴욕 (GMT-5)"}),a.jsx("option",{value:"Europe/London",children:"런던 (GMT+0)"})]})]})]}),i==="calendar"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"캘린더 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"기본 보기"}),a.jsxs("select",{value:n.defaultView,onChange:f=>r({...n,defaultView:f.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"year",children:"년"}),a.jsx("option",{value:"month",children:"월"}),a.jsx("option",{value:"week",children:"주"}),a.jsx("option",{value:"day",children:"일"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"주 시작일"}),a.jsxs("select",{value:n.weekStartsOn,onChange:f=>r({...n,weekStartsOn:parseInt(f.target.value)}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"0",children:"일요일"}),a.jsx("option",{value:"1",children:"월요일"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.showLunarCalendar,onChange:f=>r({...n,showLunarCalendar:f.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"음력 날짜 표시"})]})}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.showFortune,onChange:f=>r({...n,showFortune:f.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"운세 정보 표시"})]})})]}),i==="diary"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"다이어리 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"기본 공개 범위"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"private",children:"비공개"}),a.jsx("option",{value:"friends",children:"친구만"}),a.jsx("option",{value:"public",children:"전체 공개"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"일일 알림 활성화"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-7",children:"매일 저녁 9시에 다이어리 작성 알림을 받습니다."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"자동 저장"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-7",children:"작성 중인 내용을 30초마다 자동으로 저장합니다."})]})]}),i==="notifications"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"알림 설정"}),a.jsx(S1,{})]}),i==="account"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"계정 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"이메일"}),a.jsx("input",{type:"email",defaultValue:"user@example.com",disabled:!0,className:"w-full px-3 py-2 border border-border rounded-lg bg-muted text-muted-foreground"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"사용자명"}),a.jsx("input",{type:"text",defaultValue:"홍길동",className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"프로필 사진"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center text-2xl text-muted-foreground",children:"👤"}),a.jsx("button",{className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors",children:"사진 변경"})]})]}),a.jsx("div",{className:"pt-4 border-t border-border",children:a.jsx(gj,{})}),a.jsx("div",{className:"pt-4 border-t border-border",children:a.jsx("button",{className:"px-4 py-2 text-red-600 hover:bg-red-500/10 rounded-lg transition-colors",children:"계정 삭제"})})]}),i==="customers"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"고객관리"}),a.jsx(Um,{embedded:!0}),a.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[a.jsxs("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:[a.jsx("span",{className:"mr-2",children:"⚙️"}),"고객 데이터 설정"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"고객 정보 자동 백업"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"상담 알림 활성화"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"고객 생일 알림"})]})]})]})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-border flex justify-end gap-3",children:[a.jsx("button",{className:"px-6 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors",children:"취소"}),a.jsx("button",{onClick:g,disabled:d==="saving",className:`px-6 py-2 rounded-lg transition-colors ${d==="saving"?"bg-gray-400 cursor-not-allowed text-white":d==="saved"?"bg-green-500 hover:bg-green-600 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`,children:d==="saving"?"저장 중...":d==="saved"?"✓ 저장 완료":"저장"})]})]})})]})]})})}const yj=()=>{const[t,e]=j.useState(new Date),[s,n]=j.useState(null),[r,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(!1);j.useEffect(()=>{(()=>{const p=localStorage.getItem("sajuapp-personal-info");if(p)try{const b=JSON.parse(p);l(b),d(!1)}catch(b){console.error("Failed to parse personal info:",b),d(!0)}else d(!0)})();const f=p=>{l(p.detail),d(!1)};return window.addEventListener("personalInfoUpdated",f),()=>{window.removeEventListener("personalInfoUpdated",f)}},[]);const h=()=>({date:t.toISOString().split("T")[0],overallScore:Math.floor(Math.random()*30)+70,categories:{love:{score:Math.floor(Math.random()*100),description:"새로운 만남의 기회가 있을 수 있습니다. 열린 마음으로 대화를 나누어보세요."},career:{score:Math.floor(Math.random()*100),description:"업무에서 중요한 성과를 낼 수 있는 날입니다. 집중력을 발휘하세요."},money:{score:Math.floor(Math.random()*100),description:"재정 관리에 신중을 기하세요. 충동적인 소비는 피하는 것이 좋습니다."},health:{score:Math.floor(Math.random()*100),description:"충분한 휴식이 필요합니다. 스트레스 관리에 유의하세요."}},luckyItems:{number:Math.floor(Math.random()*100),color:["빨강","파랑","노랑","초록","보라"][Math.floor(Math.random()*5)],direction:["동","서","남","북","중앙"][Math.floor(Math.random()*5)],time:`${Math.floor(Math.random()*12)+1}시`},advice:"오늘은 긍정적인 에너지가 충만한 날입니다. 평소 미루어왔던 일을 시작하기에 좋은 시기입니다.",warning:"과도한 자신감은 실수를 부를 수 있으니 겸손한 자세를 유지하세요."});j.useEffect(()=>{if(!o||c){n(null);return}i(!0),setTimeout(()=>{n(h()),i(!1)},500)},[t,o,c]);const m=g=>g>=80?"text-green-600 dark:text-green-400":g>=60?"text-yellow-600 dark:text-yellow-400":g>=40?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400",u=g=>g>=80?"😄":g>=60?"🙂":g>=40?"😐":"😔";return a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"🔮 오늘의 운세"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"AI와 전통 사주명리학이 분석한 당신의 하루"})]}),a.jsx("div",{className:"flex justify-center mb-8",children:a.jsx("input",{type:"date",value:t.toISOString().split("T")[0],onChange:g=>e(new Date(g.target.value)),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})}),r?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):c?a.jsx("div",{className:"max-w-md mx-auto text-center",children:a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🔮"}),a.jsx("h3",{className:"text-xl font-semibold text-yellow-800 dark:text-yellow-200 mb-4",children:"개인정보가 필요합니다"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"정확한 사주 분석을 위해 생년월일, 출생시간 등의 개인정보가 필요합니다."}),a.jsx("button",{onClick:()=>window.location.href="/settings",className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"⚙️ 설정에서 개인정보 입력하기"})]})}):s?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-8 text-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"종합 운세 점수"}),a.jsxs("div",{className:"text-6xl font-bold mb-2",children:[s.overallScore,"점"]}),a.jsx("div",{className:"text-4xl mb-4",children:u(s.overallScore)}),a.jsx("p",{className:"text-lg opacity-90",children:s.advice})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(s.categories).map(([g,f])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white capitalize",children:[g==="love"&&"💕 연애운",g==="career"&&"💼 직장운",g==="money"&&"💰 금전운",g==="health"&&"🏃 건강운"]}),a.jsxs("span",{className:`text-2xl font-bold ${m(f.score)}`,children:[f.score,"점"]})]}),a.jsx("div",{className:"relative h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-4",children:a.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500",style:{width:`${f.score}%`}})}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:f.description})]},g))}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"🍀 오늘의 행운 아이템"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"🔢"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 숫자"}),a.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:s.luckyItems.number})]}),a.jsxs("div",{className:"text-center p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"🎨"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 색"}),a.jsx("p",{className:"text-lg font-bold text-pink-600 dark:text-pink-400",children:s.luckyItems.color})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"🧭"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"길한 방향"}),a.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:s.luckyItems.direction})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"⏰"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 시간"}),a.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:s.luckyItems.time})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"⚠️ 오늘의 주의사항"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.warning})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"📱 카카오톡 공유"}),a.jsx("button",{className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"💬 네이버 공유"}),a.jsx("button",{className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"📷 이미지 저장"})]})]}):null]})},Wm=["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"],$i=[{name:"자",start:23,end:25},{name:"축",start:1,end:3},{name:"인",start:3,end:5},{name:"묘",start:5,end:7},{name:"진",start:7,end:9},{name:"사",start:9,end:11},{name:"오",start:11,end:13},{name:"미",start:13,end:15.5},{name:"신",start:15.5,end:17},{name:"유",start:17,end:19},{name:"술",start:19,end:21},{name:"해",start:21,end:23}],vj={갑:["갑","을","병","정","무","기","경","신","임","계","갑","을"],을:["병","정","무","기","경","신","임","계","갑","을","병","정"],병:["무","기","경","신","임","계","갑","을","병","정","무","기"],정:["경","신","임","계","갑","을","병","정","무","기","경","신"],무:["임","계","갑","을","병","정","무","기","경","신","임","계"],기:["갑","을","병","정","무","기","경","신","임","계","갑","을"],경:["병","정","무","기","경","신","임","계","갑","을","병","정"],신:["무","기","경","신","임","계","갑","을","병","정","무","기"],임:["경","신","임","계","갑","을","병","정","무","기","경","신"],계:["임","계","갑","을","병","정","무","기","경","신","임","계"]};function Ym(t,e,s){let n=t;(e===1||e===2&&s<4)&&(n-=1);let i=(n-1984)%60;return i<0&&(i+=60),Wm[i]}const jj={갑:["병","정","무","기","경","신","임","계","갑","을","병","정"],을:["무","기","경","신","임","계","갑","을","병","정","무","기"],병:["경","신","임","계","갑","을","병","정","무","기","경","신"],정:["임","계","갑","을","병","정","무","기","경","신","임","계"],무:["갑","을","병","정","무","기","경","신","임","계","갑","을"],기:["병","정","무","기","경","신","임","계","갑","을","병","정"],경:["무","기","경","신","임","계","갑","을","병","정","무","기"],신:["경","신","임","계","갑","을","병","정","무","기","경","신"],임:["임","계","갑","을","병","정","무","기","경","신","임","계"],계:["갑","을","병","정","무","기","경","신","임","계","갑","을"]};function kj(t,e,s){const r=Ym(t,e,s)[0];let i=e;e===1?i=s>=6?12:11:e===2?i=s>=4?1:12:e===3?i=s>=6?2:1:e===4?i=s>=5?3:2:e===5?i=s>=6?4:3:e===6?i=s>=6?5:4:e===7?i=s>=7?6:5:e===8?i=s>=8?7:6:e===9?i=s>=8?8:7:e===10?i=s>=8?9:8:e===11?i=s>=8?10:9:e===12&&(i=s>=7?11:10);const o=jj[r];if(!o)return console.error("Invalid year stem for month calculation:",r),"갑인";const l=o[i-1],d=["인","묘","진","사","오","미","신","유","술","해","자","축"][(i-1)%12];return l+d}function Md(t,e,s){const n=Math.floor((14-e)/12),r=t+4800-n,i=e+12*n-3;return s+Math.floor((153*i+2)/5)+365*r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400)-32045}function wj(t,e,s){const r=Md(1900,1,1);let l=(10+(Md(t,e,s)-r))%60;return l<0&&(l+=60),Wm[l]}function Nj(t,e,s=0){let n=e+s/60;n<0&&(n+=24),n>=24&&(n-=24);let r=0;if(n>=23||n<1)r=0;else for(let c=1;c<$i.length;c++){const d=$i[c];if(n>=d.start&&n<d.end){r=c;break}}const i=vj[t];if(!i)return console.error("Invalid day stem:",t),"갑자";const o=i[r],l=$i[r].name;return o+l}function Sj(t,e,s){const r=[{year:1948,start:[5,1],end:[9,13]},{year:1949,start:[4,3],end:[9,11]},{year:1950,start:[4,1],end:[9,10]},{year:1951,start:[5,6],end:[9,9]},{year:1955,start:[5,5],end:[9,9]},{year:1956,start:[5,20],end:[9,30]},{year:1957,start:[5,5],end:[9,22]},{year:1958,start:[5,4],end:[9,21]},{year:1959,start:[5,3],end:[9,20]},{year:1960,start:[5,1],end:[9,18]},{year:1987,start:[5,10],end:[10,11]},{year:1988,start:[5,8],end:[10,9]}].find(d=>d.year===t);if(!r)return!1;const[i,o]=r.start,[l,c]=r.end;return e>i&&e<l||e===i&&s>=o||e===l&&s<c}function Gm(t,e,s,n,r=0,i,o){const l=Sj(t,e,s);let c=n,d=r;o&&(d-=30,d<0&&(d+=60,c-=1)),l&&(t===1987&&e===9&&s===30?c=c-1.5:c=c-1);const h=Ym(t,e,s),m=kj(t,e,s),u=wj(t,e,s),g=Nj(u[0],c,d);return{year:h,month:m,day:u,hour:g,fullSaju:`${h} ${m} ${u} ${g}`,summerTimeApplied:l,trueSolarTimeApplied:o||!1}}const Ed={갑:"wood",을:"wood",병:"fire",정:"fire",무:"earth",기:"earth",경:"metal",신:"metal",임:"water",계:"water"},Cj={자:"water",축:"earth",인:"wood",묘:"wood",진:"earth",사:"fire",오:"fire",미:"earth",신:"metal",유:"metal",술:"earth",해:"water"},Km={자:["계"],축:["기","계","신"],인:["갑","병","무"],묘:["을"],진:["무","을","계"],사:["병","무","경"],오:["정","기"],미:["기","정","을"],신:["경","임","무"],유:["신"],술:["무","신","정"],해:["임","갑"]},Vi={갑:{갑:"bijeon",을:"geopjae",병:"siksin",정:"sanggwan",무:"pyeonjae",기:"jeongjae",경:"pyeongwan",신:"jeonggwan",임:"pyeongin",계:"jeongin"},을:{을:"bijeon",갑:"geopjae",정:"siksin",병:"sanggwan",기:"pyeonjae",무:"jeongjae",신:"pyeongwan",경:"jeonggwan",계:"pyeongin",임:"jeongin"},병:{병:"bijeon",정:"geopjae",무:"siksin",기:"sanggwan",경:"pyeonjae",신:"jeongjae",임:"pyeongwan",계:"jeonggwan",갑:"pyeongin",을:"jeongin"},정:{정:"bijeon",병:"geopjae",기:"siksin",무:"sanggwan",신:"pyeonjae",경:"jeongjae",계:"pyeongwan",임:"jeonggwan",을:"pyeongin",갑:"jeongin"},무:{무:"bijeon",기:"geopjae",경:"siksin",신:"sanggwan",임:"pyeonjae",계:"jeongjae",갑:"pyeongwan",을:"jeonggwan",병:"pyeongin",정:"jeongin"},기:{기:"bijeon",무:"geopjae",신:"siksin",경:"sanggwan",계:"pyeonjae",임:"jeongjae",을:"pyeongwan",갑:"jeonggwan",정:"pyeongin",병:"jeongin"},경:{경:"bijeon",신:"geopjae",임:"siksin",계:"sanggwan",갑:"pyeonjae",을:"jeongjae",병:"pyeongwan",정:"jeonggwan",무:"pyeongin",기:"jeongin"},신:{신:"bijeon",경:"geopjae",계:"siksin",임:"sanggwan",을:"pyeonjae",갑:"jeongjae",정:"pyeongwan",병:"jeonggwan",기:"pyeongin",무:"jeongin"},임:{임:"bijeon",계:"geopjae",갑:"siksin",을:"sanggwan",병:"pyeonjae",정:"jeongjae",무:"pyeongwan",기:"jeonggwan",경:"pyeongin",신:"jeongin"},계:{계:"bijeon",임:"geopjae",을:"siksin",갑:"sanggwan",정:"pyeonjae",병:"jeongjae",기:"pyeongwan",무:"jeonggwan",신:"pyeongin",경:"jeongin"}};function _j(t){const e={wood:0,fire:0,earth:0,metal:0,water:0};[t.year,t.month,t.day,t.hour].forEach((r,i)=>{const o=Ed[r.heavenly];if(o){const d=i===2?20:15;e[o]+=d}const l=Cj[r.earthly];if(l){const d=i===2?15:10;e[l]+=d}(Km[r.earthly]||[]).forEach(d=>{const h=Ed[d];h&&(e[h]+=5)})});const n=Object.values(e).reduce((r,i)=>r+i,0);return n>0&&Object.keys(e).forEach(r=>{const i=r;e[i]=Math.round(e[i]/n*100)}),e}function Mj(t){const e=t.day.heavenly,s={bijeon:0,geopjae:0,siksin:0,sanggwan:0,jeongjae:0,pyeonjae:0,jeonggwan:0,pyeongwan:0,jeongin:0,pyeongin:0};return Vi[e]?([t.year,t.month,t.day,t.hour].forEach((r,i)=>{const o=Vi[e][r.heavenly];if(o){const c=i===2?15:10;s[o]+=c}(Km[r.earthly]||[]).forEach(c=>{const d=Vi[e][c];d&&(s[d]+=5)})}),s):(console.error("Invalid day master:",e),s)}function Ej(t,e){return{foundation:Tj(t,e),thinking:Aj(t,e),relationship:Dj(t,e),action:Pj(t,e),luck:Rj(t,e),environment:Lj(t,e)}}function Tj(t,e){const s=(t.wood+t.earth)/2,n=e.bijeon*2+e.jeongin*2;return Math.min(100,Math.round(s+n))}function Aj(t,e){const s=(t.water+t.fire)/2,n=e.siksin*2+e.sanggwan*1.5;return Math.min(100,Math.round(s+n))}function Dj(t,e){const s=(t.wood+t.fire)/2,n=e.jeongjae*2+e.pyeonjae*1.5;return Math.min(100,Math.round(s+n))}function Pj(t,e){const s=(t.metal+t.wood)/2,n=e.jeonggwan*2+e.pyeongwan*1.5;return Math.min(100,Math.round(s+n))}function Rj(t,e){const s=Object.values(t),n=s.reduce((l,c)=>l+c,0)/s.length,r=s.reduce((l,c)=>l+Math.pow(c-n,2),0)/s.length,i=Math.max(0,100-r*2),o=(e.jeongin+e.pyeongin+e.siksin)/3;return Math.min(100,Math.round(i*.6+o*.4))}function Lj(t,e){const s=(t.earth+t.water)/2,n=e.bijeon*1.5+e.geopjae*1.5;return Math.min(100,Math.round(s+n))}function Oj(t,e){return{emotion:Math.min(100,Math.round(t.water*.7+e.jeongin*2)),logic:Math.min(100,Math.round(t.metal*.7+e.jeonggwan*2)),artistic:Math.min(100,Math.round(t.fire*.7+e.siksin*2)),rational:Math.min(100,Math.round(t.earth*.7+e.sanggwan*2)),character:Math.min(100,Math.round(t.wood*.7+e.bijeon*2)),intelligence:Math.min(100,Math.round((t.water+t.metal)*.4+e.pyeongin*2)),learning:Math.min(100,Math.round(t.wood*.5+e.jeongin*2.5))}}function Ij(t,e){return{health:Math.min(100,Math.round(t.wood*.8+e.bijeon*2)),marriage:Math.min(100,Math.round(t.fire*.6+(e.jeongjae+e.pyeonjae)*1.5)),power:Math.min(100,Math.round(t.metal*.7+(e.jeonggwan+e.pyeongwan)*1.5)),fame:Math.min(100,Math.round(t.fire*.8+e.siksin*2)),accident:Math.max(10,Math.round(100-t.earth*.8-e.jeongin*2)),business:Math.min(100,Math.round(t.metal*.6+e.pyeonjae*2.5)),movement:Math.min(100,Math.round(t.water*.8+e.geopjae*2)),separation:Math.max(10,Math.round(100-t.earth*.7-e.bijeon*2)),relationship:Math.min(100,Math.round(t.fire*.7+e.jeongin*2)),children:Math.min(100,Math.round(t.wood*.6+e.siksin*2.5)),talent:Math.min(100,Math.round(t.water*.7+e.pyeongin*2)),wealth:Math.min(100,Math.round(t.metal*.5+(e.jeongjae+e.pyeonjae)*2)),ancestor:Math.min(100,Math.round(t.earth*.8+e.jeongin*1.5)),career:Math.min(100,Math.round(t.metal*.6+e.jeonggwan*2.5)),family:Math.min(100,Math.round(t.earth*.7+e.bijeon*2)),study:Math.min(100,Math.round(t.water*.6+e.jeongin*2.5)),fortune:Math.min(100,Math.round((t.fire+t.water)*.4+e.pyeongin*2))}}function Fj(t){return Object.values(t).reduce((e,s)=>e+s,0)}function Bj(t){const e=Object.values(t);return e.reduce((s,n)=>s+n,0)/e.length}function qm(t){let e=t.year,s=t.month,n=t.day;if(t.isLunar){const m=new Pl;m.setLunarDate(t.year,t.month,t.day,!1);const u=m.getSolarCalendar();e=u.year,s=u.month,n=u.day}const r=Gm(e,s,n,t.hour,t.minute||0,void 0,t.useTrueSolarTime),i={year:{heavenly:r.year[0],earthly:r.year[1]},month:{heavenly:r.month[0],earthly:r.month[1]},day:{heavenly:r.day[0],earthly:r.day[1]},hour:{heavenly:r.hour[0],earthly:r.hour[1]}},o=_j(i),l=Mj(i),c=Ej(o,l),d=Oj(o,l),h=Ij(o,l);return{birthInfo:t,fourPillars:i,fiveElements:o,tenGods:l,sixAreas:c,dayMaster:i.day.heavenly,totalScore:Fj(c),averageScore:Bj(c),personalityTraits:d,seventeenFortunes:h}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Lr(t){return t+.5|0}const Ft=(t,e,s)=>Math.max(Math.min(t,s),e);function Fn(t){return Ft(Lr(t*2.55),0,255)}function Wt(t){return Ft(Lr(t*255),0,255)}function wt(t){return Ft(Lr(t/2.55)/100,0,1)}function Td(t){return Ft(Lr(t*100),0,100)}const Ke={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bo=[..."0123456789ABCDEF"],$j=t=>Bo[t&15],Vj=t=>Bo[(t&240)>>4]+Bo[t&15],qr=t=>(t&240)>>4===(t&15),Hj=t=>qr(t.r)&&qr(t.g)&&qr(t.b)&&qr(t.a);function zj(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Ke[t[1]]*17,g:255&Ke[t[2]]*17,b:255&Ke[t[3]]*17,a:e===5?Ke[t[4]]*17:255}:(e===7||e===9)&&(s={r:Ke[t[1]]<<4|Ke[t[2]],g:Ke[t[3]]<<4|Ke[t[4]],b:Ke[t[5]]<<4|Ke[t[6]],a:e===9?Ke[t[7]]<<4|Ke[t[8]]:255})),s}const Uj=(t,e)=>t<255?e(t):"";function Wj(t){var e=Hj(t)?$j:Vj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Uj(t.a,e):void 0}const Yj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Jm(t,e,s){const n=e*Math.min(s,1-s),r=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Gj(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function Kj(t,e,s){const n=Jm(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function qj(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function $l(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),o=Math.min(s,n,r),l=(i+o)/2;let c,d,h;return i!==o&&(h=i-o,d=l>.5?h/(2-i-o):h/(i+o),c=qj(s,n,r,h,i),c=c*60+.5),[c|0,d||0,l]}function Vl(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Wt)}function Hl(t,e,s){return Vl(Jm,t,e,s)}function Jj(t,e,s){return Vl(Kj,t,e,s)}function Xj(t,e,s){return Vl(Gj,t,e,s)}function Xm(t){return(t%360+360)%360}function Qj(t){const e=Yj.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Fn(+e[5]):Wt(+e[5]));const r=Xm(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=Jj(r,i,o):e[1]==="hsv"?n=Xj(r,i,o):n=Hl(r,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function Zj(t,e){var s=$l(t);s[0]=Xm(s[0]+e),s=Hl(s),t.r=s[0],t.g=s[1],t.b=s[2]}function ek(t){if(!t)return;const e=$l(t),s=e[0],n=Td(e[1]),r=Td(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${wt(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const Ad={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Dd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tk(){const t={},e=Object.keys(Dd),s=Object.keys(Ad);let n,r,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,Ad[i]);i=parseInt(Dd[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Jr;function sk(t){Jr||(Jr=tk(),Jr.transparent=[0,0,0,0]);const e=Jr[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const nk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rk(t){const e=nk.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?Fn(o):Ft(o*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?Fn(n):Ft(n,0,255)),r=255&(e[4]?Fn(r):Ft(r,0,255)),i=255&(e[6]?Fn(i):Ft(i,0,255)),{r:n,g:r,b:i,a:s}}}function ak(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${wt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Hi=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Is=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function ik(t,e,s){const n=Is(wt(t.r)),r=Is(wt(t.g)),i=Is(wt(t.b));return{r:Wt(Hi(n+s*(Is(wt(e.r))-n))),g:Wt(Hi(r+s*(Is(wt(e.g))-r))),b:Wt(Hi(i+s*(Is(wt(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Xr(t,e,s){if(t){let n=$l(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Hl(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Qm(t,e){return t&&Object.assign(e||{},t)}function Pd(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Wt(t[3]))):(e=Qm(t,{r:0,g:0,b:0,a:1}),e.a=Wt(e.a)),e}function ok(t){return t.charAt(0)==="r"?rk(t):Qj(t)}class dr{constructor(e){if(e instanceof dr)return e;const s=typeof e;let n;s==="object"?n=Pd(e):s==="string"&&(n=zj(e)||sk(e)||ok(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Qm(this._rgb);return e&&(e.a=wt(e.a)),e}set rgb(e){this._rgb=Pd(e)}rgbString(){return this._valid?ak(this._rgb):void 0}hexString(){return this._valid?Wj(this._rgb):void 0}hslString(){return this._valid?ek(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,n.r=255&d*n.r+i*r.r+.5,n.g=255&d*n.g+i*r.g+.5,n.b=255&d*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=ik(this._rgb,e._rgb,s)),this}clone(){return new dr(this.rgb)}alpha(e){return this._rgb.a=Wt(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Lr(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Xr(this._rgb,2,e),this}darken(e){return Xr(this._rgb,2,-e),this}saturate(e){return Xr(this._rgb,1,e),this}desaturate(e){return Xr(this._rgb,1,-e),this}rotate(e){return Zj(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function vt(){}const lk=(()=>{let t=0;return()=>t++})();function se(t){return t==null}function de(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ne(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function xe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ze(t,e){return xe(t)?t:e}function Q(t,e){return typeof t>"u"?e:t}const ck=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Zm=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function le(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function ae(t,e,s,n){let r,i,o;if(de(t))for(i=t.length,r=0;r<i;r++)e.call(s,t[r],r);else if(ne(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(s,t[o[r]],o[r])}function Ia(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Fa(t){if(de(t))return t.map(Fa);if(ne(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Fa(t[s[r]]);return e}return t}function eg(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function dk(t,e,s,n){if(!eg(t))return;const r=e[t],i=s[t];ne(r)&&ne(i)?hr(r,i,n):e[t]=Fa(i)}function hr(t,e,s){const n=de(e)?e:[e],r=n.length;if(!ne(t))return t;s=s||{};const i=s.merger||dk;let o;for(let l=0;l<r;++l){if(o=n[l],!ne(o))continue;const c=Object.keys(o);for(let d=0,h=c.length;d<h;++d)i(c[d],t,o,s)}return t}function Yn(t,e){return hr(t,e,{merger:hk})}function hk(t,e,s){if(!eg(t))return;const n=e[t],r=s[t];ne(n)&&ne(r)?Yn(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Fa(r))}const Rd={"":t=>t,x:t=>t.x,y:t=>t.y};function uk(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function mk(t){const e=uk(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Gt(t,e){return(Rd[e]||(Rd[e]=mk(e)))(t)}function zl(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ur=t=>typeof t<"u",Kt=t=>typeof t=="function",Ld=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function gk(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const re=Math.PI,ce=2*re,fk=ce+re,Ba=Number.POSITIVE_INFINITY,xk=re/180,ve=re/2,rs=re/4,Od=re*2/3,Bt=Math.log10,ft=Math.sign;function Gn(t,e,s){return Math.abs(t-e)<s}function Id(t){const e=Math.round(t);t=Gn(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(Bt(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function pk(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function bk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function nn(t){return!bk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function yk(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function tg(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function at(t){return t*(re/180)}function Ul(t){return t*(180/re)}function Fd(t){if(!xe(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function sg(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*re&&(i+=ce),{angle:i,distance:r}}function $o(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vk(t,e){return(t-e+fk)%ce-re}function Ee(t){return(t%ce+ce)%ce}function mr(t,e,s,n){const r=Ee(t),i=Ee(e),o=Ee(s),l=Ee(i-r),c=Ee(o-r),d=Ee(r-i),h=Ee(r-o);return r===i||r===o||n&&i===o||l>c&&d<h}function Se(t,e,s){return Math.max(e,Math.min(s,t))}function jk(t){return Se(t,-32768,32767)}function _t(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Wl(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const Mt=(t,e,s,n)=>Wl(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),kk=(t,e,s)=>Wl(t,s,n=>t[n][e]>=s);function wk(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const ng=["push","pop","shift","splice","unshift"];function Nk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ng.forEach(s=>{const n="_onData"+zl(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function Bd(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(ng.forEach(i=>{delete t[i]}),delete t._chartjs)}function rg(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ag=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function ig(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,ag.call(window,()=>{n=!1,t.apply(e,s)}))}}function Sk(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Yl=t=>t==="start"?"left":t==="end"?"right":"center",Me=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,Ck=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function og(t,e,s){const n=e.length;let r=0,i=n;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:m,max:u,minDefined:g,maxDefined:f}=o.getUserBounds();if(g){if(r=Math.min(Mt(c,h,m).lo,s?n:Mt(e,h,o.getPixelForValue(m)).lo),d){const p=c.slice(0,r+1).reverse().findIndex(b=>!se(b[l.axis]));r-=Math.max(0,p)}r=Se(r,0,n-1)}if(f){let p=Math.max(Mt(c,o.axis,u,!0).hi+1,s?0:Mt(e,h,o.getPixelForValue(u),!0).hi+1);if(d){const b=c.slice(p-1).findIndex(y=>!se(y[l.axis]));p+=Math.max(0,b)}i=Se(p,r,n)-r}else i=n-r}return{start:r,count:i}}function lg(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=r,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,r),i}const Qr=t=>t===0||t===1,$d=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ce/s)),Vd=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*ce/s)+1,Kn={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ve)+1,easeOutSine:t=>Math.sin(t*ve),easeInOutSine:t=>-.5*(Math.cos(re*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Qr(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qr(t)?t:$d(t,.075,.3),easeOutElastic:t=>Qr(t)?t:Vd(t,.075,.3),easeInOutElastic(t){return Qr(t)?t:t<.5?.5*$d(t*2,.1125,.45):.5+.5*Vd(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Kn.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Kn.easeInBounce(t*2)*.5:Kn.easeOutBounce(t*2-1)*.5+.5};function Gl(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Hd(t){return Gl(t)?t:new dr(t)}function zi(t){return Gl(t)?t:new dr(t).saturate(.5).darken(.1).hexString()}const _k=["x","y","borderWidth","radius","tension"],Mk=["color","borderColor","backgroundColor"];function Ek(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Mk},numbers:{type:"number",properties:_k}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Tk(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const zd=new Map;function Ak(t,e){e=e||{};const s=t+JSON.stringify(e);let n=zd.get(s);return n||(n=new Intl.NumberFormat(t,e),zd.set(s,n)),n}function Or(t,e,s){return Ak(e,s).format(t)}const cg={values(t){return de(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=Dk(t,s)}const o=Bt(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Or(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(Bt(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?cg.numeric.call(this,t,e,s):""}};function Dk(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var fi={formatters:cg};function Pk(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ss=Object.create(null),Vo=Object.create(null);function qn(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function Ui(t,e,s){return typeof e=="string"?hr(qn(t,e),s):hr(qn(t,""),e)}class Rk{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>zi(r.backgroundColor),this.hoverBorderColor=(n,r)=>zi(r.borderColor),this.hoverColor=(n,r)=>zi(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Ui(this,e,s)}get(e){return qn(this,e)}describe(e,s){return Ui(Vo,e,s)}override(e,s){return Ui(Ss,e,s)}route(e,s,n,r){const i=qn(this,e),o=qn(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=o[r];return ne(c)?Object.assign({},d,c):Q(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var he=new Rk({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ek,Tk,Pk]);function Lk(t){return!t||se(t.size)||se(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function $a(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function Ok(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const l=s.length;let c,d,h,m,u;for(c=0;c<l;c++)if(m=s[c],m!=null&&!de(m))o=$a(t,r,i,o,m);else if(de(m))for(d=0,h=m.length;d<h;d++)u=m[d],u!=null&&!de(u)&&(o=$a(t,r,i,o,u));t.restore();const g=i.length/2;if(g>s.length){for(c=0;c<g;c++)delete r[i[c]];i.splice(0,g)}return o}function as(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function Ud(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ho(t,e,s,n){dg(t,e,s,n,null)}function dg(t,e,s,n,r){let i,o,l,c,d,h,m,u;const g=e.pointStyle,f=e.rotation,p=e.radius;let b=(f||0)*xk;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),g){default:r?t.ellipse(s,n,r/2,p,0,0,ce):t.arc(s,n,p,0,ce),t.closePath();break;case"triangle":h=r?r/2:p,t.moveTo(s+Math.sin(b)*h,n-Math.cos(b)*p),b+=Od,t.lineTo(s+Math.sin(b)*h,n-Math.cos(b)*p),b+=Od,t.lineTo(s+Math.sin(b)*h,n-Math.cos(b)*p),t.closePath();break;case"rectRounded":d=p*.516,c=p-d,o=Math.cos(b+rs)*c,m=Math.cos(b+rs)*(r?r/2-d:c),l=Math.sin(b+rs)*c,u=Math.sin(b+rs)*(r?r/2-d:c),t.arc(s-m,n-l,d,b-re,b-ve),t.arc(s+u,n-o,d,b-ve,b),t.arc(s+m,n+l,d,b,b+ve),t.arc(s-u,n+o,d,b+ve,b+re),t.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*p,h=r?r/2:c,t.rect(s-h,n-c,2*h,2*c);break}b+=rs;case"rectRot":m=Math.cos(b)*(r?r/2:p),o=Math.cos(b)*p,l=Math.sin(b)*p,u=Math.sin(b)*(r?r/2:p),t.moveTo(s-m,n-l),t.lineTo(s+u,n-o),t.lineTo(s+m,n+l),t.lineTo(s-u,n+o),t.closePath();break;case"crossRot":b+=rs;case"cross":m=Math.cos(b)*(r?r/2:p),o=Math.cos(b)*p,l=Math.sin(b)*p,u=Math.sin(b)*(r?r/2:p),t.moveTo(s-m,n-l),t.lineTo(s+m,n+l),t.moveTo(s+u,n-o),t.lineTo(s-u,n+o);break;case"star":m=Math.cos(b)*(r?r/2:p),o=Math.cos(b)*p,l=Math.sin(b)*p,u=Math.sin(b)*(r?r/2:p),t.moveTo(s-m,n-l),t.lineTo(s+m,n+l),t.moveTo(s+u,n-o),t.lineTo(s-u,n+o),b+=rs,m=Math.cos(b)*(r?r/2:p),o=Math.cos(b)*p,l=Math.sin(b)*p,u=Math.sin(b)*(r?r/2:p),t.moveTo(s-m,n-l),t.lineTo(s+m,n+l),t.moveTo(s+u,n-o),t.lineTo(s-u,n+o);break;case"line":o=r?r/2:Math.cos(b)*p,l=Math.sin(b)*p,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(r?r/2:p),n+Math.sin(b)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Et(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function xi(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function pi(t){t.restore()}function Ik(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function Fk(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Bk(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),se(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function $k(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,h=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(l,h),t.stroke()}}function Vk(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Cs(t,e,s,n,r,i={}){const o=de(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,Bk(t,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&Vk(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),se(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,n,i.maxWidth)),t.fillText(d,s,n,i.maxWidth),$k(t,s,n,d,i),n+=Number(r.lineHeight);t.restore()}function gr(t,e){const{x:s,y:n,w:r,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*re,re,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,re,ve,!0),t.lineTo(s+r-o.bottomRight,n+i),t.arc(s+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,ve,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-ve,!0),t.lineTo(s+o.topLeft,n)}const Hk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Uk(t,e){const s=(""+t).match(Hk);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const Wk=t=>+t||0;function Kl(t,e){const s={},n=ne(e),r=n?Object.keys(e):e,i=ne(t)?n?o=>Q(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=Wk(i(o));return s}function hg(t){return Kl(t,{top:"y",right:"x",bottom:"y",left:"x"})}function bs(t){return Kl(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Pe(t){const e=hg(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ne(t,e){t=t||{},e=e||he.font;let s=Q(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=Q(t.style,e.style);n&&!(""+n).match(zk)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:Q(t.family,e.family),lineHeight:Uk(Q(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:Q(t.weight,e.weight),string:""};return r.string=Lk(r),r}function Bn(t,e,s,n){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Yk(t,e,s){const{min:n,max:r}=t,i=Zm(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function Zt(t,e){return Object.assign(Object.create(t),e)}function ql(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=fg("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>ql([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return mg(l,c,()=>ew(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Yd(l).includes(c)},ownKeys(l){return Yd(l)},set(l,c,d){const h=l._storage||(l._storage=r());return l[c]=h[c]=d,delete l._keys,!0}})}function rn(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:ug(t,n),setContext:i=>rn(t,i,s,n),override:i=>rn(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return mg(i,o,()=>Kk(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function ug(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:Kt(s)?s:()=>s,isIndexable:Kt(n)?n:()=>n}}const Gk=(t,e)=>t?t+zl(e):e,Jl=(t,e)=>ne(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function mg(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function Kk(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=t;let l=n[e];return Kt(l)&&o.isScriptable(e)&&(l=qk(e,l,t,s)),de(l)&&l.length&&(l=Jk(e,l,t,o.isIndexable)),Jl(e,l)&&(l=rn(l,r,i&&i[e],o)),l}function qk(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),Jl(t,c)&&(c=Xl(r._scopes,r,t,c)),c}function Jk(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(ne(e[0])){const c=e,d=r._scopes.filter(h=>h!==c);e=[];for(const h of c){const m=Xl(d,r,t,h);e.push(rn(m,i,o&&o[t],l))}}return e}function gg(t,e,s){return Kt(t)?t(e,s):t}const Xk=(t,e)=>t===!0?e:typeof t=="string"?Gt(e,t):void 0;function Qk(t,e,s,n,r){for(const i of e){const o=Xk(s,i);if(o){t.add(o);const l=gg(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function Xl(t,e,s,n){const r=e._rootScopes,i=gg(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=Wd(l,o,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=Wd(l,o,i,c,n),c===null)?!1:ql(Array.from(l),[""],r,i,()=>Zk(e,s,n))}function Wd(t,e,s,n,r){for(;s;)s=Qk(t,e,s,n,r);return s}function Zk(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return de(r)&&ne(s)?s:r||{}}function ew(t,e,s,n){let r;for(const i of e)if(r=fg(Gk(i,t),s),typeof r<"u")return Jl(t,r)?Xl(s,n,t,r):r}function fg(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Yd(t){let e=t._keys;return e||(e=t._keys=tw(t._scopes)),e}function tw(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function xg(t,e,s,n){const{iScale:r}=t,{key:i="r"}=this._parsing,o=new Array(n);let l,c,d,h;for(l=0,c=n;l<c;++l)d=l+s,h=e[d],o[l]={r:r.parse(Gt(h,i),d)};return o}const sw=Number.EPSILON||1e-14,an=(t,e)=>e<t.length&&!t[e].skip&&t[e],pg=t=>t==="x"?"y":"x";function nw(t,e,s,n){const r=t.skip?e:t,i=e,o=s.skip?e:s,l=$o(i,r),c=$o(o,i);let d=l/(l+c),h=c/(l+c);d=isNaN(d)?0:d,h=isNaN(h)?0:h;const m=n*d,u=n*h;return{previous:{x:i.x-m*(o.x-r.x),y:i.y-m*(o.y-r.y)},next:{x:i.x+u*(o.x-r.x),y:i.y+u*(o.y-r.y)}}}function rw(t,e,s){const n=t.length;let r,i,o,l,c,d=an(t,0);for(let h=0;h<n-1;++h)if(c=d,d=an(t,h+1),!(!c||!d)){if(Gn(e[h],0,sw)){s[h]=s[h+1]=0;continue}r=s[h]/e[h],i=s[h+1]/e[h],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),s[h]=r*o*e[h],s[h+1]=i*o*e[h])}}function aw(t,e,s="x"){const n=pg(s),r=t.length;let i,o,l,c=an(t,0);for(let d=0;d<r;++d){if(o=l,l=c,c=an(t,d+1),!l)continue;const h=l[s],m=l[n];o&&(i=(h-o[s])/3,l[`cp1${s}`]=h-i,l[`cp1${n}`]=m-i*e[d]),c&&(i=(c[s]-h)/3,l[`cp2${s}`]=h+i,l[`cp2${n}`]=m+i*e[d])}}function iw(t,e="x"){const s=pg(e),n=t.length,r=Array(n).fill(0),i=Array(n);let o,l,c,d=an(t,0);for(o=0;o<n;++o)if(l=c,c=d,d=an(t,o+1),!!c){if(d){const h=d[e]-c[e];r[o]=h!==0?(d[s]-c[s])/h:0}i[o]=l?d?ft(r[o-1])!==ft(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}rw(t,r,i),aw(t,i,e)}function Zr(t,e,s){return Math.max(Math.min(t,s),e)}function ow(t,e){let s,n,r,i,o,l=Et(t[0],e);for(s=0,n=t.length;s<n;++s)o=i,i=l,l=s<n-1&&Et(t[s+1],e),i&&(r=t[s],o&&(r.cp1x=Zr(r.cp1x,e.left,e.right),r.cp1y=Zr(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Zr(r.cp2x,e.left,e.right),r.cp2y=Zr(r.cp2y,e.top,e.bottom)))}function lw(t,e,s,n,r){let i,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")iw(t,r);else{let d=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=nw(d,l,t[Math.min(i+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&ow(t,s)}function Ql(){return typeof window<"u"&&typeof document<"u"}function Zl(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Va(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const bi=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function cw(t,e){return bi(t).getPropertyValue(e)}const dw=["top","right","bottom","left"];function ys(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=dw[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const hw=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function uw(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let o=!1,l,c;if(hw(r,i,t.target))l=r,c=i;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function cs(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=bi(s),i=r.boxSizing==="border-box",o=ys(r,"padding"),l=ys(r,"border","width"),{x:c,y:d,box:h}=uw(t,s),m=o.left+(h&&l.left),u=o.top+(h&&l.top);let{width:g,height:f}=e;return i&&(g-=o.width+l.width,f-=o.height+l.height),{x:Math.round((c-m)/g*s.width/n),y:Math.round((d-u)/f*s.height/n)}}function mw(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&Zl(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),l=bi(i),c=ys(l,"border","width"),d=ys(l,"padding");e=o.width-d.width-c.width,s=o.height-d.height-c.height,n=Va(l.maxWidth,i,"clientWidth"),r=Va(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||Ba,maxHeight:r||Ba}}const ea=t=>Math.round(t*10)/10;function gw(t,e,s,n){const r=bi(t),i=ys(r,"margin"),o=Va(r.maxWidth,t,"clientWidth")||Ba,l=Va(r.maxHeight,t,"clientHeight")||Ba,c=mw(t,e,s);let{width:d,height:h}=c;if(r.boxSizing==="content-box"){const u=ys(r,"border","width"),g=ys(r,"padding");d-=g.width+u.width,h-=g.height+u.height}return d=Math.max(0,d-i.width),h=Math.max(0,n?d/n:h-i.height),d=ea(Math.min(d,o,c.maxWidth)),h=ea(Math.min(h,l,c.maxHeight)),d&&!h&&(h=ea(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&h>c.height&&(h=c.height,d=ea(Math.floor(h*n))),{width:d,height:h}}function Gd(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=n,o.height=r,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const fw=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ql()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Kd(t,e){const s=cw(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ds(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function xw(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function pw(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=ds(t,r,s),l=ds(r,i,s),c=ds(i,e,s),d=ds(o,l,s),h=ds(l,c,s);return ds(d,h,s)}const bw=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},yw=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Gs(t,e,s){return t?bw(e,s):yw()}function bg(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function yg(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function vg(t){return t==="angle"?{between:mr,compare:vk,normalize:Ee}:{between:_t,compare:(e,s)=>e-s,normalize:e=>e}}function qd({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function vw(t,e,s){const{property:n,start:r,end:i}=s,{between:o,normalize:l}=vg(n),c=e.length;let{start:d,end:h,loop:m}=t,u,g;if(m){for(d+=c,h+=c,u=0,g=c;u<g&&o(l(e[d%c][n]),r,i);++u)d--,h--;d%=c,h%=c}return h<d&&(h+=c),{start:d,end:h,loop:m,style:t.style}}function jg(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,o=e.length,{compare:l,between:c,normalize:d}=vg(n),{start:h,end:m,loop:u,style:g}=vw(t,e,s),f=[];let p=!1,b=null,y,v,N;const S=()=>c(r,N,y)&&l(r,N)!==0,C=()=>l(i,y)===0||c(i,N,y),_=()=>p||S(),w=()=>!p||C();for(let k=h,M=h;k<=m;++k)v=e[k%o],!v.skip&&(y=d(v[n]),y!==N&&(p=c(y,r,i),b===null&&_()&&(b=l(y,r)===0?k:M),b!==null&&w()&&(f.push(qd({start:b,end:k,loop:u,count:o,style:g})),b=null),M=k,N=y));return b!==null&&f.push(qd({start:b,end:m,loop:u,count:o,style:g})),f}function kg(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=jg(n[r],t.points,e);i.length&&s.push(...i)}return s}function jw(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function kw(t,e,s,n){const r=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&i.push({start:e%r,end:o%r,loop:n}),i}function ww(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:o,end:l}=jw(s,r,i,n);if(n===!0)return Jd(t,[{start:o,end:l,loop:i}],s,e);const c=l<o?l+r:l,d=!!t._fullLoop&&o===0&&l===r-1;return Jd(t,kw(s,o,c,d),s,e)}function Jd(t,e,s,n){return!n||!n.setContext||!s?e:Nw(t,e,s,n)}function Nw(t,e,s,n){const r=t._chart.getContext(),i=Xd(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=s.length,d=[];let h=i,m=e[0].start,u=m;function g(f,p,b,y){const v=l?-1:1;if(f!==p){for(f+=c;s[f%c].skip;)f-=v;for(;s[p%c].skip;)p+=v;f%c!==p%c&&(d.push({start:f%c,end:p%c,loop:b,style:y}),h=y,m=p%c)}}for(const f of e){m=l?m:f.start;let p=s[m%c],b;for(u=m+1;u<=f.end;u++){const y=s[u%c];b=Xd(n.setContext(Zt(r,{type:"segment",p0:p,p1:y,p0DataIndex:(u-1)%c,p1DataIndex:u%c,datasetIndex:o}))),Sw(b,h)&&g(m,u-1,f.loop,h),p=y,h=b}m<u-1&&g(m,u-1,f.loop,h)}return d}function Xd(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Sw(t,e){if(!e)return!1;const s=[],n=function(r,i){return Gl(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function ta(t,e,s){return t.options.clip?t[s]:e[s]}function Cw(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:ta(s,e,"left"),right:ta(s,e,"right"),top:ta(n,e,"top"),bottom:ta(n,e,"bottom")}:e}function wg(t,e){const s=e._clip;if(s.disabled)return!1;const n=Cw(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class _w{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ag.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var jt=new _w;const Qd="transparent",Mw={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Hd(t||Qd),r=n.valid&&Hd(e||Qd);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class Ew{constructor(e,s,n,r){const i=s[n];r=Bn([e.to,r,i,e.from]);const o=Bn([e.from,i,r]);this._active=!0,this._fn=e.fn||Mw[e.type||typeof o],this._easing=Kn[e.easing]||Kn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Bn([e.to,s,r,e.from]),this._from=Bn([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class Ng{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ne(e))return;const s=Object.keys(he.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!ne(i))return;const o={};for(const l of s)o[l]=i[l];(de(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=Aw(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&Tw(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const h=s[d];let m=i[d];const u=n.get(d);if(m)if(u&&m.active()){m.update(u,h,l);continue}else m.cancel();if(!u||!u.duration){e[d]=h;continue}i[d]=m=new Ew(u,e,d,h),r.push(m)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return jt.add(this._chart,n),!0}}function Tw(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function Aw(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Zd(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function Dw(t,e,s){if(s===!1)return!1;const n=Zd(t,s),r=Zd(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function Pw(t){let e,s,n,r;return ne(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function Sg(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function eh(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let o,l,c,d;if(e===null)return;let h=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(h=!0,n.all)continue;break}d=t.values[c],xe(d)&&(i||e===0||ft(e)===ft(d))&&(e+=d)}return!h&&!n.all?0:e}function Rw(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,h;for(c=0,d=o.length;c<d;++c)h=o[c],l[c]={[r]:h,[i]:t[h]};return l}function Wi(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Lw(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Ow(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function Iw(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function th(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function sh(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,d=o.axis,h=Lw(i,o,n),m=e.length;let u;for(let g=0;g<m;++g){const f=e[g],{[c]:p,[d]:b}=f,y=f._stacks||(f._stacks={});u=y[d]=Iw(r,h,p),u[l]=b,u._top=th(u,o,!0,n.type),u._bottom=th(u,o,!1,n.type);const v=u._visualValues||(u._visualValues={});v[l]=b}}function Yi(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function Fw(t,e){return Zt(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Bw(t,e,s){return Zt(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function En(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const Gi=t=>t==="reset"||t==="none",nh=(t,e)=>e?t:Object.assign({},t),$w=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Sg(s,!0),values:null};class it{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wi(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&En(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(m,u,g,f)=>m==="x"?u:m==="r"?f:g,i=s.xAxisID=Q(n.xAxisID,Yi(e,"x")),o=s.yAxisID=Q(n.yAxisID,Yi(e,"y")),l=s.rAxisID=Q(n.rAxisID,Yi(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,i,o,l),h=s.vAxisID=r(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Bd(this._data,this),e._stacked&&En(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ne(s)){const r=this._cachedMeta;this._data=Rw(s,r)}else if(n!==s){if(n){Bd(n,this);const r=this._cachedMeta;En(r),r._parsed=[]}s&&Object.isExtensible(s)&&Nk(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=Wi(s.vScale,s),s.stack!==n.stack&&(r=!0,En(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(sh(this,s._parsed),s._stacked=Wi(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],h,m,u;if(this._parsing===!1)n._parsed=r,n._sorted=!0,u=r;else{de(r[e])?u=this.parseArrayData(n,r,e,s):ne(r[e])?u=this.parseObjectData(n,r,e,s):u=this.parsePrimitiveData(n,r,e,s);const g=()=>m[l]===null||d&&m[l]<d[l];for(h=0;h<s;++h)n._parsed[h+e]=m=u[h],c&&(g()&&(c=!1),d=m);n._sorted=c}o&&sh(this,u)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,d=i.getLabels(),h=i===o,m=new Array(r);let u,g,f;for(u=0,g=r;u<g;++u)f=u+n,m[u]={[l]:h||i.parse(d[f],f),[c]:o.parse(s[f],f)};return m}parseArrayData(e,s,n,r){const{xScale:i,yScale:o}=e,l=new Array(r);let c,d,h,m;for(c=0,d=r;c<d;++c)h=c+n,m=s[h],l[c]={x:i.parse(m[0],h),y:o.parse(m[1],h)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let h,m,u,g;for(h=0,m=r;h<m;++h)u=h+n,g=s[u],d[h]={x:i.parse(Gt(g,l),u),y:o.parse(Gt(g,c),u)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:Sg(r,!0),values:s._stacks[e.axis]._visualValues};return eh(l,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let o=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=eh(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=$w(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:m}=Ow(l);let u,g;function f(){g=r[u];const p=g[l.axis];return!xe(g[e.axis])||h>p||m<p}for(u=0;u<o&&!(!f()&&(this.updateRangeFromParsed(d,e,g,c),i));++u);if(i){for(u=o-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(d,e,g,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=s.length;r<i;++r)o=s[r][e.axis],xe(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=Pw(Q(this.options.clip,Dw(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(e,i,l,c),h=l;h<l+c;++h){const m=r[h];m.hidden||(m.active&&d?o.push(m):m.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Bw(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Fw(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&ur(n);if(l)return nh(l,c);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),m=r?[`${e}Hover`,"hover",e,""]:[e,""],u=d.getOptionScopes(this.getDataset(),h),g=Object.keys(he.elements[e]),f=()=>this.getContext(n,r,s),p=d.resolveNamedOptions(u,g,f,m);return p.$shared&&(p.$shared=c,i[o]=Object.freeze(nh(p,c))),p}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const h=this.chart.config,m=h.datasetAnimationScopeKeys(this._type,s),u=h.getOptionScopes(this.getDataset(),m);c=h.createResolver(u,this.getContext(e,n,s))}const d=new Ng(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Gi(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,r){Gi(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!Gi(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,i=s.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,o=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=o;l--)d[l]=d[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&En(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}$(it,"defaults",{}),$(it,"datasetElementType",null),$(it,"dataElementType",null);function Vw(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let r=0,i=s.length;r<i;r++)n=n.concat(s[r].controller.getAllParsedValues(t));t._cache.$bar=rg(n.sort((r,i)=>r-i))}return t._cache.$bar}function Hw(t){const e=t.iScale,s=Vw(e,t.type);let n=e._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(ur(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,i=s.length;r<i;++r)o=e.getPixelForValue(s[r]),c();for(l=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),c();return n}function zw(t,e,s,n){const r=s.barThickness;let i,o;return se(r)?(i=e.min*s.categoryPercentage,o=s.barPercentage):(i=r*n,o=1),{chunk:i/n,ratio:o,start:e.pixels[t]-i/2}}function Uw(t,e,s,n){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,l=t<r.length-1?r[t+1]:null;const c=s.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/n,ratio:s.barPercentage,start:d}}function Ww(t,e,s,n){const r=s.parse(t[0],n),i=s.parse(t[1],n),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[s.axis]=d,e._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function Cg(t,e,s,n){return de(t)?Ww(t,e,s,n):e[s.axis]=s.parse(t,n),e}function rh(t,e,s,n){const r=t.iScale,i=t.vScale,o=r.getLabels(),l=r===i,c=[];let d,h,m,u;for(d=s,h=s+n;d<h;++d)u=e[d],m={},m[r.axis]=l||r.parse(o[d],d),c.push(Cg(u,m,i,d));return c}function Ki(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Yw(t,e,s){return t!==0?ft(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function Gw(t){let e,s,n,r,i;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(r="end",i="start"):(r="start",i="end"),{start:s,end:n,reverse:e,top:r,bottom:i}}function Kw(t,e,s,n){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:h}=Gw(t);r==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?r=d:(s._bottom||0)===n?r=h:(i[ah(h,o,l,c)]=!0,r=d)),i[ah(r,o,l,c)]=!0,t.borderSkipped=i}function ah(t,e,s,n){return n?(t=qw(t,e,s),t=ih(t,s,e)):t=ih(t,e,s),t}function qw(t,e,s){return t===e?s:t===s?e:t}function ih(t,e,s){return t==="start"?e:t==="end"?s:t}function Jw(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class Jn extends it{parsePrimitiveData(e,s,n,r){return rh(e,s,n,r)}parseArrayData(e,s,n,r){return rh(e,s,n,r)}parseObjectData(e,s,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,h=o.axis==="x"?l:c,m=[];let u,g,f,p;for(u=n,g=n+r;u<g;++u)p=s[u],f={},f[i.axis]=i.parse(Gt(p,d),u),m.push(Cg(Gt(p,h),f,o,u));return m}updateRangeFromParsed(e,s,n,r){super.updateRangeFromParsed(e,s,n,r);const i=n._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:r}=s,i=this.getParsed(e),o=i._custom,l=Ki(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),h=this._getRuler(),{sharedOptions:m,includeOptions:u}=this._getSharedOptions(s,r);for(let g=s;g<s+n;g++){const f=this.getParsed(g),p=i||se(f[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,h),y=(f._stacks||{})[l.axis],v={horizontal:d,base:p.base,enableBorderRadius:!y||Ki(f._custom)||o===y._top||o===y._bottom,x:d?p.head:b.center,y:d?b.center:p.head,height:d?b.size:Math.abs(p.size),width:d?Math.abs(p.size):b.size};u&&(v.options=m||this.resolveDataElementOptions(g,e[g].active?"active":r));const N=v.options||e[g].options;Kw(v,N,y,o),Jw(v,N,h.ratio),this.updateElement(e[g],g,v,r)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),i=n.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[n.axis],d=h=>{const m=h._parsed.find(g=>g[n.axis]===c),u=m&&m[h.vScale.axis];if(se(u)||isNaN(u))return!0};for(const h of r)if(!(s!==void 0&&d(h))&&((i===!1||o.indexOf(h.stack)===-1||i===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Q(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const r=this._getStacks(e,n),i=s!==void 0?r.indexOf(s):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,r=[];let i,o;for(i=0,o=s.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const l=e.barThickness;return{min:l||Hw(s),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),d=c._custom,h=Ki(d);let m=c[s.axis],u=0,g=n?this.applyStack(s,c,n):m,f,p;g!==m&&(u=g-m,g=m),h&&(m=d.barStart,g=d.barEnd-d.barStart,m!==0&&ft(m)!==ft(d.barEnd)&&(u=0),u+=m);const b=!se(i)&&!h?i:u;let y=s.getPixelForValue(b);if(this.chart.getDataVisibility(e)?f=s.getPixelForValue(u+g):f=y,p=f-y,Math.abs(p)<o){p=Yw(p,s,l)*o,m===l&&(y-=p/2);const v=s.getPixelForDecimal(0),N=s.getPixelForDecimal(1),S=Math.min(v,N),C=Math.max(v,N);y=Math.max(Math.min(y,C),S),f=y+p,n&&!h&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(f)-s.getValueForPixel(y))}if(y===s.getPixelForValue(l)){const v=ft(p)*s.getLineWidthForValue(l)/2;y+=v,p-=v}return{size:p,base:y,head:f,center:f+p/2}}_calculateBarIndexPixels(e,s){const n=s.scale,r=this.options,i=r.skipNull,o=Q(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(s.grouped){const h=i?this._getStackCount(e):s.stackCount,m=r.barThickness==="flex"?Uw(e,s,r,h*d):zw(e,s,r,h*d),u=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(Q(u,this.getFirstScaleIdForIndexAxis())),f=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+g;l=m.start+m.chunk*f+m.chunk/2,c=Math.min(o,m.chunk*m.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(o,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)this.getParsed(i)[s.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}$(Jn,"id","bar"),$(Jn,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),$(Jn,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ka extends it{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,r){const i=super.parsePrimitiveData(e,s,n,r);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+n).radius;return i}parseArrayData(e,s,n,r){const i=super.parseArrayData(e,s,n,r);for(let o=0;o<i.length;o++){const l=s[n+o];i[o]._custom=Q(l[2],this.resolveDataElementOptions(o+n).radius)}return i}parseObjectData(e,s,n,r){const i=super.parseObjectData(e,s,n,r);for(let o=0;o<i.length;o++){const l=s[n+o];i[o]._custom=Q(l&&l.r&&+l.r,this.resolveDataElementOptions(o+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=s,o=this.getParsed(e),l=r.getLabelForValue(o.x),c=i.getLabelForValue(o.y),d=o._custom;return{label:n[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,r){const i=r==="reset",{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(s,r),h=o.axis,m=l.axis;for(let u=s;u<s+n;u++){const g=e[u],f=!i&&this.getParsed(u),p={},b=p[h]=i?o.getPixelForDecimal(.5):o.getPixelForValue(f[h]),y=p[m]=i?l.getBasePixel():l.getPixelForValue(f[m]);p.skip=isNaN(b)||isNaN(y),d&&(p.options=c||this.resolveDataElementOptions(u,g.active?"active":r),i&&(p.options.radius=0)),this.updateElement(g,u,p,r)}}resolveDataElementOptions(e,s){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,s);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return s!=="active"&&(r.radius=0),r.radius+=Q(n&&n._custom,i),r}}$(ka,"id","bubble"),$(ka,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),$(ka,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Xw(t,e,s){let n=1,r=1,i=0,o=0;if(e<ce){const l=t,c=l+e,d=Math.cos(l),h=Math.sin(l),m=Math.cos(c),u=Math.sin(c),g=(N,S,C)=>mr(N,l,c,!0)?1:Math.max(S,S*s,C,C*s),f=(N,S,C)=>mr(N,l,c,!0)?-1:Math.min(S,S*s,C,C*s),p=g(0,d,m),b=g(ve,h,u),y=f(re,d,m),v=f(re+ve,h,u);n=(p-y)/2,r=(b-v)/2,i=-(p+y)/2,o=-(b+v)/2}return{ratioX:n,ratioY:r,offsetX:i,offsetY:o}}class $t extends it{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let i=c=>+n[c];if(ne(n[e])){const{key:c="value"}=this._parsing;i=d=>+Gt(n[d],c)}let o,l;for(o=e,l=e+s;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return at(this.options.rotation-90)}_getCircumference(){return at(this.options.circumference)}_getRotationExtents(){let e=ce,s=-ce;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),s=Math.max(s,i+o)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-o)/2,0),c=Math.min(ck(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:h,rotation:m}=this._getRotationExtents(),{ratioX:u,ratioY:g,offsetX:f,offsetY:p}=Xw(m,h,c),b=(n.width-o)/u,y=(n.height-o)/g,v=Math.max(Math.min(b,y)/2,0),N=Zm(this.options.radius,v),S=Math.max(N*c,0),C=(N-S)/this._getVisibleDatasetWeightTotal();this.offsetX=f*N,this.offsetY=p*N,r.total=this.calculateTotal(),this.outerRadius=N-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,s){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/ce)}updateElements(e,s,n,r){const i=r==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,h=(l.left+l.right)/2,m=(l.top+l.bottom)/2,u=i&&d.animateScale,g=u?0:this.innerRadius,f=u?0:this.outerRadius,{sharedOptions:p,includeOptions:b}=this._getSharedOptions(s,r);let y=this._getRotation(),v;for(v=0;v<s;++v)y+=this._circumference(v,i);for(v=s;v<s+n;++v){const N=this._circumference(v,i),S=e[v],C={x:h+this.offsetX,y:m+this.offsetY,startAngle:y,endAngle:y+N,circumference:N,outerRadius:f,innerRadius:g};b&&(C.options=p||this.resolveDataElementOptions(v,S.active?"active":r)),y+=N,this.updateElement(S,v,C,r)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,r;for(r=0;r<s.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!s[r].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?ce*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Or(s._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let s=0;const n=this.chart;let r,i,o,l,c;if(!e){for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),e=o.data,l=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(s=Math.max(s,c.borderWidth||0,c.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,r=e.length;n<r;++n){const i=this.resolveDataElementOptions(n);s=Math.max(s,i.offset||0,i.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(Q(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$($t,"id","doughnut"),$($t,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),$($t,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),$($t,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return s.labels.map((i,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}});class wa extends it{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=s,o=this.chart._animationsDisabled;let{start:l,count:c}=og(s,r,o);this._drawStart=l,this._drawCount=c,lg(s)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:d},e),this.updateElements(r,l,c,e)}updateElements(e,s,n,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:m}=this._getSharedOptions(s,r),u=o.axis,g=l.axis,{spanGaps:f,segment:p}=this.options,b=nn(f)?f:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||r==="none",v=s+n,N=e.length;let S=s>0&&this.getParsed(s-1);for(let C=0;C<N;++C){const _=e[C],w=y?_:{};if(C<s||C>=v){w.skip=!0;continue}const k=this.getParsed(C),M=se(k[g]),E=w[u]=o.getPixelForValue(k[u],C),A=w[g]=i||M?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,k,c):k[g],C);w.skip=isNaN(E)||isNaN(A)||M,w.stop=C>0&&Math.abs(k[u]-S[u])>b,p&&(w.parsed=k,w.raw=d.data[C]),m&&(w.options=h||this.resolveDataElementOptions(C,_.active?"active":r)),y||this.updateElement(_,C,w,r),S=k}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}$(wa,"id","line"),$(wa,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),$(wa,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Xn extends it{constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Or(s._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,s,n,r){return xg.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,r)=>{const i=this.getParsed(r).r;!isNaN(i)&&this.chart.getDataVisibility(r)&&(i<s.min&&(s.min=i),i>s.max&&(s.max=i))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,n=e.options,r=Math.min(s.right-s.left,s.bottom-s.top),i=Math.max(r/2,0),o=Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0),l=(i-o)/e.getVisibleDatasetCount();this.outerRadius=i-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,s,n,r){const i=r==="reset",o=this.chart,c=o.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,m=d.yCenter,u=d.getIndexAngle(0)-.5*re;let g=u,f;const p=360/this.countVisibleElements();for(f=0;f<s;++f)g+=this._computeAngle(f,r,p);for(f=s;f<s+n;f++){const b=e[f];let y=g,v=g+this._computeAngle(f,r,p),N=o.getDataVisibility(f)?d.getDistanceFromCenterForValue(this.getParsed(f).r):0;g=v,i&&(c.animateScale&&(N=0),c.animateRotate&&(y=v=u));const S={x:h,y:m,innerRadius:0,outerRadius:N,startAngle:y,endAngle:v,options:this.resolveDataElementOptions(f,b.active?"active":r)};this.updateElement(b,f,S,r)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?at(this.resolveDataElementOptions(e,s).angle||n):0}}$(Xn,"id","polarArea"),$(Xn,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),$(Xn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return s.labels.map((i,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class zo extends $t{}$(zo,"id","pie"),$(zo,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Qn extends it{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return xg.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta,n=s.dataset,r=s.data||[],i=s.iScale.getLabels();if(n.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===r.length,options:o};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){const i=this._cachedMeta.rScale,o=r==="reset";for(let l=s;l<s+n;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":r),h=i.getPointPositionForValue(l,this.getParsed(l).r),m=o?i.xCenter:h.x,u=o?i.yCenter:h.y,g={x:m,y:u,angle:h.angle,skip:isNaN(m)||isNaN(u),options:d};this.updateElement(c,l,g,r)}}}$(Qn,"id","radar"),$(Qn,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),$(Qn,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Na extends it{getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=s,o=this.getParsed(e),l=r.getLabelForValue(o.x),c=i.getLabelForValue(o.y);return{label:n[e]||"",value:"("+l+", "+c+")"}}update(e){const s=this._cachedMeta,{data:n=[]}=s,r=this.chart._animationsDisabled;let{start:i,count:o}=og(s,n,r);if(this._drawStart=i,this._drawCount=o,lg(s)&&(i=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=s;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=n;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:d},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(s,r),m=this.getSharedOptions(h),u=this.includeOptions(r,m),g=o.axis,f=l.axis,{spanGaps:p,segment:b}=this.options,y=nn(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||r==="none";let N=s>0&&this.getParsed(s-1);for(let S=s;S<s+n;++S){const C=e[S],_=this.getParsed(S),w=v?C:{},k=se(_[f]),M=w[g]=o.getPixelForValue(_[g],S),E=w[f]=i||k?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,_,c):_[f],S);w.skip=isNaN(M)||isNaN(E)||k,w.stop=S>0&&Math.abs(_[g]-N[g])>y,b&&(w.parsed=_,w.raw=d.data[S]),u&&(w.options=m||this.resolveDataElementOptions(S,C.active?"active":r)),v||this.updateElement(C,S,w,r),N=_}this.updateSharedOptions(m,r,h)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let l=0;for(let c=s.length-1;c>=0;--c)l=Math.max(l,s[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}}$(Na,"id","scatter"),$(Na,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),$(Na,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Qw=Object.freeze({__proto__:null,BarController:Jn,BubbleController:ka,DoughnutController:$t,LineController:wa,PieController:zo,PolarAreaController:Xn,RadarController:Qn,ScatterController:Na});function is(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ec{constructor(e){$(this,"options");this.options=e||{}}static override(e){Object.assign(ec.prototype,e)}init(){}formats(){return is()}parse(){return is()}format(){return is()}add(){return is()}diff(){return is()}startOf(){return is()}endOf(){return is()}}var Zw={_date:ec};function eN(t,e,s,n){const{controller:r,data:i,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const d=l._reversePixels?kk:Mt;if(n){if(r._sharedOptions){const h=i[0],m=typeof h.getRange=="function"&&h.getRange(e);if(m){const u=d(i,e,s-m),g=d(i,e,s+m);return{lo:u.lo,hi:g.hi}}}}else{const h=d(i,e,s);if(c){const{vScale:m}=r._cachedMeta,{_parsed:u}=t,g=u.slice(0,h.lo+1).reverse().findIndex(p=>!se(p[m.axis]));h.lo-=Math.max(0,g);const f=u.slice(h.hi).findIndex(p=>!se(p[m.axis]));h.hi+=Math.max(0,f)}return h}}return{lo:0,hi:i.length-1}}function yi(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:h}=i[l],{lo:m,hi:u}=eN(i[l],e,o,r);for(let g=m;g<=u;++g){const f=h[g];f.skip||n(f,d,g)}}}function tN(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function qi(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||yi(t,s,e,function(l,c,d){!r&&!Et(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function sN(t,e,s,n){let r=[];function i(o,l,c){const{startAngle:d,endAngle:h}=o.getProps(["startAngle","endAngle"],n),{angle:m}=sg(o,{x:e.x,y:e.y});mr(m,d,h)&&r.push({element:o,datasetIndex:l,index:c})}return yi(t,s,e,i),r}function nN(t,e,s,n,r,i){let o=[];const l=tN(s);let c=Number.POSITIVE_INFINITY;function d(h,m,u){const g=h.inRange(e.x,e.y,r);if(n&&!g)return;const f=h.getCenterPoint(r);if(!(!!i||t.isPointInArea(f))&&!g)return;const b=l(e,f);b<c?(o=[{element:h,datasetIndex:m,index:u}],c=b):b===c&&o.push({element:h,datasetIndex:m,index:u})}return yi(t,s,e,d),o}function Ji(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?sN(t,e,s,r):nN(t,e,s,n,r,i)}function oh(t,e,s,n,r){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return yi(t,s,e,(c,d,h)=>{c[o]&&c[o](e[s],r)&&(i.push({element:c,datasetIndex:d,index:h}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var rN={modes:{index(t,e,s,n){const r=cs(e,t),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?qi(t,r,i,n,o):Ji(t,r,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const h=l[0].index,m=d.data[h];m&&!m.skip&&c.push({element:m,datasetIndex:d.index,index:h})}),c):[]},dataset(t,e,s,n){const r=cs(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?qi(t,r,i,n,o):Ji(t,r,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let h=0;h<d.length;++h)l.push({element:d[h],datasetIndex:c,index:h})}return l},point(t,e,s,n){const r=cs(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return qi(t,r,i,n,o)},nearest(t,e,s,n){const r=cs(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return Ji(t,r,i,s.intersect,n,o)},x(t,e,s,n){const r=cs(e,t);return oh(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=cs(e,t);return oh(t,r,"y",s.intersect,n)}}};const _g=["left","top","right","bottom"];function Tn(t,e){return t.filter(s=>s.pos===e)}function lh(t,e){return t.filter(s=>_g.indexOf(s.pos)===-1&&s.box.axis===e)}function An(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function aN(t){const e=[];let s,n,r,i,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return e}function iN(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!_g.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function oN(t,e){const s=iN(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],h=d&&l.stackWeight/d.weight;l.horizontal?(l.width=h?h*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=h?h*r:c&&e.availableHeight)}return s}function lN(t){const e=aN(t),s=An(e.filter(d=>d.box.fullSize),!0),n=An(Tn(e,"left"),!0),r=An(Tn(e,"right")),i=An(Tn(e,"top"),!0),o=An(Tn(e,"bottom")),l=lh(e,"x"),c=lh(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Tn(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function ch(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function Mg(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function cN(t,e,s,n){const{pos:r,box:i}=s,o=t.maxPadding;if(!ne(r)){s.size&&(t[r]-=s.size);const m=n[s.stack]||{size:0,count:1};m.size=Math.max(m.size,s.horizontal?i.height:i.width),s.size=m.size/m.count,t[r]+=s.size}i.getPadding&&Mg(o,i.getPadding());const l=Math.max(0,e.outerWidth-ch(o,t,"left","right")),c=Math.max(0,e.outerHeight-ch(o,t,"top","bottom")),d=l!==t.w,h=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:h}:{same:h,other:d}}function dN(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function hN(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function $n(t,e,s,n){const r=[];let i,o,l,c,d,h;for(i=0,o=t.length,d=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,hN(l.horizontal,e));const{same:m,other:u}=cN(e,s,l,n);d|=m&&r.length,h=h||u,c.fullSize||r.push(l)}return d&&$n(r,e,s,n)||h}function sa(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function dh(t,e,s,n){const r=s.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,d=n[l.stack]||{placed:0,weight:1},h=l.stackWeight/d.weight||1;if(l.horizontal){const m=e.w*h,u=d.size||c.height;ur(d.start)&&(o=d.start),c.fullSize?sa(c,r.left,o,s.outerWidth-r.right-r.left,u):sa(c,e.left+d.placed,o,m,u),d.start=o,d.placed+=m,o=c.bottom}else{const m=e.h*h,u=d.size||c.width;ur(d.start)&&(i=d.start),c.fullSize?sa(c,i,r.top,u,s.outerHeight-r.bottom-r.top):sa(c,i,e.top+d.placed,u,m),d.start=i,d.placed+=m,i=c.right}}e.x=i,e.y=o}var Ae={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=Pe(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=lN(t.boxes),c=l.vertical,d=l.horizontal;ae(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const h=c.reduce((p,b)=>b.box.options&&b.box.options.display===!1?p:p+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),u=Object.assign({},r);Mg(u,Pe(n));const g=Object.assign({maxPadding:u,w:i,h:o,x:r.left,y:r.top},r),f=oN(c.concat(d),m);$n(l.fullSize,g,m,f),$n(c,g,m,f),$n(d,g,m,f)&&$n(c,g,m,f),dN(g),dh(l.leftAndTop,g,m,f),g.x+=g.w,g.y+=g.h,dh(l.rightAndBottom,g,m,f),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ae(l.chartArea,p=>{const b=p.box;Object.assign(b,t.chartArea),b.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Eg{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class uN extends Eg{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Sa="$chartjs",mN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hh=t=>t===null||t==="";function gN(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[Sa]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",hh(r)){const i=Kd(t,"width");i!==void 0&&(t.width=i)}if(hh(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Kd(t,"height");i!==void 0&&(t.height=i)}return t}const Tg=fw?{passive:!0}:!1;function fN(t,e,s){t&&t.addEventListener(e,s,Tg)}function xN(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Tg)}function pN(t,e){const s=mN[t.type]||t.type,{x:n,y:r}=cs(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Ha(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function bN(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Ha(l.addedNodes,n),o=o&&!Ha(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function yN(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Ha(l.removedNodes,n),o=o&&!Ha(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const fr=new Map;let uh=0;function Ag(){const t=window.devicePixelRatio;t!==uh&&(uh=t,fr.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function vN(t,e){fr.size||window.addEventListener("resize",Ag),fr.set(t,e)}function jN(t){fr.delete(t),fr.size||window.removeEventListener("resize",Ag)}function kN(t,e,s){const n=t.canvas,r=n&&Zl(n);if(!r)return;const i=ig((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,h=c.contentRect.height;d===0&&h===0||i(d,h)});return o.observe(r),vN(t,i),o}function Xi(t,e,s){s&&s.disconnect(),e==="resize"&&jN(t)}function wN(t,e,s){const n=t.canvas,r=ig(i=>{t.ctx!==null&&s(pN(i,t))},t);return fN(n,e,r),r}class NN extends Eg{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(gN(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Sa])return!1;const n=s[Sa].initial;["height","width"].forEach(i=>{const o=n[i];se(o)?s.removeAttribute(i):s.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[Sa],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:bN,detach:yN,resize:kN}[s]||wN;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:Xi,detach:Xi,resize:Xi}[s]||xN)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return gw(e,s,n,r)}isAttached(e){const s=e&&Zl(e);return!!(s&&s.isConnected)}}function SN(t){return!Ql()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?uN:NN}var pa;let Rt=(pa=class{constructor(){$(this,"x");$(this,"y");$(this,"active",!1);$(this,"options");$(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return nn(this.x)&&nn(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}},$(pa,"defaults",{}),$(pa,"defaultRoutes"),pa);function CN(t,e){const s=t.options.ticks,n=_N(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?EN(e):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return TN(e,d,i,o/r),d;const h=MN(i,e,r);if(o>0){let m,u;const g=o>1?Math.round((c-l)/(o-1)):null;for(na(e,d,h,se(g)?0:l-g,l),m=0,u=o-1;m<u;m++)na(e,d,h,i[m],i[m+1]);return na(e,d,h,c,se(g)?e.length:c+g),d}return na(e,d,h),d}function _N(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function MN(t,e,s){const n=AN(t),r=e.length/s;if(!n)return Math.max(r,1);const i=pk(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function EN(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function TN(t,e,s,n){let r=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=s[r*n])}function na(t,e,s,n,r){const i=Q(n,0),o=Math.min(Q(r,t.length),t.length);let l=0,c,d,h;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),h=i;h<0;)l++,h=Math.round(i+l*s);for(d=Math.max(i,0);d<o;d++)d===h&&(e.push(t[d]),l++,h=Math.round(i+l*s))}function AN(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const DN=t=>t==="left"?"right":t==="right"?"left":t,mh=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,gh=(t,e)=>Math.min(e||t,t);function fh(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function PN(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-i,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<i-l||c>o+l)))return c}function RN(t,e){ae(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function Dn(t){return t.drawTicks?t.tickLength:0}function xh(t,e){if(!t.display)return 0;const s=Ne(t.font,e),n=Pe(t.padding);return(de(t.text)?t.text.length:1)*s.lineHeight+n.height}function LN(t,e){return Zt(t,{scale:e,type:"scale"})}function ON(t,e,s){return Zt(t,{tick:s,index:e,type:"tick"})}function IN(t,e,s){let n=Yl(t);return(s&&e!=="right"||!s&&e==="right")&&(n=DN(n)),n}function FN(t,e,s,n){const{top:r,left:i,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:h}=c;let m=0,u,g,f;const p=o-r,b=l-i;if(t.isHorizontal()){if(g=Me(n,i,l),ne(s)){const y=Object.keys(s)[0],v=s[y];f=h[y].getPixelForValue(v)+p-e}else s==="center"?f=(d.bottom+d.top)/2+p-e:f=mh(t,s,e);u=l-i}else{if(ne(s)){const y=Object.keys(s)[0],v=s[y];g=h[y].getPixelForValue(v)-b+e}else s==="center"?g=(d.left+d.right)/2-b+e:g=mh(t,s,e);f=Me(n,o,r),m=s==="left"?-ve:ve}return{titleX:g,titleY:f,maxWidth:u,rotation:m}}class Ds extends Rt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=ze(e,Number.POSITIVE_INFINITY),s=ze(s,Number.NEGATIVE_INFINITY),n=ze(n,Number.POSITIVE_INFINITY),r=ze(r,Number.NEGATIVE_INFINITY),{min:ze(e,n),max:ze(s,r),minDefined:xe(e),maxDefined:xe(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:ze(s,ze(n,s)),max:ze(n,ze(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Yk(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?fh(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=CN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),le(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=le(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=gh(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),m=h.widest.width,u=h.highest.height,g=Se(this.chart.width-m,0,this.maxWidth);l=e.offset?this.maxWidth/n:g/(n-1),m+6>l&&(l=g/(n-(e.offset?.5:1)),c=this.maxHeight-Dn(e.grid)-s.padding-xh(e.title,this.chart.options.font),d=Math.sqrt(m*m+u*u),o=Ul(Math.min(Math.asin(Se((h.highest.height+6)/l,-1,1)),Math.asin(Se(c/d,-1,1))-Math.asin(Se(u/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){le(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=xh(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=Dn(i)+c):(e.height=this.maxHeight,e.width=Dn(i)+c),n.display&&this.ticks.length){const{first:d,last:h,widest:m,highest:u}=this._getLabelSizes(),g=n.padding*2,f=at(this.labelRotation),p=Math.cos(f),b=Math.sin(f);if(l){const y=n.mirror?0:b*m.width+p*u.height;e.height=Math.min(this.maxHeight,e.height+y+g)}else{const y=n.mirror?0:p*m.width+b*u.height;e.width=Math.min(this.maxWidth,e.width+y+g)}this._calculatePadding(d,h,b,p)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,g=0;c?d?(u=r*e.width,g=n*s.height):(u=n*e.height,g=r*s.width):i==="start"?g=s.width:i==="end"?u=e.width:i!=="inner"&&(u=e.width/2,g=s.width/2),this.paddingLeft=Math.max((u-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-m+o)*this.width/(this.width-m),0)}else{let h=s.height/2,m=e.height/2;i==="start"?(h=0,m=e.height):i==="end"&&(h=s.height,m=0),this.paddingTop=h+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)se(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=fh(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/gh(s,n));let d=0,h=0,m,u,g,f,p,b,y,v,N,S,C;for(m=0;m<s;m+=c){if(f=e[m].label,p=this._resolveTickFontOptions(m),r.font=b=p.string,y=i[b]=i[b]||{data:{},gc:[]},v=p.lineHeight,N=S=0,!se(f)&&!de(f))N=$a(r,y.data,y.gc,N,f),S=v;else if(de(f))for(u=0,g=f.length;u<g;++u)C=f[u],!se(C)&&!de(C)&&(N=$a(r,y.data,y.gc,N,C),S+=v);o.push(N),l.push(S),d=Math.max(N,d),h=Math.max(S,h)}RN(i,s);const _=o.indexOf(d),w=l.indexOf(h),k=M=>({width:o[M]||0,height:l[M]||0});return{first:k(0),last:k(s-1),widest:k(_),highest:k(w),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return jk(this._alignToPixels?as(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=ON(this.getContext(),e,n))}return this.$context||(this.$context=LN(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=at(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),m=this.ticks.length+(c?1:0),u=Dn(i),g=[],f=l.setContext(this.getContext()),p=f.display?f.width:0,b=p/2,y=function(L){return as(n,L,p)};let v,N,S,C,_,w,k,M,E,A,O,R;if(o==="top")v=y(this.bottom),w=this.bottom-u,M=v-b,A=y(e.top)+b,R=e.bottom;else if(o==="bottom")v=y(this.top),A=e.top,R=y(e.bottom)-b,w=v+b,M=this.top+u;else if(o==="left")v=y(this.right),_=this.right-u,k=v-b,E=y(e.left)+b,O=e.right;else if(o==="right")v=y(this.left),E=e.left,O=y(e.right)-b,_=v+b,k=this.left+u;else if(s==="x"){if(o==="center")v=y((e.top+e.bottom)/2+.5);else if(ne(o)){const L=Object.keys(o)[0],F=o[L];v=y(this.chart.scales[L].getPixelForValue(F))}A=e.top,R=e.bottom,w=v+b,M=w+u}else if(s==="y"){if(o==="center")v=y((e.left+e.right)/2);else if(ne(o)){const L=Object.keys(o)[0],F=o[L];v=y(this.chart.scales[L].getPixelForValue(F))}_=v-b,k=_-u,E=e.left,O=e.right}const T=Q(r.ticks.maxTicksLimit,m),D=Math.max(1,Math.ceil(m/T));for(N=0;N<m;N+=D){const L=this.getContext(N),F=i.setContext(L),I=l.setContext(L),U=F.lineWidth,B=F.color,z=I.dash||[],K=I.dashOffset,W=F.tickWidth,H=F.tickColor,Y=F.tickBorderDash||[],ee=F.tickBorderDashOffset;S=PN(this,N,c),S!==void 0&&(C=as(n,S,U),d?_=k=E=O=C:w=M=A=R=C,g.push({tx1:_,ty1:w,tx2:k,ty2:M,x1:E,y1:A,x2:O,y2:R,width:U,color:B,borderDash:z,borderDashOffset:K,tickWidth:W,tickColor:H,tickBorderDash:Y,tickBorderDashOffset:ee}))}return this._ticksLength=m,this._borderValue=v,g}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:h,mirror:m}=i,u=Dn(n.grid),g=u+h,f=m?-h:g,p=-at(this.labelRotation),b=[];let y,v,N,S,C,_,w,k,M,E,A,O,R="middle";if(r==="top")_=this.bottom-f,w=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+f,w=this._getXAxisLabelAlignment();else if(r==="left"){const D=this._getYAxisLabelAlignment(u);w=D.textAlign,C=D.x}else if(r==="right"){const D=this._getYAxisLabelAlignment(u);w=D.textAlign,C=D.x}else if(s==="x"){if(r==="center")_=(e.top+e.bottom)/2+g;else if(ne(r)){const D=Object.keys(r)[0],L=r[D];_=this.chart.scales[D].getPixelForValue(L)+g}w=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")C=(e.left+e.right)/2-g;else if(ne(r)){const D=Object.keys(r)[0],L=r[D];C=this.chart.scales[D].getPixelForValue(L)}w=this._getYAxisLabelAlignment(u).textAlign}s==="y"&&(c==="start"?R="top":c==="end"&&(R="bottom"));const T=this._getLabelSizes();for(y=0,v=l.length;y<v;++y){N=l[y],S=N.label;const D=i.setContext(this.getContext(y));k=this.getPixelForTick(y)+i.labelOffset,M=this._resolveTickFontOptions(y),E=M.lineHeight,A=de(S)?S.length:1;const L=A/2,F=D.color,I=D.textStrokeColor,U=D.textStrokeWidth;let B=w;o?(C=k,w==="inner"&&(y===v-1?B=this.options.reverse?"left":"right":y===0?B=this.options.reverse?"right":"left":B="center"),r==="top"?d==="near"||p!==0?O=-A*E+E/2:d==="center"?O=-T.highest.height/2-L*E+E:O=-T.highest.height+E/2:d==="near"||p!==0?O=E/2:d==="center"?O=T.highest.height/2-L*E:O=T.highest.height-A*E,m&&(O*=-1),p!==0&&!D.showLabelBackdrop&&(C+=E/2*Math.sin(p))):(_=k,O=(1-A)*E/2);let z;if(D.showLabelBackdrop){const K=Pe(D.backdropPadding),W=T.heights[y],H=T.widths[y];let Y=O-K.top,ee=0-K.left;switch(R){case"middle":Y-=W/2;break;case"bottom":Y-=W;break}switch(w){case"center":ee-=H/2;break;case"right":ee-=H;break;case"inner":y===v-1?ee-=H:y>0&&(ee-=H/2);break}z={left:ee,top:Y,width:H+K.width,height:W+K.height,color:D.backdropColor}}b.push({label:S,font:M,textOffset:O,options:{rotation:p,color:F,strokeColor:I,strokeWidth:U,textAlign:B,textBaseline:R,translation:[C,_],backdrop:z}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-at(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let d,h;return s==="left"?r?(h=this.right+i,n==="near"?d="left":n==="center"?(d="center",h+=c/2):(d="right",h+=c)):(h=this.right-l,n==="near"?d="right":n==="center"?(d="center",h-=c/2):(d="left",h=this.left)):s==="right"?r?(h=this.left+i,n==="near"?d="right":n==="center"?(d="center",h-=c/2):(d="left",h-=c)):(h=this.left+l,n==="near"?d="left":n==="center"?(d="center",h+=c/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,d,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=r.length;i<o;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,h,m,u;this.isHorizontal()?(d=as(e,this.left,o)-o/2,h=as(e,this.right,l)+l/2,m=u=c):(m=as(e,this.top,o)-o/2,u=as(e,this.bottom,l)+l/2,d=h=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,m),s.lineTo(h,u),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&xi(n,r);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,d=o.label,h=o.textOffset;Cs(n,d,0,h,c,l)}r&&pi(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=Ne(n.font),o=Pe(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||ne(s)?(c+=o.bottom,de(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:d,titleY:h,maxWidth:m,rotation:u}=FN(this,c,s,l);Cs(e,n.text,0,0,i,{color:n.color,maxWidth:m,rotation:u,textAlign:IN(l,s,r),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=Q(e.grid&&e.grid.z,-1),r=Q(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ds.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ne(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ra{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;VN(s)&&(n=this.register(s));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,BN(e,o,n),this.override&&he.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in he[r]&&(delete he[r][n],this.override&&delete Ss[n])}}function BN(t,e,s){const n=hr(Object.create(null),[s?he.get(s):{},he.get(e),t.defaults]);he.set(e,n),t.defaultRoutes&&$N(e,t.defaultRoutes),t.descriptors&&he.describe(e,t.descriptors)}function $N(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");he.route(i,r,c,l)})}function VN(t){return"id"in t&&"defaults"in t}class HN{constructor(){this.controllers=new ra(it,"datasets",!0),this.elements=new ra(Rt,"elements"),this.plugins=new ra(Object,"plugins"),this.scales=new ra(Ds,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ae(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=zl(e);le(n["before"+r],[],n),s[e](n),le(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var mt=new HN;class zN{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const i of e){const o=i.plugin,l=o[n],c=[s,r,i.options];if(le(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=Q(n.options&&n.options.plugins,{}),i=UN(n);return r===!1&&!s?[]:YN(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function UN(t){const e={},s=[],n=Object.keys(mt.plugins.items);for(let i=0;i<n.length;i++)s.push(mt.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function WN(t,e){return!e&&t===!1?null:t===!0?{}:t}function YN(t,{plugins:e,localIds:s},n,r){const i=[],o=t.getContext();for(const l of e){const c=l.id,d=WN(n[c],r);d!==null&&i.push({plugin:l,options:GN(t.config,{plugin:l,local:s[c]},d,o)})}return i}function GN(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Uo(t,e){const s=he.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function KN(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function qN(t,e){return t===e?"_index_":"_value_"}function ph(t){if(t==="x"||t==="y"||t==="r")return t}function JN(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Wo(t,...e){if(ph(t))return t;for(const s of e){const n=s.axis||JN(s.position)||t.length>1&&ph(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function bh(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function XN(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return bh(t,"x",s[0])||bh(t,"y",s[0])}return{}}function QN(t,e){const s=Ss[t.type]||{scales:{}},n=e.scales||{},r=Uo(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!ne(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Wo(o,l,XN(o,t),he.scales[l.type]),d=qN(c,r),h=s.scales||{};i[o]=Yn(Object.create(null),[{axis:c},l,h[c],h[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||Uo(l,e),h=(Ss[l]||{}).scales||{};Object.keys(h).forEach(m=>{const u=KN(m,c),g=o[u+"AxisID"]||u;i[g]=i[g]||Object.create(null),Yn(i[g],[{axis:u},n[g],h[m]])})}),Object.keys(i).forEach(o=>{const l=i[o];Yn(l,[he.scales[l.type],he.scale])}),i}function Dg(t){const e=t.options||(t.options={});e.plugins=Q(e.plugins,{}),e.scales=QN(t,e)}function Pg(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function ZN(t){return t=t||{},t.data=Pg(t.data),Dg(t),t}const yh=new Map,Rg=new Set;function aa(t,e){let s=yh.get(t);return s||(s=e(),yh.set(t,s),Rg.add(s)),s}const Pn=(t,e,s)=>{const n=Gt(e,s);n!==void 0&&t.add(n)};class e5{constructor(e){this._config=ZN(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Pg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Dg(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return aa(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return aa(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return aa(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return aa(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(h=>{e&&(c.add(e),h.forEach(m=>Pn(c,e,m))),h.forEach(m=>Pn(c,r,m)),h.forEach(m=>Pn(c,Ss[i]||{},m)),h.forEach(m=>Pn(c,he,m)),h.forEach(m=>Pn(c,Vo,m))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Rg.has(s)&&o.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,Ss[s]||{},he.datasets[s]||{},{type:s},he,Vo]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=vh(this._resolverCache,e,r);let c=o;if(s5(o,s)){i.$shared=!1,n=Kt(n)?n():n;const d=this.createResolver(e,n,l);c=rn(o,n,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,n=[""],r){const{resolver:i}=vh(this._resolverCache,e,n);return ne(s)?rn(i,s,void 0,r):i}}function vh(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:ql(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const t5=t=>ne(t)&&Object.getOwnPropertyNames(t).some(e=>Kt(t[e]));function s5(t,e){const{isScriptable:s,isIndexable:n}=ug(t);for(const r of e){const i=s(r),o=n(r),l=(o||i)&&t[r];if(i&&(Kt(l)||t5(l))||o&&de(l))return!0}return!1}var n5="4.5.0";const r5=["top","bottom","left","right","chartArea"];function jh(t,e){return t==="top"||t==="bottom"||r5.indexOf(t)===-1&&e==="x"}function kh(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function wh(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),le(s&&s.onComplete,[t],e)}function a5(t){const e=t.chart,s=e.options.animation;le(s&&s.onProgress,[t],e)}function Lg(t){return Ql()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ca={},Nh=t=>{const e=Lg(t);return Object.values(Ca).filter(s=>s.canvas===e).pop()};function i5(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const o=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=o)}}}function o5(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var Lt;let ct=(Lt=class{static register(...e){mt.add(...e),Sh()}static unregister(...e){mt.remove(...e),Sh()}constructor(e,s){const n=this.config=new e5(s),r=Lg(e),i=Nh(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||SN(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;if(this.id=lk(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sk(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],Ca[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}jt.listen(this,"complete",wh),jt.listen(this,"progress",a5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return se(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return mt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Gd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ud(this.canvas,this.ctx),this}stop(){return jt.stop(this),this}resize(e,s){jt.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Gd(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),le(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};ae(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=Wo(o,l),d=c==="r",h=c==="x";return{options:l,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),ae(i,o=>{const l=o.options,c=l.id,d=Wo(c,l),h=Q(l.type,o.dtype);(l.position===void 0||jh(l.position,d)!==jh(o.dposition))&&(l.position=o.dposition),r[c]=!0;let m=null;if(c in n&&n[c].type===h)m=n[c];else{const u=mt.getScale(h);m=new u({id:c,type:h,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(l,e)}),ae(r,(o,l)=>{o||delete n[l]}),ae(n,o=>{Ae.configure(this,o,o.options),Ae.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(kh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||Uo(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=mt.getController(l),{datasetElementType:d,dataElementType:h}=he.datasets[l];Object.assign(c,{dataElementType:mt.getElement(h),datasetElementType:d&&mt.getElement(d)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ae(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:m}=this.getDatasetMeta(d),u=!r&&i.indexOf(m)===-1;m.buildOrUpdateElements(u),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||ae(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(kh("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ae(this.scales,e=>{Ae.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Ld(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const o=n==="_removeElements"?-i:i;i5(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!Ld(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ae.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],ae(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Kt(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(jt.has(this)?this.attached&&!jt.running(this)&&jt.start(this):(this.draw(),wh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=wg(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&xi(s,r),e.controller.draw(),r&&pi(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Et(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=rN.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Zt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);ur(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),jt.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ud(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Ca[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};ae(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){ae(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},ae(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Ia(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,d)=>c.filter(h=>!d.some(m=>h.datasetIndex===m.datasetIndex&&h.index===m.index)),o=i(s,e),l=n?e:i(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,o=s,l=this._getActiveElements(e,r,n,o),c=gk(e),d=o5(e,this._lastEvent,n,c);n&&(this._lastEvent=null,le(i.onHover,[e,l,this],this),c&&le(i.onClick,[e,l,this],this));const h=!Ia(l,r);return(h||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,h}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},$(Lt,"defaults",he),$(Lt,"instances",Ca),$(Lt,"overrides",Ss),$(Lt,"registry",mt),$(Lt,"version",n5),$(Lt,"getChart",Nh),Lt);function Sh(){return ae(ct.instances,t=>t._plugins.invalidate())}function l5(t,e,s){const{startAngle:n,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:h}=c,m=Math.min(d/o,Ee(n-s));if(t.beginPath(),t.arc(r,i,o-d/2,n+m/2,s-m/2),l>0){const u=Math.min(d/l,Ee(n-s));t.arc(r,i,l+d/2,s-u/2,n+u/2,!0)}else{const u=Math.min(d/2,o*Ee(n-s));if(h==="round")t.arc(r,i,u,s-re/2,n+re/2,!0);else if(h==="bevel"){const g=2*u*u,f=-g*Math.cos(s+re/2)+r,p=-g*Math.sin(s+re/2)+i,b=g*Math.cos(n+re/2)+r,y=g*Math.sin(n+re/2)+i;t.lineTo(f,p),t.lineTo(b,y)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function c5(t,e,s){const{startAngle:n,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=e;let d=r/l;t.beginPath(),t.arc(i,o,l,n-d,s+d),c>r?(d=r/c,t.arc(i,o,c,s+d,n-d,!0)):t.arc(i,o,r,s+ve,n-ve),t.closePath(),t.clip()}function d5(t){return Kl(t,["outerStart","outerEnd","innerStart","innerEnd"])}function h5(t,e,s,n){const r=d5(t.options.borderRadius),i=(s-e)/2,o=Math.min(i,n*e/2),l=c=>{const d=(s-Math.min(i,c))*n/2;return Se(c,0,Math.min(i,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Se(r.innerStart,0,o),innerEnd:Se(r.innerEnd,0,o)}}function Fs(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function za(t,e,s,n,r,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:h}=e,m=Math.max(e.outerRadius+n+s-d,0),u=h>0?h+n+s+d:0;let g=0;const f=r-c;if(n){const D=h>0?h-n:0,L=m>0?m-n:0,F=(D+L)/2,I=F!==0?f*F/(F+n):f;g=(f-I)/2}const p=Math.max(.001,f*m-s/re)/m,b=(f-p)/2,y=c+b+g,v=r-b-g,{outerStart:N,outerEnd:S,innerStart:C,innerEnd:_}=h5(e,u,m,v-y),w=m-N,k=m-S,M=y+N/w,E=v-S/k,A=u+C,O=u+_,R=y+C/A,T=v-_/O;if(t.beginPath(),i){const D=(M+E)/2;if(t.arc(o,l,m,M,D),t.arc(o,l,m,D,E),S>0){const U=Fs(k,E,o,l);t.arc(U.x,U.y,S,E,v+ve)}const L=Fs(O,v,o,l);if(t.lineTo(L.x,L.y),_>0){const U=Fs(O,T,o,l);t.arc(U.x,U.y,_,v+ve,T+Math.PI)}const F=(v-_/u+(y+C/u))/2;if(t.arc(o,l,u,v-_/u,F,!0),t.arc(o,l,u,F,y+C/u,!0),C>0){const U=Fs(A,R,o,l);t.arc(U.x,U.y,C,R+Math.PI,y-ve)}const I=Fs(w,y,o,l);if(t.lineTo(I.x,I.y),N>0){const U=Fs(w,M,o,l);t.arc(U.x,U.y,N,y-ve,M)}}else{t.moveTo(o,l);const D=Math.cos(M)*m+o,L=Math.sin(M)*m+l;t.lineTo(D,L);const F=Math.cos(E)*m+o,I=Math.sin(E)*m+l;t.lineTo(F,I)}t.closePath()}function u5(t,e,s,n,r){const{fullCircles:i,startAngle:o,circumference:l}=e;let c=e.endAngle;if(i){za(t,e,s,n,c,r);for(let d=0;d<i;++d)t.fill();isNaN(l)||(c=o+(l%ce||ce))}return za(t,e,s,n,c,r),t.fill(),c}function m5(t,e,s,n,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:h,borderDash:m,borderDashOffset:u,borderRadius:g}=c,f=c.borderAlign==="inner";if(!d)return;t.setLineDash(m||[]),t.lineDashOffset=u,f?(t.lineWidth=d*2,t.lineJoin=h||"round"):(t.lineWidth=d,t.lineJoin=h||"bevel");let p=e.endAngle;if(i){za(t,e,s,n,p,r);for(let b=0;b<i;++b)t.stroke();isNaN(l)||(p=o+(l%ce||ce))}f&&c5(t,e,p),c.selfJoin&&p-o>=re&&g===0&&h!=="miter"&&l5(t,e,p),i||(za(t,e,s,n,p,r),t.stroke())}class gs extends Rt{constructor(s){super();$(this,"circumference");$(this,"endAngle");$(this,"fullCircles");$(this,"innerRadius");$(this,"outerRadius");$(this,"pixelMargin");$(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.getProps(["x","y"],r),{angle:o,distance:l}=sg(i,{x:s,y:n}),{startAngle:c,endAngle:d,innerRadius:h,outerRadius:m,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,f=Q(u,d-c),p=mr(o,c,d)&&c!==d,b=f>=ce||p,y=_t(l,h+g,m+g);return b&&y}getCenterPoint(s){const{x:n,y:r,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:d,spacing:h}=this.options,m=(i+o)/2,u=(l+c+h+d)/2;return{x:n+Math.cos(m)*u,y:r+Math.sin(m)*u}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:n,circumference:r}=this,i=(n.offset||0)/4,o=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>ce?Math.floor(r/ce):0,r===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const c=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(re,r||0)),h=i*d;s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,u5(s,this,h,o,l),m5(s,this,h,o,l),s.restore()}}$(gs,"id","arc"),$(gs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),$(gs,"defaultRoutes",{backgroundColor:"backgroundColor"}),$(gs,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function Og(t,e,s=e){t.lineCap=Q(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Q(s.borderDash,e.borderDash)),t.lineDashOffset=Q(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Q(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Q(s.borderWidth,e.borderWidth),t.strokeStyle=Q(s.borderColor,e.borderColor)}function g5(t,e,s){t.lineTo(s.x,s.y)}function f5(t){return t.stepped?Ik:t.tension||t.cubicInterpolationMode==="monotone"?Fk:g5}function Ig(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:o,end:l}=e,c=Math.max(r,o),d=Math.min(i,l),h=r<o&&i<o||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!h?n+d-c:d-c}}function x5(t,e,s,n){const{points:r,options:i}=e,{count:o,start:l,loop:c,ilen:d}=Ig(r,s,n),h=f5(i);let{move:m=!0,reverse:u}=n||{},g,f,p;for(g=0;g<=d;++g)f=r[(l+(u?d-g:g))%o],!f.skip&&(m?(t.moveTo(f.x,f.y),m=!1):h(t,p,f,u,i.stepped),p=f);return c&&(f=r[(l+(u?d:0))%o],h(t,p,f,u,i.stepped)),!!c}function p5(t,e,s,n){const r=e.points,{count:i,start:o,ilen:l}=Ig(r,s,n),{move:c=!0,reverse:d}=n||{};let h=0,m=0,u,g,f,p,b,y;const v=S=>(o+(d?l-S:S))%i,N=()=>{p!==b&&(t.lineTo(h,b),t.lineTo(h,p),t.lineTo(h,y))};for(c&&(g=r[v(0)],t.moveTo(g.x,g.y)),u=0;u<=l;++u){if(g=r[v(u)],g.skip)continue;const S=g.x,C=g.y,_=S|0;_===f?(C<p?p=C:C>b&&(b=C),h=(m*h+S)/++m):(N(),t.lineTo(S,C),f=_,m=0,p=b=C),y=C}N()}function Yo(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?p5:x5}function b5(t){return t.stepped?xw:t.tension||t.cubicInterpolationMode==="monotone"?pw:ds}function y5(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),Og(t,e.options),t.stroke(r)}function v5(t,e,s,n){const{segments:r,options:i}=e,o=Yo(e);for(const l of r)Og(t,i,l.style),t.beginPath(),o(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const j5=typeof Path2D=="function";function k5(t,e,s,n){j5&&!e.options.segment?y5(t,e,s,n):v5(t,e,s,n)}class Qe extends Rt{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;lw(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ww(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,o=kg(this,{property:s,start:r,end:r});if(!o.length)return;const l=[],c=b5(n);let d,h;for(d=0,h=o.length;d<h;++d){const{start:m,end:u}=o[d],g=i[m],f=i[u];if(g===f){l.push(g);continue}const p=Math.abs((r-g[s])/(f[s]-g[s])),b=c(g,f,p,n.stepped);b[s]=e[s],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,s,n){return Yo(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=Yo(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)o&=i(e,this,l,{start:s,end:s+n-1});return!!o}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),k5(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}$(Qe,"id","line"),$(Qe,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),$(Qe,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),$(Qe,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ch(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class Yt extends Rt{constructor(s){super();$(this,"parsed");$(this,"skip");$(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(s-o,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return Ch(this,s,"x",n)}inYRange(s,n){return Ch(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!Et(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,Ho(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}$(Yt,"id","point"),$(Yt,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),$(Yt,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Fg(t,e){const{x:s,y:n,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,d,h,m;return t.horizontal?(m=o/2,l=Math.min(s,r),c=Math.max(s,r),d=n-m,h=n+m):(m=i/2,l=s-m,c=s+m,d=Math.min(n,r),h=Math.max(n,r)),{left:l,top:d,right:c,bottom:h}}function Vt(t,e,s,n){return t?0:Se(e,s,n)}function w5(t,e,s){const n=t.options.borderWidth,r=t.borderSkipped,i=hg(n);return{t:Vt(r.top,i.top,0,s),r:Vt(r.right,i.right,0,e),b:Vt(r.bottom,i.bottom,0,s),l:Vt(r.left,i.left,0,e)}}function N5(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=bs(r),o=Math.min(e,s),l=t.borderSkipped,c=n||ne(r);return{topLeft:Vt(!c||l.top||l.left,i.topLeft,0,o),topRight:Vt(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Vt(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Vt(!c||l.bottom||l.right,i.bottomRight,0,o)}}function S5(t){const e=Fg(t),s=e.right-e.left,n=e.bottom-e.top,r=w5(t,s/2,n/2),i=N5(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:s-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function Qi(t,e,s,n){const r=e===null,i=s===null,l=t&&!(r&&i)&&Fg(t,n);return l&&(r||_t(e,l.left,l.right))&&(i||_t(s,l.top,l.bottom))}function C5(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function _5(t,e){t.rect(e.x,e.y,e.w,e.h)}function Zi(t,e,s={}){const n=t.x!==s.x?-e:0,r=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-n,o=(t.y+t.h!==s.y+s.h?e:0)-r;return{x:t.x+n,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class vs extends Rt{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=S5(this),l=C5(o.radius)?gr:_5;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,Zi(o,s,i)),e.clip(),l(e,Zi(i,-s,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,Zi(i,s)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,s,n){return Qi(this,e,s,n)}inXRange(e,s){return Qi(this,e,null,s)}inYRange(e,s){return Qi(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+r)/2:s,y:i?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}$(vs,"id","bar"),$(vs,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),$(vs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var M5=Object.freeze({__proto__:null,ArcElement:gs,BarElement:vs,LineElement:Qe,PointElement:Yt});const Go=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],_h=Go.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Bg(t){return Go[t%Go.length]}function $g(t){return _h[t%_h.length]}function E5(t,e){return t.borderColor=Bg(e),t.backgroundColor=$g(e),++e}function T5(t,e){return t.backgroundColor=t.data.map(()=>Bg(e++)),e}function A5(t,e){return t.backgroundColor=t.data.map(()=>$g(e++)),e}function D5(t){let e=0;return(s,n)=>{const r=t.getDatasetMeta(n).controller;r instanceof $t?e=T5(s,e):r instanceof Xn?e=A5(s,e):r&&(e=E5(s,e))}}function Mh(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function P5(t){return t&&(t.borderColor||t.backgroundColor)}function R5(){return he.borderColor!=="rgba(0,0,0,0.1)"||he.backgroundColor!=="rgba(0,0,0,0.1)"}var L5={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:n},options:r}=t.config,{elements:i}=r,o=Mh(n)||P5(r)||i&&Mh(i)||R5();if(!s.forceOverride&&o)return;const l=D5(t);n.forEach(l)}};function O5(t,e,s,n,r){const i=r.samples||n;if(i>=s)return t.slice(e,e+s);const o=[],l=(s-2)/(i-2);let c=0;const d=e+s-1;let h=e,m,u,g,f,p;for(o[c++]=t[h],m=0;m<i-2;m++){let b=0,y=0,v;const N=Math.floor((m+1)*l)+1+e,S=Math.min(Math.floor((m+2)*l)+1,s)+e,C=S-N;for(v=N;v<S;v++)b+=t[v].x,y+=t[v].y;b/=C,y/=C;const _=Math.floor(m*l)+1+e,w=Math.min(Math.floor((m+1)*l)+1,s)+e,{x:k,y:M}=t[h];for(g=f=-1,v=_;v<w;v++)f=.5*Math.abs((k-b)*(t[v].y-M)-(k-t[v].x)*(y-M)),f>g&&(g=f,u=t[v],p=v);o[c++]=u,h=p}return o[c++]=t[d],o}function I5(t,e,s,n){let r=0,i=0,o,l,c,d,h,m,u,g,f,p;const b=[],y=e+s-1,v=t[e].x,S=t[y].x-v;for(o=e;o<e+s;++o){l=t[o],c=(l.x-v)/S*n,d=l.y;const C=c|0;if(C===h)d<f?(f=d,m=o):d>p&&(p=d,u=o),r=(i*r+l.x)/++i;else{const _=o-1;if(!se(m)&&!se(u)){const w=Math.min(m,u),k=Math.max(m,u);w!==g&&w!==_&&b.push({...t[w],x:r}),k!==g&&k!==_&&b.push({...t[k],x:r})}o>0&&_!==g&&b.push(t[_]),b.push(l),h=C,i=0,f=p=d,m=u=g=o}}return b}function Vg(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Eh(t){t.data.datasets.forEach(e=>{Vg(e)})}function F5(t,e){const s=e.length;let n=0,r;const{iScale:i}=t,{min:o,max:l,minDefined:c,maxDefined:d}=i.getUserBounds();return c&&(n=Se(Mt(e,i.axis,o).lo,0,s-1)),d?r=Se(Mt(e,i.axis,l).hi+1,n,s)-n:r=s-n,{start:n,count:r}}var B5={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){Eh(t);return}const n=t.width;t.data.datasets.forEach((r,i)=>{const{_data:o,indexAxis:l}=r,c=t.getDatasetMeta(i),d=o||r.data;if(Bn([l,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const h=t.scales[c.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:m,count:u}=F5(c,d);const g=s.threshold||4*n;if(u<=g){Vg(r);return}se(o)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let f;switch(s.algorithm){case"lttb":f=O5(d,m,u,n,s);break;case"min-max":f=I5(d,m,u,n);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}r._decimated=f})},destroy(t){Eh(t)}};function $5(t,e,s){const n=t.segments,r=t.points,i=e.points,o=[];for(const l of n){let{start:c,end:d}=l;d=vi(c,d,r);const h=Ko(s,r[c],r[d],l.loop);if(!e.segments){o.push({source:l,target:h,start:r[c],end:r[d]});continue}const m=kg(e,h);for(const u of m){const g=Ko(s,i[u.start],i[u.end],u.loop),f=jg(l,r,g);for(const p of f)o.push({source:p,target:u,start:{[s]:Th(h,g,"start",Math.max)},end:{[s]:Th(h,g,"end",Math.min)}})}}return o}function Ko(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=Ee(r),i=Ee(i)),{property:t,start:r,end:i}}function V5(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=vi(o,l,r);const c=r[o],d=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:d.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function vi(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Th(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function Hg(t,e){let s=[],n=!1;return de(t)?(n=!0,s=t):s=V5(t,e),s.length?new Qe({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Ah(t){return t&&t.fill!==!1}function H5(t,e,s){let r=t[e].fill;const i=[e];let o;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!xe(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function z5(t,e,s){const n=G5(t);if(ne(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return xe(r)&&Math.floor(r)===r?U5(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function U5(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function W5(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ne(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function Y5(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ne(t)?n=t.value:n=e.getBaseValue(),n}function G5(t){const e=t.options,s=e.fill;let n=Q(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function K5(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,o=n.points,l=q5(e,s);l.push(Hg({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const d=i[c];for(let h=d.start;h<=d.end;h++)J5(r,o[h],l)}return new Qe({points:r,options:{}})}function q5(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function J5(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:o,last:l,point:c}=X5(i,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function X5(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,o=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const h=i[d],m=o[h.start][s],u=o[h.end][s];if(_t(r,m,u)){l=r===m,c=r===u;break}}return{first:l,last:c,point:n}}class zg{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:o}=this;return s=s||{start:0,end:ce},e.arc(r,i,o,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function Q5(t){const{chart:e,fill:s,line:n}=t;if(xe(s))return Z5(e,s);if(s==="stack")return K5(t);if(s==="shape")return!0;const r=eS(t);return r instanceof zg?r:Hg(r,n)}function Z5(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function eS(t){return(t.scale||{}).getPointPositionForValue?sS(t):tS(t)}function tS(t){const{scale:e={},fill:s}=t,n=W5(s,e);if(xe(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function sS(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,o=Y5(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new zg({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,o));return l}function eo(t,e,s){const n=Q5(e),{chart:r,index:i,line:o,scale:l,axis:c}=e,d=o.options,h=d.fill,m=d.backgroundColor,{above:u=m,below:g=m}=h||{},f=r.getDatasetMeta(i),p=wg(r,f);n&&o.points.length&&(xi(t,s),nS(t,{line:o,target:n,above:u,below:g,area:s,scale:l,axis:c,clip:p}),pi(t))}function nS(t,e){const{line:s,target:n,above:r,below:i,area:o,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let h=i;i!==r&&(d==="x"?(Dh(t,n,o.top),to(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),Dh(t,n,o.bottom)):d==="y"&&(Ph(t,n,o.left),to(t,{line:s,target:n,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),Ph(t,n,o.right),h=r)),to(t,{line:s,target:n,color:h,scale:l,property:d,clip:c}),t.restore()}function Dh(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,h=r[c],m=r[vi(c,d,r)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(h.x,s),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(m.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function Ph(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,h=r[c],m=r[vi(c,d,r)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(s,h.y),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(s,m.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function to(t,e){const{line:s,target:n,property:r,color:i,scale:o,clip:l}=e,c=$5(s,n,r);for(const{source:d,target:h,start:m,end:u}of c){const{style:{backgroundColor:g=i}={}}=d,f=n!==!0;t.save(),t.fillStyle=g,rS(t,o,l,f&&Ko(r,m,u)),t.beginPath();const p=!!s.pathSegment(t,d);let b;if(f){p?t.closePath():Rh(t,n,u,r);const y=!!n.pathSegment(t,h,{move:p,reverse:!0});b=p&&y,b||Rh(t,n,m,r)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function rS(t,e,s,n){const r=e.chart.chartArea,{property:i,start:o,end:l}=n||{};if(i==="x"||i==="y"){let c,d,h,m;i==="x"?(c=o,d=r.top,h=l,m=r.bottom):(c=r.left,d=o,h=r.right,m=l),t.beginPath(),s&&(c=Math.max(c,s.left),h=Math.min(h,s.right),d=Math.max(d,s.top),m=Math.min(m,s.bottom)),t.rect(c,d,h-c,m-d),t.clip()}}function Rh(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var ji={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,o,l,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof Qe&&(c={visible:t.isDatasetVisible(o),index:o,fill:z5(l,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(o=0;o<n;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=H5(r,o,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&eo(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;Ah(i)&&eo(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Ah(n)||s.drawTime!=="beforeDatasetDraw"||eo(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Lh=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},aS=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Oh extends Rt{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=le(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=Ne(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Lh(n,i);let d,h;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(o,i,l,c)+10):(h=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],h=r+l;let m=e;i.textAlign="left",i.textBaseline="middle";let u=-1,g=-h;return this.legendItems.forEach((f,p)=>{const b=n+s/2+i.measureText(f.text).width;(p===0||d[d.length-1]+b+2*l>o)&&(m+=h,d[d.length-(p>0?0:1)]=0,g+=h,u++),c[p]={left:0,top:g,row:u,width:b,height:r},d[d.length-1]+=b+l}),m}_fitCols(e,s,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],h=o-e;let m=l,u=0,g=0,f=0,p=0;return this.legendItems.forEach((b,y)=>{const{itemWidth:v,itemHeight:N}=iS(n,s,i,b,r);y>0&&g+N+2*l>h&&(m+=u+l,d.push({width:u,height:g}),f+=u+l,p++,u=g=0),c[y]={left:f,top:g,col:p,width:v,height:N},u=Math.max(u,v),g+=N+l}),m+=u,d.push({width:u,height:g}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,o=Gs(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Me(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=Me(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=Me(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=Me(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;xi(e,this),this._draw(),pi(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,l=he.color,c=Gs(e.rtl,this.left,this.width),d=Ne(o.font),{padding:h}=o,m=d.size,u=m/2;let g;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:f,boxHeight:p,itemHeight:b}=Lh(o,m),y=function(_,w,k){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const M=Q(k.lineWidth,1);if(r.fillStyle=Q(k.fillStyle,l),r.lineCap=Q(k.lineCap,"butt"),r.lineDashOffset=Q(k.lineDashOffset,0),r.lineJoin=Q(k.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=Q(k.strokeStyle,l),r.setLineDash(Q(k.lineDash,[])),o.usePointStyle){const E={radius:p*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:M},A=c.xPlus(_,f/2),O=w+u;dg(r,E,A,O,o.pointStyleWidth&&f)}else{const E=w+Math.max((m-p)/2,0),A=c.leftForLtr(_,f),O=bs(k.borderRadius);r.beginPath(),Object.values(O).some(R=>R!==0)?gr(r,{x:A,y:E,w:f,h:p,radius:O}):r.rect(A,E,f,p),r.fill(),M!==0&&r.stroke()}r.restore()},v=function(_,w,k){Cs(r,k.text,_,w+b/2,d,{strikethrough:k.hidden,textAlign:c.textAlign(k.textAlign)})},N=this.isHorizontal(),S=this._computeTitleHeight();N?g={x:Me(i,this.left+h,this.right-n[0]),y:this.top+h+S,line:0}:g={x:this.left+h,y:Me(i,this.top+S+h,this.bottom-s[0].height),line:0},bg(this.ctx,e.textDirection);const C=b+h;this.legendItems.forEach((_,w)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const k=r.measureText(_.text).width,M=c.textAlign(_.textAlign||(_.textAlign=o.textAlign)),E=f+u+k;let A=g.x,O=g.y;c.setWidth(this.width),N?w>0&&A+E+h>this.right&&(O=g.y+=C,g.line++,A=g.x=Me(i,this.left+h,this.right-n[g.line])):w>0&&O+C>this.bottom&&(A=g.x=A+s[g.line].width+h,g.line++,O=g.y=Me(i,this.top+S+h,this.bottom-s[g.line].height));const R=c.x(A);if(y(R,O,_),A=Ck(M,A+f+u,N?A+E:this.right,e.rtl),v(c.x(A),O,_),N)g.x+=E+h;else if(typeof _.text!="string"){const T=d.lineHeight;g.y+=Ug(_,T)+h}else g.y+=C}),yg(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Ne(s.font),r=Pe(s.padding);if(!s.display)return;const i=Gs(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let h,m=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),h=this.top+d,m=Me(e.align,m,this.right-u);else{const f=this.columnSizes.reduce((p,b)=>Math.max(p,b.height),0);h=d+Me(e.align,this.top,this.bottom-f-e.labels.padding-this._computeTitleHeight())}const g=Me(l,m,m+u);o.textAlign=i.textAlign(Yl(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,Cs(o,s.text,g,h,n)}_computeTitleHeight(){const e=this.options.title,s=Ne(e.font),n=Pe(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(_t(e,this.left,this.right)&&_t(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],_t(e,r.left,r.left+r.width)&&_t(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!cS(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=aS(r,n);r&&!i&&le(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&le(s.onHover,[e,n,this],this)}else n&&le(s.onClick,[e,n,this],this)}}function iS(t,e,s,n,r){const i=oS(n,t,e,s),o=lS(r,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function oS(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(r).width}function lS(t,e,s){let n=t;return typeof e.text!="string"&&(n=Ug(e,s)),n}function Ug(t,e){const s=t.text?t.text.length:0;return e*s}function cS(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ps={id:"legend",_element:Oh,start(t,e,s){const n=t.legend=new Oh({ctx:t.ctx,options:s,chart:t});Ae.configure(t,n,s),Ae.addBox(t,n)},stop(t){Ae.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Ae.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),h=Pe(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class tc extends Rt{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const r=de(n.text)?n.text.length:1;this._padding=Pe(n.padding);const i=r*Ne(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,h,m;return this.isHorizontal()?(h=Me(l,n,i),m=s+e,d=i-n):(o.position==="left"?(h=n+e,m=Me(l,r,s),c=re*-.5):(h=i-e,m=Me(l,s,r),c=re*.5),d=r-s),{titleX:h,titleY:m,maxWidth:d,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Ne(s.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Cs(e,s.text,0,0,n,{color:s.color,maxWidth:c,rotation:d,textAlign:Yl(s.align),textBaseline:"middle",translation:[o,l]})}}function dS(t,e){const s=new tc({ctx:t.ctx,options:e,chart:t});Ae.configure(t,s,e),Ae.addBox(t,s),t.titleBlock=s}var sc={id:"title",_element:tc,start(t,e,s){dS(t,s)},stop(t){const e=t.titleBlock;Ae.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;Ae.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ia=new WeakMap;var hS={id:"subtitle",start(t,e,s){const n=new tc({ctx:t.ctx,options:s,chart:t});Ae.configure(t,n,s),Ae.addBox(t,n),ia.set(t,n)},stop(t){Ae.removeBox(t,ia.get(t)),ia.delete(t)},beforeUpdate(t,e,s){const n=ia.get(t);Ae.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vn={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),h=$o(e,d);h<r&&(r=h,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function ut(t,e){return e&&(de(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function kt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function uS(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function Ih(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=Ne(e.bodyFont),d=Ne(e.titleFont),h=Ne(e.footerFont),m=i.length,u=r.length,g=n.length,f=Pe(e.padding);let p=f.height,b=0,y=n.reduce((S,C)=>S+C.before.length+C.lines.length+C.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,m&&(p+=m*d.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),y){const S=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;p+=g*S+(y-g)*c.lineHeight+(y-1)*e.bodySpacing}u&&(p+=e.footerMarginTop+u*h.lineHeight+(u-1)*e.footerSpacing);let v=0;const N=function(S){b=Math.max(b,s.measureText(S).width+v)};return s.save(),s.font=d.string,ae(t.title,N),s.font=c.string,ae(t.beforeBody.concat(t.afterBody),N),v=e.displayColors?o+2+e.boxPadding:0,ae(n,S=>{ae(S.before,N),ae(S.lines,N),ae(S.after,N)}),v=0,s.font=h.string,ae(t.footer,N),s.restore(),b+=f.width,{width:b,height:p}}function mS(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function gS(t,e,s,n){const{x:r,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function fS(t,e,s,n){const{x:r,width:i}=s,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),gS(d,t,e,s)&&(d="center"),d}function Fh(t,e,s){const n=s.yAlign||e.yAlign||mS(t,s);return{xAlign:s.xAlign||e.xAlign||fS(t,e,s,n),yAlign:n}}function xS(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function pS(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function Bh(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,d=r+i,{topLeft:h,topRight:m,bottomLeft:u,bottomRight:g}=bs(o);let f=xS(e,l);const p=pS(e,c,d);return c==="center"?l==="left"?f+=d:l==="right"&&(f-=d):l==="left"?f-=Math.max(h,u)+r:l==="right"&&(f+=Math.max(m,g)+r),{x:Se(f,0,n.width-e.width),y:Se(p,0,n.height-e.height)}}function oa(t,e,s){const n=Pe(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function $h(t){return ut([],kt(t))}function bS(t,e,s){return Zt(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Vh(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const Wg={beforeTitle:vt,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:vt,beforeBody:vt,beforeLabel:vt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return se(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:vt,afterBody:vt,beforeFooter:vt,footer:vt,afterFooter:vt};function Le(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?Wg[e].call(s,n):r}class qo extends Rt{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new Ng(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=bS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=Le(n,"beforeTitle",this,e),i=Le(n,"title",this,e),o=Le(n,"afterTitle",this,e);let l=[];return l=ut(l,kt(r)),l=ut(l,kt(i)),l=ut(l,kt(o)),l}getBeforeBody(e,s){return $h(Le(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return ae(e,i=>{const o={before:[],lines:[],after:[]},l=Vh(n,i);ut(o.before,kt(Le(l,"beforeLabel",this,i))),ut(o.lines,Le(l,"label",this,i)),ut(o.after,kt(Le(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,s){return $h(Le(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=Le(n,"beforeFooter",this,e),i=Le(n,"footer",this,e),o=Le(n,"afterFooter",this,e);let l=[];return l=ut(l,kt(r)),l=ut(l,kt(i)),l=ut(l,kt(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(uS(this.chart,s[c]));return e.filter&&(l=l.filter((h,m,u)=>e.filter(h,m,u,n))),e.itemSort&&(l=l.sort((h,m)=>e.itemSort(h,m,n))),ae(l,h=>{const m=Vh(e.callbacks,h);r.push(Le(m,"labelColor",this,h)),i.push(Le(m,"labelPointStyle",this,h)),o.push(Le(m,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Vn[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=Ih(this,n),d=Object.assign({},l,c),h=Fh(this.chart,n,d),m=Bh(n,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:m}=bs(l),{x:u,y:g}=e,{width:f,height:p}=s;let b,y,v,N,S,C;return i==="center"?(S=g+p/2,r==="left"?(b=u,y=b-o,N=S+o,C=S-o):(b=u+f,y=b+o,N=S-o,C=S+o),v=b):(r==="left"?y=u+Math.max(c,h)+o:r==="right"?y=u+f-Math.max(d,m)-o:y=this.caretX,i==="top"?(N=g,S=N-o,b=y-o,v=y+o):(N=g+p,S=N+o,b=y+o,v=y-o),C=N),{x1:b,x2:y,x3:v,y1:N,y2:S,y3:C}}drawTitle(e,s,n){const r=this.title,i=r.length;let o,l,c;if(i){const d=Gs(n.rtl,this.x,this.width);for(e.x=oa(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",o=Ne(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(r[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,h=Ne(i.bodyFont),m=oa(this,"left",i),u=r.x(m),g=c<h.lineHeight?(h.lineHeight-c)/2:0,f=s.y+g;if(i.usePointStyle){const p={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(u,d)+d/2,y=f+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Ho(e,p,b,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ho(e,p,b,y)}else{e.lineWidth=ne(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=r.leftForLtr(u,d),b=r.leftForLtr(r.xPlus(u,1),d-2),y=bs(o.borderRadius);Object.values(y).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,gr(e,{x:p,y:f,w:d,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),gr(e,{x:b,y:f+1,w:d-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(p,f,d,c),e.strokeRect(p,f,d,c),e.fillStyle=o.backgroundColor,e.fillRect(b,f+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:h}=n,m=Ne(n.bodyFont);let u=m.lineHeight,g=0;const f=Gs(n.rtl,this.x,this.width),p=function(k){s.fillText(k,f.x(e.x+g),e.y+u/2),e.y+=u+i},b=f.textAlign(o);let y,v,N,S,C,_,w;for(s.textAlign=o,s.textBaseline="middle",s.font=m.string,e.x=oa(this,b,n),s.fillStyle=n.bodyColor,ae(this.beforeBody,p),g=l&&b!=="right"?o==="center"?d/2+h:d+2+h:0,S=0,_=r.length;S<_;++S){for(y=r[S],v=this.labelTextColors[S],s.fillStyle=v,ae(y.before,p),N=y.lines,l&&N.length&&(this._drawColorBox(s,e,S,f,n),u=Math.max(m.lineHeight,c)),C=0,w=N.length;C<w;++C)p(N[C]),u=m.lineHeight;ae(y.after,p)}g=0,u=m.lineHeight,ae(this.afterBody,p),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let o,l;if(i){const c=Gs(n.rtl,this.x,this.width);for(e.x=oa(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=Ne(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:h}=n,{topLeft:m,topRight:u,bottomLeft:g,bottomRight:f}=bs(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+m,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-u,c),s.quadraticCurveTo(l+d,c,l+d,c+u),o==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+h-f),s.quadraticCurveTo(l+d,c+h,l+d-f,c+h),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+g,c+h),s.quadraticCurveTo(l,c+h,l,c+h-g),o==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+m),s.quadraticCurveTo(l,c,l+m,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=Vn[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Ih(this,e),c=Object.assign({},o,this._size),d=Fh(s,e,c),h=Bh(e,c,d,s);(r._to!==h.x||i._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Pe(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),bg(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),yg(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Ia(n,r),o=this._positionChanged(r,s);(i||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),l=this._positionChanged(o,e),c=s||!Ia(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,o=Vn[i.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}$(qo,"positioners",Vn);var Rs={id:"tooltip",_element:qo,positioners:Vn,afterInit(t,e,s){s&&(t.tooltip=new qo({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Wg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},yS=Object.freeze({__proto__:null,Colors:L5,Decimation:B5,Filler:ji,Legend:Ps,SubTitle:hS,Title:sc,Tooltip:Rs});const vS=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function jS(t,e,s,n){const r=t.indexOf(e);if(r===-1)return vS(t,e,s,n);const i=t.lastIndexOf(e);return r!==i?s:r}const kS=(t,e)=>t===null?null:Se(Math.round(t),0,e);function Hh(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class on extends Ds{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:r,label:i}of s)n[r]===i&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(se(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:jS(n,e,Q(s,e),this._addedLabels),kS(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=s;o++)r.push({value:o});return r}getLabelForValue(e){return Hh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}$(on,"id","category"),$(on,"defaults",{ticks:{callback:Hh}});function wS(t,e){const s=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:h,maxDigits:m,includeBounds:u}=t,g=i||1,f=h-1,{min:p,max:b}=e,y=!se(o),v=!se(l),N=!se(d),S=(b-p)/(m+1);let C=Id((b-p)/f/g)*g,_,w,k,M;if(C<1e-14&&!y&&!v)return[{value:p},{value:b}];M=Math.ceil(b/C)-Math.floor(p/C),M>f&&(C=Id(M*C/f/g)*g),se(c)||(_=Math.pow(10,c),C=Math.ceil(C*_)/_),r==="ticks"?(w=Math.floor(p/C)*C,k=Math.ceil(b/C)*C):(w=p,k=b),y&&v&&i&&yk((l-o)/i,C/1e3)?(M=Math.round(Math.min((l-o)/C,h)),C=(l-o)/M,w=o,k=l):N?(w=y?o:w,k=v?l:k,M=d-1,C=(k-w)/M):(M=(k-w)/C,Gn(M,Math.round(M),C/1e3)?M=Math.round(M):M=Math.ceil(M));const E=Math.max(Fd(C),Fd(w));_=Math.pow(10,se(c)?E:c),w=Math.round(w*_)/_,k=Math.round(k*_)/_;let A=0;for(y&&(u&&w!==o?(s.push({value:o}),w<o&&A++,Gn(Math.round((w+A*C)*_)/_,o,zh(o,S,t))&&A++):w<o&&A++);A<M;++A){const O=Math.round((w+A*C)*_)/_;if(v&&O>l)break;s.push({value:O})}return v&&u&&k!==l?s.length&&Gn(s[s.length-1].value,l,zh(l,S,t))?s[s.length-1].value=l:s.push({value:l}):(!v||k===l)&&s.push({value:k}),s}function zh(t,e,{horizontal:s,minRotation:n}){const r=at(n),i=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class Ua extends Ds{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=ft(r),d=ft(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=wS(r,i);return e.bounds==="ticks"&&tg(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Or(e,this.chart.options.locale,this.options.ticks.format)}}class ln extends Ua{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=xe(e)?e:0,this.max=xe(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=at(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}$(ln,"id","linear"),$(ln,"defaults",{ticks:{callback:fi.formatters.numeric}});const xr=t=>Math.floor(Bt(t)),os=(t,e)=>Math.pow(10,xr(t)+e);function Uh(t){return t/Math.pow(10,xr(t))===1}function Wh(t,e,s){const n=Math.pow(10,s),r=Math.floor(t/n);return Math.ceil(e/n)-r}function NS(t,e){const s=e-t;let n=xr(s);for(;Wh(t,e,n)>10;)n++;for(;Wh(t,e,n)<10;)n--;return Math.min(n,xr(t))}function SS(t,{min:e,max:s}){e=ze(t.min,e);const n=[],r=xr(e);let i=NS(e,s),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=r>i?Math.pow(10,r):0,d=Math.round((e-c)*o)/o,h=Math.floor((e-c)/l/10)*l*10;let m=Math.floor((d-h)/Math.pow(10,i)),u=ze(t.min,Math.round((c+h+m*Math.pow(10,i))*o)/o);for(;u<s;)n.push({value:u,major:Uh(u),significand:m}),m>=10?m=m<15?15:20:m++,m>=20&&(i++,m=2,o=i>=0?1:o),u=Math.round((c+h+m*Math.pow(10,i))*o)/o;const g=ze(t.max,u);return n.push({value:g,major:Uh(g),significand:m}),n}class Jo extends Ds{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=Ua.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return xe(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=xe(e)?Math.max(0,e):null,this.max=xe(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!xe(this._userMin)&&(this.min=e===os(this.min,0)?os(this.min,-1):os(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,r=this.max;const i=l=>n=e?n:l,o=l=>r=s?r:l;n===r&&(n<=0?(i(1),o(10)):(i(os(n,-1)),o(os(r,1)))),n<=0&&i(os(r,-1)),r<=0&&o(os(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=SS(s,this);return e.bounds==="ticks"&&tg(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Or(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Bt(e),this._valueRange=Bt(this.max)-Bt(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Bt(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}$(Jo,"id","logarithmic"),$(Jo,"defaults",{ticks:{callback:fi.formatters.logarithmic,major:{enabled:!0}}});function Xo(t){const e=t.ticks;if(e.display&&t.display){const s=Pe(e.backdropPadding);return Q(e.font&&e.font.size,he.font.size)+s.height}return 0}function CS(t,e,s){return s=de(s)?s:[s],{w:Ok(t,e.string,s),h:s.length*e.lineHeight}}function Yh(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function _S(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?re/i:0;for(let c=0;c<i;c++){const d=o.setContext(t.getPointLabelContext(c));r[c]=d.padding;const h=t.getPointPosition(c,t.drawingArea+r[c],l),m=Ne(d.font),u=CS(t.ctx,m,t._pointLabels[c]);n[c]=u;const g=Ee(t.getIndexAngle(c)+l),f=Math.round(Ul(g)),p=Yh(f,h.x,u.w,0,180),b=Yh(f,h.y,u.h,90,270);MS(s,e,g,p,b)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=AS(t,n,r)}function MS(t,e,s,n,r){const i=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function ES(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:o,size:l}=s,c=t.getPointPosition(e,n+r+o,i),d=Math.round(Ul(Ee(c.angle+ve))),h=RS(c.y,l.h,d),m=DS(d),u=PS(c.x,l.w,m);return{visible:!0,x:c.x,y:h,textAlign:m,left:u,top:h,right:u+l.w,bottom:h+l.h}}function TS(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(Et({x:s,y:n},e)||Et({x:s,y:i},e)||Et({x:r,y:n},e)||Et({x:r,y:i},e))}function AS(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:Xo(i)/2,additionalAngle:o?re/r:0};let d;for(let h=0;h<r;h++){c.padding=s[h],c.size=e[h];const m=ES(t,h,c);n.push(m),l==="auto"&&(m.visible=TS(m,d),m.visible&&(d=m))}return n}function DS(t){return t===0||t===180?"center":t<180?"left":"right"}function PS(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function RS(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function LS(t,e,s){const{left:n,top:r,right:i,bottom:o}=s,{backdropColor:l}=e;if(!se(l)){const c=bs(e.borderRadius),d=Pe(e.backdropPadding);t.fillStyle=l;const h=n-d.left,m=r-d.top,u=i-n+d.width,g=o-r+d.height;Object.values(c).some(f=>f!==0)?(t.beginPath(),gr(t,{x:h,y:m,w:u,h:g,radius:c}),t.fill()):t.fillRect(h,m,u,g)}}function OS(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const o=n.setContext(t.getPointLabelContext(r));LS(s,o,i);const l=Ne(o.font),{x:c,y:d,textAlign:h}=i;Cs(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Yg(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,ce);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),r.lineTo(i.x,i.y)}}function IS(t,e,s,n,r){const i=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),Yg(t,s,o,n),i.closePath(),i.stroke(),i.restore())}function FS(t,e,s){return Zt(t,{label:s,index:e,type:"pointLabel"})}class Ht extends Ua{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Pe(Xo(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=xe(e)&&!isNaN(e)?e:0,this.max=xe(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Xo(this.options))}generateTickLabels(e){Ua.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=le(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?_S(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=ce/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ee(e*s+at(n))}getDistanceFromCenterForValue(e){if(se(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(se(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return FS(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-ve+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Yg(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,o=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&OS(this,o),r.display&&this.ticks.forEach((h,m)=>{if(m!==0||m===0&&this.min<0){c=this.getDistanceFromCenterForValue(h.value);const u=this.getContext(m),g=r.setContext(u),f=i.setContext(u);IS(this,g,c,o,f)}}),n.display){for(e.save(),l=o-1;l>=0;l--){const h=n.setContext(this.getPointLabelContext(l)),{color:m,lineWidth:u}=h;!u||!m||(e.lineWidth=u,e.strokeStyle=m,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),h=Ne(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=h.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const m=Pe(d.backdropPadding);e.fillRect(-o/2-m.left,-i-h.size/2-m.top,o+m.width,h.size+m.height)}Cs(e,l.label,0,-i,h,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}$(Ht,"id","radialLinear"),$(Ht,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:fi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),$(Ht,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),$(Ht,"descriptors",{angleLines:{_fallback:"grid"}});const ki={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ie=Object.keys(ki);function Gh(t,e){return t-e}function Kh(t,e){if(se(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),xe(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(nn(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,r)),+o)}function qh(t,e,s,n){const r=Ie.length;for(let i=Ie.indexOf(t);i<r-1;++i){const o=ki[Ie[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return Ie[i]}return Ie[r-1]}function BS(t,e,s,n,r){for(let i=Ie.length-1;i>=Ie.indexOf(s);i--){const o=Ie[i];if(ki[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return Ie[s?Ie.indexOf(s):0]}function $S(t){for(let e=Ie.indexOf(t)+1,s=Ie.length;e<s;++e)if(ki[Ie[e]].common)return Ie[e]}function Jh(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=Wl(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function VS(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function Xh(t,e,s){const n=[],r={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return i===0||!s?n:VS(t,n,r,s)}class pr extends Ds{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new Zw._date(e.adapters.date);r.init(s),Yn(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Kh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=xe(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=xe(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=wk(r,i,o);return this._unit=s.unit||(n.autoSkip?qh(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):BS(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:$S(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Xh(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=Se(s,0,o),n=Se(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||qh(i.minUnit,s,n,this._getLabelCapacity(s)),l=Q(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=nn(c)||c===!0,h={};let m=s,u,g;if(d&&(m=+e.startOf(m,"isoWeek",c)),m=+e.startOf(m,d?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const f=r.ticks.source==="data"&&this.getDataTimestamps();for(u=m,g=0;u<n;u=+e.add(u,l,o),g++)Jh(h,u,f);return(u===n||r.bounds==="ticks"||g===1)&&Jh(h,u,f),Object.keys(h).sort(Gh).map(p=>+p)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,o=s||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const i=this.options,o=i.ticks.callback;if(o)return le(o,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,h=c&&l[c],m=d&&l[d],u=n[s],g=d&&m&&u&&u.major;return this._adapter.format(e,r||(g?m:h))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=at(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Xh(this,[e],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Kh(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return rg(e.sort(Gh))}}$(pr,"id","time"),$(pr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function la(t,e,s){let n=0,r=t.length-1,i,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=Mt(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=Mt(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[r]);const d=o-i;return d?l+(c-l)*(e-i)/d:l}class Qo extends pr{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=la(s,this.min),this._tableRange=la(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let o,l,c,d,h;for(o=0,l=e.length;o<l;++o)d=e[o],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)h=r[o+1],c=r[o-1],d=r[o],Math.round((h+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(la(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return la(this._table,n*this._tableRange+this._minPos,!0)}}$(Qo,"id","timeseries"),$(Qo,"defaults",pr.defaults);var HS=Object.freeze({__proto__:null,CategoryScale:on,LinearScale:ln,LogarithmicScale:Jo,RadialLinearScale:Ht,TimeScale:pr,TimeSeriesScale:Qo});const zS=[Qw,M5,yS,HS],Gg="label";function Qh(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function US(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function Kg(t,e){t.labels=e}function qg(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gg;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function WS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gg;const s={labels:[],datasets:[]};return Kg(s,t.labels),qg(s,t.datasets,e),s}function YS(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:h,updateMode:m,...u}=t,g=j.useRef(null),f=j.useRef(null),p=()=>{g.current&&(f.current=new ct(g.current,{type:o,data:WS(l,i),options:c&&{...c},plugins:d}),Qh(e,f.current))},b=()=>{Qh(e,null),f.current&&(f.current.destroy(),f.current=null)};return j.useEffect(()=>{!r&&f.current&&c&&US(f.current,c)},[r,c]),j.useEffect(()=>{!r&&f.current&&Kg(f.current.config.data,l.labels)},[r,l.labels]),j.useEffect(()=>{!r&&f.current&&l.datasets&&qg(f.current.config.data,l.datasets,i)},[r,l.datasets]),j.useEffect(()=>{f.current&&(r?(b(),setTimeout(p)):f.current.update(m))},[r,c,l.labels,l.datasets,m]),j.useEffect(()=>{f.current&&(b(),setTimeout(p))},[o]),j.useEffect(()=>(p(),()=>b()),[]),Sr.createElement("canvas",{ref:g,role:"img",height:s,width:n,...u},h)}const Jg=j.forwardRef(YS);function nc(t,e){return ct.register(e),j.forwardRef((s,n)=>Sr.createElement(Jg,{...s,ref:n,type:t}))}const Xg=nc("bar",Jn),rc=nc("radar",Qn),Zo=nc("doughnut",$t);class Rn{static analyzeFromSaju(e){const{fiveElements:s}=e;return{wood:s.wood||0,fire:s.fire||0,earth:s.earth||0,metal:s.metal||0,water:s.water||0}}static analyzeElementRelationships(e){const s=e.wood+e.fire+e.earth+e.metal+e.water,n={wood_fire:Math.min(e.wood*e.fire/100,100),fire_earth:Math.min(e.fire*e.earth/100,100),earth_metal:Math.min(e.earth*e.metal/100,100),metal_water:Math.min(e.metal*e.water/100,100),water_wood:Math.min(e.water*e.wood/100,100)},r={wood_earth:Math.min(e.wood*e.earth/100,100),fire_metal:Math.min(e.fire*e.metal/100,100),earth_water:Math.min(e.earth*e.water/100,100),metal_wood:Math.min(e.metal*e.wood/100,100),water_fire:Math.min(e.water*e.fire/100,100)},i=Object.values(e),o=s/5,l=i.reduce((u,g)=>u+Math.pow(g-o,2),0)/5,c=Math.max(0,100-l),d=[],h=[],m=[];return Object.entries(e).forEach(([u,g])=>{const f=g/s;f>.3?d.push(u):f<.1&&h.push(u),g===0&&m.push(u)}),{mutual_generation:n,mutual_destruction:r,balance_score:c,dominant_elements:d,weak_elements:h,missing_elements:m}}static generateRecommendations(e,s){const n=this.getColorRecommendations(e),r=this.getDirectionRecommendations(e),i=this.getActivityRecommendations(e),o=this.getLifestyleRecommendations(e);return{colors:n,directions:r,activities:i,lifestyle:o}}static getElementDetails(){return{wood:{name:"Wood",korean:"목(木)",icon:"🌳",color:{primary:"#10B981",secondary:"#34D399",background:"#ECFDF5"},characteristics:{positive:["창의성","성장력","유연성","진취성"],negative:["성급함","변덕","우유부단","과도한 이상주의"]},season:"봄",direction:"동쪽",body_parts:["간","담","눈","근육"],emotions:["분노","짜증","좌절감"]},fire:{name:"Fire",korean:"화(火)",icon:"🔥",color:{primary:"#EF4444",secondary:"#F87171",background:"#FEF2F2"},characteristics:{positive:["열정","활력","리더십","표현력"],negative:["성급함","충동성","과열","소진"]},season:"여름",direction:"남쪽",body_parts:["심장","소장","혀","혈관"],emotions:["기쁨","흥분","조급함"]},earth:{name:"Earth",korean:"토(土)",icon:"🏔️",color:{primary:"#A16207",secondary:"#D97706",background:"#FFFBEB"},characteristics:{positive:["안정성","신뢰성","포용력","인내력"],negative:["고집","보수성","느림","걱정"]},season:"늦여름",direction:"중앙",body_parts:["비장","위","입","살"],emotions:["걱정","우려","사려깊음"]},metal:{name:"Metal",korean:"금(金)",icon:"⚡",color:{primary:"#FCD34D",secondary:"#FDE047",background:"#FEFCE8"},characteristics:{positive:["정의감","원칙성","완결력","논리성"],negative:["경직성","냉정함","비판적","완벽주의"]},season:"가을",direction:"서쪽",body_parts:["폐","대장","코","피부"],emotions:["슬픔","우울","아쉬움"]},water:{name:"Water",korean:"수(水)",icon:"💧",color:{primary:"#3B82F6",secondary:"#60A5FA",background:"#EFF6FF"},characteristics:{positive:["지혜","융통성","적응력","직관력"],negative:["우유부단","소극성","냉담","변덕"]},season:"겨울",direction:"북쪽",body_parts:["신장","방광","귀","뼈"],emotions:["두려움","불안","신중함"]}}}static getColorRecommendations(e){const s=Object.entries(e).sort(([,i],[,o])=>i-o)[0][0],n=Object.entries(e).sort(([,i],[,o])=>o-i)[0][0],r={wood:{color:"초록색",hex:"#10B981",effect:"성장과 창의성 증진"},fire:{color:"빨간색",hex:"#EF4444",effect:"활력과 열정 증진"},earth:{color:"갈색",hex:"#A16207",effect:"안정성과 신뢰성 증진"},metal:{color:"금색",hex:"#FCD34D",effect:"논리성과 완결력 증진"},water:{color:"파란색",hex:"#3B82F6",effect:"지혜와 적응력 증진"}};return{beneficial:[{name:r[s].color,hex:r[s].hex,description:`부족한 ${s} 오행을 보완하여 ${r[s].effect}`}],avoid:[{name:r[n].color,hex:r[n].hex,reason:`과도한 ${n} 오행을 더욱 강화시켜 불균형 초래`}]}}static getDirectionRecommendations(e){const s={wood:"동쪽",fire:"남쪽",earth:"중앙",metal:"서쪽",water:"북쪽"},n=Object.entries(e).sort(([,r],[,i])=>r-i)[0][0];return{beneficial:[{direction:s[n],element:n,benefit:`부족한 ${n} 오행 에너지 보충`}],avoid:[]}}static getActivityRecommendations(e){return{beneficial:[{activity:"산책, 원예",element:"wood",effect:"목 오행 보충으로 창의성 증진"},{activity:"운동, 사교활동",element:"fire",effect:"화 오행 보충으로 활력 증진"},{activity:"명상, 요가",element:"earth",effect:"토 오행 보충으로 안정성 증진"},{activity:"독서, 학습",element:"metal",effect:"금 오행 보충으로 논리성 증진"},{activity:"수영, 음악감상",element:"water",effect:"수 오행 보충으로 지혜 증진"}],avoid:[]}}static getLifestyleRecommendations(e){return{diet:[{food:"녹색 채소",element:"wood",benefit:"간 건강과 해독 기능 강화"},{food:"붉은 과일",element:"fire",benefit:"심장 건강과 순환 기능 강화"},{food:"곡물류",element:"earth",benefit:"소화 기능과 영양 흡수 강화"},{food:"견과류",element:"metal",benefit:"폐 기능과 면역력 강화"},{food:"해산물",element:"water",benefit:"신장 기능과 수분 대사 강화"}],exercise:[{type:"스트레칭",element:"wood",effect:"유연성과 순환 개선"},{type:"유산소 운동",element:"fire",effect:"심폐 기능과 활력 증진"},{type:"근력 운동",element:"earth",effect:"근육량과 기초대사 증진"},{type:"호흡 운동",element:"metal",effect:"폐활량과 집중력 증진"},{type:"수영",element:"water",effect:"전신 순환과 유연성 증진"}],career:[{field:"예술, 디자인",element:"wood",aptitude:"창의성과 미적 감각 활용"},{field:"영업, 마케팅",element:"fire",aptitude:"소통능력과 추진력 활용"},{field:"관리, 서비스",element:"earth",aptitude:"신뢰성과 책임감 활용"},{field:"분석, 연구",element:"metal",aptitude:"논리성과 체계성 활용"},{field:"상담, 교육",element:"water",aptitude:"지혜와 포용력 활용"}]}}static generateChartData(e){const s=this.getElementDetails();return{labels:Object.keys(e).map(n=>s[n].korean),datasets:[{data:Object.values(e),backgroundColor:Object.keys(e).map(n=>s[n].color.primary),borderColor:Object.keys(e).map(n=>s[n].color.secondary),borderWidth:2,hoverOffset:10}]}}}const wi=({interpretation:t,loading:e=!1,error:s=null,category:n="basic"})=>{const[r,i]=j.useState(!0),[o,l]=j.useState(n==="spiritual"||n==="johoo"?"basic":n);if(j.useEffect(()=>{l(n==="spiritual"||n==="johoo"?"basic":n)},[n]),e)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),a.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"해석 데이터를 불러오는 중..."})]})});if(s)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[a.jsx("span",{className:"mr-2",children:"⚠️"}),a.jsxs("span",{children:["해석 데이터를 불러올 수 없습니다: ",s]})]})});if(!t)return null;const c=[{id:"basic",label:"기본 분석",icon:M2},{id:"personality",label:"성격",icon:xd},{id:"fortune",label:"운세",icon:xd},{id:"career",label:"직업",icon:b2},{id:"relationship",label:"인연",icon:I2},{id:"health",label:"건강",icon:x2}],d=()=>{var N;const b=t.basic,y=t.johoo,v=t.spiritual;return b?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"사주 기본 분석"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"일간:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:b.dayMaster})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"강약:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:b.dayMasterStrength==="strong"?"강함":b.dayMasterStrength==="weak"?"약함":"중간"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"용신:"}),a.jsx("span",{className:"ml-2 font-medium text-indigo-600 dark:text-indigo-400",children:b.yongshin})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"격국:"}),a.jsx("span",{className:"ml-2 font-medium text-indigo-600 dark:text-indigo-400",children:b.gyeokguk})]})]}),a.jsx("p",{className:"mt-3 text-sm text-gray-700 dark:text-gray-300",children:b.summary})]}),y&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"조후 분석 (계절 조화)"}),a.jsxs("div",{className:"text-sm space-y-2",children:[a.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["출생 계절: ",a.jsx("span",{className:"font-medium",children:y.season==="spring"?"봄":y.season==="summer"?"여름":y.season==="autumn"?"가을":"겨울"})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(N=y.seasonalCharacteristics)==null?void 0:N.map((S,C)=>a.jsx("span",{className:"px-2 py-1 bg-white dark:bg-gray-700 rounded text-xs",children:S},C))}),y.recommendations&&y.recommendations.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"추천사항:"}),a.jsx("ul",{className:"list-disc list-inside text-gray-600 dark:text-gray-400",children:y.recommendations.map((S,C)=>a.jsx("li",{children:S},C))})]})]})]}),v&&a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"신살 분석"}),a.jsxs("div",{className:"text-sm space-y-3",children:[v.beneficialSpirits&&v.beneficialSpirits.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-green-700 dark:text-green-400 mb-1",children:"길신 (吉神)"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:v.beneficialSpirits.map((S,C)=>a.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs",children:["✨ ",S]},C))})]}),v.harmfulSpirits&&v.harmfulSpirits.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-red-700 dark:text-red-400 mb-1",children:"흉신 (凶神)"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:v.harmfulSpirits.map((S,C)=>a.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded text-xs",children:["⚠️ ",S]},C))})]})]})]})]}):a.jsx("p",{className:"text-gray-500",children:"기본 분석 데이터가 없습니다."})},h=()=>{const b=t.personality;return b?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"성격 특성"}),b.strengths&&b.strengths.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"강점"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.strengths.map((y,v)=>a.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs",children:y},v))})]}),b.weaknesses&&b.weaknesses.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-400 mb-2",children:"보완점"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.weaknesses.map((y,v)=>a.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-full text-xs",children:y},v))})]}),b.developmentAreas&&b.developmentAreas.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"발전 방향"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:b.developmentAreas.map((y,v)=>a.jsx("li",{children:y},v))})]})]})}):a.jsx("p",{className:"text-gray-500",children:"성격 분석 데이터가 없습니다."})},m=()=>{const b=t.fortune;return b?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"올해 운세"}),b.luckyElements&&b.luckyElements.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-400 mb-2",children:"행운 요소"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.luckyElements.map((y,v)=>a.jsxs("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-full text-xs",children:["🍀 ",y]},v))})]}),b.cautionPeriods&&b.cautionPeriods.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:"주의 시기"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.cautionPeriods.map((y,v)=>a.jsxs("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full text-xs",children:["⚠️ ",y]},v))})]})]})}):a.jsx("p",{className:"text-gray-500",children:"운세 분석 데이터가 없습니다."})},u=()=>{const b=t.career;return b?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"직업 적성"}),b.suitableCareers&&b.suitableCareers.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"적합한 직업"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.suitableCareers.map((y,v)=>a.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs",children:y},v))})]}),b.workEnvironment&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"추천 근무 환경"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.workEnvironment})]})]})}):a.jsx("p",{className:"text-gray-500",children:"직업 지도 데이터가 없습니다."})},g=()=>{const b=t.relationship;return b?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"인간관계"}),b.relationshipPattern&&a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:b.relationshipPattern}),b.advice&&b.advice.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-pink-700 dark:text-pink-400 mb-2",children:"관계 조언"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:b.advice.map((y,v)=>a.jsx("li",{children:y},v))})]})]})}):a.jsx("p",{className:"text-gray-500",children:"관계 분석 데이터가 없습니다."})},f=()=>{const b=t.health;return b?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"건강 관리"}),b.vulnerabilities&&b.vulnerabilities.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-400 mb-2",children:"주의할 건강 부위"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.vulnerabilities.map((y,v)=>a.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-full text-xs",children:y},v))})]}),b.lifestyle&&b.lifestyle.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"추천 생활습관"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:b.lifestyle.map((y,v)=>a.jsx("li",{children:y},v))})]})]})}):a.jsx("p",{className:"text-gray-500",children:"건강 지도 데이터가 없습니다."})},p=()=>{switch(o){case"basic":return d();case"personality":return h();case"fortune":return m();case"career":return u();case"relationship":return g();case"health":return f();default:return d()}};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"✨"}),"사주 해석 분석"]}),a.jsx("button",{onClick:()=>i(!r),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:a.jsx("span",{children:r?"▲":"▼"})})]})}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700",children:c.map(b=>{const y=b.icon;return a.jsxs("button",{onClick:()=>l(b.id),className:`flex items-center px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors ${o===b.id?"text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600 dark:border-indigo-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.jsx(y,{className:"w-4 h-4 mr-2"}),b.label]},b.id)})}),a.jsx("div",{className:"p-6",children:p()})]})]})};ct.register(gs,Rs,Ps);const GS=({sajuData:t,height:e=350,className:s="",showLegend:n=!0,showTooltips:r=!0})=>{const[i,o]=j.useState(null),[l,c]=j.useState(!1),[d,h]=j.useState(null),m=j.useMemo(()=>Rn.analyzeFromSaju(t),[t]),u=j.useMemo(()=>Rn.analyzeElementRelationships(m),[m]),g=j.useMemo(()=>Rn.generateRecommendations(m,u),[m,u]),f=j.useMemo(()=>Rn.getElementDetails(),[]);j.useEffect(()=>{(async()=>{if(t){c(!0),h(null);try{const C=await ci.getComprehensiveInterpretation(t);o(C)}catch(C){console.error("해석 데이터 로드 실패:",C),h("해석 데이터를 불러올 수 없습니다.")}finally{c(!1)}}})()},[t]);const p=j.useMemo(()=>Rn.generateChartData(m),[m]),b=j.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:n,position:"right",labels:{font:{family:"Noto Sans KR, sans-serif",size:12},padding:15,usePointStyle:!0,pointStyle:"circle",generateLabels:S=>{var _;const C=S.data.datasets;if(C.length>0){const w=C[0];return((_=S.data.labels)==null?void 0:_.map((k,M)=>{const E=w.data[M],A=w.data.reduce((D,L)=>D+L,0),O=A>0?(E/A*100).toFixed(1):"0.0",R=Array.isArray(w.backgroundColor)?w.backgroundColor[M]:w.backgroundColor,T=Array.isArray(w.borderColor)?w.borderColor[M]:w.borderColor;return{text:`${k} (${O}%)`,fillStyle:R||"#000",strokeStyle:T||"#000",lineWidth:2,hidden:!1,index:M}}))||[]}return[]}}},tooltip:{enabled:r,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{label(S){const C=S.label||"",_=S.parsed,w=S.dataset.data.reduce((A,O)=>A+O,0),k=w>0?(_/w*100).toFixed(1):"0.0",M=Object.keys(m)[S.dataIndex],E=f[M];return[`${C}: ${_}점 (${k}%)`,`특성: ${E.characteristics.positive.join(", ")}`]}}}},cutout:"50%",animation:{animateRotate:!0,animateScale:!0,duration:1e3}}),[n,r,m,f]),v=(()=>{const S=u.balance_score;return S>=80?{status:"매우 균형",color:"text-green-600",icon:"🟢"}:S>=60?{status:"균형 양호",color:"text-blue-600",icon:"🔵"}:S>=40?{status:"보통",color:"text-yellow-600",icon:"🟡"}:{status:"불균형",color:"text-red-600",icon:"🔴"}})();return Object.values(m).some(S=>S>0)?a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${s}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"🎯 오행 균형도"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"목, 화, 토, 금, 수 다섯 요소의 조화 상태"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${v.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:v.icon}),v.status]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["균형점수: ",u.balance_score.toFixed(0),"점"]})]})]}),a.jsxs("div",{className:"relative mb-6",style:{height:e-150},children:[a.jsx(Zo,{data:p,options:b}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:u.balance_score.toFixed(0)}),a.jsx("div",{className:"text-xs text-gray-500",children:"균형점수"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-1",children:"💪 강한 오행"}),u.dominant_elements.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300",children:u.dominant_elements.map(S=>f[S].korean).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-xs",children:"균형적 분포"})]}),a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-red-800 dark:text-red-200 mb-1",children:"⚠️ 약한 오행"}),u.weak_elements.length>0?a.jsx("div",{className:"text-red-700 dark:text-red-300",children:u.weak_elements.map(S=>f[S].korean).join(", ")}):a.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs",children:"특별히 약한 요소 없음"})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"🎨 추천 색상"}),g.colors.beneficial.length>0?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:g.colors.beneficial[0].hex}}),a.jsx("span",{className:"text-blue-700 dark:text-blue-300 text-xs",children:g.colors.beneficial[0].name})]}):a.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:"균형 유지"})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx(wi,{interpretation:i,loading:l,error:d,category:"basic"})})]}):a.jsx("div",{className:`flex items-center justify-center ${s}`,style:{height:e},children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📊"}),a.jsx("div",{className:"text-lg font-medium",children:"오행 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})})},us={bijeon:{name:"Bijeon",koreanName:"비견",hanja:"比肩",category:"self",icon:"🤝",color:{primary:"#6366F1",secondary:"#818CF8",background:"#EEF2FF"},keywords:["자아","동등","협력","자존심"],positiveTraits:["협동성","동료애","공정함","균형감각"],negativeTraits:["고집","경직성","비타협적","자기중심적"],description:"자아와 동등한 기운으로 협력과 경쟁을 나타냄",roles:["팀워크","동료관계","자아실현","공정한 경쟁"]},geopjae:{name:"Geopjae",koreanName:"겁재",hanja:"劫財",category:"self",icon:"⚡",color:{primary:"#8B5CF6",secondary:"#A78BFA",background:"#F3F4F6"},keywords:["경쟁","도전","변화","투쟁"],positiveTraits:["도전정신","변화적응","추진력","개척정신"],negativeTraits:["성급함","충동성","파괴성","불안정"],description:"재물을 빼앗는 기운으로 경쟁과 도전을 의미",roles:["혁신","변화주도","경쟁력","위기대응"]},siksin:{name:"Siksin",koreanName:"식신",hanja:"食神",category:"expression",icon:"🎨",color:{primary:"#10B981",secondary:"#34D399",background:"#ECFDF5"},keywords:["표현","재능","즐거움","창작"],positiveTraits:["재능","표현력","유쾌함","창의성"],negativeTraits:["방만함","안일함","현실도피","의존성"],description:"일간이 생하는 기운으로 재능과 표현력을 나타냄",roles:["예술","창작","엔터테인먼트","서비스"]},sanggwan:{name:"Sanggwan",koreanName:"상관",hanja:"傷官",category:"expression",icon:"🚀",color:{primary:"#F59E0B",secondary:"#FBBF24",background:"#FFFBEB"},keywords:["창조","반항","혁신","비판"],positiveTraits:["창조력","혁신성","독창성","예술성"],negativeTraits:["반항성","비판적","불안정","극단적"],description:"관을 상하게 하는 기운으로 창조와 혁신을 의미",roles:["혁신","창업","예술","비판"]},pyeonjae:{name:"Pyeonjae",koreanName:"편재",hanja:"偏財",category:"wealth",icon:"💰",color:{primary:"#EF4444",secondary:"#F87171",background:"#FEF2F2"},keywords:["활동","사교","유동","기회"],positiveTraits:["사교성","활동력","기회포착","유연성"],negativeTraits:["산만함","불안정","투기성","낭비"],description:"일간이 극하는 동성 재물로 활동적 재물을 의미",roles:["영업","사교","서비스","유통"]},jeongjae:{name:"Jeongjae",koreanName:"정재",hanja:"正財",category:"wealth",icon:"🏦",color:{primary:"#DC2626",secondary:"#EF4444",background:"#FEF2F2"},keywords:["근면","절약","안정","축적"],positiveTraits:["근면성","절약정신","계획성","안정성"],negativeTraits:["보수성","소심함","경직성","물질주의"],description:"일간이 극하는 이성 재물로 정당한 재물을 의미",roles:["관리","회계","저축","투자"]},pyeongwan:{name:"Pyeongwan",koreanName:"편관",hanja:"偏官",category:"authority",icon:"⚔️",color:{primary:"#7C2D12",secondary:"#A16207",background:"#FEF3C7"},keywords:["개척","모험","권력","압박"],positiveTraits:["개척정신","추진력","결단력","리더십"],negativeTraits:["독선적","권위적","성급함","강압적"],description:"일간을 극하는 동성 관성으로 개척과 권력을 의미",roles:["개척","경영","군사","혁신"]},jeonggwan:{name:"Jeonggwan",koreanName:"정관",hanja:"正官",category:"authority",icon:"👑",color:{primary:"#92400E",secondary:"#D97706",background:"#FEF3C7"},keywords:["명예","권위","질서","책임"],positiveTraits:["책임감","신뢰성","품격","리더십"],negativeTraits:["보수성","형식적","권위의존","소극성"],description:"일간을 극하는 이성 관성으로 명예와 권위를 의미",roles:["관리","행정","교육","상담"]},pyeongin:{name:"Pyeongin",koreanName:"편인",hanja:"偏印",category:"support",icon:"🔮",color:{primary:"#3B82F6",secondary:"#60A5FA",background:"#EFF6FF"},keywords:["직감","독창","신비","특별함"],positiveTraits:["직감력","독창성","신비성","특별함"],negativeTraits:["외로움","비현실적","변덕","까다로움"],description:"일간을 생하는 동성 인성으로 직감과 독창성을 의미",roles:["연구","창작","상담","치료"]},jeongin:{name:"Jeongin",koreanName:"정인",hanja:"正印",category:"support",icon:"📚",color:{primary:"#1D4ED8",secondary:"#3B82F6",background:"#EFF6FF"},keywords:["학습","보호","지혜","인덕"],positiveTraits:["학습력","인덕","보호본능","지혜"],negativeTraits:["의존성","소극성","현실도피","게으름"],description:"일간을 생하는 이성 인성으로 학습과 보호를 의미",roles:["교육","학습","상담","보육"]}},so={self:{name:"자아성",description:"자아와 관련된 기운",tenGods:["bijeon","geopjae"]},expression:{name:"표현성",description:"재능과 표현에 관련된 기운",tenGods:["siksin","sanggwan"]},wealth:{name:"재물성",description:"재물과 관련된 기운",tenGods:["pyeonjae","jeongjae"]},authority:{name:"관성",description:"권위와 명예에 관련된 기운",tenGods:["pyeongwan","jeonggwan"]},support:{name:"인성",description:"학습과 보호에 관련된 기운",tenGods:["pyeongin","jeongin"]}},Ln={DOMINANT_MIN:.15,WEAK_MAX:.03,EXCELLENT_MIN:85,GOOD_MIN:70,FAIR_MIN:50};class no{static analyzeFromSaju(e){const{tenGods:s}=e;return{bijeon:s.bijeon||0,geopjae:s.geopjae||0,siksin:s.siksin||0,sanggwan:s.sanggwan||0,pyeonjae:s.pyeonjae||0,jeongjae:s.jeongjae||0,pyeongwan:s.pyeongwan||0,jeonggwan:s.jeonggwan||0,pyeongin:s.pyeongin||0,jeongin:s.jeongin||0}}static performFullAnalysis(e){const s=this.analyzeFromSaju(e),n=Object.values(s).reduce((m,u)=>m+u,0),r={};Object.entries(s).forEach(([m,u])=>{r[m]=n>0?u/n:0});const i=[],o=[],l=[];Object.entries(r).forEach(([m,u])=>{const g=m;s[g]===0?l.push(g):u>=Ln.DOMINANT_MIN?i.push(g):u<=Ln.WEAK_MAX&&o.push(g)});const c=this.calculateBalance(s),d=this.analyzePersonality(s),h=this.generateRecommendations(s,d);return{data:s,total:n,percentages:r,dominant:i,weak:o,missing:l,balance:c,personality:d,recommendations:h}}static calculateBalance(e){const n=Object.values(e).reduce((h,m)=>h+m,0);if(n===0)return{score:0,status:"poor",description:"십성 데이터가 부족합니다"};const r=Object.entries(so).map(([h,m])=>m.tenGods.reduce((g,f)=>g+e[f],0)/n),i=1/Object.keys(so).length,o=r.reduce((h,m)=>h+Math.pow(m-i,2),0)/r.length,l=Math.max(0,Math.min(100,100-o*500));let c,d;return l>=Ln.EXCELLENT_MIN?(c="excellent",d="매우 균형 잡힌 십성 분포"):l>=Ln.GOOD_MIN?(c="good",d="균형 잡힌 십성 분포"):l>=Ln.FAIR_MIN?(c="fair",d="보통 수준의 십성 분포"):(c="poor",d="불균형한 십성 분포"),{score:l,status:c,description:d}}static analyzePersonality(e){var g;const s=Object.values(e).reduce((f,p)=>f+p,0);if(s===0)return{leadership:0,creativity:0,stability:0,sociability:0,independence:0,overall:"분석 불가"};const n=Math.round((e.jeonggwan+e.pyeongwan)/s*100),r=Math.round((e.siksin+e.sanggwan)/s*100),i=Math.round((e.jeongin+e.pyeongin)/s*100),o=Math.round((e.jeongjae+e.pyeonjae)/s*100),l=Math.round((e.bijeon+e.geopjae)/s*100),c={leadership:n,creativity:r,stability:i,sociability:o,independence:l},d=Math.max(...Object.values(c)),h=(g=Object.entries(c).find(([,f])=>f===d))==null?void 0:g[0],u={leadership:"리더십형 - 권위와 책임감이 강한 성향",creativity:"창의형 - 표현력과 창조성이 뛰어난 성향",stability:"안정형 - 학습과 보호본능이 강한 성향",sociability:"사교형 - 대인관계와 재물관리에 뛰어난 성향",independence:"독립형 - 자아실현과 경쟁에 강한 성향"}[h||"stability"]||"균형형 - 다양한 면에서 고른 성향";return{leadership:n,creativity:r,stability:i,sociability:o,independence:l,overall:u}}static generateRecommendations(e,s){const n=this.getCareerRecommendations(e),r=this.getRelationshipAdvice(e,s),i=this.getDevelopmentSuggestions(e),o=this.getCautionAreas(e);return{career:n,relationships:r,development:i,caution:o}}static getCareerRecommendations(e){const s=Object.values(e).reduce((l,c)=>l+c,0),n=[],r=e.jeonggwan+e.pyeongwan;r/s>=.2&&n.push({field:"관리직, 행정직, 공무원",tenGod:"jeonggwan",suitability:Math.round(r/s*100),reason:"강한 관성으로 권위와 책임을 잘 감당할 수 있음"});const i=e.siksin+e.sanggwan;i/s>=.2&&n.push({field:"예술, 창작, 엔터테인먼트",tenGod:"siksin",suitability:Math.round(i/s*100),reason:"뛰어난 표현력과 창의성을 활용할 수 있음"});const o=e.jeongjae+e.pyeonjae;return o/s>=.2&&n.push({field:"영업, 마케팅, 금융",tenGod:"jeongjae",suitability:Math.round(o/s*100),reason:"재물 관리와 대인관계 능력이 뛰어남"}),n.length>0?n:[{field:"균형 잡힌 다양한 분야",tenGod:"bijeon",suitability:70,reason:"고른 십성 분포로 다양한 분야에 적응 가능"}]}static getRelationshipAdvice(e,s){const n=[];return s.sociability>30&&n.push({type:"대인관계",advice:"뛰어난 사교성을 활용하여 네트워킹을 적극적으로 활용하세요",basedOn:["jeongjae","pyeonjae"]}),s.independence>30&&n.push({type:"자아실현",advice:"독립적인 성향을 살려 자신만의 영역을 구축하세요",basedOn:["bijeon","geopjae"]}),n.length>0?n:[{type:"균형발전",advice:"다양한 관계를 통해 균형 잡힌 성장을 추구하세요",basedOn:["jeongin"]}]}static getDevelopmentSuggestions(e){const s=[];return Object.entries(e).sort(([,r],[,i])=>r-i).slice(0,2).map(([r])=>r).forEach(r=>{const i=us[r];s.push({area:`${i.koreanName} 개발`,method:`${i.positiveTraits.join(", ")} 관련 활동 증가`,targetTenGod:r})}),s}static getCautionAreas(e){const s=[],n=Object.values(e).reduce((r,i)=>r+i,0);return Object.entries(e).forEach(([r,i])=>{if(i/n>.3){const l=us[r];s.push({issue:`${l.koreanName} 과다`,reason:`${l.negativeTraits.join(", ")} 경향이 나타날 수 있음`,solution:`${l.positiveTraits[0]} 측면을 적절히 조절하고 다른 십성을 균형있게 발전시키세요`})}}),s}static generateChartData(e){const s=Object.keys(e).map(i=>`${us[i].koreanName}
${us[i].hanja}`),n=Object.values(e),r=Object.keys(e).map(i=>us[i].color.primary);return{labels:s,datasets:[{label:"십성 분포",data:n,backgroundColor:r.map(i=>`${i}80`),borderColor:r,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}static generateCategoryChartData(e){const s=Object.entries(so).map(([n,r])=>{const i=r.tenGods.reduce((o,l)=>o+e[l],0);return{category:n,name:r.name,value:i}});return{labels:s.map(n=>n.name),datasets:[{data:s.map(n=>n.value),backgroundColor:["#6366F1","#10B981","#EF4444","#F59E0B","#3B82F6"],borderWidth:2}]}}}ct.register(on,ln,vs,gs,sc,Rs,Ps);const KS=({sajuData:t,height:e=400,className:s="",chartType:n="bar",showCategory:r=!1})=>{const[i,o]=j.useState("individual"),[l,c]=j.useState(null),[d,h]=j.useState(!1),[m,u]=j.useState(null),g=j.useMemo(()=>no.performFullAnalysis(t),[t]);j.useEffect(()=>{(async()=>{if(t){h(!0),u(null);try{const C=await ci.getPersonalityAnalysis(t);c({personality:C})}catch(C){console.error("성격 분석 데이터 로드 실패:",C),u("성격 분석 데이터를 불러올 수 없습니다.")}finally{h(!1)}}})()},[t]);const f=j.useMemo(()=>no.generateChartData(g.data),[g.data]),p=j.useMemo(()=>no.generateCategoryChartData(g.data),[g.data]),b=j.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{title(S){return S[0].label||""},label(S){const C=S.parsed.x,_=g.total>0?(C/g.total*100).toFixed(1):"0.0",w=Object.keys(g.data)[S.dataIndex],k=us[w];return[`점수: ${C}점 (${_}%)`,`특성: ${k.keywords.join(", ")}`,`장점: ${k.positiveTraits.join(", ")}`]}}}},scales:{x:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{font:{family:"Noto Sans KR, sans-serif",size:11}}},y:{grid:{display:!1},ticks:{font:{family:"Noto Sans KR, sans-serif",size:11},callback(S){return this.getLabelForValue(S).split(`
`)[0]}}}},animation:{duration:1e3}}),[g.data,g.total]),y=j.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{font:{family:"Noto Sans KR, sans-serif",size:11},padding:15,usePointStyle:!0,pointStyle:"rectRounded",generateLabels:S=>{var _;const C=S.data.datasets;if(C.length>0){const w=C[0];return((_=S.data.labels)==null?void 0:_.filter((k,M)=>w.data[M]>0).map((k,M)=>{const E=w.data[M],A=g.total>0?(E/g.total*100).toFixed(1):"0.0",O=Array.isArray(w.backgroundColor)?w.backgroundColor[M]:w.backgroundColor,R=Array.isArray(w.borderColor)?w.borderColor[M]:w.borderColor;return{text:`${k} (${A}%)`,fillStyle:O||"#000",strokeStyle:R||"#000",lineWidth:2,hidden:!1,index:M}}))||[]}return[]}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",callbacks:{label(S){const C=S.parsed,_=g.total>0?(C/g.total*100).toFixed(1):"0.0";return`${S.label}: ${C}점 (${_}%)`}}}},cutout:"40%",animation:{animateRotate:!0,duration:1e3}}),[g.total]),N=(()=>{const S=g.balance.score;return S>=80?{status:"매우 균형",color:"text-green-600",icon:"🟢"}:S>=60?{status:"균형 양호",color:"text-blue-600",icon:"🔵"}:S>=40?{status:"보통",color:"text-yellow-600",icon:"🟡"}:{status:"불균형",color:"text-red-600",icon:"🔴"}})();return g.total===0?a.jsx("div",{className:`flex items-center justify-center ${s}`,style:{height:e},children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📊"}),a.jsx("div",{className:"text-lg font-medium",children:"십성 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})}):a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${s}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"⭐ 십성 분포도"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"10가지 십성의 강도와 성격 특성 분석"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[a.jsx("button",{onClick:()=>o("individual"),className:`px-3 py-1 text-xs transition-colors ${i==="individual"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"개별십성"}),a.jsx("button",{onClick:()=>o("category"),className:`px-3 py-1 text-xs transition-colors ${i==="category"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"카테고리"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${N.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:N.icon}),N.status]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["균형점수: ",g.balance.score.toFixed(0),"점"]})]})]})]}),a.jsx("div",{className:"mb-6",style:{height:e-200},children:i==="individual"?n==="bar"?a.jsx(Xg,{data:f,options:b}):a.jsx(Zo,{data:f,options:y}):a.jsx(Zo,{data:p,options:y})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🧠 성격 특성"}),a.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm",children:g.personality.overall})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"💪 강한 십성"}),g.dominant.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300 text-sm",children:g.dominant.map(S=>us[S].koreanName).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm",children:"균형적 분포"})]}),a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-purple-800 dark:text-purple-200 mb-2",children:"🎯 추천 분야"}),g.recommendations.career.length>0?a.jsx("div",{className:"text-purple-700 dark:text-purple-300 text-sm",children:g.recommendations.career[0].field}):a.jsx("div",{className:"text-purple-600 dark:text-purple-400 text-sm",children:"다양한 분야 적합"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"핵심 능력치"}),Object.entries({리더십:g.personality.leadership,창의성:g.personality.creativity,안정성:g.personality.stability,사교성:g.personality.sociability,독립성:g.personality.independence}).map(([S,C])=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-16 text-xs text-gray-600 dark:text-gray-400",children:S}),a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-purple-500",style:{width:`${C}%`}})}),a.jsx("div",{className:"w-8 text-xs text-gray-500 text-right",children:C})]},S))]}),a.jsx("div",{className:"mt-6",children:a.jsx(wi,{interpretation:l,loading:d,error:m,category:"personality"})})]})},Xe={ja:{name:"Ja",koreanName:"자",hanja:"子",animal:"쥐",animalEmoji:"🐭",element:"water",season:"winter",month:11,direction:"북",time:"23:00-01:00",color:{primary:"#1E40AF",secondary:"#3B82F6",background:"#EFF6FF"},characteristics:["영리함","적응력","기회포착"],positiveTraits:["지혜","민첩성","실용성","생존력"],negativeTraits:["욕심","계산적","의심","소심함"],compatibility:["jin","sin"],conflict:["o"]},chuk:{name:"Chuk",koreanName:"축",hanja:"丑",animal:"소",animalEmoji:"🐂",element:"earth",season:"winter",month:12,direction:"북동",time:"01:00-03:00",color:{primary:"#92400E",secondary:"#D97706",background:"#FEF3C7"},characteristics:["성실함","인내력","신뢰성"],positiveTraits:["근면","신중함","책임감","안정성"],negativeTraits:["완고함","보수적","느림","고집"],compatibility:["sa","yu"],conflict:["mi"]},in:{name:"In",koreanName:"인",hanja:"寅",animal:"호랑이",animalEmoji:"🐅",element:"wood",season:"spring",month:1,direction:"동북",time:"03:00-05:00",color:{primary:"#059669",secondary:"#10B981",background:"#ECFDF5"},characteristics:["용맹함","리더십","정의감"],positiveTraits:["용기","추진력","정의감","보호본능"],negativeTraits:["성급함","독선","고집","감정적"],compatibility:["o","sul"],conflict:["sin"]},myo:{name:"Myo",koreanName:"묘",hanja:"卯",animal:"토끼",animalEmoji:"🐰",element:"wood",season:"spring",month:2,direction:"동",time:"05:00-07:00",color:{primary:"#16A34A",secondary:"#22C55E",background:"#F0FDF4"},characteristics:["온화함","예술성","직관력"],positiveTraits:["부드러움","예술감각","평화주의","직관"],negativeTraits:["우유부단","소심함","의존성","현실도피"],compatibility:["mi","hae"],conflict:["yu"]},jin:{name:"Jin",koreanName:"진",hanja:"辰",animal:"용",animalEmoji:"🐉",element:"earth",season:"spring",month:3,direction:"동남",time:"07:00-09:00",color:{primary:"#CA8A04",secondary:"#EAB308",background:"#FEFCE8"},characteristics:["역동성","변화","신비성"],positiveTraits:["포용력","변화적응","신비성","창조력"],negativeTraits:["변덕","과도함","신경질","불안정"],compatibility:["ja","yu"],conflict:["sul"]},sa:{name:"Sa",koreanName:"사",hanja:"巳",animal:"뱀",animalEmoji:"🐍",element:"fire",season:"summer",month:4,direction:"남동",time:"09:00-11:00",color:{primary:"#DC2626",secondary:"#EF4444",background:"#FEF2F2"},characteristics:["지혜","신중함","신비함"],positiveTraits:["지혜","통찰력","신중함","집중력"],negativeTraits:["의심","질투","복잡함","집착"],compatibility:["chuk","yu"],conflict:["hae"]},o:{name:"O",koreanName:"오",hanja:"午",animal:"말",animalEmoji:"🐎",element:"fire",season:"summer",month:5,direction:"남",time:"11:00-13:00",color:{primary:"#E11D48",secondary:"#F43F5E",background:"#FFF1F2"},characteristics:["활동성","열정","자유로움"],positiveTraits:["활력","자유로움","열정","진취성"],negativeTraits:["성급함","변덕","불안정","산만함"],compatibility:["in","sul"],conflict:["ja"]},mi:{name:"Mi",koreanName:"미",hanja:"未",animal:"양",animalEmoji:"🐑",element:"earth",season:"summer",month:6,direction:"남서",time:"13:00-15:00",color:{primary:"#A16207",secondary:"#D97706",background:"#FEF3C7"},characteristics:["온순함","협조성","예술성"],positiveTraits:["온순함","협조성","예술성","평화주의"],negativeTraits:["우유부단","의존성","소극적","걱정"],compatibility:["myo","hae"],conflict:["chuk"]},sin:{name:"Sin",koreanName:"신",hanja:"申",animal:"원숭이",animalEmoji:"🐵",element:"metal",season:"autumn",month:7,direction:"서남",time:"15:00-17:00",color:{primary:"#F59E0B",secondary:"#FBBF24",background:"#FFFBEB"},characteristics:["재치","활발함","변화"],positiveTraits:["재치","활발함","적응력","창의성"],negativeTraits:["변덕","경박함","불안정","장난"],compatibility:["ja","jin"],conflict:["in"]},yu:{name:"Yu",koreanName:"유",hanja:"酉",animal:"닭",animalEmoji:"🐓",element:"metal",season:"autumn",month:8,direction:"서",time:"17:00-19:00",color:{primary:"#D97706",secondary:"#F59E0B",background:"#FEF3C7"},characteristics:["정확성","부지런함","완벽주의"],positiveTraits:["정확성","부지런함","완벽주의","책임감"],negativeTraits:["까다로움","비판적","경직성","걱정"],compatibility:["chuk","sa","jin"],conflict:["myo"]},sul:{name:"Sul",koreanName:"술",hanja:"戌",animal:"개",animalEmoji:"🐕",element:"earth",season:"autumn",month:9,direction:"서북",time:"19:00-21:00",color:{primary:"#92400E",secondary:"#B45309",background:"#FEF3C7"},characteristics:["충성심","정의감","보호본능"],positiveTraits:["충성심","정의감","보호본능","신뢰성"],negativeTraits:["완고함","의심","보수적","걱정"],compatibility:["in","o"],conflict:["jin"]},hae:{name:"Hae",koreanName:"해",hanja:"亥",animal:"돼지",animalEmoji:"🐷",element:"water",season:"winter",month:10,direction:"북서",time:"21:00-23:00",color:{primary:"#1E40AF",secondary:"#2563EB",background:"#EFF6FF"},characteristics:["관대함","성실함","단순함"],positiveTraits:["관대함","성실함","정직함","포용력"],negativeTraits:["단순함","게으름","욕심","고집"],compatibility:["myo","mi"],conflict:["sa"]}},qS={harmony:{name:"조화",description:"서로를 보완하고 발전시키는 관계",color:"#10B981",icon:"🤝"},conflict:{name:"충돌",description:"서로 대립하고 견제하는 관계",color:"#EF4444",icon:"⚔️"},punishment:{name:"형",description:"서로를 억제하고 제약하는 관계",color:"#F59E0B",icon:"⚠️"},destruction:{name:"파괴",description:"서로를 해치고 파괴하는 관계",color:"#DC2626",icon:"💥"},neutral:{name:"중립",description:"특별한 영향을 주고받지 않는 관계",color:"#6B7280",icon:"➖"}};class JS{static analyzeFromSaju(e){const s={ja:Math.floor(Math.random()*30),chuk:Math.floor(Math.random()*30),in:Math.floor(Math.random()*30),myo:Math.floor(Math.random()*30),jin:Math.floor(Math.random()*30),sa:Math.floor(Math.random()*30),o:Math.floor(Math.random()*30),mi:Math.floor(Math.random()*30),sin:Math.floor(Math.random()*30),yu:Math.floor(Math.random()*30),sul:Math.floor(Math.random()*30),hae:Math.floor(Math.random()*30)},n=this.getYearBranch(e.birthInfo.year);return n&&(s[n]+=30),s}static performFullAnalysis(e){const s=this.analyzeFromSaju(e),n=Object.values(s).reduce((m,u)=>m+u,0),r=[],i=[];Object.entries(s).forEach(([m,u])=>{const g=m;u===0?i.push(g):u>=30&&r.push(g)});const o=this.analyzeInteractions(s),l=this.calculateOverallHarmony(s,o),c=this.calculateSeasonalBalance(s),d=this.analyzeAnimalPersonality(s,r),h=this.generateRecommendations(s,r,i);return{data:s,total:n,dominant:r,missing:i,interactions:o,overallHarmony:l,seasonalBalance:c,animalPersonality:d,recommendations:h}}static getYearBranch(e){const s=["sin","yu","sul","hae","ja","chuk","in","myo","jin","sa","o","mi"],n=e%12;return s[n]||null}static analyzeInteractions(e){const s={},n=Object.entries(e).filter(([r,i])=>i>10).map(([r])=>r);for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++){const o=n[r],l=n[i],c=`${o}-${l}`;s[c]=this.analyzeRelationship(o,l)}return s}static analyzeRelationship(e,s){const n=Xe[e];return n.compatibility.includes(s)?{relationship:{type:"harmony",strength:80,description:"서로 조화를 이루며 시너지를 발생시킴"},effects:["긍정적 에너지 증폭","목표 달성 용이","관계 개선"],recommendations:["함께 협력하면 좋은 결과","파트너십 강화 필요"]}:n.conflict.includes(s)?{relationship:{type:"conflict",strength:70,description:"서로 대립하고 충돌하는 관계"},effects:["갈등 가능성","스트레스 증가","의견 충돌"],recommendations:["중재자 필요","거리두기 권장","이해와 배려 필요"]}:{relationship:{type:"neutral",strength:30,description:"특별한 영향 없는 중립적 관계"},effects:["평범한 관계","특별한 영향 없음"],recommendations:["자연스러운 관계 유지"]}}static calculateOverallHarmony(e,s){let n=50;Object.values(s).forEach(l=>{l.relationship.type==="harmony"?n+=10:l.relationship.type==="conflict"&&(n-=10)});const r=Object.values(e),i=r.reduce((l,c)=>l+c,0)/r.length,o=r.reduce((l,c)=>l+Math.pow(c-i,2),0)/r.length;return n+=Math.max(0,30-Math.sqrt(o)),Math.max(0,Math.min(100,n))}static calculateSeasonalBalance(e){const s=(e.in||0)+(e.myo||0)+(e.jin||0),n=(e.sa||0)+(e.o||0)+(e.mi||0),r=(e.sin||0)+(e.yu||0)+(e.sul||0),i=(e.hae||0)+(e.ja||0)+(e.chuk||0),o=s+n+r+i,l=o>0?s/o*100:25,c=o>0?n/o*100:25,d=o>0?r/o*100:25,h=o>0?i/o*100:25,m=[Math.abs(l-25),Math.abs(c-25),Math.abs(d-25),Math.abs(h-25)],u=Math.max(...m),g=Math.max(0,100-u*2);return{spring:l,summer:c,autumn:d,winter:h,balance:g}}static analyzeAnimalPersonality(e,s){const n=s[0]||"ja",r=Xe[n];return{primaryAnimal:`${r.animalEmoji} ${r.animal}형 인격`,traits:r.positiveTraits,compatibility:r.compatibility.map(i=>Xe[i].animal),cautions:r.negativeTraits,lifePattern:`${r.time} 시간대에 활동적, ${r.direction}방향 선호`}}static generateRecommendations(e,s,n){const r=[],i=[],o=[],l=[];if(s.forEach(c=>{const d=Xe[c];r.push({color:d.color.primary,hex:d.color.primary,reason:`${d.animal}의 기운을 강화`}),i.push({direction:d.direction,benefit:`${d.element} 오행 에너지 증진`}),o.push({period:d.time,activity:"중요한 일정",effect:"최상의 컨디션과 운세"})}),s.length>0){const c=Xe[s[0]];l.push({compatible:c.compatibility.map(d=>Xe[d].animal),avoid:c.conflict.map(d=>Xe[d].animal),reason:"간지 상성과 상충 관계"})}return{colors:r.slice(0,3),directions:i.slice(0,2),timing:o.slice(0,3),relationships:l.slice(0,1)}}}class At{static findMaximumValues(e){const s=[];return e.forEach((n,r)=>{const i=Math.max(...n.values),o=n.values.indexOf(i);s.push({datasetIndex:r,pointIndex:o,value:i})}),s}static createHighlightedPointStyles(e,s){const n=this.findMaximumValues(e);return e.map((r,i)=>{const o=n.find(m=>m.datasetIndex===i),l=r.values.map((m,u)=>o&&u===o.pointIndex?s.maxPointStyle.radius:s.normalPointStyle.radius),c=r.values.map((m,u)=>o&&u===o.pointIndex?s.maxPointStyle.backgroundColor:this.COLOR_PALETTE.primary[i%this.COLOR_PALETTE.primary.length]),d=r.values.map((m,u)=>o&&u===o.pointIndex?s.maxPointStyle.borderColor:this.COLOR_PALETTE.primary[i%this.COLOR_PALETTE.primary.length]),h=r.values.map((m,u)=>o&&u===o.pointIndex?s.maxPointStyle.borderWidth:s.normalPointStyle.borderWidth);return{label:r.label,data:r.values,backgroundColor:`${this.COLOR_PALETTE.primary[i%this.COLOR_PALETTE.primary.length]}20`,borderColor:this.COLOR_PALETTE.primary[i%this.COLOR_PALETTE.primary.length],pointBackgroundColor:c,pointBorderColor:d,pointRadius:l,pointBorderWidth:h,borderWidth:2,tension:.1}})}static applyDarkMode(e,s){var r,i,o,l,c,d,h,m,u,g,f,p;const n=s?this.COLOR_PALETTE.dark:this.COLOR_PALETTE.light;return{...e,plugins:{...e.plugins,legend:{...(r=e.plugins)==null?void 0:r.legend,labels:{...(o=(i=e.plugins)==null?void 0:i.legend)==null?void 0:o.labels,color:n.text}}},scales:{r:{...(l=e.scales)==null?void 0:l.r,ticks:{...(d=(c=e.scales)==null?void 0:c.r)==null?void 0:d.ticks,color:n.text,display:!1},grid:{...(m=(h=e.scales)==null?void 0:h.r)==null?void 0:m.grid,color:n.gridLines},angleLines:{...(g=(u=e.scales)==null?void 0:u.r)==null?void 0:g.angleLines,color:n.gridLines},pointLabels:{...(p=(f=e.scales)==null?void 0:f.r)==null?void 0:p.pointLabels,color:n.text}}}}}static createCompatibilityRadarConfig(e,s,n,r=!1){const i=this.createHighlightedPointStyles(s,n),o=this.applyDarkMode(this.DEFAULT_RADAR_OPTIONS,r);return{type:"radar",data:{labels:e,datasets:i},options:{...o,animation:{...o.animation,duration:n.animation.duration,easing:n.animation.easing}}}}static createStandardRadarConfig(e,s,n=!1,r=!0){const i={highlightMaximum:r,maxPointStyle:{radius:6,backgroundColor:this.COLOR_PALETTE.accent,borderColor:this.COLOR_PALETTE.accent,borderWidth:3},normalPointStyle:{radius:3,borderWidth:2},animation:{duration:1200,easing:"easeInOutQuart"}};return this.createCompatibilityRadarConfig(e,s,i,n)}static getGradeColor(e){const s={S:"#FFD700","A+":"#FF6B6B",A:"#4ECDC4","B+":"#45B7D1",B:"#96CEB4",C:"#FFEAA7",D:"#DDA0DD"};return s[e]||s.B}static getResponsiveOptions(e){const s=e<400?10:e<600?12:14;return{plugins:{legend:{labels:{font:{size:s}}}},scales:{r:{ticks:{font:{size:Math.max(8,s-2)}},pointLabels:{font:{size:s}}}}}}static getUpdateAnimation(){return{duration:800,easing:"easeInOutQuart",onComplete(){}}}static getCompatibilityColorScheme(e){return e>=90?["#FFD700","#FFA500","#FF8C00"]:e>=80?["#FF6B6B","#FF8A80","#FFAB91"]:e>=70?["#4ECDC4","#80DEEA","#B2EBF2"]:e>=60?["#45B7D1","#81C784","#A5D6A7"]:["#96CEB4","#BCAAA4","#D7CCC8"]}}$(At,"COLOR_PALETTE",{primary:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#FFB4B4"],accent:"#FFD700",success:"#4CAF50",warning:"#FF9800",danger:"#F44336",dark:{background:"rgba(255, 255, 255, 0.1)",text:"#ffffff",gridLines:"rgba(255, 255, 255, 0.2)"},light:{background:"rgba(0, 0, 0, 0.1)",text:"#333333",gridLines:"rgba(0, 0, 0, 0.1)"}}),$(At,"DEFAULT_RADAR_OPTIONS",{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12,weight:"normal"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#ffffff",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label(e){const s=e.dataset.label||"",n=Math.round(e.parsed.r*10)/10;return`${s}: ${n}점`}}}},scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,display:!1,font:{size:10}},grid:{color:"rgba(128, 128, 128, 0.2)",lineWidth:1},angleLines:{color:"rgba(128, 128, 128, 0.2)",lineWidth:1},pointLabels:{font:{size:12,weight:"bold"}}}},animation:{duration:1500,easing:"easeInOutQuart"}});At.COLOR_PALETTE.accent,At.COLOR_PALETTE.accent;ct.register(Ht,Yt,Qe,ji,Rs,Ps);const XS=({sajuData:t,height:e=400,className:s="",showRelationships:n=!0,showSeasonalBalance:r=!0})=>{const[i,o]=j.useState("branches"),[l,c]=j.useState(!1);j.useEffect(()=>{const M=()=>{c(document.documentElement.classList.contains("dark"))};M();const E=new MutationObserver(M);return E.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>E.disconnect()},[]);const[d,h]=j.useState(null),[m,u]=j.useState(!1),[g,f]=j.useState(null),p=j.useMemo(()=>JS.performFullAnalysis(t),[t]);j.useEffect(()=>{(async()=>{if(t){u(!0),f(null);try{const E=await ci.getSpiritualAnalysis(t);h({spiritual:E})}catch(E){console.error("신살 분석 데이터 로드 실패:",E),f("신살 분석 데이터를 불러올 수 없습니다.")}finally{u(!1)}}})()},[t]);const b=j.useMemo(()=>[{label:"12간지 분포",values:Object.values(p.data),timeFrame:"base"}],[p.data]),y=j.useMemo(()=>{const M=Object.keys(p.data).map(E=>{const A=Xe[E];return`${A.koreanName} ${A.animalEmoji}`});return At.createStandardRadarConfig(M,b,l,!0)},[b,l]),v=y.data,N=j.useMemo(()=>{const{seasonalBalance:M}=p;return[{label:"계절별 균형",values:[M.spring,M.summer,M.autumn,M.winter],timeFrame:"base"}]},[p.seasonalBalance]),S=j.useMemo(()=>{const M=["봄 🌸","여름 ☀️","가을 🍂","겨울 ❄️"];return At.createStandardRadarConfig(M,N,l,!0)},[N,l]),C=S.data,_=j.useMemo(()=>{var E,A,O,R,T,D,L,F,I,U,B,z,K;const M=i==="branches"?y.options:S.options;return{...M,responsive:!0,maintainAspectRatio:!1,plugins:{...M==null?void 0:M.plugins,legend:{...(E=M==null?void 0:M.plugins)==null?void 0:E.legend,display:!1},tooltip:{...(A=M==null?void 0:M.plugins)==null?void 0:A.tooltip,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{...(R=(O=M==null?void 0:M.plugins)==null?void 0:O.tooltip)==null?void 0:R.callbacks,label(W){const H=W.parsed.r,Y=p.total>0?(H/p.total*100).toFixed(1):"0.0";if(i==="branches"){const ee=Object.keys(p.data)[W.dataIndex],G=Xe[ee];return[`${W.label}: ${H}점 (${Y}%)`,`원소: ${G.element}`,`특성: ${G.characteristics.join(", ")}`]}else return`${W.label}: ${H.toFixed(1)}점`}}}},scales:{...M==null?void 0:M.scales,r:{...(T=M==null?void 0:M.scales)==null?void 0:T.r,beginAtZero:!0,min:0,max:i==="branches"?Math.max(...Object.values(p.data))*1.2:100,ticks:{...(L=(D=M==null?void 0:M.scales)==null?void 0:D.r)==null?void 0:L.ticks,stepSize:i==="branches"?10:20,display:!1,font:{family:"Noto Sans KR, sans-serif",size:10},color:l?"#9CA3AF":"#6B7280"},grid:{...(I=(F=M==null?void 0:M.scales)==null?void 0:F.r)==null?void 0:I.grid,color:l?"rgba(156, 163, 175, 0.2)":"rgba(156, 163, 175, 0.3)"},angleLines:{...(B=(U=M==null?void 0:M.scales)==null?void 0:U.r)==null?void 0:B.angleLines,color:l?"rgba(156, 163, 175, 0.2)":"rgba(156, 163, 175, 0.3)"},pointLabels:{...(K=(z=M==null?void 0:M.scales)==null?void 0:z.r)==null?void 0:K.pointLabels,font:{family:"Noto Sans KR, sans-serif",size:11,weight:500},color:l?"#E5E7EB":"#1F2937",padding:10}}},animation:{...M==null?void 0:M.animation,duration:1e3}}},[i,y,S,p.data,p.total,l]),k=(()=>{const M=p.overallHarmony;return M>=80?{status:"매우 조화",color:"text-green-600 dark:text-green-400",icon:"🟢"}:M>=60?{status:"조화 양호",color:"text-blue-600 dark:text-blue-400",icon:"🔵"}:M>=40?{status:"보통",color:"text-yellow-600 dark:text-yellow-400",icon:"🟡"}:{status:"부조화",color:"text-red-600 dark:text-red-400",icon:"🔴"}})();return p.total===0?a.jsx("div",{className:`flex items-center justify-center ${s}`,style:{height:e},children:a.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"text-4xl mb-2",children:"🐲"}),a.jsx("div",{className:"text-lg font-medium",children:"12간지 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})}):a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${s}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"🐲 12간지 상호작용"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"12지지의 분포와 상호 관계 분석"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[a.jsx("button",{onClick:()=>o("branches"),className:`px-3 py-1 text-xs transition-colors ${i==="branches"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"12간지"}),a.jsx("button",{onClick:()=>o("seasonal"),className:`px-3 py-1 text-xs transition-colors ${i==="seasonal"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"계절균형"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${k.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:k.icon}),k.status]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["조화도: ",p.overallHarmony.toFixed(0),"점"]})]})]})]}),a.jsx("div",{className:"mb-6",style:{height:e-250},children:a.jsx(rc,{data:i==="branches"?v:C,options:_})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-purple-800 dark:text-purple-200 mb-2",children:p.animalPersonality.primaryAnimal}),a.jsx("div",{className:"text-purple-700 dark:text-purple-300 text-sm",children:p.animalPersonality.traits.slice(0,3).join(", ")})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"💪 강한 간지"}),p.dominant.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300 text-sm",children:p.dominant.map(M=>{const E=Xe[M];return`${E.koreanName}(${E.animal})`}).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm",children:"균형적 분포"})]}),r&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🌈 계절 균형"}),a.jsxs("div",{className:"text-blue-700 dark:text-blue-300 text-sm",children:["균형도: ",p.seasonalBalance.balance.toFixed(0),"점"]})]})]}),n&&p.dominant.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"주요 관계 패턴"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(p.interactions).slice(0,3).map(([M,E])=>{const[A,O]=M.split("-"),R=qS[E.relationship.type];return a.jsxs("div",{className:"px-2 py-1 text-xs rounded-full flex items-center space-x-1",style:{backgroundColor:`${R.color}20`,color:R.color},children:[a.jsx("span",{children:R.icon}),a.jsxs("span",{children:[Xe[A].koreanName,"-",Xe[O].koreanName]})]},M)})})]}),a.jsx("div",{className:"mt-6",children:a.jsx(wi,{interpretation:d,loading:m,error:g,category:"spiritual"})})]})},Qg=j.createContext({});function QS(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const ac=typeof window<"u",ZS=ac?j.useLayoutEffect:j.useEffect,ic=j.createContext(null);function oc(t,e){t.indexOf(e)===-1&&t.push(e)}function lc(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Dt=(t,e,s)=>s>e?e:s<t?t:s;let cc=()=>{};const Pt={},Zg=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function ef(t){return typeof t=="object"&&t!==null}const tf=t=>/^0[^.\s]+$/u.test(t);function dc(t){let e;return()=>(e===void 0&&(e=t()),e)}const tt=t=>t,e4=(t,e)=>s=>e(t(s)),Ir=(...t)=>t.reduce(e4),br=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n};class hc{constructor(){this.subscriptions=[]}add(e){return oc(this.subscriptions,e),()=>lc(this.subscriptions,e)}notify(e,s,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,s,n);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xt=t=>t*1e3,pt=t=>t/1e3;function sf(t,e){return e?t*(1e3/e):0}const nf=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,t4=1e-7,s4=12;function n4(t,e,s,n,r){let i,o,l=0;do o=e+(s-e)/2,i=nf(o,n,r)-t,i>0?s=o:e=o;while(Math.abs(i)>t4&&++l<s4);return o}function Fr(t,e,s,n){if(t===e&&s===n)return tt;const r=i=>n4(i,0,1,t,s);return i=>i===0||i===1?i:nf(r(i),e,n)}const rf=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,af=t=>e=>1-t(1-e),of=Fr(.33,1.53,.69,.99),uc=af(of),lf=rf(uc),cf=t=>(t*=2)<1?.5*uc(t):.5*(2-Math.pow(2,-10*(t-1))),mc=t=>1-Math.sin(Math.acos(t)),df=af(mc),hf=rf(mc),r4=Fr(.42,0,1,1),a4=Fr(0,0,.58,1),uf=Fr(.42,0,.58,1),i4=t=>Array.isArray(t)&&typeof t[0]!="number",mf=t=>Array.isArray(t)&&typeof t[0]=="number",o4={linear:tt,easeIn:r4,easeInOut:uf,easeOut:a4,circIn:mc,circInOut:hf,circOut:df,backIn:uc,backInOut:lf,backOut:of,anticipate:cf},l4=t=>typeof t=="string",Zh=t=>{if(mf(t)){cc(t.length===4);const[e,s,n,r]=t;return Fr(e,s,n,r)}else if(l4(t))return o4[t];return t},ca=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function c4(t,e){let s=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,m=!1,u=!1)=>{const f=u&&r?s:n;return m&&o.add(h),f.has(h)||f.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(l=h,r){i=!0;return}r=!0,[s,n]=[n,s],s.forEach(c),s.clear(),r=!1,i&&(i=!1,d.process(h))}};return d}const d4=40;function gf(t,e){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=ca.reduce((N,S)=>(N[S]=c4(i),N),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:h,update:m,preRender:u,render:g,postRender:f}=o,p=()=>{const N=Pt.useManualTiming?r.timestamp:performance.now();s=!1,Pt.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(N-r.timestamp,d4),1)),r.timestamp=N,r.isProcessing=!0,l.process(r),c.process(r),d.process(r),h.process(r),m.process(r),u.process(r),g.process(r),f.process(r),r.isProcessing=!1,s&&e&&(n=!1,t(p))},b=()=>{s=!0,n=!0,r.isProcessing||t(p)};return{schedule:ca.reduce((N,S)=>{const C=o[S];return N[S]=(_,w=!1,k=!1)=>(s||b(),C.schedule(_,w,k)),N},{}),cancel:N=>{for(let S=0;S<ca.length;S++)o[ca[S]].cancel(N)},state:r,steps:o}}const{schedule:ue,cancel:qt,state:_e,steps:ro}=gf(typeof requestAnimationFrame<"u"?requestAnimationFrame:tt,!0);let _a;function h4(){_a=void 0}const Fe={now:()=>(_a===void 0&&Fe.set(_e.isProcessing||Pt.useManualTiming?_e.timestamp:performance.now()),_a),set:t=>{_a=t,queueMicrotask(h4)}},ff=t=>e=>typeof e=="string"&&e.startsWith(t),gc=ff("--"),u4=ff("var(--"),fc=t=>u4(t)?m4.test(t.split("/*")[0].trim()):!1,m4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yr={...bn,transform:t=>Dt(0,1,t)},da={...bn,default:1},Zn=t=>Math.round(t*1e5)/1e5,xc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function g4(t){return t==null}const f4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pc=(t,e)=>s=>!!(typeof s=="string"&&f4.test(s)&&s.startsWith(t)||e&&!g4(s)&&Object.prototype.hasOwnProperty.call(s,e)),xf=(t,e,s)=>n=>{if(typeof n!="string")return n;const[r,i,o,l]=n.match(xc);return{[t]:parseFloat(r),[e]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},x4=t=>Dt(0,255,t),ao={...bn,transform:t=>Math.round(x4(t))},fs={test:pc("rgb","red"),parse:xf("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+ao.transform(t)+", "+ao.transform(e)+", "+ao.transform(s)+", "+Zn(yr.transform(n))+")"};function p4(t){let e="",s="",n="",r="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),r=t.substring(4,5),e+=e,s+=s,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const el={test:pc("#"),parse:p4,transform:fs.transform},Br=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ot=Br("deg"),bt=Br("%"),X=Br("px"),b4=Br("vh"),y4=Br("vw"),eu={...bt,parse:t=>bt.parse(t)/100,transform:t=>bt.transform(t*100)},Vs={test:pc("hsl","hue"),parse:xf("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+bt.transform(Zn(e))+", "+bt.transform(Zn(s))+", "+Zn(yr.transform(n))+")"},ke={test:t=>fs.test(t)||el.test(t)||Vs.test(t),parse:t=>fs.test(t)?fs.parse(t):Vs.test(t)?Vs.parse(t):el.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?fs.transform(t):Vs.transform(t),getAnimatableNone:t=>{const e=ke.parse(t);return e.alpha=0,ke.transform(e)}},v4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function j4(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(xc))==null?void 0:e.length)||0)+(((s=t.match(v4))==null?void 0:s.length)||0)>0}const pf="number",bf="color",k4="var",w4="var(",tu="${}",N4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vr(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},r=[];let i=0;const l=e.replace(N4,c=>(ke.test(c)?(n.color.push(i),r.push(bf),s.push(ke.parse(c))):c.startsWith(w4)?(n.var.push(i),r.push(k4),s.push(c)):(n.number.push(i),r.push(pf),s.push(parseFloat(c))),++i,tu)).split(tu);return{values:s,split:l,indexes:n,types:r}}function yf(t){return vr(t).values}function vf(t){const{split:e,types:s}=vr(t),n=e.length;return r=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],r[o]!==void 0){const l=s[o];l===pf?i+=Zn(r[o]):l===bf?i+=ke.transform(r[o]):i+=r[o]}return i}}const S4=t=>typeof t=="number"?0:ke.test(t)?ke.getAnimatableNone(t):t;function C4(t){const e=yf(t);return vf(t)(e.map(S4))}const Jt={test:j4,parse:yf,createTransformer:vf,getAnimatableNone:C4};function io(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function _4({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let r=0,i=0,o=0;if(!e)r=i=o=s;else{const l=s<.5?s*(1+e):s+e-s*e,c=2*s-l;r=io(c,l,t+1/3),i=io(c,l,t),o=io(c,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Wa(t,e){return s=>s>0?e:t}const me=(t,e,s)=>t+(e-t)*s,oo=(t,e,s)=>{const n=t*t,r=s*(e*e-n)+n;return r<0?0:Math.sqrt(r)},M4=[el,fs,Vs],E4=t=>M4.find(e=>e.test(t));function su(t){const e=E4(t);if(!e)return!1;let s=e.parse(t);return e===Vs&&(s=_4(s)),s}const nu=(t,e)=>{const s=su(t),n=su(e);if(!s||!n)return Wa(t,e);const r={...s};return i=>(r.red=oo(s.red,n.red,i),r.green=oo(s.green,n.green,i),r.blue=oo(s.blue,n.blue,i),r.alpha=me(s.alpha,n.alpha,i),fs.transform(r))},tl=new Set(["none","hidden"]);function T4(t,e){return tl.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function A4(t,e){return s=>me(t,e,s)}function bc(t){return typeof t=="number"?A4:typeof t=="string"?fc(t)?Wa:ke.test(t)?nu:R4:Array.isArray(t)?jf:typeof t=="object"?ke.test(t)?nu:D4:Wa}function jf(t,e){const s=[...t],n=s.length,r=t.map((i,o)=>bc(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)s[o]=r[o](i);return s}}function D4(t,e){const s={...t,...e},n={};for(const r in s)t[r]!==void 0&&e[r]!==void 0&&(n[r]=bc(t[r])(t[r],e[r]));return r=>{for(const i in n)s[i]=n[i](r);return s}}function P4(t,e){const s=[],n={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],o=t.indexes[i][n[i]],l=t.values[o]??0;s[r]=l,n[i]++}return s}const R4=(t,e)=>{const s=Jt.createTransformer(e),n=vr(t),r=vr(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?tl.has(t)&&!r.values.length||tl.has(e)&&!n.values.length?T4(t,e):Ir(jf(P4(n,r),r.values),s):Wa(t,e)};function kf(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?me(t,e,s):bc(t)(t,e)}const L4=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>ue.update(e,s),stop:()=>qt(e),now:()=>_e.isProcessing?_e.timestamp:Fe.now()}},wf=(t,e,s=10)=>{let n="";const r=Math.max(Math.round(e/s),2);for(let i=0;i<r;i++)n+=Math.round(t(i/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Ya=2e4;function yc(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<Ya;)e+=s,n=t.next(e);return e>=Ya?1/0:e}function O4(t,e=100,s){const n=s({...t,keyframes:[0,e]}),r=Math.min(yc(n),Ya);return{type:"keyframes",ease:i=>n.next(r*i).value/e,duration:pt(r)}}const I4=5;function Nf(t,e,s){const n=Math.max(e-I4,0);return sf(s-t(n),e-n)}const fe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lo=.001;function F4({duration:t=fe.duration,bounce:e=fe.bounce,velocity:s=fe.velocity,mass:n=fe.mass}){let r,i,o=1-e;o=Dt(fe.minDamping,fe.maxDamping,o),t=Dt(fe.minDuration,fe.maxDuration,pt(t)),o<1?(r=d=>{const h=d*o,m=h*t,u=h-s,g=sl(d,o),f=Math.exp(-m);return lo-u/g*f},i=d=>{const m=d*o*t,u=m*s+s,g=Math.pow(o,2)*Math.pow(d,2)*t,f=Math.exp(-m),p=sl(Math.pow(d,2),o);return(-r(d)+lo>0?-1:1)*((u-g)*f)/p}):(r=d=>{const h=Math.exp(-d*t),m=(d-s)*t+1;return-lo+h*m},i=d=>{const h=Math.exp(-d*t),m=(s-d)*(t*t);return h*m});const l=5/t,c=$4(r,i,l);if(t=xt(t),isNaN(c))return{stiffness:fe.stiffness,damping:fe.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:t}}}const B4=12;function $4(t,e,s){let n=s;for(let r=1;r<B4;r++)n=n-t(n)/e(n);return n}function sl(t,e){return t*Math.sqrt(1-e*e)}const V4=["duration","bounce"],H4=["stiffness","damping","mass"];function ru(t,e){return e.some(s=>t[s]!==void 0)}function z4(t){let e={velocity:fe.velocity,stiffness:fe.stiffness,damping:fe.damping,mass:fe.mass,isResolvedFromDuration:!1,...t};if(!ru(t,H4)&&ru(t,V4))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),r=n*n,i=2*Dt(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:fe.mass,stiffness:r,damping:i}}else{const s=F4(t);e={...e,...s,mass:fe.mass},e.isResolvedFromDuration=!0}return e}function Ga(t=fe.visualDuration,e=fe.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:r}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:h,duration:m,velocity:u,isResolvedFromDuration:g}=z4({...s,velocity:-pt(s.velocity||0)}),f=u||0,p=d/(2*Math.sqrt(c*h)),b=o-i,y=pt(Math.sqrt(c/h)),v=Math.abs(b)<5;n||(n=v?fe.restSpeed.granular:fe.restSpeed.default),r||(r=v?fe.restDelta.granular:fe.restDelta.default);let N;if(p<1){const C=sl(y,p);N=_=>{const w=Math.exp(-p*y*_);return o-w*((f+p*y*b)/C*Math.sin(C*_)+b*Math.cos(C*_))}}else if(p===1)N=C=>o-Math.exp(-y*C)*(b+(f+y*b)*C);else{const C=y*Math.sqrt(p*p-1);N=_=>{const w=Math.exp(-p*y*_),k=Math.min(C*_,300);return o-w*((f+p*y*b)*Math.sinh(k)+C*b*Math.cosh(k))/C}}const S={calculatedDuration:g&&m||null,next:C=>{const _=N(C);if(g)l.done=C>=m;else{let w=C===0?f:0;p<1&&(w=C===0?xt(f):Nf(N,C,_));const k=Math.abs(w)<=n,M=Math.abs(o-_)<=r;l.done=k&&M}return l.value=l.done?o:_,l},toString:()=>{const C=Math.min(yc(S),Ya),_=wf(w=>S.next(C*w).value,C,30);return C+"ms "+_},toTransition:()=>{}};return S}Ga.applyToOptions=t=>{const e=O4(t,100,Ga);return t.ease=e.ease,t.duration=xt(e.duration),t.type="keyframes",t};function nl({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const m=t[0],u={done:!1,value:m},g=k=>l!==void 0&&k<l||c!==void 0&&k>c,f=k=>l===void 0?c:c===void 0||Math.abs(l-k)<Math.abs(c-k)?l:c;let p=s*e;const b=m+p,y=o===void 0?b:o(b);y!==b&&(p=y-m);const v=k=>-p*Math.exp(-k/n),N=k=>y+v(k),S=k=>{const M=v(k),E=N(k);u.done=Math.abs(M)<=d,u.value=u.done?y:E};let C,_;const w=k=>{g(u.value)&&(C=k,_=Ga({keyframes:[u.value,f(u.value)],velocity:Nf(N,k,u.value),damping:r,stiffness:i,restDelta:d,restSpeed:h}))};return w(0),{calculatedDuration:null,next:k=>{let M=!1;return!_&&C===void 0&&(M=!0,S(k),w(k)),C!==void 0&&k>=C?_.next(k-C):(!M&&S(k),u)}}}function U4(t,e,s){const n=[],r=s||Pt.mix||kf,i=t.length-1;for(let o=0;o<i;o++){let l=r(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||tt:e;l=Ir(c,l)}n.push(l)}return n}function W4(t,e,{clamp:s=!0,ease:n,mixer:r}={}){const i=t.length;if(cc(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=U4(e,n,r),c=l.length,d=h=>{if(o&&h<t[0])return e[0];let m=0;if(c>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const u=br(t[m],t[m+1],h);return l[m](u)};return s?h=>d(Dt(t[0],t[i-1],h)):d}function Y4(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const r=br(0,e,n);t.push(me(s,1,r))}}function G4(t){const e=[0];return Y4(e,t.length-1),e}function K4(t,e){return t.map(s=>s*e)}function q4(t,e){return t.map(()=>e||uf).splice(0,t.length-1)}function er({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const r=i4(n)?n.map(Zh):Zh(n),i={done:!1,value:e[0]},o=K4(s&&s.length===e.length?s:G4(e),t),l=W4(o,e,{ease:Array.isArray(r)?r:q4(e,r)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const J4=t=>t!==null;function vc(t,{repeat:e,repeatType:s="loop"},n,r=1){const i=t.filter(J4),l=r<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const X4={decay:nl,inertia:nl,tween:er,keyframes:er,spring:Ga};function Sf(t){typeof t.type=="string"&&(t.type=X4[t.type])}class jc{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const Q4=t=>t/100;class kc extends jc{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,r;const{motionValue:s}=this.options;s&&s.updatedAt!==Fe.now()&&this.tick(Fe.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(n=this.options).onStop)==null||r.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Sf(e);const{type:s=er,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=s||er;c!==er&&typeof l[0]!="number"&&(this.mixKeyframes=Ir(Q4,kf(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=yc(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=d}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:h,repeat:m,repeatType:u,repeatDelay:g,type:f,onUpdate:p,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const y=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>r;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let N=this.currentTime,S=n;if(m){const k=Math.min(this.currentTime,r)/l;let M=Math.floor(k),E=k%1;!E&&k>=1&&(E=1),E===1&&M--,M=Math.min(M,m+1),!!(M%2)&&(u==="reverse"?(E=1-E,g&&(E-=g/l)):u==="mirror"&&(S=o)),N=Dt(0,1,E)*l}const C=v?{done:!1,value:h[0]}:S.next(N);i&&(C.value=i(C.value));let{done:_}=C;!v&&c!==null&&(_=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const w=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return w&&f!==nl&&(C.value=vc(h,this.options,b,this.speed)),p&&p(C.value),w&&this.finish(),C}then(e,s){return this.finished.then(e,s)}get duration(){return pt(this.calculatedDuration)}get time(){return pt(this.currentTime)}set time(e){var s;e=xt(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fe.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=pt(this.currentTime))}play(){var r,i;if(this.isStopped)return;const{driver:e=L4,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(r=this.options).onPlay)==null||i.call(r);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fe.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function Z4(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const xs=t=>t*180/Math.PI,rl=t=>{const e=xs(Math.atan2(t[1],t[0]));return al(e)},e6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:rl,rotateZ:rl,skewX:t=>xs(Math.atan(t[1])),skewY:t=>xs(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},al=t=>(t=t%360,t<0&&(t+=360),t),au=rl,iu=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ou=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),t6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:iu,scaleY:ou,scale:t=>(iu(t)+ou(t))/2,rotateX:t=>al(xs(Math.atan2(t[6],t[5]))),rotateY:t=>al(xs(Math.atan2(-t[2],t[0]))),rotateZ:au,rotate:au,skewX:t=>xs(Math.atan(t[4])),skewY:t=>xs(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function il(t){return t.includes("scale")?1:0}function ol(t,e){if(!t||t==="none")return il(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(s)n=t6,r=s;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=e6,r=l}if(!r)return il(e);const i=n[e],o=r[1].split(",").map(n6);return typeof i=="function"?i(o):o[i]}const s6=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return ol(s,e)};function n6(t){return parseFloat(t.trim())}const yn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vn=new Set(yn),lu=t=>t===bn||t===X,r6=new Set(["x","y","z"]),a6=yn.filter(t=>!r6.has(t));function i6(t){const e=[];return a6.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const js={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ol(e,"x"),y:(t,{transform:e})=>ol(e,"y")};js.translateX=js.x;js.translateY=js.y;const ks=new Set;let ll=!1,cl=!1,dl=!1;function Cf(){if(cl){const t=Array.from(ks).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const r=i6(n);r.length&&(s.set(n,r),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=s.get(n);r&&r.forEach(([i,o])=>{var l;(l=n.getValue(i))==null||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}cl=!1,ll=!1,ks.forEach(t=>t.complete(dl)),ks.clear()}function _f(){ks.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(cl=!0)})}function o6(){dl=!0,_f(),Cf(),dl=!1}class wc{constructor(e,s,n,r,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ks.add(this),ll||(ll=!0,ue.read(_f),ue.resolveKeyframes(Cf))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:r}=this;if(e[0]===null){const i=r==null?void 0:r.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&s){const l=n.readValue(s,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&i===void 0&&r.set(e[0])}Z4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ks.delete(this)}cancel(){this.state==="scheduled"&&(ks.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const l6=t=>t.startsWith("--");function c6(t,e,s){l6(e)?t.style.setProperty(e,s):t.style[e]=s}const d6=dc(()=>window.ScrollTimeline!==void 0),h6={};function u6(t,e){const s=dc(t);return()=>h6[e]??s()}const Mf=u6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hn=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,cu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hn([0,.65,.55,1]),circOut:Hn([.55,0,1,.45]),backIn:Hn([.31,.01,.66,-.59]),backOut:Hn([.33,1.53,.69,.99])};function Ef(t,e){if(t)return typeof t=="function"?Mf()?wf(t,e):"ease-out":mf(t)?Hn(t):Array.isArray(t)?t.map(s=>Ef(s,e)||cu.easeOut):cu[t]}function m6(t,e,s,{delay:n=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const h={[e]:s};c&&(h.offset=c);const m=Ef(l,r);Array.isArray(m)&&(h.easing=m);const u={delay:n,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(u.pseudoElement=d),t.animate(h,u)}function Tf(t){return typeof t=="function"&&"applyToOptions"in t}function g6({type:t,...e}){return Tf(t)&&Mf()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class f6 extends jc{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:n,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,cc(typeof e.type!="string");const d=g6(e);this.animation=m6(s,n,r,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=vc(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):c6(s,n,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,n;const e=((n=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:n.call(s).duration)||0;return pt(Number(e))}get time(){return pt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=xt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&d6()?(this.animation.timeline=e,tt):s(this)}}const Af={anticipate:cf,backInOut:lf,circInOut:hf};function x6(t){return t in Af}function p6(t){typeof t.ease=="string"&&x6(t.ease)&&(t.ease=Af[t.ease])}const du=10;class b6 extends f6{constructor(e){p6(e),Sf(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:n,onComplete:r,element:i,...o}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const l=new kc({...o,autoplay:!1}),c=xt(this.finishedTime??this.time);s.setWithVelocity(l.sample(c-du).value,l.sample(c).value,du),l.stop()}}const hu=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Jt.test(t)||t==="0")&&!t.startsWith("url("));function y6(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function v6(t,e,s,n){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=hu(r,e),l=hu(i,e);return!o||!l?!1:y6(t)||(s==="spring"||Tf(s))&&n}function hl(t){t.duration=0,t.type}const j6=new Set(["opacity","clipPath","filter","transform"]),k6=dc(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function w6(t){var h;const{motionValue:e,name:s,repeatDelay:n,repeatType:r,damping:i,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return k6()&&s&&j6.has(s)&&(s!=="transform"||!d)&&!c&&!n&&r!=="mirror"&&i!==0&&o!=="inertia"}const N6=40;class S6 extends jc{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:h,...m}){var f;super(),this.stop=()=>{var p,b;this._animation&&(this._animation.stop(),(p=this.stopTimeline)==null||p.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Fe.now();const u={autoplay:e,delay:s,type:n,repeat:r,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:h,...m},g=(h==null?void 0:h.KeyframeResolver)||wc;this.keyframeResolver=new g(l,(p,b,y)=>this.onKeyframesResolved(p,b,u,!y),c,d,h),(f=this.keyframeResolver)==null||f.scheduleResolve()}onKeyframesResolved(e,s,n,r){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:h}=n;this.resolvedAt=Fe.now(),v6(e,i,o,l)||((Pt.instantAnimations||!c)&&(h==null||h(vc(e,n,s))),e[0]=e[e.length-1],hl(n),n.repeat=0);const u={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>N6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:e},g=!d&&w6(u)?new b6({...u,element:u.motionValue.owner.current}):new kc(u);g.finished.then(()=>this.notifyFinished()).catch(tt),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),o6()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const C6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _6(t){const e=C6.exec(t);if(!e)return[,];const[,s,n,r]=e;return[`--${s??n}`,r]}function Df(t,e,s=1){const[n,r]=_6(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return Zg(o)?parseFloat(o):o}return fc(r)?Df(r,e,s+1):r}function Nc(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Pf=new Set(["width","height","top","left","right","bottom",...yn]),M6={test:t=>t==="auto",parse:t=>t},Rf=t=>e=>e.test(t),Lf=[bn,X,bt,Ot,y4,b4,M6],uu=t=>Lf.find(Rf(t));function E6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||tf(t):!0}const T6=new Set(["brightness","contrast","saturate","opacity"]);function A6(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(xc)||[];if(!n)return t;const r=s.replace(n,"");let i=T6.has(e)?1:0;return n!==s&&(i*=100),e+"("+i+r+")"}const D6=/\b([a-z-]*)\(.*?\)/gu,ul={...Jt,getAnimatableNone:t=>{const e=t.match(D6);return e?e.map(A6).join(" "):t}},mu={...bn,transform:Math.round},P6={rotate:Ot,rotateX:Ot,rotateY:Ot,rotateZ:Ot,scale:da,scaleX:da,scaleY:da,scaleZ:da,skew:Ot,skewX:Ot,skewY:Ot,distance:X,translateX:X,translateY:X,translateZ:X,x:X,y:X,z:X,perspective:X,transformPerspective:X,opacity:yr,originX:eu,originY:eu,originZ:X},Sc={borderWidth:X,borderTopWidth:X,borderRightWidth:X,borderBottomWidth:X,borderLeftWidth:X,borderRadius:X,radius:X,borderTopLeftRadius:X,borderTopRightRadius:X,borderBottomRightRadius:X,borderBottomLeftRadius:X,width:X,maxWidth:X,height:X,maxHeight:X,top:X,right:X,bottom:X,left:X,padding:X,paddingTop:X,paddingRight:X,paddingBottom:X,paddingLeft:X,margin:X,marginTop:X,marginRight:X,marginBottom:X,marginLeft:X,backgroundPositionX:X,backgroundPositionY:X,...P6,zIndex:mu,fillOpacity:yr,strokeOpacity:yr,numOctaves:mu},R6={...Sc,color:ke,backgroundColor:ke,outlineColor:ke,fill:ke,stroke:ke,borderColor:ke,borderTopColor:ke,borderRightColor:ke,borderBottomColor:ke,borderLeftColor:ke,filter:ul,WebkitFilter:ul},Of=t=>R6[t];function If(t,e){let s=Of(t);return s!==ul&&(s=Jt),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const L6=new Set(["auto","none","0"]);function O6(t,e,s){let n=0,r;for(;n<t.length&&!r;){const i=t[n];typeof i=="string"&&!L6.has(i)&&vr(i).values.length&&(r=t[n]),n++}if(r&&s)for(const i of e)t[i]=If(s,r)}class I6 extends wc{constructor(e,s,n,r,i){super(e,s,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),fc(d))){const h=Df(d,s.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Pf.has(n)||e.length!==2)return;const[r,i]=e,o=uu(r),l=uu(i);if(o!==l)if(lu(o)&&lu(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else js[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let r=0;r<e.length;r++)(e[r]===null||E6(e[r]))&&n.push(r);n.length&&O6(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=js[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const r=s[s.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var l;const{element:e,name:s,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(s);r&&r.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=js[s](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function F6(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const r=(s==null?void 0:s[t])??n.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const Ff=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function B6(t){return ef(t)&&"offsetHeight"in t}const gu=30,$6=t=>!isNaN(parseFloat(t));class V6{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const r=Fe.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Fe.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new hc);const n=this.events[e].add(s);return e==="change"?()=>{n(),ue.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fe.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gu)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,gu);return sf(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cn(t,e){return new V6(t,e)}const{schedule:Cc}=gf(queueMicrotask,!1),rt={x:!1,y:!1};function Bf(){return rt.x||rt.y}function H6(t){return t==="x"||t==="y"?rt[t]?null:(rt[t]=!0,()=>{rt[t]=!1}):rt.x||rt.y?null:(rt.x=rt.y=!0,()=>{rt.x=rt.y=!1})}function $f(t,e){const s=F6(t),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[s,r,()=>n.abort()]}function fu(t){return!(t.pointerType==="touch"||Bf())}function z6(t,e,s={}){const[n,r,i]=$f(t,s),o=l=>{if(!fu(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const h=m=>{fu(m)&&(d(m),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,r)};return n.forEach(l=>{l.addEventListener("pointerenter",o,r)}),i}const Vf=(t,e)=>e?t===e?!0:Vf(t,e.parentElement):!1,_c=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,U6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function W6(t){return U6.has(t.tagName)||t.tabIndex!==-1}const Ma=new WeakSet;function xu(t){return e=>{e.key==="Enter"&&t(e)}}function co(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Y6=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=xu(()=>{if(Ma.has(s))return;co(s,"down");const r=xu(()=>{co(s,"up")}),i=()=>co(s,"cancel");s.addEventListener("keyup",r,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function pu(t){return _c(t)&&!Bf()}function G6(t,e,s={}){const[n,r,i]=$f(t,s),o=l=>{const c=l.currentTarget;if(!pu(l))return;Ma.add(c);const d=e(c,l),h=(g,f)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",u),Ma.has(c)&&Ma.delete(c),pu(g)&&typeof d=="function"&&d(g,{success:f})},m=g=>{h(g,c===window||c===document||s.useGlobalTarget||Vf(c,g.target))},u=g=>{h(g,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",u,r)};return n.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),B6(l)&&(l.addEventListener("focus",d=>Y6(d,r)),!W6(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Hf(t){return ef(t)&&"ownerSVGElement"in t}function K6(t){return Hf(t)&&t.tagName==="svg"}const De=t=>!!(t&&t.getVelocity),q6=[...Lf,ke,Jt],J6=t=>q6.find(Rf(t)),zf=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function X6(t=!0){const e=j.useContext(ic);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:r}=e,i=j.useId();j.useEffect(()=>{if(t)return r(i)},[t]);const o=j.useCallback(()=>t&&n&&n(i),[i,n,t]);return!s&&n?[!1,o]:[!0]}const Uf=j.createContext({strict:!1}),bu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dn={};for(const t in bu)dn[t]={isEnabled:e=>bu[t].some(s=>!!e[s])};function Q6(t){for(const e in t)dn[e]={...dn[e],...t[e]}}const Z6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ka(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Z6.has(t)}let Wf=t=>!Ka(t);function e3(t){typeof t=="function"&&(Wf=e=>e.startsWith("on")?!Ka(e):t(e))}try{e3(require("@emotion/is-prop-valid").default)}catch{}function t3(t,e,s){const n={};for(const r in t)r==="values"&&typeof t.values=="object"||(Wf(r)||s===!0&&Ka(r)||!e&&!Ka(r)||t.draggable&&r.startsWith("onDrag"))&&(n[r]=t[r]);return n}const Ni=j.createContext({});function Si(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function jr(t){return typeof t=="string"||Array.isArray(t)}const Mc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ec=["initial",...Mc];function Ci(t){return Si(t.animate)||Ec.some(e=>jr(t[e]))}function Yf(t){return!!(Ci(t)||t.variants)}function s3(t,e){if(Ci(t)){const{initial:s,animate:n}=t;return{initial:s===!1||jr(s)?s:void 0,animate:jr(n)?n:void 0}}return t.inherit!==!1?e:{}}function n3(t){const{initial:e,animate:s}=s3(t,j.useContext(Ni));return j.useMemo(()=>({initial:e,animate:s}),[yu(e),yu(s)])}function yu(t){return Array.isArray(t)?t.join(" "):t}const kr={};function r3(t){for(const e in t)kr[e]=t[e],gc(e)&&(kr[e].isCSSVariable=!0)}function Gf(t,{layout:e,layoutId:s}){return vn.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!kr[t]||t==="opacity")}const a3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},i3=yn.length;function o3(t,e,s){let n="",r=!0;for(let i=0;i<i3;i++){const o=yn[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const d=Ff(l,Sc[o]);if(!c){r=!1;const h=a3[o]||o;n+=`${h}(${d}) `}s&&(e[o]=d)}}return n=n.trim(),s?n=s(e,r?"":n):r&&(n="none"),n}function Tc(t,e,s){const{style:n,vars:r,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(vn.has(c)){o=!0;continue}else if(gc(c)){r[c]=d;continue}else{const h=Ff(d,Sc[c]);c.startsWith("origin")?(l=!0,i[c]=h):n[c]=h}}if(e.transform||(o||s?n.transform=o3(e,t.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=i;n.transformOrigin=`${c} ${d} ${h}`}}const Ac=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Kf(t,e,s){for(const n in e)!De(e[n])&&!Gf(n,s)&&(t[n]=e[n])}function l3({transformTemplate:t},e){return j.useMemo(()=>{const s=Ac();return Tc(s,e,t),Object.assign({},s.vars,s.style)},[e])}function c3(t,e){const s=t.style||{},n={};return Kf(n,s,t),Object.assign(n,l3(t,e)),n}function d3(t,e){const s={},n=c3(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}const h3={offset:"stroke-dashoffset",array:"stroke-dasharray"},u3={offset:"strokeDashoffset",array:"strokeDasharray"};function m3(t,e,s=1,n=0,r=!0){t.pathLength=1;const i=r?h3:u3;t[i.offset]=X.transform(-n);const o=X.transform(e),l=X.transform(s);t[i.array]=`${o} ${l}`}function qf(t,{attrX:e,attrY:s,attrScale:n,pathLength:r,pathSpacing:i=1,pathOffset:o=0,...l},c,d,h){if(Tc(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:u}=t;m.transform&&(u.transform=m.transform,delete m.transform),(u.transform||m.transformOrigin)&&(u.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),u.transform&&(u.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),s!==void 0&&(m.y=s),n!==void 0&&(m.scale=n),r!==void 0&&m3(m,r,i,o,!1)}const Jf=()=>({...Ac(),attrs:{}}),Xf=t=>typeof t=="string"&&t.toLowerCase()==="svg";function g3(t,e,s,n){const r=j.useMemo(()=>{const i=Jf();return qf(i,e,Xf(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Kf(i,t.style,t),r.style={...i,...r.style}}return r}const f3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dc(t){return typeof t!="string"||t.includes("-")?!1:!!(f3.indexOf(t)>-1||/[A-Z]/u.test(t))}function x3(t,e,s,{latestValues:n},r,i=!1){const l=(Dc(t)?g3:d3)(e,n,r,t),c=t3(e,typeof t=="string",i),d=t!==j.Fragment?{...c,...l,ref:s}:{},{children:h}=e,m=j.useMemo(()=>De(h)?h.get():h,[h]);return j.createElement(t,{...d,children:m})}function vu(t){const e=[{},{}];return t==null||t.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function Pc(t,e,s,n){if(typeof e=="function"){const[r,i]=vu(n);e=e(s!==void 0?s:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=vu(n);e=e(s!==void 0?s:t.custom,r,i)}return e}function Ea(t){return De(t)?t.get():t}function p3({scrapeMotionValuesFromProps:t,createRenderState:e},s,n,r){return{latestValues:b3(s,n,r,t),renderState:e()}}function b3(t,e,s,n){const r={},i=n(t,{});for(const u in i)r[u]=Ea(i[u]);let{initial:o,animate:l}=t;const c=Ci(t),d=Yf(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=s?s.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!Si(m)){const u=Array.isArray(m)?m:[m];for(let g=0;g<u.length;g++){const f=Pc(t,u[g]);if(f){const{transitionEnd:p,transition:b,...y}=f;for(const v in y){let N=y[v];if(Array.isArray(N)){const S=h?N.length-1:0;N=N[S]}N!==null&&(r[v]=N)}for(const v in p)r[v]=p[v]}}}return r}const Qf=t=>(e,s)=>{const n=j.useContext(Ni),r=j.useContext(ic),i=()=>p3(t,e,n,r);return s?i():QS(i)};function Rc(t,e,s){var i;const{style:n}=t,r={};for(const o in n)(De(n[o])||e.style&&De(e.style[o])||Gf(o,t)||((i=s==null?void 0:s.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(r[o]=n[o]);return r}const y3=Qf({scrapeMotionValuesFromProps:Rc,createRenderState:Ac});function Zf(t,e,s){const n=Rc(t,e,s);for(const r in t)if(De(t[r])||De(e[r])){const i=yn.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}const v3=Qf({scrapeMotionValuesFromProps:Zf,createRenderState:Jf}),j3=Symbol.for("motionComponentSymbol");function Hs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function k3(t,e,s){return j.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):Hs(s)&&(s.current=n))},[e])}const Lc=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),w3="framerAppearId",ex="data-"+Lc(w3),tx=j.createContext({});function N3(t,e,s,n,r){var p,b;const{visualElement:i}=j.useContext(Ni),o=j.useContext(Uf),l=j.useContext(ic),c=j.useContext(zf).reducedMotion,d=j.useRef(null);n=n||o.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:i,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,m=j.useContext(tx);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&S3(d.current,s,r,m);const u=j.useRef(!1);j.useInsertionEffect(()=>{h&&u.current&&h.update(s,l)});const g=s[ex],f=j.useRef(!!g&&!((p=window.MotionHandoffIsComplete)!=null&&p.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return ZS(()=>{h&&(u.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),f.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,g)}),f.current=!1),h.enteringChildren=void 0)}),h}function S3(t,e,s,n){const{layoutId:r,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:sx(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||l&&Hs(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:h,layoutScroll:c,layoutRoot:d})}function sx(t){if(t)return t.options.allowProjection!==!1?t.projection:sx(t.parent)}function ho(t,{forwardMotionProps:e=!1}={},s,n){s&&Q6(s);const r=Dc(t)?v3:y3;function i(l,c){let d;const h={...j.useContext(zf),...l,layoutId:C3(l)},{isStatic:m}=h,u=n3(l),g=r(l,m);if(!m&&ac){_3();const f=M3(h);d=f.MeasureLayout,u.visualElement=N3(t,g,h,n,f.ProjectionNode)}return a.jsxs(Ni.Provider,{value:u,children:[d&&u.visualElement?a.jsx(d,{visualElement:u.visualElement,...h}):null,x3(t,l,k3(g,u.visualElement,c),g,m,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=j.forwardRef(i);return o[j3]=t,o}function C3({layoutId:t}){const e=j.useContext(Qg).id;return e&&t!==void 0?e+"-"+t:t}function _3(t,e){j.useContext(Uf).strict}function M3(t){const{drag:e,layout:s}=dn;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function E3(t,e){if(typeof Proxy>"u")return ho;const s=new Map,n=(i,o)=>ho(i,o,t,e),r=(i,o)=>n(i,o);return new Proxy(r,{get:(i,o)=>o==="create"?n:(s.has(o)||s.set(o,ho(o,void 0,t,e)),s.get(o))})}function nx({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function T3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function A3(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function uo(t){return t===void 0||t===1}function ml({scale:t,scaleX:e,scaleY:s}){return!uo(t)||!uo(e)||!uo(s)}function hs(t){return ml(t)||rx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rx(t){return ju(t.x)||ju(t.y)}function ju(t){return t&&t!=="0%"}function qa(t,e,s){const n=t-s,r=e*n;return s+r}function ku(t,e,s,n,r){return r!==void 0&&(t=qa(t,r,n)),qa(t,s,n)+e}function gl(t,e=0,s=1,n,r){t.min=ku(t.min,e,s,n,r),t.max=ku(t.max,e,s,n,r)}function ax(t,{x:e,y:s}){gl(t.x,e.translate,e.scale,e.originPoint),gl(t.y,s.translate,s.scale,s.originPoint)}const wu=.999999999999,Nu=1.0000000000001;function D3(t,e,s,n=!1){const r=s.length;if(!r)return;e.x=e.y=1;let i,o;for(let l=0;l<r;l++){i=s[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Us(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ax(t,o)),n&&hs(i.latestValues)&&Us(t,i.latestValues))}e.x<Nu&&e.x>wu&&(e.x=1),e.y<Nu&&e.y>wu&&(e.y=1)}function zs(t,e){t.min=t.min+e,t.max=t.max+e}function Su(t,e,s,n,r=.5){const i=me(t.min,t.max,r);gl(t,e,s,i,n)}function Us(t,e){Su(t.x,e.x,e.scaleX,e.scale,e.originX),Su(t.y,e.y,e.scaleY,e.scale,e.originY)}function ix(t,e){return nx(A3(t.getBoundingClientRect(),e))}function P3(t,e,s){const n=ix(t,s),{scroll:r}=e;return r&&(zs(n.x,r.offset.x),zs(n.y,r.offset.y)),n}const Cu=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ws=()=>({x:Cu(),y:Cu()}),_u=()=>({min:0,max:0}),be=()=>({x:_u(),y:_u()}),fl={current:null},ox={current:!1};function R3(){if(ox.current=!0,!!ac)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>fl.current=t.matches;t.addEventListener("change",e),e()}else fl.current=!1}const L3=new WeakMap;function O3(t,e,s){for(const n in e){const r=e[n],i=s[n];if(De(r))t.addValue(n,r);else if(De(i))t.addValue(n,cn(r,{owner:t}));else if(i!==r)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(n);t.addValue(n,cn(o!==void 0?o:r,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const Mu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class I3{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wc,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const u=Fe.now();this.renderScheduledAt<u&&(this.renderScheduledAt=u,ue.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Ci(s),this.isVariantNode=Yf(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(s,{},this);for(const u in m){const g=m[u];c[u]!==void 0&&De(g)&&g.set(c[u])}}mount(e){var s;this.current=e,L3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ox.current||R3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fl.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),qt(this.notifyUpdate),qt(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const n=this.features[s];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=vn.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=s.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ue.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in dn){const s=dn[e];if(!s)continue;const{isEnabled:n,Feature:r}=s;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):be()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Mu.length;n++){const r=Mu[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=O3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=cn(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Zg(n)||tf(n))?n=parseFloat(n):!J6(n)&&Jt.test(s)&&(n=If(e,s)),this.setBaseTarget(e,De(n)?n.get():n)),De(n)?n.get():n}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const o=Pc(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[e])}if(s&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!De(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new hc),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){Cc.render(this.render)}}class lx extends I3{constructor(){super(...arguments),this.KeyframeResolver=I6}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;De(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function cx(t,{style:e,vars:s},n,r){const i=t.style;let o;for(o in e)i[o]=e[o];r==null||r.applyProjectionStyles(i,n);for(o in s)i.setProperty(o,s[o])}function F3(t){return window.getComputedStyle(t)}class B3 extends lx{constructor(){super(...arguments),this.type="html",this.renderInstance=cx}readValueFromInstance(e,s){var n;if(vn.has(s))return(n=this.projection)!=null&&n.isProjecting?il(s):s6(e,s);{const r=F3(e),i=(gc(s)?r.getPropertyValue(s):r[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return ix(e,s)}build(e,s,n){Tc(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return Rc(e,s,n)}}const dx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $3(t,e,s,n){cx(t,e,void 0,n);for(const r in e.attrs)t.setAttribute(dx.has(r)?r:Lc(r),e.attrs[r])}class V3 extends lx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=be}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(vn.has(s)){const n=Of(s);return n&&n.default||0}return s=dx.has(s)?s:Lc(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return Zf(e,s,n)}build(e,s,n){qf(e,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,s,n,r){$3(e,s,n,r)}mount(e){this.isSVGTag=Xf(e.tagName),super.mount(e)}}const H3=(t,e)=>Dc(t)?new V3(e):new B3(e,{allowProjection:t!==j.Fragment});function Ks(t,e,s){const n=t.getProps();return Pc(n,e,s!==void 0?s:n.custom,t)}const xl=t=>Array.isArray(t);function z3(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,cn(s))}function U3(t){return xl(t)?t[t.length-1]||0:t}function W3(t,e){const s=Ks(t,e);let{transitionEnd:n={},transition:r={},...i}=s||{};i={...i,...n};for(const o in i){const l=U3(i[o]);z3(t,o,l)}}function Y3(t){return!!(De(t)&&t.add)}function pl(t,e){const s=t.getValue("willChange");if(Y3(s))return s.add(e);if(!s&&Pt.WillChange){const n=new Pt.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function hx(t){return t.props[ex]}const G3=t=>t!==null;function K3(t,{repeat:e,repeatType:s="loop"},n){const r=t.filter(G3),i=e&&s!=="loop"&&e%2===1?0:r.length-1;return r[i]}const q3={type:"spring",stiffness:500,damping:25,restSpeed:10},J3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),X3={type:"keyframes",duration:.8},Q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Z3=(t,{keyframes:e})=>e.length>2?X3:vn.has(t)?t.startsWith("scale")?J3(e[1]):q3:Q3;function eC({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const Oc=(t,e,s,n={},r,i)=>o=>{const l=Nc(n,t)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-xt(c);const h={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:u=>{e.set(u),l.onUpdate&&l.onUpdate(u)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:r};eC(l)||Object.assign(h,Z3(t,h)),h.duration&&(h.duration=xt(h.duration)),h.repeatDelay&&(h.repeatDelay=xt(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(hl(h),h.delay===0&&(m=!0)),(Pt.instantAnimations||Pt.skipAnimations)&&(m=!0,hl(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,m&&!i&&e.get()!==void 0){const u=K3(h.keyframes,l);if(u!==void 0){ue.update(()=>{h.onUpdate(u),h.onComplete()});return}}return l.isSync?new kc(h):new S6(h)};function tC({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function ux(t,e,{delay:s=0,transitionOverride:n,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(i=n);const c=[],d=r&&t.animationState&&t.animationState.getState()[r];for(const h in l){const m=t.getValue(h,t.latestValues[h]??null),u=l[h];if(u===void 0||d&&tC(d,h))continue;const g={delay:s,...Nc(i||{},h)},f=m.get();if(f!==void 0&&!m.isAnimating&&!Array.isArray(u)&&u===f&&!g.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const y=hx(t);if(y){const v=window.MotionHandoffAnimation(y,h,ue);v!==null&&(g.startTime=v,p=!0)}}pl(t,h),m.start(Oc(h,m,u,t.shouldReduceMotion&&Pf.has(h)?{type:!1}:g,t,p));const b=m.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{ue.update(()=>{o&&W3(t,o)})}),c}function mx(t,e,s,n=0,r=1){const i=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*n;return typeof s=="function"?s(i,o):r===1?i*n:l-i*n}function bl(t,e,s={}){var c;const n=Ks(t,e,s.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(r=s.transitionOverride);const i=n?()=>Promise.all(ux(t,n,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:u}=r;return sC(t,e,d,h,m,u,s)}:()=>Promise.resolve(),{when:l}=r;if(l){const[d,h]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>h())}else return Promise.all([i(),o(s.delay)])}function sC(t,e,s=0,n=0,r=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(bl(c,e,{...o,delay:s+(typeof n=="function"?0:n)+mx(t.variantChildren,c,n,r,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function nC(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(i=>bl(t,i,s));n=Promise.all(r)}else if(typeof e=="string")n=bl(t,e,s);else{const r=typeof e=="function"?Ks(t,e,s.custom):e;n=Promise.all(ux(t,r,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}function gx(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}const rC=Ec.length;function fx(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?fx(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<rC;s++){const n=Ec[s],r=t.props[n];(jr(r)||r===!1)&&(e[n]=r)}return e}const aC=[...Mc].reverse(),iC=Mc.length;function oC(t){return e=>Promise.all(e.map(({animation:s,options:n})=>nC(t,s,n)))}function lC(t){let e=oC(t),s=Eu(),n=!0;const r=c=>(d,h)=>{var u;const m=Ks(t,h,c==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);if(m){const{transition:g,transitionEnd:f,...p}=m;d={...d,...p,...f}}return d};function i(c){e=c(t)}function o(c){const{props:d}=t,h=fx(t.parent)||{},m=[],u=new Set;let g={},f=1/0;for(let b=0;b<iC;b++){const y=aC[b],v=s[y],N=d[y]!==void 0?d[y]:h[y],S=jr(N),C=y===c?v.isActive:null;C===!1&&(f=b);let _=N===h[y]&&N!==d[y]&&S;if(_&&n&&t.manuallyAnimateOnMount&&(_=!1),v.protectedKeys={...g},!v.isActive&&C===null||!N&&!v.prevProp||Si(N)||typeof N=="boolean")continue;const w=cC(v.prevProp,N);let k=w||y===c&&v.isActive&&!_&&S||b>f&&S,M=!1;const E=Array.isArray(N)?N:[N];let A=E.reduce(r(y),{});C===!1&&(A={});const{prevResolvedValues:O={}}=v,R={...O,...A},T=F=>{k=!0,u.has(F)&&(M=!0,u.delete(F)),v.needsAnimating[F]=!0;const I=t.getValue(F);I&&(I.liveStyle=!1)};for(const F in R){const I=A[F],U=O[F];if(g.hasOwnProperty(F))continue;let B=!1;xl(I)&&xl(U)?B=!gx(I,U):B=I!==U,B?I!=null?T(F):u.add(F):I!==void 0&&u.has(F)?T(F):v.protectedKeys[F]=!0}v.prevProp=N,v.prevResolvedValues=A,v.isActive&&(g={...g,...A}),n&&t.blockInitialAnimation&&(k=!1);const D=_&&w;k&&(!D||M)&&m.push(...E.map(F=>{const I={type:y};if(typeof F=="string"&&n&&!D&&t.manuallyAnimateOnMount&&t.parent){const{parent:U}=t,B=Ks(U,F);if(U.enteringChildren&&B){const{delayChildren:z}=B.transition||{};I.delay=mx(U.enteringChildren,t,z)}}return{animation:F,options:I}}))}if(u.size){const b={};if(typeof d.initial!="boolean"){const y=Ks(t,Array.isArray(d.initial)?d.initial[0]:d.initial);y&&y.transition&&(b.transition=y.transition)}u.forEach(y=>{const v=t.getBaseTarget(y),N=t.getValue(y);N&&(N.liveStyle=!0),b[y]=v??null}),m.push({animation:b})}let p=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(p=!1),n=!1,p?e(m):Promise.resolve()}function l(c,d){var m;if(s[c].isActive===d)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(u=>{var g;return(g=u.animationState)==null?void 0:g.setActive(c,d)}),s[c].isActive=d;const h=o(c);for(const u in s)s[u].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s,reset:()=>{s=Eu(),n=!0}}}function cC(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!gx(e,t):!1}function ls(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Eu(){return{animate:ls(!0),whileInView:ls(),whileHover:ls(),whileTap:ls(),whileDrag:ls(),whileFocus:ls(),exit:ls()}}class es{constructor(e){this.isMounted=!1,this.node=e}update(){}}class dC extends es{constructor(e){super(e),e.animationState||(e.animationState=lC(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Si(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let hC=0;class uC extends es{constructor(){super(...arguments),this.id=hC++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);s&&!e&&r.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const mC={animation:{Feature:dC},exit:{Feature:uC}};function wr(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function $r(t){return{point:{x:t.pageX,y:t.pageY}}}const gC=t=>e=>_c(e)&&t(e,$r(e));function tr(t,e,s,n){return wr(t,e,gC(s),n)}const xx=1e-4,fC=1-xx,xC=1+xx,px=.01,pC=0-px,bC=0+px;function Re(t){return t.max-t.min}function yC(t,e,s){return Math.abs(t-e)<=s}function Tu(t,e,s,n=.5){t.origin=n,t.originPoint=me(e.min,e.max,t.origin),t.scale=Re(s)/Re(e),t.translate=me(s.min,s.max,t.origin)-t.originPoint,(t.scale>=fC&&t.scale<=xC||isNaN(t.scale))&&(t.scale=1),(t.translate>=pC&&t.translate<=bC||isNaN(t.translate))&&(t.translate=0)}function sr(t,e,s,n){Tu(t.x,e.x,s.x,n?n.originX:void 0),Tu(t.y,e.y,s.y,n?n.originY:void 0)}function Au(t,e,s){t.min=s.min+e.min,t.max=t.min+Re(e)}function vC(t,e,s){Au(t.x,e.x,s.x),Au(t.y,e.y,s.y)}function Du(t,e,s){t.min=e.min-s.min,t.max=t.min+Re(e)}function nr(t,e,s){Du(t.x,e.x,s.x),Du(t.y,e.y,s.y)}function Je(t){return[t("x"),t("y")]}const bx=({current:t})=>t?t.ownerDocument.defaultView:null,Pu=(t,e)=>Math.abs(t-e);function jC(t,e){const s=Pu(t.x,e.x),n=Pu(t.y,e.y);return Math.sqrt(s**2+n**2)}class yx{constructor(e,s,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=go(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,f=jC(u.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!f)return;const{point:p}=u,{timestamp:b}=_e;this.history.push({...p,timestamp:b});const{onStart:y,onMove:v}=this.handlers;g||(y&&y(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,g)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=mo(g,this.transformPagePoint),ue.update(this.updatePoint,!0)},this.handlePointerUp=(u,g)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=go(u.type==="pointercancel"?this.lastMoveEventInfo:mo(g,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,y),p&&p(u,y)},!_c(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=r||window;const l=$r(e),c=mo(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=_e;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=s;m&&m(e,go(c,this.history)),this.removeListeners=Ir(tr(this.contextWindow,"pointermove",this.handlePointerMove),tr(this.contextWindow,"pointerup",this.handlePointerUp),tr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qt(this.updatePoint)}}function mo(t,e){return e?{point:e(t.point)}:t}function Ru(t,e){return{x:t.x-e.x,y:t.y-e.y}}function go({point:t},e){return{point:t,delta:Ru(t,vx(e)),offset:Ru(t,kC(e)),velocity:wC(e,.1)}}function kC(t){return t[0]}function vx(t){return t[t.length-1]}function wC(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const r=vx(t);for(;s>=0&&(n=t[s],!(r.timestamp-n.timestamp>xt(e)));)s--;if(!n)return{x:0,y:0};const i=pt(r.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-n.x)/i,y:(r.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function NC(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?me(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?me(s,t,n.max):Math.min(t,s)),t}function Lu(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function SC(t,{top:e,left:s,bottom:n,right:r}){return{x:Lu(t.x,s,r),y:Lu(t.y,e,n)}}function Ou(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function CC(t,e){return{x:Ou(t.x,e.x),y:Ou(t.y,e.y)}}function _C(t,e){let s=.5;const n=Re(t),r=Re(e);return r>n?s=br(e.min,e.max-n,t.min):n>r&&(s=br(t.min,t.max-r,e.min)),Dt(0,1,s)}function MC(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const yl=.35;function EC(t=yl){return t===!1?t=0:t===!0&&(t=yl),{x:Iu(t,"left","right"),y:Iu(t,"top","bottom")}}function Iu(t,e,s){return{min:Fu(t,e),max:Fu(t,s)}}function Fu(t,e){return typeof t=="number"?t:t[e]||0}const TC=new WeakMap;class AC{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=be(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor($r(m).point)},o=(m,u)=>{const{drag:g,dragPropagation:f,onDragStart:p}=this.getProps();if(g&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=H6(g),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=u,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Je(y=>{let v=this.getAxisMotionValue(y).get()||0;if(bt.test(v)){const{projection:N}=this.visualElement;if(N&&N.layout){const S=N.layout.layoutBox[y];S&&(v=Re(S)*(parseFloat(v)/100))}}this.originPoint[y]=v}),p&&ue.postRender(()=>p(m,u)),pl(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(m,u)=>{this.latestPointerEvent=m,this.latestPanInfo=u;const{dragPropagation:g,dragDirectionLock:f,onDirectionLock:p,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:y}=u;if(f&&this.currentDirection===null){this.currentDirection=DC(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,y),this.updateAxis("y",u.point,y),this.visualElement.render(),b&&b(m,u)},c=(m,u)=>{this.latestPointerEvent=m,this.latestPanInfo=u,this.stop(m,u),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Je(m=>{var u;return this.getAnimationState(m)==="paused"&&((u=this.getAxisMotionValue(m).animation)==null?void 0:u.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new yx(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:n,contextWindow:bx(this.visualElement)})}stop(e,s){const n=e||this.latestPointerEvent,r=s||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ue.postRender(()=>l(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:r}=this.getProps();if(!n||!ha(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=NC(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,r=this.constraints;e&&Hs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=SC(n.layoutBox,e):this.constraints=!1,this.elastic=EC(s),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Je(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=MC(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Hs(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=P3(n,r.root,this.visualElement.getTransformPagePoint());let o=CC(r.layout.layoutBox,i);if(s){const l=s(T3(o));this.hasMutatedConstraints=!!l,l&&(o=nx(l))}return o}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Je(h=>{if(!ha(h,s,this.currentDirection))return;let m=c&&c[h]||{};o&&(m={min:0,max:0});const u=r?200:1e6,g=r?40:1e7,f={type:"inertia",velocity:n?e[h]:0,bounceStiffness:u,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(h,f)});return Promise.all(d).then(l)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return pl(this.visualElement,e),n.start(Oc(e,n,0,s,this.visualElement,!1))}stopAnimation(){Je(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Je(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[s];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Je(s=>{const{drag:n}=this.getProps();if(!ha(s,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(s);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[s];i.set(e[s]-me(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Hs(s)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Je(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();r[o]=_C({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Je(o=>{if(!ha(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(me(c,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;TC.set(this.visualElement,this);const e=this.visualElement.current,s=tr(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Hs(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ue.read(n);const o=wr(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Je(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=yl,dragMomentum:l=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function ha(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function DC(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class PC extends es{constructor(e){super(e),this.removeGroupControls=tt,this.removeListeners=tt,this.controls=new AC(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Bu=t=>(e,s)=>{t&&ue.postRender(()=>t(e,s))};class RC extends es{constructor(){super(...arguments),this.removePointerDownListener=tt}onPointerDown(e){this.session=new yx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Bu(e),onStart:Bu(s),onMove:n,onEnd:(i,o)=>{delete this.session,r&&ue.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=tr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ta={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $u(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const On={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(X.test(t))t=parseFloat(t);else return t;const s=$u(t,e.target.x),n=$u(t,e.target.y);return`${s}% ${n}%`}},LC={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,r=Jt.parse(t);if(r.length>5)return n;const i=Jt.createTransformer(t),o=typeof r[0]!="number"?1:0,l=s.x.scale*e.x,c=s.y.scale*e.y;r[0+o]/=l,r[1+o]/=c;const d=me(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),i(r)}};let fo=!1;class OC extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;r3(IC),i&&(s.group&&s.group.add(i),n&&n.register&&r&&n.register(i),fo&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ta.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:r,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,fo=!0,r||e.layoutDependency!==s||s===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ue.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Cc.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:r}=e;fo=!0,r&&(r.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jx(t){const[e,s]=X6(),n=j.useContext(Qg);return a.jsx(OC,{...t,layoutGroup:n,switchLayoutGroup:j.useContext(tx),isPresent:e,safeToRemove:s})}const IC={borderRadius:{...On,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:On,borderTopRightRadius:On,borderBottomLeftRadius:On,borderBottomRightRadius:On,boxShadow:LC};function FC(t,e,s){const n=De(t)?t:cn(t);return n.start(Oc("",n,e,s)),n.animation}const BC=(t,e)=>t.depth-e.depth;class $C{constructor(){this.children=[],this.isDirty=!1}add(e){oc(this.children,e),this.isDirty=!0}remove(e){lc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BC),this.isDirty=!1,this.children.forEach(e)}}function VC(t,e){const s=Fe.now(),n=({timestamp:r})=>{const i=r-s;i>=e&&(qt(n),t(i-e))};return ue.setup(n,!0),()=>qt(n)}const kx=["TopLeft","TopRight","BottomLeft","BottomRight"],HC=kx.length,Vu=t=>typeof t=="string"?parseFloat(t):t,Hu=t=>typeof t=="number"||X.test(t);function zC(t,e,s,n,r,i){r?(t.opacity=me(0,s.opacity??1,UC(n)),t.opacityExit=me(e.opacity??1,0,WC(n))):i&&(t.opacity=me(e.opacity??1,s.opacity??1,n));for(let o=0;o<HC;o++){const l=`border${kx[o]}Radius`;let c=zu(e,l),d=zu(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Hu(c)===Hu(d)?(t[l]=Math.max(me(Vu(c),Vu(d),n),0),(bt.test(d)||bt.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||s.rotate)&&(t.rotate=me(e.rotate||0,s.rotate||0,n))}function zu(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const UC=wx(0,.5,df),WC=wx(.5,.95,tt);function wx(t,e,s){return n=>n<t?0:n>e?1:s(br(t,e,n))}function Uu(t,e){t.min=e.min,t.max=e.max}function qe(t,e){Uu(t.x,e.x),Uu(t.y,e.y)}function Wu(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Yu(t,e,s,n,r){return t-=e,t=qa(t,1/s,n),r!==void 0&&(t=qa(t,1/r,n)),t}function YC(t,e=0,s=1,n=.5,r,i=t,o=t){if(bt.test(e)&&(e=parseFloat(e),e=me(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=me(i.min,i.max,n);t===i&&(l-=e),t.min=Yu(t.min,e,s,l,r),t.max=Yu(t.max,e,s,l,r)}function Gu(t,e,[s,n,r],i,o){YC(t,e[s],e[n],e[r],e.scale,i,o)}const GC=["x","scaleX","originX"],KC=["y","scaleY","originY"];function Ku(t,e,s,n){Gu(t.x,e,GC,s?s.x:void 0,n?n.x:void 0),Gu(t.y,e,KC,s?s.y:void 0,n?n.y:void 0)}function qu(t){return t.translate===0&&t.scale===1}function Nx(t){return qu(t.x)&&qu(t.y)}function Ju(t,e){return t.min===e.min&&t.max===e.max}function qC(t,e){return Ju(t.x,e.x)&&Ju(t.y,e.y)}function Xu(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Sx(t,e){return Xu(t.x,e.x)&&Xu(t.y,e.y)}function Qu(t){return Re(t.x)/Re(t.y)}function Zu(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class JC{constructor(){this.members=[]}add(e){oc(this.members,e),e.scheduleRender()}remove(e){if(lc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(r=>e===r);if(s===0)return!1;let n;for(let r=s;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XC(t,e,s){let n="";const r=t.x.translate/e.x,i=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((r||i||o)&&(n=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:u,skewX:g,skewY:f}=s;d&&(n=`perspective(${d}px) ${n}`),h&&(n+=`rotate(${h}deg) `),m&&(n+=`rotateX(${m}deg) `),u&&(n+=`rotateY(${u}deg) `),g&&(n+=`skewX(${g}deg) `),f&&(n+=`skewY(${f}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const xo=["","X","Y","Z"],QC=1e3;let ZC=0;function po(t,e,s,n){const{latestValues:r}=e;r[t]&&(s[t]=r[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Cx(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=hx(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",ue,!(r||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Cx(n)}function _x({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=ZC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(s_),this.nodes.forEach(i_),this.nodes.forEach(o_),this.nodes.forEach(n_)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new $C)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new hc),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Hf(o)&&!K6(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,m=0;const u=()=>this.root.updateBlockedByResize=!1;ue.read(()=>{m=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==m&&(m=g,this.root.updateBlockedByResize=!0,h&&h(),h=VC(u,250),Ta.hasAnimatedSinceResize&&(Ta.hasAnimatedSinceResize=!1,this.nodes.forEach(s0)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:u,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||d.getDefaultTransition()||u_,{onLayoutAnimationStart:p,onLayoutAnimationComplete:b}=d.getProps(),y=!this.targetLayout||!Sx(this.targetLayout,g),v=!m&&u;if(this.options.layoutRoot||this.resumeFrom||v||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Nc(f,"layout"),onPlay:p,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(h,v)}else m||s0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(l_),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Cx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(e0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(t0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(a_),this.nodes.forEach(e_),this.nodes.forEach(t_)):this.nodes.forEach(t0),this.clearAllSnapshots();const l=Fe.now();_e.delta=Dt(0,1e3/60,l-_e.timestamp),_e.timestamp=l,_e.isProcessing=!0,ro.update.process(_e),ro.preRender.process(_e),ro.render.process(_e),_e.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cc.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(r_),this.sharedNodes.forEach(c_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Re(this.snapshot.measuredBox.x)&&!Re(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=be(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Nx(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||hs(this.latestValues)||h)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),m_(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return be();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(g_))){const{scroll:h}=this.root;h&&(zs(l.x,h.offset.x),zs(l.y,h.offset.y))}return l}removeElementScroll(o){var c;const l=be();if(qe(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:u}=h;h!==this.root&&m&&u.layoutScroll&&(m.wasRoot&&qe(l,o),zs(l.x,m.offset.x),zs(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const c=be();qe(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Us(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),hs(h.latestValues)&&Us(c,h.latestValues)}return hs(this.latestValues)&&Us(c,this.latestValues),c}removeTransform(o){const l=be();qe(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!hs(d.latestValues))continue;ml(d.latestValues)&&d.updateSnapshot();const h=be(),m=d.measurePageBox();qe(h,m),Ku(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return hs(this.latestValues)&&Ku(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_e.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var u;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(u=this.parent)!=null&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=_e.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=be(),this.relativeTargetOrigin=be(),nr(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=be(),this.targetWithTransforms=be()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qe(this.target,this.layout.layoutBox),ax(this.target,this.targetDelta)):qe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=be(),this.relativeTargetOrigin=be(),nr(this.relativeTargetOrigin,this.target,g.target),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ml(this.parent.latestValues)||rx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===_e.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;qe(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,u=this.treeScale.y;D3(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=be());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Wu(this.prevProjectionDelta.x,this.projectionDelta.x),Wu(this.prevProjectionDelta.y,this.projectionDelta.y)),sr(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==u||!Zu(this.projectionDelta.x,this.prevProjectionDelta.x)||!Zu(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ws(),this.projectionDelta=Ws(),this.projectionDeltaWithTransform=Ws()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},m=Ws();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const u=be(),g=c?c.source:void 0,f=this.layout?this.layout.source:void 0,p=g!==f,b=this.getStack(),y=!b||b.members.length<=1,v=!!(p&&!y&&this.options.crossfade===!0&&!this.path.some(h_));this.animationProgress=0;let N;this.mixTargetDelta=S=>{const C=S/1e3;n0(m.x,o.x,C),n0(m.y,o.y,C),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nr(u,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d_(this.relativeTarget,this.relativeTargetOrigin,u,C),N&&qC(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=be()),qe(N,this.relativeTarget)),p&&(this.animationValues=h,zC(h,d,this.latestValues,C,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(qt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ue.update(()=>{Ta.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cn(0)),this.currentAnimation=FC(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Mx(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||be();const m=Re(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const u=Re(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+u}qe(l,c),Us(l,h),sr(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new JC),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&po("z",o,d,this.animationValues);for(let h=0;h<xo.length;h++)po(`rotate${xo[h]}`,o,d,this.animationValues),po(`skew${xo[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ea(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ea(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!hs(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=XC(this.projectionDeltaWithTransform,this.treeScale,h);c&&(m=c(h,m)),o.transform=m;const{x:u,y:g}=this.projectionDelta;o.transformOrigin=`${u.origin*100}% ${g.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const f in kr){if(h[f]===void 0)continue;const{correct:p,applyTo:b,isCSSVariable:y}=kr[f],v=m==="none"?h[f]:p(h[f],d);if(b){const N=b.length;for(let S=0;S<N;S++)o[b[S]]=v}else y?this.options.visualElement.renderState.vars[f]=v:o[f]=v}this.options.layoutId&&(o.pointerEvents=d===this?Ea(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(e0),this.root.sharedNodes.clear()}}}function e_(t){t.updateLayout()}function t_(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Je(m=>{const u=o?e.measuredBox[m]:e.layoutBox[m],g=Re(u);u.min=n[m].min,u.max=u.min+g}):Mx(i,e.layoutBox,n)&&Je(m=>{const u=o?e.measuredBox[m]:e.layoutBox[m],g=Re(n[m]);u.max=u.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+g)});const l=Ws();sr(l,n,e.layoutBox);const c=Ws();o?sr(c,t.applyTransform(r,!0),e.measuredBox):sr(c,n,e.layoutBox);const d=!Nx(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:u,layout:g}=m;if(u&&g){const f=be();nr(f,e.layoutBox,u.layoutBox);const p=be();nr(p,n,g.layoutBox),Sx(f,p)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=f,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function s_(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function n_(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function r_(t){t.clearSnapshot()}function e0(t){t.clearMeasurements()}function t0(t){t.isLayoutDirty=!1}function a_(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function s0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function i_(t){t.resolveTargetDelta()}function o_(t){t.calcProjection()}function l_(t){t.resetSkewAndRotation()}function c_(t){t.removeLeadSnapshot()}function n0(t,e,s){t.translate=me(e.translate,0,s),t.scale=me(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function r0(t,e,s,n){t.min=me(e.min,s.min,n),t.max=me(e.max,s.max,n)}function d_(t,e,s,n){r0(t.x,e.x,s.x,n),r0(t.y,e.y,s.y,n)}function h_(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const u_={duration:.45,ease:[.4,0,.1,1]},a0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),i0=a0("applewebkit/")&&!a0("chrome/")?Math.round:tt;function o0(t){t.min=i0(t.min),t.max=i0(t.max)}function m_(t){o0(t.x),o0(t.y)}function Mx(t,e,s){return t==="position"||t==="preserve-aspect"&&!yC(Qu(e),Qu(s),.2)}function g_(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const f_=_x({attachResizeListener:(t,e)=>wr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bo={current:void 0},Ex=_x({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bo.current){const t=new f_({});t.mount(window),t.setOptions({layoutScroll:!0}),bo.current=t}return bo.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),x_={pan:{Feature:RC},drag:{Feature:PC,ProjectionNode:Ex,MeasureLayout:jx}};function l0(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const r="onHover"+s,i=n[r];i&&ue.postRender(()=>i(e,$r(e)))}class p_ extends es{mount(){const{current:e}=this.node;e&&(this.unmount=z6(e,(s,n)=>(l0(this.node,n,"Start"),r=>l0(this.node,r,"End"))))}unmount(){}}class b_ extends es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ir(wr(this.node.current,"focus",()=>this.onFocus()),wr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function c0(t,e,s){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const r="onTap"+(s==="End"?"":s),i=n[r];i&&ue.postRender(()=>i(e,$r(e)))}class y_ extends es{mount(){const{current:e}=this.node;e&&(this.unmount=G6(e,(s,n)=>(c0(this.node,n,"Start"),(r,{success:i})=>c0(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vl=new WeakMap,yo=new WeakMap,v_=t=>{const e=vl.get(t.target);e&&e(t)},j_=t=>{t.forEach(v_)};function k_({root:t,...e}){const s=t||document;yo.has(s)||yo.set(s,{});const n=yo.get(s),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(j_,{root:t,...e})),n[r]}function w_(t,e,s){const n=k_(e);return vl.set(t,s),n.observe(t),()=>{vl.delete(t),n.unobserve(t)}}const N_={some:0,all:1};class S_ extends es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:r="some",once:i}=e,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:N_[r]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),u=d?h:m;u&&u(c)};return w_(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(C_(e,s))&&this.startObserver()}unmount(){}}function C_({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const __={inView:{Feature:S_},tap:{Feature:y_},focus:{Feature:b_},hover:{Feature:p_}},M_={layout:{ProjectionNode:Ex,MeasureLayout:jx}},E_={...mC,...__,...x_,...M_},T_=E3(E_,H3),Tx=({birthInfo:t,fourPillars:e,userName:s,className:n="",showEditButton:r=!0,onEditClick:i})=>{const o=u=>{const g=["일","월","화","수","목","금","토"],f=new Date(u.year,u.month-1,u.day),p=g[f.getDay()];return`${u.year}년 ${u.month}월 ${u.day}일 ${u.hour}시 ${u.minute||0}분 (${p}요일) ${u.isLunar?"음력":"양력"}`},l=u=>`${u.year.heavenly}${u.year.earthly}년 ${u.month.heavenly}${u.month.earthly}월 ${u.day.heavenly}${u.day.earthly}일 ${u.hour.heavenly}${u.hour.earthly}시`,c=u=>({갑:"text-emerald-600 dark:text-emerald-400",을:"text-green-600 dark:text-green-400",병:"text-red-600 dark:text-red-400",정:"text-pink-600 dark:text-pink-400",무:"text-yellow-600 dark:text-yellow-400",기:"text-amber-600 dark:text-amber-400",경:"text-slate-600 dark:text-slate-400",신:"text-gray-600 dark:text-gray-400",임:"text-blue-600 dark:text-blue-400",계:"text-cyan-600 dark:text-cyan-400"})[u]||"text-gray-600 dark:text-gray-400",d=u=>({자:"text-blue-800 dark:text-blue-300",해:"text-cyan-800 dark:text-cyan-300",축:"text-yellow-800 dark:text-yellow-300",진:"text-amber-800 dark:text-amber-300",미:"text-orange-800 dark:text-orange-300",술:"text-yellow-800 dark:text-yellow-300",인:"text-green-800 dark:text-green-300",묘:"text-emerald-800 dark:text-emerald-300",사:"text-red-800 dark:text-red-300",오:"text-rose-800 dark:text-rose-300",신:"text-gray-800 dark:text-gray-300",유:"text-slate-800 dark:text-slate-300"})[u]||"text-gray-800 dark:text-gray-300",h=u=>({갑:"木(목)",을:"木(목)",병:"火(화)",정:"火(화)",무:"土(토)",기:"土(토)",경:"金(금)",신:"金(금)",임:"水(수)",계:"水(수)"})[u]||"",m=u=>({자:"水(수)",해:"水(수)",축:"土(토)",진:"土(토)",미:"土(토)",술:"土(토)",인:"木(목)",묘:"木(목)",사:"火(화)",오:"火(화)",신:"金(금)",유:"金(금)"})[u]||`${u}(?)`;return a.jsxs(T_.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`bg-gradient-to-r from-purple-50 to-blue-50 dark:from-gray-800 dark:to-purple-900/30 rounded-xl shadow-lg border border-purple-200 dark:border-purple-700/50 p-6 mb-8 ${n}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"👤"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:s||t.name||"사주 분석 대상"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"출생 정보 기반 분석"})]})]}),r&&i&&a.jsx("button",{onClick:i,className:"px-4 py-2 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg border border-gray-300 dark:border-gray-600 transition-colors text-sm font-medium",title:"출생 정보 수정",children:"⚙️ 수정"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎂"}),"출생 정보"]}),a.jsx("div",{className:"bg-white dark:bg-gray-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"생년월일시:"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:o(t)})]}),t.gender&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"성별:"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:t.gender==="male"?"남성":"여성"})]})]})})]}),e&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🔮"}),"사주 (四柱)"]}),a.jsxs("div",{className:"bg-white dark:bg-gray-700/50 rounded-lg p-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-semibold text-red-800 dark:text-red-200",children:"년주 (年柱)"}),a.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:e.year.combined}),a.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[a.jsxs("span",{className:`font-medium ${c(e.year.heavenly)}`,children:[e.year.heavenly,"(",h(e.year.heavenly),")"]}),a.jsxs("span",{className:`font-medium ${d(e.year.earthly)}`,children:[e.year.earthly,"(",m(e.year.earthly),")"]})]})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-semibold text-green-800 dark:text-green-200",children:"월주 (月柱)"}),a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.month.combined}),a.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[a.jsxs("span",{className:`font-medium ${c(e.month.heavenly)}`,children:[e.month.heavenly,"(",h(e.month.heavenly),")"]}),a.jsxs("span",{className:`font-medium ${d(e.month.earthly)}`,children:[e.month.earthly,"(",m(e.month.earthly),")"]})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"일주 (日柱)"}),a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.day.combined}),a.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[a.jsxs("span",{className:`font-medium ${c(e.day.heavenly)}`,children:[e.day.heavenly,"(",h(e.day.heavenly),") (일간)"]}),a.jsxs("span",{className:`font-medium ${d(e.day.earthly)}`,children:[e.day.earthly,"(",m(e.day.earthly),")"]})]})]}),a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"시주 (時柱)"}),a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.hour.combined}),a.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[a.jsxs("span",{className:`font-medium ${c(e.hour.heavenly)}`,children:[e.hour.heavenly,"(",h(e.hour.heavenly),")"]}),a.jsxs("span",{className:`font-medium ${d(e.hour.earthly)}`,children:[e.hour.earthly,"(",m(e.hour.earthly),")"]})]})]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:l(e)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"완전한 사주(四柱)"})]}),a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 text-center font-medium",children:"🌟 오행(五行) 구성 안내"}),a.jsxs("div",{className:"grid grid-cols-5 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🌳"}),a.jsx("div",{className:"font-medium text-green-700 dark:text-green-300",children:"木(목)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"갑을인묘"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🔥"}),a.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:"火(화)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"병정사오"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🏔️"}),a.jsx("div",{className:"font-medium text-yellow-700 dark:text-yellow-300",children:"土(토)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"무기진미축술"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"⚔️"}),a.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"金(금)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"경신신유"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"💧"}),a.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:"水(수)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"임계자해"})]})]})]})]})]})]})]})]})},A_=()=>{const t=He(),{birthInfo:e}=Xs(),[s,n]=j.useState("fiveElements"),[r,i]=j.useState("bar"),o=j.useMemo(()=>{if(!e)return null;try{return qm(e)}catch(l){return console.error("사주 계산 오류:",l),null}},[e]);return!e||!o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📊"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"사주 정보가 필요합니다"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"차트를 확인하려면 먼저 생년월일 정보를 입력해주세요."}),a.jsx("button",{onClick:()=>t("/settings"),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"생년월일 입력하기"})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsx(Tx,{birthInfo:e,fourPillars:{year:{heavenly:o.fourPillars.year.heavenly,earthly:o.fourPillars.year.earthly,combined:`${o.fourPillars.year.heavenly}${o.fourPillars.year.earthly}`},month:{heavenly:o.fourPillars.month.heavenly,earthly:o.fourPillars.month.earthly,combined:`${o.fourPillars.month.heavenly}${o.fourPillars.month.earthly}`},day:{heavenly:o.fourPillars.day.heavenly,earthly:o.fourPillars.day.earthly,combined:`${o.fourPillars.day.heavenly}${o.fourPillars.day.earthly}`},hour:{heavenly:o.fourPillars.hour.heavenly,earthly:o.fourPillars.hour.earthly,combined:`${o.fourPillars.hour.heavenly}${o.fourPillars.hour.earthly}`}},userName:e.name,showEditButton:!0,onEditClick:()=>t("/settings")})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>n("fiveElements"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="fiveElements"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"🎯 오행균형도"}),a.jsx("button",{onClick:()=>n("tenGods"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="tenGods"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"⭐ 십성분포도"}),a.jsx("button",{onClick:()=>n("twelveEarthly"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="twelveEarthly"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"🐲 12간지상호작용"})]}),s==="tenGods"&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"차트 타입:"}),a.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[a.jsx("button",{onClick:()=>i("bar"),className:`px-3 py-1 text-sm transition-colors ${r==="bar"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"막대"}),a.jsx("button",{onClick:()=>i("doughnut"),className:`px-3 py-1 text-sm transition-colors ${r==="doughnut"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"도넛"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.jsx("div",{className:"lg:col-span-2",children:s==="fiveElements"?a.jsx(GS,{sajuData:o,height:450,showLegend:!0,showTooltips:!0}):s==="tenGods"?a.jsx(KS,{sajuData:o,height:450,chartType:r,showCategory:!0}):a.jsx(XS,{sajuData:o,height:450,showRelationships:!0,showSeasonalBalance:!0})})}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총점"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[o.totalScore.toFixed(0),"점"]})]}),a.jsx("div",{className:"text-4xl",children:"💯"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"평균"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[o.averageScore.toFixed(1),"점"]})]}),a.jsx("div",{className:"text-4xl",children:"📊"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"일간"}),a.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:o.dayMaster})]}),a.jsx("div",{className:"text-4xl",children:"☯️"})]})})]}),a.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/saju"),className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"사주 분석으로"}),a.jsx("button",{onClick:()=>t("/six-areas"),className:"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"6대 영역 분석"})]})]})})},D_=[{id:"basic",name:"기본 분석",icon:"🔍",color:"blue"},{id:"personality",name:"성격 분석",icon:"🧠",color:"purple"},{id:"fortune",name:"운세 분석",icon:"🌟",color:"yellow"},{id:"career",name:"직업 지도",icon:"💼",color:"green"},{id:"relationship",name:"관계 분석",icon:"❤️",color:"red"},{id:"health",name:"건강 지도",icon:"🏥",color:"cyan"},{id:"spiritual",name:"신살 분석",icon:"⚡",color:"indigo"},{id:"johoo",name:"조후 분석",icon:"🌡️",color:"orange"}],P_=()=>{const t=He(),{birthInfo:e}=Xs(),[s,n]=j.useState("basic"),[r,i]=j.useState(null),[o,l]=j.useState(!1),[c,d]=j.useState(null),h=j.useMemo(()=>{if(!e)return null;try{return qm(e)}catch(m){return console.error("사주 계산 오류:",m),null}},[e]);return j.useEffect(()=>{(async()=>{if(h){l(!0),d(null);try{const u=await ci.getComprehensiveInterpretation(h);i(u)}catch(u){console.error("해석 데이터 로드 실패:",u),d("해석 데이터를 불러올 수 없습니다.")}finally{l(!1)}}})()},[h]),!e||!h?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"사주 정보가 필요합니다"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"종합 해석을 확인하려면 먼저 생년월일 정보를 입력해주세요."}),a.jsx("button",{onClick:()=>t("/settings"),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"생년월일 입력하기"})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsx(Tx,{birthInfo:e,fourPillars:{year:{heavenly:h.fourPillars.year.heavenly,earthly:h.fourPillars.year.earthly,combined:`${h.fourPillars.year.heavenly}${h.fourPillars.year.earthly}`},month:{heavenly:h.fourPillars.month.heavenly,earthly:h.fourPillars.month.earthly,combined:`${h.fourPillars.month.heavenly}${h.fourPillars.month.earthly}`},day:{heavenly:h.fourPillars.day.heavenly,earthly:h.fourPillars.day.earthly,combined:`${h.fourPillars.day.heavenly}${h.fourPillars.day.earthly}`},hour:{heavenly:h.fourPillars.hour.heavenly,earthly:h.fourPillars.hour.earthly,combined:`${h.fourPillars.hour.heavenly}${h.fourPillars.hour.earthly}`}},userName:e.name,showEditButton:!0,onEditClick:()=>t("/settings")})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"📚 종합 사주 해석"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"5대 고전을 기반으로 한 심층 분석"})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:D_.map(m=>a.jsxs("button",{onClick:()=>n(m.id),className:`px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 ${s===m.id?`bg-${m.color}-500 text-white shadow-lg transform scale-105`:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[a.jsx("span",{className:"text-xl",children:m.icon}),a.jsx("span",{className:"text-sm",children:m.name})]},m.id))})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:a.jsx(wi,{interpretation:r,loading:o,error:c,category:s,showTabs:!1,fullHeight:!0})}),a.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/saju-chart"),className:"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"📊 차트 보기"}),a.jsx("button",{onClick:()=>t("/calendar"),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"📅 캘린더로 돌아가기"})]})]})})},hn=["갑","을","병","정","무","기","경","신","임","계"],un=["자","축","인","묘","진","사","오","미","신","유","술","해"],oe={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},Ue={인:"목",묘:"목",사:"화",오:"화",진:"토",술:"토",축:"토",미:"토",신:"금",유:"금",자:"수",해:"수"},R_={근본:["토","목"],사고:["수","금"],인연:["화","목"],행동:["화","목"],행운:["화","수"],환경:["토","수"],건강:["목","수"],성격:["화","토"],지혜:["수","금"],관계:["화","목"],재물:["금","토"],명예:["화","금"],감성:["화","수"],논리성:["금","수"],예술성:["목","화"],이성:["금","수"],인성:["목","토"],지성:["수","금"],학습성:["목","수"],관대함:["목","화"],끈기:["토","금"],리더십:["화","금"],분석력:["수","금"],순수함:["목","수"],용기:["화","목"],권력욕:["금","화"],기쁨:["화","목"],노여움:["화","금"],두려움:["수","금"],명예욕:["화","금"],물욕:["금","토"],미움:["금","화"],사람:["화","목"],색욕:["수","화"],소유욕:["토","금"],수면욕:["수","토"],슬픔:["수","토"],승부욕:["화","금"],식욕:["토","수"],욕심:["금","토"],즐거움:["화","목"],애정욕:["화","목"],지배욕:["금","화"],성욕:["수","화"],지식욕:["수","목"],인정욕:["화","토"],자유욕:["목","화"],창조욕:["목","수"],탐구욕:["수","금"],표현욕:["화","목"],휴식욕:["토","수"],간:["목","화"],갑상선:["화","수"],근육:["목","토"],뇌하수체:["수","금"],대사:["화","토"],스트레스:["화","금"],신장:["수","목"],심장:["화","목"],유전:["목","수"],지방:["토","수"],호르몬:["수","화"],활동량:["화","목"],강박:["금","토"],걱정:["토","수"],공포:["수","금"],낙관:["화","목"],무기력:["토","수"],불안:["수","화"],스트레스심리:["화","금"],우울:["수","토"],자신감:["화","목"],집착:["토","금"],충동:["화","목"],회피:["수","토"],건물:["토","금"],공장:["금","화"],다가구:["토","목"],부동산:["토","금"],다세대:["토","목"],단독:["토","목"],대지:["토"],상가:["금","화"],아파트:["토","금"],연립:["토","목"],오피스:["금","토"],주상복합:["토","금"],주택:["토","목"],대여:["금","수"],동산:["금","목"],사업:["화","금"],주식:["수","금"],채권:["금","토"],투자:["금","수"],펀드:["수","금"],현금:["금"],기술:["금","수"],방송:["화","목"],선물:["수","금"],예능:["화","목"],인력:["목","화"],제품:["금","토"],외가친척:["목","수"],외갓집:["목","토"],외삼촌:["목","화"],외숙모:["수","목"],외조모:["토","수"],외조부:["목","금"],외종형제:["목","화"],이모:["수","목"],이모부:["화","목"],큰이모:["수","토"],남자:["화","목"],배우자:["토","수"],애인:["화","목"],여자:["수","목"],연인:["화","수"],이성관계:["화","수"],계산:["금","수"],과학:["수","금"],관찰:["수","목"],논리일반:["수","금"],논증:["금","수"],도형:["토","금"],문장:["목","수"],법칙:["금","토"],분류:["금","수"],분석:["수","금"],비교:["금","수"],비판:["금","화"],수리:["금","수"],연역:["금","수"],요약:["금","토"],원인:["수","목"],응용:["화","금"],이해:["수","목"],인과:["목","수"],전략:["금","화"],추론:["수","금"],통계:["금","수"],판단:["금","화"],해석:["수","목"],공간:["토","목"],공예:["토","목"],농담:["화","목"],댄스:["화","목"],디자인:["목","화"],리듬:["화","수"],만화:["목","화"],멜로디:["수","목"],무용:["화","목"],문학:["목","수"],미술:["목","토"],박자:["화","금"],사진:["금","수"],색채:["화","목"],연극:["화","목"],연기:["화","수"],영상:["화","금"],영화:["화","금"],예술일반:["목","화"],음악:["수","목"],조각:["토","금"],조형:["토","목"],창작:["목","화"],화음:["수","목"],격려:["화","목"],결단:["금","화"],계획:["금","수"],고집:["토","금"],공감:["수","목"],관리:["금","토"],교육:["목","수"],긍정:["화","목"],기획:["수","금"],대화:["목","화"],도덕:["목","토"],명령:["금","화"],봉사:["목","수"],비판업무:["금","화"],사교:["화","목"],상담:["수","목"],섬세:["수","목"],성실:["토","금"],소통:["목","화"],솔선:["화","목"],수리업무:["금","수"],시간:["금","토"],신뢰:["토","금"],실천:["화","토"],언어:["목","수"],예의:["목","토"],유머:["화","목"],응용업무:["수","금"],인내:["토","금"],적응:["수","목"],정리:["금","토"],정직:["토","목"],조정:["수","토"],주도:["화","금"],책임:["토","금"],추진:["화","목"],타협:["수","토"],포용:["목","수"],개방적:["목","화"],계산적:["금","수"],긍정적:["화","목"],배타적:["금","토"],부정적:["수","금"],사교적:["화","목"],이기적:["금","화"],진취적:["화","목"],합리적:["금","수"],희생적:["목","수"],건강운:["목","수"],결혼운:["화","토"],금전운:["금","토"],대인운:["화","목"],사업운:["화","금"],성공운:["화","목"],승진운:["화","금"],시험운:["수","목"],재물운:["금","토"],직장운:["토","금"],취업운:["금","화"],학업운:["수","목"],여행운:["목","화"],이사운:["토","목"],이직운:["금","화"],인기운:["화","목"],자녀운:["목","화"],투자운:["금","수"],학운:["수","목"],해외운:["수","목"],혼인운:["화","토"],연애운:["화","목"],애정운:["화","수"],통솔력:["화","금"],결단력:["금","화"],책임감:["토","금"],영향력:["화","목"],선득력:["화","목"],상상력:["목","화"],혁신성:["목","금"],예술감:["목","화"],독창성:["목","화"],문제해결:["수","금"],의사소통:["목","화"],경청:["수","목"],설득:["화","목"],표현력:["화","목"],이해력:["수","목"],기억력:["수","토"],분석력:["수","금"],정리력:["금","토"],적응력:["수","목"],경영:["금","토"],재무관리:["금","토"],마케팅:["화","목"],네트워킹:["화","목"],협상력:["금","화"],기술력:["금","수"],전문지식:["수","금"],실무능력:["토","금"],장인정신:["토","금"],발전성:["목","화"],질병:["수","토"],상처:["금","화"],만성질환:["토","수"],정신건강:["수","화"],재물손실:["금","수"],사기조심:["수","금"],투자주의:["수","금"],보증주의:["토","금"],대출주의:["금","수"],분쟁:["화","금"],갈등:["화","금"],오해조심:["화","수"],배신주의:["금","수"],이별:["수","금"],교통사고:["금","화"],산업재해:["금","토"],화재:["화","금"],수상사고:["수","목"],낙상주의:["토","목"],소송:["금","화"],계약주의:["금","토"],법적분쟁:["금","화"],세무주의:["금","토"],규제주의:["금","토"],실패위험:["수","금"],동업주의:["화","금"],확장주의:["목","화"],계역변경:["수","목"],경쟁압박:["금","화"]},d0={상생:{목:"화",화:"토",토:"금",금:"수",수:"목"},상극:{목:"토",화:"금",토:"수",금:"목",수:"화"}},L_={1:{수:20,토:15},2:{목:20,화:10,금:-10},3:{목:20,화:10,금:-10},4:{목:15,토:20,금:-5},5:{화:20,토:10,수:-10},6:{화:20,토:10,수:-10},7:{화:15,토:20,수:-5},8:{금:20,수:10,목:-10},9:{금:20,수:10,목:-10},10:{금:15,토:20,목:-5},11:{수:20,목:10,화:-10},12:{수:20,목:10,화:-10}},O_={23:{수:15},0:{수:15},1:{수:15},3:{목:15},4:{목:15},5:{목:15},7:{토:10},8:{토:10},9:{화:15},10:{화:15},11:{화:15},12:{화:15},13:{토:10},14:{토:10},15:{금:15},16:{금:15},17:{금:15},18:{금:15},19:{토:10},20:{토:10},21:{수:15},22:{수:15}};function I_(t,e,s){const r=s.getFullYear()-e;return Math.floor(r/10)}function ua(t,e,s,n,r){const i=new Date,o=Ax(t,e);let l=40;if(r){const f=I_(e,r,i);l=Px(e,f)}const c=Rx(e,i.getFullYear()),d=K_(e,i.getFullYear(),i.getMonth()+1),h=q_(e,i),u={base:{base:.7,daeun:.2,seun:.05,month:.03,day:.02},year:{base:.3,daeun:.3,seun:.3,month:.05,day:.05},month:{base:.25,daeun:.2,seun:.15,month:.3,day:.1},today:{base:.2,daeun:.15,seun:.1,month:.2,day:.35}}[s],g=o*u.base+l*u.daeun+c*u.seun+d*u.month+h*u.day;return Math.max(20,Math.min(90,Math.round(g)))}function Ax(t,e){var g,f,p,b;if(!e||!((g=e.year)!=null&&g.gan)||!((f=e.month)!=null&&f.gan)||!((p=e.day)!=null&&p.gan)||!((b=e.time)!=null&&b.gan))return Math.floor(Math.random()*30)+40;const s=R_[t]||[];if(s.length===0)return Math.floor(Math.random()*30)+40;const n=_i(e),r=t.split("").reduce((y,v)=>y+v.charCodeAt(0),0);let l=20+(n+r*1e3)%1e5%21;const c=[];try{c.push(oe[e.year.gan]),c.push(oe[e.month.gan]),c.push(oe[e.day.gan]),c.push(oe[e.time.gan]),c.push(Ue[e.year.ji]),c.push(Ue[e.month.ji]),c.push(Ue[e.day.ji]),c.push(Ue[e.time.ji])}catch(y){return console.error("[오행 분포 계산 오류]",y),Math.floor(Math.random()*30)+40}const d=1+(n%20-10)/100;s.forEach(y=>{const v=c.filter(N=>N===y).length;l+=v*3*d,c.forEach(N=>{d0.상생[N]===y&&(l+=5*d),d0.상극[N]===y&&(l-=3*d)})});const h=F_(e.ohHaengBalance,s);l+=h*d;const m=oe[e.day.gan];return s.includes(m)&&(l+=6*d),Math.max(20,Math.min(70,Math.round(l)))}function F_(t,e){let s=0;return e.forEach(n=>{const r=t[n];r>=40&&r<=60?s+=5:r>=70?s+=8:r<=20&&(s-=3)}),s}function B_(){return{year:{gan:"갑",ji:"자"},month:{gan:"병",ji:"인"},day:{gan:"무",ji:"진"},time:{gan:"경",ji:"신"},ohHaengBalance:{목:30,화:25,토:20,금:15,수:10},fullSaju:"갑자 병인 무진 경신"}}const _s={갑:"기",을:"경",병:"신",정:"임",무:"계",기:"갑",경:"을",신:"병",임:"정",계:"무"},Dx={인:["오","술"],오:["인","술"],술:["인","오"],신:["자","진"],자:["신","진"],진:["신","자"],해:["묘","미"],묘:["해","미"],미:["해","묘"],사:["유","축"],유:["사","축"],축:["사","유"]},mn={자:"축",축:"자",인:"해",해:"인",묘:"술",술:"묘",진:"유",유:"진",사:"신",신:"사",오:"미",미:"오"},Ms={자:"오",오:"자",축:"미",미:"축",인:"신",신:"인",묘:"유",유:"묘",진:"술",술:"진",사:"해",해:"사"},gn={목:"화",화:"토",토:"금",금:"수",수:"목"},Es={목:"토",화:"금",토:"수",금:"목",수:"화"};function $_(t,e){const s=V_(t),n=H_(t),r=z_(t),i=U_(t),o=W_(s,n,r,i),l=[];new Date().getFullYear();for(let d=0;d<=95;d++){const h=e+d,m=Math.floor(d/10),u=Px(t,m),g=Rx(t,h),f=J_(t,d);let p=o*.4+u*.3+g*.2+f*.1;p=X_(p,d);const b=Q_(t,d);p+=b,p=Math.max(0,Math.min(100,p)),l.push(p)}const c=Z_(l);return{baseScore:o,yearlyScores:l,pattern:c,keyCharacteristics:{elementBalance:s,dayMasterStrength:n,harmonyLevel:r,conflictLevel:i}}}function V_(t){const e={목:0,화:0,토:0,금:0,수:0};e[oe[t.year.gan]]++,e[oe[t.month.gan]]++,e[oe[t.day.gan]]++,e[oe[t.time.gan]]++,e[Ue[t.year.ji]]++,e[Ue[t.month.ji]]++,e[Ue[t.day.ji]]++,e[Ue[t.time.ji]]++;const s=Object.values(e),n=Math.max(...s),r=Math.min(...s),i=s.reduce((c,d)=>c+d)/s.length,o=s.reduce((c,d)=>c+Math.pow(d-i,2),0)/s.length;return Math.max(0,100-Math.sqrt(o)*25-(n-r)*10)}function H_(t){var c;const e=t.day.gan,s=oe[e];let n=50;const r=[t.year.gan,t.month.gan,t.time.gan,t.year.ji,t.month.ji,t.day.ji,t.time.ji].filter(d=>oe[d]===s||Ue[d]===s).length;n+=r*5;const i=(c=Object.entries(gn).find(([d,h])=>h===s))==null?void 0:c[0];if(i){const d=[t.year.gan,t.month.gan,t.time.gan,t.year.ji,t.month.ji,t.day.ji,t.time.ji].filter(h=>oe[h]===i||Ue[h]===i).length;n+=d*3}const o=Es[s],l=[t.year.gan,t.month.gan,t.time.gan,t.year.ji,t.month.ji,t.day.ji,t.time.ji].filter(d=>oe[d]===o||Ue[d]===o).length;return n-=l*4,Math.max(0,Math.min(100,n))}function z_(t){let e=50;const s=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];for(let r=0;r<s.length;r++)for(let i=r+1;i<s.length;i++)_s[s[r]]===s[i]&&(e+=10);const n=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++)mn[n[r]]===n[i]&&(e+=8);for(const r of n){const i=Dx[r];if(i){const o=i.filter(l=>n.includes(l)).length;e+=o*5}}return Math.min(100,e)}function U_(t){let e=0;const s=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(let r=0;r<s.length;r++)for(let i=r+1;i<s.length;i++)Ms[s[r]]===s[i]&&(e+=15);const n=[oe[t.year.gan],oe[t.month.gan],oe[t.day.gan],oe[t.time.gan]];for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++)Es[n[r]]===n[i]&&(e+=10);return Math.min(100,e)}function W_(t,e,s,n){const r=t*.3+e*.3+s*.25+(100-n)*.15;return Math.round(r)}function Px(t,e){const s=t.month.ji,n=t.day.gan,r=["갑","병","무","경","임"].includes(n),i=hn.indexOf(t.month.gan),o=un.indexOf(s);let l,c;r?(l=(i+e+1)%10,c=(o+e+1)%12):(l=(i-e-1+10)%10,c=(o-e-1+12)%12);const d=hn[l],h=un[c];let m=40;const u=oe[t.day.gan],g=oe[d];gn[g]===u?m+=30:gn[u]===g&&(m+=25),Es[g]===u?m-=35:Es[u]===g&&(m-=30),u===g&&(m+=10),(_s[t.day.gan]===d||_s[d]===t.day.gan)&&(m+=35),(Ms[t.day.ji]===h||Ms[h]===t.day.ji)&&(m-=25),(mn[t.day.ji]===h||mn[h]===t.day.ji)&&(m+=20);const f=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],p=Dx[h];if(p){const v=p.filter(N=>f.includes(N)).length;m+=v*12}const b=Y_(t,e,d,h);m+=b;const y=G_(s,h);return m+=y,Math.max(20,Math.min(80,m))}function Y_(t,e,s,n){let r=0;const i=_i(t),o=[i%3+1,i%5+3,i%7+6];o.includes(e)&&(r=(i+e)%2===0?45:-45,e===o[0]&&(r*=1.5));const l=hn.indexOf(s)*12+un.indexOf(n);[13,27,41,55].includes(l)&&(r+=(i%3-1)*30);const d=Math.sin((e+i)*.7)*20;return r+=d,r}function G_(t,e){const s={인:"봄",묘:"봄",진:"봄말",사:"여름",오:"여름",미:"여름말",신:"가을",유:"가을",술:"가을말",자:"겨울",축:"겨울말",해:"겨울"},n=s[t],r=s[e];return n===r?8:{봄:"가을",가을:"봄",여름:"겨울",겨울:"여름"}[n]===r?-5:0}function Rx(t,e){const s=(e-4)%10,n=(e-4)%12,r=hn[s],i=un[n];let o=40;_s[t.day.gan]===r&&(o+=15),mn[t.day.ji]===i&&(o+=12),Ms[t.day.ji]===i&&(o-=18);const l=oe[t.day.gan],c=oe[r];return gn[c]===l&&(o+=8),Es[c]===l&&(o-=12),Math.max(20,Math.min(80,o))}function K_(t,e,s){const n=((e-4)*12+(s-1))%10,r=(s-1)%12,i=hn[n],o=un[r];let l=40;_s[t.day.gan]===i&&(l+=18),mn[t.day.ji]===o&&(l+=15),Ms[t.day.ji]===o&&(l-=20);const c=oe[t.day.gan],d=oe[i];gn[d]===c&&(l+=12),Es[d]===c&&(l-=15);const h=L_[s]||{},m=Ue[o],u=h[m]||0;return l+=u*.3,Math.max(20,Math.min(80,l))}function q_(t,e){const s=new Date(1984,0,1),n=Math.floor((e.getTime()-s.getTime())/(1e3*60*60*24)),r=Math.abs(n%10),i=Math.abs(n%12),o=hn[r],l=un[i];let c=40;_s[t.day.gan]===o&&(c+=20),mn[t.day.ji]===l&&(c+=18),Ms[t.day.ji]===l&&(c-=22);const d=oe[t.day.gan],h=oe[o];gn[h]===d&&(c+=15),Es[h]===d&&(c-=18);const m=e.getHours(),u=O_[m]||{},g=oe[o],f=u[g]||0;return c+=f*.5,Math.max(20,Math.min(80,c))}function J_(t,e){const s=_i(t),n=Math.sin(e*2*Math.PI/23)*15,r=Math.sin(e*2*Math.PI/28)*10,i=Math.sin(e*2*Math.PI/33)*8,o=Math.sin((e+s)*.15)*25+Math.cos((e+s*2)*.08)*15+Math.sin((e+s*3)*.3)*10,l=50+n+r+i+o;return Math.max(0,Math.min(100,l))}function _i(t){const e={갑:1,을:2,병:3,정:4,무:5,기:6,경:7,신:8,임:9,계:10},s={자:1,축:2,인:3,묘:4,진:5,사:6,오:7,미:8,신:9,유:10,술:11,해:12},n=((e[t.year.gan]-1)*12+(s[t.year.ji]-1))%60,r=((e[t.month.gan]-1)*12+(s[t.month.ji]-1))%60,i=((e[t.day.gan]-1)*12+(s[t.day.ji]-1))%60,o=((e[t.time.gan]-1)*12+(s[t.time.ji]-1))%60,l={목:0,화:0,토:0,금:0,수:0};[t.year.gan,t.month.gan,t.day.gan,t.time.gan].forEach(S=>{l[oe[S]]++}),[t.year.ji,t.month.ji,t.day.ji,t.time.ji].forEach(S=>{l[Ue[S]]++});const c=Object.values(l),d=Math.max(...c),h=Math.min(...c),m=(d-h)*100;let u=0,g=0;const f=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];for(let S=0;S<f.length;S++)for(let C=S+1;C<f.length;C++)_s[f[S]]===f[C]&&(u+=(S+1)*(C+1)*10);const p=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(let S=0;S<p.length;S++)for(let C=S+1;C<p.length;C++)Ms[p[S]]===p[C]&&(g+=(S+1)*(C+1)*15);oe[t.day.gan];const b=e[t.day.gan]*s[t.day.ji]*5,y=t.month.ji,v=s[y]*7;return n*1e3+r*500+i*800+o*300+m*20+u*3+g*2+b+v*10}function X_(t,e){return e<=10?t*.9+10:e<=20?t*1.1:e<=35?t*1.05:e<=55?t*.95+5:t*(1-(e-55)*.003)}function Q_(t,e){const s=_i(t),n=Math.sin((e+s*.1)*.3)*3,r=Math.cos((e+s*.2)*.5)*2,i=Math.sin(e*s*.01*.7)*1.5;return n+r+i}function Z_(t){const e=t.reduce((c,d)=>c+d)/t.length,s=t.reduce((c,d)=>c+Math.pow(d-e,2),0)/t.length,n=Math.sqrt(s)/50,r=t.slice(0,48).reduce((c,d)=>c+d)/48,i=t.slice(48).reduce((c,d)=>c+d)/48;let o;i-r>10?o="ascending":r-i>10?o="descending":n>.5?o="cyclic":o="stable";let l="안정형";return n>.7?l="격변형":n>.5?l="변동형":o==="ascending"?l="상승형":o==="descending"&&(l="하강형"),{type:l,volatility:Math.min(1,n),trend:o}}let Lx=null;function vo(t){Lx=t}function x(t,e){try{const s=Lx||B_();return Ax(t,s)}catch(s){return console.error(`[getSajuScore ERROR] ${t}:`,s),e}}const Ox=[{id:"jubon",name:"주본",icon:"🎯",description:"근본본, 성향, 욕정, 주격, 주운 분석",subcategories:[{id:"geunbonbon",name:"근본본",items:[{id:"geunbon",name:"근본",baseScore:x("근본",75)},{id:"sago",name:"사고",baseScore:x("사고",70)},{id:"inyeon",name:"인연",baseScore:x("인연",65)},{id:"haengdong",name:"행동",baseScore:x("행동",72)},{id:"haengun",name:"행운",baseScore:x("행운",68)},{id:"hwangyeong",name:"환경",baseScore:x("환경",70)}]},{id:"seonghyang",name:"성향",items:[{id:"gamseong",name:"감성",baseScore:x("감성",70)},{id:"nonriseong",name:"논리성",baseScore:x("논리성",68)},{id:"yesulseong",name:"예술성",baseScore:x("예술성",65)},{id:"iseong",name:"이성",baseScore:x("이성",72)},{id:"inseong",name:"인성",baseScore:x("인성",75)},{id:"jiseong",name:"지성",baseScore:x("지성",70)},{id:"hakseupseong",name:"학습성",baseScore:x("학습성",68)}]},{id:"yokjeong",name:"욕정",items:[{id:"gwonryeokyok",name:"권력욕",baseScore:x("권력욕",60)},{id:"gippeum",name:"기쁨",baseScore:x("기쁨",75)},{id:"noyeoum",name:"노여움",baseScore:x("노여움",45)},{id:"duryeoum",name:"두려움",baseScore:x("두려움",40)},{id:"myeongyeyok",name:"명예욕",baseScore:x("명예욕",65)},{id:"muryok",name:"물욕",baseScore:x("물욕",55)},{id:"mium",name:"미움",baseScore:x("미움",35)},{id:"saram",name:"사람",baseScore:x("사람",70)},{id:"saegyok",name:"색욕",baseScore:x("색욕",50)},{id:"soyuyok",name:"소유욕",baseScore:x("소유욕",60)},{id:"sumyeonyok",name:"수면욕",baseScore:x("수면욕",65)},{id:"seulpeum",name:"슬픔",baseScore:x("슬픔",45)},{id:"seungbuyok",name:"승부욕",baseScore:x("승부욕",70)},{id:"sigyok",name:"식욕",baseScore:x("식욕",60)},{id:"yoksim",name:"욕심",baseScore:x("욕심",55)},{id:"jeulgeoum",name:"즐거움",baseScore:x("즐거움",75)}]},{id:"jugak",name:"주격",items:[{id:"gaebangjeogin",name:"개방적",baseScore:x("개방적",70)},{id:"gyesanjeogin",name:"계산적",baseScore:x("계산적",65)},{id:"geungjeongjeeogin",name:"긍정적",baseScore:x("긍정적",75)},{id:"baetajeogin",name:"배타적",baseScore:x("배타적",45)},{id:"bujeongjeogin",name:"부정적",baseScore:x("부정적",40)},{id:"sagyojeogin",name:"사교적",baseScore:x("사교적",70)},{id:"igijeogin",name:"이기적",baseScore:x("이기적",50)},{id:"jinchwijeogin",name:"진취적",baseScore:x("진취적",72)},{id:"haprijeogin",name:"합리적",baseScore:x("합리적",75)},{id:"heuisaengjeogin",name:"희생적",baseScore:x("희생적",65)}]},{id:"juun",name:"주운",items:[{id:"geongangun",name:"건강운",baseScore:x("건강운",70)},{id:"gyeolhonun",name:"결혼운",baseScore:x("결혼운",65)},{id:"gwonryeogun",name:"권력운",baseScore:x("권력운",60)},{id:"myeongyeun",name:"명예운",baseScore:x("명예운",62)},{id:"sagoun",name:"사고운",baseScore:x("사고운",45)},{id:"saeobun",name:"사업운",baseScore:x("사업운",68)},{id:"idongun",name:"이동운",baseScore:x("이동운",55)},{id:"ibyeorun",name:"이별운",baseScore:x("이별운",40)},{id:"inyeonun",name:"인연운",baseScore:x("인연운",72)},{id:"jasigun",name:"자식운",baseScore:x("자식운",65)},{id:"jaeneungun",name:"재능운",baseScore:x("재능운",70)},{id:"jaemorun",name:"재물운",baseScore:x("재물운",60)},{id:"josangun",name:"조상운",baseScore:x("조상운",58)},{id:"jigeobun",name:"직업운",baseScore:x("직업운",68)},{id:"jibangun",name:"집안운",baseScore:x("집안운",65)},{id:"hageobun",name:"학업운",baseScore:x("학업운",70)},{id:"haengunun",name:"행운운",baseScore:x("행운운",60)}]}]},{id:"jugeon",name:"주건",icon:"💪",description:"비만, 심리, 인체계, 정력, 질환, 뇌 분석",subcategories:[{id:"biman",name:"비만",items:[{id:"geongangsikpum",name:"건강식품",baseScore:x("건강식품",70)},{id:"gwanri",name:"관리",baseScore:x("관리",65)},{id:"dansik",name:"단식",baseScore:x("단식",50)},{id:"boyak",name:"보약",baseScore:x("보약",60)},{id:"sangdam",name:"상담",baseScore:x("상담",65)},{id:"sumyeon",name:"수면",baseScore:x("수면",70)},{id:"subun",name:"수분",baseScore:x("수분",75)},{id:"undong",name:"운동",baseScore:x("운동",68)},{id:"eumsik",name:"음식",baseScore:x("음식",65)},{id:"chehyeong",name:"체형",baseScore:x("체형",60)},{id:"chiryo",name:"치료",baseScore:x("치료",70)},{id:"keondisyeon",name:"컨디션",baseScore:x("컨디션",72)}]},{id:"simri",name:"심리",items:[{id:"galdeung",name:"갈등",baseScore:x("갈등",45)},{id:"gonoe",name:"고뇌",baseScore:x("고뇌",40)},{id:"nakgwan",name:"낙관",baseScore:x("낙관",75)},{id:"mugwansim",name:"무관심",baseScore:x("무관심",50)},{id:"buran",name:"불안",baseScore:x("불안",45)},{id:"sinjung",name:"신중",baseScore:x("신중",70)},{id:"uul",name:"우울",baseScore:x("우울",35)},{id:"uisim",name:"의심",baseScore:x("의심",50)},{id:"jiltu",name:"질투",baseScore:x("질투",40)},{id:"jjajeung",name:"짜증",baseScore:x("짜증",45)},{id:"hogisim",name:"호기심",baseScore:x("호기심",75)},{id:"heungbun",name:"흥분",baseScore:x("흥분",60)}]},{id:"inchegye",name:"인체계",items:[{id:"golgegyae",name:"골격계",baseScore:x("골격계",65)},{id:"geunukgye",name:"근육계",baseScore:x("근육계",68)},{id:"namsaengsiggye",name:"남생식기",baseScore:x("남생식기",60)},{id:"naebungye",name:"내분비계",baseScore:x("내분비계",70)},{id:"sohwagye",name:"소화계",baseScore:x("소화계",68)},{id:"sunhwangye",name:"순환계",baseScore:x("순환계",72)},{id:"singyeonggye",name:"신경계",baseScore:x("신경계",75)},{id:"oebungye",name:"외분비계",baseScore:x("외분비계",65)},{id:"oehyeonggye",name:"외형계",baseScore:x("외형계",60)},{id:"jeonsingye",name:"정신계",baseScore:x("정신계",70)},{id:"pibugye",name:"피부계",baseScore:x("피부계",65)},{id:"hoheupgye",name:"호흡계",baseScore:x("호흡계",72)}]},{id:"jeongryeok",name:"정력",items:[{id:"dolbal",name:"돌발",baseScore:x("돌발",55)},{id:"sekseu",name:"섹스",baseScore:x("섹스",65)},{id:"seutemina",name:"스테미나",baseScore:x("스테미나",70)},{id:"oreugarijeum",name:"오르가즘",baseScore:x("오르가즘",60)},{id:"joyeol",name:"조절",baseScore:x("조절",68)},{id:"junbi",name:"준비",baseScore:x("준비",65)},{id:"chungdong",name:"충동",baseScore:x("충동",60)},{id:"taim",name:"타임",baseScore:x("타임",62)}]},{id:"jilhwan",name:"질환",items:[{id:"gamyeomseong",name:"감염성질환",baseScore:x("감염성질환",40)},{id:"golsuseong",name:"골수성혈액질환",baseScore:x("골수성혈액질환",35)},{id:"gugangmit",name:"구강및악안면병리",baseScore:x("구강및악안면병리",45)},{id:"geungolggyae",name:"근골격계장애",baseScore:x("근골격계장애",50)},{id:"geunuk",name:"근육질환",baseScore:x("근육질환",45)},{id:"naebunbi",name:"내분비질환",baseScore:x("내분비질환",40)},{id:"noejilhwan",name:"뇌질환",baseScore:x("뇌질환",35)},{id:"rimpeu",name:"림프계면역장애",baseScore:x("림프계면역장애",40)},{id:"manseong",name:"만성피로",baseScore:x("만성피로",50)},{id:"binyugi",name:"비뇨기계질환",baseScore:x("비뇨기계질환",45)},{id:"biman_jilhwan",name:"비만질환",baseScore:x("비만질환",40)},{id:"ppyeogol",name:"뼈골절질환",baseScore:x("뼈골절질환",35)},{id:"saengsiggye",name:"생식기질환",baseScore:x("생식기질환",40)},{id:"seoncheonseong",name:"선천성질환",baseScore:x("선천성질환",30)},{id:"sohwa",name:"소화질환",baseScore:x("소화질환",45)},{id:"sunhwan",name:"순환질환",baseScore:x("순환질환",40)},{id:"singyeonggye_jilhwan",name:"신경계질환",baseScore:x("신경계질환",35)},{id:"simhyeolgwan",name:"심혈관질환",baseScore:x("심혈관질환",40)},{id:"angwa",name:"안과질환",baseScore:x("안과질환",50)},{id:"am",name:"암",baseScore:x("암",25)},{id:"janggi",name:"장기질환",baseScore:x("장기질환",40)},{id:"jeongsin",name:"정신장애",baseScore:x("정신장애",35)},{id:"jeunghugun",name:"증후군",baseScore:x("증후군",40)},{id:"taae",name:"태아질환",baseScore:x("태아질환",30)},{id:"pibu",name:"피부질환",baseScore:x("피부질환",50)},{id:"horumon",name:"호르몬질환",baseScore:x("호르몬질환",40)},{id:"hoheup",name:"호흡질환",baseScore:x("호흡질환",45)}]},{id:"noe",name:"뇌",items:[{id:"gannoe",name:"간뇌",baseScore:x("간뇌",65)},{id:"noehasuche",name:"뇌하수체",baseScore:x("뇌하수체",68)},{id:"daenoe",name:"대뇌",baseScore:x("대뇌",75)},{id:"duchungeop",name:"두충엽",baseScore:x("두충엽",60)},{id:"byeongyeongeop",name:"변연엽",baseScore:x("변연엽",62)},{id:"sonoe",name:"소뇌",baseScore:x("소뇌",70)},{id:"sisang",name:"시상",baseScore:x("시상",65)},{id:"sisanghabu",name:"시상하부",baseScore:x("시상하부",68)},{id:"yeonsu",name:"연수",baseScore:x("연수",72)},{id:"jeondueop",name:"전두엽",baseScore:x("전두엽",75)},{id:"jeoneop",name:"전엽",baseScore:x("전엽",70)},{id:"jungnoe",name:"중뇌",baseScore:x("중뇌",68)},{id:"jungeop",name:"중엽",baseScore:x("중엽",65)},{id:"cheoksu",name:"척수",baseScore:x("척수",60)},{id:"cheukdueop",name:"측두엽",baseScore:x("측두엽",70)},{id:"hutueop",name:"후투엽",baseScore:x("후투엽",65)},{id:"hueop",name:"후엽",baseScore:x("후엽",68)}]}]},{id:"jumul",name:"주물",icon:"💰",description:"부동산, 재물, 투자 분석",subcategories:[{id:"budongsan",name:"부동산",items:[{id:"geonmul",name:"건물",baseScore:x("건물",65)},{id:"gongjang",name:"공장",baseScore:x("공장",60)},{id:"dagagu",name:"다가구",baseScore:x("다가구",62)},{id:"budongsan_item",name:"부동산",baseScore:x("부동산",70)},{id:"dasedae",name:"다세대",baseScore:x("다세대",63)},{id:"dandok",name:"단독",baseScore:x("단독",68)},{id:"daeji",name:"대지",baseScore:x("대지",65)},{id:"sangga",name:"상가",baseScore:x("상가",72)},{id:"apateu",name:"아파트",baseScore:x("아파트",75)},{id:"yeonrip",name:"연립",baseScore:x("연립",60)},{id:"opiseu",name:"오피스",baseScore:x("오피스",70)},{id:"jusangbokhap",name:"주상복합",baseScore:x("주상복합",68)},{id:"jutaek",name:"주택",baseScore:x("주택",67)}]},{id:"jaemul",name:"재물",items:[{id:"daeyeo",name:"대여",baseScore:x("대여",55)},{id:"dongsan",name:"동산",baseScore:x("동산",60)},{id:"budongsan_jaemul",name:"부동산",baseScore:x("부동산",70)},{id:"saeop",name:"사업",baseScore:x("사업",65)},{id:"jusik",name:"주식",baseScore:x("주식",62)},{id:"chaegwon",name:"채권",baseScore:x("채권",58)},{id:"tuja",name:"투자",baseScore:x("투자",60)},{id:"peondeu",name:"펀드",baseScore:x("펀드",57)},{id:"hyeongeum",name:"현금",baseScore:x("현금",75)}]},{id:"tuja_jumul",name:"투자",items:[{id:"daeyeo_tuja",name:"대여",baseScore:x("대여",55)},{id:"dongsan_tuja",name:"동산",baseScore:x("동산",58)},{id:"budongsan_tuja",name:"부동산",baseScore:x("부동산",70)},{id:"jusik_tuja",name:"주식",baseScore:x("주식",65)},{id:"chaegwon_tuja",name:"채권",baseScore:x("채권",60)},{id:"peondeu_tuja",name:"펀드",baseScore:x("펀드",58)},{id:"gisul",name:"기술",baseScore:x("기술",68)},{id:"bangsong",name:"방송",baseScore:x("방송",62)},{id:"seonmul",name:"선물",baseScore:x("선물",55)},{id:"yeneung",name:"예능",baseScore:x("예능",60)},{id:"inryeok",name:"인력",baseScore:x("인력",63)},{id:"jepum",name:"제품",baseScore:x("제품",65)}]}]},{id:"juyeon",name:"주연",icon:"🤝",description:"외가, 이성, 인연, 선배, 친가, 친구, 후배, 가정, 가족 분석",subcategories:[{id:"oega",name:"외가",items:[{id:"oesachon",name:"외사촌",baseScore:x("외사촌",65)},{id:"oesamchon",name:"외삼촌",baseScore:x("외삼촌",70)},{id:"oesukmo",name:"외숙모",baseScore:x("외숙모",68)},{id:"oejomo",name:"외조모",baseScore:x("외조모",75)},{id:"oejobu",name:"외조부",baseScore:x("외조부",72)},{id:"oejoka",name:"외조카",baseScore:x("외조카",60)},{id:"oejongomo",name:"외종조모",baseScore:x("외종조모",65)},{id:"oejongjobu",name:"외종조부",baseScore:x("외종조부",68)},{id:"imo",name:"이모",baseScore:x("이모",70)},{id:"imobu",name:"이모부",baseScore:x("이모부",65)}]},{id:"iseong",name:"이성",items:[{id:"gohyangiseong",name:"고향이성",baseScore:x("고향이성",60)},{id:"dandaeiseong",name:"단체이성",baseScore:x("단체이성",65)},{id:"dongneiseong",name:"동네이성",baseScore:x("동네이성",68)},{id:"dongmuniseong",name:"동문이성",baseScore:x("동문이성",70)},{id:"moimiseong",name:"모임이성",baseScore:x("모임이성",65)},{id:"hoesaiseong",name:"회사이성",baseScore:x("회사이성",72)}]},{id:"inyeon",name:"인연",items:[{id:"iseong_inyeon",name:"이성",baseScore:x("이성",70)},{id:"baeuja",name:"배우자",baseScore:x("배우자",75)},{id:"gajok",name:"가족",baseScore:x("가족",80)},{id:"guin",name:"귀인",baseScore:x("귀인",65)},{id:"dongryo",name:"동료",baseScore:x("동료",68)},{id:"dongmun",name:"동문",baseScore:x("동문",65)},{id:"donghyang",name:"동향",baseScore:x("동향",60)},{id:"seonbae_inyeon",name:"선배",baseScore:x("선배",70)},{id:"seuseung",name:"스승",baseScore:x("스승",72)},{id:"aein",name:"애인",baseScore:x("애인",75)},{id:"oega_inyeon",name:"외가",baseScore:x("외가",68)},{id:"chinga_inyeon",name:"친가",baseScore:x("친가",70)}]},{id:"seonbae",name:"선배",items:[{id:"gohyangseonbae",name:"고향선배",baseScore:x("고향선배",65)},{id:"dandaeseonbae",name:"단체선배",baseScore:x("단체선배",68)},{id:"dongneseonbae",name:"동네선배",baseScore:x("동네선배",60)},{id:"dongmunseonbae",name:"동문선배",baseScore:x("동문선배",70)},{id:"moimseonbae",name:"모임선배",baseScore:x("모임선배",65)},{id:"iseongseonbae",name:"이성선배",baseScore:x("이성선배",68)},{id:"hoesaseonbae",name:"회사선배",baseScore:x("회사선배",75)}]},{id:"chinga",name:"친가",items:[{id:"gomo",name:"고모",baseScore:x("고모",68)},{id:"gomobu",name:"고모부",baseScore:x("고모부",65)},{id:"baekmo",name:"백모",baseScore:x("백모",70)},{id:"baekbu",name:"백부",baseScore:x("백부",72)},{id:"sachon",name:"사촌",baseScore:x("사촌",65)},{id:"samchon",name:"삼촌",baseScore:x("삼촌",70)},{id:"sukmo",name:"숙모",baseScore:x("숙모",68)},{id:"jomo",name:"조모",baseScore:x("조모",75)},{id:"jobu",name:"조부",baseScore:x("조부",72)},{id:"joka",name:"조카",baseScore:x("조카",60)},{id:"jeungjomo",name:"증조모",baseScore:x("증조모",65)},{id:"jeungjobu",name:"증조부",baseScore:x("증조부",68)}]},{id:"chingu",name:"친구",items:[{id:"gohyangchingu",name:"고향친구",baseScore:x("고향친구",65)},{id:"dandaechingu",name:"단체친구",baseScore:x("단체친구",68)},{id:"dongnechingu",name:"동네친구",baseScore:x("동네친구",70)},{id:"dongmunchingu",name:"동문친구",baseScore:x("동문친구",72)},{id:"moimchingu",name:"모임친구",baseScore:x("모임친구",65)},{id:"iseongchingu",name:"이성친구",baseScore:x("이성친구",75)},{id:"hoesachingu",name:"회사친구",baseScore:x("회사친구",68)}]},{id:"hubae",name:"후배",items:[{id:"gohyanghubae",name:"고향후배",baseScore:x("고향후배",60)},{id:"dandaehubae",name:"단체후배",baseScore:x("단체후배",65)},{id:"dongnehubae",name:"동네후배",baseScore:x("동네후배",62)},{id:"dongmunhubae",name:"동문후배",baseScore:x("동문후배",68)},{id:"moimhubae",name:"모임후배",baseScore:x("모임후배",60)},{id:"iseonghubae",name:"이성후배",baseScore:x("이성후배",65)},{id:"hoesahubae",name:"회사후배",baseScore:x("회사후배",70)}]},{id:"gajeong",name:"가정",items:[{id:"ttal",name:"딸",baseScore:x("딸",75)},{id:"baeuja_gajeong",name:"배우자",baseScore:x("배우자",80)},{id:"adeul",name:"아들",baseScore:x("아들",75)}]},{id:"gajok_juyeon",name:"가족",items:[{id:"nuna",name:"누나",baseScore:x("누나",68)},{id:"dongsaeng",name:"동생",baseScore:x("동생",65)},{id:"abeoji",name:"아버지",baseScore:x("아버지",78)},{id:"eomeoni",name:"어머니",baseScore:x("어머니",80)},{id:"halmeoni",name:"할머니",baseScore:x("할머니",72)},{id:"harabeoji",name:"할아버지",baseScore:x("할아버지",70)},{id:"hyeong",name:"형",baseScore:x("형",68)}]}]},{id:"jujae",name:"주재",icon:"🎨",description:"논리, 예술, 학습 분석",subcategories:[{id:"nonri",name:"논리",items:[{id:"undong",name:"운동",baseScore:x("운동",65)},{id:"gamgak",name:"감각",baseScore:x("감각",70)},{id:"gaenyeom",name:"개념",baseScore:x("개념",72)},{id:"gieok",name:"기억",baseScore:x("기억",68)},{id:"nonri_item",name:"논리",baseScore:x("논리",75)},{id:"migak",name:"미각",baseScore:x("미각",60)},{id:"bunseok",name:"분석",baseScore:x("분석",75)},{id:"suri",name:"수리",baseScore:x("수리",70)},{id:"sigak",name:"시각",baseScore:x("시각",68)},{id:"eohi",name:"어휘",baseScore:x("어휘",72)},{id:"eoneo",name:"언어",baseScore:x("언어",75)},{id:"yeonsan",name:"연산",baseScore:x("연산",70)},{id:"ihae",name:"이해",baseScore:x("이해",75)},{id:"insik",name:"인식",baseScore:x("인식",72)},{id:"inji",name:"인지",baseScore:x("인지",70)},{id:"jeonryak",name:"전략",baseScore:x("전략",68)},{id:"jinhaeng",name:"진행",baseScore:x("진행",65)},{id:"jipjung",name:"집중",baseScore:x("집중",72)},{id:"cheonggak",name:"청각",baseScore:x("청각",68)},{id:"tongje",name:"통제",baseScore:x("통제",65)},{id:"pyeonghaeng",name:"평행",baseScore:x("평행",60)},{id:"hakseup_nonri",name:"학습",baseScore:x("학습",75)},{id:"hoheup_nonri",name:"호흡",baseScore:x("호흡",65)},{id:"hwasul",name:"화술",baseScore:x("화술",70)}]},{id:"yesul",name:"예술",items:[{id:"sumyeon_yesul",name:"수면",baseScore:x("수면",65)},{id:"joyeol_yesul",name:"조절",baseScore:x("조절",68)},{id:"chungdong_yesul",name:"충동",baseScore:x("충동",60)},{id:"geim",name:"게임",baseScore:x("게임",70)},{id:"muyong",name:"무용",baseScore:x("무용",65)},{id:"misul",name:"미술",baseScore:x("미술",70)},{id:"banbok",name:"반복",baseScore:x("반복",62)},{id:"byeonhwa",name:"변화",baseScore:x("변화",75)},{id:"bijeon",name:"비젼",baseScore:x("비젼",68)},{id:"sangsang",name:"상상",baseScore:x("상상",75)},{id:"saeksang",name:"색상",baseScore:x("색상",68)},{id:"saenggak",name:"생각",baseScore:x("생각",72)},{id:"yeonye",name:"연예",baseScore:x("연예",60)},{id:"yeoljeong",name:"열정",baseScore:x("열정",75)},{id:"yuhok",name:"유혹",baseScore:x("유혹",55)},{id:"eumak",name:"음악",baseScore:x("음악",70)},{id:"jageuk",name:"자극",baseScore:x("자극",65)},{id:"jeontal",name:"전달",baseScore:x("전달",70)},{id:"jejak",name:"제작",baseScore:x("제작",68)},{id:"jungdok",name:"중독",baseScore:x("중독",50)},{id:"changjak",name:"창작",baseScore:x("창작",75)},{id:"chegye",name:"체계",baseScore:x("체계",65)},{id:"hyeongsang",name:"형상",baseScore:x("형상",70)},{id:"hwaldong_yesul",name:"활동",baseScore:x("활동",72)}]},{id:"hakseup",name:"학습",items:[{id:"nonri_hakseup",name:"논리",baseScore:x("논리",75)},{id:"bunseok_hakseup",name:"분석",baseScore:x("분석",72)},{id:"suri_hakseup",name:"수리",baseScore:x("수리",70)},{id:"eoneo_hakseup",name:"언어",baseScore:x("언어",75)},{id:"ihae_hakseup",name:"이해",baseScore:x("이해",75)},{id:"jipjung_hakseup",name:"집중",baseScore:x("집중",70)},{id:"changjak_hakseup",name:"창작",baseScore:x("창작",68)},{id:"gyesan",name:"계산",baseScore:x("계산",70)},{id:"dohyeong",name:"도형",baseScore:x("도형",65)},{id:"mobang",name:"모방",baseScore:x("모방",60)},{id:"munjang",name:"문장",baseScore:x("문장",72)},{id:"bokseup",name:"복습",baseScore:x("복습",70)},{id:"bunbae",name:"분배",baseScore:x("분배",65)},{id:"seontaek",name:"선택",baseScore:x("선택",68)},{id:"sigan",name:"시간",baseScore:x("시간",65)},{id:"amgi",name:"암기",baseScore:x("암기",68)},{id:"yeseup",name:"예습",baseScore:x("예습",70)},{id:"yuchu",name:"유추",baseScore:x("유추",72)},{id:"eungyong",name:"응용",baseScore:x("응용",75)},{id:"jeongni",name:"정리",baseScore:x("정리",68)},{id:"jiri",name:"지리",baseScore:x("지리",60)},{id:"pandoan",name:"판단",baseScore:x("판단",72)},{id:"puri",name:"풀이",baseScore:x("풀이",70)},{id:"haeseok",name:"해석",baseScore:x("해석",72)}]}]},{id:"jueop",name:"주업",icon:"💼",description:"능력, 성향, 업무, 업종, 직업 분석",subcategories:[{id:"neungryeok",name:"능력",items:[{id:"gaebalryeok",name:"개발력",baseScore:x("개발력",70)},{id:"gaejoryeok",name:"개조력",baseScore:x("개조력",65)},{id:"gamsuryeok",name:"감수력",baseScore:x("감수력",60)},{id:"gyesanryeok",name:"계산력",baseScore:x("계산력",70)},{id:"gwangyeryeok",name:"관계력",baseScore:x("관계력",72)},{id:"gwanriryeok",name:"관리력",baseScore:x("관리력",68)},{id:"gisulryeok",name:"기술력",baseScore:x("기술력",70)},{id:"gieokryeok",name:"기억력",baseScore:x("기억력",68)},{id:"gihoekryeok",name:"기획력",baseScore:x("기획력",72)},{id:"nodongryeok",name:"노동력",baseScore:x("노동력",65)},{id:"rideoryeok",name:"리더력",baseScore:x("리더력",70)},{id:"munsoryeok",name:"문서력",baseScore:x("문서력",65)},{id:"balpyoryeok",name:"발표력",baseScore:x("발표력",68)},{id:"bunseokryeok",name:"분석력",baseScore:x("분석력",75)},{id:"saengsanryeok",name:"생산력",baseScore:x("생산력",68)},{id:"seolmyeongryeok",name:"설명력",baseScore:x("설명력",70)},{id:"sujipryeok",name:"수집력",baseScore:x("수집력",65)},{id:"sungryeonryeok",name:"숙련력",baseScore:x("숙련력",72)},{id:"eohiryeok",name:"어휘력",baseScore:x("어휘력",70)},{id:"yeongeopryeok",name:"영업력",baseScore:x("영업력",68)},{id:"eungyongryeok",name:"응용력",baseScore:x("응용력",72)},{id:"ihaeryeok",name:"이해력",baseScore:x("이해력",75)},{id:"jeondalryeok",name:"전달력",baseScore:x("전달력",70)},{id:"jejakkryeok",name:"제작력",baseScore:x("제작력",68)},{id:"jidoryeok",name:"지도력",baseScore:x("지도력",70)},{id:"jipjungryeok",name:"집중력",baseScore:x("집중력",72)},{id:"changyiryeok",name:"창의력",baseScore:x("창의력",75)},{id:"chaegimryeok",name:"책임력",baseScore:x("책임력",70)},{id:"cheorryeok",name:"처리력",baseScore:x("처리력",68)},{id:"chujiryeok",name:"추진력",baseScore:x("추진력",70)},{id:"pandanryeok",name:"판단력",baseScore:x("판단력",72)},{id:"panmaeryeok",name:"판매력",baseScore:x("판매력",65)},{id:"pyeonjipryeok",name:"편집력",baseScore:x("편집력",68)},{id:"pyohyeonryeok",name:"표현력",baseScore:x("표현력",70)},{id:"haegeolryeok",name:"해결력",baseScore:x("해결력",75)},{id:"hwahapryeok",name:"화합력",baseScore:x("화합력",68)},{id:"hwaldongryeok",name:"활동력",baseScore:x("활동력",72)}]},{id:"seonghyang_jueop",name:"성향",items:[{id:"gwangyeseong",name:"관계성",baseScore:x("관계성",70)},{id:"gwanriseong",name:"관리성",baseScore:x("관리성",68)},{id:"bunseokseong",name:"분석성",baseScore:x("분석성",72)},{id:"sukjiseong",name:"숙지성",baseScore:x("숙지성",65)},{id:"jeonmunseong",name:"전문성",baseScore:x("전문성",75)},{id:"changyiseong",name:"창의성",baseScore:x("창의성",70)},{id:"hwaldongseong",name:"활동성",baseScore:x("활동성",68)}]},{id:"eommu",name:"업무",items:[{id:"gaebal",name:"개발",baseScore:x("개발",70)},{id:"gyeongni",name:"경리",baseScore:x("경리",65)},{id:"gumaae",name:"구매",baseScore:x("구매",60)},{id:"nomu",name:"노무",baseScore:x("노무",58)},{id:"boan",name:"보안",baseScore:x("보안",68)},{id:"saengsan",name:"생산",baseScore:x("생산",65)},{id:"segeum",name:"세금",baseScore:x("세금",60)},{id:"sosong",name:"소송",baseScore:x("소송",55)},{id:"yeongu",name:"연구",baseScore:x("연구",75)},{id:"yeongop",name:"영업",baseScore:x("영업",68)},{id:"unsong",name:"운송",baseScore:x("운송",60)},{id:"unmyeong",name:"운명",baseScore:x("운명",50)},{id:"jageum",name:"자금",baseScore:x("자금",65)},{id:"junggae",name:"중계",baseScore:x("중계",62)},{id:"chuljang",name:"출장",baseScore:x("출장",60)},{id:"panmae",name:"판매",baseScore:x("판매",65)},{id:"hyeonjang",name:"현장",baseScore:x("현장",68)},{id:"hongbo",name:"홍보",baseScore:x("홍보",70)},{id:"hoegye",name:"회계",baseScore:x("회계",68)}]},{id:"eopjong",name:"업종",items:[{id:"gyeongyeong",name:"경영",baseScore:x("경영",68)},{id:"gyoyuk_gita",name:"교육/기타",baseScore:x("교육/기타",70)},{id:"dijain",name:"디자인",baseScore:x("디자인",65)},{id:"maketing",name:"마케팅",baseScore:x("마케팅",70)},{id:"seobiseu",name:"서비스",baseScore:x("서비스",68)},{id:"yeonye_bangsong",name:"연예/방송",baseScore:x("연예/방송",60)},{id:"yutong",name:"유통",baseScore:x("유통",65)},{id:"jeonja_tongsin",name:"전자/통신",baseScore:x("전자/통신",72)},{id:"jejjo",name:"제조",baseScore:x("제조",68)}]},{id:"jigeop",name:"직업",items:[{id:"gongmuwon",name:"공무원",baseScore:x("공무원",70)},{id:"gyosa",name:"교사",baseScore:x("교사",72)},{id:"ganhoha",name:"간호사",baseScore:x("간호사",68)},{id:"uisa",name:"의사",baseScore:x("의사",75)},{id:"byeonsa",name:"변호사",baseScore:x("변호사",70)},{id:"hoegesa",name:"회계사",baseScore:x("회계사",68)},{id:"gisulga",name:"기술자",baseScore:x("기술자",70)},{id:"yesulga",name:"예술가",baseScore:x("예술가",65)},{id:"saeopga",name:"사업가",baseScore:x("사업가",65)},{id:"yeongunja",name:"연구자",baseScore:x("연구자",72)}]}]},{id:"jusaeng",name:"주생",icon:"🌱",description:"일상 생활 전반 분석",subcategories:[{id:"gajok_jusaeng",name:"가족",items:[{id:"gyeyak",name:"계약",baseScore:x("계약",65)},{id:"gyoyuk",name:"교육",baseScore:x("교육",70)},{id:"daehwa",name:"대화",baseScore:x("대화",72)},{id:"moim",name:"모임",baseScore:x("모임",68)},{id:"syoping",name:"쇼핑",baseScore:x("쇼핑",65)},{id:"eonjaeng",name:"언쟁",baseScore:x("언쟁",45)},{id:"yeohaeng",name:"여행",baseScore:x("여행",70)},{id:"oesik",name:"외식",baseScore:x("외식",68)},{id:"isa",name:"이사",baseScore:x("이사",60)},{id:"jaesan",name:"재산",baseScore:x("재산",65)},{id:"haengsa",name:"행사",baseScore:x("행사",68)}]},{id:"geongang",name:"건강",items:[{id:"geongangsikpum_geongang",name:"건강식품",baseScore:x("건강식품",70)},{id:"boyak_geongang",name:"보약",baseScore:x("보약",62)},{id:"sangdam_geongang",name:"상담",baseScore:x("상담",65)},{id:"sumyeon_geongang",name:"수면",baseScore:x("수면",72)},{id:"undong_geongang",name:"운동",baseScore:x("운동",75)},{id:"eumsik_geongang",name:"음식",baseScore:x("음식",68)},{id:"geomsa",name:"검사",baseScore:x("검사",60)},{id:"yeohaeng_geongang",name:"여행",baseScore:x("여행",70)},{id:"masaji",name:"마사지",baseScore:x("마사지",68)},{id:"myeongsang",name:"명상",baseScore:x("명상",65)},{id:"biman_geongang",name:"비만",baseScore:x("비만",50)},{id:"sauna",name:"사우나",baseScore:x("사우나",62)},{id:"chimi",name:"취미",baseScore:x("취미",70)},{id:"hyusik",name:"휴식",baseScore:x("휴식",75)}]},{id:"gyeolhon",name:"결혼",items:[{id:"sago_gyeolhon",name:"사고",baseScore:x("사고",40)},{id:"iseong_gyeolhon",name:"이성",baseScore:x("이성",70)},{id:"sekseu_gyeolhon",name:"섹스",baseScore:x("섹스",65)},{id:"saeop_gyeolhon",name:"사업",baseScore:x("사업",62)},{id:"gyoyuk_gyeolhon",name:"교육",baseScore:x("교육",68)},{id:"isa_gyeolhon",name:"이사",baseScore:x("이사",60)},{id:"jaesan_gyeolhon",name:"재산",baseScore:x("재산",65)},{id:"geongang_gyeolhon",name:"건강",baseScore:x("건강",70)},{id:"bumo",name:"부모",baseScore:x("부모",72)},{id:"bunjaeng",name:"분쟁",baseScore:x("분쟁",45)},{id:"yusan",name:"유산",baseScore:x("유산",60)},{id:"jasik",name:"자식",baseScore:x("자식",75)},{id:"jonggyo",name:"종교",baseScore:x("종교",55)},{id:"jigeop_gyeolhon",name:"직업",baseScore:x("직업",68)}]},{id:"gyeyak_jusaeng",name:"계약",items:[{id:"daeyeo_gyeyak",name:"대여",baseScore:x("대여",58)},{id:"dongsan_gyeyak",name:"동산",baseScore:x("동산",60)},{id:"budongsan_gyeyak",name:"부동산",baseScore:x("부동산",70)},{id:"saeop_gyeyak",name:"사업",baseScore:x("사업",65)},{id:"jusik_gyeyak",name:"주식",baseScore:x("주식",62)},{id:"chaegwon_gyeyak",name:"채권",baseScore:x("채권",58)},{id:"peondeu_gyeyak",name:"펀드",baseScore:x("펀드",55)},{id:"gumae",name:"구매",baseScore:x("구매",65)},{id:"gongjeung",name:"공증",baseScore:x("공증",60)},{id:"bojeung",name:"보증",baseScore:x("보증",55)},{id:"bunsil",name:"분실",baseScore:x("분실",40)},{id:"sinyong",name:"신용",baseScore:x("신용",72)}]},{id:"byuti",name:"뷰티",items:[{id:"geongangsikpum_byuti",name:"건강식품",baseScore:x("건강식품",65)},{id:"boyak_byuti",name:"보약",baseScore:x("보약",60)},{id:"sangdam_byuti",name:"상담",baseScore:x("상담",62)},{id:"chiryo_byuti",name:"치료",baseScore:x("치료",68)},{id:"masaji_byuti",name:"마사지",baseScore:x("마사지",70)},{id:"gyojeong",name:"교정",baseScore:x("교정",65)},{id:"neilateu",name:"네일아트",baseScore:x("네일아트",62)},{id:"seupa",name:"스파",baseScore:x("스파",68)},{id:"anmyeon",name:"안면",baseScore:x("안면",70)},{id:"oemo",name:"외모",baseScore:x("외모",72)},{id:"heeo",name:"헤어",baseScore:x("헤어",68)},{id:"hwajangpum",name:"화장품",baseScore:x("화장품",65)}]},{id:"sago_jusaeng",name:"사고",items:[{id:"segeum_sago",name:"세금",baseScore:x("세금",50)},{id:"sosong_sago",name:"소송",baseScore:x("소송",45)},{id:"eonjaeng_sago",name:"언쟁",baseScore:x("언쟁",48)},{id:"jaesan_sago",name:"재산",baseScore:x("재산",55)},{id:"bunjaeng_sago",name:"분쟁",baseScore:x("분쟁",45)},{id:"bunsil_sago",name:"분실",baseScore:x("분실",40)},{id:"gyotong",name:"교통",baseScore:x("교통",50)},{id:"dansok",name:"단속",baseScore:x("단속",48)},{id:"donan",name:"도난",baseScore:x("도난",35)},{id:"mangsin",name:"망신",baseScore:x("망신",38)},{id:"sagi",name:"사기",baseScore:x("사기",30)},{id:"wiban",name:"위반",baseScore:x("위반",45)},{id:"wiheom",name:"위험",baseScore:x("위험",40)},{id:"pokhaeng",name:"폭행",baseScore:x("폭행",25)}]},{id:"saeop_jusaeng",name:"사업",items:[{id:"gwanri_saeop",name:"관리",baseScore:x("관리",68)},{id:"jusik_saeop",name:"주식",baseScore:x("주식",62)},{id:"tuja_saeop",name:"투자",baseScore:x("투자",60)},{id:"gaebal_saeop",name:"개발",baseScore:x("개발",70)},{id:"gumae_saeop",name:"구매",baseScore:x("구매",65)},{id:"saengsan_saeop",name:"생산",baseScore:x("생산",68)},{id:"sosong_saeop",name:"소송",baseScore:x("소송",45)},{id:"yeongop_saeop",name:"영업",baseScore:x("영업",70)},{id:"jageum_saeop",name:"자금",baseScore:x("자금",65)},{id:"gyeyak_saeop",name:"계약",baseScore:x("계약",68)},{id:"gihoek",name:"기획",baseScore:x("기획",72)},{id:"dongeop",name:"동업",baseScore:x("동업",60)}]},{id:"yeonae",name:"연애",items:[{id:"iseong_yeonae",name:"이성",baseScore:x("이성",72)},{id:"keondisyeon_yeonae",name:"컨디션",baseScore:x("컨디션",68)},{id:"sekseu_yeonae",name:"섹스",baseScore:x("섹스",65)},{id:"eonjaeng_yeonae",name:"언쟁",baseScore:x("언쟁",45)},{id:"yeohaeng_yeonae",name:"여행",baseScore:x("여행",75)},{id:"chimi_yeonae",name:"취미",baseScore:x("취미",70)},{id:"gamjeong",name:"감정",baseScore:x("감정",72)},{id:"gwanram",name:"관람",baseScore:x("관람",68)},{id:"simri",name:"심리",baseScore:x("심리",65)},{id:"ibyeol",name:"이별",baseScore:x("이별",40)},{id:"hogam",name:"호감",baseScore:x("호감",75)}]},{id:"siheom",name:"시험",items:[{id:"sumyeon_siheom",name:"수면",baseScore:x("수면",70)},{id:"keondisyeon_siheom",name:"컨디션",baseScore:x("컨디션",72)},{id:"gieok_siheom",name:"기억",baseScore:x("기억",68)},{id:"jipjung_siheom",name:"집중",baseScore:x("집중",75)},{id:"bokseup_siheom",name:"복습",baseScore:x("복습",70)},{id:"seontaek_siheom",name:"선택",baseScore:x("선택",65)},{id:"yeseup_siheom",name:"예습",baseScore:x("예습",68)},{id:"eungyong_siheom",name:"응용",baseScore:x("응용",72)},{id:"puri_siheom",name:"풀이",baseScore:x("풀이",70)},{id:"geongang_siheom",name:"건강",baseScore:x("건강",68)},{id:"siheom_item",name:"시험",baseScore:x("시험",65)},{id:"junbimul",name:"준비물",baseScore:x("준비물",60)}]},{id:"undong_jusaeng",name:"운동",items:[{id:"gwanri_undong",name:"관리",baseScore:x("관리",68)},{id:"gisul_undong",name:"기술",baseScore:x("기술",70)},{id:"pyeonghaeng_undong",name:"평행",baseScore:x("평행",65)},{id:"banbok_undong",name:"반복",baseScore:x("반복",62)},{id:"gonggangam",name:"공간감",baseScore:x("공간감",68)},{id:"gigu",name:"기구",baseScore:x("기구",65)},{id:"giryeok",name:"기력",baseScore:x("기력",70)},{id:"danche",name:"단체",baseScore:x("단체",68)},{id:"jeongsinryeok",name:"정신력",baseScore:x("정신력",72)},{id:"jiguryeok",name:"지구력",baseScore:x("지구력",75)},{id:"hoejeon",name:"회전",baseScore:x("회전",65)},{id:"heureum",name:"흐름",baseScore:x("흐름",68)}]},{id:"idong",name:"이동",items:[{id:"iseong_idong",name:"이성",baseScore:x("이성",65)},{id:"saeop_idong",name:"사업",baseScore:x("사업",68)},{id:"gajok_idong",name:"가족",baseScore:x("가족",70)},{id:"chingu_idong",name:"친구",baseScore:x("친구",68)},{id:"chuljang_idong",name:"출장",baseScore:x("출장",62)},{id:"yeohaeng_idong",name:"여행",baseScore:x("여행",75)},{id:"isa_idong",name:"이사",baseScore:x("이사",60)},{id:"haengsa_idong",name:"행사",baseScore:x("행사",65)},{id:"gohyang",name:"고향",baseScore:x("고향",68)},{id:"guknae",name:"국내",baseScore:x("국내",70)},{id:"gugoe",name:"국외",baseScore:x("국외",65)},{id:"seom",name:"섬",baseScore:x("섬",60)},{id:"hageop_idong",name:"학업",baseScore:x("학업",68)}]},{id:"ilsang",name:"일상",items:[{id:"sago_ilsang",name:"사고",baseScore:x("사고",45)},{id:"undong_ilsang",name:"운동",baseScore:x("운동",70)},{id:"saeop_ilsang",name:"사업",baseScore:x("사업",65)},{id:"gajok_ilsang",name:"가족",baseScore:x("가족",72)},{id:"isa_ilsang",name:"이사",baseScore:x("이사",58)},{id:"geongang_ilsang",name:"건강",baseScore:x("건강",70)},{id:"jonggyo_ilsang",name:"종교",baseScore:x("종교",55)},{id:"hageop_ilsang",name:"학업",baseScore:x("학업",68)},{id:"bongsa",name:"봉사",baseScore:x("봉사",65)},{id:"yeonae_ilsang",name:"연애",baseScore:x("연애",70)},{id:"jaemul_ilsang",name:"재물",baseScore:x("재물",62)}]},{id:"jayeongeop",name:"자영업",items:[{id:"gwanri_jayeong",name:"관리",baseScore:x("관리",68)},{id:"sangdam_jayeong",name:"상담",baseScore:x("상담",65)},{id:"gumae_jayeong",name:"구매",baseScore:x("구매",62)},{id:"segeum_jayeong",name:"세금",baseScore:x("세금",55)},{id:"yeongop_jayeong",name:"영업",baseScore:x("영업",70)},{id:"gyeyak_jayeong",name:"계약",baseScore:x("계약",68)},{id:"dansok_jayeong",name:"단속",baseScore:x("단속",50)},{id:"napum",name:"납품",baseScore:x("납품",65)},{id:"yeyak",name:"예약",baseScore:x("예약",62)},{id:"jaego",name:"재고",baseScore:x("재고",60)},{id:"chaeyong",name:"채용",baseScore:x("채용",65)},{id:"chinjeol",name:"친절",baseScore:x("친절",72)}]},{id:"jaeneung",name:"재능",items:[{id:"undong_jaeneung",name:"운동",baseScore:x("운동",68)},{id:"gisul_jaeneung",name:"기술",baseScore:x("기술",70)},{id:"misul_jaeneung",name:"미술",baseScore:x("미술",65)},{id:"eumak_jaeneung",name:"음악",baseScore:x("음악",68)},{id:"jejak_jaeneung",name:"제작",baseScore:x("제작",65)},{id:"gyesan_jaeneung",name:"계산",baseScore:x("계산",70)},{id:"hageop_jaeneung",name:"학업",baseScore:x("학업",72)},{id:"dokseo",name:"독서",baseScore:x("독서",70)},{id:"deutgi",name:"듣기",baseScore:x("듣기",68)},{id:"malhagi",name:"말하기",baseScore:x("말하기",70)},{id:"sseugi",name:"쓰기",baseScore:x("쓰기",68)},{id:"oegugeo",name:"외국어",baseScore:x("외국어",65)}]},{id:"jeongchi",name:"정치",items:[{id:"jageum_jeongchi",name:"자금",baseScore:x("자금",60)},{id:"gyeyak_jeongchi",name:"계약",baseScore:x("계약",62)},{id:"moim_jeongchi",name:"모임",baseScore:x("모임",65)},{id:"geongang_jeongchi",name:"건강",baseScore:x("건강",68)},{id:"bunjaeng_jeongchi",name:"분쟁",baseScore:x("분쟁",50)},{id:"gyeoljeong",name:"결정",baseScore:x("결정",70)},{id:"gwonryeok",name:"권력",baseScore:x("권력",65)},{id:"myeonggye",name:"명예",baseScore:x("명예",68)},{id:"balpyo",name:"발표",baseScore:x("발표",65)},{id:"jeongchaek",name:"정책",baseScore:x("정책",70)},{id:"julma",name:"줄마",baseScore:x("줄마",55)},{id:"huwon",name:"후원",baseScore:x("후원",62)}]},{id:"jikjang",name:"직장",items:[{id:"keondisyeon_jikjang",name:"컨디션",baseScore:x("컨디션",70)},{id:"tuja_jikjang",name:"투자",baseScore:x("투자",60)},{id:"gaebal_jikjang",name:"개발",baseScore:x("개발",72)},{id:"moim_jikjang",name:"모임",baseScore:x("모임",65)},{id:"geongang_jikjang",name:"건강",baseScore:x("건강",68)},{id:"hogam_jikjang",name:"호감",baseScore:x("호감",70)},{id:"balpyo_jikjang",name:"발표",baseScore:x("발표",65)},{id:"gyeoljae",name:"결재",baseScore:x("결재",68)},{id:"bogoseo",name:"보고서",baseScore:x("보고서",65)},{id:"siljeok",name:"실적",baseScore:x("실적",70)},{id:"jeopdae",name:"접대",baseScore:x("접대",62)},{id:"jingeup",name:"진급",baseScore:x("진급",68)}]},{id:"chieop",name:"취업",items:[{id:"keondisyeon_chieop",name:"컨디션",baseScore:x("컨디션",70)},{id:"gisul_chieop",name:"기술",baseScore:x("기술",72)},{id:"gaebal_chieop",name:"개발",baseScore:x("개발",70)},{id:"gyeyak_chieop",name:"계약",baseScore:x("계약",65)},{id:"geongang_chieop",name:"건강",baseScore:x("건강",68)},{id:"siheom_chieop",name:"시험",baseScore:x("시험",70)},{id:"balpyo_chieop",name:"발표",baseScore:x("발표",65)},{id:"geunsim",name:"근심",baseScore:x("근심",50)},{id:"myeonjeop",name:"면접",baseScore:x("면접",68)},{id:"jeongong",name:"전공",baseScore:x("전공",72)},{id:"chucheon",name:"추천",baseScore:x("추천",65)},{id:"chieop_item",name:"취업",baseScore:x("취업",70)}]},{id:"chimi_jusaeng",name:"취미",items:[{id:"undong_chimi",name:"운동",baseScore:x("운동",70)},{id:"eumsik_chimi",name:"음식",baseScore:x("음식",68)},{id:"geim_chimi",name:"게임",baseScore:x("게임",65)},{id:"misul_chimi",name:"미술",baseScore:x("미술",65)},{id:"eumak_chimi",name:"음악",baseScore:x("음악",70)},{id:"jejak_chimi",name:"제작",baseScore:x("제작",62)},{id:"moim_chimi",name:"모임",baseScore:x("모임",68)},{id:"syoping_chimi",name:"쇼핑",baseScore:x("쇼핑",65)},{id:"yeohaeng_chimi",name:"여행",baseScore:x("여행",75)},{id:"gwanram_chimi",name:"관람",baseScore:x("관람",68)},{id:"bongsa_chimi",name:"봉사",baseScore:x("봉사",62)},{id:"dokseo_chimi",name:"독서",baseScore:x("독서",70)},{id:"gongye",name:"공예",baseScore:x("공예",65)},{id:"daenseu",name:"댄스",baseScore:x("댄스",68)}]},{id:"haksaeng",name:"학생",items:[{id:"iseong_haksaeng",name:"이성",baseScore:x("이성",65)},{id:"gajok_haksaeng",name:"가족",baseScore:x("가족",70)},{id:"seuseung",name:"스승",baseScore:x("스승",72)},{id:"chingu_haksaeng",name:"친구",baseScore:x("친구",68)},{id:"moim_haksaeng",name:"모임",baseScore:x("모임",65)},{id:"geongang_haksaeng",name:"건강",baseScore:x("건강",68)},{id:"oemo_haksaeng",name:"외모",baseScore:x("외모",62)},{id:"siheom_haksaeng",name:"시험",baseScore:x("시험",70)},{id:"ibyeol_haksaeng",name:"이별",baseScore:x("이별",45)},{id:"hageop_haksaeng",name:"학업",baseScore:x("학업",72)},{id:"balpyo_haksaeng",name:"발표",baseScore:x("발표",65)},{id:"geunsim_haksaeng",name:"근심",baseScore:x("근심",50)}]}]},{id:"juneung",name:"주능",icon:"⚡",description:"능력과 잠재력 분석",subcategories:[{id:"leadership",name:"리더십",items:[{id:"tongsolyeok",name:"통솔력",baseScore:x("통솔력",72)},{id:"gyeoldan",name:"결단력",baseScore:x("결단력",70)},{id:"chaekimgam",name:"책임감",baseScore:x("책임감",75)},{id:"yeonghyangyeok",name:"영향력",baseScore:x("영향력",68)},{id:"seondeuk",name:"선득력",baseScore:x("선득력",65)}]},{id:"creativity",name:"창의력",items:[{id:"sangsangyeok",name:"상상력",baseScore:x("상상력",70)},{id:"hyeoksin",name:"혁신성",baseScore:x("혁신성",68)},{id:"yesulgam",name:"예술감",baseScore:x("예술감",65)},{id:"dokchasung",name:"독창성",baseScore:x("독창성",72)},{id:"munje_haegyeol",name:"문제해결",baseScore:x("문제해결",75)}]},{id:"communication",name:"소통능력",items:[{id:"uisasotong",name:"의사소통",baseScore:x("의사소통",70)},{id:"gyeongcheong",name:"경청",baseScore:x("경청",72)},{id:"seoldeuk",name:"설득",baseScore:x("설득",68)},{id:"gonggam",name:"공감",baseScore:x("공감",75)},{id:"pyohyeon",name:"표현력",baseScore:x("표현력",70)}]},{id:"learning",name:"학습능력",items:[{id:"ihae",name:"이해력",baseScore:x("이해력",72)},{id:"giok",name:"기억력",baseScore:x("기억력",70)},{id:"bunseok",name:"분석력",baseScore:x("분석력",75)},{id:"jeongriryeok",name:"정리력",baseScore:x("정리력",68)},{id:"jeokung",name:"적응력",baseScore:x("적응력",70)}]},{id:"business",name:"사업능력",items:[{id:"gyeongyeong",name:"경영",baseScore:x("경영",68)},{id:"jaemukanri",name:"재무관리",baseScore:x("재무관리",70)},{id:"marketing",name:"마케팅",baseScore:x("마케팅",65)},{id:"network",name:"네트워킹",baseScore:x("네트워킹",72)},{id:"hyeopsang",name:"협상력",baseScore:x("협상력",70)}]},{id:"expertise",name:"전문성",items:[{id:"gisul",name:"기술력",baseScore:x("기술력",72)},{id:"jeonmunjisik",name:"전문지식",baseScore:x("전문지식",75)},{id:"silmuneung",name:"실무능력",baseScore:x("실무능력",70)},{id:"janyeomseong",name:"장인정신",baseScore:x("장인정신",68)},{id:"baljeonyeok",name:"발전성",baseScore:x("발전성",70)}]}]},{id:"juhyung",name:"주흉",icon:"⚠️",description:"위험과 주의사항 분석",subcategories:[{id:"health_risk",name:"건강주의",items:[{id:"jilbyeong",name:"질병",baseScore:x("질병",35)},{id:"sangcheo",name:"상처",baseScore:x("상처",40)},{id:"manse",name:"만성질환",baseScore:x("만성질환",38)},{id:"stress",name:"스트레스",baseScore:x("스트레스",45)},{id:"jeongsin_geongang",name:"정신건강",baseScore:x("정신건강",42)}]},{id:"financial_risk",name:"재물주의",items:[{id:"jaemul_sonshil",name:"재물손실",baseScore:x("재물손실",40)},{id:"sagijosa",name:"사기조심",baseScore:x("사기조심",35)},{id:"tumanja",name:"투자주의",baseScore:x("투자주의",38)},{id:"bojeung",name:"보증주의",baseScore:x("보증주의",32)},{id:"daechul",name:"대출주의",baseScore:x("대출주의",36)}]},{id:"relationship_risk",name:"관계주의",items:[{id:"bunjaeng",name:"분쟁",baseScore:x("분쟁",38)},{id:"galdeung",name:"갈등",baseScore:x("갈등",40)},{id:"ohaejosa",name:"오해조심",baseScore:x("오해조심",42)},{id:"baesinjosa",name:"배신주의",baseScore:x("배신주의",35)},{id:"ibyeol",name:"이별",baseScore:x("이별",38)}]},{id:"accident_risk",name:"사고주의",items:[{id:"gyotong_sago",name:"교통사고",baseScore:x("교통사고",36)},{id:"sanchae",name:"산업재해",baseScore:x("산업재해",38)},{id:"hwajae",name:"화재",baseScore:x("화재",34)},{id:"susang",name:"수상사고",baseScore:x("수상사고",35)},{id:"nolakjosa",name:"낙상주의",baseScore:x("낙상주의",40)}]},{id:"legal_risk",name:"법률주의",items:[{id:"sosong",name:"소송",baseScore:x("소송",38)},{id:"gyeyakjosa",name:"계약주의",baseScore:x("계약주의",42)},{id:"beobjeok_分쟁",name:"법적분쟁",baseScore:x("법적분쟁",36)},{id:"semuwijosa",name:"세무주의",baseScore:x("세무주의",40)},{id:"gyujejosa",name:"규제주의",baseScore:x("규제주의",38)}]},{id:"career_risk",name:"사업주의",items:[{id:"silpae",name:"실패위험",baseScore:x("실패위험",40)},{id:"dongeopjosa",name:"동업주의",baseScore:x("동업주의",35)},{id:"hwakjang_josa",name:"확장주의",baseScore:x("확장주의",38)},{id:"gyeoyeok_josa",name:"계역변경",baseScore:x("계역변경",42)},{id:"gyeongjaeng",name:"경쟁압박",baseScore:x("경쟁압박",40)}]}]}];function e8(){return Ox}function t8({categories:t,selectedCategory:e,onCategoryChange:s}){return a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 xl:grid-cols-9 gap-4",children:t.map(n=>a.jsx("button",{onClick:()=>s(n.id),className:`p-4 rounded-xl border-2 transition-all duration-200 ${e===n.id?"border-purple-500 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 shadow-lg":"border-gray-200 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10 bg-white dark:bg-gray-700"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-2",children:n.icon}),a.jsx("h3",{className:"font-bold text-lg mb-1",children:n.name}),a.jsx("p",{className:`text-sm mt-1 ${e===n.id?"text-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-400"}`,children:n.description})]})},n.id))})})}function s8({subcategories:t,selectedSubcategory:e,onSubcategoryChange:s}){return a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex overflow-x-auto gap-2 pb-2",children:t.map(n=>a.jsxs("button",{onClick:()=>s(n.id),className:`px-4 py-2 rounded-lg whitespace-nowrap transition-colors duration-200 font-medium ${e===n.id?"bg-purple-500 text-white shadow-md":"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:[n.name,a.jsxs("span",{className:"ml-2 text-xs opacity-75",children:["(",n.items.length,")"]})]},n.id))})})}const Nt={DIMENSIONS:{height:"400px"},COLORS:{backgrounds:{base:"rgba(139, 92, 246, 0.1)",today:"rgba(239, 68, 68, 0.15)",month:"rgba(6, 182, 212, 0.15)",year:"rgba(245, 158, 11, 0.15)"},borders:{base:"#8b5cf6",today:"#ef4444",month:"#06b6d4",year:"#f59e0b"}},CHART_OPTIONS:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:13,weight:700},padding:16,boxWidth:12,usePointStyle:!0,color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#8b5cf6",borderWidth:2,cornerRadius:8,padding:14,displayColors:!0,titleFont:{size:14,weight:600},bodyFont:{size:13}}},scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:10,font:{size:12,weight:600},color:"#6b7280",backdropColor:"transparent",showLabelBackdrop:!1},grid:{color:"rgba(107, 114, 128, 0.4)",lineWidth:2},angleLines:{color:"rgba(107, 114, 128, 0.3)",lineWidth:2},pointLabels:{font:{size:13,weight:700},color:"#374151"}}},interaction:{intersect:!1},animation:{duration:1e3,easing:"easeInOutQuart"}},DARK_MODE_CHART_OPTIONS:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:13,weight:700},padding:16,boxWidth:12,usePointStyle:!0,color:"#f1f5f9"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#a78bfa",borderWidth:2,cornerRadius:8,padding:14,displayColors:!0,titleFont:{size:14,weight:600},bodyFont:{size:13}}},scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:10,font:{size:12,weight:600},color:"#cbd5e1",backdropColor:"transparent",showLabelBackdrop:!1},grid:{color:"rgba(156, 163, 175, 0.5)",lineWidth:2},angleLines:{color:"rgba(156, 163, 175, 0.4)",lineWidth:2},pointLabels:{font:{size:13,weight:700},color:"#f1f5f9"}}},interaction:{intersect:!1},animation:{duration:1e3,easing:"easeInOutQuart"}},BUTTON_STYLES:{timeFrame:{base:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",active:{base:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",today:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",month:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",year:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300"},inactive:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}},LAYOUT:{timeFrameSelector:{container:"flex flex-wrap justify-center gap-3 mb-6"},chartContainer:{wrapper:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6"}}},h0=t=>{const e=Nt.COLORS;switch(t){case"today":return{background:e.backgrounds.today,border:e.borders.today};case"month":return{background:e.backgrounds.month,border:e.borders.month};case"year":return{background:e.backgrounds.year,border:e.borders.year};default:return{background:e.backgrounds.base,border:e.borders.base}}},n8=(t,e)=>{const s=t?Nt.DARK_MODE_CHART_OPTIONS:Nt.CHART_OPTIONS;return e?{...s,...e,plugins:{...s.plugins,...e.plugins},scales:{...s.scales,...e.scales}}:s};ct.register(Ht,Yt,Qe,ji,Rs,Ps,on,ln,vs);const r8=({data:t,birthDate:e,sajuData:s})=>{const[n,r]=j.useState(!1),[i,o]=j.useState("base");j.useEffect(()=>{const _=()=>{r(document.documentElement.classList.contains("dark"))};_();const w=new MutationObserver(_);return w.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>w.disconnect()},[]);const l=(_,w=1,k,M=85)=>{const A=_*.8*w,O=(Math.random()-.5)*k,R=A+O;return Math.max(20,Math.min(M,Math.round(R)))},c=j.useMemo(()=>{if(e)try{const _=e.match(/(\d{4})/);return _?parseInt(_[1],10):void 0}catch{return}},[e]),d=j.useMemo(()=>{const _={};return(k=>{var M,E,A,O,R,T,D,L;return k?((M=k.year)==null?void 0:M.gan)&&((E=k.year)==null?void 0:E.ji)&&((A=k.month)==null?void 0:A.gan)&&((O=k.month)==null?void 0:O.ji)&&((R=k.day)==null?void 0:R.gan)&&((T=k.day)==null?void 0:T.ji)&&((D=k.time)==null?void 0:D.gan)&&((L=k.time)==null?void 0:L.ji)&&k.ohHaengBalance:!1})(s)?(_.base=t.items.map(k=>{try{return ua(k.name,s,"base",void 0,c)}catch(M){return console.error(`[기본 점수 계산 오류] ${k.name}:`,M),k.baseScore}}),_.today=t.items.map(k=>{try{return ua(k.name,s,"today",void 0,c)}catch(M){return console.error(`[오늘 점수 계산 오류] ${k.name}:`,M),l(k.baseScore,1,25)}}),_.month=t.items.map(k=>{try{return ua(k.name,s,"month",void 0,c)}catch(M){return console.error(`[이번달 점수 계산 오류] ${k.name}:`,M),l(k.baseScore,1,18)}}),_.year=t.items.map(k=>{try{return ua(k.name,s,"year",void 0,c)}catch(M){return console.error(`[올해 점수 계산 오류] ${k.name}:`,M),l(k.baseScore,1,12)}})):(_.base=t.items.map(k=>k.baseScore),_.today=t.items.map(k=>l(k.baseScore,1,25)),_.month=t.items.map(k=>l(k.baseScore,1,18)),_.year=t.items.map(k=>l(k.baseScore,1,12))),_},[t.items,s,c]),h=j.useMemo(()=>{const _=[],w=d.base||t.items.map(k=>k.baseScore);if(_.push({label:"나의 기본 사주",values:w,timeFrame:"base"}),i!=="base"&&d[i]){const k={today:"오늘의 운세",month:"이번달 운세",year:"올해 운세"};_.push({label:k[i]||i,values:d[i],timeFrame:i})}return _},[d,i,t.items]),m=d.base||t.items.map(_=>_.baseScore),u=Math.max(...m),g=m.map((_,w)=>_===u?w:-1).filter(_=>_!==-1),f=j.useMemo(()=>{const _=t.items.map(w=>w.name);return At.createStandardRadarConfig(_,h,n,!0)},[t.items,h,n]),p=f.data,b=j.useMemo(()=>{var A,O,R,T,D,L;const _=f.options,w=n8(n,{plugins:{legend:{display:i!=="base"},tooltip:{callbacks:{label:F=>`${F.dataset.label}: ${F.parsed.r}점`}}}}),k=[];k.push(...d.base||[]),i!=="base"&&d[i]&&k.push(...d[i]||[]);const M=Math.max(...k,50),E=Math.ceil(M/10)*10+10;return{..._,...w,plugins:{..._==null?void 0:_.plugins,...w.plugins,legend:{...(A=_==null?void 0:_.plugins)==null?void 0:A.legend,...(O=w.plugins)==null?void 0:O.legend},tooltip:{...(R=_==null?void 0:_.plugins)==null?void 0:R.tooltip,...(T=w.plugins)==null?void 0:T.tooltip}},scales:{..._==null?void 0:_.scales,...w.scales,r:{...(D=_==null?void 0:_.scales)==null?void 0:D.r,...(L=w.scales)==null?void 0:L.r,max:E}}}},[f,n,i,d]),v=(m.reduce((_,w)=>_+w,0)/t.items.length).toFixed(1),N={labels:t.items.map(_=>_.name),datasets:[{label:"나의 기본 사주",data:m,backgroundColor:m.map((_,w)=>g.includes(w)?At.COLOR_PALETTE.accent:h0("base").background),borderColor:m.map((_,w)=>g.includes(w)?At.COLOR_PALETTE.accent:h0("base").border),borderWidth:2,borderRadius:8,borderSkipped:!1}]},S={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:n?"#374151":"#f3f4f6",titleColor:n?"#ffffff":"#000000",bodyColor:n?"#ffffff":"#000000",borderColor:n?"#6b7280":"#d1d5db",borderWidth:1,callbacks:{label:_=>`${_.dataset.label}: ${_.parsed.y}점`}}},scales:{x:{grid:{display:!1},ticks:{color:n?"#9ca3af":"#6b7280"}},y:{beginAtZero:!0,max:100,grid:{color:n?"#374151":"#e5e7eb"},ticks:{color:n?"#9ca3af":"#6b7280"}}}},C=t.items.length<=2;return a.jsxs("div",{className:Nt.LAYOUT.chartContainer.wrapper,children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:["🔮 ",t.title," 상세 분석"]}),e&&a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["출생정보: ",e]}),C&&a.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"💡 항목이 적어 막대 차트로 표시됩니다"})]}),a.jsx("div",{className:"mb-6",style:{height:Nt.DIMENSIONS.height},children:C?a.jsx(Xg,{data:N,options:S}):a.jsx(rc,{data:p,options:b})}),a.jsx("div",{className:`${Nt.LAYOUT.timeFrameSelector.container} mb-6`,children:[{key:"base",label:"기본",active:"base"},{key:"today",label:"오늘",active:"today"},{key:"month",label:"이달",active:"month"},{key:"year",label:"올해",active:"year"}].map(({key:_,label:w,active:k})=>a.jsx("button",{onClick:()=>o(_),className:`${Nt.BUTTON_STYLES.timeFrame.base} ${i===_?Nt.BUTTON_STYLES.timeFrame.active[_]:Nt.BUTTON_STYLES.timeFrame.inactive}`,children:w},_))}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-xl p-6 text-center",children:[a.jsxs("h3",{className:"text-xl font-semibold mb-3",children:["🔮 ",t.title," 종합 분석"]}),a.jsx("div",{className:"text-lg",children:Number(v)>=80?"✨ 매우 우수한 사주":Number(v)>=60?"🌟 양호한 사주":Number(v)>=40?"⭐ 평범한 사주":"💪 노력이 필요한 사주"}),a.jsx("div",{className:"text-sm mt-2 opacity-90",children:"각 영역별 균형과 최고점을 차트에서 확인하세요"})]})]})};function a8({isOpen:t,onClose:e,onCustomerAdded:s}){const[n,r]=j.useState({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""}),[i,o]=j.useState({}),[l,c]=j.useState(!1),[d,h]=j.useState(null),m=j.useCallback(()=>{l||(u(),e())},[l,e]);j.useEffect(()=>{t&&u()},[t]),j.useEffect(()=>{const v=N=>{N.key==="Escape"&&t&&m()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[t,m]);const u=()=>{r({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""}),o({}),h(null)},g=()=>{const v={};if(n.name.trim()?n.name.length<2&&(v.name="이름은 2자 이상 입력해주세요"):v.name="이름을 입력해주세요",!n.birth_date)v.birth_date="생년월일을 선택해주세요";else{const N=new Date(n.birth_date),S=new Date,C=new Date(1900,0,1);N>S?v.birth_date="미래 날짜는 선택할 수 없습니다":N<C&&(v.birth_date="1900년 이후 날짜를 선택해주세요")}return n.birth_time||(v.birth_time="생시를 선택해주세요"),n.phone.trim()?/^010-\d{4}-\d{4}$/.test(n.phone)||(v.phone="올바른 전화번호 형식이 아닙니다 (예: 010-1234-5678)"):v.phone="전화번호를 입력해주세요",o(v),Object.keys(v).length===0},f=v=>{const N=v.replace(/[^\d]/g,"");return N.length<=3?N:N.length<=7?`${N.slice(0,3)}-${N.slice(3)}`:`${N.slice(0,3)}-${N.slice(3,7)}-${N.slice(7,11)}`},p=(v,N)=>{v==="phone"&&(N=f(N)),r(S=>({...S,[v]:N})),i[v]&&o(S=>({...S,[v]:void 0})),d&&h(null)},b=async v=>{if(v.preventDefault(),!!g()){c(!0),h(null);try{const N={name:n.name.trim(),birth_date:n.birth_date,birth_time:n.birth_time,phone:n.phone,lunar_solar:n.lunar_solar,gender:n.gender,memo:n.memo.trim()},S=await zm(N);h({type:"success",text:"고객이 성공적으로 등록되었습니다!"}),setTimeout(()=>{s(S.data),m()},500)}catch(N){console.error("고객 등록 실패:",N),h({type:"error",text:N instanceof Error?N.message:"고객 등록 중 오류가 발생했습니다"})}finally{c(!1)}}},y=v=>{v.target===v.currentTarget&&m()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:y,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-100",children:[a.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 px-6 py-4 border-b border-gray-200 dark:border-gray-700 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:"👤"}),"새 고객 등록"]}),a.jsx("button",{onClick:m,disabled:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50","aria-label":"모달 닫기",children:a.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsxs("form",{onSubmit:b,className:"p-6",children:[a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 이름"]}),a.jsx("input",{type:"text",value:n.name,onChange:v=>p("name",v.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors
                  ${i.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}
                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,placeholder:"고객 이름을 입력하세요",disabled:l,autoComplete:"name"}),i.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.name})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 생년월일"]}),a.jsx("input",{type:"date",value:n.birth_date,onChange:v=>p("birth_date",v.target.value),max:new Date().toISOString().split("T")[0],min:"1900-01-01",className:`w-full px-4 py-3 border rounded-xl transition-colors
                  ${i.birth_date?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}
                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,disabled:l}),i.birth_date&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.birth_date})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 생시 (24시간 형식)"]}),a.jsx("input",{type:"time",value:n.birth_time,onChange:v=>p("birth_time",v.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors
                  ${i.birth_time?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}
                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,disabled:l}),i.birth_time&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.birth_time})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 전화번호"]}),a.jsx("input",{type:"tel",value:n.phone,onChange:v=>p("phone",v.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors
                  ${i.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}
                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,placeholder:"010-1234-5678",disabled:l,autoComplete:"tel"}),i.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.phone})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-3 text-gray-700 dark:text-gray-300",children:"음력/양력"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"solar",checked:n.lunar_solar==="solar",onChange:()=>p("lunar_solar","solar"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:l}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"🌞 양력"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"lunar",checked:n.lunar_solar==="lunar",onChange:()=>p("lunar_solar","lunar"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:l}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"🌙 음력"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-3 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 성별"]}),a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"male",checked:n.gender==="male",onChange:()=>p("gender","male"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:l}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"👨 남성"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"female",checked:n.gender==="female",onChange:()=>p("gender","female"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:l}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"👩 여성"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"메모"}),a.jsx("textarea",{value:n.memo,onChange:v=>p("memo",v.target.value),rows:3,className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl
                         dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none`,placeholder:"고객에 대한 추가 정보를 입력하세요 (선택사항)",disabled:l})]}),d&&a.jsx("div",{className:`p-4 rounded-xl text-sm font-medium ${d.type==="success"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[d.type==="success"?a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),d.text]})})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:m,disabled:l,className:`px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300
                       rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:"취소"}),a.jsx("button",{type:"submit",disabled:l,className:`px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl
                       hover:from-blue-700 hover:to-blue-800 transition-all duration-200
                       disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium`,children:l?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})}),"등록 중..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"등록하기"]})})]})]})]})}):null}function jl({onSelect:t,selectedCustomer:e,showAddButton:s=!0}){He();const[n,r]=j.useState([]),[i,o]=j.useState(!1),[l,c]=j.useState(""),[d,h]=j.useState(!1),[m,u]=j.useState(!1),g=j.useCallback(async()=>{try{h(!0);const v=await Hm(1,100,l);r(v.data)}catch(v){console.error("Error loading customers:",v)}finally{h(!1)}},[l]);j.useEffect(()=>{g()},[g]);const f=v=>{t(v),o(!1),c("")},p=()=>{t(null),c("")},b=v=>{g(),t(v),u(!1)},y=()=>{u(!0),o(!1)};return!d&&n.length,a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"고객 선택:"}),e?a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[a.jsxs("span",{className:"text-blue-700 dark:text-blue-300",children:["👤 ",e.name," (",e.birth_date,")"]}),a.jsx("button",{onClick:p,className:"text-red-500 hover:text-red-700",children:"✕"})]}):a.jsx("button",{onClick:()=>o(!i),className:`px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                     rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors`,children:"👤 고객 선택하기"})]}),i&&a.jsxs("div",{className:`absolute top-full mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-xl 
                      border border-gray-200 dark:border-gray-700 z-50`,children:[a.jsxs("div",{className:"p-4 space-y-3",children:[s&&a.jsx("button",{onClick:y,className:`w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg
                         flex items-center justify-center gap-2 transition-colors`,children:"➕ 새 고객 등록"}),s&&a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600"}),a.jsx("input",{type:"text",placeholder:"이름 또는 전화번호로 검색...",value:l,onChange:v=>c(v.target.value),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg
                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,autoFocus:!0})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:d?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"로딩 중..."}):n.length===0?a.jsxs("div",{className:"p-6 text-center space-y-4",children:[a.jsx("div",{className:"text-4xl",children:"🔮"}),a.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[a.jsx("p",{className:"font-medium mb-2",children:"등록된 고객이 없습니다"}),a.jsxs("p",{className:"text-sm",children:['위의 "새 고객 등록" 버튼을 클릭하여',a.jsx("br",{}),"첫 고객을 등록해보세요"]})]})]}):a.jsx("div",{className:"divide-y dark:divide-gray-700",children:n.map(v=>a.jsx("button",{onClick:()=>f(v),className:`w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700
                             transition-colors text-left`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:v.name}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[v.birth_date," ",v.birth_time," ·",v.lunar_solar==="lunar"?"음력":"양력"," ·",v.gender==="male"?"남":"여"]})]}),a.jsx("div",{className:"text-sm text-gray-400",children:v.phone})]})},v.id))})}),a.jsx("div",{className:"p-2 border-t dark:border-gray-700",children:a.jsx("button",{onClick:()=>o(!1),className:`w-full px-3 py-2 text-gray-600 dark:text-gray-400 
                       hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg`,children:"닫기"})})]}),a.jsx(a8,{isOpen:m,onClose:()=>u(!1),onCustomerAdded:b})]})}function i8(t){const e=new Date(t.birth_date),[s]=t.birth_time.split(":").map(Number);let n=null;if(t.saju_data)try{n=typeof t.saju_data=="string"?JSON.parse(t.saju_data):t.saju_data}catch{}return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:s,isLunar:t.lunar_solar==="lunar",gender:t.gender,sajuData:n}}function o8(t){return t?"name"in t?t.name:"사용자":"미선택"}function l8(t){if(!t)return"";if("birth_date"in t){const e=new Date(t.birth_date),s=t.lunar_solar==="lunar"?"(음력)":"";return`${e.getFullYear()}년 ${e.getMonth()+1}월 ${e.getDate()}일 ${t.birth_time} ${s}`}else if("birthInfo"in t){const e=t.birthInfo,s=e.isLunar?"(음력)":"";return`${e.year}년 ${e.month}월 ${e.day}일 ${e.hour}시 ${s}`}return""}const c8=({customer:t,lifetimeFortune:e,loading:s=!1,error:n=null,onLoadChart:r,onScrollToChart:i})=>{var h,m;const o=o8(t),l=l8(t),c=!!e,d=()=>{c&&i?i():!s&&r&&r()};if(!t)return a.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 text-center",children:a.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[a.jsx("span",{className:"text-2xl mb-2 block",children:"📊"}),a.jsx("p",{className:"text-lg font-medium",children:"100년 인생운세 차트"}),a.jsx("p",{className:"text-sm mt-2",children:"고객을 선택하면 인생운세 차트를 확인할 수 있습니다"})]})});if(s)return a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl p-6 text-white shadow-lg animate-pulse",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"animate-spin text-2xl",children:"⭐"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-lg font-bold",children:[o,"님의 100년 운세를 계산하고 있습니다..."]}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:l})]})]})}),a.jsx("div",{className:"text-white/60",children:a.jsxs("svg",{className:"animate-spin h-8 w-8",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})})]})});if(n)return a.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all",onClick:d,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:"❌"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-bold",children:"차트 로드 실패"}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:n}),a.jsx("p",{className:"text-xs opacity-75 mt-2",children:"클릭하여 다시 시도"})]})]})}),a.jsx("div",{className:"text-white/60",children:a.jsx("svg",{className:"h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})});if(c){const u=(h=e==null?void 0:e.data)==null?void 0:h.analysis,g=(m=e==null?void 0:e.data)==null?void 0:m.lifetimeFortune;let f={age:0,score:0},p=0;if(u){const b=e.data.analysis;f=b.bestYear,p=b.averageScore}else if(g){const b=e.data.lifetimeFortune;if(b&&b.length>0){const y=b.reduce((N,S)=>S.totalScore>N.totalScore?S:N,b[0]);f={age:y.age,score:y.totalScore},p=b.reduce((N,S)=>N+S.totalScore,0)/b.length}}return a.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all transform hover:scale-[1.02]",onClick:d,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:"📈"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xl font-bold",children:[o,"님의 100년 인생운세 차트"]}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:l}),a.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[a.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded",children:["최고운세: ",f.age,"세 (",f.score,"점)"]}),a.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded",children:["평균: ",p.toFixed(1),"점"]})]})]})]})}),a.jsx("div",{className:"text-white",children:a.jsx("svg",{className:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),a.jsx("div",{className:"mt-3 text-center",children:a.jsx("p",{className:"text-sm opacity-75",children:"클릭하여 상세 차트 보기 ↓"})})]})}return a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all transform hover:scale-[1.02]",onClick:d,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:"🔮"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xl font-bold",children:[o,"님의 100년 인생운세 차트"]}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:l}),a.jsx("p",{className:"text-xs opacity-75 mt-2",children:"클릭하여 운세 차트 확인하기"})]})]})}),a.jsx("div",{className:"text-white",children:a.jsx("svg",{className:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})})};ct.register(on,ln,vs,Qe,Yt,sc,Rs,Ps);function d8({data:t,currentAge:e=0,birthYear:s}){const n=new Date().getFullYear(),r=s||(e>0?n-e+1:n-35),i=j.useMemo(()=>{const c=t.map(f=>`${r+f.age-1}년`),d=t.map(f=>f.totalScore),h=t.map(f=>f.fortune),m=t.map(f=>f.willpower),u=t.map(f=>f.environment),g=t.map(f=>f.change);return{labels:c,datasets:[{type:"bar",label:"종합 운세",data:d,backgroundColor:f=>{var y;const p=f.dataIndex;return((y=t[p])==null?void 0:y.age)===e?"rgba(55, 65, 81, 0.8)":"rgba(156, 163, 175, 0.6)"},borderColor:f=>{var y;const p=f.dataIndex;return((y=t[p])==null?void 0:y.age)===e?"rgba(55, 65, 81, 1)":"rgba(107, 114, 128, 1)"},borderWidth:1,yAxisID:"y",order:2},{type:"line",label:"행운 (재물·명예)",data:h,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"의지 (추진력·실행)",data:m,borderColor:"#f97316",backgroundColor:"rgba(249, 115, 22, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"환경 (대인·지원)",data:u,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"변화 (기회·위기)",data:g,borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1}]}},[t,r,e]),o=j.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"100년 인생운세 차트",font:{size:18,weight:"bold"},padding:20},legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}},title:{padding:{top:35,bottom:10}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,padding:12,displayColors:!0,position:"nearest",yAlign:"bottom",callbacks:{title:c=>{const d=c[0].dataIndex,h=t[d];return`${r+h.age-1}년 (${h.age}세)`},afterLabel:c=>{const d=c.dataIndex,h=t[d];return c.dataset.label==="종합 운세"?[`대운: ${h.대운.천간}${h.대운.지지} (${h.대운.오행})`,`세운: ${h.세운.천간}${h.세운.지지} (${h.세운.오행})`]:[]}},external(c){const{chart:d,tooltip:h}=c,m=d.canvas;if(!h||!h.opacity)return;let u=m.parentNode.querySelector("div.chartjs-tooltip");if(u||(u=document.createElement("div"),u.className="chartjs-tooltip",u.style.cssText=`
              position: absolute;
              background: rgba(0, 0, 0, 0.9);
              color: white;
              padding: 12px 16px;
              border-radius: 8px;
              font-size: 13px;
              pointer-events: none;
              transition: all 0.1s ease;
              z-index: 1000;
              min-width: 200px;
              border: 1px solid rgba(255, 255, 255, 0.2);
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            `,m.parentNode.appendChild(u)),h.body){const _=h.title||[],w=h.body.map(M=>M.lines);let k='<div style="font-weight: bold; margin-bottom: 8px; font-size: 14px;">';_.forEach(M=>{k+=M}),k+="</div>",w.forEach((M,E)=>{const A=h.labelColors[E];if(A){const O=`background:${A.backgroundColor}; width: 12px; height: 12px; display: inline-block; margin-right: 8px; border-radius: 2px;`;k+=`<div style="margin: 4px 0;"><span style="${O}"></span>${M}</div>`}else k+=`<div style="margin: 4px 0; color: #cbd5e1; font-size: 12px;">${M}</div>`}),u.innerHTML=k}const g=d.canvas.getBoundingClientRect(),f=d.chartArea,p=u.offsetHeight;let b=g.left+window.pageXOffset+h.caretX;const y=u.offsetWidth;b+y>window.innerWidth&&(b=window.innerWidth-y-10);const v=f.bottom,S=g.height-v,C=g.top+window.pageYOffset+v+(S-p)/2;u.style.left=`${b}px`,u.style.top=`${C}px`,u.style.opacity="1"}}},scales:{x:{display:!0,title:{display:!0,text:"연도",font:{size:14}},ticks:{callback(c,d){var h;return d%10===0?`${r+((h=t[d])==null?void 0:h.age)-1}년`:""},font:{size:11}}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"운세 점수",font:{size:14}},min:0,max:100,ticks:{stepSize:20,font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.1)"}}}}),[t,r]),l=j.useMemo(()=>({id:"currentAgeIndicator",afterDraw:c=>{var p;if(!e||e<=0)return;const d=c.ctx,h=c.chartArea,m=c.getDatasetMeta(0),u=t.findIndex(b=>b.age===e);if(u===-1)return;const g=(p=m.data[u])==null?void 0:p.x;if(!g)return;d.save(),d.strokeStyle="#ef4444",d.lineWidth=3,d.setLineDash([5,5]),d.beginPath(),d.moveTo(g,h.top),d.lineTo(g,h.bottom),d.stroke(),d.fillStyle="#ef4444",d.font="bold 12px sans-serif",d.textAlign="center";const f=n;d.fillText(`현재 ${f}년 (${e}세)`,g,h.top-40),d.restore()}}),[e,t,r]);return a.jsx("div",{className:"w-full",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"100년 인생운세 차트"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전통 사주학의 대운(大運)과 세운(歲運)을 기반으로 한 100년간의 인생 운세를 시각화합니다."})]}),a.jsxs("div",{className:"mb-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"행운: 재물·명예·성공"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"의지: 추진력·실행력"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"환경: 대인관계·지원"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"변화: 기회·위기·변동"})]})]}),a.jsx("div",{className:"relative h-96 md:h-[500px] pt-8 pb-24",children:a.jsx(Jg,{type:"bar",data:i,options:o,plugins:[l]})}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"인생 주요 전환점"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"20-30세:"})," 기반 구축기"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"40-50세:"})," 성취 발전기"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"60-70세:"})," 완성 안정기"]})]})]})]})})}const ma={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},ga={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"};class h8{static generateUniversalLifeChart(e,s){const n=new Date(s.birthDate).getFullYear(),r=new Date().getFullYear(),i=r-n+1,o=$_(e,n),l=this.generateChartFromScores(o.yearlyScores,n,e),c=this.analyzeLifePeriods(l,n),d={calculationDate:new Date().toISOString(),version:"7.0.0",accuracy:Math.round(100-o.pattern.volatility*20)};return{personalInfo:s,timeline:{startYear:n,endYear:n+95,currentYear:r,currentAge:i,lifeProgress:Math.round(i/95*100)},chartData:l,lifePeriods:c,metadata:d}}static generateChartFromScores(e,s,n){const r={geunbon:[],woon:[],haeng:[],hyeong:[],byeon:[]},i=this.calculateDimensionFactors(n);for(let o=0;o<=95;o++){const l=s+o,c=e[o]||50;r.geunbon.push({age:o,value:c,year:l,intensity:Math.abs(c-50)/50});const d=Math.max(0,Math.min(100,c+Math.sin(o*i.woon)*8));r.woon.push({age:o,value:d,year:l,intensity:Math.abs(d-50)/50});const h=Math.max(0,Math.min(100,c+Math.sin(o*i.haeng)*10));r.haeng.push({age:o,value:h,year:l,intensity:Math.abs(h-50)/50});const m=Math.max(0,Math.min(100,c+Math.cos(o*i.hyeong)*7));r.hyeong.push({age:o,value:m,year:l,intensity:Math.abs(m-50)/50});const u=Math.max(0,Math.min(100,c+Math.sin(o*i.byeon)*12));r.byeon.push({age:o,value:u,year:l,intensity:Math.abs(u-50)/50})}return r}static calculateWuxingBalance(e){const s={목:0,화:0,토:0,금:0,수:0};s[ma[e.year.gan]]++,s[ma[e.month.gan]]++,s[ma[e.day.gan]]++,s[ma[e.time.gan]]++,s[ga[e.year.ji]]++,s[ga[e.month.ji]]++,s[ga[e.day.ji]]++,s[ga[e.time.ji]]++;const n=Object.values(s),r=Math.max(...n),i=Math.min(...n);return 100-(r-i)*15}static calculateDimensionFactors(e){const s=this.getSajuHash(e);return{woon:.15+s%10*.01,haeng:.2+s%7*.01,hyeong:.08+s%5*.01,byeon:.3+s%8*.01}}static getSajuHash(e){const s={갑:1,을:2,병:3,정:4,무:5,기:6,경:7,신:8,임:9,계:10},n={자:1,축:2,인:3,묘:4,진:5,사:6,오:7,미:8,신:9,유:10,술:11,해:12};return s[e.year.gan]*1e3+n[e.year.ji]*100+s[e.month.gan]*50+n[e.month.ji]*25+s[e.day.gan]*10+n[e.day.ji]*5+s[e.time.gan]*2+n[e.time.ji]}static generatePreciseChart_DEPRECATED(e,s,n){const r={geunbon:[],woon:[],haeng:[],hyeong:[],byeon:[]};for(let i=0;i<=95;i++){const l=Math.max(0,Math.min(100,50));r.geunbon.push({age:i,value:l,year:2e3+i,intensity:Math.abs(l-50)/50});const c=Math.max(0,Math.min(100,50+Math.sin(i*.15)*8));r.woon.push({age:i,value:c,year:2e3+i,intensity:Math.abs(c-50)/50});const d=Math.max(0,Math.min(100,50+Math.sin(i*.2)*10));r.haeng.push({age:i,value:d,year:2e3+i,intensity:Math.abs(d-50)/50});const h=Math.max(0,Math.min(100,50+Math.sin(i*.08)*5));r.hyeong.push({age:i,value:h,year:2e3+i,intensity:Math.abs(h-50)/50});const m=Math.max(0,Math.min(100,50+Math.cos(i*.3)*12));r.byeon.push({age:i,value:m,year:2e3+i,intensity:Math.abs(m-50)/50})}return r}static analyzeLifePeriods(e,s){const n=[];return[{phase:"childhood",start:0,end:12,desc:"성장과 기초 형성기"},{phase:"youth",start:13,end:22,desc:"학습과 탐색기"},{phase:"early_adult",start:23,end:35,desc:"도전과 성취기"},{phase:"middle_adult",start:36,end:50,desc:"안정과 발전기"},{phase:"late_adult",start:51,end:65,desc:"성숙과 지혜기"},{phase:"senior",start:66,end:80,desc:"여유와 전수기"},{phase:"elder",start:81,end:95,desc:"완성과 회고기"}].forEach(({phase:i,start:o,end:l,desc:c})=>{const d=e.geunbon.slice(o,Math.min(l+1,e.geunbon.length));if(d.length===0)return;const h=d.reduce((y,v)=>y+v.value,0)/d.length,m=d.filter(y=>Math.abs(y.value-50)>20).map(y=>y.age).slice(0,3);let u="stable";const g=d.slice(0,Math.floor(d.length/2)),f=d.slice(Math.floor(d.length/2)),p=g.reduce((y,v)=>y+v.value,0)/g.length||0,b=f.reduce((y,v)=>y+v.value,0)/f.length||0;b-p>5?u="ascending":p-b>5?u="descending":Math.abs(h-50)>15&&(u="turbulent"),n.push({startAge:o,endAge:l,phase:i,description:c,majorEvents:this.getMajorEvents(i),overallTrend:u,keyYears:m})}),n}static getMajorEvents(e){return{childhood:["성장기 특성 형성","기초 교육 시작","가족관계 형성"],youth:["학업 집중기","진로 탐색","자아 정체성 확립"],early_adult:["사회 진출","경력 시작","인간관계 확대"],middle_adult:["경력 안정기","가정 형성","사회적 성취"],late_adult:["전문성 정점","후진 양성","인생 성찰"],senior:["은퇴 준비","건강 관리","지혜 전수"],elder:["여생 정리","유산 전달","회고와 성찰"]}[e]||[]}}const u0=["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"],u8={갑:["병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축"],을:["무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축"],병:["경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축"],정:["임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축"],무:["갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해","갑자","을축"],기:["병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축"],경:["무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축"],신:["경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축"],임:["임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축"],계:["갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해","갑자","을축"]},m8={갑:["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해"],을:["병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해"],병:["무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해"],정:["경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해"],무:["임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"],기:["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해"],경:["병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해"],신:["무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해"],임:["경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해"],계:["임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"]};class Ix{static calculateYearPillar(e){let r=(e-1924)%60;r<0&&(r+=60);const i=u0[r];return{heavenly:i[0],earthly:i[1],combined:i}}static getSolarMonth(e,s,n){return s===1?n>=6?12:11:s===2?n>=4?1:12:s===3?n>=6?2:1:s===4?n>=5?3:2:s===5?n>=6?4:3:s===6?n>=6?5:4:s===7?n>=7?6:5:s===8?n>=8?7:6:s===9?n>=8?8:7:s===10?n>=8?9:8:s===11?n>=7?10:9:s===12?n>=7?11:10:s}static calculateMonthPillar(e,s,n){const i=this.calculateYearPillar(e).heavenly,o=this.getSolarMonth(e,s,n),l=o-1,c=u8[i];if(!c)return console.error("Invalid year stem:",i),{heavenly:"갑",earthly:"자",combined:"갑자"};const d=c[l];return d?{heavenly:d[0],earthly:d[1],combined:d}:(console.error("Invalid month index:",l),{heavenly:"갑",earthly:"자",combined:"갑자"})}static calculateDayPillar(e,s,n){const r=new Date(1971,10,17),o=new Date(e,s-1,n).getTime()-r.getTime();let c=(42+Math.floor(o/(1e3*60*60*24)))%60;c<0&&(c+=60);const d=u0[c];return{heavenly:d[0],earthly:d[1],combined:d}}static calculateHourPillar(e,s,n,r,i=0){const l=this.calculateDayPillar(e,s,n).heavenly;let c;const d=r+i/60;d>=23||d<1?c=0:d<3?c=1:d<5?c=2:d<7?c=3:d<9?c=4:d<11?c=5:d<13?c=6:d<15?c=7:d<17?c=8:d<19?c=9:d<21?c=10:c=11;const h=m8[l];if(!h)return console.error("Invalid day stem for hour calculation:",l),{heavenly:"갑",earthly:"자",combined:"갑자"};const m=h[c];return{heavenly:m[0],earthly:m[1],combined:m}}static calculateFourPillars(e){let{year:s,month:n,day:r,hour:i,minute:o=0}=e;if(e.isLunar)try{const l=e1(s,n,r,e.isLeapMonth||!1);s=l.getFullYear(),n=l.getMonth()+1,r=l.getDate()}catch(l){console.error("음력 변환 오류:",l)}return{year:this.calculateYearPillar(s),month:this.calculateMonthPillar(s,n,r),day:this.calculateDayPillar(s,n,r),hour:this.calculateHourPillar(s,n,r,i,o)}}static testReferenceCases(){const e={year:1971,month:11,day:17,hour:4,minute:0,isLunar:!1};this.calculateFourPillars(e);const s={year:1976,month:9,day:16,hour:9,minute:40,isLunar:!1};this.calculateFourPillars(s)}}function g8(t){const e=[];try{const s={year:{gan:t.year.gan,ji:t.year.ji,combined:t.year.gan+t.year.ji},month:{gan:t.month.gan,ji:t.month.ji,combined:t.month.gan+t.month.ji},day:{gan:t.day.gan,ji:t.day.ji,combined:t.day.gan+t.day.ji},time:{gan:t.time.gan,ji:t.time.ji,combined:t.time.gan+t.time.ji}};return fa(s.year)||e.push("년주 데이터 불완전"),fa(s.month)||e.push("월주 데이터 불완전"),fa(s.day)||e.push("일주 데이터 불완전"),fa(s.time)||e.push("시주 데이터 불완전"),{standardSaju:s,isValid:e.length===0,source:"backend",warnings:e}}catch(s){throw console.error("Backend 사주 변환 실패:",s),new Error(`Backend 사주 데이터 변환 실패: ${s}`)}}function f8(t){const e=[];try{const s={year:{gan:t.year.heavenly,ji:t.year.earthly,combined:t.year.combined},month:{gan:t.month.heavenly,ji:t.month.earthly,combined:t.month.combined},day:{gan:t.day.heavenly,ji:t.day.earthly,combined:t.day.combined},time:{gan:t.hour.heavenly,ji:t.hour.earthly,combined:t.hour.combined}};return s.year.combined!==s.year.gan+s.year.ji&&e.push("년주 조합 불일치"),s.month.combined!==s.month.gan+s.month.ji&&e.push("월주 조합 불일치"),s.day.combined!==s.day.gan+s.day.ji&&e.push("일주 조합 불일치"),s.time.combined!==s.time.gan+s.time.ji&&e.push("시주 조합 불일치"),{standardSaju:s,isValid:e.length===0,source:"frontend",warnings:e}}catch(s){throw console.error("Frontend 사주 변환 실패:",s),new Error(`Frontend 사주 데이터 변환 실패: ${s}`)}}function x8(t,e){const s={year:t.year.combined!==e.year.combined,month:t.month.combined!==e.month.combined,day:t.day.combined!==e.day.combined,time:t.time.combined!==e.time.combined},n=4,r=Object.values(s).filter(l=>!l).length,i=Math.round(r/n*100);let o;return i>=75?o="use_backend":i>=50?o="use_frontend":o="recalculate",{isMatch:i===100,differences:s,confidence:i,recommendation:o}}function p8(t,e){let s=null,n=null;if(t)try{const r=g8(t);r.isValid&&(s=r.standardSaju)}catch(r){console.error("❌ Backend 사주 변환 실패:",r)}if(e)try{const r=f8(e);r.isValid&&(n=r.standardSaju)}catch(r){console.error("❌ Frontend 사주 변환 실패:",r)}if(s&&n){const r=x8(s,n);if(r.isMatch)return{finalSaju:s,resolution:"사주 완전 일치 - Backend 데이터 사용",confidence:100};switch(r.recommendation){case"use_backend":return{finalSaju:s,resolution:`Backend 우선 사용 (일치도: ${r.confidence}%)`,confidence:r.confidence};case"use_frontend":return{finalSaju:n,resolution:`Frontend 재계산 사용 (일치도: ${r.confidence}%)`,confidence:r.confidence};default:return{finalSaju:s,resolution:`심각한 불일치로 Backend 강제 사용 (일치도: ${r.confidence}%)`,confidence:r.confidence}}}if(s)return{finalSaju:s,resolution:"Backend 데이터만 사용",confidence:80};if(n)return{finalSaju:n,resolution:"Frontend 재계산 데이터만 사용",confidence:60};throw new Error("사주 데이터가 없거나 모두 유효하지 않음")}function fa(t){const e=["갑","을","병","정","무","기","경","신","임","계"],s=["자","축","인","묘","진","사","오","미","신","유","술","해"];return e.includes(t.gan)&&s.includes(t.ji)&&t.combined===t.gan+t.ji}function b8(t){return{year:{gan:t.year.gan,ji:t.year.ji},month:{gan:t.month.gan,ji:t.month.ji},day:{gan:t.day.gan,ji:t.day.ji},time:{gan:t.time.gan,ji:t.time.ji}}}const jo=["갑","을","병","정","무","기","경","신","임","계"],ko=["자","축","인","묘","진","사","오","미","신","유","술","해"],In={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},y8={인:"목",묘:"목",사:"화",오:"화",진:"토",술:"토",축:"토",미:"토",신:"금",유:"금",자:"수",해:"수"},wo={목:"화",화:"토",토:"금",금:"수",수:"목"},No={목:"토",화:"금",토:"수",금:"목",수:"화"},m0={봄:{목:100,화:50,토:25,금:10,수:75},여름:{목:25,화:100,토:75,금:10,수:10},가을:{목:10,화:10,토:25,금:100,수:50},겨울:{목:50,화:10,토:10,금:75,수:100}},v8={인:"봄",묘:"봄",진:"봄",사:"여름",오:"여름",미:"여름",신:"가을",유:"가을",술:"가을",자:"겨울",축:"겨울",해:"겨울"},g0={갑:"기",기:"갑",을:"경",경:"을",병:"신",신:"병",정:"임",임:"정",무:"계",계:"무"},f0={자:"오",오:"자",축:"미",미:"축",인:"신",신:"인",묘:"유",유:"묘",진:"술",술:"진",사:"해",해:"사"},j8={자:"축",축:"자",인:"해",해:"인",묘:"술",술:"묘",진:"유",유:"진",사:"신",신:"사",오:"미",미:"오"};class Fx{static calculateAuthenticLifeChart(e,s){this.DEBUG;const n=this.analyzeGyeokGuk(e),r=this.selectYongSin(n),i=this.calculateDaeUn(e,n),o=this.calculateYearlyScores(e,n,r,i,s),l=this.calculateStatistics(o,r);return this.DEBUG,{개인정보:{사주:this.formatSaju(e),격국:n,용신:r},대운목록:i,연도별점수:o,통계:l}}static analyzeGyeokGuk(e){const s=e.day.gan,n=In[s],r=e.month.ji,i=v8[r],o={목:0,화:0,토:0,금:0,수:0};[e.year.gan,e.month.gan,e.day.gan,e.time.gan].forEach(u=>{o[In[u]]+=20}),[e.year.ji,e.month.ji,e.day.ji,e.time.ji].forEach(u=>{o[y8[u]]+=30});const c=m0[i][n];let d;const h=o[n]+c;h>=120?d="강":h<=60?d="약":d="중";let m="일반격";return d==="강"?m="신강격":d==="약"&&(m="신약격"),this.DEBUG,{일간:s,일간오행:n,일간강약:d,월령:r,계절:i,월령지원:c,오행분포:o,격국유형:m}}static selectYongSin(e){const s={목:0,화:0,토:0,금:0,수:0};if(e.일간강약==="약")s[e.일간오행]+=100,s[this.getGeneratingElement(e.일간오행)]+=90;else if(e.일간강약==="강")s[wo[e.일간오행]]+=100,s[No[e.일간오행]]+=90,s[this.getConflictingElement(e.일간오행)]+=80;else{const d=Object.values(e.오행분포).reduce((h,m)=>h+m)/5;Object.entries(e.오행분포).forEach(([h,m])=>{m<d&&(s[h]+=d-m)})}const n=m0[e.계절];Object.entries(n).forEach(([d,h])=>{h<30&&(s[d]+=50)});const r=Object.entries(s).sort(([,d],[,h])=>h-d).map(([d])=>d),i=r.slice(0,2),o=r.slice(2,4),l=r.slice(4);let c="";return e.일간강약==="약"?c="신약으로 인한 부족 오행 보충 필요":e.일간강약==="강"?c="신강으로 인한 과잉 오행 소모 필요":c="중화로 인한 균형 오행 보완 필요",this.DEBUG,{용신:i,기신:o,희신:l,기신원인:c,용신점수:s}}static calculateDaeUn(e,s){const n=[],r=e.day.gan,i=e.year.gan,o=this.determineDaeunDirection(r,i),l=jo.indexOf(e.month.gan),c=ko.indexOf(e.month.ji);for(let d=0;d<10;d++){let h,m;o==="순행"?(h=(l+d+1)%10,m=(c+d+1)%12):(h=(l-d-1+10)%10,m=(c-d-1+12)%12);const u=jo[h],g=ko[m],f=In[u];let p=50;u===r?p+=15:g0[r]===u?p+=25:wo[f]===s.일간오행?p+=20:No[f]===s.일간오행&&(p-=15),f0[e.day.ji]===g?p-=20:j8[e.day.ji]===g&&(p+=15);const b=this.analyzeDaeunFeatures(d,u,g,o);n.push({cycle:d,천간:u,지지:g,오행:f,순역행:o,점수:Math.max(10,Math.min(90,p)),특징:b})}return this.DEBUG&&n.slice(0,3).forEach(d=>{}),n}static calculateYearlyScores(e,s,n,r,i){const o=[],l=this.get격국별기본점수(s.격국유형,s.일간),c=this.get일간보정값(s.일간);for(let d=0;d<=95;d++){const h=i+d,m=Math.floor(d/10),u=r[m]||r[r.length-1],g=(h-4)%10,f=(h-4)%12,p=jo[g],b=ko[f],y=In[p];let v=l+c;p===e.day.gan?v+=10:g0[e.day.gan]===p&&(v+=15);let N=0;const S=this.get나이별용신가중치(d);n.용신.includes(y)?N+=35*S:n.희신.includes(y)?N+=18*S:n.기신.includes(y)&&(N-=30*S);let C=0;u.천간===p&&(C+=20),u.지지===b&&(C+=15),f0[u.지지]===b&&(C-=25);const _=u.점수,w=Math.max(10,Math.min(90,_*.4+(v+N)*.4+C*.2)),k={년도:h,나이:d,천간:p,지지:b,오행:y,점수:v,대운상호작용:C};o.push({나이:d,년도:h,총점:Math.round(w),대운점수:_,세운점수:v,용신효과:N,상세:k})}return o}static calculateStatistics(e,s){const n=e.map(m=>m.총점),r=Math.max(...n),i=Math.min(...n),o=n.reduce((m,u)=>m+u)/n.length,l=e.find(m=>m.총점===r),c=e.find(m=>m.총점===i),h=e.filter(m=>m.용신효과>20).length/e.length*100;return{최고점년도:{나이:l.나이,점수:r},최저점년도:{나이:c.나이,점수:i},평균점수:Math.round(o),용신부합도:Math.round(h)}}static get격국별기본점수(e,s){return{신강격:70,신약격:50,종격:60,특수격:65,기타:55}[e]||55}static get일간보정값(e){return{갑:5,을:3,병:7,정:4,무:6,기:2,경:8,신:3,임:4,계:5}[e]||0}static get나이별용신가중치(e){return e>=20&&e<=40?1.5:e>=40&&e<=60?1.3:e>=60?1.1:1}static getGeneratingElement(e){return Object.fromEntries(Object.entries(wo).map(([n,r])=>[r,n]))[e]}static getConflictingElement(e){return Object.fromEntries(Object.entries(No).map(([n,r])=>[r,n]))[e]}static determineDaeunDirection(e,s){return["갑","병","무","경","임"].includes(s)?"순행":"역행"}static analyzeDaeunFeatures(e,s,n,r){const i=[];e===0?i.push("기초형성기"):e===1?i.push("성장발전기"):e===2?i.push("도전기회기"):e===3?i.push("안정확립기"):e===4?i.push("성숙전성기"):e===5?i.push("지혜전수기"):i.push("완성회고기");const o=In[s];return i.push(`${o}기운`),i.join(", ")}static formatSaju(e){return`${e.year.gan}${e.year.ji} ${e.month.gan}${e.month.ji} ${e.day.gan}${e.day.ji} ${e.time.gan}${e.time.ji}`}static createParkJunSooTestCase(){return{year:{gan:"신",ji:"해"},month:{gan:"기",ji:"해"},day:{gan:"병",ji:"오"},time:{gan:"경",ji:"인"}}}static createJeongBiJeTestCase(){return{year:{gan:"병",ji:"진"},month:{gan:"정",ji:"유"},day:{gan:"신",ji:"미"},time:{gan:"계",ji:"사"}}}static runTestCases(){const e=this.createParkJunSooTestCase();this.calculateAuthenticLifeChart(e,1971);const s=this.createJeongBiJeTestCase();this.calculateAuthenticLifeChart(s,1976)}}$(Fx,"DEBUG",!0);async function k8(t){try{return w8(t)}catch(e){throw console.error("❌ 100년 인생운세 API 오류:",e),e}}function w8(t){return t.useAuthenticCalculator!==!1?N8(t):S8(t)}function N8(t){const e=Ix.calculateFourPillars({year:t.year,month:t.month,day:t.day,hour:t.hour,minute:0,isLunar:t.isLunar||!1,isLeapMonth:!1}),s={year:{gan:e.year.heavenly,ji:e.year.earthly},month:{gan:e.month.heavenly,ji:e.month.earthly},day:{gan:e.day.heavenly,ji:e.day.earthly},time:{gan:e.hour.heavenly,ji:e.hour.earthly}},n=Fx.calculateAuthenticLifeChart(s,t.year),r=n.연도별점수.map(c=>{var d,h,m;return{year:c.년도,age:c.나이,totalScore:c.총점,fortune:Math.min(100,Math.max(0,c.대운점수*.6+c.세운점수*.4+Math.max(0,c.용신효과*.3)+10)),willpower:Math.min(100,Math.max(0,c.대운점수*.8+20)),environment:Math.min(100,Math.max(0,c.세운점수*.8+20)),change:Math.min(100,Math.max(0,Math.abs(c.용신효과)*.6+30)),대운:{천간:((d=n.대운목록[Math.floor(c.나이/10)])==null?void 0:d.천간)||"갑",지지:((h=n.대운목록[Math.floor(c.나이/10)])==null?void 0:h.지지)||"자",오행:((m=n.대운목록[Math.floor(c.나이/10)])==null?void 0:m.오행)||"목",score:c.대운점수},세운:{천간:c.상세.천간,지지:c.상세.지지,오행:c.상세.오행,score:c.세운점수}}}),i=r.reduce((c,d)=>c.totalScore>d.totalScore?c:d),o=r.reduce((c,d)=>c.totalScore<d.totalScore?c:d),l=n.통계.평균점수;return{success:!0,data:{lifetimeFortune:r,analysis:{keyYears:r.filter(c=>Math.abs(c.totalScore-l)>15).slice(0,5),bestYear:{year:i.year,age:i.age,score:i.totalScore},worstYear:{year:o.year,age:o.age,score:o.totalScore},averageScore:l}},timestamp:new Date().toISOString()}}function S8(t){var g,f,p,b,y;t.sajuData;const e=Ix.calculateFourPillars({year:t.year,month:t.month,day:t.day,hour:t.hour,minute:0,isLunar:t.isLunar||!1,isLeapMonth:!1});let s;try{s=p8(t.sajuData,e),s.finalSaju}catch(v){console.error("❌ 사주 데이터 해결 실패:",v),s={finalSaju:{year:{gan:e.year.heavenly,ji:e.year.earthly,combined:e.year.combined},month:{gan:e.month.heavenly,ji:e.month.earthly,combined:e.month.combined},day:{gan:e.day.heavenly,ji:e.day.earthly,combined:e.day.combined},time:{gan:e.hour.heavenly,ji:e.hour.earthly,combined:e.hour.combined}},resolution:"폴백: 재계산 사주 사용",confidence:50}}const n=b8(s.finalSaju),r=`${t.year}-${String(t.month).padStart(2,"0")}-${String(t.day).padStart(2,"0")}`,i=`${String(t.hour).padStart(2,"0")}:00`,o=`${e.year.combined} ${e.month.combined} ${e.day.combined} ${e.hour.combined}`,l={name:"사용자",birthDate:r,birthTime:i,sajuText:o,gender:t.gender||"male",lunarSolar:t.isLunar?"lunar":"solar"},c=h8.generateUniversalLifeChart(n,l),d=[];for(let v=0;v<=95;v++){const N=t.year+v,S=((g=c.chartData.geunbon[v])==null?void 0:g.value)||50,C=((f=c.chartData.woon[v])==null?void 0:f.value)||50,_=((p=c.chartData.haeng[v])==null?void 0:p.value)||50,w=((b=c.chartData.hyeong[v])==null?void 0:b.value)||50,k=((y=c.chartData.byeon[v])==null?void 0:y.value)||50,M=Math.round((S+C+_+w+k)/5);d.push({year:N,age:v,totalScore:M,fortune:Math.min(100,Math.max(0,C*.7+S*.3)),willpower:Math.min(100,Math.max(0,_*.8+C*.2)),environment:Math.min(100,Math.max(0,w*.7+S*.3)),change:Math.min(100,Math.max(0,k*.9+10)),대운:{천간:["갑","을","병","정","무","기","경","신","임","계"][Math.floor(v/10)%10],지지:["자","축","인","묘","진","사","오","미","신","유","술","해"][Math.floor(v/10)%12],오행:["목","화","토","금","수"][Math.floor(v/10)%5],score:Math.round((C+w)/2)},세운:{천간:["갑","을","병","정","무","기","경","신","임","계"][N%10],지지:["자","축","인","묘","진","사","오","미","신","유","술","해"][N%12],오행:["목","화","토","금","수"][N%5],score:Math.round(k)}})}const h=d.reduce((v,N)=>v.totalScore>N.totalScore?v:N),m=d.reduce((v,N)=>v.totalScore<N.totalScore?v:N),u=d.reduce((v,N)=>v+N.totalScore,0)/d.length;return{success:!0,data:{lifetimeFortune:d,analysis:{keyYears:d.filter(v=>Math.abs(v.totalScore-u)>20).slice(0,5),bestYear:{year:h.year,age:h.age,score:h.totalScore},worstYear:{year:m.year,age:m.age,score:m.totalScore},averageScore:Math.round(u)}},timestamp:new Date().toISOString()}}const st={year:{gan:"신",ji:"해"},month:{gan:"기",ji:"해"},day:{gan:"병",ji:"오"},time:{gan:"경",ji:"인"}},nt={year:{gan:"병",ji:"진"},month:{gan:"정",ji:"유"},day:{gan:"신",ji:"미"},time:{gan:"계",ji:"사"}},kl={갑:1,을:2,병:3,정:4,무:5,기:6,경:7,신:8,임:9,계:10},wl={자:1,축:2,인:3,묘:4,진:5,사:6,오:7,미:8,신:9,유:10,술:11,해:12},C8={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},_8={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"};function x0(t){const e=kl,s=wl,n=((e[t.year.gan]-1)*12+(s[t.year.ji]-1))%60,r=((e[t.month.gan]-1)*12+(s[t.month.ji]-1))%60,i=((e[t.day.gan]-1)*12+(s[t.day.ji]-1))%60,o=((e[t.time.gan]-1)*12+(s[t.time.ji]-1))%60,l={목:0,화:0,토:0,금:0,수:0};[t.year.gan,t.month.gan,t.day.gan,t.time.gan].forEach(g=>{l[C8[g]]++}),[t.year.ji,t.month.ji,t.day.ji,t.time.ji].forEach(g=>{l[_8[g]]++});const c=Object.values(l),d=Math.max(...c),h=Math.min(...c),m=(d-h)*100;return n*1e3+r*500+i*800+o*300+m*20}function M8(){const t=x0(st),e=x0(nt);return((kl[st.year.gan]-1)*12+(wl[st.year.ji]-1))%60,[st.year.gan,st.month.gan,st.day.gan,st.time.gan].forEach(s=>{}),[st.year.ji,st.month.ji,st.day.ji,st.time.ji].forEach(s=>{}),((kl[nt.year.gan]-1)*12+(wl[nt.year.ji]-1))%60,[nt.year.gan,nt.month.gan,nt.day.gan,nt.time.gan].forEach(s=>{}),[nt.year.ji,nt.month.ji,nt.day.ji,nt.time.ji].forEach(s=>{}),{parkUniqueValue:t,jungUniqueValue:e}}typeof window<"u"&&(window.testUniqueValues=M8);function E8(){var E,A,O,R,T;const[t,e]=j.useState("jubon"),[s,n]=j.useState(""),[r,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState(!1),[h,m]=j.useState(!1),[u,g]=j.useState(null),[f,p]=j.useState(!1),[b,y]=j.useState(null),[v,N]=j.useState(Ox),S=D=>{const L=new Date(D),F=new Date;let I=F.getFullYear()-L.getFullYear();const U=F.getMonth()-L.getMonth();return(U<0||U===0&&F.getDate()<L.getDate())&&I--,I+1},C=v.find(D=>D.id===t);j.useEffect(()=>{C&&C.subcategories.length>0&&n(C.subcategories[0].id)},[t,C]),j.useEffect(()=>{r!=null&&r.id?w(r.id):(l(null),vo(null))},[r]),j.useEffect(()=>{(async()=>{if(!c&&!h){m(!0);try{console.log("[카테고리 로드] 정적 데이터 사용 (백엔드 API 비활성화)");const L=e8();N([...L]),d(!0)}catch(L){console.error("카테고리 로드 실패:",L)}finally{m(!1)}}})()},[c,h]);const _=async D=>{try{p(!0),y(null),g(null);const L=i8(D),F=await k8(L);g(F)}catch(L){y(L.message||"인생차트 로드 실패"),console.error("❌ 인생차트 로드 실패:",L)}finally{p(!1)}},w=async D=>{try{let F=(await fj(D)).data.saju_data;if(typeof F=="string")try{F=JSON.parse(F)}catch(I){console.error("[사주 데이터 파싱 실패]",I),F=null}l(F),vo(F)}catch(L){console.error("[에러] 고객 사주 데이터 로딩 실패:",L),vo(null)}},k=j.useMemo(()=>{if(!C||!s)return null;const D=C.subcategories.find(L=>L.id===s);return D?{categoryId:t,subcategoryId:s,title:`${C.name} - ${D.name}`,items:D.items,chartData:D.items.map(L=>L.baseScore),maxValue:100}:null},[t,s,C]),M=r?`${r.birth_date} ${r.birth_time}`:"고객을 선택해주세요";return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"🔮 통합 사주 레이더 분석"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"주문차트 기반 9개 대항목 상세 분석 시스템"}),a.jsx("div",{className:"mt-2 text-sm text-purple-600 dark:text-purple-400",children:"기존 6대/17대/7대 성향 차트가 통합된 새로운 분석 시스템"})]}),a.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[a.jsx(jl,{onSelect:i,selectedCustomer:r}),r&&o&&a.jsx("div",{className:"mt-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:a.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:[a.jsx("div",{className:"font-semibold mb-1",children:"사주 팔자:"}),a.jsx("div",{children:o.fullSaju}),a.jsxs("div",{className:"mt-2 grid grid-cols-5 gap-2 text-xs",children:[a.jsxs("div",{children:["목: ",(E=o.ohHaengBalance)==null?void 0:E.목,"%"]}),a.jsxs("div",{children:["화: ",(A=o.ohHaengBalance)==null?void 0:A.화,"%"]}),a.jsxs("div",{children:["토: ",(O=o.ohHaengBalance)==null?void 0:O.토,"%"]}),a.jsxs("div",{children:["금: ",(R=o.ohHaengBalance)==null?void 0:R.금,"%"]}),a.jsxs("div",{children:["수: ",(T=o.ohHaengBalance)==null?void 0:T.수,"%"]})]})]})})]}),r&&a.jsx("div",{className:"mb-6",children:a.jsx(c8,{customer:r,lifetimeFortune:u,loading:f,error:b,onLoadChart:()=>_(r),onScrollToChart:()=>{var D;return(D=document.getElementById("hundred-year-chart"))==null?void 0:D.scrollIntoView({behavior:"smooth"})}})}),u&&r&&a.jsx("div",{id:"hundred-year-chart",className:"mb-8",children:a.jsx(d8,{data:u.data.lifetimeFortune,currentAge:S(r.birth_date),birthYear:new Date(r.birth_date).getFullYear()})}),h&&a.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full"}),a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"🔮 주능/주흉 카테고리 데이터를 백엔드에서 가져오는 중..."})]})}),a.jsx(t8,{categories:v,selectedCategory:t,onCategoryChange:e}),C&&a.jsx("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"text-4xl",children:C.icon}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.name}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:C.description}),a.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 mt-1",children:[C.subcategories.length,"개 중항목 • 총 ",C.subcategories.reduce((D,L)=>D+L.items.length,0),"개 세부항목"]})]})]})}),C&&a.jsx(s8,{subcategories:C.subcategories,selectedSubcategory:s,onSubcategoryChange:n}),k&&a.jsx("div",{className:"mb-8",children:a.jsx(r8,{data:k,birthDate:M,sajuData:o})}),a.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm",children:[a.jsx("p",{children:"✨ 이 분석은 전통 사주학과 현대 통계학을 결합한 해석입니다."}),a.jsx("p",{className:"mt-1",children:"💡 시간대별 운세 변화는 참고용이며, 개인의 노력과 환경에 따라 달라질 수 있습니다."})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:"9"}),a.jsx("div",{className:"text-sm",children:"대항목"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:v.reduce((D,L)=>D+L.subcategories.length,0)}),a.jsx("div",{className:"text-sm",children:"중항목"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:v.reduce((D,L)=>D+L.subcategories.reduce((F,I)=>F+I.items.length,0),0)}),a.jsx("div",{className:"text-sm",children:"세부항목"})]})]})]})})}ct.register(...zS);const Ic=j.createContext(void 0);function T8({children:t,defaultTheme:e="light",storageKey:s="sajuapp-theme"}){const[n,r]=j.useState(()=>{if(typeof window<"u"){const o=localStorage.getItem(s);if(o==="light"||o==="dark")return o;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return e});j.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),o.classList.add(n),localStorage.setItem(s,n)},[n,s]),j.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),l=c=>{localStorage.getItem(s)||r(c.matches?"dark":"light")};return o.addEventListener("change",l),()=>o.removeEventListener("change",l)},[s]);const i={theme:n,setTheme:o=>{r(o)},toggleTheme:()=>{r(o=>o==="light"?"dark":"light")}};return a.jsx(Ic.Provider,{value:i,children:t})}const Bx=()=>{const t=j.useContext(Ic);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},A8=({data:t})=>{const e=j.useRef(null),s=j.useRef(null),n=j.useContext(Ic),r=(n==null?void 0:n.theme)==="dark";return j.useEffect(()=>{if(!e.current||!t)return;s.current&&s.current.destroy();const i=e.current.getContext("2d");if(!i)return;const o=t.categories.map(m=>m.name),l=t.categories.map(m=>m.score),c=t.categories.map(()=>100),d=r?"rgba(229, 231, 235, 1)":"rgba(31, 41, 55, 1)",h=r?"rgba(107, 114, 128, 0.3)":"rgba(0, 0, 0, 0.1)";return s.current=new ct(i,{type:"radar",data:{labels:o,datasets:[{label:`${t.person1Name} ♥ ${t.person2Name}`,data:l,backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgba(147, 51, 234, 1)",borderWidth:2,pointBackgroundColor:"rgba(147, 51, 234, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(147, 51, 234, 1)",pointRadius:4,pointHoverRadius:6},{label:"이상적 궁합",data:c,backgroundColor:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.3)",borderWidth:1,borderDash:[5,5],pointRadius:0,pointHoverRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{font:{size:12},padding:20,usePointStyle:!0,color:d}},tooltip:{callbacks:{label(m){const u=m.dataset.label||"",g=m.parsed.r||m.parsed.y||0;return`${u}: ${Math.round(g)}점`}}}},scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,font:{size:10},color:d,callback(m){return`${m}점`}},pointLabels:{font:{size:13,weight:"bold"},color:d,callback(m,u){const g=l[u];return`${m}
(${Math.round(g)}점)`}},grid:{color:h}}}}}),()=>{s.current&&s.current.destroy()}},[t,r,n]),a.jsx("div",{className:"w-full h-[400px] p-4",children:a.jsx("canvas",{ref:e})})},D8=({relationshipAnalysis:t,practicalAnalysis:e,depthAnalysis:s,specialAnalysis:n})=>{const[r,i]=j.useState("overview");if(!t||!e||!s||!n)return a.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"궁합 분석 결과가 없습니다. 먼저 두 사람을 선택하고 분석하기를 클릭해주세요."});const o=u=>u>=85?"text-green-600 dark:text-green-400":u>=70?"text-blue-600 dark:text-blue-400":u>=50?"text-yellow-600 dark:text-yellow-400":u>=30?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400",l=u=>{const g={매우좋음:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",좋음:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",보통:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",주의:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",위험:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g[u]}`,children:u})},c=[{key:"firstImpression",label:"첫인상 궁합",icon:"👋"},{key:"communication",label:"대화소통 궁합",icon:"💬"},{key:"valueSystem",label:"가치관 궁합",icon:"💎"},{key:"lifePattern",label:"생활패턴 궁합",icon:"🌅"},{key:"conflictResolution",label:"갈등해결 궁합",icon:"🤝"},{key:"emotional",label:"정서적 궁합",icon:"❤️"},{key:"trust",label:"신뢰도 궁합",icon:"🛡️"}],d=[{key:"economic",label:"경제관념 궁합",icon:"💰"},{key:"career",label:"직업운 궁합",icon:"💼"},{key:"residence",label:"주거환경 궁합",icon:"🏠"},{key:"children",label:"자녀운 궁합",icon:"👶"},{key:"inLaw",label:"시댁/처가 궁합",icon:"👨‍👩‍👧‍👦"}],h=[{key:"sexual",label:"성적 궁합",icon:"🔥"},{key:"spiritual",label:"정신적 궁합",icon:"🧘"},{key:"hobby",label:"취미 궁합",icon:"🎯"},{key:"retirement",label:"노후 궁합",icon:"🌅"}],m=[{key:"noblePerson",label:"귀인운 궁합",icon:"⭐"},{key:"peachBlossom",label:"도화운 궁합",icon:"🌸"},{key:"emptiness",label:"공망 궁합",icon:"🌀"},{key:"sinsal",label:"신살 궁합",icon:"🔮"}];return a.jsxs("div",{className:"mt-8",children:[a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>i("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="overview"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"종합 분석"}),a.jsx("button",{onClick:()=>i("relationship"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="relationship"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"관계성 분석 (7개 항목)"}),a.jsx("button",{onClick:()=>i("practical"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="practical"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"현실적 분석 (5개 항목)"}),a.jsx("button",{onClick:()=>i("depth"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="depth"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"심층 분석 (4개 항목)"}),a.jsx("button",{onClick:()=>i("special"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="special"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"특수 분석 (4개 항목)"})]})}),a.jsxs("div",{className:"mt-6",children:[r==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"관계성 종합 분석"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-4xl font-bold ${o(t.averageScore)}`,children:[t.averageScore,"점"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:t.summary})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"💕"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"현실적 종합 분석"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-4xl font-bold ${o(e.averageScore)}`,children:[e.averageScore,"점"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:e.summary})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"💍"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"심층 종합 분석"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-4xl font-bold ${o(s.averageScore)}`,children:[s.averageScore,"점"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:s.summary})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"🌊"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"특수 종합 분석"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-4xl font-bold ${o(n.averageScore)}`,children:[n.averageScore,"점"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:n.summary})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"✨"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300",children:"관계성 분석"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:c.map(u=>{const g=t[u.key];return!g||typeof g.score!="number"?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xl",children:u.icon}),l(g.level)]}),a.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:u.label}),a.jsxs("div",{className:`text-xl font-bold mt-1 ${o(g.score)}`,children:[g.score,"점"]})]},u.key)})}),a.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"현실적 분석"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:d.map(u=>{const g=e[u.key];return!g||typeof g.score!="number"?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xl",children:u.icon}),l(g.level)]}),a.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:u.label}),a.jsxs("div",{className:`text-xl font-bold mt-1 ${o(g.score)}`,children:[g.score,"점"]})]},u.key)})}),a.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"심층 분석"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:h.map(u=>{const g=s[u.key];return!g||typeof g.score!="number"?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xl",children:u.icon}),l(g.level)]}),a.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:u.label}),a.jsxs("div",{className:`text-xl font-bold mt-1 ${o(g.score)}`,children:[g.score,"점"]})]},u.key)})}),a.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"특수 분석"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:m.map(u=>{const g=n[u.key];return!g||typeof g.score!="number"?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xl",children:u.icon}),l(g.level)]}),a.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:u.label}),a.jsxs("div",{className:`text-xl font-bold mt-1 ${o(g.score)}`,children:[g.score,"점"]})]},u.key)})})]})]}),r==="relationship"&&a.jsx("div",{className:"space-y-6",children:c.map(u=>{const g=t[u.key];return!g||typeof g.score!="number"?null:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:u.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u.label})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[l(g.level),a.jsxs("span",{className:`text-2xl font-bold ${o(g.score)}`,children:[g.score,"점"]})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.description}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.score>=85?"bg-green-500":g.score>=70?"bg-blue-500":g.score>=50?"bg-yellow-500":g.score>=30?"bg-orange-500":"bg-red-500"}`,style:{width:`${g.score}%`}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.factors.positive.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.positive.map((f,p)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",f]},p))})]}),g.factors.negative.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.negative.map((f,p)=>a.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",f]},p))})]})]})]})},u.key)})}),r==="practical"&&a.jsx("div",{className:"space-y-6",children:d.map(u=>{const g=e[u.key];return!g||typeof g.score!="number"?null:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:u.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u.label})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[l(g.level),a.jsxs("span",{className:`text-2xl font-bold ${o(g.score)}`,children:[g.score,"점"]})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.description}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.score>=85?"bg-green-500":g.score>=70?"bg-blue-500":g.score>=50?"bg-yellow-500":g.score>=30?"bg-orange-500":"bg-red-500"}`,style:{width:`${g.score}%`}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.factors.positive.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.positive.map((f,p)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",f]},p))})]}),g.factors.negative.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.negative.map((f,p)=>a.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",f]},p))})]})]})]})},u.key)})}),r==="depth"&&a.jsx("div",{className:"space-y-6",children:h.map(u=>{const g=s[u.key];return!g||typeof g.score!="number"?null:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:u.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u.label})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[l(g.level),a.jsxs("span",{className:`text-2xl font-bold ${o(g.score)}`,children:[g.score,"점"]})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.description}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.score>=85?"bg-green-500":g.score>=70?"bg-blue-500":g.score>=50?"bg-yellow-500":g.score>=30?"bg-orange-500":"bg-red-500"}`,style:{width:`${g.score}%`}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.factors.positive.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.positive.map((f,p)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",f]},p))})]}),g.factors.negative.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.negative.map((f,p)=>a.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",f]},p))})]})]})]})},u.key)})}),r==="special"&&a.jsx("div",{className:"space-y-6",children:m.map(u=>{const g=n[u.key];return!g||typeof g.score!="number"?null:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:u.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u.label})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[l(g.level),a.jsxs("span",{className:`text-2xl font-bold ${o(g.score)}`,children:[g.score,"점"]})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.description}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.score>=85?"bg-green-500":g.score>=70?"bg-blue-500":g.score>=50?"bg-yellow-500":g.score>=30?"bg-orange-500":"bg-red-500"}`,style:{width:`${g.score}%`}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.factors.positive.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.positive.map((f,p)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",f]},p))})]}),g.factors.negative.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.negative.map((f,p)=>a.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",f]},p))})]})]})]})},u.key)})})]})]})},xa=({sajuString:t,size:e="medium",className:s=""})=>{if(!t||t==="계산 실패"||t==="계산 중...")return a.jsx("div",{className:`text-gray-500 dark:text-gray-400 ${s}`,children:a.jsx("span",{className:"text-sm",children:"사주 계산 중..."})});const n=t.split(" ");if(n.length!==4)return a.jsx("div",{className:`text-red-500 dark:text-red-400 ${s}`,children:a.jsx("span",{className:"text-sm",children:"사주 형식 오류"})});const[r,i,o,l]=n,d=(()=>{switch(e){case"small":return{container:"text-sm",pillar:"px-2 py-1",char:"text-base",label:"text-xs"};case"large":return{container:"text-lg",pillar:"px-4 py-3",char:"text-2xl",label:"text-sm"};default:return{container:"text-base",pillar:"px-3 py-2",char:"text-xl",label:"text-xs"}}})();return a.jsxs("div",{className:`${d.container} ${s}`,children:[a.jsxs("div",{className:"grid grid-cols-4 gap-2 max-w-md mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`bg-gradient-to-b from-red-50 to-red-100 dark:from-red-900/30 dark:to-red-800/30
                          border border-red-200 dark:border-red-700 rounded-lg ${d.pillar}`,children:a.jsx("div",{className:`font-bold text-red-800 dark:text-red-200 ${d.char}`,children:r})}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${d.label}`,children:"년주"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`bg-gradient-to-b from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30
                          border border-blue-200 dark:border-blue-700 rounded-lg ${d.pillar}`,children:a.jsx("div",{className:`font-bold text-blue-800 dark:text-blue-200 ${d.char}`,children:i})}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${d.label}`,children:"월주"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`bg-gradient-to-b from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30
                          border border-green-200 dark:border-green-700 rounded-lg ${d.pillar}`,children:a.jsx("div",{className:`font-bold text-green-800 dark:text-green-200 ${d.char}`,children:o})}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${d.label}`,children:"일주"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`bg-gradient-to-b from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30
                          border border-purple-200 dark:border-purple-700 rounded-lg ${d.pillar}`,children:a.jsx("div",{className:`font-bold text-purple-800 dark:text-purple-200 ${d.char}`,children:l})}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${d.label}`,children:"시주"})]})]}),a.jsx("div",{className:"text-center mt-3",children:a.jsxs("div",{className:"inline-flex items-center space-x-1 px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full",children:[a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"사주:"}),a.jsx("span",{className:"font-mono font-semibold text-gray-800 dark:text-gray-200",children:t})]})})]})},Nl={상생:{목:"화",화:"토",토:"금",금:"수",수:"목"},상극:{목:"토",화:"금",토:"수",금:"목",수:"화"}},$x={인오술:"화",신자진:"수",해묘미:"목",사유축:"금"},p0={자축:"토",인해:"목",묘술:"화",진유:"금",사신:"수",오미:"화토"},Vx=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]],b0={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"};function rr(t,e){const s=b0[t],n=b0[e],r={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"},i=r[t],o=r[e],l=i===o;if(s===n)return l?"비견":"겁재";const d={목:{화:["식신","상관"],토:["편재","정재"],금:["편관","정관"],수:["편인","정인"]},화:{토:["식신","상관"],금:["편재","정재"],수:["편관","정관"],목:["편인","정인"]},토:{금:["식신","상관"],수:["편재","정재"],목:["편관","정관"],화:["편인","정인"]},금:{수:["식신","상관"],목:["편재","정재"],화:["편관","정관"],토:["편인","정인"]},수:{목:["식신","상관"],화:["편재","정재"],토:["편관","정관"],금:["편인","정인"]}}[s][n];return d?l?d[0]:d[1]:"알수없음"}function P8(t,e){let s=50;for(const r of t)for(const i of e){const o=r+i,l=i+r;(p0[o]||p0[l])&&(s+=15);for(const c of Vx)(c[0]===r&&c[1]===i||c[1]===r&&c[0]===i)&&(s-=10)}const n=[...t,...e].join("");for(const r of Object.keys($x)){const i=r.split("").filter(o=>n.includes(o)).length;i>=2&&(s+=i*5)}return Math.max(0,Math.min(100,s))}function R8(t,e){const s=t.ohHaengBalance||{},n=e.ohHaengBalance||{};let r=60;const i=["목","화","토","금","수"];for(const o of i){const l=Nl.상생[o];s[o]>25&&n[l]>25?r+=15:s[o]>15&&n[l]>15&&(r+=8)}for(const o of i){const l=Nl.상극[o];s[o]>30&&n[l]>30&&(r-=10)}for(const o of i)(s[o]<10&&n[o]>30||n[o]<10&&s[o]>30)&&(r+=5);return Math.max(0,Math.min(100,r))}function L8(t,e){const s=t.day.gan,n=e.day.gan;let r=70;const i=rr(s,n),o=["정재","정관","정인","식신"],l=["비견","편재","편관","편인"],c=["겁재","상관"];o.includes(i)?r+=20:l.includes(i)?r+=5:c.includes(i)&&(r-=10);const d=rr(s,e.year.gan),h=rr(s,e.month.gan);return o.includes(d)&&(r+=10),o.includes(h)&&(r+=10),Math.max(0,Math.min(100,r))}function O8(t,e){const s=R8(t,e),n=L8(t,e);return Math.round(s*.6+n*.4)}function I8(t,e){const s=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],n=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],r=P8(s,n),i=t.day.gan,o=e.day.gan,l={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"};let c=60;return l[i]!==l[o]&&(c+=20),Math.round(r*.5+c*.5)}function F8(t,e){const s=t.day.gan,n=e.day.gan;let r=65;const i=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],o=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let l=0,c=0;for(const d of i){const h=rr(s,d);(h==="정재"||h==="편재")&&l++}for(const d of o){const h=rr(n,d);(h==="정재"||h==="편재")&&c++}return l>0&&l<=2&&(r+=10),c>0&&c<=2&&(r+=10),l>2&&c>2&&(r-=15),Math.max(0,Math.min(100,r))}function B8(t,e){const s=t.ohHaengBalance||{},n=e.ohHaengBalance||{};let r=70;const i=["목","화","토","금","수"];for(const o of i){const l=(s[o]+n[o])/2;l>=15&&l<=25&&(r+=4)}for(const o of i){const l=Nl.상생[o];s[o]>15&&n[l]>15&&(r+=3)}return Math.max(0,Math.min(100,r))}function $8(t,e){const s=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],n=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];let r=60;const i=[...s,...n];for(const o of Object.keys($x)){const c=o.split("").filter(d=>i.includes(d)).length;c===3?r+=20:c===2&&(r+=10)}for(const o of Vx)s.includes(o[0])&&n.includes(o[1])&&(r-=8);return Math.max(0,Math.min(100,r))}function V8(t,e){let s="";t>=90?s="천생연분입니다! 서로를 위한 완벽한 파트너입니다. ":t>=80?s="매우 좋은 궁합입니다. 서로를 이해하고 존중하면 행복한 관계가 될 것입니다. ":t>=70?s="좋은 궁합입니다. 서로의 차이를 인정하고 노력한다면 좋은 관계를 유지할 수 있습니다. ":t>=60?s="보통의 궁합입니다. 서로를 이해하려는 노력이 필요합니다. ":s="노력이 필요한 궁합입니다. 상대방을 이해하고 배려하는 자세가 중요합니다. ";const n=[...e].sort((o,l)=>l.score-o.score),r=n[0],i=n[n.length-1];return r.score>=80&&(s+=`특히 ${r.name} 면에서 뛰어난 조화를 보입니다. `),i.score<60&&(s+=`${i.name} 부분은 서로 더 노력이 필요한 영역입니다.`),s}const Ja={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"},Ts={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},Nr={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"},Fc=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]],Hx=[["인","사","신"],["축","술","미"],["자","묘"]],H8=[["자","유"],["오","묘"],["신","사"],["인","해"],["축","진"],["미","술"]];function Ls(t){return t>=85?"매우좋음":t>=70?"좋음":t>=50?"보통":t>=30?"주의":"위험"}function z8(t,e){let s=60;const n=[],r=[],i=t.year.gan,o=e.year.gan,l=Ja[i],c=Ja[o];l!==c?(s+=15,n.push("음양이 조화로워 첫만남부터 끌림이 있습니다")):(s-=5,r.push("같은 음양으로 첫인상이 평범할 수 있습니다"));const d=Ts[i],h=Ts[o],m={목:"화",화:"토",토:"금",금:"수",수:"목"};(m[d]===h||m[h]===d)&&(s+=20,n.push("오행이 상생하여 자연스러운 호감을 느낍니다"));const u=t.year.ji,g=e.year.ji;for(const f of Fc)if(f[0]===u&&f[1]===g||f[1]===u&&f[0]===g){s-=15,r.push("년지가 충이 되어 첫만남이 어색할 수 있습니다");break}return u===g&&(s+=10,n.push("같은 띠로 공감대가 형성됩니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Ls(s),description:`년주 기반 첫인상 궁합은 ${s}점입니다. ${s>=70?"좋은 첫인상을 주고받습니다.":"천천히 친해지는 스타일입니다."}`,factors:{positive:n,negative:r}}}function U8(t,e){let s=65;const n=[],r=[],i=Ts[t.month.gan],o=Ts[e.month.gan],l=["목","화"],c=["금","수"];l.includes(i)&&l.includes(o)?(s+=15,n.push("둘 다 활발한 소통 스타일로 대화가 즐겁습니다")):c.includes(i)&&c.includes(o)?(s+=10,n.push("차분하고 깊이 있는 대화를 나눕니다")):(l.includes(i)&&c.includes(o)||c.includes(i)&&l.includes(o))&&(s+=5,n.push("서로 다른 소통 스타일이 균형을 이룹니다"));const d=t.month.ji,h=e.month.ji;for(const u of Hx)if(u.includes(d)&&u.includes(h)){s-=10,r.push("소통 과정에서 오해가 생기기 쉽습니다");break}const m={인:"봄",묘:"봄",진:"봄",사:"여름",오:"여름",미:"여름",신:"가을",유:"가을",술:"가을",해:"겨울",자:"겨울",축:"겨울"};return m[d]===m[h]&&(s+=10,n.push("같은 계절 출생으로 정서적 리듬이 맞습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Ls(s),description:`월주 기반 소통 궁합은 ${s}점입니다. ${s>=70?"원활한 의사소통이 가능합니다.":"소통 방식의 차이를 이해할 필요가 있습니다."}`,factors:{positive:n,negative:r}}}function W8(t,e){let s=70;const n=[],r=[],i=t.day.gan,o=e.day.gan;Ja[i]!==Ja[o]&&(s+=20,n.push("음양이 조화되어 서로를 보완합니다"));const l=Ts[i],c=Ts[o];l===c&&(s+=10,n.push("같은 오행으로 기본 성향이 비슷합니다"));const d={목:"화",화:"토",토:"금",금:"수",수:"목"};d[l]===c?(s+=15,n.push(`${l}이 ${c}를 생하여 베푸는 관계입니다`)):d[c]===l&&(s+=15,n.push(`${c}가 ${l}을 생하여 받는 관계입니다`));const h={목:"토",토:"수",수:"화",화:"금",금:"목"};return(h[l]===c||h[c]===l)&&(s-=15,r.push("오행이 상극하여 가치관 충돌이 있을 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Ls(s),description:`일간 기반 가치관 궁합은 ${s}점입니다. ${s>=70?"핵심 가치관이 잘 맞습니다.":"서로의 가치관을 존중하는 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function Y8(t,e){let s=60;const n=[],r=[],i=t.time.ji,o=e.time.ji,l=["인","묘","진","사"],c=["오","미","신","유"],d=["술","해","자","축"],h=p=>l.includes(p)?"morning":c.includes(p)?"afternoon":d.includes(p)?"evening":"unknown",m=h(i),u=h(o);m===u?(s+=20,n.push("생활 리듬이 비슷하여 일상이 조화롭습니다")):(s-=10,r.push("활동 시간대가 달라 조율이 필요합니다"));for(const p of Fc)if(p[0]===i&&p[1]===o||p[1]===i&&p[0]===o){s-=15,r.push("생활 패턴이 정반대여서 갈등이 생길 수 있습니다");break}const g=Nr[i],f=Nr[o];return g===f&&(s+=10,n.push("비슷한 에너지 패턴을 가지고 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Ls(s),description:`시주 기반 생활패턴 궁합은 ${s}점입니다. ${s>=70?"일상생활이 조화롭게 흘러갑니다.":"생활 패턴 조율이 필요합니다."}`,factors:{positive:n,negative:r}}}function G8(t,e){let s=80;const n=[],r=[],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];let l=0,c=0,d=0;for(const u of i)for(const g of o)for(const f of Fc)(f[0]===u&&f[1]===g||f[1]===u&&f[0]===g)&&l++;l>0&&(s-=l*10,r.push(`${l}개의 충이 있어 갈등이 자주 발생할 수 있습니다`));for(const u of Hx){let g=!1,f=!1;for(const p of i)u.includes(p)&&(g=!0);for(const p of o)u.includes(p)&&(f=!0);g&&f&&c++}c>0&&(s-=c*8,r.push("형이 있어 서로 상처를 줄 수 있습니다"));for(const u of i)for(const g of o)for(const f of H8)(f[0]===u&&f[1]===g||f[1]===u&&f[0]===g)&&d++;d>0&&(s-=d*5,r.push("파가 있어 관계가 불안정할 수 있습니다")),l===0&&c===0&&(s+=10,n.push("충이나 형이 없어 평화로운 관계입니다"));const h=i.filter(u=>Nr[u]==="토").length,m=o.filter(u=>Nr[u]==="토").length;return(h>0||m>0)&&(s+=5,n.push("토 오행이 있어 갈등 중재 능력이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Ls(s),description:`갈등해결 궁합은 ${s}점입니다. ${s>=70?"갈등을 잘 해결할 수 있습니다.":"갈등 발생 시 신중한 대처가 필요합니다."}`,factors:{positive:n,negative:r}}}function K8(t,e){let s=65;const n=[],r=[],i=Ys(t,"수"),o=Ys(e,"수");i>0&&i<=2&&(s+=10,n.push("적절한 수 기운으로 감정 표현이 자연스럽습니다")),o>0&&o<=2&&(s+=10,n.push("상대방도 감정 교류가 원활합니다")),(i>3||o>3)&&(s-=10,r.push("수가 과다하여 감정 기복이 심할 수 있습니다")),i===0&&o===0&&(s-=15,r.push("수가 부족하여 정서적 교감이 어려울 수 있습니다"));const l=Ys(t,"화"),c=Ys(e,"화");if(Math.abs(l-i)<=1&&Math.abs(c-o)<=1&&(s+=15,n.push("화수가 균형을 이루어 열정과 감성이 조화롭습니다")),t.ohHaengBalance&&e.ohHaengBalance){const d=t.ohHaengBalance.수||0,h=e.ohHaengBalance.수||0;d>=15&&d<=25&&h>=15&&h<=25&&(s+=10,n.push("수 오행이 균형잡혀 정서적 안정감이 있습니다"))}return s=Math.max(0,Math.min(100,s)),{score:s,level:Ls(s),description:`정서적 궁합은 ${s}점입니다. ${s>=70?"깊은 정서적 교감이 가능합니다.":"감정 표현과 이해에 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function q8(t,e){let s=70;const n=[],r=[],i=Ys(t,"토"),o=Ys(e,"토");i>=1&&i<=3&&(s+=10,n.push("토 기운이 있어 믿음직합니다")),o>=1&&o<=3&&(s+=10,n.push("상대방도 신뢰할 만한 사람입니다")),i>0&&o>0&&(s+=15,n.push("서로 토 기운이 있어 안정적인 신뢰관계를 형성합니다")),(i>4||o>4)&&(s-=10,r.push("토가 과다하여 고집이 세고 변화를 거부할 수 있습니다")),(i===0||o===0)&&(s-=15,r.push("토가 부족하여 신뢰 형성에 시간이 필요합니다"));const l=t.day.ji,c=e.day.ji,d=["축","진","미","술"];return(d.includes(l)||d.includes(c))&&(s+=5,n.push("일지에 토가 있어 기본적으로 신뢰감을 줍니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Ls(s),description:`신뢰도 궁합은 ${s}점입니다. ${s>=70?"서로를 깊이 신뢰할 수 있습니다.":"신뢰 구축에 시간과 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function Ys(t,e){let s=0;const n=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],r=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(const i of n)Ts[i]===e&&s++;for(const i of r)Nr[i]===e&&s++;return s}function J8(t,e){const s=z8(t,e),n=U8(t,e),r=W8(t,e),i=Y8(t,e),o=G8(t,e),l=K8(t,e),c=q8(t,e),d=[s.score,n.score,r.score,i.score,o.score,l.score,c.score],h=Math.round(d.reduce((u,g)=>u+g,0)/d.length);let m="";return h>=80?m="매우 훌륭한 관계성을 가지고 있습니다. 서로를 깊이 이해하고 존중할 수 있는 관계입니다.":h>=70?m="좋은 관계를 유지할 수 있습니다. 약간의 노력으로 더욱 발전할 가능성이 있습니다.":h>=60?m="평균적인 관계입니다. 서로를 이해하려는 노력이 필요합니다.":h>=50?m="관계 유지에 상당한 노력이 필요합니다. 차이점을 인정하고 존중하는 것이 중요합니다.":m="관계에 어려움이 예상됩니다. 충분한 이해와 인내가 필요합니다.",{firstImpression:s,communication:n,valueSystem:r,lifePattern:i,conflictResolution:o,emotional:l,trust:c,averageScore:h,summary:m}}function Ze(t,e){var d;const s={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},n={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"},r=s[t],i=s[e],o=n[t]===n[e];if(r===i)return o?"비견":"겁재";const c=(d={목:{화:["식신","상관"],토:["편재","정재"],금:["편관","정관"],수:["편인","정인"]},화:{토:["식신","상관"],금:["편재","정재"],수:["편관","정관"],목:["편인","정인"]},토:{금:["식신","상관"],수:["편재","정재"],목:["편관","정관"],화:["편인","정인"]},금:{수:["식신","상관"],목:["편재","정재"],화:["편관","정관"],토:["편인","정인"]},수:{목:["식신","상관"],화:["편재","정재"],토:["편관","정관"],금:["편인","정인"]}}[r])==null?void 0:d[i];return c?o?c[0]:c[1]:"알수없음"}function Vr(t){return t>=85?"매우좋음":t>=70?"좋음":t>=50?"보통":t>=30?"주의":"위험"}function X8(t,e){let s=65;const n=[],r=[],i=t.day.gan,o=e.day.gan,l=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],c=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let d=0,h=0,m=0;for(const y of l){const v=Ze(i,y);v==="정재"?(d++,h++):v==="편재"&&(d++,m++)}let u=0,g=0,f=0;for(const y of c){const v=Ze(o,y);v==="정재"?(u++,g++):v==="편재"&&(u++,f++)}d>=1&&d<=2&&(s+=10,n.push("적절한 재성으로 건실한 경제관념을 가지고 있습니다")),u>=1&&u<=2&&(s+=10,n.push("상대방도 안정적인 경제관을 가지고 있습니다")),h>m&&g>f?(s+=15,n.push("둘 다 안정적이고 보수적인 재테크 성향입니다")):m>h&&f>g?(s+=5,n.push("둘 다 적극적인 투자 성향으로 의견이 맞을 수 있습니다")):(s+=10,n.push("서로 다른 재테크 스타일로 균형을 이룹니다")),(d>3||u>3)&&(s-=15,r.push("재성이 과다하여 돈 문제로 갈등이 생길 수 있습니다")),(d===0||u===0)&&(s-=10,r.push("재성이 부족하여 경제적 계획성이 떨어질 수 있습니다"));const p=zt(t,"금"),b=zt(e,"금");return p>0&&b>0&&(s+=5,n.push("금 기운이 있어 절약 정신이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`경제관념 궁합은 ${s}점입니다. ${s>=70?"경제적 가치관이 잘 맞습니다.":"금전 관리 방식에 대한 조율이 필요합니다."}`,factors:{positive:n,negative:r}}}function Q8(t,e){let s=60;const n=[],r=[],i=t.day.gan,o=e.day.gan,l=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],c=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let d=0,h=0,m=0;for(const y of l){const v=Ze(i,y);v==="정관"?(d++,h++):v==="편관"&&(d++,m++)}let u=0,g=0,f=0;for(const y of c){const v=Ze(o,y);v==="정관"?(u++,g++):v==="편관"&&(u++,f++)}d>=1&&d<=2&&(s+=15,n.push("안정적인 직업운을 가지고 있습니다")),u>=1&&u<=2&&(s+=15,n.push("상대방도 커리어가 안정적입니다")),h>0&&g>0?(s+=10,n.push("둘 다 안정적인 직장 생활을 선호합니다")):m>0&&f>0&&(s+=10,n.push("둘 다 도전적인 사업가 기질이 있습니다")),(d>3||u>3)&&(s-=10,r.push("관성이 과다하여 업무 스트레스가 관계에 영향을 줄 수 있습니다"));let p=0,b=0;for(const y of l){const v=Ze(i,y);(v==="식신"||v==="상관")&&p++}for(const y of c){const v=Ze(o,y);(v==="식신"||v==="상관")&&b++}return p>0&&b>0&&(s+=10,n.push("둘 다 창의적인 능력이 있어 서로를 이해합니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`직업운 궁합은 ${s}점입니다. ${s>=70?"서로의 커리어를 지지할 수 있습니다.":"직업적 목표에 대한 이해가 필요합니다."}`,factors:{positive:n,negative:r}}}function Z8(t,e){let s=65;const n=[],r=[],i=t.day.gan,o=e.day.gan,l=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],c=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let d=0,h=0;for(const p of l){const b=Ze(i,p);(b==="정인"||b==="편인")&&d++}for(const p of c){const b=Ze(o,p);(b==="정인"||b==="편인")&&h++}d>=1&&d<=2&&(s+=15,n.push("안정적인 주거 환경을 선호합니다")),h>=1&&h<=2&&(s+=15,n.push("상대방도 편안한 집을 중요시합니다"));const m=zt(t,"토"),u=zt(e,"토");(m>=2||u>=2)&&(s+=10,n.push("토 기운이 강해 부동산 운이 좋습니다")),(d>3||h>3)&&(s-=10,r.push("인성이 과다하여 독립적인 주거 생활이 어려울 수 있습니다"));const g=zt(t,"목"),f=zt(e,"목");return g>0&&f>0?(s+=5,n.push("목 기운이 있어 자연친화적인 주거를 선호합니다")):(g>2&&f===0||g===0&&f>2)&&(s-=5,r.push("주거 환경 취향이 크게 다를 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`주거환경 궁합은 ${s}점입니다. ${s>=70?"편안한 보금자리를 만들 수 있습니다.":"주거 스타일 조율이 필요합니다."}`,factors:{positive:n,negative:r}}}function eM(t,e){let s=70;const n=[],r=[],i=t.day.gan,o=e.day.gan,l=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],c=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let d=0,h=0,m=0;for(const v of l){const N=Ze(i,v);N==="식신"?(d++,h++):N==="상관"&&(d++,m++)}let u=0,g=0,f=0;for(const v of c){const N=Ze(o,v);N==="식신"?(u++,g++):N==="상관"&&(u++,f++)}h>0&&g>0?(s+=20,n.push("둘 다 식신이 있어 자녀 복이 있습니다")):(h>0||g>0)&&(s+=10,n.push("자녀에 대한 사랑이 깊습니다")),(m>1||f>1)&&(s-=5,r.push("자녀 교육 방식에서 의견 충돌이 있을 수 있습니다")),d===0&&u===0&&(s-=15,r.push("식상이 부족하여 자녀 계획에 어려움이 있을 수 있습니다"));const p=zt(t,"수"),b=zt(e,"수");p>0&&b>0&&(s+=10,n.push("수 기운이 있어 자녀 생산력이 좋습니다"));const y=["자","오","묘","유"];return(y.includes(t.time.ji)||y.includes(e.time.ji))&&(s+=5,n.push("도화가 있어 예쁜 자녀를 얻을 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`자녀운 궁합은 ${s}점입니다. ${s>=70?"자녀와 행복한 가정을 이룰 수 있습니다.":"자녀 계획에 대한 충분한 대화가 필요합니다."}`,factors:{positive:n,negative:r}}}function tM(t,e){let s=70;const n=[],r=[],i=t.year.ji,o=e.year.ji,l=t.month.ji,c=e.month.ji,d=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]];let h=!1;for(const v of d)if(v[0]===i&&v[1]===o||v[1]===i&&v[0]===o){s-=15,r.push("년지가 충이 되어 양가 부모님과의 관계에 주의가 필요합니다"),h=!0;break}h||(s+=10,n.push("년지가 충돌하지 않아 양가 화합이 좋습니다"));for(const v of d)if(v[0]===l&&v[1]===c||v[1]===l&&v[0]===c){s-=10,r.push("월지가 충이 되어 형제간 관계에 신경써야 합니다");break}const m=y0(t.year.gan),u=y0(e.year.gan),g={목:"화",화:"토",토:"금",금:"수",수:"목"};(g[m]===u||g[u]===m)&&(s+=15,n.push("년간이 상생하여 양가 어른들의 축복을 받습니다"));const f=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],p=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let b=0,y=0;for(const v of f){const N=Ze(t.day.gan,v);(N==="정인"||N==="편인")&&b++}for(const v of p){const N=Ze(e.day.gan,v);(N==="정인"||N==="편인")&&y++}return b>0&&y>0&&(s+=10,n.push("인성이 있어 어른을 공경하는 마음이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`시댁/처가 궁합은 ${s}점입니다. ${s>=70?"양가 가족과 원만한 관계를 유지할 수 있습니다.":"가족 관계에서 서로 배려가 필요합니다."}`,factors:{positive:n,negative:r}}}function zt(t,e){const s={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},n={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"};let r=0;const i=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],o=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(const l of i)s[l]===e&&r++;for(const l of o)n[l]===e&&r++;return r}function y0(t){return{갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"}[t]||""}function sM(t,e){const s=X8(t,e),n=Q8(t,e),r=Z8(t,e),i=eM(t,e),o=tM(t,e),l=[s.score,n.score,r.score,i.score,o.score],c=Math.round(l.reduce((h,m)=>h+m,0)/l.length);let d="";return c>=80?d="현실적인 면에서 매우 잘 맞습니다. 안정적인 가정을 이룰 수 있습니다.":c>=70?d="실생활에서 큰 문제없이 조화를 이룰 수 있습니다.":c>=60?d="일부 현실적 문제에서 조율이 필요하지만 극복 가능합니다.":c>=50?d="현실적 가치관의 차이가 있어 충분한 대화가 필요합니다.":d="현실적 문제로 어려움이 예상됩니다. 신중한 접근이 필요합니다.",{economic:s,career:n,residence:r,children:i,inLaw:o,averageScore:c,summary:d}}function ts(t){return t>=85?"매우좋음":t>=70?"좋음":t>=50?"보통":t>=30?"주의":"위험"}const gt=["자","오","묘","유"],v0=["인","신","사","해"],Xa=["진","술","축","미"];function nM(t,e){let s=60;const n=[],r=[],i=Be(t,"화"),o=Be(e,"화"),l=Be(t,"수"),c=Be(e,"수");i>=1&&i<=2&&l>=1&&l<=2&&(s+=15,n.push("화수가 균형을 이루어 건강한 성생활이 가능합니다")),o>=1&&o<=2&&c>=1&&c<=2&&(s+=15,n.push("상대방도 성적 에너지가 균형잡혀 있습니다"));const d=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],h=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],m=d.filter(f=>gt.includes(f)).length,u=h.filter(f=>gt.includes(f)).length;m===1&&u===1?(s+=20,n.push("적절한 도화가 있어 서로에게 매력을 느낍니다")):m>2||u>2?(s-=15,r.push("도화가 과다하여 이성 문제가 생길 수 있습니다")):m===0&&u===0&&(s-=10,r.push("도화가 없어 성적 매력이 부족할 수 있습니다")),gt.includes(t.day.ji)&&gt.includes(e.day.ji)&&(s+=10,n.push("일지 도화로 강한 성적 끌림이 있습니다")),(i>3||o>3)&&(s-=10,r.push("화가 과다하여 성적으로 충동적일 수 있습니다"));const g={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"};return g[t.day.gan]!==g[e.day.gan]&&(s+=10,n.push("음양이 조화되어 성적 궁합이 좋습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ts(s),description:`성적 궁합은 ${s}점입니다. ${s>=70?"서로에게 성적 매력을 느낍니다.":"성적 조화를 위한 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function rM(t,e){let s=70;const n=[],r=[],i=et(t,["정인","편인"]),o=et(e,["정인","편인"]),l=et(t,["식신"]),c=et(e,["식신"]);i>0&&o>0&&(s+=15,n.push("둘 다 정신적 가치를 중요시합니다")),l>0&&c>0&&(s+=15,n.push("종교나 철학에 대한 관심이 비슷합니다"));const d=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],h=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],m=d.filter(p=>Xa.includes(p)).length,u=h.filter(p=>Xa.includes(p)).length;m>0&&u>0?(s+=10,n.push("화개살이 있어 예술적/영적 교감이 가능합니다")):(m>1&&u===0||m===0&&u>1)&&(s-=10,r.push("종교관의 차이가 클 수 있습니다"));const g=Be(t,"목"),f=Be(e,"목");return g>0&&f>0&&(s+=5,n.push("목 기운이 있어 자비롭고 포용적입니다")),(i>3||o>3)&&(s-=15,r.push("인성이 과다하여 종교적 극단주의 우려가 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ts(s),description:`종교/신앙 궁합은 ${s}점입니다. ${s>=70?"정신적 가치관이 잘 맞습니다.":"종교나 신념에 대한 상호 이해가 필요합니다."}`,factors:{positive:n,negative:r}}}function aM(t,e){let s=65;const n=[],r=[],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],l=i.filter(p=>v0.includes(p)).length,c=o.filter(p=>v0.includes(p)).length;l>0&&c>0?(s+=20,n.push("둘 다 역마가 있어 여행을 즐깁니다")):l>1&&c===0||l===0&&c>1?(s-=10,r.push("여행 취향의 차이로 갈등이 있을 수 있습니다")):l===0&&c===0&&(s+=5,n.push("둘 다 안정적인 취미를 선호합니다"));const d=i.filter(p=>Xa.includes(p)).length,h=o.filter(p=>Xa.includes(p)).length;d>0&&h>0&&(s+=15,n.push("예술적 취미를 공유할 수 있습니다"));const m=et(t,["식신","상관"]),u=et(e,["식신","상관"]);m>0&&u>0&&(s+=10,n.push("창의적인 취미 활동을 함께 즐길 수 있습니다"));const g=Be(t,"목")+Be(t,"화"),f=Be(e,"목")+Be(e,"화");return g>=3&&f>=3?(s+=10,n.push("활동적인 취미를 함께 즐길 수 있습니다")):(g>=4&&f<=1||g<=1&&f>=4)&&(s-=10,r.push("활동량의 차이로 취미 공유가 어려울 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ts(s),description:`여행/취미 궁합은 ${s}점입니다. ${s>=70?"취미와 여가를 함께 즐길 수 있습니다.":"서로의 취미를 존중하는 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function iM(t,e){let s=70;const n=[],r=[],i=Be(t,"금"),o=Be(e,"금");i>=1&&i<=3&&(s+=10,n.push("금 기운이 있어 노후 준비가 철저합니다")),o>=1&&o<=3&&(s+=10,n.push("상대방도 노후를 체계적으로 준비합니다"));const l=Be(t,"토"),c=Be(e,"토");l>0&&c>0&&(s+=15,n.push("토 기운이 있어 안정적인 노후생활이 가능합니다"));const d=et(t,["정재","편재"]),h=et(e,["정재","편재"]);d>0&&h>0?(s+=10,n.push("재성이 있어 경제적으로 안정된 노후가 기대됩니다")):d===0&&h===0&&(s-=15,r.push("재성이 부족하여 노후 자금 준비에 신경써야 합니다"));const m=et(t,["정인","편인"]),u=et(e,["정인","편인"]);return(m>0||u>0)&&(s+=5,n.push("인성이 있어 정신적으로 풍요로운 노후가 가능합니다")),(i>4||o>4)&&(s-=10,r.push("금이 과다하여 노후에 고집이 세질 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ts(s),description:`노후생활 궁합은 ${s}점입니다. ${s>=70?"행복하고 안정된 노후를 보낼 수 있습니다.":"노후 계획을 함께 준비해야 합니다."}`,factors:{positive:n,negative:r}}}function oM(t,e){var N,S;let s=60;const n=[],r=[],i={갑:["축","미"],을:["자","신"],병:["해","유"],정:["해","유"],무:["축","미"],기:["자","신"],경:["축","미"],신:["인","오"],임:["묘","사"],계:["묘","사"]},o=t.day.gan,l=e.day.gan,c=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],d=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],h=i[o]||[],m=i[l]||[],u=c.some(C=>h.includes(C)),g=d.some(C=>m.includes(C));u&&g?(s+=30,n.push("둘 다 천을귀인이 있어 귀인의 도움을 받습니다")):u||g?(s+=15,n.push("천을귀인이 있어 어려울 때 도움을 받을 수 있습니다")):(s-=10,r.push("천을귀인이 없어 스스로 헤쳐나가야 합니다"));const f=d.some(C=>h.includes(C)),p=c.some(C=>m.includes(C));(f||p)&&(s+=20,n.push("서로가 서로의 귀인이 되어줄 수 있습니다"));const b={인:["병","정"],묘:["갑","을"],사:["병","정"],오:["임","계"],신:["경","신"],유:["경","신"],해:["임","계"],자:["임","계"]},y=t.month.ji,v=e.month.ji;return((N=b[y])!=null&&N.includes(o)||(S=b[v])!=null&&S.includes(l))&&(s+=10,n.push("월덕귀인이 있어 인덕이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ts(s),description:`천을귀인 궁합은 ${s}점입니다. ${s>=70?"귀인의 도움으로 순조로운 삶이 예상됩니다.":"스스로 노력하여 길을 개척해야 합니다."}`,factors:{positive:n,negative:r}}}function lM(t,e){let s=70;const n=[],r=[],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],l=i.filter(m=>gt.includes(m)).length,c=o.filter(m=>gt.includes(m)).length;l===1&&c===1?(s+=20,n.push("적절한 도화로 서로에게만 매력을 느낍니다")):l===0&&c===0?(s+=10,n.push("도화가 없어 이성 문제가 적습니다")):l>=3||c>=3?(s-=30,r.push("도화가 과다하여 이성 문제로 갈등이 예상됩니다")):(l>=2&&c===0||l===0&&c>=2)&&(s-=20,r.push("도화 불균형으로 이성 문제가 생길 수 있습니다")),(gt.includes(t.day.ji)||gt.includes(e.day.ji))&&(gt.includes(t.day.ji)&&gt.includes(e.day.ji)?(s+=10,n.push("일지 도화로 서로에게 강한 매력을 느낍니다")):(s-=10,r.push("일지 도화 불균형으로 주의가 필요합니다")));const d=et(t,["정관","편관"]),h=et(e,["정관","편관"]);return(d>=3&&t.day.gan in{을:1,정:1,기:1,신:1,계:1}||h>=3&&e.day.gan in{을:1,정:1,기:1,신:1,계:1})&&(s-=15,r.push("관살혼잡으로 이성관계가 복잡할 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ts(s),description:`도화살 영향은 ${s}점입니다. ${s>=70?"이성 문제 없이 안정적인 관계입니다.":"이성 관계에 특별한 주의가 필요합니다."}`,factors:{positive:n,negative:r}}}function cM(t,e){let s=75;const n=[],r=[],i={자:["술","해"],축:["술","해"],인:["자","축"],묘:["자","축"],진:["인","묘"],사:["인","묘"],오:["진","사"],미:["진","사"],신:["오","미"],유:["오","미"],술:["신","유"],해:["신","유"]},o=t.year.ji,l=e.year.ji,c=i[o]||[],d=i[l]||[],h=[t.month.ji,t.day.ji,t.time.ji],m=[e.month.ji,e.day.ji,e.time.ji],u=h.some(f=>c.includes(f)),g=m.some(f=>d.includes(f));return!u&&!g?(s+=15,n.push("공망이 없어 현실적이고 실속있는 관계입니다")):u&&g?(s-=20,r.push("둘 다 공망이 있어 허무함을 느낄 수 있습니다")):(u||g)&&(s-=10,r.push("공망으로 인한 공허함을 이해해주어야 합니다")),(c.includes(t.day.ji)||d.includes(e.day.ji))&&(s-=15,r.push("일지 공망으로 관계의 실속이 부족할 수 있습니다")),(c.includes(t.month.ji)||d.includes(e.month.ji))&&(s-=10,r.push("월지 공망으로 가족 관계에 어려움이 있을 수 있습니다")),u&&m.some(f=>c.includes(f))&&(s+=10,n.push("상대방이 공망을 채워줄 수 있습니다")),g&&h.some(f=>d.includes(f))&&(s+=10,n.push("서로의 공망을 채워주는 관계입니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ts(s),description:`공망 분석은 ${s}점입니다. ${s>=70?"실속있고 충실한 관계입니다.":"공허함을 채우기 위한 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function dM(t,e){let s=70;const n=[],r=[],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],l=["인","신"],c=i.filter(_=>l.includes(_)).length,d=o.filter(_=>l.includes(_)).length;(c>=2||d>=2)&&(s-=10,r.push("백호살이 있어 충동적인 행동에 주의해야 합니다"));const h=["사","해"],m=i.filter(_=>h.includes(_)).length,u=o.filter(_=>h.includes(_)).length;(m>=2||u>=2)&&(s-=5,r.push("현침살이 있어 예민한 반응에 주의가 필요합니다"));const g={갑:"사",을:"오",병:"신",정:"유",무:"신",기:"유",경:"해",신:"자",임:"인",계:"묘"},f=t.day.gan,p=e.day.gan;(i.includes(g[f])||o.includes(g[p]))&&(s+=10,n.push("문창귀인이 있어 학문과 예술에 재능이 있습니다"));const b={갑:"묘",을:"진",병:"오",정:"미",무:"오",기:"미",경:"유",신:"술",임:"자",계:"축"};i.includes(b[f])&&o.includes(b[p])&&(s+=15,n.push("둘 다 장성살이 있어 서로를 발전시킵니다"));const y=["경진","임진","무술","경술"],v=t.day.gan+t.day.ji,N=e.day.gan+e.day.ji;(y.includes(v)||y.includes(N))&&(s-=10,r.push("괴강살이 있어 극단적인 성격에 주의가 필요합니다"));const S=["진","사"],C=["술","해"];return(i.some(_=>S.includes(_))&&o.some(_=>C.includes(_))||i.some(_=>C.includes(_))&&o.some(_=>S.includes(_)))&&(s-=15,r.push("천라지망이 형성되어 서로를 속박할 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ts(s),description:`신살 종합 점수는 ${s}점입니다. ${s>=70?"길신이 많아 순조로운 관계입니다.":"흉신의 영향을 주의해야 합니다."}`,factors:{positive:n,negative:r}}}function Be(t,e){const s={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},n={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"};let r=0;const i=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],o=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(const l of i)s[l]===e&&r++;for(const l of o)n[l]===e&&r++;return r}function et(t,e){const s=t.day.gan,n=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];let r=0;for(const i of n){const o=hM(s,i);e.includes(o)&&r++}return r}function hM(t,e){var d;const s={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},n={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"},r=s[t],i=s[e],o=n[t]===n[e];if(r===i)return o?"비견":"겁재";const c=(d={목:{화:["식신","상관"],토:["편재","정재"],금:["편관","정관"],수:["편인","정인"]},화:{토:["식신","상관"],금:["편재","정재"],수:["편관","정관"],목:["편인","정인"]},토:{금:["식신","상관"],수:["편재","정재"],목:["편관","정관"],화:["편인","정인"]},금:{수:["식신","상관"],목:["편재","정재"],화:["편관","정관"],토:["편인","정인"]},수:{목:["식신","상관"],화:["편재","정재"],토:["편관","정관"],금:["편인","정인"]}}[r])==null?void 0:d[i];return c?o?c[0]:c[1]:"알수없음"}function uM(t,e){const s=nM(t,e),n=rM(t,e),r=aM(t,e),i=iM(t,e),o=[s.score,n.score,r.score,i.score],l=Math.round(o.reduce((d,h)=>d+h,0)/o.length);let c="";return l>=80?c="심층적인 면에서도 매우 잘 어울립니다.":l>=70?c="깊이 있는 관계를 만들어갈 수 있습니다.":l>=60?c="일부 깊은 주제에서 이해가 필요합니다.":c="심층적 이해를 위한 노력이 많이 필요합니다.",{sexual:s,spiritual:n,hobby:r,retirement:i,averageScore:l,summary:c}}function mM(t,e){const s=oM(t,e),n=lM(t,e),r=cM(t,e),i=dM(t,e),o=[s.score,n.score,r.score,i.score],l=Math.round(o.reduce((d,h)=>d+h,0)/o.length);let c="";return l>=80?c="특수한 인연으로 맺어진 좋은 관계입니다.":l>=70?c="길신이 많아 순조로운 관계가 예상됩니다.":l>=60?c="일부 신살의 영향에 주의가 필요합니다.":c="신살의 영향을 극복하기 위한 노력이 필요합니다.",{noblePerson:s,peachBlossom:n,emptiness:r,sinsal:i,averageScore:l,summary:c}}ct.register(Ht,Yt,Qe,ji,Rs,Ps);const gM=({data:t})=>{const{theme:e}=Bx(),s=e==="dark",n=[],r=[],i=[{key:"firstImpression",label:"첫인상"},{key:"communication",label:"대화소통"},{key:"valueSystem",label:"가치관"},{key:"lifePattern",label:"생활패턴"},{key:"conflictResolution",label:"갈등해결"},{key:"emotional",label:"정서적"},{key:"trust",label:"신뢰도"}],o=[{key:"economic",label:"경제관념"},{key:"career",label:"직업운"},{key:"residence",label:"주거환경"},{key:"children",label:"자녀운"},{key:"inLaw",label:"시댁/처가"}],l=[{key:"sexual",label:"성적"},{key:"spiritual",label:"정신적"},{key:"hobby",label:"취미"},{key:"retirement",label:"노후"}],c=[{key:"noblePerson",label:"귀인운"},{key:"peachBlossom",label:"도화운"},{key:"emptiness",label:"공망"},{key:"sinsal",label:"신살"}];t.relationship&&i.forEach(m=>{const u=t.relationship[m.key];u&&typeof u.score=="number"&&(n.push(m.label),r.push(u.score))}),t.practical&&o.forEach(m=>{const u=t.practical[m.key];u&&typeof u.score=="number"&&(n.push(m.label),r.push(u.score))}),t.depth&&l.forEach(m=>{const u=t.depth[m.key];u&&typeof u.score=="number"&&(n.push(m.label),r.push(u.score))}),t.special&&c.forEach(m=>{const u=t.special[m.key];u&&typeof u.score=="number"&&(n.push(m.label),r.push(u.score))});const d={labels:n,datasets:[{label:"종합 궁합 점수",data:r,backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgba(147, 51, 234, 1)",borderWidth:2,pointBackgroundColor:"rgba(147, 51, 234, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(147, 51, 234, 1)",pointRadius:4,pointHoverRadius:6}]},h={responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:20,color:s?"#9CA3AF":"#4B5563",backdropColor:"transparent",font:{size:10}},grid:{color:s?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.2)",circular:!0},angleLines:{color:s?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.2)"},pointLabels:{color:s?"#D1D5DB":"#374151",font:{size:11,weight:500},padding:15}}},plugins:{legend:{display:!0,position:"top",labels:{color:s?"#D1D5DB":"#374151",font:{size:12},padding:20}},tooltip:{enabled:!0,backgroundColor:s?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",titleColor:s?"#F3F4F6":"#111827",bodyColor:s?"#D1D5DB":"#4B5563",borderColor:s?"#4B5563":"#E5E7EB",borderWidth:1,padding:12,displayColors:!1,callbacks:{label:m=>{const u=m.parsed.r;let g="매우좋음";return u<30?g="위험":u<50?g="주의":u<70?g="보통":u<85&&(g="좋음"),`${m.label}: ${u}점 (${g})`}}}},interaction:{intersect:!1,mode:"point"}};return a.jsx("div",{className:"w-full h-[600px] p-4",children:a.jsx(rc,{data:d,options:h})})},fM=()=>{const[t,e]=j.useState(null),[s,n]=j.useState(null),[r,i]=j.useState(null),[o,l]=j.useState(!1),[c,d]=j.useState(null),[h,m]=j.useState(null),u=async b=>{if(!b.birth_date||!b.birth_time)return null;try{let[y,v,N]=b.birth_date.split("-").map(Number);const[S,C]=b.birth_time.split(":").map(Number);if(b.lunar_solar==="lunar"){const E=new Pl;E.setLunarDate(y,v,N,!1);const A=E.getSolarCalendar();y=A.year,v=A.month,N=A.day}const _=localStorage.getItem("personalInfo"),w=_?JSON.parse(_).useTrueSolarTime:!1,k=Gm(y,v,N,S,C||0,void 0,w),M={wood:20,fire:20,earth:20,metal:20,water:20};return{year:{gan:k.year[0],ji:k.year[1]},month:{gan:k.month[0],ji:k.month[1]},day:{gan:k.day[0],ji:k.day[1]},time:{gan:k.hour[0],ji:k.hour[1]},fullSaju:k.fullSaju,ohHaengBalance:M,dayMaster:k.day[0]}}catch(y){return console.error("로컬 사주 계산 오류:",y),null}},g=async b=>b?await u(b):(console.error("고객 데이터가 없습니다"),null),f=async()=>{if(!(!t||!s)){l(!0);try{const b=await g(t),y=await g(s);if(!b||!y){console.error("사주 데이터 파싱 실패 - 궁합 계산 중단"),alert("정확한 사주 데이터를 계산할 수 없습니다. 고객 정보를 다시 확인해주세요."),l(!1);return}d(b),m(y),setTimeout(()=>{const v=O8(b,y),N=I8(b,y),S=F8(b,y),C=B8(b,y),_=$8(b,y),w=[{name:"성격 궁합",score:v,description:"성격과 가치관의 조화 (십신/오행 분석)"},{name:"애정 궁합",score:N,description:"감정과 애정 표현의 조화 (지지관계/음양조화)"},{name:"재물 궁합",score:S,description:"경제관념과 재물운의 조화 (재성 분석)"},{name:"건강 궁합",score:C,description:"체질과 건강 에너지의 조화 (오행 균형)"},{name:"미래 궁합",score:_,description:"인생 방향과 목표의 조화 (삼합/육합)"}],k=Math.round(w.reduce((R,T)=>R+T.score,0)/w.length),M=J8(b,y),E=sM(b,y),A=uM(b,y),O=mM(b,y);i({totalScore:k,categories:w,advice:V8(k,w),detailedAnalysis:{relationship:M,practical:E,depth:A,special:O}}),l(!1)},1e3)}catch(b){console.error("궁합 계산 중 오류 발생:",b),alert("궁합 계산 중 오류가 발생했습니다. 다시 시도해주세요."),l(!1)}}},p=b=>b>=80?"text-green-600":b>=60?"text-yellow-600":"text-red-600";return a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-900 dark:text-gray-100",children:"궁합 분석"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"첫 번째 사람"}),a.jsx(jl,{onSelect:e,selectedCustomer:t}),t&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:t.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.birth_date," ",t.birth_time," (",t.lunar_solar==="lunar"?"음력":"양력",")"]}),a.jsx("div",{className:"mt-3",children:a.jsx(xa,{sajuString:c==null?void 0:c.fullSaju,size:"small",className:"bg-white dark:bg-gray-800 rounded-lg p-3"})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"두 번째 사람"}),a.jsx(jl,{onSelect:n,selectedCustomer:s}),s&&a.jsxs("div",{className:"mt-4 p-4 bg-pink-50 dark:bg-pink-900/30 rounded-lg",children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.birth_date," ",s.birth_time," (",s.lunar_solar==="lunar"?"음력":"양력",")"]}),a.jsx("div",{className:"mt-3",children:a.jsx(xa,{sajuString:h==null?void 0:h.fullSaju,size:"small",className:"bg-white dark:bg-gray-800 rounded-lg p-3"})})]})]})]}),a.jsx("div",{className:"text-center mb-8",children:a.jsx("button",{onClick:f,disabled:!t||!s||o,className:`px-8 py-3 rounded-lg font-semibold transition-colors ${t&&s&&!o?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o?"분석 중...":"궁합 분석하기"})}),r&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:[t==null?void 0:t.name," ♥ ",s==null?void 0:s.name," 궁합 결과"]}),((c==null?void 0:c.fullSaju)||(h==null?void 0:h.fullSaju))&&a.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-r from-blue-50 to-pink-50 dark:from-blue-900/20 dark:to-pink-900/20 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"사주팔자 비교"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-medium mb-2 text-blue-800 dark:text-blue-200",children:t==null?void 0:t.name}),a.jsx(xa,{sajuString:c==null?void 0:c.fullSaju,size:"medium",className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-medium mb-2 text-pink-800 dark:text-pink-200",children:s==null?void 0:s.name}),a.jsx(xa,{sajuString:h==null?void 0:h.fullSaju,size:"medium",className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm"})]})]})]}),a.jsxs("div",{className:`text-6xl font-bold ${p(r.totalScore)}`,children:[r.totalScore,"점"]}),a.jsx("p",{className:"mt-4 text-lg text-gray-700 dark:text-gray-300",children:r.advice})]}),a.jsxs("div",{className:"mb-8 bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-center text-gray-900 dark:text-gray-100",children:"궁합 분석 차트"}),a.jsx(A8,{data:{categories:r.categories,person1Name:(t==null?void 0:t.name)||"",person2Name:(s==null?void 0:s.name)||""}})]}),r.detailedAnalysis&&a.jsxs("div",{className:"mb-8 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-center text-gray-900 dark:text-gray-100",children:"🌟 20개 항목 종합 궁합 차트"}),a.jsx(gM,{data:{relationship:r.detailedAnalysis.relationship,practical:r.detailedAnalysis.practical,depth:r.detailedAnalysis.depth,special:r.detailedAnalysis.special}})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.categories.map((b,y)=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:b.name}),a.jsxs("span",{className:`font-bold ${p(b.score)}`,children:[Math.round(b.score),"점"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 mb-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${b.score>=80?"bg-green-500":b.score>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${b.score}%`}})}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.description})]},y))}),a.jsxs("div",{className:"mt-8 p-6 bg-purple-50 dark:bg-purple-900/30 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:"💡 궁합 개선 팁"}),a.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[a.jsx("li",{children:"• 서로의 차이를 인정하고 존중하세요"}),a.jsx("li",{children:"• 대화를 통해 서로를 이해하려 노력하세요"}),a.jsx("li",{children:"• 공통의 취미나 관심사를 찾아보세요"}),a.jsx("li",{children:"• 감사하는 마음을 자주 표현하세요"})]})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"📊 분석 기준"}),a.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsx("li",{children:"• 십신(十神) 관계 분석"}),a.jsx("li",{children:"• 오행 상생상극 체크"}),a.jsx("li",{children:"• 지지 삼합/육합/충 분석"}),a.jsx("li",{children:"• 음양 조화도 계산"})]})]}),a.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"🎯 핵심 포인트"}),a.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsx("li",{children:"• 일간의 음양 조화"}),a.jsx("li",{children:"• 오행 균형 보완 관계"}),a.jsx("li",{children:"• 재성/관성 분포"}),a.jsx("li",{children:"• 미래 발전 가능성"})]})]})]}),r.detailedAnalysis&&a.jsx(D8,{relationshipAnalysis:r.detailedAnalysis.relationship,practicalAnalysis:r.detailedAnalysis.practical,depthAnalysis:r.detailedAnalysis.depth,specialAnalysis:r.detailedAnalysis.special})]})]})};function xM(){var w,k;const{courseId:t}=C0(),e=He(),[s,n]=j.useState(null),[r,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState(!0),[h,m]=j.useState(!1),[u,g]=j.useState([]),[f,p]=j.useState(null);j.useEffect(()=>{t&&(b(),y())},[t]);const b=async()=>{try{const M={id:t||"1",title:"사주 기초 입문 과정",description:"사주의 기본 개념부터 실전 해석까지",instructor:{name:"김사주 선생님"},lessons:[{id:"1",title:"사주란 무엇인가?",type:"video",duration:1200,videoUrl:"/videos/lesson1.mp4"},{id:"2",title:"천간과 지지의 이해",type:"text",duration:900,content:"천간과 지지는 사주의 기본 구성 요소입니다..."},{id:"3",title:"기초 이론 퀴즈",type:"quiz",duration:600,quiz:{questions:[{question:"천간은 몇 개입니까?",options:["8개","10개","12개","14개"],correctAnswer:1},{question:"지지는 몇 개입니까?",options:["10개","12개","14개","16개"],correctAnswer:1}]}},{id:"4",title:"오행의 상생상극",type:"video",duration:1500,videoUrl:"/videos/lesson4.mp4"}]};n(M),l(M.lessons[0]),d(!1)}catch(M){console.error("강좌 로딩 실패:",M),d(!1)}},y=async()=>{try{i({courseId:t||"1",enrollmentId:"enrollment-1",progress:25,completedLessons:1,totalLessons:4,currentLessonId:"2",lessonProgress:[{lessonId:"1",completed:!0,completedAt:"2024-01-01",timeSpent:1200},{lessonId:"2",completed:!1,timeSpent:300},{lessonId:"3",completed:!1,timeSpent:0},{lessonId:"4",completed:!1,timeSpent:0}]})}catch(M){console.error("진도 로딩 실패:",M)}},v=async(M,E)=>{if(!r)return;const A={...r},O=A.lessonProgress.findIndex(R=>R.lessonId===M);O>=0&&(A.lessonProgress[O]={...A.lessonProgress[O],completed:!0,completedAt:new Date().toISOString(),score:E},A.completedLessons=A.lessonProgress.filter(R=>R.completed).length,A.progress=Math.round(A.completedLessons/A.totalLessons*100),i(A))},N=M=>{const E=s==null?void 0:s.lessons.find(A=>A.id===M);E&&(l(E),m(!1),g([]),p(null))},S=()=>{if(!(o!=null&&o.quiz))return;let M=0;o.quiz.questions.forEach((A,O)=>{u[O]===A.correctAnswer&&M++});const E=Math.round(M/o.quiz.questions.length*100);p(E),E>=70&&v(o.id,E)},C=M=>{const E=Math.floor(M/60),A=M%60;return`${E}:${A.toString().padStart(2,"0")}`},_=(M,E)=>{if(E)return Ra;switch(M){case"video":return zv;case"text":return yv;case"quiz":return ld;default:return We}};return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"강좌를 불러오는 중..."})]})}):s?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>e("/dashboard"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx(av,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.title}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.instructor.name})]})]}),r&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.completedLessons,"/",r.totalLessons," 완료"]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.progress,"% 진행"]})]}),a.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${r.progress}%`}})})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"강의 목록"}),a.jsx("div",{className:"space-y-2",children:s.lessons.map((M,E)=>{const A=r==null?void 0:r.lessonProgress.find(D=>D.lessonId===M.id),O=(A==null?void 0:A.completed)||!1,R=_(M.type,O),T=(o==null?void 0:o.id)===M.id;return a.jsx("button",{onClick:()=>N(M.id),className:`w-full text-left p-3 rounded-lg transition-colors ${T?"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(R,{className:`h-5 w-5 ${O?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:`text-sm font-medium truncate ${T?"text-purple-700 dark:text-purple-300":"text-gray-900 dark:text-white"}`,children:[E+1,". ",M.title]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:C(M.duration)})]})]})},M.id)})})]})}),a.jsx("div",{className:"lg:col-span-3",children:o&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:o.title}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(pn,{className:"h-4 w-4 mr-1"}),C(o.duration)]}),a.jsx("span",{className:"capitalize",children:o.type==="video"?"동영상":o.type==="text"?"텍스트":"퀴즈"})]})]}),((w=r==null?void 0:r.lessonProgress.find(M=>M.lessonId===o.id))==null?void 0:w.completed)&&a.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[a.jsx(Ra,{className:"h-6 w-6 mr-2"}),a.jsx("span",{className:"font-medium",children:"완료"})]})]})}),a.jsxs("div",{className:"p-6",children:[o.type==="video"&&a.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg flex items-center justify-center mb-6",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx(ja,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg",children:"동영상 플레이어"}),a.jsx("p",{className:"text-sm opacity-75",children:"실제 구현 시 video 태그로 교체됩니다"})]})}),o.type==="text"&&o.content&&a.jsx("div",{className:"prose dark:prose-invert max-w-none",children:a.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:o.content})}),o.type==="quiz"&&o.quiz&&a.jsx("div",{className:"space-y-6",children:h?a.jsxs("div",{children:[o.quiz.questions.map((M,E)=>a.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:[E+1,". ",M.question]}),a.jsx("div",{className:"space-y-2",children:M.options.map((A,O)=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:`question-${E}`,value:O,onChange:()=>{const R=[...u];R[E]=O,g(R)},className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:A})]},O))})]},E)),f===null?a.jsx("button",{onClick:S,disabled:u.length!==o.quiz.questions.length,className:"w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"제출하기"}):a.jsxs("div",{className:"text-center py-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx(Js,{className:"h-12 w-12 text-yellow-500 mx-auto mb-2"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"퀴즈 완료!"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:[f,"점"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:f>=70?"합격입니다! 🎉":"70점 이상이 필요합니다. 다시 시도해보세요."})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ld,{className:"h-16 w-16 text-purple-600 dark:text-purple-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"퀴즈를 시작하시겠습니까?"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:[o.quiz.questions.length,"개의 문제가 있습니다"]}),a.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"퀴즈 시작"})]})}),o.type!=="quiz"&&!((k=r==null?void 0:r.lessonProgress.find(M=>M.lessonId===o.id))!=null&&k.completed)&&a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("button",{onClick:()=>v(o.id),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(Ct,{className:"h-5 w-5 inline mr-2"}),"레슨 완료"]})})]})]})})]})})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(We,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"강좌를 찾을 수 없습니다"}),a.jsx("button",{onClick:()=>e("/dashboard"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"대시보드로 돌아가기"})]})})}const j0=44032,pM=55203,bM=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],yM=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],vM=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];function zx(t){const e=t.charCodeAt(0);if(e<j0||e>pM)return null;const s=e-j0,n=Math.floor(s/(21*28)),r=Math.floor(s%(21*28)/28),i=s%28;return{cho:bM[n],jung:yM[r],jong:vM[i]}}function Qa(t){return Array.from(t).map(e=>{const s=zx(e);return s?s.cho:e}).join("")}function k0(t){return Array.from(t).map(e=>{const s=zx(e);return s?s.cho+s.jung+s.jong:e}).join("")}function As(t,e){if(!e||!t)return!1;const s=Qa(t),n=Qa(e);return s.toLowerCase().includes(n.toLowerCase())}function ws(t,e){if(!t||!e)return 0;const s=t.toLowerCase(),n=e.toLowerCase();let r=0;s.includes(n)&&(r+=100),As(t,e)&&(r+=50);const i=k0(t),o=k0(e);i.toLowerCase().includes(o.toLowerCase())&&(r+=25),s.startsWith(n)&&(r+=30);const l=Qa(t),c=Qa(e);return l.toLowerCase().startsWith(c.toLowerCase())&&(r+=20),r}function Bc(t,e){if(!e||!t)return t;e.toLowerCase(),t.toLowerCase();const s=new RegExp(`(${jM(e)})`,"gi");return t.replace(s,"<mark>$1</mark>")}function jM(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const $c=(t,e)=>{let s=0;const n=e.toLowerCase(),r=t.title||"";r.toLowerCase().includes(n)?s+=100:s+=ws(r,e)*.8;const i=t.content||t.description||"";return i.toLowerCase().includes(n)?s+=50:s+=ws(i,e)*.5,Array.isArray(t.tags)&&t.tags.forEach(o=>{const l=typeof o=="string"?o:o.name;l&&(l.toLowerCase().includes(n)?s+=30:s+=ws(l,e)*.3)}),As(r,e)&&(s+=20),As(i,e)&&(s+=10),Math.round(s)},w0=async t=>{const e=new Promise((s,n)=>{setTimeout(()=>n(new Error("Events search timeout")),5e3)});try{const s=Tt.getEvents({start_date:t.startDate,end_date:t.endDate});return(await Promise.race([s,e])).filter(r=>{const i=t.query.toLowerCase(),o=r.title||"",l=r.description||"",c=o.toLowerCase().includes(i)||l.toLowerCase().includes(i),d=As(o,t.query)||As(l,t.query)||ws(o,t.query)>10||ws(l,t.query)>10;return c||d}).map(r=>({type:"event",id:r.id||"",title:r.title,content:r.description,date:r.start_time,highlight:Bc(r.title,t.query),score:$c(r,t.query),data:r})).slice(0,t.limit||10)}catch(s){return s instanceof Error&&s.message==="Events search timeout"||console.error("Failed to search events:",s),[]}},N0=(t,e)=>{const s=e.query.toLowerCase();return t.filter(n=>{const r=n.title||n.text||"",i=n.description||"",o=r.toLowerCase().includes(s)||i.toLowerCase().includes(s),l=As(r,e.query)||As(i,e.query)||ws(r,e.query)>10||ws(i,e.query)>10,c=o||l,d=(!e.startDate||new Date(n.date)>=new Date(e.startDate))&&(!e.endDate||new Date(n.date)<=new Date(e.endDate));return c&&d}).map(n=>{const r=n.title||n.text;return{type:"todo",id:n.id,title:r,content:n.description,date:n.date,highlight:Bc(r,e.query),score:$c(n,e.query),data:n}}).slice(0,e.limit||10)},S0=async t=>{const e=new Promise((s,n)=>{setTimeout(()=>n(new Error("Diaries search timeout")),5e3)});try{const s=Oe.searchDiaries({q:t.query,startDate:t.startDate,endDate:t.endDate});return(await Promise.race([s,e])).map(r=>({type:"diary",id:r.id||"",title:`${r.date} 일기`,content:r.content,date:r.date,highlight:Bc(r.content.substring(0,100),t.query),score:$c(r,t.query),data:r})).slice(0,t.limit||10)}catch(s){return s instanceof Error&&s.message==="Diaries search timeout"||console.error("Failed to search diaries:",s),[]}},kM=(t,e)=>[...t].sort((n,r)=>{if(e.sortBy==="date"){const i=n.date?new Date(n.date).getTime():0;return(r.date?new Date(r.date).getTime():0)-i}else return(r.score||0)-(n.score||0)}).slice(0,e.limit||20),Ux={searchAll:async(t,e=[])=>{performance.now();try{if(!t.query||t.query.trim().length<1)return[];if(t.query.length>100)throw new Error("검색어가 너무 깁니다. 100자 이하로 입력해주세요.");const s=t.categories||["events","todos","diaries"],n=[],r=[];if(s.includes("events")&&r.push(w0(t)),s.includes("diaries")&&r.push(S0(t)),(await Promise.allSettled(r)).forEach((l,c)=>{l.status==="fulfilled"&&n.push(...l.value)}),s.includes("todos"))try{const l=N0(e,t);n.push(...l)}catch{}return kM(n,t)}catch(s){throw console.error("Search service error:",s),new Error("검색 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.")}},searchEvents:w0,searchTodos:N0,searchDiaries:S0};function wM(t,e){const[s,n]=j.useState(t);return j.useEffect(()=>{const r=setTimeout(()=>{n(t)},e);return()=>{clearTimeout(r)}},[t,e]),s}function Wx(t){const e=new Map;return t.forEach(s=>{const n=s.type;e.has(n)||e.set(n,[]),e.get(n).push(s)}),e}function Za(t){return{all:"전체",events:"일정",todos:"할일",diaries:"일기",tags:"태그"}[t]||t}function NM(t){return new DOMParser().parseFromString(t,"text/html").body.textContent||""}function SM(t,e){return t.length<=e?t:`${t.substring(0,e)}...`}function Yx({item:t,onClick:e}){const s=()=>{const d="h-5 w-5 flex-shrink-0";switch(t.type){case"event":return a.jsx(Ut,{className:`${d} text-blue-500`});case"todo":return a.jsx(Ct,{className:`${d} text-green-500`});case"diary":return a.jsx(We,{className:`${d} text-purple-500`});case"tag":return a.jsx(Rv,{className:`${d} text-orange-500`});default:return a.jsx(Ut,{className:`${d} text-gray-500`})}},n=()=>{switch(t.type){case"event":return"bg-blue-50 dark:bg-blue-900/20 border-l-blue-500";case"todo":return"bg-green-50 dark:bg-green-900/20 border-l-green-500";case"diary":return"bg-purple-50 dark:bg-purple-900/20 border-l-purple-500";case"tag":return"bg-orange-50 dark:bg-orange-900/20 border-l-orange-500";default:return"bg-gray-50 dark:bg-gray-900/20 border-l-gray-500"}},r=d=>{if(!d)return null;try{const h=new Date(d);return V(h,"yyyy년 M월 d일",{locale:ye})}catch{return d}},i=()=>{if(t.type!=="event"||!t.data)return null;try{const d=new Date(t.data.start_time),h=new Date(t.data.end_time);return t.data.all_day?"종일":`${V(d,"HH:mm")} - ${V(h,"HH:mm")}`}catch{return null}},o=()=>{var u;if(t.type!=="todo"||!((u=t.data)!=null&&u.priority))return null;const d={high:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",low:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"},h={high:"높음",medium:"보통",low:"낮음"},m=t.data.priority;return a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${d[m]||d.low}`,children:h[m]||m})},l=()=>{var d;return t.type!=="diary"||!((d=t.data)!=null&&d.mood)?null:a.jsx("span",{className:"text-lg",children:t.data.mood})},c=d=>d?a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",dangerouslySetInnerHTML:{__html:d}}):null;return a.jsx("div",{onClick:()=>e(t),className:`px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer border-l-2 ${n()} transition-colors`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:s()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:t.title}),o(),l()]}),t.highlight&&c(t.highlight),!t.highlight&&t.content&&a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:SM(NM(t.content),100)}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[t.date&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ut,{className:"h-3 w-3"}),a.jsx("span",{children:r(t.date)})]}),i()&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(pn,{className:"h-3 w-3"}),a.jsx("span",{children:i()})]}),!1]})]}),a.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 self-start",children:[t.type==="event"&&"일정",t.type==="todo"&&"할일",t.type==="diary"&&"일기",t.type==="tag"&&"태그"]})]})})}const Gx=({onSearchFocus:t}={})=>{const e=He(),s=j.useRef(null);return j.useEffect(()=>{const n=r=>{var i;if((r.ctrlKey||r.metaKey)&&r.key==="k"&&(r.preventDefault(),t?t():e("/search")),r.key==="Escape"){const o=document.activeElement;o&&o.type==="text"&&((i=o.placeholder)!=null&&i.includes("검색"))&&(o.value="",o.blur())}if(r.key==="/"&&!r.ctrlKey&&!r.metaKey&&!r.altKey){const o=document.activeElement;!(o instanceof HTMLInputElement)&&!(o instanceof HTMLTextAreaElement)&&(r.preventDefault(),t?t():e("/search"))}};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[e,t]),{searchInputRef:s}},ei=j.forwardRef(({onSearch:t,placeholder:e="일정, 할일, 일기 검색...",className:s="",showCategories:n=!0},r)=>{const[i,o]=j.useState(""),[l,c]=j.useState([]),[d,h]=j.useState(!1),[m,u]=j.useState(!1),[g,f]=j.useState(["all"]),[p,b]=j.useState(null),{todos:y,setCurrentDate:v,setViewMode:N,setSelectedDate:S}=lt(),C=wM(i,300),_=j.useRef(null),w=j.useRef(null);Gx({onSearchFocus:()=>{var R;(R=w.current)==null||R.focus(),u(!0)}}),j.useImperativeHandle(r,()=>({focus:()=>{var R;(R=w.current)==null||R.focus(),u(!0)},clear:()=>{o(""),c([]),u(!1)}}));const k=async()=>{if(C.length<2){c([]),u(!1);return}h(!0),b(null);try{const R={query:C,categories:g.includes("all")?["events","todos","diaries"]:g,limit:15,sortBy:"relevance"},T=await Ux.searchAll(R,y);c(T),u(!0),t&&t(T)}catch(R){console.error("Search failed:",R),b("검색 중 오류가 발생했습니다.")}finally{h(!1)}};j.useEffect(()=>{k()},[C,g]),j.useEffect(()=>{const R=T=>{_.current&&!_.current.contains(T.target)&&u(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const M=R=>{R.key==="Escape"&&(u(!1),o(""))},E=R=>{if(R==="all")f(["all"]);else{const T=g.includes("all")?[R]:g.includes(R)?g.filter(D=>D!==R):[...g.filter(D=>D!=="all"),R];f(T.length===0?["all"]:T)}},A=R=>{switch(u(!1),o(""),R.type){case"event":if(R.date){const T=zn(R.date);v(T),S(T),N("day")}break;case"todo":if(R.date){const T=zn(R.date);v(T),S(T),N("day")}break;case"diary":if(R.date){const T=zn(R.date);v(T),S(T),N("dayEnhanced")}break}},O=Wx(l);return a.jsxs("div",{ref:_,className:`relative ${s}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:w,type:"text",value:i,onChange:R=>o(R.target.value),onKeyDown:M,onFocus:()=>i.length>=2&&l.length>0&&u(!0),placeholder:e,className:"w-full px-4 py-2 pl-10 pr-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsx(Un,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i&&a.jsx("button",{onClick:()=>{o(""),c([]),u(!1)},className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-600",children:a.jsx(hm,{})}),d&&a.jsx("div",{className:"absolute right-3 top-2.5",children:a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"})})]}),n&&a.jsx("div",{className:"flex gap-2 mt-2",children:["all","events","todos","diaries"].map(R=>a.jsx("button",{onClick:()=>E(R),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${g.includes(R)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:Za(R)},R))}),m&&a.jsxs("div",{className:"absolute top-full mt-2 w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg max-h-96 overflow-y-auto z-50 border border-gray-200 dark:border-gray-700",children:[p&&a.jsx("div",{className:"px-4 py-3 text-red-600 dark:text-red-400 text-sm",children:p}),!p&&l.length===0&&!d&&i.length>=2&&a.jsx("div",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 text-sm",children:"검색 결과가 없습니다."}),!p&&l.length>0&&a.jsxs("div",{children:[Array.from(O.entries()).map(([R,T])=>a.jsxs("div",{children:[a.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 font-semibold text-sm text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:[Za(R)," (",T.length,")"]}),T.map(D=>a.jsx(Yx,{item:D,onClick:A},`${D.type}-${D.id}`))]},R)),l.length>=15&&a.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 dark:text-gray-400 text-center border-t border-gray-200 dark:border-gray-600",children:"더 많은 결과가 있습니다. 검색어를 구체적으로 입력해보세요."})]})]})]})});ei.displayName="SearchBar";const CM=()=>{const t=_0(),e=He(),{todos:s,setCurrentDate:n,setViewMode:r,setSelectedDate:i}=lt(),[o,l]=j.useState(""),[c,d]=j.useState([]),[h,m]=j.useState(!1),[u,g]=j.useState(["all"]),[f,p]=j.useState("relevance"),[b,y]=j.useState({}),[v,N]=j.useState(!1),[S,C]=j.useState(null),[_,w]=j.useState([]);j.useEffect(()=>{var F;const D=new URLSearchParams(t.search).get("q"),L=(F=t.state)==null?void 0:F.results;D?(l(D),k(D)):L&&d(L)},[t]),j.useEffect(()=>{const T=localStorage.getItem("recentSearches");T&&w(JSON.parse(T))},[]);const k=async T=>{const D=T||o;if(D.length<2){d([]);return}m(!0),C(null);try{const L=await Ux.searchAll({query:D,categories:u.includes("all")?["events","todos","diaries"]:u,startDate:b.start,endDate:b.end,sortBy:f,limit:50},s);d(L);const F=[D,..._.filter(U=>U!==D)].slice(0,10);w(F),localStorage.setItem("recentSearches",JSON.stringify(F));const I=new URL(window.location.href);I.searchParams.set("q",D),window.history.replaceState({},"",I.toString())}catch(L){console.error("Search failed:",L),C("검색 중 오류가 발생했습니다.")}finally{m(!1)}},M=T=>{switch(T.type){case"event":if(T.date){const D=zn(T.date);n(D),i(D),r("day"),e("/calendar")}break;case"todo":if(T.date){const D=zn(T.date);n(D),i(D),r("day"),e("/calendar")}break;case"diary":T.date&&e(`/diary/${T.date}`);break}},E=T=>{if(T==="all")g(["all"]);else{const D=u.includes("all")?[T]:u.includes(T)?u.filter(L=>L!==T):[...u.filter(L=>L!=="all"),T];g(D.length===0?["all"]:D)}},A=T=>{l(T),k(T)},O=Wx(c),R=c.length;return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Un,{className:"h-8 w-8 text-purple-600"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"검색"})]}),a.jsx("div",{className:"flex-1 max-w-2xl",children:a.jsx(ei,{placeholder:"일정, 할일, 일기 검색...",className:"w-full",showCategories:!1,onSearch:T=>{d(T)}})}),a.jsxs("button",{onClick:()=>N(!v),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(nv,{className:"h-5 w-5"}),"필터"]})]}),o&&a.jsxs("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:["'",a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:o}),"' 검색 결과 ",R,"개"]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[a.jsxs("div",{className:`lg:w-64 ${v?"block":"hidden lg:block"}`,children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"필터"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"카테고리"}),a.jsx("div",{className:"space-y-2",children:["all","events","todos","diaries"].map(T=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:u.includes(T),onChange:()=>E(T),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:Za(T)})]},T))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"정렬"}),a.jsxs("select",{value:f,onChange:T=>p(T.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",children:[a.jsx("option",{value:"relevance",children:"관련도순"}),a.jsx("option",{value:"date",children:"날짜순"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"날짜 범위"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"date",value:b.start||"",onChange:T=>y(D=>({...D,start:T.target.value})),className:"w-full rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",placeholder:"시작 날짜"}),a.jsx("input",{type:"date",value:b.end||"",onChange:T=>y(D=>({...D,end:T.target.value})),className:"w-full rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",placeholder:"종료 날짜"})]})]}),a.jsx("button",{onClick:()=>k(),disabled:h,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:h?"검색 중...":"다시 검색"})]}),_.length>0&&a.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"최근 검색어"}),a.jsx("div",{className:"space-y-1",children:_.slice(0,5).map((T,D)=>a.jsxs("button",{onClick:()=>A(T),className:"w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:[a.jsx(pn,{className:"inline h-3 w-3 mr-2"}),T]},D))})]})]}),a.jsxs("div",{className:"flex-1",children:[S&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-700 dark:text-red-400",children:S})}),h&&a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),a.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"검색 중..."})]}),!h&&o&&c.length===0&&!S&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Un,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"검색 결과가 없습니다"}),a.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"다른 키워드로 검색해보세요."})]}),!h&&c.length>0&&a.jsx("div",{className:"space-y-6",children:Array.from(O.entries()).map(([T,D])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[Za(T)," (",D.length,")"]})}),a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:D.map(L=>a.jsx(Yx,{item:L,onClick:M},`${L.type}-${L.id}`))})]},T))}),!o&&!h&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Un,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"검색을 시작해보세요"}),a.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"일정, 할일, 일기를 검색할 수 있습니다."})]})]})]})})]})},_M=()=>{const[t,e]=j.useState(""),[s,n]=j.useState(!1),r=typeof window<"u"&&window.location.hostname==="localhost"?"/api/calendar":"https://calendar-j3vjlsr7q-johns-projects-bf5e60f3.vercel.app/api/calendar",i=async()=>{n(!0);try{const d=await(await fetch(`${r}/health`)).json();e(JSON.stringify(d,null,2))}catch(c){e(`Error: ${c}`)}n(!1)},o=async()=>{n(!0);try{const d=await(await fetch(`${r}/customers?page=1&limit=10`)).json();e(JSON.stringify(d,null,2))}catch(c){e(`Error: ${c}`)}n(!1)},l=async()=>{n(!0);try{const d=await(await fetch(`${r}/customers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"테스트 고객",birth_date:"1990-01-01",birth_time:"12:00",phone:"010-1234-5678",lunar_solar:"solar",gender:"male",memo:"API 테스트"})})).json();e(JSON.stringify(d,null,2))}catch(c){e(`Error: ${c}`)}n(!1)};return a.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"API 테스트 페이지"}),a.jsxs("div",{className:"mb-4 p-4 bg-gray-800 rounded",children:[a.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["현재 호스트: ",window.location.hostname]}),a.jsxs("p",{className:"text-sm text-gray-400",children:["API URL: ",r]})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsx("button",{onClick:i,disabled:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded disabled:opacity-50",children:"Health Check 테스트"}),a.jsx("button",{onClick:o,disabled:s,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded disabled:opacity-50 ml-4",children:"고객 목록 조회"}),a.jsx("button",{onClick:l,disabled:s,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded disabled:opacity-50 ml-4",children:"고객 생성 테스트"})]}),a.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"결과:"}),a.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:s?"로딩 중...":t||"버튼을 클릭하여 API를 테스트하세요."})]})]})},MM=({className:t})=>a.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),EM=({className:t})=>a.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})});function TM({size:t="md",showLabel:e=!1}){const{theme:s,toggleTheme:n}=Bx(),r={sm:"p-1.5 text-sm",md:"p-2 text-base",lg:"p-3 text-lg"},i={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return a.jsxs("button",{onClick:n,className:`
        ${r[t]} 
        rounded-lg 
        bg-background 
        hover:bg-muted 
        border border-border 
        transition-all duration-200 
        flex items-center space-x-2
        focus:outline-none 
        focus:ring-2 
        focus:ring-primary 
        focus:ring-offset-2
        ${e?"px-3":""}
      `,"aria-label":`${s==="light"?"다크":"라이트"} 모드로 전환`,title:`${s==="light"?"다크":"라이트"} 모드로 전환`,children:[s==="light"?a.jsx(EM,{className:`${i[t]} text-foreground`}):a.jsx(MM,{className:`${i[t]} text-foreground`}),e&&a.jsx("span",{className:"text-sm font-medium text-foreground",children:s==="light"?"다크 모드":"라이트 모드"})]})}const AM=()=>{var p,b,y,v,N,S,C,_;const[t,e]=j.useState(!1),[s,n]=j.useState(!1),r=_0(),i=He(),{isAuthenticated:o,user:l,logout:c}=Xt(),d=j.useRef(null);Gx({onSearchFocus:()=>{var w;(w=d.current)==null||w.focus()}});const h=[{path:"/",label:"캘린더",icon:"📅"},{path:"/saju",label:"사주분석",icon:"🔮"},{path:"/compatibility",label:"궁합",icon:"💑"},{path:"/settings",label:"설정",icon:"⚙️"}],m=w=>r.pathname===w,u=async()=>{await c(),n(!1),i("/")},g=()=>{i("/auth?mode=login")},f=()=>{i("/auth?mode=signup")};return r.pathname==="/auth"?null:a.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(Bs,{to:"/",className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-2xl",children:"🧭"}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]})}),a.jsxs("div",{className:"flex-1 flex items-center justify-center space-x-8",children:[a.jsx("div",{className:"hidden md:block w-96 max-w-md",children:a.jsx(ei,{ref:d,placeholder:"일정, 할일, 일기 검색... (Ctrl+K)",className:"w-full",showCategories:!1,onSearch:w=>{w.length>0&&i("/search",{state:{results:w}})}})}),a.jsx("nav",{className:"hidden lg:flex items-center space-x-1",children:h.map(w=>a.jsxs(Bs,{to:w.path,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1
                    ${m(w.path)?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[a.jsx("span",{children:w.icon}),a.jsx("span",{children:w.label})]},w.path))})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(TM,{}),o&&l?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>n(!s),className:"hidden md:flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:((b=(p=l==null?void 0:l.name)==null?void 0:p.charAt(0))==null?void 0:b.toUpperCase())||((v=(y=l==null?void 0:l.email)==null?void 0:y.charAt(0))==null?void 0:v.toUpperCase())||"U"})}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(l==null?void 0:l.name)||(l==null?void 0:l.email)||"User"}),a.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(l==null?void 0:l.name)||(l==null?void 0:l.email)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(l==null?void 0:l.email)||""})]}),a.jsxs(Bs,{to:"/settings",onClick:()=>n(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("span",{className:"mr-2",children:"⚙️"}),"설정"]}),a.jsxs(Bs,{to:"/dashboard",onClick:()=>n(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("span",{className:"mr-2",children:"📊"}),"대시보드"]}),a.jsxs("button",{onClick:u,className:"flex items-center w-full px-4 py-2 text-sm text-red-700 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[a.jsx("span",{className:"mr-2",children:"🚪"}),"로그아웃"]})]})})]}):a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[a.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:"로그인"}),a.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"회원가입"})]}),a.jsx("button",{onClick:()=>e(!t),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"메뉴 열기",children:a.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:t?a.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):a.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),t&&a.jsx("nav",{className:"md:hidden py-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsx("div",{className:"px-4 mb-3",children:a.jsx(ei,{placeholder:"검색...",className:"w-full",showCategories:!0,onSearch:w=>{w.length>0&&(i("/search",{state:{results:w}}),e(!1))}})}),h.map(w=>a.jsxs(Bs,{to:w.path,onClick:()=>e(!1),className:`px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2
                    ${m(w.path)?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[a.jsx("span",{children:w.icon}),a.jsx("span",{children:w.label})]},w.path)),a.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 mt-2",children:o&&l?a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:((S=(N=l==null?void 0:l.name)==null?void 0:N.charAt(0))==null?void 0:S.toUpperCase())||((_=(C=l==null?void 0:l.email)==null?void 0:C.charAt(0))==null?void 0:_.toUpperCase())||"U"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(l==null?void 0:l.name)||(l==null?void 0:l.email)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(l==null?void 0:l.email)||""})]})]}),a.jsx("button",{onClick:u,className:"w-full px-3 py-2 text-left text-sm text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"🚪 로그아웃"})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:g,className:"w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"로그인"}),a.jsx("button",{onClick:f,className:"w-full px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"회원가입"})]})})]})})]})})},DM=()=>{const t=new Date().getFullYear(),e={서비스:[{label:"오늘의 운세",path:"/fortune"},{label:"사주 분석",path:"/saju"},{label:"궁합 보기",path:"/compatibility"},{label:"캘린더",path:"/calendar"}],정보:[{label:"이용약관",path:"/terms"},{label:"개인정보처리방침",path:"/privacy"},{label:"공지사항",path:"/notice"},{label:"자주 묻는 질문",path:"/faq"}],회사:[{label:"회사소개",path:"/about"},{label:"채용정보",path:"/careers"},{label:"제휴문의",path:"/partnership"},{label:"고객센터",path:"/support"}]},s=[{icon:"📘",label:"Facebook",url:"https://facebook.com"},{icon:"🐦",label:"Twitter",url:"https://twitter.com"},{icon:"📷",label:"Instagram",url:"https://instagram.com"},{icon:"📺",label:"YouTube",url:"https://youtube.com"},{icon:"💬",label:"KakaoTalk",url:"#"}];return a.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"py-12 grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("span",{className:"text-2xl",children:"🧭"}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"전통 사주명리학과 현대 AI 기술을 결합한 가장 정확한 운세 서비스"}),a.jsx("div",{className:"flex space-x-3",children:s.map(n=>a.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors","aria-label":n.label,children:a.jsx("span",{className:"text-lg",children:n.icon})},n.label))})]}),Object.entries(e).map(([n,r])=>a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4",children:n}),a.jsx("ul",{className:"space-y-3",children:r.map(i=>a.jsx("li",{children:a.jsx(Bs,{to:i.path,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:i.label})},i.path))})]},n))]}),a.jsx("div",{className:"py-8 border-t border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"max-w-md mx-auto text-center md:text-left md:max-w-none md:flex md:justify-between md:items-center",children:[a.jsxs("div",{className:"mb-4 md:mb-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"운세 소식을 받아보세요"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"매주 당신의 운세와 행운의 팁을 이메일로 전달해드립니다"})]}),a.jsxs("div",{className:"flex max-w-md mx-auto md:mx-0",children:[a.jsx("input",{type:"email",placeholder:"이메일 주소 입력",className:"flex-1 px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-l-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500"}),a.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm font-medium rounded-r-lg hover:from-purple-700 hover:to-pink-700 transition-colors",children:"구독하기"})]})]})}),a.jsx("div",{className:"py-6 border-t border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["© ",t," 운명나침반. All rights reserved."]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:"Made with ❤️ in Korea"}),a.jsx("span",{children:"|"}),a.jsx("span",{children:"Version 1.0.0"})]})]})}),a.jsx("div",{className:"py-4 border-t border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsx("span",{children:"🔒"}),a.jsx("span",{children:"SSL 보안 연결"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsx("span",{children:"✅"}),a.jsx("span",{children:"개인정보보호 인증"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsx("span",{children:"🏆"}),a.jsx("span",{children:"2024 베스트 운세앱 선정"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsx("span",{children:"📊"}),a.jsx("span",{children:"누적 사용자 100만+"})]})]})})]})})};function PM(){return j.useEffect(()=>{w1()},[]),a.jsx(T8,{children:a.jsx(ep,{children:a.jsx(vy,{children:a.jsx(u1,{children:a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(AM,{}),a.jsx("main",{className:"flex-1",children:a.jsxs(tp,{children:[a.jsx(je,{path:"/",element:a.jsx(y1,{})}),a.jsx(je,{path:"/calendar",element:a.jsx(sp,{to:"/",replace:!0})}),a.jsx(je,{path:"/auth",element:a.jsx(Vp,{})}),a.jsx(je,{path:"/dashboard",element:a.jsx(n2,{})}),a.jsx(je,{path:"/admin",element:a.jsx(l2,{})}),a.jsx(je,{path:"/fortune",element:a.jsx(yj,{})}),a.jsx(je,{path:"/saju",element:a.jsx(E8,{})}),a.jsx(je,{path:"/customers",element:a.jsx(Um,{})}),a.jsx(je,{path:"/test-api",element:a.jsx(_M,{})}),a.jsx(je,{path:"/saju/six-areas",element:a.jsxs("div",{className:"p-8 text-center",children:["6대 영역 분석이 통합 시스템으로 이전되었습니다. ",a.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})}),a.jsx(je,{path:"/saju/detailed",element:a.jsxs("div",{className:"p-8 text-center",children:["17대 세부운세가 통합 시스템으로 이전되었습니다. ",a.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})}),a.jsx(je,{path:"/saju/personality",element:a.jsxs("div",{className:"p-8 text-center",children:["7대 성향 분석이 통합 시스템으로 이전되었습니다. ",a.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})}),a.jsx(je,{path:"/saju-chart",element:a.jsx(A_,{})}),a.jsx(je,{path:"/saju/interpretation",element:a.jsx(P_,{})}),a.jsx(je,{path:"/diary",element:a.jsx(Nd,{})}),a.jsx(je,{path:"/diary/:date",element:a.jsx(Nd,{})}),a.jsx(je,{path:"/settings",element:a.jsx(bj,{})}),a.jsx(je,{path:"/search",element:a.jsx(CM,{})}),a.jsx(je,{path:"/compatibility",element:a.jsx(fM,{})}),a.jsx(je,{path:"/learning/:courseId",element:a.jsx(xM,{})})]})}),a.jsx(DM,{})]})})})})})}_o.createRoot(document.getElementById("root")).render(a.jsx(Sr.StrictMode,{children:a.jsx(PM,{})}));
//# sourceMappingURL=index-d8g1Bf2_-1760016510984.js.map
