import{j as e,r as t,e as s}from"./react-vendor-BqNk2DgB.js";import{e as a,d as r,a as l}from"./index-DlHBBt9Z.js";import{f as d,i as n,s as i,e as c,a as o,b as x,c as m,d as g,k as h}from"./calendar-vendor-Bhba01pF.js";import{as as y,at as u,au as b,av as p,aw as j,ax as v,ay as N,az as f,aA as k,aB as w,aC as M,aD as D,aE as C}from"./vendor-DgwlXjR1.js";import{E}from"./EventModal-CDYvrtk5.js";import"./chart-vendor-DwU5C6A5.js";import"./document-vendor-kJlPqfgG.js";import"./three-vendor-B4pyqsGd.js";import"./qimenCalculator-Dgq1wFxg.js";const S=async(e=[])=>{const t=new Date,s=d(t,"yyyy-MM-dd");try{const[l,d]=await Promise.all([a.getEvents({start_date:s,end_date:s}),r.getDiaryByDate(s).catch(()=>null)]),i=e.filter(e=>n(new Date(e.date),t)),c=i.filter(e=>e.completed).length;return{events:l||[],todos:i,diary:d,hasScheduledEvents:((null==l?void 0:l.length)||0)>0,completedTodos:c,totalTodos:i.length}}catch(l){return{events:[],todos:[],diary:null,hasScheduledEvents:!1,completedTodos:0,totalTodos:0}}},T=async(e=[])=>{const t=new Date,s=i(t,{weekStartsOn:0}),l=c(t,{weekStartsOn:0}),n=o({start:s,end:l});try{const[t,i]=await Promise.all([a.getEvents({start_date:d(s,"yyyy-MM-dd"),end_date:d(l,"yyyy-MM-dd")}),Promise.all(n.map(e=>r.getDiaryByDate(d(e,"yyyy-MM-dd")).catch(()=>null)))]),c=e.filter(e=>{const t=new Date(e.date);return t>=s&&t<=l}),o=c.filter(e=>e.completed).length,x=c.length>0?o/c.length*100:0,m=i.filter(e=>e&&e.mood).map(e=>({date:e.date,mood:e.mood||"ðŸ˜"})),g=n.map(e=>{const s=d(e,"yyyy-MM-dd"),a=(null==t?void 0:t.filter(e=>d(new Date(e.start_time),"yyyy-MM-dd")===s))||[],r=c.filter(e=>d(new Date(e.date),"yyyy-MM-dd")===s),l=i.some(e=>e&&e.date===s);return{date:s,events:a.length,todos:r.length,diary:l}});return{completionRate:Math.round(x),totalEvents:(null==t?void 0:t.length)||0,totalDiaries:i.filter(e=>e).length,moodTrend:m,activityData:g}}catch(x){return{completionRate:0,totalEvents:0,totalDiaries:0,moodTrend:[],activityData:[]}}},$=async(e=[])=>{const t=new Date,s=x(t),l=m(t),n=o({start:s,end:l});try{const[t,i]=await Promise.all([a.getEvents({start_date:d(s,"yyyy-MM-dd"),end_date:d(l,"yyyy-MM-dd")}),Promise.all(n.map(e=>r.getDiaryByDate(d(e,"yyyy-MM-dd")).catch(()=>null)))]),c=e.filter(e=>{const t=new Date(e.date);return t>=s&&t<=l}),o=n.map(e=>{const s=d(e,"yyyy-MM-dd"),a=(null==t?void 0:t.filter(e=>d(new Date(e.start_time),"yyyy-MM-dd")===s))||[],r=c.filter(e=>d(new Date(e.date),"yyyy-MM-dd")===s),l=i.some(e=>e&&e.date===s);let n=0;return a.length>0&&(n+=1),r.length>0&&(n+=1),l&&(n+=1),r.filter(e=>e.completed).length>0&&(n+=1),{date:s,intensity:Math.min(n,4)}}),x=new Map;null==t||t.forEach(e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach(e=>{const t="string"==typeof e?e:e.name;x.set(t,(x.get(t)||0)+1)})});const m=Array.from(x.entries()).sort((e,t)=>t[1]-e[1]).slice(0,10).map(([e,t],s)=>({name:e,count:t,color:["#3B82F6","#8B5CF6","#10B981","#F59E0B","#EF4444","#6366F1","#EC4899","#14B8A6","#F97316","#84CC16"][s]||"#6B7280"}));return{activityHeatmap:o,tagDistribution:m,totalActivities:((null==t?void 0:t.length)||0)+c.length+i.filter(e=>e).length}}catch(i){return{activityHeatmap:[],tagDistribution:[],totalActivities:0}}},_=(e,t,s="ì‹œê°„ ì˜¤ë¥˜")=>{try{if(!e)return s;const a="string"==typeof e?new Date(e):e;return g(a)?d(a,t,{locale:h}):s}catch(a){return s}},A=e=>{try{if(!e)return!1;const t="string"==typeof e?new Date(e):e;return!!g(t)&&t<new Date}catch(t){return!1}};function B({todayData:t,loading:s}){const a=new Date;if(s)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-2/3"})]})]})});const r=t.totalTodos>0?Math.round(t.completedTodos/t.totalTodos*100):0;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ì˜¤ëŠ˜ì˜ ìš”ì•½"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:_(a,"yyyyë…„ Mì›” dì¼ EEEE","ë‚ ì§œ ì˜¤ë¥˜")})]}),e.jsx("div",{className:"text-2xl",children:"ðŸ“Š"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800/50 rounded-lg",children:e.jsx(y,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.events.length}),e.jsx("p",{className:"text-sm text-blue-600/70 dark:text-blue-400/70",children:"ì˜¤ëŠ˜ ì¼ì •"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800/50 rounded-lg",children:e.jsx(u,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[t.completedTodos,"/",t.totalTodos]}),e.jsx("p",{className:"text-sm text-green-600/70 dark:text-green-400/70",children:"ì™„ë£Œëœ í• ì¼"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-800/50 rounded-lg",children:e.jsx(b,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.diary?"ìž‘ì„±ë¨":"ë¯¸ìž‘ì„±"}),e.jsx("p",{className:"text-sm text-purple-600/70 dark:text-purple-400/70",children:"ì˜¤ëŠ˜ ì¼ê¸°"})]})]})]}),t.totalTodos>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"í• ì¼ ì™„ë£Œìœ¨"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"ì˜¤ëŠ˜ ì¼ì • (",t.events.length,")"]}),0===t.events.length?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(y,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"ì˜¤ëŠ˜ ì˜ˆì •ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤"})]}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.events.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(p,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.all_day?"ì¢…ì¼":_(t.start_time,"HH:mm","--:--")})]}),!t.all_day&&A(t.start_time)&&e.jsx(j,{className:"h-4 w-4 text-orange-500"})]},t.id))})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"ì˜¤ëŠ˜ í• ì¼ (",t.todos.length,")"]}),0===t.todos.length?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(u,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"ì˜¤ëŠ˜ ì˜ˆì •ëœ í• ì¼ì´ ì—†ìŠµë‹ˆë‹¤"})]}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.todos.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-4 h-4 rounded border-2 flex items-center justify-center "+(t.completed?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-500"),children:t.completed&&e.jsx(u,{className:"h-3 w-3 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate "+(t.completed?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-white"),children:t.title}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded "+("high"===t.priority?"bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400":"medium"===t.priority?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-600 dark:bg-green-900/20 dark:text-green-400"),children:"high"===t.priority?"ë†’ìŒ":"medium"===t.priority?"ë³´í†µ":"ë‚®ìŒ"})})]})]},t.id))})]}),e.jsx("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-purple-300 dark:border-purple-600",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"h-6 w-6 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.diary?"ì˜¤ëŠ˜ ì¼ê¸°ê°€ ìž‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤":"ì˜¤ëŠ˜ ì¼ê¸°ë¥¼ ìž‘ì„±í•´ë³´ì„¸ìš”"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.diary?`ê¸°ë¶„: ${t.diary.mood||"ðŸ˜"}`:"í•˜ë£¨ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° ìƒê°ì„ ì •ë¦¬í•´ë³´ì„¸ìš”"})]})]})})]})}function O({weeklyData:t,loading:s}){if(s)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-600 rounded mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-2/3"})]})]})});const a=Math.max(...t.activityData.map(e=>e.events+e.todos+(e.diary?1:0)),1);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ì£¼ê°„ í†µê³„"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ì§€ë‚œ 7ì¼ê°„ì˜ í™œë™ ìš”ì•½"})]}),e.jsx("div",{className:"text-2xl",children:"ðŸ“ˆ"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[t.completionRate,"%"]}),e.jsx("div",{className:"text-xs text-green-600/70 dark:text-green-400/70 mt-1",children:"í• ì¼ ì™„ë£Œìœ¨"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.totalEvents}),e.jsx("div",{className:"text-xs text-blue-600/70 dark:text-blue-400/70 mt-1",children:"ì´ ì¼ì •"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.totalDiaries}),e.jsx("div",{className:"text-xs text-purple-600/70 dark:text-purple-400/70 mt-1",children:"ì¼ê¸° ìž‘ì„±"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:t.moodTrend.length>0?t.moodTrend[t.moodTrend.length-1].mood:"ðŸ˜"}),e.jsx("div",{className:"text-xs text-yellow-600/70 dark:text-yellow-400/70 mt-1",children:"ìµœê·¼ ê¸°ë¶„"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:[e.jsx(v,{className:"h-5 w-5"}),"ì¼ë³„ í™œë™ëŸ‰"]}),e.jsx("div",{className:"space-y-3",children:t.activityData.map((t,s)=>{const r=t.events+t.todos+(t.diary?1:0),l=a>0?r/a*100:0,n=d(new Date(t.date),"E",{locale:h}),i=d(new Date(t.date),"d");return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-12 text-xs text-gray-500 dark:text-gray-400",children:[n," ",i]}),e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative overflow-hidden",children:[l>0&&e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-full rounded-full transition-all duration-300",style:{width:`${l}%`}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-start pl-2 gap-1",children:[t.events>0&&e.jsx(y,{className:"h-3 w-3 text-white"}),t.todos>0&&e.jsx(u,{className:"h-3 w-3 text-white"}),t.diary&&e.jsx(b,{className:"h-3 w-3 text-white"})]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 w-8 text-right",children:r})]})]},t.date)})})]}),t.moodTrend.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:"ðŸ“Š ê¸°ë¶„ íŠ¸ë Œë“œ"}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:t.moodTrend.map((t,s)=>{const a=new Date(t.date),r=d(a,"E",{locale:h}),l=d(a,"d");return e.jsxs("div",{className:"flex-shrink-0 text-center p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-1",children:t.mood}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r," ",l]})]},t.date)})})]}),0===t.totalEvents&&0===t.totalDiaries&&0===t.completionRate&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(v,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"ì´ë²ˆ ì£¼ í™œë™ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-sm",children:"ì¼ì •ì„ ì¶”ê°€í•˜ê³  ì¼ê¸°ë¥¼ ìž‘ì„±í•´ë³´ì„¸ìš”!"})]})]})}function R({monthlyData:t,loading:s}){const a=new Date,r=x(a),l=m(a),n=i(r,{weekStartsOn:0}),g=c(l,{weekStartsOn:0}),y=o({start:n,end:g});if(s)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:Array.from({length:42}).map((t,s)=>e.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-600 rounded"},s))})]})});const u=e=>{switch(e){case 0:default:return"bg-gray-100 dark:bg-gray-700";case 1:return"bg-green-200 dark:bg-green-800/50";case 2:return"bg-green-300 dark:bg-green-700/70";case 3:return"bg-green-400 dark:bg-green-600/80";case 4:return"bg-green-500 dark:bg-green-500"}};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ì›”ê°„ í™œë™ ížˆíŠ¸ë§µ"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[d(a,"yyyyë…„ Mì›”",{locale:h})," í™œë™ëŸ‰ ì‹œê°í™”"]})]}),e.jsx("div",{className:"text-2xl",children:"ðŸ“…"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "].map(t=>e.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400 font-medium",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:y.map(s=>{const n=(e=>{const s=d(e,"yyyy-MM-dd"),a=t.activityHeatmap.find(e=>e.date===s);return(null==a?void 0:a.intensity)||0})(s),i=s>=r&&s<=l,c=d(s,"yyyy-MM-dd")===d(a,"yyyy-MM-dd");return e.jsx("div",{className:`\n                aspect-square flex items-center justify-center text-xs font-medium rounded-lg transition-all cursor-pointer\n                ${i?u(n):"bg-gray-50 dark:bg-gray-800/50"}\n                ${i?"text-gray-800 dark:text-gray-200":"text-gray-400 dark:text-gray-500"}\n                ${c?"ring-2 ring-blue-500":""}\n                hover:scale-105\n              `,title:`${d(s,"Mì›” dì¼",{locale:h})}: í™œë™ëŸ‰ ${n}`,children:d(s,"d")},s.toISOString())})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ì ìŒ"}),e.jsx("div",{className:"flex gap-1",children:[0,1,2,3,4].map(t=>e.jsx("div",{className:`w-3 h-3 rounded-sm ${u(t)}`},t))}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ë§ŽìŒ"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ì´ í™œë™: ",t.totalActivities,"ê°œ"]})]}),t.tagDistribution.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"ðŸ·ï¸ ì¸ê¸° íƒœê·¸"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.tagDistribution.slice(0,6).map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.count,"íšŒ ì‚¬ìš©"]})]})]},t.name))})]}),0===t.totalActivities&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“Š"}),e.jsx("p",{children:"ì´ë²ˆ ë‹¬ í™œë™ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-sm",children:"ì¼ì •ê³¼ ì¼ê¸°ë¥¼ ìž‘ì„±í•˜ì—¬ í™œë™ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!"})]})]})}function F({actions:t,loading:s}){return s?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((t,s)=>e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-600 rounded-lg"},s))})]})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ë¹ ë¥¸ ì•¡ì…˜"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ìžì£¼ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ì„¸ìš”"})]}),e.jsx("div",{className:"text-2xl",children:"âš¡"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map(t=>e.jsxs("button",{onClick:t.action,className:`\n              flex flex-col items-center justify-center p-4 rounded-lg text-white\n              ${t.color} \n              transition-all duration-200 hover:scale-105 hover:shadow-lg\n              focus:outline-none focus:ring-4 focus:ring-opacity-50\n            `,children:[e.jsx("div",{className:"text-2xl mb-2",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-center",children:t.label})]},t.id))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-blue-500 text-lg",children:"ðŸ’¡"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"ìƒì‚°ì„± íŒ"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"ë§¤ì¼ ì•„ì¹¨ ì˜¤ëŠ˜ í•  ì¼ì„ ì •ë¦¬í•˜ê³ , ì €ë…ì—ëŠ” í•˜ë£¨ë¥¼ ë˜ëŒì•„ë³´ë©° ì¼ê¸°ë¥¼ ìž‘ì„±í•´ë³´ì„¸ìš”."})]})]})})]})}function P({isOpen:s,onClose:a,children:r,className:l=""}){return t.useEffect(()=>{const e=e=>{"Escape"===e.key&&a()};return s&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[s,a]),s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:a,children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsx("div",{className:`\n          relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl \n          max-w-lg w-full mx-4 max-h-[90vh] overflow-auto\n          transform transition-all duration-200 scale-100\n          ${l}\n        `,onClick:e=>e.stopPropagation(),children:r})]}):null}const I=[{emoji:"ðŸ˜Š",label:"ê¸°ì¨",traditional:"í¬(å–œ)",color:"wuxing-fire",element:"í™”(ç«)"},{emoji:"ðŸ˜¢",label:"ìŠ¬í””",traditional:"ì• (å“€)",color:"wuxing-metal",element:"ê¸ˆ(é‡‘)"},{emoji:"ðŸ˜ ",label:"ë¶„ë…¸",traditional:"ë…¸(æ€’)",color:"wuxing-wood",element:"ëª©(æœ¨)"},{emoji:"ðŸ˜°",label:"ë‘ë ¤ì›€",traditional:"ê³µ(æ)",color:"wuxing-water",element:"ìˆ˜(æ°´)"},{emoji:"ðŸ¤”",label:"ìƒê°",traditional:"ì‚¬(æ€)",color:"wuxing-earth",element:"í† (åœŸ)"},{emoji:"ðŸ˜Œ",label:"í‰ì˜¨",traditional:"ì •(éœ)",color:"yinyang-yin",element:"ìŒ(é™°)"},{emoji:"ðŸŒŸ",label:"í™œê¸°",traditional:"ì–‘(é™½)",color:"yinyang-yang",element:"ì–‘(é™½)"},{emoji:"ðŸ˜",label:"ë‹´ë‹´",traditional:"ë¬´(ç„¡)",color:"wuxing-metal-light",element:"ì¤‘ìš©"}];function L({isOpen:s,onClose:a,date:l,onSave:n}){const[i,c]=t.useState(l),[o,x]=t.useState(""),[m,g]=t.useState(""),[y,u]=t.useState(!1),[b,p]=t.useState(null),[j,v]=t.useState(null),[N,f]=t.useState(null),[k,w]=t.useState(!1),M=t.useCallback(async()=>{var e;u(!0),f(null);try{const e=d(l,"yyyy-MM-dd"),t=await r.getDiaryByDate(e);p(t),x(t.content),g(t.mood||"")}catch(t){404===(null==(e=t.response)?void 0:e.status)?(p(null),x(""),g("")):f("ì¼ê¸°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{u(!1)}},[l]);t.useEffect(()=>{s&&l&&M()},[l,s,M]);const D=()=>{o!==((null==b?void 0:b.content)||"")||m!==((null==b?void 0:b.mood)||"")?window.confirm("ìž‘ì„± ì¤‘ì¸ ë‚´ìš©ì´ ìžˆìŠµë‹ˆë‹¤. ì •ë§ ë‹«ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?")&&a():a()};return e.jsx(P,{isOpen:s,onClose:D,className:"max-w-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["ðŸ“ ",d(l,"yyyyë…„ Mì›” dì¼ EEEE",{locale:h})," ì¼ê¸°"]}),e.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xl",children:"âœ•"})]}),N&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["âš ï¸ ",N]})}),y&&!b&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"ðŸ“– ì¼ê¸°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸŽ­"}),"ì˜¤ëŠ˜ì˜ ë§ˆìŒì„ ì„ íƒí•´ì£¼ì„¸ìš”",e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(ì˜¤í–‰ ê°ì •ë¡  ê¸°ë°˜)"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:I.map(({emoji:t,label:s,traditional:a,color:r,element:l})=>e.jsxs("button",{onClick:()=>g(t),className:`\n                  group relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-300 hover:scale-105\n                  ${m===t?`border-${r} bg-gradient-to-br from-${r}/10 to-${r}/20 shadow-lg`:"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-800"}\n                `,style:{borderColor:m===t?`hsl(var(--${r.replace("wuxing-","").replace("yinyang-","")}))`:void 0},children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("span",{className:"text-2xl transition-transform group-hover:scale-110",children:t}),m===t&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-white",children:"âœ“"})})]}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:a}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:l}),m===t&&e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-transparent via-white/20 to-transparent opacity-50 pointer-events-none"})]},t))}),m&&e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(()=>{const t=I.find(e=>e.emoji===m);return e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[e.jsx("span",{className:"font-semibold",children:null==t?void 0:t.traditional})," - ",null==t?void 0:t.element," ê¸°ìš´ì˜ ê°ì •ìž…ë‹ˆë‹¤.","í™”(ç«)"===(null==t?void 0:t.element)&&" ë°ê³  í™œë°œí•œ ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.","ê¸ˆ(é‡‘)"===(null==t?void 0:t.element)&&" ì°¨ë¶„í•˜ê³  ì •ì œëœ ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.","ëª©(æœ¨)"===(null==t?void 0:t.element)&&" ì„±ìž¥í•˜ê³  ë°œì „í•˜ë ¤ëŠ” ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.","ìˆ˜(æ°´)"===(null==t?void 0:t.element)&&" ìœ ì—°í•˜ê³  ê¹Šì´ ìžˆëŠ” ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.","í† (åœŸ)"===(null==t?void 0:t.element)&&" ì•ˆì •ë˜ê³  ì‹ ì¤‘í•œ ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.","ìŒ(é™°)"===(null==t?void 0:t.element)&&" ê³ ìš”í•˜ê³  ë‚´í–¥ì ì¸ ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.","ì–‘(é™½)"===(null==t?void 0:t.element)&&" í™œë°œí•˜ê³  ì™¸í–¥ì ì¸ ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.","ì¤‘ìš©"===(null==t?void 0:t.element)&&" ê· í˜•ìž¡ížŒ ì¤‘ë„ì˜ ë§ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤."]})})()})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë– ì…¨ë‚˜ìš”?"}),e.jsx("textarea",{value:o,onChange:e=>x(e.target.value),placeholder:"ì˜¤ëŠ˜ ìžˆì—ˆë˜ ì¼, ëŠë‚€ ì , ê°ì‚¬í•œ ì¼ ë“±ì„ ìžìœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”...",rows:8,className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg resize-none bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[o.length," / 1000ìž"]}),e.jsx("span",{className:"text-xs text-gray-400",children:"Tab í‚¤ë¡œ ë“¤ì—¬ì“°ê¸° ê°€ëŠ¥"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:D,disabled:y,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:async()=>{if(o.trim()){u(!0),f(null);try{const e={date:d(l,"yyyy-MM-dd"),content:o.trim(),mood:m||"ðŸ˜",weather:void 0,tags:[]};let t;t=(null==b?void 0:b.id)?await r.updateDiary(b.id,e):await r.createDiary(e),n&&n(t),alert(b?"ì¼ê¸°ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.":"ì¼ê¸°ê°€ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤."),a()}catch(e){f("ì¼ê¸° ì €ìž¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{u(!1)}}},disabled:!o.trim()||y,className:`\n              px-6 py-2 rounded-lg text-white font-medium transition-colors\n              ${o.trim()&&!y?"bg-purple-600 hover:bg-purple-700":"bg-gray-400 cursor-not-allowed"}\n            `,children:y?"ì €ìž¥ ì¤‘...":b?"ìˆ˜ì •í•˜ê¸°":"ì €ìž¥í•˜ê¸°"})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["ðŸ’¡ ",e.jsx("strong",{children:"íŒ:"})," ì¼ê¸°ëŠ” ìžë™ìœ¼ë¡œ ì €ìž¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìž‘ì„± ì™„ë£Œ í›„ ë°˜ë“œì‹œ ì €ìž¥ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”."]})})]})})}function H({userId:s}){const[a,r]=t.useState(null),[l,d]=t.useState([]),[n,i]=t.useState(!0);t.useEffect(()=>{c(),o()},[s]);const c=async()=>{try{r({totalCoursesEnrolled:5,completedCourses:2,inProgressCourses:3,totalLessonsCompleted:24,totalStudyTime:14400,averageScore:87,streak:7,certificates:2}),i(!1)}catch(e){i(!1)}},o=()=>{d([{week:"1ì£¼",lessonsCompleted:2,studyTime:1800},{week:"2ì£¼",lessonsCompleted:4,studyTime:2400},{week:"3ì£¼",lessonsCompleted:6,studyTime:3200},{week:"4ì£¼",lessonsCompleted:5,studyTime:2800},{week:"5ì£¼",lessonsCompleted:7,studyTime:4200}])},x=e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?`${t}ì‹œê°„ ${s}ë¶„`:`${s}ë¶„`},m=Math.max(...l.map(e=>e.lessonsCompleted));return n?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]})]})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(b,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.completedCourses}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ì™„ë£Œí•œ ê°•ì¢Œ"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(p,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Math.floor(a.totalStudyTime/3600)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ì´ í•™ìŠµì‹œê°„"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:e.jsx(N,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.averageScore}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"í‰ê·  ì ìˆ˜"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:e.jsx(y,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.streak}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ì—°ì† í•™ìŠµì¼"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"ì£¼ê°„ í•™ìŠµ ì§„ë„"}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),"ìµœê·¼ 5ì£¼"]})]}),e.jsx("div",{className:"space-y-4",children:l.map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 text-sm text-gray-600 dark:text-gray-400",children:t.week}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[t.lessonsCompleted,"ê°œ ë ˆìŠ¨"]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:x(t.studyTime)})]}),e.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:t.lessonsCompleted/m*100+"%"}})})]})]},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ê°•ì¢Œ ì§„í–‰ í˜„í™©"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ì™„ë£Œ"}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[a.completedCourses,"ê°œ"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ì§„í–‰ì¤‘"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:[a.inProgressCourses,"ê°œ"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ì „ì²´ ì§„í–‰ë¥ "}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(a.completedCourses/a.totalCoursesEnrolled*100),"%"]})]}),e.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full",style:{width:a.completedCourses/a.totalCoursesEnrolled*100+"%"}})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ì„±ì·¨ í˜„í™©"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(f,{className:"h-8 w-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["ìˆ˜ë£Œì¦ ",a.certificates,"ê°œ"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ê°•ì¢Œ ì™„ì£¼ ì¸ì¦"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((t,s)=>e.jsx(N,{className:"h-5 w-5 "+(s<Math.floor(a.averageScore/20)?"text-yellow-500 fill-current":"text-gray-300 dark:text-gray-600")},s))}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["í‰ê·  ",a.averageScore,"ì "]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"í€´ì¦ˆ ì„±ì "})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["ðŸ”¥ ",a.streak,"ì¼ ì—°ì† í•™ìŠµ ì¤‘!"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"ê³„ì†í•´ì„œ ê¾¸ì¤€ížˆ í•™ìŠµí•´ë³´ì„¸ìš”"})]})]})]})]})]}):null}function q({course:a,progress:r,showEnrollButton:l=!0,onEnroll:d}){const n=s(),[i,c]=t.useState(!1),o=e=>0===e?"ë¬´ë£Œ":new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(e),x=async()=>{if(d){c(!0);try{await d(a.id)}catch(e){}finally{c(!1)}}},m=()=>{n(`/learning/${a.id}`)},g=()=>{n(`/learning/${a.id}`)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden group hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-purple-400 to-blue-500 overflow-hidden",children:[a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-white",children:e.jsx(b,{className:"h-16 w-16 opacity-50"})}),e.jsxs("div",{className:"absolute top-3 left-3",children:["completed"===(null==r?void 0:r.status)&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),"ì™„ë£Œ"]}),(null==r?void 0:r.isEnrolled)&&"completed"!==r.status&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"ìˆ˜ê°•ì¤‘"]}),"published"!==a.status&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),"ì¤€ë¹„ì¤‘"]})]}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white/90 text-gray-900",children:o(a.price)})}),(null==r?void 0:r.isEnrolled)&&"completed"!==r.status&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-white text-xs mb-1",children:[e.jsx("span",{children:"ì§„ë„ìœ¨"}),e.jsxs("span",{children:[r.progress,"%"]})]}),e.jsx("div",{className:"bg-white/20 rounded-full h-1",children:e.jsx("div",{className:"bg-white h-1 rounded-full transition-all duration-300",style:{width:`${r.progress}%`}})})]})})]}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:{basic:"ê¸°ì´ˆ",fortune:"ìš´ì„¸",compatibility:"ê¶í•©",professional:"ì „ë¬¸ê°€",special:"íŠ¹ê°•"}[a.category]}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:{beginner:"ì´ˆê¸‰",intermediate:"ì¤‘ê¸‰",advanced:"ê³ ê¸‰",expert:"ì „ë¬¸ê°€"}[a.level]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(D,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.instructor_name})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),(e=>{const t=Math.floor(e/60),s=e%60;return t>0?`${t}ì‹œê°„ ${s}ë¶„`:`${s}ë¶„`})(a.duration)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),a.lessons_count,"ê°œ ê°•ì˜"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"h-3 w-3 mr-1 text-yellow-500"}),e.jsx("span",{children:a.rating.toFixed(1)})]}),e.jsxs("span",{children:["(",a.enrollment_count,")"]})]})]}),l&&((null==r?void 0:r.isEnrolled)?"completed"===r.status?e.jsxs("button",{onClick:g,className:"w-full px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"ë‹¤ì‹œ ë³´ê¸°"]}):r.progress>0?e.jsxs("button",{onClick:m,className:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),"ì´ì–´ì„œ ë³´ê¸°"]}):e.jsxs("button",{onClick:g,className:"w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),"ì‹œìž‘í•˜ê¸°"]}):e.jsx("button",{onClick:x,disabled:i||"published"!==a.status,className:"w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"ìˆ˜ê°•ì‹ ì²­ ì¤‘...":0===a.price?"ë¬´ë£Œ ìˆ˜ê°•í•˜ê¸°":`${o(a.price)} ê²°ì œ`})),(null==r?void 0:r.isEnrolled)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.completedLessons,"/",r.totalLessons," ê°•ì˜ ì™„ë£Œ","completed"===r.status&&e.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:"ðŸŽ‰ ìˆ˜ë£Œ ì™„ë£Œ"})]})})]})]})}function z(){const{todos:s,addTodo:a}=l(),[r,d]=t.useState(null),[n,i]=t.useState(!0),[c,o]=t.useState(null),[x,m]=t.useState(!1),[g,h]=t.useState("overview"),[y,u]=t.useState([]),[b,p]=t.useState(!1),[j,v]=t.useState(!1),[N,f]=t.useState(!1),k=(w={onAddEvent:()=>p(!0),onAddTodo:()=>f(!0),onWriteDiary:()=>v(!0)},[{id:"add-event",label:"ì¼ì • ì¶”ê°€",icon:"ðŸ“…",color:"bg-blue-500 hover:bg-blue-600",action:()=>{var e;null==(e=null==w?void 0:w.onAddEvent)||e.call(w)}},{id:"add-todo",label:"í• ì¼ ì¶”ê°€",icon:"âœ…",color:"bg-green-500 hover:bg-green-600",action:()=>{var e;null==(e=null==w?void 0:w.onAddTodo)||e.call(w)}},{id:"write-diary",label:"ì¼ê¸° ìž‘ì„±",icon:"ðŸ“",color:"bg-purple-500 hover:bg-purple-600",action:()=>{var e;null==(e=null==w?void 0:w.onWriteDiary)||e.call(w)}},{id:"view-calendar",label:"ìº˜ë¦°ë” ë³´ê¸°",icon:"ðŸ—“ï¸",color:"bg-orange-500 hover:bg-orange-600",action:()=>{window.location.href="/calendar"}}]);var w;const M=async(e=!1)=>{e?m(!0):i(!0),o(null);try{const e=await(async(e=[])=>{try{const[t,s,a]=await Promise.all([S(e),T(e),$(e)]);return{today:t,week:s,month:a}}catch(c){throw c}})(s);d(e)}catch(t){o("ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{i(!1),m(!1)}};t.useEffect(()=>{M(),D()},[s]);const D=async()=>{try{u([{id:"1",title:"ì‚¬ì£¼ ê¸°ì´ˆ ìž…ë¬¸ ê³¼ì •",description:"ì‚¬ì£¼ì˜ ê¸°ë³¸ ê°œë…ë¶€í„° ì‹¤ì „ í•´ì„ê¹Œì§€",level:"beginner",category:"basic",status:"published",instructor_id:"1",instructor_name:"ê¹€ì‚¬ì£¼ ì„ ìƒë‹˜",price:0,rating:4.8,enrollment_count:1234,duration:240,lessons_count:12,created_at:"2024-01-01"},{id:"2",title:"ê³ ê¸‰ ì‚¬ì£¼ í•´ì„ë²•",description:"ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ì‚¬ì£¼ ë¶„ì„ ê¸°ë²•",level:"advanced",category:"professional",status:"published",instructor_id:"2",instructor_name:"ì´ìš´ì„¸ ì„ ìƒë‹˜",price:99e3,rating:4.9,enrollment_count:567,duration:480,lessons_count:24,created_at:"2024-02-01"}])}catch(e){}};return n&&!r?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-48 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-32"})]}),e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-10 w-24 bg-gray-200 dark:bg-gray-600 rounded"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"}),e.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"}),e.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"})]})]})]})}):c?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ˜µ"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:c}),e.jsx("button",{onClick:()=>M(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"ë‹¤ì‹œ ì‹œë„"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"overview"===g?"ðŸ“Š ëŒ€ì‹œë³´ë“œ":"ðŸŽ“ í•™ìŠµ í˜„í™©"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"overview"===g?"í•œëˆˆì— ë³´ëŠ” ë‚˜ì˜ í™œë™ í˜„í™©":"í•™ìŠµ ì§„ë„ì™€ ì„±ì·¨ë¥¼ í™•ì¸í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 border border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>h("overview"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+("overview"===g?"bg-purple-600 text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"ê°œìš”"}),e.jsx("button",{onClick:()=>h("learning"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+("learning"===g?"bg-purple-600 text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"í•™ìŠµ"})]}),e.jsxs("button",{onClick:()=>{M(!0)},disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[e.jsx(C,{className:"h-4 w-4 "+(x?"animate-spin":"")}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:x?"ìƒˆë¡œê³ ì¹¨ ì¤‘...":"ìƒˆë¡œê³ ì¹¨"})]})]})]}),"overview"===g?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r&&e.jsx(B,{todayData:r.today,loading:n}),r&&e.jsx(O,{weeklyData:r.week,loading:n})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(F,{actions:k,loading:n}),r&&e.jsx(R,{monthlyData:r.month,loading:n})]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(H,{userId:"user-1"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"ìˆ˜ê°• ì¤‘ì¸ ê°•ì¢Œ"}),0===y.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“š"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"ìˆ˜ê°• ì¤‘ì¸ ê°•ì¢Œê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"ìƒˆë¡œìš´ ê°•ì¢Œë¥¼ ìˆ˜ê°•í•´ë³´ì„¸ìš”"}),e.jsx("button",{onClick:()=>window.location.href="/saju",className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"ê°•ì¢Œ ë‘˜ëŸ¬ë³´ê¸°"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(t=>e.jsx(q,{course:t,progress:{courseId:t.id,enrollmentId:`enrollment-${t.id}`,progress:"1"===t.id?25:60,completedLessons:"1"===t.id?3:14,totalLessons:t.lessons_count,isEnrolled:!0,status:(t.id,"enrolled")},showEnrollButton:!1},t.id))})]})]}),r&&e.jsx("div",{className:"mt-8 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-3xl",children:"ðŸŽ¯"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"ì˜¤ëŠ˜ì˜ ì¸ì‚¬ì´íŠ¸"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[0===r.today.totalTodos&&e.jsx("p",{children:"â€¢ ì˜¤ëŠ˜ í• ì¼ì„ ì¶”ê°€í•˜ì—¬ í•˜ë£¨ë¥¼ ê³„íší•´ë³´ì„¸ìš”"}),null===r.today.diary&&e.jsx("p",{children:"â€¢ í•˜ë£¨ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° ì¼ê¸°ë¥¼ ìž‘ì„±í•´ë³´ì„¸ìš”"}),r.week.completionRate>80&&e.jsxs("p",{children:["â€¢ ì´ë²ˆ ì£¼ í• ì¼ ì™„ë£Œìœ¨ì´ ",r.week.completionRate,"%ìž…ë‹ˆë‹¤. ì •ë§ ìž˜í•˜ê³  ê³„ì‹œë„¤ìš”! ðŸŽ‰"]}),r.week.completionRate<50&&r.week.completionRate>0&&e.jsx("p",{children:"â€¢ í• ì¼ ì™„ë£Œìœ¨ì´ ë‚®ìŠµë‹ˆë‹¤. ìž‘ì€ ëª©í‘œë¶€í„° ì°¨ê·¼ì°¨ê·¼ ì‹œìž‘í•´ë³´ì„¸ìš”"}),0===r.month.totalActivities&&e.jsx("p",{children:"â€¢ ì´ë²ˆ ë‹¬ì˜ ì²« í™œë™ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!"})]})]})]})})]}),b&&e.jsx(E,{isOpen:b,onClose:()=>p(!1),onSave:e=>{p(!1),M(!0)}}),j&&e.jsx(L,{isOpen:j,date:new Date,onClose:()=>v(!1),onSave:()=>{v(!1),M(!0)}}),N&&(()=>{const e=prompt("ìƒˆë¡œìš´ í• ì¼ì„ ìž…ë ¥í•˜ì„¸ìš”:");return e&&(a({text:e,completed:!1,priority:"medium",date:(new Date).toISOString().split("T")[0]}),M(!0)),f(!1),null})()]})}export{z as default};
