const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-BbjyXVxH.js","assets/react-vendor-BqNk2DgB.js","assets/vendor-DgwlXjR1.js","assets/three-vendor-B4pyqsGd.js","assets/chart-vendor-DwU5C6A5.js","assets/document-vendor-kJlPqfgG.js","assets/calendar-vendor-Bhba01pF.js","assets/DashboardPage-DElwFRa_.js","assets/EventModal-CDYvrtk5.js","assets/qimenCalculator-Dgq1wFxg.js","assets/AdminDashboardPage-6cwPVTcl.js","assets/AdminUserManagementPage-DnGZsI2l.js","assets/CalendarPage-CfW4oCHM.js","assets/sajuSettingsStore-Btb3FM7R.js","assets/lunarCalendar-BkOe8G-7.js","assets/DiaryPage-C5CJ9unB.js","assets/SettingsPage-BMzdU3wL.js","assets/CustomerManagementPage-CRjm_qQO.js","assets/customerApi-JV4xNEmH.js","assets/FortunePage-EQF2cvVA.js","assets/SajuChartPage-BooXaPvs.js","assets/BirthInfoHeader-DjgGSw5u.js","assets/accurateSajuCalculator-Ch7eb-v_.js","assets/ui-vendor-Bq31Dxb8.js","assets/chartStyleUtils-CydmOjwm.js","assets/InterpretationPage-BAOYqvV7.js","assets/UnifiedSajuAnalysisPageWithLifeChart-B0rP-xyP.js","assets/CustomerSelector-EAfVa5RC.js","assets/CompatibilityPage-DVeyn_MX.js","assets/LearningPage-BJPRv647.js","assets/SearchPage-nn08D7xG.js","assets/TestApi-Vs5FkjBA.js","assets/QimenView-RIpCjn8j.js","assets/pdfExport-BuoXx8zM.js","assets/QimenLearningPage-Bi1yhNXG.js","assets/ZiweiPage-BMMQph8-.js","assets/TarotPage-BjAVwX9j.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,u as a,e as r,L as s,N as n,B as i,f as l,h as o,i as d,b as c}from"./react-vendor-BqNk2DgB.js";import{_ as m}from"./document-vendor-kJlPqfgG.js";import{ap as h,aq as p,ar as x}from"./vendor-DgwlXjR1.js";import{f as u}from"./calendar-vendor-Bhba01pF.js";import"./chart-vendor-DwU5C6A5.js";import"./three-vendor-B4pyqsGd.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const g=h()(p((e,t)=>({isAuthenticated:!1,isLoading:!1,error:null,user:null,token:null,login:async t=>{e({isLoading:!0,error:null});try{const a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await a.json();if(!a.ok){if(r.approval_status)throw new Error(r.error||"로그인에 실패했습니다.");throw new Error(r.error||"로그인에 실패했습니다.")}e({isAuthenticated:!0,user:r.user,token:r.token,isLoading:!1})}catch(a){throw e({error:a.message||"로그인 중 오류가 발생했습니다.",isLoading:!1}),a}},logout:async()=>{const a=t().token;try{a&&await fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${a}`}})}catch(r){}e({isAuthenticated:!1,user:null,token:null,error:null,isLoading:!1});try{localStorage.removeItem("auth-storage")}catch(r){}},signUp:async t=>{e({isLoading:!0,error:null});try{const a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await a.json();if(!a.ok)throw new Error(r.error||"회원가입에 실패했습니다.");e({isLoading:!1,error:null}),e({error:r.message||"회원가입이 완료되었습니다. 관리자 승인 후 로그인이 가능합니다."})}catch(a){throw e({error:a.message||"회원가입 중 오류가 발생했습니다.",isLoading:!1}),a}},getCurrentUser:async()=>{const a=t().token;if(a)try{const t=await fetch("/api/auth/me",{method:"GET",headers:{Authorization:`Bearer ${a}`}}),r=await t.json();if(!t.ok)throw new Error(r.error||"사용자 정보를 가져올 수 없습니다.");e({isAuthenticated:!0,user:r.user})}catch(r){e({isAuthenticated:!1,user:null,token:null})}else e({isAuthenticated:!1,user:null})},setError:t=>{e({error:t})}}),{name:"auth-storage",partialize:e=>({token:e.token,user:e.user,isAuthenticated:e.isAuthenticated})})),y=e.createContext(void 0);function j({children:a,defaultTheme:r="light",storageKey:s="sajuapp-theme"}){const[n,i]=e.useState(()=>{if("undefined"!=typeof window){const e=localStorage.getItem(s);if("light"===e||"dark"===e)return e;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return r});e.useEffect(()=>{const e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(n),localStorage.setItem(s,n)},[n,s]),e.useEffect(()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{localStorage.getItem(s)||i(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[s]);const l={theme:n,setTheme:e=>{i(e)},toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}};return t.jsx(y.Provider,{value:l,children:a})}const b=()=>{const t=e.useContext(y);if(void 0===t)throw new Error("useTheme must be used within a ThemeProvider");return t},f=({className:e})=>t.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),v=({className:e})=>t.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})});function w({size:e="md",showLabel:a=!1}){const{theme:r,toggleTheme:s}=b(),n={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return t.jsxs("button",{onClick:s,className:`\n        ${{sm:"p-1.5 text-sm",md:"p-2 text-base",lg:"p-3 text-lg"}[e]} \n        rounded-lg \n        bg-background \n        hover:bg-muted \n        border border-border \n        transition-all duration-200 \n        flex items-center space-x-2\n        focus:outline-none \n        focus:ring-2 \n        focus:ring-primary \n        focus:ring-offset-2\n        ${a?"px-3":""}\n      `,"aria-label":("light"===r?"다크":"라이트")+" 모드로 전환",title:("light"===r?"다크":"라이트")+" 모드로 전환",children:["light"===r?t.jsx(v,{className:`${n[e]} text-foreground`}):t.jsx(f,{className:`${n[e]} text-foreground`}),a&&t.jsx("span",{className:"text-sm font-medium text-foreground",children:"light"===r?"다크 모드":"라이트 모드"})]})}const k=()=>{var n,i,l,o,d,c,m,h;const[p,x]=e.useState(!1),[u,y]=e.useState(!1),j=a(),b=r(),{isAuthenticated:f,user:v,logout:k}=g(),N=[{path:"/",label:"캘린더",icon:"📅"},{path:"/saju",label:"사주분석",icon:"🔮"},{path:"/qimen",label:"귀문둔갑",icon:"⚡"},{path:"/ziwei",label:"자미두수",icon:"⭐"},{path:"/tarot",label:"타로",icon:"🃏"},{path:"/compatibility",label:"궁합",icon:"💑"},{path:"/settings",label:"설정",icon:"⚙️"}],_=e=>j.pathname===e,D=async()=>{await k(),y(!1),b("/")},E=()=>{b("/auth?mode=login")},A=()=>{b("/auth?mode=signup")};return"/auth"===j.pathname?null:t.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs(s,{to:"/",className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-2xl",children:"🧭"}),t.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]})}),t.jsx("div",{className:"flex-1 flex items-center justify-center",children:t.jsx("nav",{className:"hidden md:flex items-center space-x-2",children:N.map(e=>t.jsxs(s,{to:e.path,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1.5\n                    "+(_(e.path)?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[t.jsx("span",{children:e.icon}),t.jsx("span",{children:e.label})]},e.path))})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(w,{}),f&&v?t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>y(!u),className:"hidden md:flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:t.jsx("span",{className:"text-white text-sm font-medium",children:(null==(i=null==(n=null==v?void 0:v.name)?void 0:n.charAt(0))?void 0:i.toUpperCase())||(null==(o=null==(l=null==v?void 0:v.email)?void 0:l.charAt(0))?void 0:o.toUpperCase())||"U"})}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(null==v?void 0:v.name)||(null==v?void 0:v.email)||"User"}),t.jsx("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:t.jsxs("div",{className:"py-1",children:[t.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null==v?void 0:v.name)||(null==v?void 0:v.email)||"User"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(null==v?void 0:v.email)||""})]}),t.jsxs(s,{to:"/settings",onClick:()=>y(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[t.jsx("span",{className:"mr-2",children:"⚙️"}),"설정"]}),t.jsxs(s,{to:"/dashboard",onClick:()=>y(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[t.jsx("span",{className:"mr-2",children:"📊"}),"대시보드"]}),t.jsxs("button",{onClick:D,className:"flex items-center w-full px-4 py-2 text-sm text-red-700 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[t.jsx("span",{className:"mr-2",children:"🚪"}),"로그아웃"]})]})})]}):t.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[t.jsx("button",{onClick:E,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:"로그인"}),t.jsx("button",{onClick:A,className:"px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"회원가입"})]}),t.jsx("button",{onClick:()=>x(!p),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"메뉴 열기",children:t.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:p?t.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):t.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),p&&t.jsx("nav",{className:"md:hidden py-4 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex flex-col space-y-1",children:[N.map(e=>t.jsxs(s,{to:e.path,onClick:()=>x(!1),className:"px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2\n                    "+(_(e.path)?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[t.jsx("span",{children:e.icon}),t.jsx("span",{children:e.label})]},e.path)),t.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 mt-2",children:f&&v?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium",children:(null==(c=null==(d=null==v?void 0:v.name)?void 0:d.charAt(0))?void 0:c.toUpperCase())||(null==(h=null==(m=null==v?void 0:v.email)?void 0:m.charAt(0))?void 0:h.toUpperCase())||"U"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(null==v?void 0:v.name)||(null==v?void 0:v.email)||"User"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(null==v?void 0:v.email)||""})]})]}),t.jsx("button",{onClick:D,className:"w-full px-3 py-2 text-left text-sm text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"🚪 로그아웃"})]}):t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:E,className:"w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"로그인"}),t.jsx("button",{onClick:A,className:"w-full px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"회원가입"})]})})]})})]})})},N=()=>{const e=(new Date).getFullYear();return t.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"py-12 grid grid-cols-1 md:grid-cols-4 gap-8",children:[t.jsxs("div",{className:"col-span-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx("span",{className:"text-2xl",children:"🧭"}),t.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"전통 사주명리학과 현대 AI 기술을 결합한 가장 정확한 운세 서비스"}),t.jsx("div",{className:"flex space-x-3",children:[{icon:"📘",label:"Facebook",url:"https://facebook.com"},{icon:"🐦",label:"Twitter",url:"https://twitter.com"},{icon:"📷",label:"Instagram",url:"https://instagram.com"},{icon:"📺",label:"YouTube",url:"https://youtube.com"},{icon:"💬",label:"KakaoTalk",url:"#"}].map(e=>t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors","aria-label":e.label,children:t.jsx("span",{className:"text-lg",children:e.icon})},e.label))})]}),Object.entries({"서비스":[{label:"오늘의 운세",path:"/fortune"},{label:"사주 분석",path:"/saju"},{label:"궁합 보기",path:"/compatibility"},{label:"캘린더",path:"/calendar"}],"정보":[{label:"이용약관",path:"/terms"},{label:"개인정보처리방침",path:"/privacy"},{label:"공지사항",path:"/notice"},{label:"자주 묻는 질문",path:"/faq"}],"회사":[{label:"회사소개",path:"/about"},{label:"채용정보",path:"/careers"},{label:"제휴문의",path:"/partnership"},{label:"고객센터",path:"/support"}]}).map(([e,a])=>t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4",children:e}),t.jsx("ul",{className:"space-y-3",children:a.map(e=>t.jsx("li",{children:t.jsx(s,{to:e.path,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:e.label})},e.path))})]},e))]}),t.jsx("div",{className:"py-8 border-t border-gray-200 dark:border-gray-800",children:t.jsxs("div",{className:"max-w-md mx-auto text-center md:text-left md:max-w-none md:flex md:justify-between md:items-center",children:[t.jsxs("div",{className:"mb-4 md:mb-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"운세 소식을 받아보세요"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"매주 당신의 운세와 행운의 팁을 이메일로 전달해드립니다"})]}),t.jsxs("div",{className:"flex max-w-md mx-auto md:mx-0",children:[t.jsx("input",{type:"email",placeholder:"이메일 주소 입력",className:"flex-1 px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-l-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500"}),t.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm font-medium rounded-r-lg hover:from-purple-700 hover:to-pink-700 transition-colors",children:"구독하기"})]})]})}),t.jsx("div",{className:"py-6 border-t border-gray-200 dark:border-gray-800",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["© ",e," 운명나침반. All rights reserved."]}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("span",{children:"Made with ❤️ in Korea"}),t.jsx("span",{children:"|"}),t.jsx("span",{children:"Version 1.0.0"})]})]})}),t.jsx("div",{className:"py-4 border-t border-gray-200 dark:border-gray-800",children:t.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[t.jsx("span",{children:"🔒"}),t.jsx("span",{children:"SSL 보안 연결"})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[t.jsx("span",{children:"✅"}),t.jsx("span",{children:"개인정보보호 인증"})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[t.jsx("span",{children:"🏆"}),t.jsx("span",{children:"2024 베스트 운세앱 선정"})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[t.jsx("span",{children:"📊"}),t.jsx("span",{children:"누적 사용자 100만+"})]})]})})]})})},_=({children:e})=>{const{isAuthenticated:r,isLoading:s}=g(),i=a();return s?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-block animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"로딩 중..."})]})}):r?t.jsx(t.Fragment,{children:e}):t.jsx(n,{to:"/auth?mode=login",state:{from:i},replace:!0})};const D=x.create({baseURL:"/api",headers:{"Content-Type":"application/json"}}),E={getEvents:async e=>(await D.get("/events",{params:e})).data.data||[],getEvent:async e=>(await D.get(`/events/${e}`)).data.data,createEvent:async e=>(await D.post("/events",e)).data.data,updateEvent:async(e,t)=>(await D.put(`/events/${e}`,t)).data.data,deleteEvent:async e=>{await D.delete(`/events/${e}`)}},A={getTags:async()=>(await D.get("/tags")).data,getTag:async e=>(await D.get(`/tags/${e}`)).data,createTag:async e=>(await D.post("/tags",e)).data,updateTag:async(e,t)=>(await D.put(`/tags/${e}`,t)).data,deleteTag:async e=>{await D.delete(`/tags/${e}`)},addTagsToEvent:async(e,t)=>(await D.post(`/tags/events/${e}/tags`,{tagIds:t})).data,getEventTags:async e=>(await D.get(`/tags/events/${e}/tags`)).data,removeTagFromEvent:async(e,t)=>{await D.delete(`/tags/events/${e}/tags/${t}`)}},T={getComprehensiveInterpretation:async e=>{try{const t=!1?"http://localhost:4020":"",a=await fetch(`${t}/api/saju/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await a.json();if(r.success&&r.data){const{fourPillars:e,ohHaengBalance:t,interpretation:a,sajuString:s}=r.data;return{basic:{dayMaster:e.day.heaven,dayMasterStrength:"중화",yongshin:"화",gyeokguk:"정격",summary:a,sajuString:s,ohHaengBalance:t}}}throw new Error("사주 계산 실패")}catch(t){return{basic:{dayMaster:"계산중",dayMasterStrength:"분석중",yongshin:"분석중",gyeokguk:"분석중",summary:"사주 계산 중 오류가 발생했습니다.",sajuString:"계산 실패",ohHaengBalance:{wood:20,fire:20,earth:20,metal:20,water:20}}}}},getBasicAnalysis:async e=>{const t=await D.post("/saju/calculate",e);return{dayMaster:t.data.data.fourPillars.day.heaven,dayMasterStrength:"중화",yongshin:"화",gyeokguk:"정격",summary:t.data.data.interpretation}},getJohooAnalysis:async e=>({season:"봄",seasonalCharacteristics:["성장","발전"],johooNeeds:{fire:30,water:20},monthlyDetails:{},recommendations:["적극적인 활동","새로운 시작"],careerGuidance:["창의적 분야","리더십 발휘"]}),getSpiritualAnalysis:async e=>({beneficialSpirits:["천을귀인","문창귀인"],harmfulSpirits:["겁살","망신살"],dominantInfluence:"길신이 우세",mitigation:["선행 쌓기","정직한 생활"],activation:["학습과 연구","예술 활동"]}),getPersonalityAnalysis:async e=>({dominantTraits:{leadership:80,creativity:70},strengths:["리더십","창의성","추진력"],weaknesses:["성급함","완벽주의"],developmentAreas:["인내심","협력"],recommendations:["팀워크 향상","감정 조절"]}),getFortuneAnalysis:async e=>({currentYear:{overall:75,career:80,health:70},monthlyTrends:[],luckyElements:["화","토"],cautionPeriods:["7월","12월"]}),getCareerGuidance:async e=>({suitableCareers:["경영","교육","예술","IT"],avoidCareers:["반복 업무","단순 노동"],careerTiming:"30대 중반 이후 큰 성과",successFactors:["리더십","창의성","소통능력"],workEnvironment:"자율적이고 창의적인 환경"}),getRelationshipAnalysis:async e=>({marriageCompatibility:{overall:80,communication:75},relationshipPattern:"적극적이고 주도적",challenges:["성급함","고집"],advice:["상대방 배려","소통 강화"],timing:"30대 초반이 길한 시기"}),getHealthGuidance:async e=>({constitution:{type:"화체질",strength:70},vulnerabilities:["심장","소화기"],preventiveCare:["규칙적 운동","스트레스 관리"],seasonalCare:{spring:"간 건강",summer:"심장 건강"},lifestyle:["규칙적 생활","균형 잡힌 식단"]})},C={getDiaries:async e=>(await x.get("http://localhost:5002/api/diaries",{params:e,headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,getDiariesForDateRange:async(e,t)=>(await D.get("/diaries/search",{params:{startDate:e,endDate:t},headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,getDiaryByDate:async e=>(await D.get(`/diaries?date=${e}`,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,createDiary:async e=>(await D.post("/diaries",e,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,updateDiary:async(e,t)=>(await D.put(`/diaries?id=${e}`,t,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,deleteDiary:async e=>{await D.delete(`/diaries?id=${e}`,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})},searchDiaries:async e=>(await D.get("/diaries/search",{params:e,headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data},P=async()=>(await x.get("http://localhost:4012/api/calendar/todos")).data,S=async e=>(await x.post("http://localhost:4012/api/calendar/todos",e)).data,L=async(e,t)=>(await x.put(`http://localhost:4012/api/calendar/todos/${e}`,t)).data,I=async e=>{await x.delete(`http://localhost:4012/api/calendar/todos/${e}`)},M=async e=>(await x.patch(`http://localhost:4012/api/calendar/todos/${e}/toggle`)).data,O=e.createContext(void 0),z=()=>{const t=e.useContext(O);if(!t)throw new Error("useCalendar must be used within a CalendarProvider");return t},R=({children:a})=>{const[r,s]=e.useState(new Date),[n,i]=e.useState("month"),[l,o]=e.useState(null),[d,c]=e.useState([]),[m,h]=e.useState([]),[p,x]=e.useState(!1),[g]=e.useState({timezone:"Asia/Seoul",weekStartsOn:0,defaultView:"month",showLunarCalendar:!0,showFortune:!0,theme:"light",language:"ko"}),y=e=>({id:e.id,text:e.title,title:e.title,description:e.description,completed:1===e.completed||!0===e.completed,priority:e.priority,date:e.date,createdAt:e.created_at,updatedAt:e.updated_at}),j=e=>({title:e.text||e.title||"",description:e.description,date:e.date||"",priority:e.priority||"medium",completed:e.completed?1:0});e.useEffect(()=>{b()},[]);const b=async()=>{try{x(!0);const e=(await P()).map(y);h(e)}catch(e){}finally{x(!1)}},f=e.useCallback(()=>{const e=new Date(r);switch(n){case"year":e.setFullYear(r.getFullYear()-1);break;case"month":e.setMonth(r.getMonth()-1);break;case"week":e.setDate(r.getDate()-7);break;case"day":e.setDate(r.getDate()-1)}s(e)},[r,n]),v=e.useCallback(()=>{const e=new Date(r);switch(n){case"year":e.setFullYear(r.getFullYear()+1);break;case"month":e.setMonth(r.getMonth()+1);break;case"week":e.setDate(r.getDate()+7);break;case"day":e.setDate(r.getDate()+1)}s(e)},[r,n]),w=e.useCallback(()=>{s(new Date)},[]),k=e.useCallback(e=>{const t={...e,id:crypto.randomUUID(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};c(e=>[...e,t])},[]),N=e.useCallback((e,t)=>{c(a=>a.map(a=>a.id===e?{...a,...t,updated_at:(new Date).toISOString()}:a))},[]),_=e.useCallback(e=>{c(t=>t.filter(t=>t.id!==e))},[]),D=e.useCallback((e,t)=>d.filter(a=>{const r=new Date(a.start_time),s=new Date(a.end_time);return r>=e&&r<=t||s>=e&&s<=t||r<=e&&s>=t}),[d]),E=e.useCallback(async e=>{try{const t=j(e),a=await S(t),r=y(a);return h(e=>[...e,r]),r}catch(t){const a={...e,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date};return h(e=>[...e,a]),a}},[]),A=e.useCallback(async(e,t)=>{try{const a=j(t),r=await L(e,a),s=y(r);h(t=>t.map(t=>t.id===e?s:t))}catch(a){h(a=>a.map(a=>a.id===e?{...a,...t,updatedAt:new Date}:a))}},[]),T=e.useCallback(async e=>{try{await I(e),h(t=>t.filter(t=>t.id!==e))}catch(t){h(t=>t.filter(t=>t.id!==e))}},[]),C=e.useCallback(async e=>{try{const t=await M(e),a=y(t);h(t=>t.map(t=>t.id===e?a:t))}catch(t){h(t=>t.map(t=>t.id===e?{...t,completed:!t.completed,updatedAt:new Date}:t))}},[]),z=e.useCallback(e=>{const t=u(e,"yyyy-MM-dd");return m.filter(e=>e.date===t)},[m]),R={currentDate:r,viewMode:n,events:d,selectedDate:l,settings:g,todos:m,setCurrentDate:s,setViewMode:i,setSelectedDate:o,navigatePrevious:f,navigateNext:v,navigateToday:w,addEvent:k,updateEvent:N,deleteEvent:_,getEventsForDateRange:D,addTodo:E,updateTodo:A,deleteTodo:T,toggleTodo:C,getTodosForDate:z};return t.jsx(O.Provider,{value:R,children:a})},$=e.createContext(void 0),V=()=>{const t=e.useContext($);if(!t)throw new Error("useYearlyMemo must be used within a YearlyMemoProvider");return t},U=({children:a})=>{const[r,s]=e.useState([]);e.useEffect(()=>{const e=localStorage.getItem("yearlyMemos");if(e)try{const t=JSON.parse(e).map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));s(t)}catch(t){}},[]),e.useEffect(()=>{r.length>0&&localStorage.setItem("yearlyMemos",JSON.stringify(r))},[r]);const n=(e,t)=>r.filter(a=>a.year===e&&a.month===t).sort((e,t)=>(e.position||0)-(t.position||0)),i={memos:r,addMemo:e=>{const t={...e,id:`memo-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date};s(e=>[...e,t])},updateMemo:(e,t)=>{s(a=>a.map(a=>a.id===e?{...a,...t,updatedAt:new Date}:a))},deleteMemo:e=>{s(t=>t.filter(t=>t.id!==e))},toggleComplete:e=>{s(t=>t.map(t=>t.id===e?{...t,completed:!t.completed,updatedAt:new Date}:t))},getMemosByMonth:n,getMonthStatistics:(e,t)=>{const a=n(e,t),r=a.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{});return{total:a.length,byType:r,completed:a.filter(e=>e.completed).length}}};return t.jsx($.Provider,{value:i,children:a})},F=async()=>{if(!("Notification"in window))return!1;if("granted"===Notification.permission)return!0;if("denied"===Notification.permission)return!1;try{return"granted"===await Notification.requestPermission()}catch(e){return!1}},q=()=>"Notification"in window&&"granted"===Notification.permission,B=e=>{if(!q())return null;try{const t=new Notification(e.title,{body:e.body,icon:e.icon||"/favicon.ico",tag:e.tag,badge:e.badge,data:e.data,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1});return e.requireInteraction||setTimeout(()=>{t.close()},5e3),t}catch(t){return null}},W="notification-settings",Y=()=>{try{const e=localStorage.getItem(W);if(e)return JSON.parse(e)}catch(e){}return{enabled:!1,eventReminders:!0,diaryReminders:!0,todoDeadlines:!0,reminderMinutes:15}},J=e=>{try{localStorage.setItem(W,JSON.stringify(e))}catch(t){}},H=()=>{const e=Y();if(!e.enabled||!e.diaryReminders)return null;const t=new Date,a=new Date;return a.setHours(21,0,0,0),t.getHours()>=21&&a.setDate(a.getDate()+1),((e,t,a,r)=>{const s=Date.now(),n=a.getTime()-s;return n<=0||n>864e5?null:window.setTimeout(()=>{B({title:e,body:t,icon:"/favicon.ico",requireInteraction:!0,...r})},n)})("📝 일기 작성 시간","오늘 하루는 어떠셨나요? 일기를 작성해보세요.",a,{tag:"diary-reminder",data:{type:"diary"},requireInteraction:!1})},G=()=>{B({title:"🧭 운명나침반",body:"알림이 정상적으로 작동합니다!",requireInteraction:!1})},K=e.lazy(()=>m(()=>import("./AuthPage-BbjyXVxH.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Q=e.lazy(()=>m(()=>import("./DashboardPage-DElwFRa_.js"),__vite__mapDeps([7,1,2,3,4,6,8,9,5]))),Z=e.lazy(()=>m(()=>import("./AdminDashboardPage-6cwPVTcl.js"),__vite__mapDeps([10,1,2,3,4]))),X=e.lazy(()=>m(()=>import("./AdminUserManagementPage-DnGZsI2l.js"),__vite__mapDeps([11,1,2,3,4,5,6]))),ee=e.lazy(()=>m(()=>import("./CalendarPage-CfW4oCHM.js"),__vite__mapDeps([12,1,2,3,4,6,13,8,9,14,5]))),te=e.lazy(()=>m(()=>import("./DiaryPage-C5CJ9unB.js"),__vite__mapDeps([15,1,2,3,4,6]))),ae=e.lazy(()=>m(()=>import("./SettingsPage-BMzdU3wL.js"),__vite__mapDeps([16,1,2,3,4,13,17,18,5,6]))),re=e.lazy(()=>m(()=>import("./FortunePage-EQF2cvVA.js"),__vite__mapDeps([19,1,2,3,4]))),se=e.lazy(()=>m(()=>import("./SajuChartPage-BooXaPvs.js"),__vite__mapDeps([20,1,2,3,4,13,21,22,23,24,5,6]))),ne=e.lazy(()=>m(()=>import("./InterpretationPage-BAOYqvV7.js"),__vite__mapDeps([25,1,2,3,4,13,21,22,23,5,6]))),ie=e.lazy(()=>m(()=>import("./UnifiedSajuAnalysisPageWithLifeChart-B0rP-xyP.js"),__vite__mapDeps([26,1,2,3,4,24,27,18,14]))),le=e.lazy(()=>m(()=>import("./CustomerManagementPage-CRjm_qQO.js"),__vite__mapDeps([17,1,2,3,4,18]))),oe=e.lazy(()=>m(()=>import("./CompatibilityPage-DVeyn_MX.js"),__vite__mapDeps([28,1,2,3,4,27,18,22,5,6])).then(e=>({default:e.CompatibilityPage}))),de=e.lazy(()=>m(()=>import("./LearningPage-BJPRv647.js"),__vite__mapDeps([29,1,2,3,4]))),ce=e.lazy(()=>m(()=>import("./SearchPage-nn08D7xG.js"),__vite__mapDeps([30,1,2,3,4,6,5]))),me=e.lazy(()=>m(()=>import("./TestApi-Vs5FkjBA.js"),__vite__mapDeps([31,1,2,3,4]))),he=e.lazy(()=>m(()=>import("./QimenView-RIpCjn8j.js"),__vite__mapDeps([32,1,2,3,4,9,27,18,33,5]))),pe=e.lazy(()=>m(()=>import("./QimenLearningPage-Bi1yhNXG.js"),__vite__mapDeps([34,1,2,3,4]))),xe=e.lazy(()=>m(()=>import("./ZiweiPage-BMMQph8-.js"),__vite__mapDeps([35,1,2,3,4,27,18]))),ue=e.lazy(()=>m(()=>import("./TarotPage-BjAVwX9j.js"),__vite__mapDeps([36,1,2,3,4,33,5]))),ge=()=>t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"로딩 중..."})]})});function ye(){return e.useEffect(()=>{(async()=>{if(!Y().enabled)return;await F()&&H()})()},[]),t.jsx(j,{children:t.jsx(i,{children:t.jsx(R,{children:t.jsx(U,{children:t.jsxs("div",{className:"min-h-screen flex flex-col",children:[t.jsx(k,{}),t.jsx("main",{className:"flex-1",children:t.jsx(e.Suspense,{fallback:t.jsx(ge,{}),children:t.jsxs(l,{children:[t.jsx(o,{path:"/auth",element:t.jsx(K,{})}),t.jsx(o,{path:"/",element:t.jsx(_,{children:t.jsx(ee,{})})}),t.jsx(o,{path:"/calendar",element:t.jsx(n,{to:"/",replace:!0})}),t.jsx(o,{path:"/dashboard",element:t.jsx(_,{children:t.jsx(Q,{})})}),t.jsx(o,{path:"/admin",element:t.jsx(_,{children:t.jsx(Z,{})})}),t.jsx(o,{path:"/admin/users",element:t.jsx(_,{children:t.jsx(X,{})})}),t.jsx(o,{path:"/fortune",element:t.jsx(_,{children:t.jsx(re,{})})}),t.jsx(o,{path:"/saju",element:t.jsx(_,{children:t.jsx(ie,{})})}),t.jsx(o,{path:"/customers",element:t.jsx(_,{children:t.jsx(le,{})})}),t.jsx(o,{path:"/test-api",element:t.jsx(_,{children:t.jsx(me,{})})}),t.jsx(o,{path:"/saju/six-areas",element:t.jsx(_,{children:t.jsxs("div",{className:"p-8 text-center",children:["6대 영역 분석이 통합 시스템으로 이전되었습니다. ",t.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})})}),t.jsx(o,{path:"/saju/detailed",element:t.jsx(_,{children:t.jsxs("div",{className:"p-8 text-center",children:["17대 세부운세가 통합 시스템으로 이전되었습니다. ",t.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})})}),t.jsx(o,{path:"/saju/personality",element:t.jsx(_,{children:t.jsxs("div",{className:"p-8 text-center",children:["7대 성향 분석이 통합 시스템으로 이전되었습니다. ",t.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})})}),t.jsx(o,{path:"/saju-chart",element:t.jsx(_,{children:t.jsx(se,{})})}),t.jsx(o,{path:"/saju/interpretation",element:t.jsx(_,{children:t.jsx(ne,{})})}),t.jsx(o,{path:"/diary",element:t.jsx(_,{children:t.jsx(te,{})})}),t.jsx(o,{path:"/diary/:date",element:t.jsx(_,{children:t.jsx(te,{})})}),t.jsx(o,{path:"/settings",element:t.jsx(_,{children:t.jsx(ae,{})})}),t.jsx(o,{path:"/search",element:t.jsx(_,{children:t.jsx(ce,{})})}),t.jsx(o,{path:"/compatibility",element:t.jsx(_,{children:t.jsx(oe,{})})}),t.jsx(o,{path:"/learning/:courseId",element:t.jsx(_,{children:t.jsx(de,{})})}),t.jsx(o,{path:"/qimen",element:t.jsx(_,{children:t.jsx(he,{})})}),t.jsx(o,{path:"/qimen/learning",element:t.jsx(_,{children:t.jsx(pe,{})})}),t.jsx(o,{path:"/ziwei",element:t.jsx(_,{children:t.jsx(xe,{})})}),t.jsx(o,{path:"/tarot",element:t.jsx(_,{children:t.jsx(ue,{})})})]})})}),t.jsx(N,{})]})})})})})}d.createRoot(document.getElementById("root")).render(t.jsx(c.StrictMode,{children:t.jsx(ye,{})})),async function(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&confirm("새 버전이 있습니다. 업데이트하시겠습니까?")&&(t.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),e}catch(e){return}}().then(e=>{}).catch(e=>{});export{y as T,z as a,V as b,G as c,C as d,E as e,b as f,Y as g,q as h,T as i,F as r,J as s,A as t,g as u};
