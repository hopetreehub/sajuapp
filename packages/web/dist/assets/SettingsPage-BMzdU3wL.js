var e,r=Object.defineProperty;import{r as t,j as a,e as s}from"./react-vendor-BqNk2DgB.js";import{g as l,s as n,r as d,h as i,c as o,u as c,a as x}from"./index-DlHBBt9Z.js";import{u as m}from"./sajuSettingsStore-Btb3FM7R.js";import{aY as u,at as h,aZ as p,a_ as g}from"./vendor-DgwlXjR1.js";import b from"./CustomerManagementPage-CRjm_qQO.js";import"./chart-vendor-DwU5C6A5.js";import"./document-vendor-kJlPqfgG.js";import"./calendar-vendor-Bhba01pF.js";import"./three-vendor-B4pyqsGd.js";import"./customerApi-JV4xNEmH.js";function f(){const[e,r]=t.useState(l()),[s,c]=t.useState("default"),[x,m]=t.useState(!1),[g,b]=t.useState(!1);t.useEffect(()=>{"Notification"in window&&c(Notification.permission)},[]);const f=(t,a)=>{const s={...e,[t]:a};r(s),n(s),b(!0),setTimeout(()=>b(!1),2e3)};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:a.jsx(u,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"알림 설정"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"일정, 할일, 일기 알림을 관리합니다"})]})]}),g&&a.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 animate-fade-in",children:[a.jsx(h,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:"저장됨"})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-lg border",children:"granted"===s?a.jsxs("div",{className:"flex items-center gap-3 text-green-600 dark:text-green-400",children:[a.jsx(u,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 승인됨"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"브라우저 알림을 받을 수 있습니다"})]})]}):"denied"===s?a.jsxs("div",{className:"flex items-center gap-3 text-red-600 dark:text-red-400",children:[a.jsx(p,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 거부됨"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"브라우저 설정에서 알림을 허용해주세요"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 text-yellow-600 dark:text-yellow-400",children:[a.jsx(u,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 필요"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"알림을 받으려면 권한을 허용해주세요"})]})]}),a.jsx("button",{onClick:async()=>{m(!0);try{const e=await d();c(e?"granted":"denied"),e&&f("enabled",!0)}catch(e){}finally{m(!1)}},disabled:x,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 text-sm font-medium",children:x?"요청 중...":"권한 요청"})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"알림 활성화"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"모든 알림을 활성화/비활성화합니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.enabled,onChange:e=>f("enabled",e.target.checked),disabled:"granted"!==s,className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600 peer-disabled:opacity-50"})]})]}),e.enabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"일정 알림"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"예정된 일정 시작 전에 알림을 받습니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.eventReminders,onChange:e=>f("eventReminders",e.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"할일 마감 알림"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"할일 마감 시간 전에 알림을 받습니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.todoDeadlines,onChange:e=>f("todoDeadlines",e.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"일기 작성 리마인더"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"매일 저녁 9시에 일기 작성을 안내합니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.diaryReminders,onChange:e=>f("diaryReminders",e.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"알림 시간"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"일정/할일 시작/마감 몇 분 전에 알림을 받을지 설정합니다"})]}),a.jsxs("select",{value:e.reminderMinutes,onChange:e=>f("reminderMinutes",parseInt(e.target.value)),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:5,children:"5분 전"}),a.jsx("option",{value:10,children:"10분 전"}),a.jsx("option",{value:15,children:"15분 전"}),a.jsx("option",{value:30,children:"30분 전"}),a.jsx("option",{value:60,children:"1시간 전"})]})]})]})]}),e.enabled&&"granted"===s&&a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:a.jsx("button",{onClick:()=>{i()?o():alert("알림 권한이 필요합니다.")},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm font-medium",children:"📱 테스트 알림 보내기"})})]})}let j=(((e,t,a)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e=class{static async generateToCanvas(e,r,t){const a={...this.defaultOptions,...t};try{await g.toCanvas(e,r,a)}catch(s){throw new Error("QR코드를 생성할 수 없습니다.")}}static async generateToDataURL(e,r){const t={...this.defaultOptions,...r};try{return await g.toDataURL(e,t)}catch(a){throw new Error("QR코드를 생성할 수 없습니다.")}}static async generateToBlob(e,r){const t={...this.defaultOptions,width:400,...r};try{const r=await this.generateToDataURL(e,t),a=await fetch(r);return await a.blob()}catch(a){throw new Error("QR코드 파일을 생성할 수 없습니다.")}}static createReferralUrl(e,r){return`${r||window.location.origin}/auth?mode=signup&ref=${e}`}static downloadFile(e,r){const t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}static async downloadReferralQRCode(e,r){try{const t=this.createReferralUrl(e),a=await this.generateToBlob(t,r),s=`referral-qr-${e}.png`;this.downloadFile(a,s)}catch(t){throw t}}static async shareReferralQRCode(e,r){if(!navigator.share)throw new Error("이 브라우저는 공유 기능을 지원하지 않습니다.");try{const t=this.createReferralUrl(e),a=await this.generateToBlob(t,r),s=new File([a],`referral-qr-${e}.png`,{type:"image/png"});await navigator.share({title:"🔮 운명나침반 추천 QR코드",text:`추천인 코드: ${e}\n함께 가입하면 특별 혜택을 받을 수 있어요!`,url:t,files:[s]})}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;throw new Error("QR코드를 공유할 수 없습니다.")}}},"symbol"!=typeof(y="defaultOptions")?y+"":y,{width:200,margin:2,color:{dark:"#4338CA",light:"#FFFFFF"},errorCorrectionLevel:"M"}),e);var y;const k=({referralCode:e,className:r=""})=>{const s=t.useRef(null),[l,n]=t.useState(!1),[d,i]=t.useState(null),[o,c]=t.useState("idle"),[x,m]=t.useState("idle");t.useEffect(()=>{if(!e||!s.current)return;(async()=>{n(!0),i(null);try{const r=j.createReferralUrl(e);await j.generateToCanvas(s.current,r,{width:160,color:{dark:"#667eea",light:"#ffffff"}})}catch(r){i("QR코드를 생성할 수 없습니다.")}finally{n(!1)}})()},[e]);return a.jsx("div",{className:`bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600 rounded-xl p-6 text-white ${r}`,children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center justify-center",children:[a.jsx("span",{className:"mr-2",children:"📱"}),"QR코드로 쉽게 공유하기"]}),a.jsx("div",{className:"inline-block bg-white p-4 rounded-xl shadow-lg mb-4",children:l?a.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-indigo-500 border-t-transparent rounded-full"})}):d?a.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-2xl mb-2",children:"❌"}),a.jsx("div",{className:"text-xs",children:d})]})}):a.jsx("canvas",{ref:s,className:"block",style:{imageRendering:"pixelated"}})}),a.jsx("p",{className:"text-sm opacity-90 mb-4",children:"QR코드를 스캔하면 바로 가입 페이지로 이동해요!"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[a.jsx("button",{onClick:async()=>{if(e){c("downloading");try{await j.downloadReferralQRCode(e,{width:400,color:{dark:"#667eea",light:"#ffffff"}}),c("success"),setTimeout(()=>c("idle"),2e3)}catch(r){c("error"),setTimeout(()=>c("idle"),2e3)}}},disabled:"downloading"===o||l||!!d,className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 "+("downloading"===o?"bg-gray-400 cursor-not-allowed":"success"===o?"bg-green-500 hover:bg-green-600":"error"===o?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"),children:"downloading"===o?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block mr-2",children:"⏳"}),"다운로드 중..."]}):"success"===o?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"✅"}),"다운로드 완료"]}):"error"===o?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"❌"}),"다운로드 실패"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"💾"}),"PNG 다운로드"]})}),a.jsx("button",{onClick:async()=>{if(e){m("sharing");try{if("function"==typeof navigator.share)await j.shareReferralQRCode(e,{width:400,color:{dark:"#667eea",light:"#ffffff"}}),m("success");else{const r=j.createReferralUrl(e);await navigator.clipboard.writeText(r),m("success")}setTimeout(()=>m("idle"),2e3)}catch(r){m("error"),setTimeout(()=>m("idle"),2e3)}}},disabled:"sharing"===x||l||!!d,className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 "+("sharing"===x?"bg-gray-400 cursor-not-allowed":"success"===x?"bg-green-500 hover:bg-green-600":"error"===x?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"),children:"sharing"===x?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block mr-2",children:"⏳"}),"공유 중..."]}):"success"===x?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"✅"}),"공유 완료"]}):"error"===x?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"❌"}),"공유 실패"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"🔗"}),"function"==typeof navigator.share?"QR 공유하기":"링크 복사"]})})]}),a.jsx("div",{className:"mt-4 text-xs opacity-75",children:a.jsx("p",{children:"💡 QR코드를 저장해서 오프라인에서도 공유해보세요!"})})]})})},N=({className:e=""})=>{const{user:r}=c(),[s,l]=t.useState("idle"),[n,d]=t.useState(!1),i=(null==r?void 0:r.referral_code)||null,o=async()=>{if(i)try{await navigator.clipboard.writeText(i),l("copied"),setTimeout(()=>l("idle"),2e3)}catch(e){l("error"),setTimeout(()=>l("idle"),2e3)}},x=()=>{if(!i)return"";return`${window.location.origin}/auth?mode=signup&ref=${i}`},m=e=>{const r=i?`🔮 운명나침반에서 당신의 운명을 확인해보세요!\n\n추천인 코드: ${i}\n링크: ${x()}\n\n✨ 함께 가입하면 특별 혜택을 받을 수 있어요!`:"",t=x();switch(e){case"kakao":window.Kakao&&window.Kakao.Share?window.Kakao.Share.sendDefault({objectType:"text",text:r,link:{mobileWebUrl:t,webUrl:t}}):o();break;case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}`,"_blank");break;case"copy":navigator.clipboard.writeText(r),l("copied"),setTimeout(()=>l("idle"),2e3)}};return r?a.jsxs("div",{className:`space-y-6 ${e}`,children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎁"}),"내 추천 코드"]}),a.jsxs("button",{onClick:()=>{d(!n)},className:"text-sm text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 flex items-center space-x-1",children:[a.jsx("span",{children:"실적 보기"}),a.jsx("svg",{className:"w-4 h-4 transition-transform "+(n?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),i?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700 rounded-lg p-4",children:a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"text-2xl font-mono tracking-widest text-purple-700 dark:text-purple-300",children:i})})}),a.jsx("button",{onClick:o,className:"px-4 py-3 rounded-lg font-medium transition-all duration-200 "+("copied"===s?"bg-green-500 text-white":"error"===s?"bg-red-500 text-white":"bg-purple-600 hover:bg-purple-700 text-white"),children:"copied"===s?"✓ 복사됨":"error"===s?"❌ 실패":"📋 복사"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[a.jsxs("button",{onClick:()=>m("kakao"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"💬"}),a.jsx("span",{children:"카카오톡"})]}),a.jsxs("button",{onClick:()=>m("facebook"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"📘"}),a.jsx("span",{children:"페이스북"})]}),a.jsxs("button",{onClick:()=>m("twitter"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"🐦"}),a.jsx("span",{children:"트위터"})]}),a.jsxs("button",{onClick:()=>m("copy"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"📎"}),a.jsx("span",{children:"링크복사"})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:a.jsx("span",{className:"font-medium",children:"친구 추천 혜택"})}),a.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:"• 친구가 가입하면 둘 다 프리미엄 기능 1개월 무료"}),a.jsx("li",{children:"• 특별 사주 분석 리포트 제공"}),a.jsx("li",{children:"• 궁합 분석 서비스 무제한 이용"})]})]}),a.jsx(k,{referralCode:i,className:"mt-4"})]}):a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"추천 코드가 아직 생성되지 않았습니다."})})]}),n&&a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-xl p-6 border border-green-200 dark:border-green-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"📊"}),"추천 실적"]}),a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"실적 정보를 불러올 수 없습니다."})})]}),null]}):null};function v(){const e=s(),{settings:r}=x(),{setBirthInfo:l}=m(),[n,d]=t.useState(r),[i,o]=t.useState("general"),[c,u]=t.useState({birthDate:"",birthTime:"",calendarType:"solar",gender:"",birthPlace:""}),[h,p]=t.useState("idle");t.useEffect(()=>{const e=localStorage.getItem("sajuapp-personal-info");if(e)try{const r=JSON.parse(e);u(r)}catch(r){}},[]);return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground mb-6",children:"설정"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("div",{className:"w-64",children:a.jsx("nav",{className:"bg-background rounded-lg shadow-sm border border-border p-2",children:[{id:"general",label:"일반",icon:"⚙️"},{id:"calendar",label:"캘린더",icon:"📅"},{id:"diary",label:"다이어리",icon:"📝"},{id:"notifications",label:"알림",icon:"🔔"},{id:"account",label:"계정",icon:"👤"},{id:"customers",label:"고객관리",icon:"👥"}].map(e=>a.jsxs("button",{onClick:()=>o(e.id),className:`\n                    w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors\n                    ${i===e.id?"bg-primary/10 text-primary":"text-foreground hover:bg-muted"}\n                  `,children:[a.jsx("span",{className:"text-xl",children:e.icon}),a.jsx("span",{className:"font-medium",children:e.label})]},e.id))})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6",children:["general"===i&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"일반 설정"}),a.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200 dark:border-purple-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎂"}),"사주 정보 (개인화 운세를 위해 필요)"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"생년월일 *"}),a.jsx("input",{type:"date",value:c.birthDate,onChange:e=>u({...c,birthDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",placeholder:"YYYY-MM-DD"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"출생 시간 *"}),a.jsx("input",{type:"time",step:"1800",value:c.birthTime,onChange:e=>u({...c,birthTime:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"24시간 형식으로 입력해주세요 (예: 14:30)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"달력 종류 *"}),a.jsxs("select",{value:c.calendarType,onChange:e=>u({...c,calendarType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[a.jsx("option",{value:"solar",children:"양력"}),a.jsx("option",{value:"lunar",children:"음력"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"성별 *"}),a.jsxs("select",{value:c.gender,onChange:e=>u({...c,gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[a.jsx("option",{value:"",children:"선택해주세요"}),a.jsx("option",{value:"male",children:"남성"}),a.jsx("option",{value:"female",children:"여성"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"전통 사주학에서 성별에 따른 해석이 달라집니다"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"출생지 (선택사항)"}),a.jsx("input",{type:"text",value:c.birthPlace,onChange:e=>u({...c,birthPlace:e.target.value}),placeholder:"예: 서울시 강남구",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"더 정확한 시간 계산을 위해 출생지를 입력할 수 있습니다"})]}),a.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:a.jsxs("label",{className:"flex items-start cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.useTrueSolarTime||!1,onChange:e=>u({...c,useTrueSolarTime:e.target.checked}),className:"mt-1 mr-3 w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"진태양시(真太陽時) 보정 적용"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"한국 표준시와 실제 태양시의 차이(약 30분)를 보정합니다. 전통 사주학에서 권장하는 방법입니다."}),a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"💡 예: 09:15 입력 시 → 08:45로 자동 보정되어 시주 계산"})]})]})}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",a.jsx("strong",{children:"개인정보 보호:"})," 입력하신 정보는 개인화된 운세 제공을 위해서만 사용되며, 로컬에 안전하게 저장됩니다."]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"테마"}),a.jsxs("select",{value:n.theme,onChange:e=>d({...n,theme:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"light",children:"라이트"}),a.jsx("option",{value:"dark",children:"다크"}),a.jsx("option",{value:"system",children:"시스템 설정 따르기"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"언어"}),a.jsxs("select",{value:n.language,onChange:e=>d({...n,language:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"ko",children:"한국어"}),a.jsx("option",{value:"en",children:"English"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"시간대"}),a.jsxs("select",{value:n.timezone,onChange:e=>d({...n,timezone:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"Asia/Seoul",children:"서울 (GMT+9)"}),a.jsx("option",{value:"America/New_York",children:"뉴욕 (GMT-5)"}),a.jsx("option",{value:"Europe/London",children:"런던 (GMT+0)"})]})]})]}),"calendar"===i&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"캘린더 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"기본 보기"}),a.jsxs("select",{value:n.defaultView,onChange:e=>d({...n,defaultView:e.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"year",children:"년"}),a.jsx("option",{value:"month",children:"월"}),a.jsx("option",{value:"week",children:"주"}),a.jsx("option",{value:"day",children:"일"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"주 시작일"}),a.jsxs("select",{value:n.weekStartsOn,onChange:e=>d({...n,weekStartsOn:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"0",children:"일요일"}),a.jsx("option",{value:"1",children:"월요일"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.showLunarCalendar,onChange:e=>d({...n,showLunarCalendar:e.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"음력 날짜 표시"})]})}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.showFortune,onChange:e=>d({...n,showFortune:e.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"운세 정보 표시"})]})})]}),"diary"===i&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"다이어리 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"기본 공개 범위"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"private",children:"비공개"}),a.jsx("option",{value:"friends",children:"친구만"}),a.jsx("option",{value:"public",children:"전체 공개"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"일일 알림 활성화"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-7",children:"매일 저녁 9시에 다이어리 작성 알림을 받습니다."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"자동 저장"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-7",children:"작성 중인 내용을 30초마다 자동으로 저장합니다."})]})]}),"notifications"===i&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"알림 설정"}),a.jsx(f,{})]}),"account"===i&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"계정 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"이메일"}),a.jsx("input",{type:"email",defaultValue:"user@example.com",disabled:!0,className:"w-full px-3 py-2 border border-border rounded-lg bg-muted text-muted-foreground"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"사용자명"}),a.jsx("input",{type:"text",defaultValue:"홍길동",className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"프로필 사진"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center text-2xl text-muted-foreground",children:"👤"}),a.jsx("button",{className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors",children:"사진 변경"})]})]}),a.jsx("div",{className:"pt-4 border-t border-border",children:a.jsx(N,{})}),a.jsx("div",{className:"pt-4 border-t border-border",children:a.jsx("button",{className:"px-4 py-2 text-red-600 hover:bg-red-500/10 rounded-lg transition-colors",children:"계정 삭제"})})]}),"customers"===i&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"고객관리"}),a.jsx(b,{embedded:!0}),a.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[a.jsxs("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:[a.jsx("span",{className:"mr-2",children:"⚙️"}),"고객 데이터 설정"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"고객 정보 자동 백업"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"상담 알림 활성화"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"고객 생일 알림"})]})]})]})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-border flex justify-end gap-3",children:[a.jsx("button",{className:"px-6 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors",children:"취소"}),a.jsx("button",{onClick:async()=>{if("general"!==i||(c.birthDate?c.birthTime?c.gender||(alert("성별을 선택해주세요."),0):(alert("출생시간을 입력해주세요."),0):(alert("생년월일을 입력해주세요."),0))){p("saving");try{if("general"===i){localStorage.setItem("sajuapp-personal-info",JSON.stringify(c));const e={year:new Date(c.birthDate).getFullYear(),month:new Date(c.birthDate).getMonth()+1,day:new Date(c.birthDate).getDate(),hour:parseInt(c.birthTime.split(":")[0])||0,minute:parseInt(c.birthTime.split(":")[1])||0,isLunar:"lunar"===c.calendarType,isMale:"male"===c.gender,name:"male"===c.gender?"사용자(남)":"사용자(여)",useTrueSolarTime:c.useTrueSolarTime||!1};l(e);m.getState().birthInfo;window.dispatchEvent(new CustomEvent("personalInfoUpdated",{detail:c}))}localStorage.setItem("sajuapp-settings",JSON.stringify(n)),p("saved"),setTimeout(()=>{if(p("idle"),"general"===i){window.confirm("설정이 저장되었습니다. 운세를 확인하러 캘린더로 이동하시겠습니까?")&&e("/calendar")}},2e3)}catch(r){p("error"),alert("설정 저장에 실패했습니다. 다시 시도해주세요.")}}},disabled:"saving"===h,className:"px-6 py-2 rounded-lg transition-colors "+("saving"===h?"bg-gray-400 cursor-not-allowed text-white":"saved"===h?"bg-green-500 hover:bg-green-600 text-white":"bg-primary-500 hover:bg-primary-600 text-white"),children:"saving"===h?"저장 중...":"saved"===h?"✓ 저장 완료":"저장"})]})]})})]})]})})}export{v as default};
