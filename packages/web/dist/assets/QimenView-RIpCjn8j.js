import{b as e,r,j as t,o as a,m as s,n as l,D as n}from"./react-vendor-BqNk2DgB.js";import{P as d,g as o,a as i,b as c,c as x,G as g,S as m,d as u}from"./qimenCalculator-Dgq1wFxg.js";import{j as h,O as b,u as p,k as y,l as j}from"./three-vendor-B4pyqsGd.js";import{C as f}from"./CustomerSelector-EAfVa5RC.js";import{e as k}from"./pdfExport-BuoXx8zM.js";import{ap as v,aq as N}from"./vendor-DgwlXjR1.js";import{h as w}from"./document-vendor-kJlPqfgG.js";import{C as S,b as $,c as C,P as D,g as F,d as M,A as T,f as R,e as P,p as L,a as E,i as I}from"./chart-vendor-DwU5C6A5.js";import"./customerApi-JV4xNEmH.js";const A=e.memo(function({palace:e,isSelected:a,onClick:s}){const l=r.useMemo(()=>{switch(e.fortune){case"excellent":return"from-green-400 to-emerald-500 dark:from-green-500 dark:to-emerald-600";case"good":return"from-blue-400 to-cyan-500 dark:from-blue-500 dark:to-cyan-600";case"neutral":default:return"from-gray-400 to-slate-500 dark:from-gray-500 dark:to-slate-600";case"bad":return"from-orange-400 to-amber-500 dark:from-orange-500 dark:to-amber-600";case"terrible":return"from-red-400 to-rose-500 dark:from-red-500 dark:to-rose-600"}},[e.fortune]),n=r.useMemo(()=>{switch(e.fortune){case"excellent":return"üåü";case"good":return"‚ú®";case"neutral":default:return"‚öñÔ∏è";case"bad":return"‚ö†Ô∏è";case"terrible":return"‚ùå"}},[e.fortune]);return t.jsxs("button",{onClick:s,className:`\n        relative p-3 md:p-4 rounded-xl transition-all duration-300\n        ${a?"ring-4 ring-purple-500 ring-offset-2 dark:ring-offset-gray-900 scale-105 shadow-2xl":"ring-1 ring-gray-300 dark:ring-gray-700 hover:ring-2 hover:ring-purple-400 hover:scale-102 shadow-lg hover:shadow-xl"}\n        bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm\n        cursor-pointer\n      `,children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{className:`\n          text-sm font-bold px-2 py-1 rounded-full\n          bg-gradient-to-r ${l}\n          text-white\n        `,children:[e.palace,"Í∂Å"]}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:e.direction})]}),t.jsxs("div",{className:"mb-2",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"ÌåîÎ¨∏"}),t.jsx("div",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.gate})]}),t.jsxs("div",{className:"mb-2",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Íµ¨ÏÑ±"}),t.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:e.star})]}),e.spirit&&t.jsxs("div",{className:"mb-2",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"ÌåîÏã†"}),t.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:e.spirit})]}),t.jsx("div",{className:"absolute top-2 right-2 text-2xl",children:n}),t.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.tianGan,e.diZhi," ¬∑ ",e.wuXing]})}),a&&t.jsx("div",{className:"absolute inset-0 rounded-xl bg-purple-500/10 dark:bg-purple-400/10 pointer-events-none"})]})});const q=e.memo(function({chart:e,selectedPalace:a,onPalaceSelect:s}){const l=r.useCallback(e=>{s(e)},[s]),n=r.useMemo(()=>d.flatMap(r=>r.map(r=>{const s=e.palaces[r],n=a===r;return t.jsx(A,{palace:s,isSelected:n,onClick:()=>l(r)},r)})),[e.palaces,a,l]);return t.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[t.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-4 aspect-square",children:n}),t.jsx("div",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400",children:t.jsxs("div",{className:"flex justify-center items-center gap-8",children:[t.jsx("div",{children:"üß≠ Î∂ÅÏ™Ω(ÏÉÅ): 1Í∂Å"}),t.jsx("div",{children:"üß≠ ÎÇ®Ï™Ω(Ìïò): 9Í∂Å"}),t.jsx("div",{children:"üß≠ ÎèôÏ™Ω(Ï¢å): 3Í∂Å"}),t.jsx("div",{children:"üß≠ ÏÑúÏ™Ω(Ïö∞): 7Í∂Å"})]})})]})});function O({position:e,palace:a,palaceData:s,isSelected:l,onClick:n}){const d=r.useRef(null),o=r.useMemo(()=>{switch(s.fortune){case"excellent":return"#10b981";case"good":return"#3b82f6";case"neutral":default:return"#6b7280";case"bad":return"#f59e0b";case"terrible":return"#ef4444"}},[s.fortune]);return p(e=>{if(d.current&&l){const r=1+.1*Math.sin(3*e.clock.elapsedTime);d.current.scale.set(r,r,r)}else d.current&&d.current.scale.set(1,1,1)}),t.jsxs("group",{position:e,children:[t.jsx(y,{ref:d,args:[1.8,.3,1.8],onClick:n,children:t.jsx("meshStandardMaterial",{color:o,emissive:o,emissiveIntensity:l?.5:.1,roughness:.5,metalness:.3})}),t.jsxs(j,{position:[0,.3,0],fontSize:.4,color:"white",anchorX:"center",anchorY:"middle",children:[a,"Í∂Å"]}),t.jsx(j,{position:[0,-.5,0],fontSize:.25,color:"#ffffff",anchorX:"center",anchorY:"middle",children:s.direction}),t.jsx(j,{position:[0,0,1],fontSize:.2,color:"#ffff00",anchorX:"center",anchorY:"middle",children:s.star}),t.jsx(j,{position:[0,0,-1],fontSize:.2,color:"#00ffff",anchorX:"center",anchorY:"middle",children:s.gate}),t.jsx(j,{position:[-1,0,0],fontSize:.18,color:"#ff00ff",anchorX:"center",anchorY:"middle",rotation:[0,Math.PI/2,0],children:s.god}),l&&t.jsx(y,{args:[2,.4,2],children:t.jsx("meshBasicMaterial",{color:"#ffffff",wireframe:!0})})]})}function B({chart:e,selectedPalace:a,onPalaceSelect:s,autoRotate:l}){const n=r.useRef(null);p(()=>{n.current&&l&&(n.current.rotation.y+=.003)});const o=r.useMemo(()=>{const e={};return d.forEach((r,t)=>{r.forEach((r,a)=>{const s=2.5*(a-1),l=2.5*(t-1);e[r]=[s,0,l]})}),e},[]);return t.jsxs("group",{ref:n,children:[t.jsx("ambientLight",{intensity:.5}),t.jsx("pointLight",{position:[10,10,10],intensity:1}),t.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),Object.entries(e.palaces).map(([e,r])=>{const l=e,n=o[l];return t.jsx(O,{position:n,palace:l,palaceData:r,isSelected:a===l,onClick:()=>null==s?void 0:s(l)},e)}),t.jsx("gridHelper",{args:[15,15,"#444444","#222222"],position:[0,-.5,0]})]})}const z=e.memo(function({chart:e,selectedPalace:r,onPalaceSelect:a,autoRotate:s=!0}){return t.jsxs("div",{className:"w-full h-full min-h-[600px] bg-gradient-to-b from-gray-900 to-black rounded-xl overflow-hidden shadow-2xl",children:[t.jsxs(h,{camera:{position:[8,8,8],fov:50},gl:{antialias:!0},children:[t.jsx(B,{chart:e,selectedPalace:r,onPalaceSelect:a,autoRotate:s}),t.jsx(b,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:5,maxDistance:20,maxPolarAngle:Math.PI/2})]}),t.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/70 backdrop-blur-sm rounded-lg p-4 text-white text-sm",children:[t.jsx("h3",{className:"font-bold mb-2",children:"ÏÉâÏÉÅ Î≤îÎ°Ä"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),t.jsx("span",{children:"ÎåÄÍ∏∏ (Excellent)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),t.jsx("span",{children:"Í∏∏ (Good)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded"}),t.jsx("span",{children:"Ï§ëÎ¶Ω (Neutral)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),t.jsx("span",{children:"Ìùâ (Bad)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),t.jsx("span",{children:"ÎåÄÌùâ (Terrible)"})]})]}),t.jsx("h3",{className:"font-bold mt-4 mb-2",children:"ÌÖçÏä§Ìä∏ ÏÉâÏÉÅ"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-yellow-400",children:"‚óè"}),t.jsx("span",{children:"9ÏÑ± (ÏïûÎ©¥)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-cyan-400",children:"‚óè"}),t.jsx("span",{children:"8Î¨∏ (Îí∑Î©¥)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-pink-400",children:"‚óè"}),t.jsx("span",{children:"8Ïã† (Ï∏°Î©¥)"})]})]})]}),t.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 backdrop-blur-sm rounded-lg p-4 text-white text-sm",children:[t.jsx("h3",{className:"font-bold mb-2",children:"Ï°∞Ïûë Î∞©Î≤ï"}),t.jsxs("ul",{className:"space-y-1",children:[t.jsx("li",{children:"üñ±Ô∏è ÎìúÎûòÍ∑∏: ÌöåÏ†Ñ"}),t.jsx("li",{children:"üîç Ìú†: Ï§å Ïù∏/ÏïÑÏõÉ"}),t.jsx("li",{children:"üëÜ ÌÅ¥Î¶≠: Í∂Å ÏÑ†ÌÉù"}),t.jsx("li",{children:"üîÑ ÏûêÎèô ÌöåÏ†Ñ Ï§ë..."})]})]})]})});function Y({palace:e,onClose:r}){const a=o(e.gate),s=i(e.star),l=e.spirit?c(e.spirit):null,n=(()=>{switch(e.fortune){case"excellent":return{text:"ÎåÄÍ∏∏ üåü",color:"text-green-600 dark:text-green-400"};case"good":return{text:"Í∏∏ ‚ú®",color:"text-blue-600 dark:text-blue-400"};case"neutral":default:return{text:"Ìèâ ‚öñÔ∏è",color:"text-gray-600 dark:text-gray-400"};case"bad":return{text:"Ìùâ ‚ö†Ô∏è",color:"text-orange-600 dark:text-orange-400"};case"terrible":return{text:"ÎåÄÌùâ ‚ùå",color:"text-red-600 dark:text-red-400"}}})();return t.jsxs("div",{className:`p-6 rounded-xl bg-gradient-to-br ${(()=>{switch(e.fortune){case"excellent":return"from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20";case"good":return"from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20";case"neutral":default:return"from-gray-50 to-slate-50 dark:from-gray-900/20 dark:to-slate-900/20";case"bad":return"from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20";case"terrible":return"from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20"}})()} backdrop-blur-sm shadow-xl border border-gray-200 dark:border-gray-700`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:[e.palace,"Í∂Å - ",e.direction]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-2xl font-bold ${n.color}`,children:n.text}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.tianGan,e.diZhi," ¬∑ ",e.wuXing]})]})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Îã´Í∏∞",children:t.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:"üìñ Ï¢ÖÌï© Ìï¥ÏÑù"}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:e.interpretation})]}),t.jsxs("div",{className:"mb-4 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["üö™ ÌåîÎ¨∏ - ",a.name]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:a.meaning}),t.jsx("div",{className:"flex gap-2 flex-wrap mb-2",children:a.effects.positive.map((e,r)=>t.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-xs",children:["‚úÖ ",e]},r))}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:a.effects.negative.map((e,r)=>t.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-xs",children:["‚ö†Ô∏è ",e]},r))})]}),t.jsxs("div",{className:"mb-4 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["‚≠ê Íµ¨ÏÑ± - ",s.name]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[s.meaning," (",s.planet,", ",s.element,")"]}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:s.influences.map((e,r)=>t.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs",children:e},r))})]}),l&&t.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["üõ°Ô∏è ÌåîÏã† - ",l.name]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:l.meaning}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:l.characteristics.map((e,r)=>t.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs",children:e},r))})]}),e.recommendations.length>0&&t.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[t.jsx("h3",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"‚úÖ Ï∂îÏ≤ú ÌñâÎèô"}),t.jsx("ul",{className:"space-y-1",children:e.recommendations.map((e,r)=>t.jsxs("li",{className:"text-sm text-green-700 dark:text-green-400 flex items-start",children:[t.jsx("span",{className:"mr-2",children:"‚Ä¢"}),t.jsx("span",{children:e})]},r))})]}),e.warnings.length>0&&t.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[t.jsx("h3",{className:"text-lg font-bold text-red-800 dark:text-red-300 mb-2",children:"‚ö†Ô∏è Ï£ºÏùòÏÇ¨Ìï≠"}),t.jsx("ul",{className:"space-y-1",children:e.warnings.map((e,r)=>t.jsxs("li",{className:"text-sm text-red-700 dark:text-red-400 flex items-start",children:[t.jsx("span",{className:"mr-2",children:"‚Ä¢"}),t.jsx("span",{children:e})]},r))})]})]})}function _({selectedDate:e,onChange:a}){const[s,l]=r.useState(!1);return t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[t.jsx("button",{onClick:()=>l(!s),className:"px-6 py-3 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm shadow-lg hover:shadow-xl transition-all hover:scale-105 border border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÏÑ†ÌÉùÎêú ÏãúÍ∞Ñ"}),t.jsxs("div",{className:"font-bold text-gray-800 dark:text-gray-100",children:[(n=e,n.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"}))," ",(e=>e.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}))(e)]})]})]})}),t.jsx("button",{onClick:()=>{a(new Date),l(!1)},className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all hover:scale-105 font-medium",children:"ÌòÑÏû¨ ÏãúÍ∞Ñ"})]}),s&&t.jsxs("div",{className:"p-6 bg-white/90 dark:bg-gray-800/90 rounded-xl backdrop-blur-sm shadow-xl border border-gray-200 dark:border-gray-700 max-w-md mx-auto",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"ÏãúÍ∞Ñ ÏÑ†ÌÉù"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÎÇ†Ïßú"}),t.jsx("input",{type:"date",value:`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,onChange:r=>{const t=new Date(r.target.value);if(!isNaN(t.getTime())){const r=new Date(e);r.setFullYear(t.getFullYear()),r.setMonth(t.getMonth()),r.setDate(t.getDate()),a(r)}},className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ÏãúÍ∞Ñ"}),t.jsx("input",{type:"time",value:`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`,onChange:r=>{const[t,s]=r.target.value.split(":").map(Number),l=new Date(e);l.setHours(t,s),a(l)},className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:t.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:["üí° ",t.jsx("strong",{children:"Í∞ÑÏßÄ ÏãúÍ∞Ñ ÏïàÎÇ¥"}),t.jsxs("ul",{className:"mt-2 space-y-1 ml-4",children:[t.jsx("li",{children:"‚Ä¢ ÏûêÏãú(Â≠êÊôÇ): 23:00~01:00"}),t.jsx("li",{children:"‚Ä¢ Ï∂ïÏãú(‰∏ëÊôÇ): 01:00~03:00"}),t.jsx("li",{children:"‚Ä¢ Ïù∏Ïãú(ÂØÖÊôÇ): 03:00~05:00"}),t.jsx("li",{children:"‚Ä¢ Î¨òÏãú(ÂçØÊôÇ): 05:00~07:00"}),t.jsx("li",{children:"‚Ä¢ ÏßÑÏãú(Ëæ∞ÊôÇ): 07:00~09:00"}),t.jsx("li",{children:"‚Ä¢ ÏÇ¨Ïãú(Â∑≥ÊôÇ): 09:00~11:00"}),t.jsx("li",{children:"‚Ä¢ Ïò§Ïãú(ÂçàÊôÇ): 11:00~13:00"}),t.jsx("li",{children:"‚Ä¢ ÎØ∏Ïãú(Êú™ÊôÇ): 13:00~15:00"}),t.jsx("li",{children:"‚Ä¢ Ïã†Ïãú(Áî≥ÊôÇ): 15:00~17:00"}),t.jsx("li",{children:"‚Ä¢ Ïú†Ïãú(ÈÖâÊôÇ): 17:00~19:00"}),t.jsx("li",{children:"‚Ä¢ Ïà†Ïãú(ÊàåÊôÇ): 19:00~21:00"}),t.jsx("li",{children:"‚Ä¢ Ìï¥Ïãú(‰∫•ÊôÇ): 21:00~23:00"})]})]})})]}),t.jsx("button",{onClick:()=>l(!1),className:"mt-4 w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 rounded-lg font-medium transition-colors",children:"Îã´Í∏∞"})]})]});var n}function W({onClose:e}){const[a,s]=r.useState("what");return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"üìñ Í∑ÄÎ¨∏ÎëîÍ∞ë Ï¥àÎ≥¥Ïûê Í∞ÄÏù¥Îìú"}),t.jsx("p",{className:"text-purple-100",children:"Ï≤òÏùåÏù¥ÏãúÎùºÎ©¥ Ïó¨Í∏∞ÏÑú ÏãúÏûëÌïòÏÑ∏Ïöî!"})]}),t.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"Îã´Í∏∞",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[t.jsx("button",{onClick:()=>s("what"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("what"===a?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"Í∑ÄÎ¨∏ÎëîÍ∞ëÏù¥ÎûÄ?"}),t.jsx("button",{onClick:()=>s("how"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("how"===a?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"ÏÇ¨Ïö© Î∞©Î≤ï"}),t.jsx("button",{onClick:()=>s("terms"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("terms"===a?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"Ïö©Ïñ¥ ÏÑ§Î™Ö"})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-200px)]",children:["what"===a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"üîÆ Í∑ÄÎ¨∏ÎëîÍ∞ëÏù¥ÎûÄ?"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:["Í∑ÄÎ¨∏ÎëîÍ∞ë(Â•áÈñÄÈÅÅÁî≤)ÏùÄ ",t.jsx("strong",{children:"ÏãúÍ∞ÑÍ≥º Î∞©ÏúÑÏùò Í∏∏Ìùâ"}),"ÏùÑ ÏïåÎ†§Ï£ºÎäî Ï§ëÍµ≠ Í≥†ÎåÄ Ï†êÏà†ÏûÖÎãàÎã§. ÎßàÏπò ÎÇ†Ïî® ÏòàÎ≥¥Ï≤òÎüº, ",t.jsx("strong",{children:"ÌäπÏ†ï ÏãúÍ∞ÑÍ≥º Î∞©Ìñ•Ïù¥ ÎÇòÏóêÍ≤å Ïú†Î¶¨ÌïúÏßÄ Î∂àÎ¶¨ÌïúÏßÄ"}),"Î•º ÎØ∏Î¶¨ Ïïå Ïàò ÏûàÍ≤å Ìï¥Ï§çÎãàÎã§."]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"üí° Ïñ¥ÎîîÏóê ÌôúÏö©ÌïòÎÇòÏöî?"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx("div",{className:"text-2xl mb-2",children:"üöó"}),t.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-1",children:"Ïó¨Ìñâ/Ï∂úÏû•"}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Ïñ¥Îäê Î∞©Ìñ•ÏúºÎ°ú Í∞à Îïå Í∏∏ÌïúÏßÄ ÌôïÏù∏"})]}),t.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("div",{className:"text-2xl mb-2",children:"üíº"}),t.jsx("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-1",children:"ÎπÑÏ¶àÎãàÏä§"}),t.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Ï§ëÏöîÌïú ÎØ∏ÌåÖ Î∞©Ìñ•Í≥º ÏãúÍ∞Ñ ÏÑ†ÌÉù"})]}),t.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[t.jsx("div",{className:"text-2xl mb-2",children:"üè†"}),t.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-1",children:"Î∂ÄÎèôÏÇ∞"}),t.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"Ïù¥ÏÇ¨ Î∞©Ìñ•Í≥º Ïßë Íµ¨Ï°∞ Î∞∞Ïπò Í≤∞Ï†ï"})]}),t.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[t.jsx("div",{className:"text-2xl mb-2",children:"üí∞"}),t.jsx("h4",{className:"font-bold text-pink-900 dark:text-pink-300 mb-1",children:"Ìà¨Ïûê"}),t.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-400",children:"Ïû¨Î¨ºÏö¥Ïù¥ Ï¢ãÏùÄ ÏãúÍ∞ÑÎåÄ ÌååÏïÖ"})]})]})]}),t.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[t.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"‚ö†Ô∏è Ï£ºÏùòÏÇ¨Ìï≠"}),t.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-1",children:[t.jsx("li",{children:"‚Ä¢ Í∑ÄÎ¨∏ÎëîÍ∞ëÏùÄ Ï∞∏Í≥† ÎèÑÍµ¨ÏûÖÎãàÎã§. Ï†àÎåÄÏ†ÅÏù∏ Í≤ÉÏù¥ ÏïÑÎãôÎãàÎã§."}),t.jsx("li",{children:"‚Ä¢ Ï§ëÏöîÌïú Í≤∞Ï†ïÏùÄ Ïã†Ï§ëÌïòÍ≤å Ïó¨Îü¨ ÏöîÏÜåÎ•º Í≥†Î†§ÌïòÏÑ∏Ïöî."}),t.jsx("li",{children:"‚Ä¢ Í∏çÏ†ïÏ†ÅÏù∏ ÎßàÏùåÍ∞ÄÏßêÏù¥ Í∞ÄÏû• Ï§ëÏöîÌï©ÎãàÎã§!"})]})]})]}),"how"===a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"üì± ÌôîÎ©¥ Íµ¨ÏÑ± Î∞è ÏÇ¨Ïö©Î≤ï"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"3x3 Íµ¨Í∂Å Ï∞®Ìä∏"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["9Í∞ú Ïπ∏Ïù¥ Í∞ÅÍ∞Å ",t.jsx("strong",{children:"Î∞©ÏúÑ(ÎèôÏÑúÎÇ®Î∂Å Îì±)"}),"Î•º ÎÇòÌÉÄÎÉÖÎãàÎã§. Í∞Å Ïπ∏ÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ Í∑∏ Î∞©Ìñ•Ïùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º Î≥º Ïàò ÏûàÏäµÎãàÎã§."]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["üí° ",t.jsx("strong",{children:"Ïã§Ï†Ñ ÌåÅ:"})," Ï†êÏàòÍ∞Ä 70Ï†ê Ïù¥ÏÉÅÏù∏ Î∞©ÏúÑÎ•º Ï∞æÏïÑ ÌÅ¥Î¶≠Ìï¥Î≥¥ÏÑ∏Ïöî. ÌåîÎ¨∏, Íµ¨ÏÑ±, ÌåîÏã†Ïùò Ï°∞Ìï©Ïù¥ Ïôú Ï¢ãÏùÄÏßÄ ÏÉÅÏÑ∏ÌïòÍ≤å ÏÑ§Î™ÖÎê©ÎãàÎã§."]})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"Í∏∏Ìùâ ÌëúÏãú Î∞è Ï†êÏàò"}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Í∞Å Î∞©ÏúÑÎßàÎã§ Ïù¥Î™®ÏßÄÏôÄ Ï†êÏàòÎ°ú Í∏∏ÌùâÏùÑ ÌëúÏãúÌï©ÎãàÎã§:"}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[t.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm",children:"üåü ÎåÄÍ∏∏ (80-100Ï†ê)"}),t.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:"‚ú® Í∏∏ (60-79Ï†ê)"}),t.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:"‚öñÔ∏è Ìèâ (40-59Ï†ê)"}),t.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-sm",children:"‚ö†Ô∏è Ìùâ (20-39Ï†ê)"}),t.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm",children:"‚ùå ÎåÄÌùâ (0-19Ï†ê)"})]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["üí° ",t.jsx("strong",{children:"Ïã§Ï†Ñ ÌåÅ:"})," Ï†êÏàò Ï∞®Ïù¥Í∞Ä ÌÅ¨ÏßÄ ÏïäÎã§Î©¥(Ïòà: 55Ï†ê vs 62Ï†ê) ÎÑàÎ¨¥ ÏßëÏ∞©ÌïòÏßÄ ÎßàÏÑ∏Ïöî. Ï†ÑÏ≤¥Ï†ÅÏù∏ Ïö¥ÏÑ∏Í∞Ä Ï§ëÏöîÌï©ÎãàÎã§."]})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"3"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"ÏãúÍ∞Ñ ÏÑ†ÌÉù Î∞è ÎπÑÍµê"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:['"ÏãúÍ∞Ñ ÏÑ†ÌÉù" Î≤ÑÌäºÏùÑ ÎàåÎü¨ ',t.jsx("strong",{children:"Í≥ºÍ±∞ÎÇò ÎØ∏Îûò ÏãúÍ∞Ñ"}),"Ïùò Í∏∏ÌùâÏùÑ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§."]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["üí° ",t.jsx("strong",{children:"Ïã§Ï†Ñ ÌåÅ:"}),' "ÏãúÍ∞ÑÎåÄ ÎπÑÍµê" Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ Ïó¨Îü¨ ÏãúÍ∞ÑÎåÄÎ•º ÌïúÎààÏóê ÎπÑÍµêÌï† Ïàò ÏûàÏäµÎãàÎã§. Ï§ëÏöîÌïú ÏùºÏ†ïÏùÄ ÎØ∏Î¶¨ 2-3Í∞ú ÏãúÍ∞ÑÎåÄÎ•º ÎπÑÍµêÌï¥Î≥¥ÏÑ∏Ïöî!']})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"4"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"Î™©Ï†Å ÏÑ†ÌÉù (Îß§Ïö∞ Ï§ëÏöî!)"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["ÌôîÎ©¥ ÏÉÅÎã®Ïùò ",t.jsx("strong",{children:'"üéØ Î™©Ï†Å"'})," ÎìúÎ°≠Îã§Ïö¥ÏóêÏÑú ÌòÑÏû¨ ÏÉÅÌô©Ïóê ÎßûÎäî Î™©Ï†ÅÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî."]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[t.jsxs("p",{children:["üí° ",t.jsx("strong",{children:"Ïó¨Ìñâ"}),": ÏïàÏ†ÑÌïòÍ≥† Ï¶êÍ±∞Ïö¥ Ïó¨ÌñâÏùÑ ÏúÑÌïú Î∞©ÏúÑ Ï†úÏãú"]}),t.jsxs("p",{children:["üí° ",t.jsx("strong",{children:"ÎπÑÏ¶àÎãàÏä§"}),": Í≥ÑÏïΩ, ÌòëÏÉÅÏóê Ïú†Î¶¨Ìïú Î∞©ÏúÑÏôÄ ÏãúÍ∞Ñ"]}),t.jsxs("p",{children:["üí° ",t.jsx("strong",{children:"Ìà¨Ïûê"}),": Ïû¨Î¨ºÏö¥Ïù¥ Ï¢ãÏùÄ Î∞©Ìñ•Í≥º ÌÉÄÏù¥Î∞ç"]}),t.jsxs("p",{children:["üí° ",t.jsx("strong",{children:"Í±¥Í∞ï"}),": ÏπòÎ£åÎÇò ÏöîÏñëÏóê Ï¢ãÏùÄ Î∞©ÏúÑ"]})]})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"Í≥†Í∞ù Ï†ïÎ≥¥ Ï†ÅÏö© (ÏÑ†ÌÉùÏÇ¨Ìï≠)"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:['"Í≥†Í∞ù ÏÑ†ÌÉùÌïòÍ∏∞"Î°ú ÏÉùÎÖÑÏõîÏùºÏùÑ ÏûÖÎ†•ÌïòÎ©¥ ',t.jsx("strong",{children:"Í∞úÏù∏ ÎßûÏ∂§ Ìï¥ÏÑù"}),"ÏùÑ Î∞õÏùÑ Ïàò ÏûàÏäµÎãàÎã§."]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["üí° ",t.jsx("strong",{children:"Ïã§Ï†Ñ ÌåÅ:"})," Í∞ôÏùÄ ÏãúÍ∞ÑÏù¥ÎùºÎèÑ ÏÉùÎÖÑÏõîÏùºÏóê Îî∞Îùº Í∏∏ÌùâÏù¥ Îã¨ÎùºÏßà Ïàò ÏûàÏäµÎãàÎã§. Ï†ïÌôïÌïú Ìï¥ÏÑùÏùÑ ÏõêÌïòÎ©¥ Íº≠ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!"]})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"6"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"AIÏóêÍ≤å ÏßàÎ¨∏ÌïòÍ∏∞"}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:'"ü§ñ AIÏóêÍ≤å ÏßàÎ¨∏ÌïòÍ∏∞" Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ Í∂ÅÍ∏àÌïú Ï†êÏùÑ ÏßÅÏ†ë Î¨ºÏñ¥Î≥º Ïàò ÏûàÏäµÎãàÎã§.'}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[t.jsx("p",{children:'üí° ÏòàÏãú ÏßàÎ¨∏: "ÎÇ¥Ïùº Ïò§ÌõÑ 2ÏãúÏóê ÎèôÏ™ΩÏúºÎ°ú ÎØ∏ÌåÖ Í∞ÄÎäîÎç∞ Í¥úÏ∞ÆÏùÑÍπåÏöî?"'}),t.jsx("p",{children:'üí° ÏòàÏãú ÏßàÎ¨∏: "Ïù¥Î≤à Ï£º ÎÇ®Ï™Ω Î∞©Ìñ• Ï∂úÏû•ÏùÄ Ïñ∏Ï†úÍ∞Ä Í∞ÄÏû• Ï¢ãÏùÑÍπåÏöî?"'}),t.jsx("p",{children:'üí° ÏòàÏãú ÏßàÎ¨∏: "Ïû¨Î¨ºÏö¥Ïù¥ Ï¢ãÏùÄ ÏãúÍ∞ÑÎåÄÎ•º ÏïåÎ†§Ï£ºÏÑ∏Ïöî."'})]})]})]})]})]}),t.jsxs("section",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[t.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3 text-lg",children:"üéØ Ïã§Ï†Ñ ÌôúÏö© ÏãúÎÇòÎ¶¨Ïò§"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[t.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[t.jsx("span",{children:"üíº"}),t.jsx("span",{children:"ÏãúÎÇòÎ¶¨Ïò§ 1: Ï§ëÏöîÌïú ÎπÑÏ¶àÎãàÏä§ ÎØ∏ÌåÖ"})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"1Îã®Í≥Ñ:"}),' Î™©Ï†ÅÏùÑ "ÎπÑÏ¶àÎãàÏä§"Î°ú ÏÑ†ÌÉù',t.jsx("br",{}),t.jsx("strong",{children:"2Îã®Í≥Ñ:"})," ÎØ∏ÌåÖ ÎÇ†Ïßú/ÏãúÍ∞Ñ ÏûÖÎ†• ÌõÑ Ï∞®Ìä∏ ÌôïÏù∏",t.jsx("br",{}),t.jsx("strong",{children:"3Îã®Í≥Ñ:"})," 70Ï†ê Ïù¥ÏÉÅÏù∏ Î∞©ÏúÑ Ï∞æÍ∏∞",t.jsx("br",{}),t.jsx("strong",{children:"4Îã®Í≥Ñ:"})," Ìï¥Îãπ Î∞©ÏúÑÎ•º ÌÅ¥Î¶≠ÌïòÏó¨ ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÌôïÏù∏",t.jsx("br",{}),t.jsx("strong",{children:"5Îã®Í≥Ñ:"})," Í∞ÄÎä•ÌïòÎ©¥ Í∑∏ Î∞©Ìñ•Ïùò Ïû•ÏÜåÎ•º ÏÑ†ÌÉùÌïòÍ±∞ÎÇò, ÌöåÏùòÏã§ÏóêÏÑú Í∑∏ Î∞©Ìñ•Ïóê ÏïâÍ∏∞"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[t.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[t.jsx("span",{children:"‚úàÔ∏è"}),t.jsx("span",{children:"ÏãúÎÇòÎ¶¨Ïò§ 2: Ï£ºÎßê Ïó¨Ìñâ Í≥ÑÌöç"})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"1Îã®Í≥Ñ:"}),' Î™©Ï†ÅÏùÑ "Ïó¨Ìñâ"ÏúºÎ°ú ÏÑ†ÌÉù',t.jsx("br",{}),t.jsx("strong",{children:"2Îã®Í≥Ñ:"}),' "ÏãúÍ∞ÑÎåÄ ÎπÑÍµê"Î°ú ÌÜ†ÏöîÏùº/ÏùºÏöîÏùº ÎπÑÍµê',t.jsx("br",{}),t.jsx("strong",{children:"3Îã®Í≥Ñ:"})," Îçî Ï†êÏàòÍ∞Ä ÎÜíÏùÄ ÎÇ† ÏÑ†ÌÉù",t.jsx("br",{}),t.jsx("strong",{children:"4Îã®Í≥Ñ:"})," Í∏∏Ìïú Î∞©ÏúÑ(Îèô/ÏÑú/ÎÇ®/Î∂Å)Î•º ÌôïÏù∏",t.jsx("br",{}),t.jsx("strong",{children:"5Îã®Í≥Ñ:"})," Ìï¥Îãπ Î∞©Ìñ•Ïùò Ïó¨ÌñâÏßÄÎ•º Ïö∞ÏÑ† Í≥†Î†§"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[t.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[t.jsx("span",{children:"üè†"}),t.jsx("span",{children:"ÏãúÎÇòÎ¶¨Ïò§ 3: Ïù¥ÏÇ¨ ÎÇ†Ïßú Î∞è Î∞©Ìñ• Í≤∞Ï†ï"})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"1Îã®Í≥Ñ:"}),' Î™©Ï†ÅÏùÑ "Î∂ÄÎèôÏÇ∞"ÏúºÎ°ú ÏÑ†ÌÉù',t.jsx("br",{}),t.jsx("strong",{children:"2Îã®Í≥Ñ:"})," Í≥†Í∞ù Ï†ïÎ≥¥(ÏÉùÎÖÑÏõîÏùº) ÏûÖÎ†•",t.jsx("br",{}),t.jsx("strong",{children:"3Îã®Í≥Ñ:"}),' Ïù¥ÏÇ¨ Í∞ÄÎä•Ìïú Ïó¨Îü¨ ÎÇ†ÏßúÎ•º "ÏãúÍ∞ÑÎåÄ ÎπÑÍµê"Î°ú Ï≤¥ÌÅ¨',t.jsx("br",{}),t.jsx("strong",{children:"4Îã®Í≥Ñ:"})," Ï¢ÖÌï© Ï†êÏàòÍ∞Ä Í∞ÄÏû• ÎÜíÏùÄ ÎÇ† ÏÑ†ÌÉù",t.jsx("br",{}),t.jsx("strong",{children:"5Îã®Í≥Ñ:"})," ÌòÑÏû¨ ÏßëÏóêÏÑú ÏÉà Ïßë Î∞©Ìñ•Ïù¥ Í∏∏ÌïúÏßÄ ÌôïÏù∏",t.jsx("br",{}),t.jsx("strong",{children:"6Îã®Í≥Ñ:"}),' AIÏóêÍ≤å "Ïù¥ÎÇ† Î∂ÅÏ™ΩÏúºÎ°ú Ïù¥ÏÇ¨ Í∞ÄÎäîÎç∞ Í¥úÏ∞ÆÏùÑÍπåÏöî?" ÏßàÎ¨∏']})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[t.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[t.jsx("span",{children:"üìÖ"}),t.jsx("span",{children:"ÏãúÎÇòÎ¶¨Ïò§ 4: Îß§Ïùº ÏïÑÏπ® Ïö¥ÏÑ∏ Ï≤¥ÌÅ¨ Î£®Ìã¥"})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"1Îã®Í≥Ñ:"})," ÏïÑÏπ®Ïóê Ïï±ÏùÑ Ïó¥Î©¥ ÏûêÎèôÏúºÎ°ú ÌòÑÏû¨ ÏãúÍ∞Ñ Ï∞®Ìä∏ ÌëúÏãú",t.jsx("br",{}),t.jsx("strong",{children:"2Îã®Í≥Ñ:"})," Ï†ÑÏ≤¥ Ïö¥ÏÑ∏ Ï†êÏàò ÌôïÏù∏ (70Ï†ê Ïù¥ÏÉÅÏù¥Î©¥ Ï¢ãÏùÄ ÎÇ†!)",t.jsx("br",{}),t.jsx("strong",{children:"3Îã®Í≥Ñ:"}),' "Í∏∏Ìïú Î∞©ÏúÑ"Î•º Î©îÎ™®Ìï¥ÎëêÍ∏∞',t.jsx("br",{}),t.jsx("strong",{children:"4Îã®Í≥Ñ:"})," ÌïòÎ£® ÎèôÏïà Ï§ëÏöîÌïú ÏùºÏùÄ Í∑∏ Î∞©Ìñ•ÏóêÏÑú ÌïòÍ±∞ÎÇò Í∑∏ Î∞©Ìñ•ÏùÑ Ìñ•Ìï¥ ÏßÑÌñâ",t.jsx("br",{}),t.jsx("strong",{children:"5Îã®Í≥Ñ:"}),' "Î∂àÎ¶¨Ìïú Î∞©ÏúÑ"Îäî Í∞ÄÍ∏âÏ†Å ÌîºÌïòÍ∏∞']})]})]})]}),t.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[t.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"‚ö†Ô∏è Ï£ºÏùòÏÇ¨Ìï≠ Î∞è FAQ"}),t.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-2",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"flex-shrink-0",children:"Q:"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Ï†êÏàòÍ∞Ä ÎÇÆÏùÄ ÎÇ†ÏùÄ ÏïÑÎ¨¥Í≤ÉÎèÑ ÌïòÎ©¥ Ïïà ÎêòÎÇòÏöî?"}),t.jsx("br",{}),"A: ÏïÑÎãôÎãàÎã§! 40Ï†ê Ïù¥ÏÉÅÏù¥Î©¥ ÏùºÏÉÅÏ†ÅÏù∏ ÌôúÎèôÏùÄ Í¥úÏ∞ÆÏäµÎãàÎã§. Îã§Îßå Ï§ëÏöîÌïú Í≤∞Ï†ïÏù¥ÎÇò ÌÅ∞ Í≥ÑÏïΩÏùÄ ÌîºÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏäµÎãàÎã§."]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"flex-shrink-0",children:"Q:"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Î™®Îì† Î∞©ÏúÑÍ∞Ä ÌèâÎ≤îÌïú ÎÇ†ÏùÄ Ïñ¥ÎñªÍ≤å ÌïòÎÇòÏöî?"}),t.jsx("br",{}),"A: ÏÉÅÎåÄÏ†ÅÏúºÎ°ú Ï†êÏàòÍ∞Ä ÎÜíÏùÄ Î∞©ÏúÑÎ•º ÏÑ†ÌÉùÌïòÍ±∞ÎÇò, ÏãúÍ∞ÑÎåÄÎ•º Î∞îÍøîÏÑú Îã§Ïãú ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî."]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"flex-shrink-0",children:"Q:"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Ï∞®Ìä∏Í∞Ä 2ÏãúÍ∞ÑÎßàÎã§ Î∞îÎÄêÎã§Í≥† ÌïòÎäîÎç∞, Ï†ïÍ∞ÅÏóêÎßå Î∞îÎÄåÎÇòÏöî?"}),t.jsx("br",{}),"A: ÎÑ§, Ï†ïÌôïÌûàÎäî ÏûêÏãú(23-01Ïãú), Ï∂ïÏãú(01-03Ïãú) Îì± 2ÏãúÍ∞Ñ Îã®ÏúÑÎ°ú Î∞îÎÄùÎãàÎã§. ÌôÄÏàò ÏãúÍ∞Å Ï†ïÍ∞ÅÏóê Í∞±Ïã†Îê©ÎãàÎã§."]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"flex-shrink-0",children:"Q:"}),t.jsxs("div",{children:[t.jsx("strong",{children:"ÏÉùÎÖÑÏõîÏùºÏùÑ ÏûÖÎ†•ÌñàÎäîÎç∞ Ï†êÏàòÍ∞Ä Î≥ÑÎ°ú Ïïà Î≥ÄÌñàÏñ¥Ïöî."}),t.jsx("br",{}),"A: ÏÉùÎÖÑÏõîÏùºÏùò ÏòÅÌñ•ÏùÄ Î≥¥ÎÑàÏä§ Ï†êÏàòÎ°ú ÏûëÏö©Ìï©ÎãàÎã§(¬±10Ï†ê ÎÇ¥Ïô∏). Í∏∞Î≥∏ Ï∞®Ìä∏Í∞Ä Îçî Ï§ëÏöîÌïòÎØÄÎ°ú ÌÅ¨Í≤å Í±±Ï†ïÌïòÏßÄ ÎßàÏÑ∏Ïöî."]})]})]})]})]}),"terms"===a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"üö™ ÌåîÎ¨∏(ÂÖ´ÈñÄ) - 8Í∞úÏùò Î¨∏"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:'Í∞Å Î∞©ÏúÑÏóê Î∞∞ÏπòÎêú "Î¨∏"ÏúºÎ°ú, Í∑∏ Î∞©Ìñ•Ïùò ÏóêÎÑàÏßÄÎ•º ÎÇòÌÉÄÎÉÖÎãàÎã§.'}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-green-900 dark:text-green-300",children:"Ìú¥Î¨∏ ¬∑ ÏÉùÎ¨∏ ¬∑ Í∞úÎ¨∏"}),t.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"‚Üí Ï¢ãÏùÄ Î¨∏ (Ìú¥Ïãù, ÏÑ±Ïû•, ÏãúÏûë)"})]}),t.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300",children:"Í≤ΩÎ¨∏"}),t.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:"‚Üí Î™ÖÏòàÏôÄ ÏòÅÍ¥ëÏùò Î¨∏"})]}),t.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-red-900 dark:text-red-300",children:"ÏÉÅÎ¨∏ ¬∑ ÎëêÎ¨∏ ¬∑ ÏÇ¨Î¨∏"}),t.jsx("div",{className:"text-sm text-red-700 dark:text-red-400",children:"‚Üí Ïïà Ï¢ãÏùÄ Î¨∏ (Í∞àÎì±, ÎßâÌûò, Ï¢ÖÍ≤∞)"})]}),t.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-300",children:"ÎÜÄÎ¨∏"}),t.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:"‚Üí Î≥ÄÌôîÏùò Î¨∏ (Ï¢ãÏùÑÏàòÎèÑ ÎÇòÏÅ†ÏàòÎèÑ)"})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"‚≠ê Íµ¨ÏÑ±(‰πùÊòü) - 9Í∞úÏùò Î≥Ñ"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"ÌïòÎäòÏùò Î≥ÑÏ≤òÎüº, Í∞Å Î∞©ÏúÑÏùò Í∏∞Ïö¥ÏùÑ ÎçîÌï¥Ï£ºÎäî ÏöîÏÜåÏûÖÎãàÎã§."}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsx("span",{className:"text-green-600",children:"‚úÖ"}),t.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"Ï≤úÏûÑ, Ï≤úÎ≥¥, Ï≤úÏã¨, Ï≤úÍ∏à"})," = Ï¢ãÏùÄ Î≥Ñ (Ïã†Î¢∞, ÏßÄÏõê, ÏπòÏú†, Í∑†Ìòï)"]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsx("span",{className:"text-red-600",children:"‚ö†Ô∏è"}),t.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"Ï≤úÎ¥â, Ï≤úÏòà"})," = Ïïà Ï¢ãÏùÄ Î≥Ñ (Í∞ÑÍ≥Ñ, ÏßàÎ≥ë)"]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsx("span",{className:"text-blue-600",children:"‚öñÔ∏è"}),t.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"Ï≤úÏ∂©, Ï≤úÏòÅ, Ï≤úÏ£º"})," = Ï§ëÎ¶Ω Î≥Ñ (Î≥ÄÌôî, Î™ÖÏòà, Í∂åÏúÑ)"]})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"üõ°Ô∏è ÌåîÏã†(ÂÖ´Á•û) - 8Í∞úÏùò Ïã†"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Í∞Å Î∞©ÏúÑÎ•º ÏßÄÌÇ§Îäî ÏàòÌò∏Ïã† Í∞ôÏùÄ Ï°¥Ïû¨ÏûÖÎãàÎã§."}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-green-900 dark:text-green-300",children:"ÏßÅÎ∂Ä ¬∑ ÌÉúÏùå ¬∑ Ïú°Ìï© ¬∑ Íµ¨ÏßÄ ¬∑ Íµ¨Ï≤ú"}),t.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"‚Üí Ï¢ãÏùÄ Ïã†"})]}),t.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-red-900 dark:text-red-300",children:"Îì±ÏÇ¨ ¬∑ Î∞±Ìò∏ ¬∑ ÌòÑÎ¨¥"}),t.jsx("div",{className:"text-sm text-red-700 dark:text-red-400",children:"‚Üí Ïïà Ï¢ãÏùÄ Ïã†"})]})]})]}),t.jsxs("section",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-2",children:"üéØ Í∞ÑÎã®Ìûà Í∏∞ÏñµÌïòÏÑ∏Ïöî!"}),t.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:["Î≥µÏû°Ìï¥ Î≥¥Ïù¥ÏßÄÎßå, ",t.jsx("strong",{children:"Í∞Å Î∞©ÏúÑÎ•º ÌÅ¥Î¶≠ÌïòÎ©¥ Ïâ¨Ïö¥ ÎßêÎ°ú ÏÑ§Î™Ö"}),"Ïù¥ ÎÇòÏòµÎãàÎã§. Ï≤òÏùåÏóêÎäî ",t.jsx("strong",{children:"üåü‚ú® Ïù¥Î™®ÏßÄÍ∞Ä ÎßéÏùÄ Î∞©Ìñ•"}),"ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî!"]})]})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:t.jsx("button",{onClick:e,className:"w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl",children:"ÏãúÏûëÌïòÍ∏∞"})})]})})}const G=["Í∞ë","ÏùÑ","Î≥ë","Ï†ï","Î¨¥","Í∏∞","Í≤Ω","Ïã†","ÏûÑ","Í≥Ñ"],H={"Í∞ë":"Î™©","ÏùÑ":"Î™©","Î≥ë":"Ìôî","Ï†ï":"Ìôî","Î¨¥":"ÌÜ†","Í∏∞":"ÌÜ†","Í≤Ω":"Í∏à","Ïã†":"Í∏à","ÏûÑ":"Ïàò","Í≥Ñ":"Ïàò"},K={"Î™©":{element:"Î™©",englishName:"Wood",favorableDirection:"ÎèôÏ™Ω",favorableSeason:"Î¥Ñ",color:"Ï≤≠Î°ùÏÉâ",personality:"ÏÑ±Ïû•Í≥º ÌôïÏû•ÏùÑ Ï∂îÍµ¨ÌïòÎäî ÏÑ±Ìñ•",advice:"ÏÉàÎ°úÏö¥ ÏãúÏûëÍ≥º ÏÑ±Ïû•Ïóê Ïú†Î¶¨Ìï©ÎãàÎã§. ÎèôÏ™Ω Î∞©Ìñ•ÏóêÏÑú ÌôúÎèôÌïòÎ©¥ Ï¢ãÏäµÎãàÎã§.",icon:"üå±"},"Ìôî":{element:"Ìôî",englishName:"Fire",favorableDirection:"ÎÇ®Ï™Ω",favorableSeason:"Ïó¨Î¶Ñ",color:"Î∂âÏùÄÏÉâ",personality:"Ïó¥Ï†ïÏ†ÅÏù¥Í≥† ÌôúÎèôÏ†ÅÏù∏ ÏÑ±Ìñ•",advice:"Ïó¥Ï†ïÏùÑ ÏèüÎäî ÏùºÏóê Ïú†Î¶¨Ìï©ÎãàÎã§. ÎÇ®Ï™Ω Î∞©Ìñ•ÏóêÏÑú ÌôúÎèôÌïòÎ©¥ Ï¢ãÏäµÎãàÎã§.",icon:"üî•"},"ÌÜ†":{element:"ÌÜ†",englishName:"Earth",favorableDirection:"Ï§ëÏïô",favorableSeason:"ÌôòÏ†àÍ∏∞",color:"Ìô©ÏÉâ",personality:"ÏïàÏ†ïÍ≥º Ïã†Î¢∞Î•º Ï§ëÏãúÌïòÎäî ÏÑ±Ìñ•",advice:"ÏïàÏ†ïÏ†ÅÏù∏ Í¥ÄÍ≥ÑÏôÄ Í∏∞Î∞òÏùÑ Îã§ÏßÄÎäîÎç∞ Ïú†Î¶¨Ìï©ÎãàÎã§. Ï§ëÏïôÏóêÏÑú Í∑†ÌòïÏùÑ Ïû°ÏúºÏÑ∏Ïöî.",icon:"‚õ∞Ô∏è"},"Í∏à":{element:"Í∏à",englishName:"Metal",favorableDirection:"ÏÑúÏ™Ω",favorableSeason:"Í∞ÄÏùÑ",color:"Ìù∞ÏÉâ",personality:"Í≤∞Îã®Î†•Í≥º Ï†ïÏùòÍ∞êÏù¥ Í∞ïÌïú ÏÑ±Ìñ•",advice:"Í≤∞Îã®Ïù¥ ÌïÑÏöîÌïú ÏùºÏóê Ïú†Î¶¨Ìï©ÎãàÎã§. ÏÑúÏ™Ω Î∞©Ìñ•ÏóêÏÑú ÌôúÎèôÌïòÎ©¥ Ï¢ãÏäµÎãàÎã§.",icon:"‚öîÔ∏è"},"Ïàò":{element:"Ïàò",englishName:"Water",favorableDirection:"Î∂ÅÏ™Ω",favorableSeason:"Í≤®Ïö∏",color:"Í≤ÄÏùÄÏÉâ",personality:"ÏßÄÌòúÎ°≠Í≥† Ïú†Ïó∞Ìïú ÏÑ±Ìñ•",advice:"ÏßÄÌòúÏôÄ Ï†ÑÎûµÏù¥ ÌïÑÏöîÌïú ÏùºÏóê Ïú†Î¶¨Ìï©ÎãàÎã§. Î∂ÅÏ™Ω Î∞©Ìñ•ÏóêÏÑú ÌôúÎèôÌïòÎ©¥ Ï¢ãÏäµÎãàÎã§.",icon:"üíß"}};function Z(e){const r=function(e){return G[((e-1984)%10+10)%10]}(e),t=function(e){return H[e]||"Î™©"}(r),a=function(e){return K[e]||K["Î™©"]}(t);return{year:e,stem:r,element:t,characteristics:a}}function Q(e){if(!e)return null;try{const r=parseInt(e.split("-")[0]);return isNaN(r)||r<1900||r>2100?null:Z(r)}catch(r){return null}}const U={"Î™©":"Ìôî","Ìôî":"ÌÜ†","ÌÜ†":"Í∏à","Í∏à":"Ïàò","Ïàò":"Î™©"},X={"Î™©":"ÌÜ†","ÌÜ†":"Ïàò","Ïàò":"Ìôî","Ìôî":"Í∏à","Í∏à":"Î™©"};function V(e,r){return e===r?.3:U[e]===r?.8:U[r]===e?.6:X[e]===r?-.3:X[r]===e?-.6:0}function J(e,r){if(!r)return 0;const t=r.element;let a=0;a+=8*V(t,o(e.gate).element);a+=7*V(t,i(e.star).element);const s={"Îèô":"Î™©","ÎèôÎÇ®":"Î™©","ÎÇ®":"Ìôî","ÏÑúÎÇ®":"ÌÜ†","ÏÑú":"Í∏à","ÏÑúÎ∂Å":"Í∏à","Î∂Å":"Ïàò","ÎèôÎ∂Å":"ÌÜ†","Ï§ëÏïô":"ÌÜ†"}[e.direction]||null;if(s){a+=5*V(t,s)}return Math.max(-15,Math.min(15,Math.round(a)))}function ee(e,r){const t=e.overallFortune.score;if(!r)return{baseScore:t,personalScore:t,bonus:0,explanation:""};let a=0,s=0;const l=e.overallFortune.bestPalaces,n=e.overallFortune.worstPalaces;for(const c of Object.keys(e.palaces)){const t=Number(c),d=J(e.palaces[t],r);l.includes(t)?a+=1.5*d:n.includes(t)?a+=.7*d:a+=d,s++}const d=Math.round(a/s),o=Math.max(0,Math.min(100,t+d));let i="";return i=d>5?`${r.characteristics.element} Í∏∞Ïö¥Ïù¥ Ïò§ÎäòÍ≥º Ïûò ÎßûÏäµÎãàÎã§!`:d<-5?`${r.characteristics.element} Í∏∞Ïö¥Ïù¥ Ïò§ÎäòÍ≥º ÏïΩÍ∞Ñ Ï∂©ÎèåÌï©ÎãàÎã§.`:`${r.characteristics.element} Í∏∞Ïö¥Ïù¥ Ïò§ÎäòÍ≥º Ï§ëÎ¶ΩÏ†ÅÏûÖÎãàÎã§.`,{baseScore:t,personalScore:o,bonus:d,explanation:i}}const re={green:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-300",textLight:"text-green-700 dark:text-green-400"},blue:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-900 dark:text-blue-300",textLight:"text-blue-700 dark:text-blue-400"},gray:{bg:"bg-gray-50 dark:bg-gray-700",border:"border-gray-200 dark:border-gray-600",text:"text-gray-900 dark:text-gray-300",textLight:"text-gray-700 dark:text-gray-400"},orange:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-300",textLight:"text-orange-700 dark:text-orange-400"},red:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-300",textLight:"text-red-700 dark:text-red-400"}};const te=e.memo(function({chart:e,customerName:a,customerBirthDate:s}){const l=r.useMemo(()=>e.overallFortune.bestPalaces,[e.overallFortune.bestPalaces]),n=r.useMemo(()=>e.overallFortune.worstPalaces,[e.overallFortune.worstPalaces]),d=r.useMemo(()=>s?Q(s):null,[s]),o=r.useMemo(()=>ee(e,d),[e,d]),i=r.useMemo(()=>{const r=d?o.personalScore:e.overallFortune.score;return r>=75?{icon:"üåü",title:"Ïò§ÎäòÏùÄ Îß§Ïö∞ Ï¢ãÏùÄ ÎÇ†ÏûÖÎãàÎã§!",description:"Ï§ëÏöîÌïú ÏùºÏùÑ ÏßÑÌñâÌïòÍ∏∞Ïóê ÏµúÏ†ÅÏùò ÏãúÍ∞ÑÏûÖÎãàÎã§.",color:"green"}:r>=60?{icon:"‚ú®",title:"Ïò§ÎäòÏùÄ Ï¢ãÏùÄ ÎÇ†ÏûÖÎãàÎã§",description:"Í≥ÑÌöçÌñàÎçò ÏùºÎì§ÏùÑ Ï∂îÏßÑÌïòÍ∏∞ Ï¢ãÏäµÎãàÎã§.",color:"blue"}:r>=40?{icon:"‚öñÔ∏è",title:"Ïò§ÎäòÏùÄ ÌèâÎ≤îÌïú ÎÇ†ÏûÖÎãàÎã§",description:"Î¨¥ÎÇúÌïòÍ≤å ÌïòÎ£®Î•º Î≥¥ÎÇ¥Í∏∞ Ï¢ãÏäµÎãàÎã§.",color:"gray"}:r>=25?{icon:"‚ö†Ô∏è",title:"Ïò§ÎäòÏùÄ Ï£ºÏùòÍ∞Ä ÌïÑÏöîÌï©ÎãàÎã§",description:"Ï§ëÏöîÌïú Í≤∞Ï†ïÏùÄ Ïã†Ï§ëÌïòÍ≤å ÌïòÏÑ∏Ïöî.",color:"orange"}:{icon:"‚ùå",title:"Ïò§ÎäòÏùÄ Ï°∞Ïã¨ÌïòÏÑ∏Ïöî",description:"Ï§ëÏöîÌïú ÏùºÏùÄ ÎØ∏Î£®Îäî Í≤ÉÏù¥ Ï¢ãÏäµÎãàÎã§.",color:"red"}},[d,o,e.overallFortune.score]),c=r.useMemo(()=>function(e,r){const t=e.overallFortune.bestPalaces[0],a=e.palaces[t].direction,s=[{icon:"üöó",situation:"Ïó¨Ìñâ/Ï∂úÏû•",direction:`${a} Î∞©Ìñ•ÏúºÎ°ú`},{icon:"üíº",situation:"Ï§ëÏöîÌïú ÎØ∏ÌåÖ",direction:`${a} Î∞©Ìñ• Ïû•ÏÜå Ï∂îÏ≤ú`},{icon:"üí∞",situation:"Ïû¨Î¨ºÏö¥",direction:`${a} Î∞©Ìñ• Ìà¨ÏûêÏ≤ò`},{icon:"üë•",situation:"ÏÇ¨Îûå ÎßåÎÇòÍ∏∞",direction:`${a} Î∞©Ìñ•ÏóêÏÑú`}];if(r){const e=r.characteristics.favorableDirection;s.push({icon:r.characteristics.icon,situation:`${r.characteristics.element} Í∏∞Ïö¥ ÌôúÏö©`,direction:`${e} Î∞©Ìñ•Ïù¥ ÌäπÌûà Ïú†Î¶¨`})}return s}(e,d),[e,d]),x=re[i.color];return t.jsxs("div",{className:"mb-6 space-y-4",children:[a&&s&&t.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-700 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-700 dark:text-purple-300",children:[t.jsx("span",{className:"text-xl",children:"üë§"}),t.jsx("span",{className:"font-bold",children:a}),t.jsxs("span",{className:"text-sm",children:["(",s,")"]}),t.jsx("span",{className:"ml-2 text-sm",children:"Îãò ÎßûÏ∂§ Î∂ÑÏÑù"})]})}),d&&t.jsx("div",{className:"p-4 bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 border border-indigo-200 dark:border-indigo-700 rounded-xl",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-4xl",children:d.characteristics.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs("h3",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-300",children:["ÎãπÏã†Ïùò Ïò§Ìñâ: ",d.characteristics.element," ","(",d.characteristics.englishName,")"]}),t.jsxs("span",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-medium",children:[d.year,"ÎÖÑÏÉù ",d.stem]})]}),t.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-400 mb-2",children:d.characteristics.personality}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[t.jsx("span",{className:"font-semibold",children:"Ïú†Î¶¨Ìïú Î∞©ÏúÑ:"})," ",d.characteristics.favorableDirection]}),t.jsxs("div",{className:"p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[t.jsx("span",{className:"font-semibold",children:"Ïú†Î¶¨Ìïú Í≥ÑÏ†à:"})," ",d.characteristics.favorableSeason]})]}),t.jsxs("div",{className:"mt-2 p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded text-xs text-indigo-800 dark:text-indigo-300",children:["üí° ",t.jsx("strong",{children:"ÎßûÏ∂§ Ï°∞Ïñ∏:"})," ",d.characteristics.advice]})]})]})}),t.jsx("div",{className:`p-6 rounded-xl border ${x.bg} ${x.border}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"text-5xl",children:i.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:`text-2xl font-bold mb-2 ${x.text}`,children:i.title}),t.jsx("p",{className:`text-lg ${x.textLight}`,children:i.description})]})]})}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[t.jsxs("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-3 flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:"üëç"}),t.jsx("span",{children:"Ïò§Îäò Ï¢ãÏùÄ Î∞©Ìñ•"})]}),t.jsx("div",{className:"space-y-2",children:l.slice(0,3).map(r=>{const a=e.palaces[r];return t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[t.jsx("div",{className:"text-2xl",children:"üß≠"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold text-green-900 dark:text-green-300",children:[a.direction," (",r,"Í∂Å)"]}),t.jsx("div",{className:"text-xs text-green-700 dark:text-green-400",children:ae(a.gate,a.star)})]})]},r)})}),t.jsx("div",{className:"mt-3 p-3 bg-green-100 dark:bg-green-900/40 rounded-lg",children:t.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:["üí° ",t.jsx("strong",{children:"ÌôúÏö© ÌåÅ:"})," Ï§ëÏöîÌïú ÏïΩÏÜçÏù¥ÎÇò Ïó¨ÌñâÏùÄ Ïù¥ Î∞©Ìñ•ÏúºÎ°ú!"]})})]}),t.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:[t.jsxs("h4",{className:"font-bold text-red-900 dark:text-red-300 mb-3 flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),t.jsx("span",{children:"Ï£ºÏùòÌï† Î∞©Ìñ•"})]}),t.jsx("div",{className:"space-y-2",children:n.slice(0,3).map(r=>{const a=e.palaces[r];return t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[t.jsx("div",{className:"text-2xl",children:"üö´"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold text-red-900 dark:text-red-300",children:[a.direction," (",r,"Í∂Å)"]}),t.jsx("div",{className:"text-xs text-red-700 dark:text-red-400",children:se(a.gate,a.star)})]})]},r)})}),t.jsx("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/40 rounded-lg",children:t.jsxs("p",{className:"text-sm text-red-800 dark:text-red-300",children:["üí° ",t.jsx("strong",{children:"Ï£ºÏùò ÏÇ¨Ìï≠:"})," Í∞ÄÎä•ÌïòÎ©¥ Ïù¥ Î∞©Ìñ•ÏùÄ ÌîºÌïòÏÑ∏Ïöî"]})})]})]}),t.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[t.jsxs("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3 flex items-center gap-2",children:[t.jsx("span",{className:"text-xl",children:"üíº"}),t.jsx("span",{children:"ÏÉÅÌô©Î≥Ñ Ï∂îÏ≤ú Î∞©Ìñ•"})]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:c.map((e,r)=>t.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[t.jsx("span",{className:"text-xl",children:e.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-sm text-blue-900 dark:text-blue-300",children:e.situation}),t.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400",children:e.direction})]})]},r))})]})]})});function ae(e,r){return{"Ìú¥Î¨∏":"Ìú¥ÏãùÍ≥º ÌöåÎ≥µÏóê Ï¢ãÏùå","ÏÉùÎ¨∏":"ÏÉàÎ°úÏö¥ ÏãúÏûëÏóê Ï¢ãÏùå","Í≤ΩÎ¨∏":"Î™ÖÏòàÏôÄ ÏÑ±Í≥µÏóê Ï¢ãÏùå","Í∞úÎ¨∏":"Í∏∞ÌöåÎ•º Ïû°Í∏∞ Ï¢ãÏùå","ÎÜÄÎ¨∏":"Î≥ÄÌôîÏôÄ ÎèÑÏ†Ñ","ÏÉÅÎ¨∏":"Í∞àÎì± Ï£ºÏùò","ÎëêÎ¨∏":"ÎßâÌûòÍ≥º Ïñ¥Î†§ÏõÄ","ÏÇ¨Î¨∏":"Ï¢ÖÍ≤∞Í≥º ÎßàÎ¨¥Î¶¨"}[e]||"ÌèâÎ≤îÌïú Í∏∞Ïö¥"}function se(e,r){return{"ÏÉÅÎ¨∏":"Îã§ÌàºÏù¥ÎÇò Í∞àÎì± Ï°∞Ïã¨","ÎëêÎ¨∏":"ÏùºÏù¥ ÎßâÌûê Ïàò ÏûàÏùå","ÏÇ¨Î¨∏":"Ï§ëÏöîÌïú Ïùº ÎØ∏Î£®Í∏∞","ÎÜÄÎ¨∏":"ÏòàÏÉÅÏπò Î™ªÌïú Î≥ÄÌôî","Ìú¥Î¨∏":"ÏßÄÎÇòÏπú ÏïàÏ£º Ï£ºÏùò","ÏÉùÎ¨∏":"Î¨¥Î¶¨Ìïú ÌôïÏû• Ï£ºÏùò","Í≤ΩÎ¨∏":"ÌóàÏòÅÏã¨ Ï£ºÏùò","Í∞úÎ¨∏":"Î∞©Ïñ¥Î†• ÏïΩÌôî"}[e]||"Ï£ºÏùòÍ∞Ä ÌïÑÏöîÌï®"}const le={excellent:{bg:"bg-green-500/80",bgHover:"hover:bg-green-500",border:"border-green-400",text:"text-white",glow:"shadow-green-500/50"},good:{bg:"bg-green-400/70",bgHover:"hover:bg-green-400",border:"border-green-300",text:"text-white",glow:"shadow-green-400/50"},neutral:{bg:"bg-gray-400/60",bgHover:"hover:bg-gray-400",border:"border-gray-300",text:"text-white",glow:"shadow-gray-400/50"},bad:{bg:"bg-orange-400/70",bgHover:"hover:bg-orange-400",border:"border-orange-300",text:"text-white",glow:"shadow-orange-400/50"},terrible:{bg:"bg-red-500/80",bgHover:"hover:bg-red-500",border:"border-red-400",text:"text-white",glow:"shadow-red-500/50"}},ne={excellent:"ÎåÄÍ∏∏",good:"Í∏∏",neutral:"Ìèâ",bad:"Ìùâ",terrible:"ÎåÄÌùâ"};function de({chart:r,selectedPalace:a,onPalaceSelect:s}){return t.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[t.jsxs("div",{className:"mb-4 text-center",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:"üé® Í∏∏Ìùâ ÌûàÌä∏Îßµ"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ÏÉâÏÉÅÏù¥ ÏßÑÌï†ÏàòÎ°ù Í∞ïÌïú Í∏∏ÌùâÏùÑ ÎÇòÌÉÄÎÉÖÎãàÎã§"})]}),t.jsx("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl backdrop-blur-sm",children:[[4,9,2],[3,5,7],[8,1,6]].map((l,n)=>t.jsx(e.Fragment,{children:l.map(e=>{const l=r.palaces[e],n=le[l.fortune],d=a===e,o=l.patterns&&l.patterns.length>0,i=o&&l.patterns?l.patterns.reduce((e,r)=>r.strength>e.strength?r:e):null;return t.jsxs("button",{onClick:()=>s(e),className:`\n                    relative aspect-square rounded-lg transition-all duration-300 ease-in-out\n                    ${n.bg} ${n.bgHover}\n                    border-2 ${d?`${n.border} border-4`:"border-white/30"}\n                    ${n.text}\n                    shadow-lg ${d?n.glow:""}\n                    transform ${d?"scale-105":"scale-100"}\n                    hover:scale-110 hover:shadow-xl\n                    cursor-pointer\n                    ${c=l.fortune,{excellent:"brightness-110",good:"brightness-105",neutral:"brightness-100",bad:"brightness-95",terrible:"brightness-90"}[c]}\n                  `,style:{filter:d?"brightness(1.1)":"brightness(1)"},children:[t.jsxs("div",{className:"absolute top-1 left-1 text-xs font-semibold opacity-75",children:[e,"Í∂Å"]}),o&&i&&t.jsx("div",{className:"absolute top-1 right-1",children:t.jsx("div",{className:`\n                          w-2 h-2 rounded-full animate-pulse\n                          ${"auspicious"===i.type?"bg-yellow-300":"inauspicious"===i.type?"bg-purple-300":"bg-blue-300"}\n                        `,title:i.name})}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",children:ne[l.fortune]}),t.jsx("div",{className:"text-xs opacity-90",children:l.direction})]}),t.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center text-xs font-medium opacity-90",children:l.gate}),d&&t.jsx("div",{className:"absolute inset-0 border-2 border-white rounded-lg animate-pulse"})]},e);var c})},n))}),t.jsxs("div",{className:"mt-6 p-4 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm",children:[t.jsx("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 text-center",children:"üé® ÏÉâÏÉÅ Î≤îÎ°Ä"}),t.jsx("div",{className:"flex justify-center gap-3 flex-wrap",children:Object.entries(ne).map(([e,r])=>{const a=le[e];return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-6 h-6 rounded ${a.bg} border-2 ${a.border}`}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:r})]},e)})}),t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-300 dark:border-gray-600",children:t.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-300 animate-pulse"}),t.jsx("span",{children:"Í∏∏Í≤©"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-300 animate-pulse"}),t.jsx("span",{children:"ÌùâÍ≤©"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-300 animate-pulse"}),t.jsx("span",{children:"Ï§ëÎ¶Ω"})]})]})})]}),t.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[t.jsx("div",{className:"text-xs text-green-700 dark:text-green-300 mb-1",children:"Í∏∏Ìïú Í∂Å"}),t.jsx("div",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:r.overallFortune.bestPalaces.length})]}),t.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/20 rounded-lg text-center",children:[t.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 mb-1",children:"ÌèâÍ∑†"}),t.jsxs("div",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:[r.overallFortune.score,"Ï†ê"]})]}),t.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[t.jsx("div",{className:"text-xs text-red-700 dark:text-red-300 mb-1",children:"ÌùâÌïú Í∂Å"}),t.jsx("div",{className:"text-xl font-bold text-red-800 dark:text-red-200",children:r.overallFortune.worstPalaces.length})]})]})]})}function oe({baseDate:e,customer:a,onClose:s}){const[l,n]=r.useState("hourly"),[d,o]=r.useState([]),[i,c]=r.useState(null);r.useEffect(()=>{a&&(parseInt(a.birth_date.split("-")[0]),parseInt(a.birth_date.split("-")[1]),parseInt(a.birth_date.split("-")[2]),a.birth_time&&parseInt(a.birth_time.split(":")[0]));const r=[];if("hourly"===l)for(let t=-4;t<=4;t+=2){const a=new Date(e);a.setHours(e.getHours()+t);const s=x({dateTime:a});r.push({dateTime:a,label:0===t?"ÌòÑÏû¨":`${t>0?"+":""}${t}ÏãúÍ∞Ñ`,chart:s})}else if("daily"===l)for(let t=-3;t<=3;t++){const a=new Date(e);a.setDate(e.getDate()+t);const s=x({dateTime:a});r.push({dateTime:a,label:0===t?"Ïò§Îäò":`${t>0?"+":""}${t}Ïùº`,chart:s})}else if("weekly"===l)for(let t=-2;t<=2;t++){const a=new Date(e);a.setDate(e.getDate()+7*t);const s=x({dateTime:a});r.push({dateTime:a,label:0===t?"Ïù¥Î≤à Ï£º":`${t>0?"+":""}${t}Ï£º`,chart:s})}o(r)},[l,e,a]);const g=e=>e>=80?"text-green-600 dark:text-green-400":e>=60?"text-blue-600 dark:text-blue-400":e>=40?"text-yellow-600 dark:text-yellow-400":e>=20?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400";return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-800",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"üìä ÏãúÍ∞ÑÎåÄÎ≥Ñ Í∏∏Ìùâ Î≥ÄÌôî ÎπÑÍµê"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a?`${a.name}ÎãòÏùò Ïö¥ÏÑ∏ Î≥ÄÌôîÎ•º Î∂ÑÏÑùÌï©ÎãàÎã§`:"Ï†ÑÏ≤¥Ï†ÅÏù∏ Ïö¥ÏÑ∏ Î≥ÄÌôîÎ•º Î∂ÑÏÑùÌï©ÎãàÎã§"})]}),t.jsx("button",{onClick:s,className:"p-2 hover:bg-white/50 dark:hover:bg-gray-700 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"flex justify-center gap-3",children:[{value:"hourly",label:"‚è∞ ÏãúÍ∞ÑÎ≥Ñ",desc:"2ÏãúÍ∞Ñ Îã®ÏúÑ"},{value:"daily",label:"üìÖ ÏùºÎ≥Ñ",desc:"ÌïòÎ£® Îã®ÏúÑ"},{value:"weekly",label:"üìÜ Ï£ºÎ≥Ñ",desc:"ÏùºÏ£ºÏùº Îã®ÏúÑ"}].map(({value:e,label:r,desc:a})=>t.jsxs("button",{onClick:()=>n(e),className:"px-6 py-3 rounded-lg font-medium transition-all "+(l===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[t.jsx("div",{children:r}),t.jsx("div",{className:"text-xs opacity-75",children:a})]},e))})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-6",children:d.map((e,r)=>{const a="ÌòÑÏû¨"===e.label||"Ïò§Îäò"===e.label||"Ïù¥Î≤à Ï£º"===e.label;return t.jsxs("div",{className:"p-4 rounded-xl border-2 transition-all "+(a?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 shadow-lg":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),children:[t.jsxs("div",{className:"text-center mb-3",children:[t.jsx("div",{className:"text-sm font-bold mb-1 "+(a?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300"),children:e.label}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.dateTime.toLocaleString("ko-KR",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.jsxs("div",{className:"text-center mb-3 p-2 bg-white dark:bg-gray-900/50 rounded-lg",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:e.chart.solarTerm.name}),t.jsxs("div",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:["yang"===e.chart.yinYang?"ÏñëÎëî":"ÏùåÎëî"," ",e.chart.ju,"Íµ≠"]})]}),t.jsxs("div",{className:"text-center p-3 rounded-lg "+(s=e.chart.overallFortune.score,s>=80?"bg-green-100 dark:bg-green-900/30":s>=60?"bg-blue-100 dark:bg-blue-900/30":s>=40?"bg-yellow-100 dark:bg-yellow-900/30":s>=20?"bg-orange-100 dark:bg-orange-900/30":"bg-red-100 dark:bg-red-900/30"),children:[t.jsx("div",{className:`text-3xl font-bold ${g(e.chart.overallFortune.score)}`,children:e.chart.overallFortune.score}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"excellent"===e.chart.overallFortune.level?"ÎåÄÍ∏∏":"good"===e.chart.overallFortune.level?"Í∏∏":"neutral"===e.chart.overallFortune.level?"Ìèâ":"bad"===e.chart.overallFortune.level?"Ìùâ":"ÎåÄÌùâ"})]})]},r);var s})}),i&&t.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800 rounded-xl border border-blue-200 dark:border-blue-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:["üéØ ",i,"Í∂Å Î≥ÄÌôî Ï∂îÏ†Å"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:(m=i,d.map(e=>({label:e.label,fortune:e.chart.palaces[m].fortune,score:e.chart.overallFortune.score}))).map((e,r)=>t.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg text-center border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:e.label}),t.jsx("div",{className:"text-sm font-bold "+("excellent"===e.fortune?"text-green-600":"good"===e.fortune?"text-blue-600":"neutral"===e.fortune?"text-yellow-600":"bad"===e.fortune?"text-orange-600":"text-red-600"),children:"excellent"===e.fortune?"ÎåÄÍ∏∏":"good"===e.fortune?"Í∏∏":"neutral"===e.fortune?"Ìèâ":"bad"===e.fortune?"Ìùâ":"ÎåÄÌùâ"})]},r))})]}),t.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"üîç Í∂Å ÏÑ†ÌÉùÌïòÏó¨ Î≥ÄÌôî Ï∂îÏ†Å"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6,7,8,9].map(e=>t.jsxs("button",{onClick:()=>c(e),className:"px-4 py-2 rounded-lg font-medium transition-all "+(i===e?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[e,"Í∂Å"]},e))})]})]}),t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 text-center",children:t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"üí° ÏãúÍ∞ÑÎåÄÎ≥Ñ Í∏∏Ìùâ Î≥ÄÌôîÎ•º ÎπÑÍµêÌïòÏó¨ ÏµúÏ†ÅÏùò ÌñâÎèô ÏãúÏ†êÏùÑ ÌååÏïÖÌïòÏÑ∏Ïöî"})})]})});var m}const ie={general:{gates:{},stars:{},spirits:{},description:"ÏùºÏÉÅÏ†ÅÏù∏ ÌôúÎèôÍ≥º Ï†ÑÎ∞òÏ†ÅÏù∏ Ïö¥ÏÑ∏",icon:"üåü",keywords:["ÏùºÏÉÅ","Ï¢ÖÌï©","Ï†ÑÏ≤¥"]},business:{gates:{"ÏÉùÎ¨∏":1,"Í∞úÎ¨∏":.8,"Í≤ΩÎ¨∏":.7,"Ìú¥Î¨∏":.3,"ÎëêÎ¨∏":-.8,"ÏÇ¨Î¨∏":-1},stars:{"Ï≤úÎ≥¥":1,"Ï≤úÏûÑ":.8,"Ï≤úÏ∂©":.5,"Ï≤úÏòÅ":.6,"Ï≤úÏòà":-.9,"Ï≤úÎ¥â":-.5},spirits:{"ÏßÅÎ∂Ä":1,"Ïú°Ìï©":.8,"Íµ¨Ï≤ú":.7,"Î∞±Ìò∏":-.9,"ÌòÑÎ¨¥":-.8},description:"ÏÇ¨ÏóÖ, Í≥ÑÏïΩ, Í±∞Îûò, Ìà¨Ïûê, Ï∞ΩÏóÖ",icon:"üíº",keywords:["ÎπÑÏ¶àÎãàÏä§","ÏÇ¨ÏóÖ","Í≥ÑÏïΩ","Í±∞Îûò","Ìà¨Ïûê","Ï∞ΩÏóÖ"]},love:{gates:{"ÏÉùÎ¨∏":1,"Í∞úÎ¨∏":.7,"Ìú¥Î¨∏":.8,"Í≤ΩÎ¨∏":.6,"ÏÉÅÎ¨∏":-.7,"ÏÇ¨Î¨∏":-1},stars:{"Ï≤úÏûÑ":.9,"Ï≤úÎ≥¥":.8,"Ï≤úÏã¨":.7,"Ï≤úÏòÅ":.5,"Ï≤úÏòà":-.8,"Ï≤úÏ∂©":-.3},spirits:{"Ïú°Ìï©":1,"ÌÉúÏùå":.9,"ÏßÅÎ∂Ä":.6,"Î∞±Ìò∏":-.9,"Îì±ÏÇ¨":-.7},description:"Ïó∞Ïï†, ÎßåÎÇ®, Í≤∞Ìòº, ÌîÑÎ°úÌè¨Ï¶à, Ï§ëÎß§",icon:"üíï",keywords:["Ïó∞Ïï†","ÏÇ¨Îûë","Í≤∞Ìòº","ÎßåÎÇ®","ÌîÑÎ°úÌè¨Ï¶à","Ïù¥ÏÑ±"]},travel:{gates:{"Í∞úÎ¨∏":1,"ÏÉùÎ¨∏":.8,"Ìú¥Î¨∏":.7,"Í≤ΩÎ¨∏":.6,"ÎëêÎ¨∏":-.9,"ÏÇ¨Î¨∏":-1},stars:{"Ï≤úÏ∂©":.8,"Ï≤úÎ≥¥":.7,"Ï≤úÏûÑ":.6,"Ï≤úÏòÅ":.5,"Ï≤úÏòà":-.9,"Ï≤úÎ¥â":-.6},spirits:{"Íµ¨Ï≤ú":1,"ÏßÅÎ∂Ä":.7,"Ïú°Ìï©":.6,"Î∞±Ìò∏":-.9,"ÌòÑÎ¨¥":-.8},description:"Ïó¨Ìñâ, Ï∂úÏû•, Ïù¥ÏÇ¨, Ïù¥Îèô, Í∑ÄÌñ•",icon:"‚úàÔ∏è",keywords:["Ïó¨Ìñâ","Ï∂úÏû•","Ïù¥ÏÇ¨","Ïù¥Îèô","Í∑ÄÌñ•","Í¥ÄÍ¥ë"]},health:{gates:{"Ìú¥Î¨∏":1,"ÏÉùÎ¨∏":.9,"Í∞úÎ¨∏":.5,"ÏÉÅÎ¨∏":-.8,"ÏÇ¨Î¨∏":-1,"ÎëêÎ¨∏":-.6},stars:{"Ï≤úÏã¨":1,"Ï≤úÏûÑ":.8,"Ï≤úÎ≥¥":.7,"Ï≤úÍ∏à":.6,"Ï≤úÏòà":-1,"Ï≤úÎ¥â":-.7},spirits:{"ÏßÅÎ∂Ä":.8,"ÌÉúÏùå":.7,"Íµ¨ÏßÄ":.9,"Î∞±Ìò∏":-1,"Îì±ÏÇ¨":-.8},description:"Í±¥Í∞ï, ÏπòÎ£å, ÏàòÏà†, Í≤ÄÏßÑ, ÏöîÏñë",icon:"üè•",keywords:["Í±¥Í∞ï","ÏπòÎ£å","Î≥ëÏõê","ÏàòÏà†","Í≤ÄÏßÑ","ÏöîÏñë"]},wealth:{gates:{"ÏÉùÎ¨∏":1,"Í∞úÎ¨∏":.8,"Í≤ΩÎ¨∏":.7,"Ìú¥Î¨∏":.5,"ÏÇ¨Î¨∏":-1,"ÎëêÎ¨∏":-.7},stars:{"Ï≤úÎ≥¥":1,"Ï≤úÏûÑ":.8,"Ï≤úÍ∏à":.7,"Ï≤úÏòÅ":.5,"Ï≤úÏòà":-.9,"Ï≤úÎ¥â":-.6},spirits:{"ÏßÅÎ∂Ä":.9,"Ïú°Ìï©":.7,"Íµ¨Ï≤ú":.6,"ÌòÑÎ¨¥":-1,"Î∞±Ìò∏":-.8},description:"Ìà¨Ïûê, Ïû¨ÌÖåÌÅ¨, ÏÇ¨ÏóÖ ÏûêÍ∏à, Í≥ÑÏïΩÍ∏à",icon:"üí∞",keywords:["Ïû¨Î¨º","Ìà¨Ïûê","Ïû¨ÌÖåÌÅ¨","ÏàòÏûÖ","Îèà","ÏûêÍ∏à"]},lawsuit:{gates:{"Í≤ΩÎ¨∏":1,"Í∞úÎ¨∏":.6,"Ìú¥Î¨∏":.5,"ÏÉÅÎ¨∏":-.3,"ÏÇ¨Î¨∏":-.8,"ÎëêÎ¨∏":-.5},stars:{"Ï≤úÏòÅ":.9,"Ï≤úÏûÑ":.8,"Ï≤úÏ∂©":.4,"Ï≤úÏòà":-.9,"Ï≤úÎ¥â":-.7},spirits:{"ÏßÅÎ∂Ä":1,"Ïú°Ìï©":.7,"Íµ¨Ï≤ú":.5,"Î∞±Ìò∏":-1,"ÌòÑÎ¨¥":-.9},description:"ÏÜåÏÜ°, Î≤ïÎ•†, Î∂ÑÏüÅ, Í≥ÑÏïΩ Î¨∏Ï†ú, Í≥†ÏÜå",icon:"‚öñÔ∏è",keywords:["ÏÜåÏÜ°","Î≤ïÎ•†","Î∂ÑÏüÅ","Ïû¨Ìåê","Í≥†ÏÜå","Í≥ÑÏïΩ"]},education:{gates:{"ÏÉùÎ¨∏":1,"Í∞úÎ¨∏":.9,"Í≤ΩÎ¨∏":.8,"Ìú¥Î¨∏":.6,"ÎëêÎ¨∏":-.7,"ÎÜÄÎ¨∏":-.4},stars:{"Ï≤úÎ≥¥":.9,"Ï≤úÏûÑ":.8,"Ï≤úÏã¨":.7,"Ï≤úÏòÅ":.8,"Ï≤úÏ∂©":.5,"Ï≤úÏòà":-.8},spirits:{"ÏßÅÎ∂Ä":.9,"Ïú°Ìï©":.7,"ÌÉúÏùå":.6,"Îì±ÏÇ¨":-.7,"Î∞±Ìò∏":-.6},description:"ÏãúÌóò, ÏûÖÌïô, ÌïôÏóÖ, ÏûêÍ≤©Ï¶ù, ÍµêÏú°",icon:"üìö",keywords:["ÏãúÌóò","ÌïôÏóÖ","ÏûÖÌïô","ÏûêÍ≤©Ï¶ù","Í≥µÎ∂Ä","ÍµêÏú°"]}};function ce(e){return ie[e||"general"]}function xe(){return Object.entries(ie).map(([e,r])=>({value:e,label:ge(e),icon:r.icon,description:r.description}))}function ge(e){return{general:"ÏùºÎ∞ò (Ï†ÑÏ≤¥)",business:"ÎπÑÏ¶àÎãàÏä§",love:"Ïó∞Ïï†/Í≤∞Ìòº",travel:"Ïó¨Ìñâ/Ïù¥Îèô",health:"Í±¥Í∞ï/ÏπòÎ£å",wealth:"Ïû¨Î¨º/Ìà¨Ïûê",lawsuit:"ÏÜåÏÜ°/Î≤ïÎ•†",education:"ÍµêÏú°/ÌïôÏóÖ"}[e]}function me(e){return e>=80?"excellent":e>=60?"good":e>=40?"neutral":e>=20?"bad":"terrible"}function ue(e,r,t,a){const s=ce(r);!r||s.description,Object.values(e.palaces).map(e=>{const t=function(e,r,t,a){let s=50;const l=g[e].nature;"auspicious"===l?s+=15:"inauspicious"===l&&(s-=15);const n=m[r].nature;if("auspicious"===n?s+=15:"inauspicious"===n&&(s-=15),t){const e=u[t].nature;"auspicious"===e?s+=20:"inauspicious"===e&&(s-=20)}if(!a||"general"===a)return{score:s,fortune:me(s),contextBonus:0};const d=ce(a);let o=0;o+=20*(d.gates[e]||0),o+=15*(d.stars[r]||0),t&&(o+=15*(d.spirits[t]||0));const i=Math.max(0,Math.min(100,s+o));return{score:i,fortune:me(i),contextBonus:o}}(e.gate,e.star,e.spirit,r);return`${e.palace}Í∂Å(${e.direction}): ${e.gate}, ${e.star}, ${e.spirit||"ÏóÜÏùå"} - ${t.score}Ï†ê`}).join(", ");let l="";if(a){const e=Q(a.birth_date),r=parseInt(a.birth_date.split("-")[0]);parseInt(a.birth_date.split("-")[1]),parseInt(a.birth_date.split("-")[2]);const t=(new Date).getFullYear()-r;e&&(l=`\n\nüôã Í≥†Í∞ù Ï†ïÎ≥¥:\n- Ïù¥Î¶Ñ: ${a.name}Îãò\n- ÏÉùÎÖÑÏõîÏùº: ${a.birth_date} (${"lunar"===a.lunar_solar?"ÏùåÎ†•":"ÏñëÎ†•"})\n- ÎÇòÏù¥: ${t}ÏÑ∏\n- ÏÉùÎÖÑ Ï≤úÍ∞Ñ: ${e.stem}\n- Ïò§Ìñâ: ${e.element}\n- ÏÉùÏãú: ${a.birth_time||"ÎØ∏ÏÉÅ"}\n- ÌäπÏßï: ${e.characteristics.personality}`)}let n="";if(a){const e=Q(a.birth_date);e&&(n=`${a.name}ÎãòÏùò ÏÇ¨Ï£º(ÏÉùÎÖÑ Ï≤úÍ∞Ñ: ${e.stem}, Ïò§Ìñâ: ${e.element})ÏôÄ Í∑ÄÎ¨∏ÎëîÍ∞ëÏùÑ Ïó∞Í≤∞ÌïòÏó¨`)}return`ÎãπÏã†ÏùÄ 30ÎÖÑ Í≤ΩÎ†•Ïùò Í∑ÄÎ¨∏ÎëîÍ∞ë Ï†ÑÎ¨∏Í∞ÄÏûÖÎãàÎã§. ${a?a.name+"ÎãòÏóêÍ≤å":"Í≥†Í∞ùÏóêÍ≤å"} ÏπúÍµ¨Ï≤òÎüº Ìé∏ÌïòÍ≤å Ï°∞Ïñ∏ÌïòÎìØ ÏûêÏó∞Ïä§ÎüΩÍ≤å ÎåÄÌôîÌïòÏÑ∏Ïöî.\n${l}\n\nüìç ÌòÑÏû¨ Í∑ÄÎ¨∏ÎëîÍ∞ë ÏÉÅÌô©:\n- ÌòÑÏû¨ ÏãúÍ∞Ñ: ${e.dateTime.toLocaleString("ko-KR")}\n- Íµ≠(Â±Ä): ${"yang"===e.yinYang?"ÏñëÎëî":"ÏùåÎëî"} ${e.ju}Íµ≠\n- Ï†àÍ∏∞: ${e.solarTerm.name}\n- Ï†ÑÏ≤¥ Í∏∞Ïö¥: ${e.overallFortune.score}Ï†ê\n- Ï∂îÏ≤ú Î∞©ÏúÑ: ${e.overallFortune.bestPalaces.map(r=>e.palaces[r].direction).join(", ")}\n- Ï£ºÏùò Î∞©ÏúÑ: ${e.overallFortune.worstPalaces.map(r=>e.palaces[r].direction).join(", ")}\n\nüí¨ ÏÇ¨Ïö©Ïûê ÏßàÎ¨∏: "${t}"\n\n‚úÖ Î∞òÎìúÏãú ÏßÄÌÇ¨ ÏÇ¨Ìï≠:\n1. üåè ÏàúÏàò ÌïúÍµ≠Ïñ¥Îßå ÏÇ¨Ïö© (ÌïúÏûêÏñ¥ Îã®Ïñ¥Îäî Í¥úÏ∞ÆÏßÄÎßå, Ï§ëÍµ≠Ïñ¥ Í∏ÄÏûê, ÏòÅÏñ¥, ÏùºÎ≥∏Ïñ¥, ÏïÑÎûçÏñ¥ Îì± Ïô∏Íµ≠Ïñ¥ Î¨∏ÏûêÎäî Ï†àÎåÄ Í∏àÏßÄ)\n2. üö´ <think> ÌÉúÍ∑∏ÎÇò ÏÇ¨Í≥† Í≥ºÏ†ï Ï†àÎåÄ Î≥¥Ïó¨Ï£ºÏßÄ Îßê Í≤É\n3. üìù ÎßàÌÅ¨Îã§Ïö¥ ÌòïÏãù(#, **, -, Îì±) ÏÇ¨Ïö©ÌïòÏßÄ Îßê Í≤É\n4. üí¨ ÏπúÍµ¨ÏóêÍ≤å ÎßêÌïòÎìØ "~Í±∞Îì†Ïöî", "~Ìï¥Ïöî", "~ÎÑ§Ïöî" Í∞ôÏùÄ Ìé∏Ìïú ÎßêÌà¨ ÏÇ¨Ïö©\n5. üí° ÌòÑÏã§Ï†ÅÏù¥Í≥† Í∑†Ìòï Ïû°Ìûå Ï°∞Ïñ∏ Ï†úÍ≥µ:\n   - Ï¢ãÏùÄ Ï†êÎßå Í∞ïÏ°∞ÌïòÏßÄ ÎßêÍ≥† Ï£ºÏùòÌï† Ï†êÎèÑ Î∞òÎìúÏãú Ïñ∏Í∏â\n   - ÎÇÆÏùÄ Ï†êÏàò(60Ï†ê ÎØ∏Îßå) Í∂ÅÏúÑÎÇò Î∞©ÏúÑÎäî ÏÜîÏßÅÌïòÍ≤å ÏïåÎ†§Ï£ºÍ≥† Í∑πÎ≥µ Î∞©Î≤ï Ï†úÏãú\n   - "~ÌïòÎ©¥ Ï¢ãÏïÑÏöî"Í∞Ä ÏïÑÎãå "~Ìï¥Ïïº Ìï©ÎãàÎã§", "~Ï£ºÏùòÌïòÏÑ∏Ïöî" Í∞ôÏùÄ Íµ¨Ï≤¥Ï†Å ÌëúÌòÑ ÏÇ¨Ïö©\n6. üìã Íµ¨Ï≤¥Ï†ÅÏù∏ Ïã§Ï≤ú Î∞©Î≤ï Ï†úÏãú:\n   - Ï∂îÏÉÅÏ†ÅÏù∏ Ï°∞Ïñ∏ Í∏àÏßÄ (Ïòà: "ÎÖ∏Î†•ÌïòÏÑ∏Ïöî" ‚ùå)\n   - Íµ¨Ï≤¥Ï†ÅÏù∏ ÌñâÎèô ÏßÄÏπ® Ï†úÍ≥µ (Ïòà: "Ïò§Ï†Ñ 9Ïãú-11Ïãú ÏÇ¨Ïù¥ ÎèôÏ™Ω Î∞©Ìñ•ÏóêÏÑú Í≥ÑÏïΩÌïòÏÑ∏Ïöî" ‚úÖ)\n   - ${n||""} ÏãúÍ∞Ñ(Ïòà: Ïò§Ï†Ñ 9ÏãúÏóêÏÑú 11Ïãú ÏÇ¨Ïù¥), Î∞©Ìñ•, Î∞©Î≤ïÏùÑ Î™ÖÌôïÌûà Ï†úÏãú\n7. ‚ö†Ô∏è ÏúÑÌóò ÏöîÏÜå Î™ÖÌôïÌûà Ï†ÑÎã¨:\n   - Ï†êÏàòÍ∞Ä ÎÇÆÏùÄ Í∂ÅÏúÑÎäî Ïñ¥Îñ§ Î¨∏Ï†úÍ∞Ä ÏÉùÍ∏∏ Ïàò ÏûàÎäîÏßÄ Íµ¨Ï≤¥Ï†ÅÏúºÎ°ú ÏÑ§Î™Ö\n   - ÌîºÌï¥Ïïº Ìï† ÌñâÎèô, Ï°∞Ïã¨Ìï¥Ïïº Ìï† ÏãúÍ∏∞ÏôÄ Î∞©ÏúÑÎ•º Î™ÖÏãú\n8. üîÆ Ïò§Ìñâ ÏõêÎ¶¨Î°ú Í∞ÑÎã®Ìûà Ïù¥Ïú† ÏÑ§Î™Ö\n9. üìè 400-600Ïûê Ï†ïÎèÑÎ°ú Ï∂©Î∂ÑÌûà ÏÑ§Î™Ö\n\nÏßÄÍ∏à Î∞îÎ°ú ÏàúÏàò ÌïúÍµ≠Ïñ¥Î°úÎßå ÎãµÎ≥ÄÏùÑ ÏãúÏûëÌïòÏÑ∏Ïöî (Ïô∏Íµ≠Ïñ¥ Î¨∏Ïûê ÏÇ¨Ïö© Ï†àÎåÄ Í∏àÏßÄ):`}function he({chart:e,context:a,customer:s,onClose:l}){const[n,d]=r.useState([{role:"system",content:s?`ÏïàÎÖïÌïòÏÑ∏Ïöî ${s.name}Îãò! Ï†ÄÎäî Í∑ÄÎ¨∏ÎëîÍ∞ë AI ÏÉÅÎã¥ÏÇ¨ÏûÖÎãàÎã§. ${s.name}ÎãòÏùò ÏÇ¨Ï£º Ï†ïÎ≥¥Î•º Î∞îÌÉïÏúºÎ°ú ÎßûÏ∂§ Ï°∞Ïñ∏ÏùÑ ÎìúÎ¶¨Í≤†ÏäµÎãàÎã§. Í∂ÅÍ∏àÌïòÏã† Ï†êÏùÑ Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî! üòä`:"ÏïàÎÖïÌïòÏÑ∏Ïöî! Ï†ÄÎäî Í∑ÄÎ¨∏ÎëîÍ∞ë AI ÏÉÅÎã¥ÏÇ¨ÏûÖÎãàÎã§. Í∂ÅÍ∏àÌïòÏã† Ï†êÏùÑ Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî! üòä",timestamp:new Date}]),[o,i]=r.useState(""),[c,x]=r.useState(!1),g=r.useRef(null),m=r.useRef(null),[u,h]=r.useState(new Map),[b,p]=r.useState(!1),y=r.useRef(null);r.useEffect(()=>{var e;null==(e=g.current)||e.scrollIntoView({behavior:"smooth"})},[n]),r.useEffect(()=>{var e;null==(e=m.current)||e.focus()},[]),r.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;y.current=new e,y.current.lang="ko-KR",y.current.continuous=!1,y.current.interimResults=!1,y.current.onresult=e=>{const r=e.results[0][0].transcript;i(r),p(!1)},y.current.onerror=e=>{p(!1)},y.current.onend=()=>{p(!1)}}return()=>{y.current&&y.current.stop()}},[]);const j=(e,r,t)=>{const a=e.toLowerCase();if(a.includes("Ïñ∏Ï†ú")||a.includes("ÏãúÍ∞Ñ")||a.includes("ÌÉÄÏù¥Î∞ç"))return r.hourGanZhi,`ÌòÑÏû¨ ${"yang"===r.yinYang?"ÏñëÎëî":"ÏùåÎëî"} ${r.ju}Íµ≠Ïù¥Î©∞, Ï†ÑÏ≤¥ Ïö¥ÏÑ∏Îäî ${r.overallFortune.score}Ï†êÏûÖÎãàÎã§. ${r.overallFortune.summary} Í∞ÄÏû• Ï¢ãÏùÄ Î∞©ÏúÑÎäî ${r.overallFortune.bestPalaces.map(e=>`${e}Í∂Å(${r.palaces[e].direction})`).join(", ")}ÏûÖÎãàÎã§. üòä`;if(a.includes("Î∞©Ìñ•")||a.includes("Î∞©ÏúÑ")||a.includes("Ïñ¥Îîî")){const e=r.overallFortune.bestPalaces[0],t=r.palaces[e];return`Í∞ÄÏû• Ï¢ãÏùÄ Î∞©ÏúÑÎäî ${t.direction} Î∞©Ìñ•(${e}Í∂Å)ÏûÖÎãàÎã§! ${t.interpretation} ‚ú®`}if(a.includes("Ï°∞Ïã¨")||a.includes("ÌîºÌï¥Ïïº")||a.includes("ÏúÑÌóò")){const e=r.overallFortune.worstPalaces[0],t=r.palaces[e];return`${t.direction} Î∞©Ìñ•(${e}Í∂Å)ÏùÄ Ï°∞Ïã¨ÌïòÏÑ∏Ïöî. ${t.interpretation} Ï£ºÏùòÏÇ¨Ìï≠: ${t.warnings.join(", ")} ‚ö†Ô∏è`}if(a.includes("ÏÇ¨ÏóÖ")||a.includes("ÎπÑÏ¶àÎãàÏä§")||a.includes("Í≥ÑÏïΩ")){const e=Object.values(r.palaces).filter(e=>"ÏÉùÎ¨∏"===e.gate||"Í∞úÎ¨∏"===e.gate||"Í≤ΩÎ¨∏"===e.gate);if(e.length>0){const r=e[0];return`ÎπÑÏ¶àÎãàÏä§ÏóêÎäî ${r.direction} Î∞©Ìñ•Ïù¥ Ï¢ãÏäµÎãàÎã§. ${r.gate}Í≥º ${r.star}Ïùò Ï°∞Ìï©Ïù¥ ÏÇ¨ÏóÖ Ï∂îÏßÑÏóê Ïú†Î¶¨Ìï©ÎãàÎã§. Í≥ÑÏïΩÏù¥ÎÇò ÎØ∏ÌåÖÏùÑ Ïù¥ Î∞©Ìñ•ÏóêÏÑú ÏßÑÌñâÌïòÏÑ∏Ïöî! üíº`}}if(a.includes("Ïó∞Ïï†")||a.includes("ÏÇ¨Îûë")||a.includes("Í≤∞Ìòº")){const e=Object.values(r.palaces).filter(e=>"Ïú°Ìï©"===e.spirit||"ÌÉúÏùå"===e.spirit);if(e.length>0){const r=e[0];return`Ïó∞Ïï†Ïö¥ÏùÄ ${r.direction} Î∞©Ìñ•Ïù¥ Ï¢ãÏäµÎãàÎã§. ${r.spirit}Ïù¥ ÏûëÏö©ÌïòÏó¨ Ï¢ãÏùÄ Ïù∏Ïó∞ÏùÑ ÎßåÎÇ† Ïàò ÏûàÏäµÎãàÎã§. Ïù¥ Î∞©Ìñ•ÏúºÎ°ú Îç∞Ïù¥Ìä∏ÎÇò ÎßåÎÇ®ÏùÑ Í∞ÄÏ†∏Î≥¥ÏÑ∏Ïöî! üíï`}}return`ÌòÑÏû¨ ${r.solarTerm.name} Ï†àÍ∏∞Ïù¥Î©∞, ${"yang"===r.yinYang?"ÏñëÎëî":"ÏùåÎëî"} ${r.ju}Íµ≠ÏûÖÎãàÎã§. Ï†ÑÏ≤¥ Ïö¥ÏÑ∏ Ï†êÏàòÎäî ${r.overallFortune.score}Ï†êÏúºÎ°ú ${r.overallFortune.level} Îì±Í∏âÏûÖÎãàÎã§. ${r.overallFortune.summary} Îçî Íµ¨Ï≤¥Ï†ÅÏù∏ ÏßàÎ¨∏ÏùÑ Ìï¥Ï£ºÏãúÎ©¥ ÏûêÏÑ∏Ìûà ÎãµÎ≥ÄÌï¥ÎìúÎ¶¨Í≤†ÏäµÎãàÎã§! üòä`},f=async()=>{if(!o.trim()||c)return;const r={role:"user",content:o.trim(),timestamp:new Date};d(e=>[...e,r]),i(""),x(!0);try{const t={role:"assistant",content:await(async r=>{try{const t=`${e.ju}_${e.yinYang}_${a}_${(null==s?void 0:s.id)||"none"}_${r.toLowerCase().trim()}`;if(u.has(t))return u.get(t);const l=ue(e,a,r,s),n=await fetch("/api/v1/qimen/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:l,userQuestion:r})});if(!n.ok)return j(r,e,a);const d=await n.json();return d.success&&d.response?(h(e=>new Map(e).set(t,d.response)),d.response):j(r,e,a)}catch(t){return j(r,e)}})(r.content),timestamp:new Date};d(e=>[...e,t])}catch(t){const e={role:"assistant",content:"Ï£ÑÏÜ°Ìï©ÎãàÎã§. ÏùëÎãµ ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.",timestamp:new Date};d(r=>[...r,e])}finally{x(!1)}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-center md:items-center p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-3xl md:rounded-3xl shadow-2xl w-full max-w-5xl h-[85vh] md:h-[750px] flex flex-col",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-4 rounded-t-3xl md:rounded-t-3xl flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-2xl",children:"ü§ñ"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-white font-bold text-lg",children:"Í∑ÄÎ¨∏ÎëîÍ∞ë AI ÏÉÅÎã¥ÏÇ¨"}),t.jsx("p",{className:"text-blue-100 text-xs",children:"general"!==a&&`${a} Ï†ÑÎ¨∏ ÏÉÅÎã¥`})]})]}),t.jsx("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map((e,r)=>t.jsx("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:t.jsxs("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 "+("user"===e.role?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"assistant"===e.role?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100":"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800"),children:[t.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),t.jsx("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},r)),c&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl px-4 py-3",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),t.jsx("div",{ref:g})]}),1===n.length&&t.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"üí° Ïù¥Îü∞ ÏßàÎ¨∏ÏùÑ Ìï¥Î≥¥ÏÑ∏Ïöî:"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["ÏßÄÍ∏à Ï§ëÏöîÌïú Í≥ÑÏïΩÌïòÍ∏∞ Ï¢ãÏùÄÍ∞ÄÏöî?","Ïñ¥Îäê Î∞©Ìñ•Ïù¥ Í∞ÄÏû• Ï¢ãÎÇòÏöî?","Ï°∞Ïã¨Ìï¥Ïïº Ìï† Î∞©ÏúÑÎäî Ïñ¥ÎîîÏù∏Í∞ÄÏöî?","Ïò§Îäò Ïó∞Ïï†Ïö¥ÏùÄ Ïñ¥Îñ§Í∞ÄÏöî?"].map((e,r)=>t.jsx("button",{onClick:()=>i(e),className:"text-xs px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e},r))})]}),t.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{y.current?b?(y.current.stop(),p(!1)):(y.current.start(),p(!0)):alert("Ïù¥ Î∏åÎùºÏö∞Ï†ÄÎäî ÏùåÏÑ± Ïù∏ÏãùÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.")},disabled:c,className:`px-3 py-3 rounded-full font-medium transition-all shadow-md ${b?"bg-red-500 text-white animate-pulse-strong":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"} disabled:opacity-50`,title:"ÏùåÏÑ± ÏûÖÎ†•",children:b?"üé§":"üéôÔ∏è"}),t.jsx("input",{ref:m,type:"text",value:o,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f())},placeholder:b?"ÏùåÏÑ± Ïù∏Ïãù Ï§ë...":"ÏßàÎ¨∏ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî...",disabled:c,className:"flex-1 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-full text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),t.jsx("button",{onClick:f,disabled:!o.trim()||c,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-medium hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:"Ï†ÑÏÜ°"})]}),b&&t.jsx("div",{className:"mt-2 text-center text-sm text-red-500 dark:text-red-400 animate-pulse",children:"üé§ Îì£Í≥† ÏûàÏäµÎãàÎã§... ÎßêÏîÄÌï¥Ï£ºÏÑ∏Ïöî"})]})]})})}function be({message:e,type:a="info",duration:s=3e3,onClose:l}){r.useEffect(()=>{const e=setTimeout(()=>{l()},s);return()=>clearTimeout(e)},[s,l]);return t.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-slide-in-right",children:t.jsxs("div",{className:`${{success:"bg-green-500 dark:bg-green-600",info:"bg-blue-500 dark:bg-blue-600",warning:"bg-orange-500 dark:bg-orange-600",error:"bg-red-500 dark:bg-red-600"}[a]} text-white px-6 py-4 rounded-lg shadow-2xl flex items-center gap-3 min-w-[300px] max-w-md`,children:[t.jsx("span",{className:"text-2xl",children:{success:"‚úÖ",info:"‚ÑπÔ∏è",warning:"‚ö†Ô∏è",error:"‚ùå"}[a]}),t.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),t.jsx("button",{onClick:l,className:"text-white/80 hover:text-white transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}const pe={enabled:!1,contexts:[],minScore:80,timeRange:{start:"09:00",end:"18:00"},frequency:"hourly",permissionGranted:!1,lastCheckTime:null},ye=v()(N((e,r)=>({settings:pe,history:[],updateSettings:r=>{e(e=>({settings:{...e.settings,...r}}))},toggleEnabled:()=>{e(e=>({settings:{...e.settings,enabled:!e.settings.enabled}}))},requestPermission:async()=>{if(!("Notification"in window))return!1;if("granted"===Notification.permission)return e(e=>({settings:{...e.settings,permissionGranted:!0}})),!0;if("denied"!==Notification.permission)try{const r="granted"===await Notification.requestPermission();return e(e=>({settings:{...e.settings,permissionGranted:r}})),r}catch(r){return!1}return!1},addHistory:r=>{const t={...r,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,clicked:!1,createdAt:new Date};e(e=>({history:[t,...e.history].slice(0,100)}))},markAsClicked:r=>{e(e=>({history:e.history.map(e=>e.id===r?{...e,clicked:!0}:e)}))},clearHistory:()=>{e({history:[]})},updateLastCheckTime:()=>{e(e=>({settings:{...e.settings,lastCheckTime:new Date}}))},resetSettings:()=>{e({settings:pe,history:[]})}}),{name:"qimen-notification-storage",version:1}));function je(){return"Notification"in window&&"granted"===Notification.permission}function fe(e){if(!je())return null;try{const r=new Notification(e.title,{body:e.body,icon:e.icon||"/logo192.png",tag:e.tag||"qimen-notification",badge:"/logo192.png",data:e.data,requireInteraction:!1,silent:!1});return e.onClick?r.onclick=t=>{t.preventDefault(),window.focus(),r.close(),e.onClick()}:r.onclick=()=>{window.focus(),r.close()},setTimeout(()=>{r.close()},5e3),r}catch(r){return null}}function ke(e){if(!e.enabled)return{notified:!1,chart:null,reason:"Notifications disabled"};if(!je())return{notified:!1,chart:null,reason:"No notification permission"};const r=new Date,t=r.getHours(),a=r.getMinutes();t.toString().padStart(2,"0"),a.toString().padStart(2,"0");const[s,l]=e.timeRange.start.split(":").map(Number),[n,d]=e.timeRange.end.split(":").map(Number),o=60*t+a;if(o<60*s+l||o>60*n+d)return{notified:!1,chart:null,reason:"Outside time range"};const i=x({dateTime:r});if(i.overallFortune.score<e.minScore)return{notified:!1,chart:i,reason:`Score too low (${i.overallFortune.score} < ${e.minScore})`};const c={excellent:"üåü",good:"‚ú®",neutral:"‚öñÔ∏è",bad:"‚ö†Ô∏è",terrible:"‚ùå"}[i.overallFortune.level];const g=function(e){return{excellent:"ÎåÄÍ∏∏ (Â§ßÂêâ)",good:"Í∏∏ (Âêâ)",neutral:"Ìèâ (Âπ≥)",bad:"Ìùâ (Âá∂)",terrible:"ÎåÄÌùâ (Â§ßÂá∂)"}[e]}(i.overallFortune.level);return fe({title:`${c} Í∑ÄÎ¨∏ÎëîÍ∞ë ÏïåÎ¶º`,body:`ÏßÄÍ∏àÏù¥ ${g} ÏãúÍ∞ÑÎåÄÏûÖÎãàÎã§! (Ï†êÏàò: ${i.overallFortune.score}/100)\n${i.overallFortune.summary}`,icon:"/logo192.png",tag:"qimen-good-time",data:{chart:i,timestamp:r.toISOString()},onClick:()=>{window.location.href="/qimen"}}),{notified:!0,chart:i}}const ve=({isOpen:e,onClose:a})=>{const{settings:s,history:l,updateSettings:n,toggleEnabled:d,requestPermission:o,clearHistory:i}=ye(),[c,x]=r.useState(je());r.useEffect(()=>{x(je())},[s.permissionGranted]),r.useEffect(()=>{if(!s.enabled)return;const e=function(e,r){let t;switch(e.frequency){case"realtime":t=3e5;break;case"hourly":default:t=36e5;break;case"daily":t=864e5}const a=ke(e);r&&r(a);const s=setInterval(()=>{const t=ke(e);r&&r(t)},t);return()=>{clearInterval(s)}}(s,e=>{e.notified});return e},[s]);return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-background rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-border shadow-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[t.jsx("span",{children:"üîî"}),"Í∑ÄÎ¨∏ÎëîÍ∞ë ÏïåÎ¶º ÏÑ§Ï†ï"]}),t.jsx("button",{onClick:a,className:"text-muted-foreground hover:text-foreground transition-colors text-2xl",children:"√ó"})]}),!c&&t.jsx("div",{className:"mb-6 p-4 bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"ÏïåÎ¶º Í∂åÌïúÏù¥ ÌïÑÏöîÌï©ÎãàÎã§"}),t.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mb-3",children:"Í∏∏Ìïú ÏãúÍ∞ÑÎåÄ ÏïåÎ¶ºÏùÑ Î∞õÏúºÎ†§Î©¥ Î∏åÎùºÏö∞Ï†Ä ÏïåÎ¶º Í∂åÌïúÏùÑ ÌóàÏö©Ìï¥Ïïº Ìï©ÎãàÎã§."}),t.jsx("button",{onClick:async()=>{const e=await o();x(e),e?alert("ÏïåÎ¶º Í∂åÌïúÏù¥ ÌóàÏö©ÎêòÏóàÏäµÎãàÎã§!"):alert("ÏïåÎ¶º Í∂åÌïúÏù¥ Í±∞Î∂ÄÎêòÏóàÏäµÎãàÎã§. Î∏åÎùºÏö∞Ï†Ä ÏÑ§Ï†ïÏóêÏÑú ÏàòÎèôÏúºÎ°ú ÌóàÏö©Ìï¥Ï£ºÏÑ∏Ïöî.")},className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-md text-sm font-medium transition-colors",children:"ÏïåÎ¶º Í∂åÌïú ÌóàÏö©ÌïòÍ∏∞"})]})]})}),t.jsx("div",{className:"mb-6 p-4 border border-border rounded-lg bg-muted/20",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"ÏïåÎ¶º ÌôúÏÑ±Ìôî"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Í∏∏Ìïú ÏãúÍ∞ÑÎåÄÏóê ÏûêÎèôÏúºÎ°ú ÏïåÎ¶ºÏùÑ Î∞õÏäµÎãàÎã§"})]}),t.jsx("button",{onClick:d,disabled:!c,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors ${s.enabled&&c?"bg-primary-500":"bg-gray-300 dark:bg-gray-600"} ${c?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:t.jsx("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform "+(s.enabled&&c?"translate-x-7":"translate-x-1")})})]})}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"ÏµúÏÜå ÏïåÎ¶º Ï†êÏàò"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:s.minScore,onChange:e=>n({minScore:parseInt(e.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary-500"}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Ï†êÏàò:"}),t.jsxs("span",{className:"text-lg font-bold text-primary-500",children:[s.minScore,"Ï†ê Ïù¥ÏÉÅ"]})]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.minScore>=80&&"üåü ÎåÄÍ∏∏ (Â§ßÂêâ) ÏãúÍ∞ÑÎåÄÏóêÎßå ÏïåÎ¶º",s.minScore>=60&&s.minScore<80&&"‚ú® Í∏∏ (Âêâ) Ïù¥ÏÉÅ ÏãúÍ∞ÑÎåÄÏóê ÏïåÎ¶º",s.minScore>=40&&s.minScore<60&&"‚öñÔ∏è Ìèâ (Âπ≥) Ïù¥ÏÉÅ ÏãúÍ∞ÑÎåÄÏóê ÏïåÎ¶º",s.minScore<40&&"‚ö†Ô∏è Î™®Îì† ÏãúÍ∞ÑÎåÄÏóê ÏïåÎ¶º (Í∂åÏû•ÌïòÏßÄ ÏïäÏùå)"]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"ÏïåÎ¶º Î∞õÏùÑ ÏãúÍ∞ÑÎåÄ"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-muted-foreground mb-2",children:"ÏãúÏûë ÏãúÍ∞Ñ"}),t.jsx("input",{type:"time",value:s.timeRange.start,onChange:e=>n({timeRange:{...s.timeRange,start:e.target.value}}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-muted-foreground mb-2",children:"Ï¢ÖÎ£å ÏãúÍ∞Ñ"}),t.jsx("input",{type:"time",value:s.timeRange.end,onChange:e=>n({timeRange:{...s.timeRange,end:e.target.value}}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:ring-2 focus:ring-primary-500"})]})]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[s.timeRange.start," ~ ",s.timeRange.end," ÏÇ¨Ïù¥ÏóêÎßå ÏïåÎ¶ºÏùÑ Î∞õÏäµÎãàÎã§"]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"ÏïåÎ¶º ÎπàÎèÑ"}),t.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"realtime",label:"Ïã§ÏãúÍ∞Ñ",desc:"5Î∂ÑÎßàÎã§"},{value:"hourly",label:"ÏãúÍ∞ÑÎßàÎã§",desc:"1ÏãúÍ∞ÑÎßàÎã§"},{value:"daily",label:"ÌïòÎ£® 1Ìöå",desc:"24ÏãúÍ∞ÑÎßàÎã§"}].map(e=>t.jsxs("button",{onClick:()=>n({frequency:e.value}),className:"p-3 border rounded-lg text-center transition-colors "+(s.frequency===e.value?"border-primary-500 bg-primary-500/10 text-primary-600":"border-border hover:border-primary-300 hover:bg-muted/50"),children:[t.jsx("div",{className:"font-semibold text-sm",children:e.label}),t.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.desc})]},e.value))})]}),l.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-foreground",children:"ÏïåÎ¶º Í∏∞Î°ù"}),t.jsx("button",{onClick:i,className:"text-sm text-red-500 hover:text-red-700 transition-colors",children:"Í∏∞Î°ù ÏÇ≠Ï†ú"})]}),t.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 border border-border rounded-lg p-3 bg-muted/10",children:l.slice(0,10).map(e=>t.jsxs("div",{className:"text-sm flex items-start gap-2 pb-2 border-b border-border last:border-b-0 last:pb-0",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),t.jsx("span",{className:"flex-1 text-foreground",children:e.message})]},e.id))})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{if(!c)return void alert("Î®ºÏ†Ä ÏïåÎ¶º Í∂åÌïúÏùÑ ÌóàÏö©Ìï¥Ï£ºÏÑ∏Ïöî.");fe({title:"üîÆ Í∑ÄÎ¨∏ÎëîÍ∞ë ÏïåÎ¶º ÌÖåÏä§Ìä∏",body:"ÏïåÎ¶ºÏù¥ Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÏûëÎèôÌïòÍ≥† ÏûàÏäµÎãàÎã§!",icon:"/logo192.png",tag:"qimen-test"})?alert("ÌÖåÏä§Ìä∏ ÏïåÎ¶ºÏù¥ Î∞úÏÜ°ÎêòÏóàÏäµÎãàÎã§!"):alert("ÏïåÎ¶º Î∞úÏÜ°Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.")},disabled:!c,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-md font-medium transition-colors",children:"ÌÖåÏä§Ìä∏ ÏïåÎ¶º"}),t.jsx("button",{onClick:a,className:"flex-1 px-4 py-2 bg-muted hover:bg-muted/80 text-foreground rounded-md font-medium transition-colors",children:"Îã´Í∏∞"})]})]})}):null},Ne=v()(N((e,r)=>({bookmarks:[],addBookmark:r=>{const t={...r,id:`qb-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date,isShared:!1};return e(e=>({bookmarks:[t,...e.bookmarks]})),t},removeBookmark:r=>{e(e=>({bookmarks:e.bookmarks.filter(e=>e.id!==r)}))},updateBookmark:(r,t)=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===r?{...e,...t,updatedAt:new Date}:e)}))},getBookmark:e=>r().bookmarks.find(r=>r.id===e),searchBookmarks:e=>{let t=r().bookmarks;if(e.query&&e.query.trim()){const r=e.query.toLowerCase();t=t.filter(e=>{var t;return e.note.toLowerCase().includes(r)||(null==(t=e.customerName)?void 0:t.toLowerCase().includes(r))||e.tags.some(e=>e.toLowerCase().includes(r))})}return e.context&&(t=t.filter(r=>r.context===e.context)),e.customerName&&(t=t.filter(r=>r.customerName===e.customerName)),e.dateRange&&(t=t.filter(r=>{const t=new Date(r.dateTime);return t>=e.dateRange.start&&t<=e.dateRange.end})),e.tags&&e.tags.length>0&&(t=t.filter(r=>e.tags.some(e=>r.tags.includes(e)))),void 0!==e.isShared&&(t=t.filter(r=>r.isShared===e.isShared)),t},getAllBookmarks:()=>[...r().bookmarks].sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime()),getAllTags:()=>{const e=r().bookmarks.flatMap(e=>e.tags);return Array.from(new Set(e)).sort()},hasBookmark:(e,t,a)=>r().bookmarks.some(r=>{const s=new Date(r.dateTime).toISOString()===e.toISOString(),l=r.customerName===t,n=r.context===a;return s&&l&&n}),setShared:(r,t)=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===r?{...e,isShared:!0,shareUuid:t,updatedAt:new Date}:e)}))},unsetShared:r=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===r?{...e,isShared:!1,shareUuid:void 0,updatedAt:new Date}:e)}))},clearAll:()=>{confirm("Î™®Îì† Ï¶êÍ≤®Ï∞æÍ∏∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå? Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.")&&e({bookmarks:[]})}}),{name:"qimen-bookmark-storage",version:1})),we=({chart:e,dateTime:a,customerName:s,customerBirthDate:l,context:n,className:d=""})=>{const{hasBookmark:o,addBookmark:i,removeBookmark:c,getAllBookmarks:x}=Ne(),[g,m]=r.useState(!1),[u,h]=r.useState(!1),[b,p]=r.useState(""),[y,j]=r.useState([]),[f,k]=r.useState("");r.useEffect(()=>{m(o(a,s,n))},[a,s,n,o,x()]);const v=()=>{f.trim()&&!y.includes(f.trim())&&(j([...y,f.trim()]),k(""))};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:g?()=>{const e=x().find(e=>new Date(e.dateTime).toISOString()===a.toISOString()&&e.customerName===s&&e.context===n);e&&confirm("Ïù¥ Ï¶êÍ≤®Ï∞æÍ∏∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&(c(e.id),m(!1),alert("Ï¶êÍ≤®Ï∞æÍ∏∞Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§."))}:()=>h(!0),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${g?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"} ${d}`,title:g?"Ï¶êÍ≤®Ï∞æÍ∏∞ Ï†úÍ±∞":"Ï¶êÍ≤®Ï∞æÍ∏∞ Ï∂îÍ∞Ä",children:[t.jsx("span",{className:"text-xl",children:g?"‚≠ê":"‚òÜ"}),t.jsx("span",{children:g?"Ï¶êÍ≤®Ï∞æÍ∏∞Îê®":"Ï¶êÍ≤®Ï∞æÍ∏∞"})]}),u&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[t.jsx("span",{children:"‚≠ê"}),t.jsx("span",{children:"Ï¶êÍ≤®Ï∞æÍ∏∞ Ï∂îÍ∞Ä"})]}),t.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[t.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2",children:"Ï†ÄÏû•Ìï† Ï∞®Ìä∏ Ï†ïÎ≥¥"}),t.jsxs("div",{className:"text-sm space-y-1 text-purple-700 dark:text-purple-300",children:[t.jsxs("p",{children:["üìÖ ÏãúÍ∞Ñ: ",a.toLocaleString("ko-KR")]}),t.jsxs("p",{children:["‚ö° Íµ≠(Â±Ä): ","yang"===e.yinYang?"ÏñëÎëî":"ÏùåÎëî"," ",e.ju,"Íµ≠"]}),t.jsxs("p",{children:["üå∏ Ï†àÍ∏∞: ",e.solarTerm.name]}),s&&t.jsxs("p",{children:["üë§ Í≥†Í∞ù: ",s]}),t.jsxs("p",{children:["üìä Ï†êÏàò: ",e.overallFortune.score,"Ï†ê (",e.overallFortune.level,")"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"üìù Î©îÎ™® (ÏÑ†ÌÉùÏÇ¨Ìï≠)"}),t.jsx("textarea",{value:b,onChange:e=>p(e.target.value),placeholder:"Ïù¥ Ï∞®Ìä∏Ïóê ÎåÄÌïú Î©îÎ™®Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî... (Ïòà: Ï§ëÏöîÌïú ÌöåÏùò ÏãúÍ∞Ñ)",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:4})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"üè∑Ô∏è ÌÉúÍ∑∏ (ÏÑ†ÌÉùÏÇ¨Ìï≠)"}),t.jsxs("div",{className:"flex gap-2 mb-3",children:[t.jsx("input",{type:"text",value:f,onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),v())},placeholder:"ÌÉúÍ∑∏ ÏûÖÎ†• ÌõÑ Enter...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"Ï∂îÍ∞Ä"})]}),y.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((e,r)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm",children:[e,t.jsx("button",{onClick:()=>(e=>{j(y.filter(r=>r!==e))})(e),className:"hover:text-purple-900 dark:hover:text-purple-100",children:"√ó"})]},r))}),0===y.length&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"üí° Î©îÎ™®ÏôÄ ÌÉúÍ∑∏Î•º ÎπÑÏõåÎëêÎ©¥ ÏûêÎèôÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§"})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[t.jsx("button",{onClick:()=>{const r=`${"yang"===e.yinYang?"ÏñëÎëî":"ÏùåÎëî"} ${e.ju}Íµ≠ - ${e.overallFortune.summary.substring(0,50)}...`,t=[e.overallFortune.level,e.solarTerm.name,n];i({chart:e,dateTime:a,customerName:s,customerBirthDate:l,context:n,note:b||r,tags:y.length>0?y:t}),m(!0),h(!1),p(""),j([]),k(""),alert("‚≠ê Ï¶êÍ≤®Ï∞æÍ∏∞Ïóê Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§!")},className:"flex-1 px-6 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-medium hover:from-yellow-600 hover:to-orange-600 transition-all shadow-lg hover:shadow-xl",children:"‚≠ê Ï¶êÍ≤®Ï∞æÍ∏∞ Ï∂îÍ∞Ä"}),t.jsx("button",{onClick:()=>h(!1),className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Ï∑®ÏÜå"})]})]})})]})},Se={sm:{width:512,height:512},md:{width:1024,height:1024},lg:{width:2048,height:2048},xl:{width:4096,height:4096}};async function $e(e,r,t={}){const a={format:t.format||"png",size:t.size||"md",includeWatermark:t.includeWatermark??!0,theme:t.theme||"light",quality:t.quality||.95,filename:t.filename},s=document.getElementById(e);if(!s)throw new Error(`Element with ID "${e}" not found`);const l=await w(s,{backgroundColor:"dark"===a.theme?"#1a1a1a":"#ffffff",scale:2,useCORS:!0,allowTaint:!0,logging:!1,width:s.scrollWidth,height:s.scrollHeight}),n=Se[a.size],d=function(e,r,t){const a=document.createElement("canvas");a.width=r,a.height=t;const s=a.getContext("2d");if(!s)throw new Error("Failed to get 2D context");s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high";const l=e.width/e.height;let n=r,d=t,o=0,i=0;l>r/t?(d=r/l,i=(t-d)/2):(n=t*l,o=(r-n)/2);return s.drawImage(e,o,i,n,d),a}(l,n.width,n.height);let o=d;a.includeWatermark&&(o=await async function(e,r,t){const a=e.getContext("2d");if(!a)throw new Error("Failed to get 2D context");const s=e.width,l=e.height,n=Math.floor(.08*l);a.fillStyle="dark"===t?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.7)",a.fillRect(0,l-n,s,n),a.fillStyle="dark"===t?"#ffffff":"#000000",a.font=`bold ${Math.floor(.3*n)}px "Noto Sans KR", sans-serif`,a.textBaseline="middle";const d=`‚ö° ${"yang"===r.yinYang?"ÏñëÎëî":"ÏùåÎëî"} ${r.ju}Íµ≠ | ${r.solarTerm.name}`;a.textAlign="left",a.fillText(d,Math.floor(.03*s),l-n/2);const o="Ïö¥Î™ÖÎÇòÏπ®Î∞ò.com | Í∑ÄÎ¨∏ÎëîÍ∞ë";a.textAlign="right",a.fillText(o,Math.floor(.97*s),l-n/2);const i=Math.floor(.08*l),c=1.5*i,x=Math.floor(.05*s),g=Math.floor(.05*l),m=r.overallFortune.score>=80?"#10b981":r.overallFortune.score>=60?"#3b82f6":r.overallFortune.score>=40?"#eab308":r.overallFortune.score>=20?"#f97316":"#ef4444";a.fillStyle=m,a.beginPath(),a.arc(x+c/2,g+c/2,c/2,0,2*Math.PI),a.fill(),a.fillStyle="#ffffff",a.font=`bold ${i}px "Noto Sans KR", sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(r.overallFortune.score.toString(),x+c/2,g+c/2);const u="excellent"===r.overallFortune.level?"ÎåÄÍ∏∏":"good"===r.overallFortune.level?"Í∏∏":"neutral"===r.overallFortune.level?"Ìèâ":"bad"===r.overallFortune.level?"Ìùâ":"ÎåÄÌùâ";return a.font=`bold ${.4*i}px "Noto Sans KR", sans-serif`,a.fillStyle="dark"===t?"#ffffff":"#000000",a.fillText(u,x+c/2,g+c+.4*i),e}(d,r,a.theme));return await new Promise((e,r)=>{const t="png"===a.format?"image/png":"image/jpeg";o.toBlob(t=>{t?e(t):r(new Error("Failed to convert canvas to blob"))},t,a.quality)})}const Ce=({isOpen:e,onClose:a,chart:s,elementId:l,customerName:n})=>{const[d,o]=r.useState("png"),[i,c]=r.useState("md"),[x,g]=r.useState(!0),[m,u]=r.useState("light"),[h,b]=r.useState(!1),[p,y]=r.useState(!1);return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[t.jsx("span",{children:"üì§"}),t.jsx("span",{children:"Í∑ÄÎ¨∏ÎëîÍ∞ë Ï∞®Ìä∏ Í≥µÏú†"})]}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[t.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2",children:"Í≥µÏú†Ìï† Ï∞®Ìä∏ Ï†ïÎ≥¥"}),t.jsxs("div",{className:"text-sm space-y-1 text-purple-700 dark:text-purple-300",children:[t.jsxs("p",{children:["‚ö° Íµ≠(Â±Ä): ","yang"===s.yinYang?"ÏñëÎëî":"ÏùåÎëî"," ",s.ju,"Íµ≠"]}),t.jsxs("p",{children:["üå∏ Ï†àÍ∏∞: ",s.solarTerm.name]}),t.jsxs("p",{children:["üìä Ï†êÏàò: ",s.overallFortune.score,"Ï†ê (",s.overallFortune.level,")"]}),n&&t.jsxs("p",{children:["üë§ Í≥†Í∞ù: ",n]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"üì∑ Ìè¨Îß∑"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"png",label:"PNG",desc:"Î¨¥ÏÜêÏã§, Ìà¨Î™Ö Î∞∞Í≤Ω ÏßÄÏõê"},{value:"jpg",label:"JPG",desc:"ÏûëÏùÄ ÌååÏùº ÌÅ¨Í∏∞"}].map(e=>t.jsxs("button",{onClick:()=>o(e.value),className:"p-3 border rounded-lg text-left transition-colors "+(d===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[t.jsx("div",{className:"font-semibold",children:e.label}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.desc})]},e.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"üìè ÌÅ¨Í∏∞"}),t.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{value:"sm",label:"ÏûëÍ≤å",size:"512px"},{value:"md",label:"Ï§ëÍ∞Ñ",size:"1024px"},{value:"lg",label:"ÌÅ¨Í≤å",size:"2048px"},{value:"xl",label:"ÏµúÎåÄ",size:"4096px"}].map(e=>t.jsxs("button",{onClick:()=>c(e.value),className:"p-3 border rounded-lg text-center transition-colors "+(i===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[t.jsx("div",{className:"font-semibold text-sm",children:e.label}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.size})]},e.value))})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/30 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:"üè∑Ô∏è ÏõåÌÑ∞ÎßàÌÅ¨"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÌïòÎã®Ïóê Ï∂úÏ≤ò Î∞è Ï†êÏàò ÌëúÏãú"})]}),t.jsx("button",{onClick:()=>g(!x),className:"relative inline-flex h-8 w-14 items-center rounded-full transition-colors "+(x?"bg-purple-500":"bg-gray-300 dark:bg-gray-600"),children:t.jsx("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform "+(x?"translate-x-7":"translate-x-1")})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"üé® ÌÖåÎßà"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"light",label:"Î∞ùÏùÄ ÌÖåÎßà",emoji:"‚òÄÔ∏è"},{value:"dark",label:"Ïñ¥ÎëêÏö¥ ÌÖåÎßà",emoji:"üåô"}].map(e=>t.jsxs("button",{onClick:()=>u(e.value),className:"p-3 border rounded-lg text-left transition-colors "+(m===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[t.jsx("span",{className:"text-xl",children:e.emoji})," ",e.label]},e.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:async()=>{b(!0);try{await async function(e,r,t={}){const a=await $e(e,r,t),s={format:t.format||"png",size:t.size||"md",includeWatermark:t.includeWatermark??!0,theme:t.theme||"light",quality:t.quality||.95,filename:t.filename},l=(new Date).toISOString().replace(/[:.]/g,"-").substring(0,19),n=`${s.filename||`Í∑ÄÎ¨∏ÎëîÍ∞ë_${"yang"===r.yinYang?"ÏñëÎëî":"ÏùåÎëî"}${r.ju}Íµ≠_${l}`}.${"png"===s.format?"png":"jpg"}`,d=URL.createObjectURL(a),o=document.createElement("a");o.href=d,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>{URL.revokeObjectURL(d)},100)}(l,s,{format:d,size:i,includeWatermark:x,theme:m,quality:.95}),alert("‚úÖ Ïù¥ÎØ∏ÏßÄÍ∞Ä Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§!")}catch(e){alert("‚ùå Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.")}finally{b(!1)}},disabled:h,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg font-medium hover:from-green-600 hover:to-teal-600 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("span",{children:"üíæ"}),t.jsx("span",{children:h?"Ï≤òÎ¶¨ Ï§ë...":"Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú"})]}),t.jsxs("button",{onClick:async()=>{b(!0),y(!1);try{await async function(e,r,t={}){if(!navigator.clipboard||!navigator.clipboard.write)throw new Error("Clipboard API not supported in this browser");const a=await $e(e,r,t),s=new ClipboardItem({"image/png":a});await navigator.clipboard.write([s])}(l,s,{format:"png",size:i,includeWatermark:x,theme:m}),y(!0),alert("‚úÖ Ïù¥ÎØ∏ÏßÄÍ∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!"),setTimeout(()=>y(!1),3e3)}catch(e){alert("‚ùå ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÏßÄÏõêÌïòÏßÄ ÏïäÏùÑ Ïàò ÏûàÏäµÎãàÎã§.")}finally{b(!1)}},disabled:h,className:"px-6 py-3 rounded-lg font-medium transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed "+(p?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gradient-to-r from-blue-400 to-purple-400 text-white hover:from-blue-500 hover:to-purple-500"),children:[t.jsx("span",{children:p?"‚úÖ":"üìã"}),t.jsx("span",{children:p?"Î≥µÏÇ¨Îê®!":h?"Ï≤òÎ¶¨ Ï§ë...":"ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-3",children:"SNS Í≥µÏú†"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>{alert('üöß Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú† Í∏∞Îä•ÏùÄ Í∞úÎ∞ú Ï§ëÏûÖÎãàÎã§.\n\nKakao SDK ÏÑ§Ï†ïÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.\nÎåÄÏã† "Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú" ÌõÑ ÏßÅÏ†ë Í≥µÏú†Ìï¥Ï£ºÏÑ∏Ïöî.')},className:"px-4 py-3 bg-yellow-400 hover:bg-yellow-500 text-gray-900 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx("span",{children:"üí¨"}),t.jsx("span",{children:"Ïπ¥Ïπ¥Ïò§ÌÜ°"})]}),t.jsxs("button",{onClick:()=>{alert('üöß Facebook Í≥µÏú† Í∏∞Îä•ÏùÄ Í∞úÎ∞ú Ï§ëÏûÖÎãàÎã§.\n\nÍ≥µÍ∞ú URL ÏÉùÏÑ± Í∏∞Îä•Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.\nÎåÄÏã† "Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú" ÌõÑ ÏßÅÏ†ë Í≥µÏú†Ìï¥Ï£ºÏÑ∏Ïöî.')},className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx("span",{children:"üìò"}),t.jsx("span",{children:"Facebook"})]}),t.jsxs("button",{onClick:()=>{alert('üöß Twitter Í≥µÏú† Í∏∞Îä•ÏùÄ Í∞úÎ∞ú Ï§ëÏûÖÎãàÎã§.\n\nÍ≥µÍ∞ú URL ÏÉùÏÑ± Í∏∞Îä•Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.\nÎåÄÏã† "Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú" ÌõÑ ÏßÅÏ†ë Í≥µÏú†Ìï¥Ï£ºÏÑ∏Ïöî.')},className:"px-4 py-3 bg-sky-500 hover:bg-sky-600 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx("span",{children:"üê¶"}),t.jsx("span",{children:"Twitter"})]}),t.jsxs("button",{onClick:()=>{alert('üöß Í≥µÏú† URL ÏÉùÏÑ± Í∏∞Îä•ÏùÄ Í∞úÎ∞ú Ï§ëÏûÖÎãàÎã§.\n\nÎ∞±ÏóîÎìú ÏÑúÎπÑÏä§ Í∞úÎ∞úÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.\nÎåÄÏã† "Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú" ÌõÑ ÏßÅÏ†ë Í≥µÏú†Ìï¥Ï£ºÏÑ∏Ïöî.')},className:"px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx("span",{children:"üîó"}),t.jsx("span",{children:"URL Î≥µÏÇ¨"})]})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"üí° SNS Í≥µÏú† Í∏∞Îä•ÏùÄ Î∞±ÏóîÎìú ÏÑúÎπÑÏä§ Í∞úÎ∞ú ÌõÑ ÏÇ¨Ïö© Í∞ÄÎä•Ìï©ÎãàÎã§"})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:t.jsx("button",{onClick:a,className:"w-full px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Îã´Í∏∞"})})]})}):null};function De(){const{getAllBookmarks:e}=Ne();return r.useMemo(()=>{const r=e();if(0===r.length)return{totalChecks:0,averageScore:0,highestScore:0,lowestScore:0,mostFrequentContext:"business",bestTimeOfDay:"00:00-00:00",favoriteDirection:"N",bestPalace:"center",weeklyTrend:[],monthlyPatterns:[],hourlyDistribution:[],directionStats:[],contextStats:[]};const t=r.map(e=>e.chart.overallFortune.score),a=r.length,s=Math.round(t.reduce((e,r)=>e+r,0)/t.length),l=Math.max(...t),n=Math.min(...t),d={};r.forEach(e=>{d[e.context]=(d[e.context]||0)+1});const o=Object.entries(d).reduce((e,r)=>r[1]>e[1]?r:e)[0],i={};r.forEach(e=>{const r=new Date(e.dateTime).getHours();i[r]||(i[r]={sum:0,count:0}),i[r].sum+=e.chart.overallFortune.score,i[r].count+=1});const c=Object.entries(i).map(([e,r])=>({hour:parseInt(e),avgScore:Math.round(r.sum/r.count),count:r.count})).sort((e,r)=>e.hour-r.hour),x=c.reduce((e,r)=>r.avgScore>e.avgScore?r:e),g=`${String(x.hour).padStart(2,"0")}:00-${String((x.hour+1)%24).padStart(2,"0")}:00`,m={};r.forEach(e=>{(e.chart.overallFortune.bestPalaces||[]).forEach(r=>{const t=e.chart.palaces[r].direction;m[t]||(m[t]={sum:0,count:0,palaces:{}}),m[t].sum+=e.chart.palaces[r].score||0,m[t].count+=1,m[t].palaces[r]=(m[t].palaces[r]||0)+1})});const u=Object.entries(m).map(([e,r])=>{const t=Math.round(r.sum/r.count),a=Object.entries(r.palaces).reduce((e,r)=>r[1]>e[1]?r:e)[0];return{direction:e,avgScore:t,count:r.count,bestPalace:a}}),h=u.length>0?u.reduce((e,r)=>r.avgScore>e.avgScore?r:e).direction:"N",b=u.length>0?u.reduce((e,r)=>r.avgScore>e.avgScore?r:e).bestPalace:"center",p={};r.forEach(e=>{const r=function(e){const r=e.getFullYear(),t=new Date(r,0,1),a=(e.getTime()-t.getTime())/864e5,s=Math.ceil((a+t.getDay()+1)/7);return`${r}-W${String(s).padStart(2,"0")}`}(new Date(e.dateTime));p[r]||(p[r]={sum:0,count:0}),p[r].sum+=e.chart.overallFortune.score,p[r].count+=1});const y=Object.entries(p).map(([e,r])=>({week:e,avgScore:Math.round(r.sum/r.count),count:r.count})).sort((e,r)=>e.week.localeCompare(r.week)).slice(-12),j={};r.forEach(e=>{const r=function(e){const r=e.getFullYear(),t=e.getMonth()+1;return`${r}-${String(t).padStart(2,"0")}`}(new Date(e.dateTime));var t,a;j[r]||(j[r]={scores:[],levels:{excellent:0,good:0,neutral:0,bad:0,terrible:0}}),j[r].scores.push(e.chart.overallFortune.score),t=j[r].levels,"excellent"===(a=e.chart.overallFortune.level)?t.excellent++:"good"===a?t.good++:"neutral"===a?t.neutral++:"bad"===a?t.bad++:"terrible"===a&&t.terrible++});const f=Object.entries(j).map(([e,r])=>({month:e,excellentDays:r.levels.excellent,goodDays:r.levels.good,neutralDays:r.levels.neutral,badDays:r.levels.bad,terribleDays:r.levels.terrible,avgScore:Math.round(r.scores.reduce((e,r)=>e+r,0)/r.scores.length)})).sort((e,r)=>e.month.localeCompare(r.month)).slice(-12),k={};r.forEach(e=>{const r=e.context;k[r]||(k[r]={sum:0,count:0,successCount:0}),k[r].sum+=e.chart.overallFortune.score,k[r].count+=1,e.chart.overallFortune.score>=60&&(k[r].successCount+=1)});return{totalChecks:a,averageScore:s,highestScore:l,lowestScore:n,mostFrequentContext:o,bestTimeOfDay:g,favoriteDirection:h,bestPalace:b,weeklyTrend:y,monthlyPatterns:f,hourlyDistribution:c,directionStats:u,contextStats:Object.entries(k).map(([e,r])=>({context:e,avgScore:Math.round(r.sum/r.count),count:r.count,successRate:Math.round(r.successCount/r.count*100)}))}},[e])}function Fe(e){if(e.length<10)return"stable";const r=[...e].sort((e,r)=>new Date(e.dateTime).getTime()-new Date(r.dateTime).getTime()),t=Math.floor(e.length/3),a=r.slice(-t),s=r.slice(0,t),l=a.reduce((e,r)=>e+r.chart.overallFortune.score,0)/a.length-s.reduce((e,r)=>e+r.chart.overallFortune.score,0)/s.length;return l>5?"improving":l<-5?"declining":"stable"}function Me(e,r){const t=[],a=r.hourlyDistribution.reduce((e,r)=>r.avgScore>e.avgScore?r:e);a.count>=3&&t.push({id:"time-best",type:"insight",title:"ÏµúÏ†Å ÏãúÍ∞ÑÎåÄ Î∞úÍ≤¨",description:`${String(a.hour).padStart(2,"0")}:00-${String((a.hour+1)%24).padStart(2,"0")}:00 ÏãúÍ∞ÑÎåÄÏóêÏÑú ÌèâÍ∑† ${a.avgScore}Ï†êÏúºÎ°ú Í∞ÄÏû• ÎÜíÏùÄ Ïö¥ÏÑ∏Î•º Î≥¥ÏûÖÎãàÎã§. Ïù¥ ÏãúÍ∞ÑÎåÄÏóê Ï§ëÏöîÌïú ÏùºÏ†ïÏùÑ Í≥ÑÌöçÌïòÏÑ∏Ïöî.`,confidence:Math.min(95,60+5*a.count),importance:"high",actionable:!0,relatedData:{timeRange:r.bestTimeOfDay,score:a.avgScore}});const s=r.hourlyDistribution.reduce((e,r)=>r.avgScore<e.avgScore?r:e);return s.count>=3&&s.avgScore<40&&t.push({id:"time-worst",type:"warning",title:"Ï£ºÏùò ÌïÑÏöî ÏãúÍ∞ÑÎåÄ",description:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00 ÏãúÍ∞ÑÎåÄÎäî ÌèâÍ∑† ${s.avgScore}Ï†êÏúºÎ°ú Ï†ÄÏ°∞Ìï©ÎãàÎã§. Ïù¥ ÏãúÍ∞ÑÎåÄÎäî Ï§ëÏöîÌïú Í≤∞Ï†ïÏùÑ ÌîºÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏäµÎãàÎã§.`,confidence:Math.min(90,55+5*s.count),importance:"medium",actionable:!0,relatedData:{timeRange:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00`,score:s.avgScore}}),t}function Te(e){const r=[],t=e.contextStats.reduce((e,r)=>r.successRate>e.successRate?r:e);if(t.count>=5&&t.successRate>=70){const e={business:"ÏÇ¨ÏóÖ/Ìà¨Ïûê",meeting:"ÌöåÏùò/ÌòëÏÉÅ",travel:"Ïó¨Ìñâ/Ïù¥Îèô",study:"ÌïôÏäµ/ÏãúÌóò",health:"Í±¥Í∞ï/ÏπòÎ£å",relationship:"Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ",decision:"Ï§ëÏöîÍ≤∞Ï†ï",lawsuit:"ÏÜåÏÜ°/Î≤ïÎ•†"};r.push({id:"context-best",type:"insight",title:"Í∞ïÏ†ê ÏòÅÏó≠ Î∞úÍ≤¨",description:`${e[t.context]} Î∂ÑÏïºÏóêÏÑú ${t.successRate}%Ïùò ÎÜíÏùÄ ÏÑ±Í≥µÎ•†ÏùÑ Î≥¥ÏûÖÎãàÎã§. Ïù¥ Î∂ÑÏïºÏóê Îçî ÏßëÏ§ëÌïòÏãúÎäî Í≤ÉÏùÑ Í∂åÏû•Ìï©ÎãàÎã§.`,confidence:Math.min(90,50+3*t.count),importance:"high",actionable:!0,relatedData:{context:t.context,score:t.avgScore}})}const a=e.contextStats.reduce((e,r)=>r.successRate<e.successRate?r:e);if(a.count>=5&&a.successRate<=40){const e={business:"ÏÇ¨ÏóÖ/Ìà¨Ïûê",meeting:"ÌöåÏùò/ÌòëÏÉÅ",travel:"Ïó¨Ìñâ/Ïù¥Îèô",study:"ÌïôÏäµ/ÏãúÌóò",health:"Í±¥Í∞ï/ÏπòÎ£å",relationship:"Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ",decision:"Ï§ëÏöîÍ≤∞Ï†ï",lawsuit:"ÏÜåÏÜ°/Î≤ïÎ•†"};r.push({id:"context-worst",type:"recommendation",title:"Í∞úÏÑ† ÌïÑÏöî ÏòÅÏó≠",description:`${e[a.context]} Î∂ÑÏïºÎäî ${a.successRate}%Ïùò ÎÇÆÏùÄ ÏÑ±Í≥µÎ•†ÏùÑ Î≥¥ÏûÖÎãàÎã§. Ïù¥ Î∂ÑÏïºÏùò ÌôúÎèôÏùÄ Îçî Ïã†Ï§ëÌïòÍ≤å Ï†ëÍ∑ºÌïòÍ±∞ÎÇò Îã§Î•∏ ÏãúÍ∞ÑÎåÄÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.`,confidence:Math.min(85,45+3*a.count),importance:"medium",actionable:!0,relatedData:{context:a.context,score:a.avgScore}})}return r}function Re(e){const r=[];if(0===e.directionStats.length)return r;const t=e.directionStats.reduce((e,r)=>r.avgScore>e.avgScore?r:e);if(t.count>=5){const e={N:"Î∂ÅÏ™Ω",NE:"Î∂ÅÎèôÏ™Ω",E:"ÎèôÏ™Ω",SE:"ÎÇ®ÎèôÏ™Ω",S:"ÎÇ®Ï™Ω",SW:"ÎÇ®ÏÑúÏ™Ω",W:"ÏÑúÏ™Ω",NW:"Î∂ÅÏÑúÏ™Ω",C:"Ï§ëÏïô"};r.push({id:"direction-best",type:"insight",title:"Í∏∏Ìïú Î∞©Ìñ• Î∞úÍ≤¨",description:`${e[t.direction]} Î∞©Ìñ•Ïù¥ ÌèâÍ∑† ${t.avgScore}Ï†êÏúºÎ°ú Í∞ÄÏû• Í∏∏Ìïú Î∞©Ìñ•ÏûÖÎãàÎã§. Ï§ëÏöîÌïú ÌôúÎèô Ïãú Ïù¥ Î∞©Ìñ•ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.`,confidence:Math.min(85,50+2*t.count),importance:"medium",actionable:!0,relatedData:{direction:t.direction,score:t.avgScore}})}return r}function Pe(e){const r=[];if(e.monthlyPatterns.length<3)return r;const t=e.monthlyPatterns.slice(-3),a=t.reduce((e,r)=>e+r.avgScore,0)/t.length,s=e.monthlyPatterns.reduce((e,r)=>e+r.avgScore,0)/e.monthlyPatterns.length,l=a-s;return l>10?r.push({id:"monthly-improving",type:"insight",title:"Ïö¥ÏÑ∏ ÏÉÅÏäπ Ï∂îÏÑ∏",description:`ÏµúÍ∑º 3Í∞úÏõî ÌèâÍ∑†(${Math.round(a)}Ï†ê)Ïù¥ Ï†ÑÏ≤¥ ÌèâÍ∑†(${Math.round(s)}Ï†ê)Î≥¥Îã§ ÎÜíÏäµÎãàÎã§. Í∏çÏ†ïÏ†ÅÏù∏ ÌùêÎ¶ÑÏù¥ ÏßÄÏÜçÎêòÍ≥† ÏûàÏäµÎãàÎã§.`,confidence:80,importance:"high",actionable:!1}):l<-10&&r.push({id:"monthly-declining",type:"warning",title:"Ïö¥ÏÑ∏ ÌïòÎùΩ Ï£ºÏùò",description:`ÏµúÍ∑º 3Í∞úÏõî ÌèâÍ∑†(${Math.round(a)}Ï†ê)Ïù¥ Ï†ÑÏ≤¥ ÌèâÍ∑†(${Math.round(s)}Ï†ê)Î≥¥Îã§ ÎÇÆÏäµÎãàÎã§. Îçî Ïã†Ï§ëÌïú Ï†ëÍ∑ºÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.`,confidence:75,importance:"medium",actionable:!1}),r}function Le(e,r){const t=function(e){const r=e.length,t=new Set(e.map(e=>new Date(e.dateTime).toDateString())).size;return r>=90&&t>=30?{quality:"excellent",message:"Ï∂©Î∂ÑÌïú Îç∞Ïù¥ÌÑ∞Î°ú ÎÜíÏùÄ Ïã†Î¢∞ÎèÑÏùò Î∂ÑÏÑùÏù¥ Í∞ÄÎä•Ìï©ÎãàÎã§."}:r>=60&&t>=20?{quality:"good",message:"ÏñëÌò∏Ìïú Îç∞Ïù¥ÌÑ∞Î°ú ÏùòÎØ∏ÏûàÎäî Ìå®ÌÑ¥ÏùÑ ÎèÑÏ∂úÌï† Ïàò ÏûàÏäµÎãàÎã§."}:r>=30&&t>=10?{quality:"fair",message:"Í∏∞Î≥∏Ï†ÅÏù∏ Ìå®ÌÑ¥ Î∂ÑÏÑùÏù¥ Í∞ÄÎä•ÌïòÎÇò Îçî ÎßéÏùÄ Îç∞Ïù¥ÌÑ∞Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§."}:{quality:"poor",message:"Ïã†Î¢∞ÎèÑ ÎÜíÏùÄ Î∂ÑÏÑùÏùÑ ÏúÑÌï¥ 30Ïùº Ïù¥ÏÉÅÏùò Îç∞Ïù¥ÌÑ∞Î•º ÏàòÏßëÌï¥Ï£ºÏÑ∏Ïöî."}}(e),a=Fe(e),s=[...Me(0,r),...Te(r),...Re(r),...Pe(r)];e.length<30&&s.unshift({id:"data-insufficient",type:"warning",title:"Îç∞Ïù¥ÌÑ∞ Î∂ÄÏ°±",description:t.message,confidence:100,importance:"high",actionable:!0});const l=function(e,r){const t=[];if(e.length<30)return t;const a=new Date,s=r.hourlyDistribution.reduce((e,r)=>r.avgScore>e.avgScore?r:e),l=r.contextStats.reduce((e,r)=>r.avgScore>e.avgScore?r:e);for(let n=1;n<=7;n++){const d=new Date(a);d.setDate(a.getDate()+n);const o=d.getDay(),i=e.filter(e=>new Date(e.dateTime).getDay()===o);let c=r.averageScore,x=50;const g=[];if(i.length>=3){const e=i.reduce((e,r)=>e+r.chart.overallFortune.score,0)/i.length;c=Math.round((c+e)/2),x+=15,g.push(`Í∞ôÏùÄ ÏöîÏùº ÌèâÍ∑† ${Math.round(e)}Ï†ê Í∏∞Î∞ò`)}s.count>=5&&(c=Math.round((c+s.avgScore)/2),x+=10,g.push("ÏµúÏ†Å ÏãúÍ∞ÑÎåÄ ÌôúÏö©"));const m=Fe(e);"improving"===m?(c=Math.min(100,c+5),x+=5,g.push("ÏÉÅÏäπ Ï∂îÏÑ∏ Î∞òÏòÅ")):"declining"===m&&(c=Math.max(0,c-5),x+=5,g.push("ÌïòÎùΩ Ï∂îÏÑ∏ Î∞òÏòÅ")),t.push({date:d,timeRange:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00`,predictedScore:c,confidence:Math.min(85,x),reasons:g,suggestedContext:l.context,suggestedDirection:r.favoriteDirection})}return t}(e,r),n=[],d=[];r.hourlyDistribution.forEach(e=>{const r=`${String(e.hour).padStart(2,"0")}:00-${String((e.hour+1)%24).padStart(2,"0")}:00`;e.avgScore>=70&&e.count>=3?n.push(r):e.avgScore<=40&&e.count>=3&&d.push(r)});const o=r.contextStats.filter(e=>e.successRate>=60).map(e=>e.context),i=r.directionStats.filter(e=>e.avgScore>=r.averageScore).map(e=>e.direction);return{patterns:s,predictions:l,summary:{overallTrend:a,trendConfidence:e.length>=30?75:50,dataQuality:t.quality,dataPoints:e.length,analysisDate:new Date},recommendations:{bestTimes:n,avoidTimes:d,preferredContexts:o,favoriteDirections:i}}}function Ee({isOpen:d,onClose:o}){const i=De(),{getAllBookmarks:c}=Ne(),x=c(),[g,m]=r.useState("overview"),u=r.useMemo(()=>Le(x,i),[x,i]),h=r.useMemo(()=>function(e){const r={high:3,medium:2,low:1};return[...e].sort((e,t)=>{const a=r[t.importance]-r[e.importance];return 0!==a?a:t.confidence-e.confidence})}(u.patterns),[u.patterns]);if(r.useMemo(()=>u.patterns.filter(e=>e.actionable),[u.patterns]),!d)return null;e.useEffect(()=>{const e=e=>{"Escape"===e.key&&o()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]);const b=document.documentElement.classList.contains("dark"),p=b?"#e5e7eb":"#374151",y=b?"#374151":"#e5e7eb",j={labels:i.monthlyPatterns.map(e=>e.month),datasets:[{label:"ÌèâÍ∑† Ï†êÏàò",data:i.monthlyPatterns.map(e=>e.avgScore),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",fill:!0,tension:.4}]},f={labels:i.hourlyDistribution.map(e=>`${String(e.hour).padStart(2,"0")}:00`),datasets:[{label:"ÌèâÍ∑† Ï†êÏàò",data:i.hourlyDistribution.map(e=>e.avgScore),backgroundColor:i.hourlyDistribution.map(e=>e.avgScore>=70?"rgba(34, 197, 94, 0.8)":e.avgScore>=50?"rgba(59, 130, 246, 0.8)":e.avgScore>=30?"rgba(251, 191, 36, 0.8)":"rgba(239, 68, 68, 0.8)")}]},k={labels:i.directionStats.map(e=>e.direction),datasets:[{label:"Î∞©Ìñ•Î≥Ñ ÌèâÍ∑† Ï†êÏàò",data:i.directionStats.map(e=>e.avgScore),backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgb(147, 51, 234)",borderWidth:2}]},v={business:"ÏÇ¨ÏóÖ/Ìà¨Ïûê",meeting:"ÌöåÏùò/ÌòëÏÉÅ",travel:"Ïó¨Ìñâ/Ïù¥Îèô",study:"ÌïôÏäµ/ÏãúÌóò",health:"Í±¥Í∞ï/ÏπòÎ£å",relationship:"Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ",decision:"Ï§ëÏöîÍ≤∞Ï†ï",lawsuit:"ÏÜåÏÜ°/Î≤ïÎ•†"},N={labels:i.contextStats.map(e=>v[e.context]),datasets:[{label:"ÌèâÍ∑† Ï†êÏàò",data:i.contextStats.map(e=>e.avgScore),backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(251, 191, 36, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(147, 51, 234, 0.8)","rgba(236, 72, 153, 0.8)","rgba(20, 184, 166, 0.8)","rgba(249, 115, 22, 0.8)"]}]},w={excellent:x.filter(e=>"excellent"===e.chart.overallFortune.level).length,good:x.filter(e=>"good"===e.chart.overallFortune.level).length,neutral:x.filter(e=>"neutral"===e.chart.overallFortune.level).length,bad:x.filter(e=>"bad"===e.chart.overallFortune.level).length,terrible:x.filter(e=>"terrible"===e.chart.overallFortune.level).length},S={labels:["ÎåÄÍ∏∏","Í∏∏","Ìèâ","Ìùâ","ÎåÄÌùâ"],datasets:[{data:[w.excellent,w.good,w.neutral,w.bad,w.terrible],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)"],borderWidth:0}]},$={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:p}}},scales:{x:{ticks:{color:p},grid:{color:y}},y:{ticks:{color:p},grid:{color:y},min:0,max:100}}},C={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:p}}},scales:{r:{ticks:{color:p},grid:{color:y},min:0,max:100}}},D={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:p}}}},F=e=>{switch(e.type){case"insight":return"üí°";case"recommendation":return"‚úÖ";case"prediction":return"üîÆ";case"warning":return"‚ö†Ô∏è"}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",onClick:o,children:t.jsxs("div",{className:"max-w-7xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-2xl my-8",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"üìä Í∑ÄÎ¨∏ÎëîÍ∞ë ÌÜµÍ≥Ñ ÎåÄÏãúÎ≥¥Îìú"}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Ï¥ù ",i.totalChecks,"Í∞úÏùò Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù | ÌèâÍ∑† Ï†êÏàò: ",i.averageScore,"Ï†ê |"," ","Îç∞Ïù¥ÌÑ∞ ÌíàÏßà: ","excellent"===u.summary.dataQuality?"Ïö∞Ïàò":"good"===u.summary.dataQuality?"ÏñëÌò∏":"fair"===u.summary.dataQuality?"Î≥¥ÌÜµ":"Î∂ÄÏ°±"]})]}),t.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl font-bold",children:"‚úï"})]}),t.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 px-6",children:[{id:"overview",label:"üìã Í∞úÏöî",icon:"üìã"},{id:"patterns",label:"üîç Ìå®ÌÑ¥ Î∂ÑÏÑù",icon:"üîç"},{id:"predictions",label:"üîÆ ÏòàÏ∏°",icon:"üîÆ"},{id:"charts",label:"üìä Ï∞®Ìä∏",icon:"üìä"}].map(e=>t.jsx("button",{onClick:()=>m(e.id),className:"px-6 py-3 font-medium transition-colors border-b-2 "+(g===e.id?"border-purple-600 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:e.label},e.id))}),t.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:["overview"===g&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700",children:[t.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 mb-1",children:"Ï¥ù Ï°∞ÌöåÏàò"}),t.jsx("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:i.totalChecks})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:[t.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"ÌèâÍ∑† Ï†êÏàò"}),t.jsx("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:i.averageScore})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-lg border border-green-200 dark:border-green-700",children:[t.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 mb-1",children:"ÏµúÍ≥† Ï†êÏàò"}),t.jsx("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:i.highestScore})]}),t.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[t.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 mb-1",children:"ÏµúÏ†Ä Ï†êÏàò"}),t.jsx("div",{className:"text-3xl font-bold text-yellow-700 dark:text-yellow-300",children:i.lowestScore})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsxs("h3",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[(()=>{switch(u.summary.overallTrend){case"improving":return"üìà";case"stable":return"‚û°Ô∏è";case"declining":return"üìâ"}})()," Ï†ÑÎ∞òÏ†Å Ìä∏Î†åÎìú"]}),t.jsx("div",{className:`text-2xl font-bold ${(()=>{switch(u.summary.overallTrend){case"improving":return"text-green-600 dark:text-green-400";case"stable":return"text-blue-600 dark:text-blue-400";case"declining":return"text-red-600 dark:text-red-400"}})()}`,children:(()=>{switch(u.summary.overallTrend){case"improving":return"ÏÉÅÏäπ Ï∂îÏÑ∏";case"stable":return"ÏïàÏ†ïÏ†Å";case"declining":return"ÌïòÎùΩ Ï∂îÏÑ∏"}})()}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:["Ïã†Î¢∞ÎèÑ: ",u.summary.trendConfidence,"%"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-100",children:"‚≠ê Ï£ºÏöî Ïù∏ÏÇ¨Ïù¥Ìä∏"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ÏµúÏ†Å ÏãúÍ∞ÑÎåÄ:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:i.bestTimeOfDay})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ÏÑ†Ìò∏ Î∞©Ìñ•:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:i.favoriteDirection})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Ï£ºÏöî Ïö©ÎèÑ:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:v[i.mostFrequentContext]})]})]})]})]}),u.recommendations.bestTimes.length>0&&t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border border-green-200 dark:border-green-700",children:[t.jsx("h3",{className:"text-lg font-bold mb-3 text-green-800 dark:text-green-200",children:"‚úÖ Ï∂îÏ≤ú ÏãúÍ∞ÑÎåÄ"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:u.recommendations.bestTimes.map((e,r)=>t.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 rounded-full text-sm font-medium",children:e},r))})]}),u.recommendations.avoidTimes.length>0&&t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-5 rounded-lg border border-red-200 dark:border-red-700",children:[t.jsx("h3",{className:"text-lg font-bold mb-3 text-red-800 dark:text-red-200",children:"‚ö†Ô∏è Ï£ºÏùò ÌïÑÏöî ÏãúÍ∞ÑÎåÄ"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:u.recommendations.avoidTimes.map((e,r)=>t.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 rounded-full text-sm font-medium",children:e},r))})]})]}),"patterns"===g&&t.jsx("div",{className:"space-y-4",children:0===h.length?t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-6xl mb-4",children:"üìä"}),t.jsx("p",{children:"Î∂ÑÏÑùÌï† Ìå®ÌÑ¥Ïù¥ Ï∂©Î∂ÑÌïòÏßÄ ÏïäÏäµÎãàÎã§."}),t.jsx("p",{className:"text-sm mt-2",children:"30Ïùº Ïù¥ÏÉÅÏùò Îç∞Ïù¥ÌÑ∞Î•º ÏàòÏßëÌïòÎ©¥ Îçî Ï†ïÌôïÌïú Î∂ÑÏÑùÏù¥ Í∞ÄÎä•Ìï©ÎãàÎã§."})]}):h.map(e=>{const r=(e=>{switch(e.type){case"insight":return"blue";case"recommendation":return"green";case"prediction":return"purple";case"warning":return"yellow"}})(e);return t.jsx("div",{className:`p-5 rounded-lg border ${{blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700",green:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700",purple:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-700",yellow:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"}[r]}`,children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:F(e)}),t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.title}),e.actionable&&t.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 rounded text-xs font-medium",children:"Ïã§Ìñâ Í∞ÄÎä•"})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:e.description}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Ïã†Î¢∞ÎèÑ:"}),t.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:[e.confidence,"%"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Ï§ëÏöîÎèÑ:"}),t.jsx("span",{className:"font-semibold "+("high"===e.importance?"text-red-600 dark:text-red-400":"medium"===e.importance?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400"),children:"high"===e.importance?"ÎÜíÏùå":"medium"===e.importance?"Ï§ëÍ∞Ñ":"ÎÇÆÏùå"})]})]})]})})},e.id)})}),"predictions"===g&&t.jsx("div",{className:"space-y-4",children:0===u.predictions.length?t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-6xl mb-4",children:"üîÆ"}),t.jsx("p",{children:"ÏòàÏ∏°ÏùÑ ÏÉùÏÑ±ÌïòÍ∏∞Ïóê Îç∞Ïù¥ÌÑ∞Í∞Ä Î∂ÄÏ°±Ìï©ÎãàÎã§."}),t.jsx("p",{className:"text-sm mt-2",children:"30Ïùº Ïù¥ÏÉÅÏùò Îç∞Ïù¥ÌÑ∞Î•º ÏàòÏßëÌïòÎ©¥ ÎØ∏Îûò Ïö¥ÏÑ∏Î•º ÏòàÏ∏°Ìï† Ïàò ÏûàÏäµÎãàÎã§."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-5 rounded-lg border border-purple-200 dark:border-purple-700 mb-6",children:[t.jsx("h3",{className:"text-lg font-bold mb-2 text-purple-800 dark:text-purple-200",children:"üîÆ Îã§Ïùå 7ÏùºÍ∞Ñ ÏµúÏ†Å ÏãúÍ∞ÑÎåÄ ÏòàÏ∏°"}),t.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Í≥ºÍ±∞ Ìå®ÌÑ¥ÏùÑ Í∏∞Î∞òÏúºÎ°ú AIÍ∞Ä ÏòàÏ∏°Ìïú Í≤∞Í≥ºÏûÖÎãàÎã§. Ïã§Ï†ú Ïö¥ÏÑ∏Îäî Îã§Î•º Ïàò ÏûàÏäµÎãàÎã§."})]}),u.predictions.map((e,r)=>t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.date.toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"})}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.timeRange})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-3xl font-bold "+(e.predictedScore>=70?"text-green-600 dark:text-green-400":e.predictedScore>=50?"text-blue-600 dark:text-blue-400":e.predictedScore>=30?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:e.predictedScore}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Ïã†Î¢∞ÎèÑ: ",e.confidence,"%"]})]})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Ï∂îÏ≤ú Ïö©ÎèÑ:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:v[e.suggestedContext]})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Ï∂îÏ≤ú Î∞©Ìñ•:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:e.suggestedDirection})]})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"ÏòàÏ∏° Í∑ºÍ±∞:"}),t.jsx("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:e.reasons.map((e,r)=>t.jsxs("li",{children:["‚Ä¢ ",e]},r))})]})]},r))]})}),"charts"===g&&t.jsx("div",{className:"space-y-6",children:0===i.totalChecks?t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-6xl mb-4",children:"üìä"}),t.jsx("p",{children:"ÌëúÏãúÌï† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§."}),t.jsx("p",{className:"text-sm mt-2",children:"Í∑ÄÎ¨∏ÎëîÍ∞ë Î∂ÑÏÑùÏùÑ Î∂ÅÎßàÌÅ¨ÌïòÎ©¥ ÌÜµÍ≥Ñ Ï∞®Ìä∏Î•º ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§."})]}):t.jsxs(t.Fragment,{children:[i.monthlyPatterns.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"üìà ÏõîÍ∞Ñ ÌèâÍ∑† Ï†êÏàò Ï∂îÏù¥"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(a,{data:j,options:$})})]}),i.hourlyDistribution.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"‚è∞ ÏãúÍ∞ÑÎåÄÎ≥Ñ ÌèâÍ∑† Ï†êÏàò"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(s,{data:f,options:$})})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.directionStats.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"üß≠ Î∞©Ìñ•Î≥Ñ ÌèâÍ∑† Ï†êÏàò"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(l,{data:k,options:C})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"üéØ Ïö¥ÏÑ∏ Î†àÎ≤® Î∂ÑÌè¨"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(n,{data:S,options:D})})]})]}),i.contextStats.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"üìÇ Ïö©ÎèÑÎ≥Ñ ÌèâÍ∑† Ï†êÏàò"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(s,{data:N,options:$})})]})]})})]}),t.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ÎßàÏßÄÎßâ Î∂ÑÏÑù: ",u.summary.analysisDate.toLocaleString("ko-KR")]}),t.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Îã´Í∏∞"})]})]})})}function Ie(){var e;const[a,s]=r.useState(null),[l,n]=r.useState(null),[d,o]=r.useState(new Date),[i,c]=r.useState(!0),[g,m]=r.useState(!1),[u,h]=r.useState(!0),[b,p]=r.useState(!1),[y,j]=r.useState(!1),[v,N]=r.useState(!1),[w,S]=r.useState(null),[$,C]=r.useState(null),[D,F]=r.useState(!1),[M,T]=r.useState("general"),[R,P]=r.useState(!1),[L,E]=r.useState(!1),[I,A]=r.useState(!0),[O,B]=r.useState(null),[G,H]=r.useState(null),[K,Z]=r.useState(!1),[U,X]=r.useState(!1),[V,J]=r.useState(!1),[re,ae]=r.useState([]),[se,le]=r.useState(!1);r.useEffect(()=>{F((null==w?void 0:w.id)!==(null==$?void 0:$.id))},[w,$]),r.useEffect(()=>{try{c(!0);const e=$?{year:parseInt($.birth_date.split("-")[0]),month:parseInt($.birth_date.split("-")[1]),day:parseInt($.birth_date.split("-")[2]),hour:$.birth_time?parseInt($.birth_time.split(":")[0]):void 0}:void 0,r=x({dateTime:d,birthInfo:e});if(a){let e=null,t="";a.solarTerm.name!==r.solarTerm.name?(e="solarTerm",t=`üå∏ Ï†àÍ∏∞Í∞Ä Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§: ${a.solarTerm.name} ‚Üí ${r.solarTerm.name}`):a.ju!==r.ju||a.yinYang!==r.yinYang?(e="solarTerm",t=`‚ö° Íµ≠(Â±Ä)Ïù¥ Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§: ${"yang"===a.yinYang?"ÏñëÎëî":"ÏùåÎëî"} ${a.ju}Íµ≠ ‚Üí ${"yang"===r.yinYang?"ÏñëÎëî":"ÏùåÎëî"} ${r.ju}Íµ≠`):a.dayGan!==r.dayGan?(e="day",t=`üìÖ ÏùºÍ∞Ñ(Êó•Âπ≤)Ïù¥ Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§: ${a.dayGan} ‚Üí ${r.dayGan}`):a.hourGanZhi.gan===r.hourGanZhi.gan&&a.hourGanZhi.zhi===r.hourGanZhi.zhi||(e="hour",t=`‚è∞ ÏãúÍ∞ÑÏù¥ Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§: ${a.hourGanZhi.gan}${a.hourGanZhi.zhi} ‚Üí ${r.hourGanZhi.gan}${r.hourGanZhi.zhi}`),e&&t&&(H({message:t,type:"solarTerm"===e?"warning":"info"}),ae(t=>[{timestamp:new Date,ju:r.ju,yinYang:"yang"===r.yinYang?"ÏñëÎëî":"ÏùåÎëî",solarTerm:r.solarTerm.name,type:e},...t.slice(0,9)]))}s(r)}catch(e){}finally{c(!1)}},[d,$]),r.useEffect(()=>{const e=()=>{const e=new Date,r=e.getHours();e.getMinutes(),e.getSeconds();const t=r%2==0?r+2:r+1,a=new Date(e);a.setHours(t,0,0,0);const s=new Date(e);s.setDate(s.getDate()+1),s.setHours(0,0,0,0);const l=a.getTime()-e.getTime(),n=Math.floor(l/36e5),d=Math.floor(l%36e5/6e4),o=Math.floor(l%6e4/1e3);B({hours:n,minutes:d,seconds:o,type:"hour"})};e();const r=setInterval(e,1e3);return()=>clearInterval(r)},[]),r.useEffect(()=>{if(!I)return;const e=setInterval(()=>{const e=new Date,r=e.getHours();0===e.getMinutes()&&r%2==1&&o(new Date)},6e4);return()=>clearInterval(e)},[I]);const ne=e=>{n(e)};return i||!a?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Íµ≠(Â±Ä) Í≥ÑÏÇ∞ Ï§ë..."})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 p-4 md:p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("header",{className:"text-center mb-8",children:[t.jsxs("div",{className:"flex justify-center items-center gap-4 mb-2",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 dark:from-purple-400 dark:via-pink-400 dark:to-blue-400",children:"‚ö° Í∑ÄÎ¨∏ÎëîÍ∞ë"}),t.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors flex items-center gap-2",children:[t.jsx("span",{children:"üìñ"}),t.jsx("span",{children:"Ï¥àÎ≥¥Ïûê Í∞ÄÏù¥Îìú"})]}),t.jsxs("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm font-medium hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition-colors flex items-center gap-2",children:[t.jsx("span",{children:"üîî"}),t.jsx("span",{children:"ÏïåÎ¶º ÏÑ§Ï†ï"})]}),t.jsxs("button",{onClick:()=>J(!0),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-full text-sm font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[t.jsx("span",{children:"üìä"}),t.jsx("span",{children:"ÌÜµÍ≥Ñ Î∂ÑÏÑù"})]})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg mb-2",children:"Â•áÈñÄÈÅÅÁî≤ - ÏãúÍ∞ÑÍ≥º Î∞©ÏúÑÏùò Í∏∏Ìùâ ÌåêÎã®"}),t.jsxs("div",{className:"flex justify-center items-center gap-3 mb-4 flex-wrap",children:[t.jsx("button",{onClick:()=>A(!I),className:"px-3 py-1 rounded-full text-sm font-medium transition-all "+(I?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:I?"üîÑ ÏûêÎèô Í∞±Ïã† ON":"‚è∏Ô∏è ÏûêÎèô Í∞±Ïã† OFF"}),O&&t.jsxs("div",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:["‚è±Ô∏è Îã§Ïùå Î≥ÄÍ≤ΩÍπåÏßÄ: ",O.hours>0&&`${O.hours}ÏãúÍ∞Ñ `,O.minutes,"Î∂Ñ ",O.seconds,"Ï¥à"]}),re.length>0&&t.jsxs("button",{onClick:()=>le(!se),className:"px-3 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors flex items-center gap-1",children:["üìä Î≥ÄÍ≤Ω ÌûàÏä§ÌÜ†Î¶¨ (",re.length,")"]})]}),t.jsxs("div",{className:"max-w-3xl mx-auto mb-6",children:[t.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"üéØ Î™©Ï†Å:"}),t.jsx("select",{value:M,onChange:e=>T(e.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border-2 border-purple-300 dark:border-purple-700 rounded-lg text-gray-900 dark:text-gray-100 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all cursor-pointer",children:xe().map(e=>t.jsxs("option",{value:e.value,children:[e.icon," ",e.label]},e.value))}),t.jsxs("button",{onClick:()=>P(!R),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[t.jsx("span",{children:"ü§ñ"}),t.jsx("span",{children:"AIÏóêÍ≤å ÏßàÎ¨∏ÌïòÍ∏∞"})]}),t.jsxs("button",{onClick:async()=>{if(a){E(!0);try{const e=$?`${$.name}(${$.birth_date})`:"ÏùºÎ∞ò",r=d.toLocaleString("ko-KR");await k("qimen-content","‚ö° Í∑ÄÎ¨∏ÎëîÍ∞ë Î∂ÑÏÑù Í≤∞Í≥º",`${"yang"===a.yinYang?"ÏñëÎëî":"ÏùåÎëî"} ${a.ju}Íµ≠ | ${a.solarTerm.name} | ${r}`,`Í∑ÄÎ¨∏ÎëîÍ∞ë_${e}`),alert("PDF Ï∂úÎ†•Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.")}catch(e){alert("PDF Ï∂úÎ†• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.")}finally{E(!1)}}},disabled:L,className:"px-4 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg font-medium hover:from-green-600 hover:to-teal-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("span",{children:"üìÑ"}),t.jsx("span",{children:L?"PDF ÏÉùÏÑ± Ï§ë...":"PDF Ï∂úÎ†•"})]}),t.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[t.jsx("span",{children:"üìä"}),t.jsx("span",{children:"ÏãúÍ∞ÑÎåÄ ÎπÑÍµê"})]}),t.jsx(we,{chart:a,dateTime:d,customerName:null==$?void 0:$.name,customerBirthDate:null==$?void 0:$.birth_date,context:M}),t.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg font-medium hover:from-pink-600 hover:to-rose-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[t.jsx("span",{children:"üì§"}),t.jsx("span",{children:"Í≥µÏú†ÌïòÍ∏∞"})]})]}),"general"!==M&&t.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 mb-4",children:["üí° ",t.jsx("strong",{children:null==(e=xe().find(e=>e.value===M))?void 0:e.description}),"Ïóê ÌäπÌôîÎêú Ìï¥ÏÑùÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§"]})]}),t.jsxs("div",{className:"max-w-2xl mx-auto mb-6",children:[t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[t.jsx(f,{selectedCustomer:w,onSelect:S,showAddButton:!0}),w&&t.jsx("button",{onClick:()=>{C(w),F(!1)},disabled:!D,className:"px-6 py-2 rounded-lg font-medium transition-all "+(D?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl animate-pulse":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-500 cursor-not-allowed"),children:D?"‚ú® Ï†ÅÏö©ÌïòÍ∏∞":"‚úì Ï†ÅÏö©Îê®"})]}),$&&t.jsxs("div",{className:"mt-2 text-sm text-center text-gray-600 dark:text-gray-400",children:["üí° ÌòÑÏû¨ ",t.jsx("strong",{children:$.name}),"Îãò(",$.birth_date,") Í∏∞Ï§ÄÏúºÎ°ú ÎßûÏ∂§ Ìï¥ÏÑù Ï§ë"]}),w&&D&&t.jsxs("div",{className:"mt-2 text-sm text-center text-orange-600 dark:text-orange-400 font-medium",children:["‚ö†Ô∏è ",t.jsx("strong",{children:w.name}),'ÎãòÏúºÎ°ú Î≥ÄÍ≤ΩÌïòÎ†§Î©¥ "Ï†ÅÏö©ÌïòÍ∏∞" Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî']})]}),t.jsxs("div",{className:"flex justify-center gap-4",children:[t.jsx("button",{onClick:()=>h(!u),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:u?"ÏÉÅÏÑ∏ Î™®ÎìúÎ°ú Î≥¥Í∏∞ ‚ñº":"Í∞ÑÎã® ÏöîÏïΩ Î≥¥Í∏∞ ‚ñ≤"}),t.jsx("button",{onClick:()=>p(!b),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(b?"bg-gradient-to-r from-green-500 to-blue-500 text-white shadow-lg":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600"),children:b?"üé® ÌûàÌä∏Îßµ Î™®Îìú":"üìä Ï∞®Ìä∏ Î™®Îìú"}),t.jsx("button",{onClick:()=>j(!y),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(y?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600"),children:y?"üé≤ 3D Î™®Îìú":"üéØ 2D Î™®Îìú"})]}),t.jsxs("div",{className:"mt-4 flex justify-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Íµ≠(Â±Ä)"}),t.jsxs("span",{className:"ml-2 font-bold text-purple-600 dark:text-purple-400",children:["yang"===a.yinYang?"ÏñëÎëî":"ÏùåÎëî"," ",a.ju,"Íµ≠"]})]}),t.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ï†àÍ∏∞"}),t.jsx("span",{className:"ml-2 font-bold text-blue-600 dark:text-blue-400",children:a.solarTerm.name})]}),t.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ÏãúÍ∞Ñ Í∞ÑÏßÄ"}),t.jsxs("span",{className:"ml-2 font-bold text-pink-600 dark:text-pink-400",children:[a.hourGanZhi.gan,a.hourGanZhi.zhi]})]})]})]}),t.jsxs("div",{id:"qimen-content",className:"space-y-6",style:{WebkitPrintColorAdjust:"exact",printColorAdjust:"exact"},children:[t.jsx(_,{selectedDate:d,onChange:e=>{o(e),n(null)}}),u&&t.jsx(te,{chart:a,customerName:null==$?void 0:$.name,customerBirthDate:null==$?void 0:$.birth_date}),t.jsx("div",{className:"my-8",children:y?t.jsx(z,{chart:a,selectedPalace:l,onPalaceSelect:ne,autoRotate:!0}):b?t.jsx(de,{chart:a,selectedPalace:l,onPalaceSelect:ne}):t.jsx(q,{chart:a,selectedPalace:l,onPalaceSelect:ne})}),t.jsxs("div",{className:"mb-8 p-6 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm shadow-lg",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"üìä Ï†ÑÏ≤¥ Ïö¥ÏÑ∏"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsx("div",{children:$?(()=>{const e=Q($.birth_date),r=ee(a,e),s=r.personalScore,l=r.bonus;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"text-6xl font-bold "+(s>=80?"text-green-500":s>=60?"text-blue-500":s>=40?"text-yellow-500":s>=20?"text-orange-500":"text-red-500"),children:s}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ÎãπÏã†Ïùò Ïö¥ÏÑ∏",0!==l&&t.jsxs("span",{className:"ml-2 font-bold "+(l>0?"text-green-600":"text-red-600"),children:["(",l>0?"+":"",l,")"]})]}),t.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:s>=80?"ÎåÄÍ∏∏ üåü":s>=60?"Í∏∏ ‚ú®":s>=40?"Ìèâ ‚öñÔ∏è":s>=20?"Ìùâ ‚ö†Ô∏è":"ÎåÄÌùâ ‚ùå"})]})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed mb-2",children:a.overallFortune.summary}),0!==l&&t.jsxs("div",{className:"text-sm p-2 rounded "+(l>0?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300"),children:["üí° ",r.explanation]})]})})():t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"text-6xl font-bold "+(a.overallFortune.score>=80?"text-green-500":a.overallFortune.score>=60?"text-blue-500":a.overallFortune.score>=40?"text-yellow-500":a.overallFortune.score>=20?"text-orange-500":"text-red-500"),children:a.overallFortune.score}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ï¢ÖÌï© Ï†êÏàò"}),t.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:"excellent"===a.overallFortune.level?"ÎåÄÍ∏∏ üåü":"good"===a.overallFortune.level?"Í∏∏ ‚ú®":"neutral"===a.overallFortune.level?"Ìèâ ‚öñÔ∏è":"bad"===a.overallFortune.level?"Ìùâ ‚ö†Ô∏è":"ÎåÄÌùâ ‚ùå"})]})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:a.overallFortune.summary})]})}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-green-600 dark:text-green-400 mb-2",children:"‚úÖ Í∏∏Ìïú Î∞©ÏúÑ"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:a.overallFortune.bestPalaces.map(e=>t.jsxs("button",{onClick:()=>ne(e),className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm font-medium hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",children:[e,"Í∂Å (",a.palaces[e].direction,")"]},e))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-red-600 dark:text-red-400 mb-2",children:"‚ö†Ô∏è Î∂àÎ¶¨Ìïú Î∞©ÏúÑ"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:a.overallFortune.worstPalaces.map(e=>t.jsxs("button",{onClick:()=>ne(e),className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[e,"Í∂Å (",a.palaces[e].direction,")"]},e))})]})]})]})]})]}),l&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-start justify-center p-4 overflow-y-auto",children:t.jsx("div",{className:"max-w-4xl w-full my-8",children:t.jsx(Y,{palace:a.palaces[l],onClose:()=>n(null)})})}),g&&t.jsx(W,{onClose:()=>m(!1)}),R&&t.jsx(he,{chart:a,context:M,customer:$,onClose:()=>P(!1)}),se&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"üìä Ï∞®Ìä∏ Î≥ÄÍ≤Ω ÌûàÏä§ÌÜ†Î¶¨"}),t.jsx("button",{onClick:()=>le(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:0===re.length?t.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"ÏïÑÏßÅ Î≥ÄÍ≤Ω ÎÇ¥Ïó≠Ïù¥ ÏóÜÏäµÎãàÎã§."}):t.jsx("div",{className:"space-y-3",children:re.map((e,r)=>t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("solarTerm"===e.type?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"day"===e.type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"),children:"solarTerm"===e.type?"üå∏ Ï†àÍ∏∞/Íµ≠ Î≥ÄÍ≤Ω":"day"===e.type?"üìÖ ÏùºÍ∞Ñ Î≥ÄÍ≤Ω":"‚è∞ ÏãúÍ∞Ñ Î≥ÄÍ≤Ω"}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.timestamp.toLocaleString("ko-KR")})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsxs("strong",{children:[e.yinYang," ",e.ju,"Íµ≠"]})," ¬∑ Ï†àÍ∏∞: ",e.solarTerm]})]})})},r))})})]})}),v&&t.jsx(oe,{baseDate:d,customer:$,onClose:()=>N(!1)}),t.jsx(ve,{isOpen:K,onClose:()=>Z(!1)}),t.jsx(Ce,{isOpen:U,onClose:()=>X(!1),chart:a,elementId:"qimen-content",customerName:null==$?void 0:$.name}),t.jsx(Ee,{isOpen:V,onClose:()=>J(!1)}),G&&t.jsx(be,{message:G.message,type:G.type,onClose:()=>H(null)})]})})}S.register($,C,D,F,M,T,R,P,L,E,I);export{Ie as default};
