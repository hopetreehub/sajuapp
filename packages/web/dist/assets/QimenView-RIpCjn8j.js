import{b as e,r,j as t,o as a,m as s,n as l,D as n}from"./react-vendor-BqNk2DgB.js";import{P as d,g as o,a as i,b as c,c as x,G as g,S as m,d as u}from"./qimenCalculator-Dgq1wFxg.js";import{j as h,O as b,u as p,k as y,l as j}from"./three-vendor-B4pyqsGd.js";import{C as f}from"./CustomerSelector-EAfVa5RC.js";import{e as k}from"./pdfExport-BuoXx8zM.js";import{ap as v,aq as N}from"./vendor-DgwlXjR1.js";import{h as w}from"./document-vendor-kJlPqfgG.js";import{C as S,b as $,c as C,P as D,g as F,d as M,A as T,f as R,e as P,p as L,a as E,i as I}from"./chart-vendor-DwU5C6A5.js";import"./customerApi-JV4xNEmH.js";const A=e.memo(function({palace:e,isSelected:a,onClick:s}){const l=r.useMemo(()=>{switch(e.fortune){case"excellent":return"from-green-400 to-emerald-500 dark:from-green-500 dark:to-emerald-600";case"good":return"from-blue-400 to-cyan-500 dark:from-blue-500 dark:to-cyan-600";case"neutral":default:return"from-gray-400 to-slate-500 dark:from-gray-500 dark:to-slate-600";case"bad":return"from-orange-400 to-amber-500 dark:from-orange-500 dark:to-amber-600";case"terrible":return"from-red-400 to-rose-500 dark:from-red-500 dark:to-rose-600"}},[e.fortune]),n=r.useMemo(()=>{switch(e.fortune){case"excellent":return"ğŸŒŸ";case"good":return"âœ¨";case"neutral":default:return"âš–ï¸";case"bad":return"âš ï¸";case"terrible":return"âŒ"}},[e.fortune]);return t.jsxs("button",{onClick:s,className:`\n        relative p-3 md:p-4 rounded-xl transition-all duration-300\n        ${a?"ring-4 ring-purple-500 ring-offset-2 dark:ring-offset-gray-900 scale-105 shadow-2xl":"ring-1 ring-gray-300 dark:ring-gray-700 hover:ring-2 hover:ring-purple-400 hover:scale-102 shadow-lg hover:shadow-xl"}\n        bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm\n        cursor-pointer\n      `,children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{className:`\n          text-sm font-bold px-2 py-1 rounded-full\n          bg-gradient-to-r ${l}\n          text-white\n        `,children:[e.palace,"ê¶"]}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:e.direction})]}),t.jsxs("div",{className:"mb-2",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"íŒ”ë¬¸"}),t.jsx("div",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.gate})]}),t.jsxs("div",{className:"mb-2",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"êµ¬ì„±"}),t.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:e.star})]}),e.spirit&&t.jsxs("div",{className:"mb-2",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"íŒ”ì‹ "}),t.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:e.spirit})]}),t.jsx("div",{className:"absolute top-2 right-2 text-2xl",children:n}),t.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.tianGan,e.diZhi," Â· ",e.wuXing]})}),a&&t.jsx("div",{className:"absolute inset-0 rounded-xl bg-purple-500/10 dark:bg-purple-400/10 pointer-events-none"})]})});const q=e.memo(function({chart:e,selectedPalace:a,onPalaceSelect:s}){const l=r.useCallback(e=>{s(e)},[s]),n=r.useMemo(()=>d.flatMap(r=>r.map(r=>{const s=e.palaces[r],n=a===r;return t.jsx(A,{palace:s,isSelected:n,onClick:()=>l(r)},r)})),[e.palaces,a,l]);return t.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[t.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-4 aspect-square",children:n}),t.jsx("div",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400",children:t.jsxs("div",{className:"flex justify-center items-center gap-8",children:[t.jsx("div",{children:"ğŸ§­ ë¶ìª½(ìƒ): 1ê¶"}),t.jsx("div",{children:"ğŸ§­ ë‚¨ìª½(í•˜): 9ê¶"}),t.jsx("div",{children:"ğŸ§­ ë™ìª½(ì¢Œ): 3ê¶"}),t.jsx("div",{children:"ğŸ§­ ì„œìª½(ìš°): 7ê¶"})]})})]})});function O({position:e,palace:a,palaceData:s,isSelected:l,onClick:n}){const d=r.useRef(null),o=r.useMemo(()=>{switch(s.fortune){case"excellent":return"#10b981";case"good":return"#3b82f6";case"neutral":default:return"#6b7280";case"bad":return"#f59e0b";case"terrible":return"#ef4444"}},[s.fortune]);return p(e=>{if(d.current&&l){const r=1+.1*Math.sin(3*e.clock.elapsedTime);d.current.scale.set(r,r,r)}else d.current&&d.current.scale.set(1,1,1)}),t.jsxs("group",{position:e,children:[t.jsx(y,{ref:d,args:[1.8,.3,1.8],onClick:n,children:t.jsx("meshStandardMaterial",{color:o,emissive:o,emissiveIntensity:l?.5:.1,roughness:.5,metalness:.3})}),t.jsxs(j,{position:[0,.3,0],fontSize:.4,color:"white",anchorX:"center",anchorY:"middle",children:[a,"ê¶"]}),t.jsx(j,{position:[0,-.5,0],fontSize:.25,color:"#ffffff",anchorX:"center",anchorY:"middle",children:s.direction}),t.jsx(j,{position:[0,0,1],fontSize:.2,color:"#ffff00",anchorX:"center",anchorY:"middle",children:s.star}),t.jsx(j,{position:[0,0,-1],fontSize:.2,color:"#00ffff",anchorX:"center",anchorY:"middle",children:s.gate}),t.jsx(j,{position:[-1,0,0],fontSize:.18,color:"#ff00ff",anchorX:"center",anchorY:"middle",rotation:[0,Math.PI/2,0],children:s.god}),l&&t.jsx(y,{args:[2,.4,2],children:t.jsx("meshBasicMaterial",{color:"#ffffff",wireframe:!0})})]})}function B({chart:e,selectedPalace:a,onPalaceSelect:s,autoRotate:l}){const n=r.useRef(null);p(()=>{n.current&&l&&(n.current.rotation.y+=.003)});const o=r.useMemo(()=>{const e={};return d.forEach((r,t)=>{r.forEach((r,a)=>{const s=2.5*(a-1),l=2.5*(t-1);e[r]=[s,0,l]})}),e},[]);return t.jsxs("group",{ref:n,children:[t.jsx("ambientLight",{intensity:.5}),t.jsx("pointLight",{position:[10,10,10],intensity:1}),t.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),Object.entries(e.palaces).map(([e,r])=>{const l=e,n=o[l];return t.jsx(O,{position:n,palace:l,palaceData:r,isSelected:a===l,onClick:()=>null==s?void 0:s(l)},e)}),t.jsx("gridHelper",{args:[15,15,"#444444","#222222"],position:[0,-.5,0]})]})}const z=e.memo(function({chart:e,selectedPalace:r,onPalaceSelect:a,autoRotate:s=!0}){return t.jsxs("div",{className:"w-full h-full min-h-[600px] bg-gradient-to-b from-gray-900 to-black rounded-xl overflow-hidden shadow-2xl",children:[t.jsxs(h,{camera:{position:[8,8,8],fov:50},gl:{antialias:!0},children:[t.jsx(B,{chart:e,selectedPalace:r,onPalaceSelect:a,autoRotate:s}),t.jsx(b,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:5,maxDistance:20,maxPolarAngle:Math.PI/2})]}),t.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/70 backdrop-blur-sm rounded-lg p-4 text-white text-sm",children:[t.jsx("h3",{className:"font-bold mb-2",children:"ìƒ‰ìƒ ë²”ë¡€"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),t.jsx("span",{children:"ëŒ€ê¸¸ (Excellent)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),t.jsx("span",{children:"ê¸¸ (Good)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded"}),t.jsx("span",{children:"ì¤‘ë¦½ (Neutral)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),t.jsx("span",{children:"í‰ (Bad)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),t.jsx("span",{children:"ëŒ€í‰ (Terrible)"})]})]}),t.jsx("h3",{className:"font-bold mt-4 mb-2",children:"í…ìŠ¤íŠ¸ ìƒ‰ìƒ"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-yellow-400",children:"â—"}),t.jsx("span",{children:"9ì„± (ì•ë©´)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-cyan-400",children:"â—"}),t.jsx("span",{children:"8ë¬¸ (ë’·ë©´)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-pink-400",children:"â—"}),t.jsx("span",{children:"8ì‹  (ì¸¡ë©´)"})]})]})]}),t.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 backdrop-blur-sm rounded-lg p-4 text-white text-sm",children:[t.jsx("h3",{className:"font-bold mb-2",children:"ì¡°ì‘ ë°©ë²•"}),t.jsxs("ul",{className:"space-y-1",children:[t.jsx("li",{children:"ğŸ–±ï¸ ë“œë˜ê·¸: íšŒì „"}),t.jsx("li",{children:"ğŸ” íœ : ì¤Œ ì¸/ì•„ì›ƒ"}),t.jsx("li",{children:"ğŸ‘† í´ë¦­: ê¶ ì„ íƒ"}),t.jsx("li",{children:"ğŸ”„ ìë™ íšŒì „ ì¤‘..."})]})]})]})});function Y({palace:e,onClose:r}){const a=o(e.gate),s=i(e.star),l=e.spirit?c(e.spirit):null,n=(()=>{switch(e.fortune){case"excellent":return{text:"ëŒ€ê¸¸ ğŸŒŸ",color:"text-green-600 dark:text-green-400"};case"good":return{text:"ê¸¸ âœ¨",color:"text-blue-600 dark:text-blue-400"};case"neutral":default:return{text:"í‰ âš–ï¸",color:"text-gray-600 dark:text-gray-400"};case"bad":return{text:"í‰ âš ï¸",color:"text-orange-600 dark:text-orange-400"};case"terrible":return{text:"ëŒ€í‰ âŒ",color:"text-red-600 dark:text-red-400"}}})();return t.jsxs("div",{className:`p-6 rounded-xl bg-gradient-to-br ${(()=>{switch(e.fortune){case"excellent":return"from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20";case"good":return"from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20";case"neutral":default:return"from-gray-50 to-slate-50 dark:from-gray-900/20 dark:to-slate-900/20";case"bad":return"from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20";case"terrible":return"from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20"}})()} backdrop-blur-sm shadow-xl border border-gray-200 dark:border-gray-700`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:[e.palace,"ê¶ - ",e.direction]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-2xl font-bold ${n.color}`,children:n.text}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.tianGan,e.diZhi," Â· ",e.wuXing]})]})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"ë‹«ê¸°",children:t.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:"ğŸ“– ì¢…í•© í•´ì„"}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:e.interpretation})]}),t.jsxs("div",{className:"mb-4 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["ğŸšª íŒ”ë¬¸ - ",a.name]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:a.meaning}),t.jsx("div",{className:"flex gap-2 flex-wrap mb-2",children:a.effects.positive.map((e,r)=>t.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-xs",children:["âœ… ",e]},r))}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:a.effects.negative.map((e,r)=>t.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-xs",children:["âš ï¸ ",e]},r))})]}),t.jsxs("div",{className:"mb-4 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["â­ êµ¬ì„± - ",s.name]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[s.meaning," (",s.planet,", ",s.element,")"]}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:s.influences.map((e,r)=>t.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs",children:e},r))})]}),l&&t.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:["ğŸ›¡ï¸ íŒ”ì‹  - ",l.name]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:l.meaning}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:l.characteristics.map((e,r)=>t.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs",children:e},r))})]}),e.recommendations.length>0&&t.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[t.jsx("h3",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"âœ… ì¶”ì²œ í–‰ë™"}),t.jsx("ul",{className:"space-y-1",children:e.recommendations.map((e,r)=>t.jsxs("li",{className:"text-sm text-green-700 dark:text-green-400 flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:e})]},r))})]}),e.warnings.length>0&&t.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[t.jsx("h3",{className:"text-lg font-bold text-red-800 dark:text-red-300 mb-2",children:"âš ï¸ ì£¼ì˜ì‚¬í•­"}),t.jsx("ul",{className:"space-y-1",children:e.warnings.map((e,r)=>t.jsxs("li",{className:"text-sm text-red-700 dark:text-red-400 flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:e})]},r))})]})]})}function _({selectedDate:e,onChange:a}){const[s,l]=r.useState(!1);return t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[t.jsx("button",{onClick:()=>l(!s),className:"px-6 py-3 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm shadow-lg hover:shadow-xl transition-all hover:scale-105 border border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ì„ íƒëœ ì‹œê°„"}),t.jsxs("div",{className:"font-bold text-gray-800 dark:text-gray-100",children:[(n=e,n.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"}))," ",(e=>e.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}))(e)]})]})]})}),t.jsx("button",{onClick:()=>{a(new Date),l(!1)},className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all hover:scale-105 font-medium",children:"í˜„ì¬ ì‹œê°„"})]}),s&&t.jsxs("div",{className:"p-6 bg-white/90 dark:bg-gray-800/90 rounded-xl backdrop-blur-sm shadow-xl border border-gray-200 dark:border-gray-700 max-w-md mx-auto",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"ì‹œê°„ ì„ íƒ"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ë‚ ì§œ"}),t.jsx("input",{type:"date",value:`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,onChange:r=>{const t=new Date(r.target.value);if(!isNaN(t.getTime())){const r=new Date(e);r.setFullYear(t.getFullYear()),r.setMonth(t.getMonth()),r.setDate(t.getDate()),a(r)}},className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ì‹œê°„"}),t.jsx("input",{type:"time",value:`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`,onChange:r=>{const[t,s]=r.target.value.split(":").map(Number),l=new Date(e);l.setHours(t,s),a(l)},className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),t.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:t.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:["ğŸ’¡ ",t.jsx("strong",{children:"ê°„ì§€ ì‹œê°„ ì•ˆë‚´"}),t.jsxs("ul",{className:"mt-2 space-y-1 ml-4",children:[t.jsx("li",{children:"â€¢ ìì‹œ(å­æ™‚): 23:00~01:00"}),t.jsx("li",{children:"â€¢ ì¶•ì‹œ(ä¸‘æ™‚): 01:00~03:00"}),t.jsx("li",{children:"â€¢ ì¸ì‹œ(å¯…æ™‚): 03:00~05:00"}),t.jsx("li",{children:"â€¢ ë¬˜ì‹œ(å¯æ™‚): 05:00~07:00"}),t.jsx("li",{children:"â€¢ ì§„ì‹œ(è¾°æ™‚): 07:00~09:00"}),t.jsx("li",{children:"â€¢ ì‚¬ì‹œ(å·³æ™‚): 09:00~11:00"}),t.jsx("li",{children:"â€¢ ì˜¤ì‹œ(åˆæ™‚): 11:00~13:00"}),t.jsx("li",{children:"â€¢ ë¯¸ì‹œ(æœªæ™‚): 13:00~15:00"}),t.jsx("li",{children:"â€¢ ì‹ ì‹œ(ç”³æ™‚): 15:00~17:00"}),t.jsx("li",{children:"â€¢ ìœ ì‹œ(é…‰æ™‚): 17:00~19:00"}),t.jsx("li",{children:"â€¢ ìˆ ì‹œ(æˆŒæ™‚): 19:00~21:00"}),t.jsx("li",{children:"â€¢ í•´ì‹œ(äº¥æ™‚): 21:00~23:00"})]})]})})]}),t.jsx("button",{onClick:()=>l(!1),className:"mt-4 w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 rounded-lg font-medium transition-colors",children:"ë‹«ê¸°"})]})]});var n}function W({onClose:e}){const[a,s]=r.useState("what");return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ğŸ“– ê·€ë¬¸ë‘”ê°‘ ì´ˆë³´ì ê°€ì´ë“œ"}),t.jsx("p",{className:"text-purple-100",children:"ì²˜ìŒì´ì‹œë¼ë©´ ì—¬ê¸°ì„œ ì‹œì‘í•˜ì„¸ìš”!"})]}),t.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"ë‹«ê¸°",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[t.jsx("button",{onClick:()=>s("what"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("what"===a?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"ê·€ë¬¸ë‘”ê°‘ì´ë€?"}),t.jsx("button",{onClick:()=>s("how"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("how"===a?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"ì‚¬ìš© ë°©ë²•"}),t.jsx("button",{onClick:()=>s("terms"),className:"flex-1 px-6 py-3 font-medium transition-colors "+("terms"===a?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:"ìš©ì–´ ì„¤ëª…"})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-200px)]",children:["what"===a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"ğŸ”® ê·€ë¬¸ë‘”ê°‘ì´ë€?"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:["ê·€ë¬¸ë‘”ê°‘(å¥‡é–€éç”²)ì€ ",t.jsx("strong",{children:"ì‹œê°„ê³¼ ë°©ìœ„ì˜ ê¸¸í‰"}),"ì„ ì•Œë ¤ì£¼ëŠ” ì¤‘êµ­ ê³ ëŒ€ ì ìˆ ì…ë‹ˆë‹¤. ë§ˆì¹˜ ë‚ ì”¨ ì˜ˆë³´ì²˜ëŸ¼, ",t.jsx("strong",{children:"íŠ¹ì • ì‹œê°„ê³¼ ë°©í–¥ì´ ë‚˜ì—ê²Œ ìœ ë¦¬í•œì§€ ë¶ˆë¦¬í•œì§€"}),"ë¥¼ ë¯¸ë¦¬ ì•Œ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤."]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"ğŸ’¡ ì–´ë””ì— í™œìš©í•˜ë‚˜ìš”?"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx("div",{className:"text-2xl mb-2",children:"ğŸš—"}),t.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-1",children:"ì—¬í–‰/ì¶œì¥"}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"ì–´ëŠ ë°©í–¥ìœ¼ë¡œ ê°ˆ ë•Œ ê¸¸í•œì§€ í™•ì¸"})]}),t.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("div",{className:"text-2xl mb-2",children:"ğŸ’¼"}),t.jsx("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-1",children:"ë¹„ì¦ˆë‹ˆìŠ¤"}),t.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:"ì¤‘ìš”í•œ ë¯¸íŒ… ë°©í–¥ê³¼ ì‹œê°„ ì„ íƒ"})]}),t.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[t.jsx("div",{className:"text-2xl mb-2",children:"ğŸ "}),t.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-1",children:"ë¶€ë™ì‚°"}),t.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"ì´ì‚¬ ë°©í–¥ê³¼ ì§‘ êµ¬ì¡° ë°°ì¹˜ ê²°ì •"})]}),t.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[t.jsx("div",{className:"text-2xl mb-2",children:"ğŸ’°"}),t.jsx("h4",{className:"font-bold text-pink-900 dark:text-pink-300 mb-1",children:"íˆ¬ì"}),t.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-400",children:"ì¬ë¬¼ìš´ì´ ì¢‹ì€ ì‹œê°„ëŒ€ íŒŒì•…"})]})]})]}),t.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[t.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"âš ï¸ ì£¼ì˜ì‚¬í•­"}),t.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-1",children:[t.jsx("li",{children:"â€¢ ê·€ë¬¸ë‘”ê°‘ì€ ì°¸ê³  ë„êµ¬ì…ë‹ˆë‹¤. ì ˆëŒ€ì ì¸ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤."}),t.jsx("li",{children:"â€¢ ì¤‘ìš”í•œ ê²°ì •ì€ ì‹ ì¤‘í•˜ê²Œ ì—¬ëŸ¬ ìš”ì†Œë¥¼ ê³ ë ¤í•˜ì„¸ìš”."}),t.jsx("li",{children:"â€¢ ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤!"})]})]})]}),"how"===a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"ğŸ“± í™”ë©´ êµ¬ì„± ë° ì‚¬ìš©ë²•"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"3x3 êµ¬ê¶ ì°¨íŠ¸"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["9ê°œ ì¹¸ì´ ê°ê° ",t.jsx("strong",{children:"ë°©ìœ„(ë™ì„œë‚¨ë¶ ë“±)"}),"ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê° ì¹¸ì„ í´ë¦­í•˜ë©´ ê·¸ ë°©í–¥ì˜ ìƒì„¸ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["ğŸ’¡ ",t.jsx("strong",{children:"ì‹¤ì „ íŒ:"})," ì ìˆ˜ê°€ 70ì  ì´ìƒì¸ ë°©ìœ„ë¥¼ ì°¾ì•„ í´ë¦­í•´ë³´ì„¸ìš”. íŒ”ë¬¸, êµ¬ì„±, íŒ”ì‹ ì˜ ì¡°í•©ì´ ì™œ ì¢‹ì€ì§€ ìƒì„¸í•˜ê²Œ ì„¤ëª…ë©ë‹ˆë‹¤."]})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"ê¸¸í‰ í‘œì‹œ ë° ì ìˆ˜"}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:"ê° ë°©ìœ„ë§ˆë‹¤ ì´ëª¨ì§€ì™€ ì ìˆ˜ë¡œ ê¸¸í‰ì„ í‘œì‹œí•©ë‹ˆë‹¤:"}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[t.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm",children:"ğŸŒŸ ëŒ€ê¸¸ (80-100ì )"}),t.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:"âœ¨ ê¸¸ (60-79ì )"}),t.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:"âš–ï¸ í‰ (40-59ì )"}),t.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-sm",children:"âš ï¸ í‰ (20-39ì )"}),t.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm",children:"âŒ ëŒ€í‰ (0-19ì )"})]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["ğŸ’¡ ",t.jsx("strong",{children:"ì‹¤ì „ íŒ:"})," ì ìˆ˜ ì°¨ì´ê°€ í¬ì§€ ì•Šë‹¤ë©´(ì˜ˆ: 55ì  vs 62ì ) ë„ˆë¬´ ì§‘ì°©í•˜ì§€ ë§ˆì„¸ìš”. ì „ì²´ì ì¸ ìš´ì„¸ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤."]})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"3"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"ì‹œê°„ ì„ íƒ ë° ë¹„êµ"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:['"ì‹œê°„ ì„ íƒ" ë²„íŠ¼ì„ ëˆŒëŸ¬ ',t.jsx("strong",{children:"ê³¼ê±°ë‚˜ ë¯¸ë˜ ì‹œê°„"}),"ì˜ ê¸¸í‰ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["ğŸ’¡ ",t.jsx("strong",{children:"ì‹¤ì „ íŒ:"}),' "ì‹œê°„ëŒ€ ë¹„êµ" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì—¬ëŸ¬ ì‹œê°„ëŒ€ë¥¼ í•œëˆˆì— ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ì¼ì •ì€ ë¯¸ë¦¬ 2-3ê°œ ì‹œê°„ëŒ€ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”!']})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"4"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"ëª©ì  ì„ íƒ (ë§¤ìš° ì¤‘ìš”!)"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:["í™”ë©´ ìƒë‹¨ì˜ ",t.jsx("strong",{children:'"ğŸ¯ ëª©ì "'})," ë“œë¡­ë‹¤ìš´ì—ì„œ í˜„ì¬ ìƒí™©ì— ë§ëŠ” ëª©ì ì„ ì„ íƒí•˜ì„¸ìš”."]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[t.jsxs("p",{children:["ğŸ’¡ ",t.jsx("strong",{children:"ì—¬í–‰"}),": ì•ˆì „í•˜ê³  ì¦ê±°ìš´ ì—¬í–‰ì„ ìœ„í•œ ë°©ìœ„ ì œì‹œ"]}),t.jsxs("p",{children:["ğŸ’¡ ",t.jsx("strong",{children:"ë¹„ì¦ˆë‹ˆìŠ¤"}),": ê³„ì•½, í˜‘ìƒì— ìœ ë¦¬í•œ ë°©ìœ„ì™€ ì‹œê°„"]}),t.jsxs("p",{children:["ğŸ’¡ ",t.jsx("strong",{children:"íˆ¬ì"}),": ì¬ë¬¼ìš´ì´ ì¢‹ì€ ë°©í–¥ê³¼ íƒ€ì´ë°"]}),t.jsxs("p",{children:["ğŸ’¡ ",t.jsx("strong",{children:"ê±´ê°•"}),": ì¹˜ë£Œë‚˜ ìš”ì–‘ì— ì¢‹ì€ ë°©ìœ„"]})]})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"ê³ ê° ì •ë³´ ì ìš© (ì„ íƒì‚¬í•­)"}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:['"ê³ ê° ì„ íƒí•˜ê¸°"ë¡œ ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ë©´ ',t.jsx("strong",{children:"ê°œì¸ ë§ì¶¤ í•´ì„"}),"ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."]}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2",children:["ğŸ’¡ ",t.jsx("strong",{children:"ì‹¤ì „ íŒ:"})," ê°™ì€ ì‹œê°„ì´ë¼ë„ ìƒë…„ì›”ì¼ì— ë”°ë¼ ê¸¸í‰ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •í™•í•œ í•´ì„ì„ ì›í•˜ë©´ ê¼­ ì…ë ¥í•˜ì„¸ìš”!"]})]})]}),t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold",children:"6"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1",children:"AIì—ê²Œ ì§ˆë¬¸í•˜ê¸°"}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:'"ğŸ¤– AIì—ê²Œ ì§ˆë¬¸í•˜ê¸°" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê¶ê¸ˆí•œ ì ì„ ì§ì ‘ ë¬¼ì–´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'}),t.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-2 rounded mt-2 space-y-1",children:[t.jsx("p",{children:'ğŸ’¡ ì˜ˆì‹œ ì§ˆë¬¸: "ë‚´ì¼ ì˜¤í›„ 2ì‹œì— ë™ìª½ìœ¼ë¡œ ë¯¸íŒ… ê°€ëŠ”ë° ê´œì°®ì„ê¹Œìš”?"'}),t.jsx("p",{children:'ğŸ’¡ ì˜ˆì‹œ ì§ˆë¬¸: "ì´ë²ˆ ì£¼ ë‚¨ìª½ ë°©í–¥ ì¶œì¥ì€ ì–¸ì œê°€ ê°€ì¥ ì¢‹ì„ê¹Œìš”?"'}),t.jsx("p",{children:'ğŸ’¡ ì˜ˆì‹œ ì§ˆë¬¸: "ì¬ë¬¼ìš´ì´ ì¢‹ì€ ì‹œê°„ëŒ€ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”."'})]})]})]})]})]}),t.jsxs("section",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[t.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3 text-lg",children:"ğŸ¯ ì‹¤ì „ í™œìš© ì‹œë‚˜ë¦¬ì˜¤"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[t.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ’¼"}),t.jsx("span",{children:"ì‹œë‚˜ë¦¬ì˜¤ 1: ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¯¸íŒ…"})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"1ë‹¨ê³„:"}),' ëª©ì ì„ "ë¹„ì¦ˆë‹ˆìŠ¤"ë¡œ ì„ íƒ',t.jsx("br",{}),t.jsx("strong",{children:"2ë‹¨ê³„:"})," ë¯¸íŒ… ë‚ ì§œ/ì‹œê°„ ì…ë ¥ í›„ ì°¨íŠ¸ í™•ì¸",t.jsx("br",{}),t.jsx("strong",{children:"3ë‹¨ê³„:"})," 70ì  ì´ìƒì¸ ë°©ìœ„ ì°¾ê¸°",t.jsx("br",{}),t.jsx("strong",{children:"4ë‹¨ê³„:"})," í•´ë‹¹ ë°©ìœ„ë¥¼ í´ë¦­í•˜ì—¬ ìƒì„¸ ì •ë³´ í™•ì¸",t.jsx("br",{}),t.jsx("strong",{children:"5ë‹¨ê³„:"})," ê°€ëŠ¥í•˜ë©´ ê·¸ ë°©í–¥ì˜ ì¥ì†Œë¥¼ ì„ íƒí•˜ê±°ë‚˜, íšŒì˜ì‹¤ì—ì„œ ê·¸ ë°©í–¥ì— ì•‰ê¸°"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[t.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[t.jsx("span",{children:"âœˆï¸"}),t.jsx("span",{children:"ì‹œë‚˜ë¦¬ì˜¤ 2: ì£¼ë§ ì—¬í–‰ ê³„íš"})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"1ë‹¨ê³„:"}),' ëª©ì ì„ "ì—¬í–‰"ìœ¼ë¡œ ì„ íƒ',t.jsx("br",{}),t.jsx("strong",{children:"2ë‹¨ê³„:"}),' "ì‹œê°„ëŒ€ ë¹„êµ"ë¡œ í† ìš”ì¼/ì¼ìš”ì¼ ë¹„êµ',t.jsx("br",{}),t.jsx("strong",{children:"3ë‹¨ê³„:"})," ë” ì ìˆ˜ê°€ ë†’ì€ ë‚  ì„ íƒ",t.jsx("br",{}),t.jsx("strong",{children:"4ë‹¨ê³„:"})," ê¸¸í•œ ë°©ìœ„(ë™/ì„œ/ë‚¨/ë¶)ë¥¼ í™•ì¸",t.jsx("br",{}),t.jsx("strong",{children:"5ë‹¨ê³„:"})," í•´ë‹¹ ë°©í–¥ì˜ ì—¬í–‰ì§€ë¥¼ ìš°ì„  ê³ ë ¤"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[t.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ "}),t.jsx("span",{children:"ì‹œë‚˜ë¦¬ì˜¤ 3: ì´ì‚¬ ë‚ ì§œ ë° ë°©í–¥ ê²°ì •"})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"1ë‹¨ê³„:"}),' ëª©ì ì„ "ë¶€ë™ì‚°"ìœ¼ë¡œ ì„ íƒ',t.jsx("br",{}),t.jsx("strong",{children:"2ë‹¨ê³„:"})," ê³ ê° ì •ë³´(ìƒë…„ì›”ì¼) ì…ë ¥",t.jsx("br",{}),t.jsx("strong",{children:"3ë‹¨ê³„:"}),' ì´ì‚¬ ê°€ëŠ¥í•œ ì—¬ëŸ¬ ë‚ ì§œë¥¼ "ì‹œê°„ëŒ€ ë¹„êµ"ë¡œ ì²´í¬',t.jsx("br",{}),t.jsx("strong",{children:"4ë‹¨ê³„:"})," ì¢…í•© ì ìˆ˜ê°€ ê°€ì¥ ë†’ì€ ë‚  ì„ íƒ",t.jsx("br",{}),t.jsx("strong",{children:"5ë‹¨ê³„:"})," í˜„ì¬ ì§‘ì—ì„œ ìƒˆ ì§‘ ë°©í–¥ì´ ê¸¸í•œì§€ í™•ì¸",t.jsx("br",{}),t.jsx("strong",{children:"6ë‹¨ê³„:"}),' AIì—ê²Œ "ì´ë‚  ë¶ìª½ìœ¼ë¡œ ì´ì‚¬ ê°€ëŠ”ë° ê´œì°®ì„ê¹Œìš”?" ì§ˆë¬¸']})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[t.jsxs("h5",{className:"font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ“…"}),t.jsx("span",{children:"ì‹œë‚˜ë¦¬ì˜¤ 4: ë§¤ì¼ ì•„ì¹¨ ìš´ì„¸ ì²´í¬ ë£¨í‹´"})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"1ë‹¨ê³„:"})," ì•„ì¹¨ì— ì•±ì„ ì—´ë©´ ìë™ìœ¼ë¡œ í˜„ì¬ ì‹œê°„ ì°¨íŠ¸ í‘œì‹œ",t.jsx("br",{}),t.jsx("strong",{children:"2ë‹¨ê³„:"})," ì „ì²´ ìš´ì„¸ ì ìˆ˜ í™•ì¸ (70ì  ì´ìƒì´ë©´ ì¢‹ì€ ë‚ !)",t.jsx("br",{}),t.jsx("strong",{children:"3ë‹¨ê³„:"}),' "ê¸¸í•œ ë°©ìœ„"ë¥¼ ë©”ëª¨í•´ë‘ê¸°',t.jsx("br",{}),t.jsx("strong",{children:"4ë‹¨ê³„:"})," í•˜ë£¨ ë™ì•ˆ ì¤‘ìš”í•œ ì¼ì€ ê·¸ ë°©í–¥ì—ì„œ í•˜ê±°ë‚˜ ê·¸ ë°©í–¥ì„ í–¥í•´ ì§„í–‰",t.jsx("br",{}),t.jsx("strong",{children:"5ë‹¨ê³„:"}),' "ë¶ˆë¦¬í•œ ë°©ìœ„"ëŠ” ê°€ê¸‰ì  í”¼í•˜ê¸°']})]})]})]}),t.jsxs("section",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[t.jsx("h4",{className:"font-bold text-yellow-900 dark:text-yellow-300 mb-2",children:"âš ï¸ ì£¼ì˜ì‚¬í•­ ë° FAQ"}),t.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-2",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"flex-shrink-0",children:"Q:"}),t.jsxs("div",{children:[t.jsx("strong",{children:"ì ìˆ˜ê°€ ë‚®ì€ ë‚ ì€ ì•„ë¬´ê²ƒë„ í•˜ë©´ ì•ˆ ë˜ë‚˜ìš”?"}),t.jsx("br",{}),"A: ì•„ë‹™ë‹ˆë‹¤! 40ì  ì´ìƒì´ë©´ ì¼ìƒì ì¸ í™œë™ì€ ê´œì°®ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì¤‘ìš”í•œ ê²°ì •ì´ë‚˜ í° ê³„ì•½ì€ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"flex-shrink-0",children:"Q:"}),t.jsxs("div",{children:[t.jsx("strong",{children:"ëª¨ë“  ë°©ìœ„ê°€ í‰ë²”í•œ ë‚ ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?"}),t.jsx("br",{}),"A: ìƒëŒ€ì ìœ¼ë¡œ ì ìˆ˜ê°€ ë†’ì€ ë°©ìœ„ë¥¼ ì„ íƒí•˜ê±°ë‚˜, ì‹œê°„ëŒ€ë¥¼ ë°”ê¿”ì„œ ë‹¤ì‹œ í™•ì¸í•´ë³´ì„¸ìš”."]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"flex-shrink-0",children:"Q:"}),t.jsxs("div",{children:[t.jsx("strong",{children:"ì°¨íŠ¸ê°€ 2ì‹œê°„ë§ˆë‹¤ ë°”ë€ë‹¤ê³  í•˜ëŠ”ë°, ì •ê°ì—ë§Œ ë°”ë€Œë‚˜ìš”?"}),t.jsx("br",{}),"A: ë„¤, ì •í™•íˆëŠ” ìì‹œ(23-01ì‹œ), ì¶•ì‹œ(01-03ì‹œ) ë“± 2ì‹œê°„ ë‹¨ìœ„ë¡œ ë°”ë€ë‹ˆë‹¤. í™€ìˆ˜ ì‹œê° ì •ê°ì— ê°±ì‹ ë©ë‹ˆë‹¤."]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"flex-shrink-0",children:"Q:"}),t.jsxs("div",{children:[t.jsx("strong",{children:"ìƒë…„ì›”ì¼ì„ ì…ë ¥í–ˆëŠ”ë° ì ìˆ˜ê°€ ë³„ë¡œ ì•ˆ ë³€í–ˆì–´ìš”."}),t.jsx("br",{}),"A: ìƒë…„ì›”ì¼ì˜ ì˜í–¥ì€ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¡œ ì‘ìš©í•©ë‹ˆë‹¤(Â±10ì  ë‚´ì™¸). ê¸°ë³¸ ì°¨íŠ¸ê°€ ë” ì¤‘ìš”í•˜ë¯€ë¡œ í¬ê²Œ ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”."]})]})]})]})]}),"terms"===a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"ğŸšª íŒ”ë¬¸(å…«é–€) - 8ê°œì˜ ë¬¸"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:'ê° ë°©ìœ„ì— ë°°ì¹˜ëœ "ë¬¸"ìœ¼ë¡œ, ê·¸ ë°©í–¥ì˜ ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.'}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-green-900 dark:text-green-300",children:"íœ´ë¬¸ Â· ìƒë¬¸ Â· ê°œë¬¸"}),t.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"â†’ ì¢‹ì€ ë¬¸ (íœ´ì‹, ì„±ì¥, ì‹œì‘)"})]}),t.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300",children:"ê²½ë¬¸"}),t.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:"â†’ ëª…ì˜ˆì™€ ì˜ê´‘ì˜ ë¬¸"})]}),t.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-red-900 dark:text-red-300",children:"ìƒë¬¸ Â· ë‘ë¬¸ Â· ì‚¬ë¬¸"}),t.jsx("div",{className:"text-sm text-red-700 dark:text-red-400",children:"â†’ ì•ˆ ì¢‹ì€ ë¬¸ (ê°ˆë“±, ë§‰í˜, ì¢…ê²°)"})]}),t.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-300",children:"ë†€ë¬¸"}),t.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:"â†’ ë³€í™”ì˜ ë¬¸ (ì¢‹ì„ìˆ˜ë„ ë‚˜ì ìˆ˜ë„)"})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"â­ êµ¬ì„±(ä¹æ˜Ÿ) - 9ê°œì˜ ë³„"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"í•˜ëŠ˜ì˜ ë³„ì²˜ëŸ¼, ê° ë°©ìœ„ì˜ ê¸°ìš´ì„ ë”í•´ì£¼ëŠ” ìš”ì†Œì…ë‹ˆë‹¤."}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsx("span",{className:"text-green-600",children:"âœ…"}),t.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"ì²œì„, ì²œë³´, ì²œì‹¬, ì²œê¸ˆ"})," = ì¢‹ì€ ë³„ (ì‹ ë¢°, ì§€ì›, ì¹˜ìœ , ê· í˜•)"]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsx("span",{className:"text-red-600",children:"âš ï¸"}),t.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"ì²œë´‰, ì²œì˜ˆ"})," = ì•ˆ ì¢‹ì€ ë³„ (ê°„ê³„, ì§ˆë³‘)"]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsx("span",{className:"text-blue-600",children:"âš–ï¸"}),t.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("strong",{children:"ì²œì¶©, ì²œì˜, ì²œì£¼"})," = ì¤‘ë¦½ ë³„ (ë³€í™”, ëª…ì˜ˆ, ê¶Œìœ„)"]})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"ğŸ›¡ï¸ íŒ”ì‹ (å…«ç¥) - 8ê°œì˜ ì‹ "}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"ê° ë°©ìœ„ë¥¼ ì§€í‚¤ëŠ” ìˆ˜í˜¸ì‹  ê°™ì€ ì¡´ì¬ì…ë‹ˆë‹¤."}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-green-900 dark:text-green-300",children:"ì§ë¶€ Â· íƒœìŒ Â· ìœ¡í•© Â· êµ¬ì§€ Â· êµ¬ì²œ"}),t.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"â†’ ì¢‹ì€ ì‹ "})]}),t.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[t.jsx("div",{className:"font-bold text-red-900 dark:text-red-300",children:"ë“±ì‚¬ Â· ë°±í˜¸ Â· í˜„ë¬´"}),t.jsx("div",{className:"text-sm text-red-700 dark:text-red-400",children:"â†’ ì•ˆ ì¢‹ì€ ì‹ "})]})]})]}),t.jsxs("section",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-purple-900 dark:text-purple-300 mb-2",children:"ğŸ¯ ê°„ë‹¨íˆ ê¸°ì–µí•˜ì„¸ìš”!"}),t.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:["ë³µì¡í•´ ë³´ì´ì§€ë§Œ, ",t.jsx("strong",{children:"ê° ë°©ìœ„ë¥¼ í´ë¦­í•˜ë©´ ì‰¬ìš´ ë§ë¡œ ì„¤ëª…"}),"ì´ ë‚˜ì˜µë‹ˆë‹¤. ì²˜ìŒì—ëŠ” ",t.jsx("strong",{children:"ğŸŒŸâœ¨ ì´ëª¨ì§€ê°€ ë§ì€ ë°©í–¥"}),"ì„ ì„ íƒí•˜ì„¸ìš”!"]})]})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:t.jsx("button",{onClick:e,className:"w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl",children:"ì‹œì‘í•˜ê¸°"})})]})})}const G=["ê°‘","ì„","ë³‘","ì •","ë¬´","ê¸°","ê²½","ì‹ ","ì„","ê³„"],H={"ê°‘":"ëª©","ì„":"ëª©","ë³‘":"í™”","ì •":"í™”","ë¬´":"í† ","ê¸°":"í† ","ê²½":"ê¸ˆ","ì‹ ":"ê¸ˆ","ì„":"ìˆ˜","ê³„":"ìˆ˜"},K={"ëª©":{element:"ëª©",englishName:"Wood",favorableDirection:"ë™ìª½",favorableSeason:"ë´„",color:"ì²­ë¡ìƒ‰",personality:"ì„±ì¥ê³¼ í™•ì¥ì„ ì¶”êµ¬í•˜ëŠ” ì„±í–¥",advice:"ìƒˆë¡œìš´ ì‹œì‘ê³¼ ì„±ì¥ì— ìœ ë¦¬í•©ë‹ˆë‹¤. ë™ìª½ ë°©í–¥ì—ì„œ í™œë™í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.",icon:"ğŸŒ±"},"í™”":{element:"í™”",englishName:"Fire",favorableDirection:"ë‚¨ìª½",favorableSeason:"ì—¬ë¦„",color:"ë¶‰ì€ìƒ‰",personality:"ì—´ì •ì ì´ê³  í™œë™ì ì¸ ì„±í–¥",advice:"ì—´ì •ì„ ìŸëŠ” ì¼ì— ìœ ë¦¬í•©ë‹ˆë‹¤. ë‚¨ìª½ ë°©í–¥ì—ì„œ í™œë™í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.",icon:"ğŸ”¥"},"í† ":{element:"í† ",englishName:"Earth",favorableDirection:"ì¤‘ì•™",favorableSeason:"í™˜ì ˆê¸°",color:"í™©ìƒ‰",personality:"ì•ˆì •ê³¼ ì‹ ë¢°ë¥¼ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥",advice:"ì•ˆì •ì ì¸ ê´€ê³„ì™€ ê¸°ë°˜ì„ ë‹¤ì§€ëŠ”ë° ìœ ë¦¬í•©ë‹ˆë‹¤. ì¤‘ì•™ì—ì„œ ê· í˜•ì„ ì¡ìœ¼ì„¸ìš”.",icon:"â›°ï¸"},"ê¸ˆ":{element:"ê¸ˆ",englishName:"Metal",favorableDirection:"ì„œìª½",favorableSeason:"ê°€ì„",color:"í°ìƒ‰",personality:"ê²°ë‹¨ë ¥ê³¼ ì •ì˜ê°ì´ ê°•í•œ ì„±í–¥",advice:"ê²°ë‹¨ì´ í•„ìš”í•œ ì¼ì— ìœ ë¦¬í•©ë‹ˆë‹¤. ì„œìª½ ë°©í–¥ì—ì„œ í™œë™í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.",icon:"âš”ï¸"},"ìˆ˜":{element:"ìˆ˜",englishName:"Water",favorableDirection:"ë¶ìª½",favorableSeason:"ê²¨ìš¸",color:"ê²€ì€ìƒ‰",personality:"ì§€í˜œë¡­ê³  ìœ ì—°í•œ ì„±í–¥",advice:"ì§€í˜œì™€ ì „ëµì´ í•„ìš”í•œ ì¼ì— ìœ ë¦¬í•©ë‹ˆë‹¤. ë¶ìª½ ë°©í–¥ì—ì„œ í™œë™í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.",icon:"ğŸ’§"}};function Z(e){const r=function(e){return G[((e-1984)%10+10)%10]}(e),t=function(e){return H[e]||"ëª©"}(r),a=function(e){return K[e]||K["ëª©"]}(t);return{year:e,stem:r,element:t,characteristics:a}}function Q(e){if(!e)return null;try{const r=parseInt(e.split("-")[0]);return isNaN(r)||r<1900||r>2100?null:Z(r)}catch(r){return null}}const U={"ëª©":"í™”","í™”":"í† ","í† ":"ê¸ˆ","ê¸ˆ":"ìˆ˜","ìˆ˜":"ëª©"},X={"ëª©":"í† ","í† ":"ìˆ˜","ìˆ˜":"í™”","í™”":"ê¸ˆ","ê¸ˆ":"ëª©"};function V(e,r){return e===r?.3:U[e]===r?.8:U[r]===e?.6:X[e]===r?-.3:X[r]===e?-.6:0}function J(e,r){if(!r)return 0;const t=r.element;let a=0;a+=8*V(t,o(e.gate).element);a+=7*V(t,i(e.star).element);const s={"ë™":"ëª©","ë™ë‚¨":"ëª©","ë‚¨":"í™”","ì„œë‚¨":"í† ","ì„œ":"ê¸ˆ","ì„œë¶":"ê¸ˆ","ë¶":"ìˆ˜","ë™ë¶":"í† ","ì¤‘ì•™":"í† "}[e.direction]||null;if(s){a+=5*V(t,s)}return Math.max(-15,Math.min(15,Math.round(a)))}function ee(e,r){const t=e.overallFortune.score;if(!r)return{baseScore:t,personalScore:t,bonus:0,explanation:""};let a=0,s=0;const l=e.overallFortune.bestPalaces,n=e.overallFortune.worstPalaces;for(const c of Object.keys(e.palaces)){const t=Number(c),d=J(e.palaces[t],r);l.includes(t)?a+=1.5*d:n.includes(t)?a+=.7*d:a+=d,s++}const d=Math.round(a/s),o=Math.max(0,Math.min(100,t+d));let i="";return i=d>5?`${r.characteristics.element} ê¸°ìš´ì´ ì˜¤ëŠ˜ê³¼ ì˜ ë§ìŠµë‹ˆë‹¤!`:d<-5?`${r.characteristics.element} ê¸°ìš´ì´ ì˜¤ëŠ˜ê³¼ ì•½ê°„ ì¶©ëŒí•©ë‹ˆë‹¤.`:`${r.characteristics.element} ê¸°ìš´ì´ ì˜¤ëŠ˜ê³¼ ì¤‘ë¦½ì ì…ë‹ˆë‹¤.`,{baseScore:t,personalScore:o,bonus:d,explanation:i}}const re={green:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-900 dark:text-green-300",textLight:"text-green-700 dark:text-green-400"},blue:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-900 dark:text-blue-300",textLight:"text-blue-700 dark:text-blue-400"},gray:{bg:"bg-gray-50 dark:bg-gray-700",border:"border-gray-200 dark:border-gray-600",text:"text-gray-900 dark:text-gray-300",textLight:"text-gray-700 dark:text-gray-400"},orange:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-900 dark:text-orange-300",textLight:"text-orange-700 dark:text-orange-400"},red:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-900 dark:text-red-300",textLight:"text-red-700 dark:text-red-400"}};const te=e.memo(function({chart:e,customerName:a,customerBirthDate:s}){const l=r.useMemo(()=>e.overallFortune.bestPalaces,[e.overallFortune.bestPalaces]),n=r.useMemo(()=>e.overallFortune.worstPalaces,[e.overallFortune.worstPalaces]),d=r.useMemo(()=>s?Q(s):null,[s]),o=r.useMemo(()=>ee(e,d),[e,d]),i=r.useMemo(()=>{const r=d?o.personalScore:e.overallFortune.score;return r>=75?{icon:"ğŸŒŸ",title:"ì˜¤ëŠ˜ì€ ë§¤ìš° ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤!",description:"ì¤‘ìš”í•œ ì¼ì„ ì§„í–‰í•˜ê¸°ì— ìµœì ì˜ ì‹œê°„ì…ë‹ˆë‹¤.",color:"green"}:r>=60?{icon:"âœ¨",title:"ì˜¤ëŠ˜ì€ ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤",description:"ê³„íší–ˆë˜ ì¼ë“¤ì„ ì¶”ì§„í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤.",color:"blue"}:r>=40?{icon:"âš–ï¸",title:"ì˜¤ëŠ˜ì€ í‰ë²”í•œ ë‚ ì…ë‹ˆë‹¤",description:"ë¬´ë‚œí•˜ê²Œ í•˜ë£¨ë¥¼ ë³´ë‚´ê¸° ì¢‹ìŠµë‹ˆë‹¤.",color:"gray"}:r>=25?{icon:"âš ï¸",title:"ì˜¤ëŠ˜ì€ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤",description:"ì¤‘ìš”í•œ ê²°ì •ì€ ì‹ ì¤‘í•˜ê²Œ í•˜ì„¸ìš”.",color:"orange"}:{icon:"âŒ",title:"ì˜¤ëŠ˜ì€ ì¡°ì‹¬í•˜ì„¸ìš”",description:"ì¤‘ìš”í•œ ì¼ì€ ë¯¸ë£¨ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.",color:"red"}},[d,o,e.overallFortune.score]),c=r.useMemo(()=>function(e,r){const t=e.overallFortune.bestPalaces[0],a=e.palaces[t].direction,s=[{icon:"ğŸš—",situation:"ì—¬í–‰/ì¶œì¥",direction:`${a} ë°©í–¥ìœ¼ë¡œ`},{icon:"ğŸ’¼",situation:"ì¤‘ìš”í•œ ë¯¸íŒ…",direction:`${a} ë°©í–¥ ì¥ì†Œ ì¶”ì²œ`},{icon:"ğŸ’°",situation:"ì¬ë¬¼ìš´",direction:`${a} ë°©í–¥ íˆ¬ìì²˜`},{icon:"ğŸ‘¥",situation:"ì‚¬ëŒ ë§Œë‚˜ê¸°",direction:`${a} ë°©í–¥ì—ì„œ`}];if(r){const e=r.characteristics.favorableDirection;s.push({icon:r.characteristics.icon,situation:`${r.characteristics.element} ê¸°ìš´ í™œìš©`,direction:`${e} ë°©í–¥ì´ íŠ¹íˆ ìœ ë¦¬`})}return s}(e,d),[e,d]),x=re[i.color];return t.jsxs("div",{className:"mb-6 space-y-4",children:[a&&s&&t.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-700 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-700 dark:text-purple-300",children:[t.jsx("span",{className:"text-xl",children:"ğŸ‘¤"}),t.jsx("span",{className:"font-bold",children:a}),t.jsxs("span",{className:"text-sm",children:["(",s,")"]}),t.jsx("span",{className:"ml-2 text-sm",children:"ë‹˜ ë§ì¶¤ ë¶„ì„"})]})}),d&&t.jsx("div",{className:"p-4 bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 border border-indigo-200 dark:border-indigo-700 rounded-xl",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-4xl",children:d.characteristics.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs("h3",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-300",children:["ë‹¹ì‹ ì˜ ì˜¤í–‰: ",d.characteristics.element," ","(",d.characteristics.englishName,")"]}),t.jsxs("span",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-medium",children:[d.year,"ë…„ìƒ ",d.stem]})]}),t.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-400 mb-2",children:d.characteristics.personality}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[t.jsx("span",{className:"font-semibold",children:"ìœ ë¦¬í•œ ë°©ìœ„:"})," ",d.characteristics.favorableDirection]}),t.jsxs("div",{className:"p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[t.jsx("span",{className:"font-semibold",children:"ìœ ë¦¬í•œ ê³„ì ˆ:"})," ",d.characteristics.favorableSeason]})]}),t.jsxs("div",{className:"mt-2 p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded text-xs text-indigo-800 dark:text-indigo-300",children:["ğŸ’¡ ",t.jsx("strong",{children:"ë§ì¶¤ ì¡°ì–¸:"})," ",d.characteristics.advice]})]})]})}),t.jsx("div",{className:`p-6 rounded-xl border ${x.bg} ${x.border}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"text-5xl",children:i.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:`text-2xl font-bold mb-2 ${x.text}`,children:i.title}),t.jsx("p",{className:`text-lg ${x.textLight}`,children:i.description})]})]})}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[t.jsxs("h4",{className:"font-bold text-green-900 dark:text-green-300 mb-3 flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:"ğŸ‘"}),t.jsx("span",{children:"ì˜¤ëŠ˜ ì¢‹ì€ ë°©í–¥"})]}),t.jsx("div",{className:"space-y-2",children:l.slice(0,3).map(r=>{const a=e.palaces[r];return t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[t.jsx("div",{className:"text-2xl",children:"ğŸ§­"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold text-green-900 dark:text-green-300",children:[a.direction," (",r,"ê¶)"]}),t.jsx("div",{className:"text-xs text-green-700 dark:text-green-400",children:ae(a.gate,a.star)})]})]},r)})}),t.jsx("div",{className:"mt-3 p-3 bg-green-100 dark:bg-green-900/40 rounded-lg",children:t.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:["ğŸ’¡ ",t.jsx("strong",{children:"í™œìš© íŒ:"})," ì¤‘ìš”í•œ ì•½ì†ì´ë‚˜ ì—¬í–‰ì€ ì´ ë°©í–¥ìœ¼ë¡œ!"]})})]}),t.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:[t.jsxs("h4",{className:"font-bold text-red-900 dark:text-red-300 mb-3 flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:"âš ï¸"}),t.jsx("span",{children:"ì£¼ì˜í•  ë°©í–¥"})]}),t.jsx("div",{className:"space-y-2",children:n.slice(0,3).map(r=>{const a=e.palaces[r];return t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[t.jsx("div",{className:"text-2xl",children:"ğŸš«"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold text-red-900 dark:text-red-300",children:[a.direction," (",r,"ê¶)"]}),t.jsx("div",{className:"text-xs text-red-700 dark:text-red-400",children:se(a.gate,a.star)})]})]},r)})}),t.jsx("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/40 rounded-lg",children:t.jsxs("p",{className:"text-sm text-red-800 dark:text-red-300",children:["ğŸ’¡ ",t.jsx("strong",{children:"ì£¼ì˜ ì‚¬í•­:"})," ê°€ëŠ¥í•˜ë©´ ì´ ë°©í–¥ì€ í”¼í•˜ì„¸ìš”"]})})]})]}),t.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[t.jsxs("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-3 flex items-center gap-2",children:[t.jsx("span",{className:"text-xl",children:"ğŸ’¼"}),t.jsx("span",{children:"ìƒí™©ë³„ ì¶”ì²œ ë°©í–¥"})]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:c.map((e,r)=>t.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white/50 dark:bg-gray-800/50 rounded",children:[t.jsx("span",{className:"text-xl",children:e.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-sm text-blue-900 dark:text-blue-300",children:e.situation}),t.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400",children:e.direction})]})]},r))})]})]})});function ae(e,r){return{"íœ´ë¬¸":"íœ´ì‹ê³¼ íšŒë³µì— ì¢‹ìŒ","ìƒë¬¸":"ìƒˆë¡œìš´ ì‹œì‘ì— ì¢‹ìŒ","ê²½ë¬¸":"ëª…ì˜ˆì™€ ì„±ê³µì— ì¢‹ìŒ","ê°œë¬¸":"ê¸°íšŒë¥¼ ì¡ê¸° ì¢‹ìŒ","ë†€ë¬¸":"ë³€í™”ì™€ ë„ì „","ìƒë¬¸":"ê°ˆë“± ì£¼ì˜","ë‘ë¬¸":"ë§‰í˜ê³¼ ì–´ë ¤ì›€","ì‚¬ë¬¸":"ì¢…ê²°ê³¼ ë§ˆë¬´ë¦¬"}[e]||"í‰ë²”í•œ ê¸°ìš´"}function se(e,r){return{"ìƒë¬¸":"ë‹¤íˆ¼ì´ë‚˜ ê°ˆë“± ì¡°ì‹¬","ë‘ë¬¸":"ì¼ì´ ë§‰í ìˆ˜ ìˆìŒ","ì‚¬ë¬¸":"ì¤‘ìš”í•œ ì¼ ë¯¸ë£¨ê¸°","ë†€ë¬¸":"ì˜ˆìƒì¹˜ ëª»í•œ ë³€í™”","íœ´ë¬¸":"ì§€ë‚˜ì¹œ ì•ˆì£¼ ì£¼ì˜","ìƒë¬¸":"ë¬´ë¦¬í•œ í™•ì¥ ì£¼ì˜","ê²½ë¬¸":"í—ˆì˜ì‹¬ ì£¼ì˜","ê°œë¬¸":"ë°©ì–´ë ¥ ì•½í™”"}[e]||"ì£¼ì˜ê°€ í•„ìš”í•¨"}const le={excellent:{bg:"bg-green-500/80",bgHover:"hover:bg-green-500",border:"border-green-400",text:"text-white",glow:"shadow-green-500/50"},good:{bg:"bg-green-400/70",bgHover:"hover:bg-green-400",border:"border-green-300",text:"text-white",glow:"shadow-green-400/50"},neutral:{bg:"bg-gray-400/60",bgHover:"hover:bg-gray-400",border:"border-gray-300",text:"text-white",glow:"shadow-gray-400/50"},bad:{bg:"bg-orange-400/70",bgHover:"hover:bg-orange-400",border:"border-orange-300",text:"text-white",glow:"shadow-orange-400/50"},terrible:{bg:"bg-red-500/80",bgHover:"hover:bg-red-500",border:"border-red-400",text:"text-white",glow:"shadow-red-500/50"}},ne={excellent:"ëŒ€ê¸¸",good:"ê¸¸",neutral:"í‰",bad:"í‰",terrible:"ëŒ€í‰"};function de({chart:r,selectedPalace:a,onPalaceSelect:s}){return t.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[t.jsxs("div",{className:"mb-4 text-center",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:"ğŸ¨ ê¸¸í‰ íˆíŠ¸ë§µ"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ìƒ‰ìƒì´ ì§„í• ìˆ˜ë¡ ê°•í•œ ê¸¸í‰ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤"})]}),t.jsx("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl backdrop-blur-sm",children:[[4,9,2],[3,5,7],[8,1,6]].map((l,n)=>t.jsx(e.Fragment,{children:l.map(e=>{const l=r.palaces[e],n=le[l.fortune],d=a===e,o=l.patterns&&l.patterns.length>0,i=o&&l.patterns?l.patterns.reduce((e,r)=>r.strength>e.strength?r:e):null;return t.jsxs("button",{onClick:()=>s(e),className:`\n                    relative aspect-square rounded-lg transition-all duration-300 ease-in-out\n                    ${n.bg} ${n.bgHover}\n                    border-2 ${d?`${n.border} border-4`:"border-white/30"}\n                    ${n.text}\n                    shadow-lg ${d?n.glow:""}\n                    transform ${d?"scale-105":"scale-100"}\n                    hover:scale-110 hover:shadow-xl\n                    cursor-pointer\n                    ${c=l.fortune,{excellent:"brightness-110",good:"brightness-105",neutral:"brightness-100",bad:"brightness-95",terrible:"brightness-90"}[c]}\n                  `,style:{filter:d?"brightness(1.1)":"brightness(1)"},children:[t.jsxs("div",{className:"absolute top-1 left-1 text-xs font-semibold opacity-75",children:[e,"ê¶"]}),o&&i&&t.jsx("div",{className:"absolute top-1 right-1",children:t.jsx("div",{className:`\n                          w-2 h-2 rounded-full animate-pulse\n                          ${"auspicious"===i.type?"bg-yellow-300":"inauspicious"===i.type?"bg-purple-300":"bg-blue-300"}\n                        `,title:i.name})}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",children:ne[l.fortune]}),t.jsx("div",{className:"text-xs opacity-90",children:l.direction})]}),t.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center text-xs font-medium opacity-90",children:l.gate}),d&&t.jsx("div",{className:"absolute inset-0 border-2 border-white rounded-lg animate-pulse"})]},e);var c})},n))}),t.jsxs("div",{className:"mt-6 p-4 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm",children:[t.jsx("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 text-center",children:"ğŸ¨ ìƒ‰ìƒ ë²”ë¡€"}),t.jsx("div",{className:"flex justify-center gap-3 flex-wrap",children:Object.entries(ne).map(([e,r])=>{const a=le[e];return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-6 h-6 rounded ${a.bg} border-2 ${a.border}`}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:r})]},e)})}),t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-300 dark:border-gray-600",children:t.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-300 animate-pulse"}),t.jsx("span",{children:"ê¸¸ê²©"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-300 animate-pulse"}),t.jsx("span",{children:"í‰ê²©"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-300 animate-pulse"}),t.jsx("span",{children:"ì¤‘ë¦½"})]})]})})]}),t.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[t.jsx("div",{className:"text-xs text-green-700 dark:text-green-300 mb-1",children:"ê¸¸í•œ ê¶"}),t.jsx("div",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:r.overallFortune.bestPalaces.length})]}),t.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/20 rounded-lg text-center",children:[t.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 mb-1",children:"í‰ê· "}),t.jsxs("div",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:[r.overallFortune.score,"ì "]})]}),t.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[t.jsx("div",{className:"text-xs text-red-700 dark:text-red-300 mb-1",children:"í‰í•œ ê¶"}),t.jsx("div",{className:"text-xl font-bold text-red-800 dark:text-red-200",children:r.overallFortune.worstPalaces.length})]})]})]})}function oe({baseDate:e,customer:a,onClose:s}){const[l,n]=r.useState("hourly"),[d,o]=r.useState([]),[i,c]=r.useState(null);r.useEffect(()=>{a&&(parseInt(a.birth_date.split("-")[0]),parseInt(a.birth_date.split("-")[1]),parseInt(a.birth_date.split("-")[2]),a.birth_time&&parseInt(a.birth_time.split(":")[0]));const r=[];if("hourly"===l)for(let t=-4;t<=4;t+=2){const a=new Date(e);a.setHours(e.getHours()+t);const s=x({dateTime:a});r.push({dateTime:a,label:0===t?"í˜„ì¬":`${t>0?"+":""}${t}ì‹œê°„`,chart:s})}else if("daily"===l)for(let t=-3;t<=3;t++){const a=new Date(e);a.setDate(e.getDate()+t);const s=x({dateTime:a});r.push({dateTime:a,label:0===t?"ì˜¤ëŠ˜":`${t>0?"+":""}${t}ì¼`,chart:s})}else if("weekly"===l)for(let t=-2;t<=2;t++){const a=new Date(e);a.setDate(e.getDate()+7*t);const s=x({dateTime:a});r.push({dateTime:a,label:0===t?"ì´ë²ˆ ì£¼":`${t>0?"+":""}${t}ì£¼`,chart:s})}o(r)},[l,e,a]);const g=e=>e>=80?"text-green-600 dark:text-green-400":e>=60?"text-blue-600 dark:text-blue-400":e>=40?"text-yellow-600 dark:text-yellow-400":e>=20?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400";return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-800",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"ğŸ“Š ì‹œê°„ëŒ€ë³„ ê¸¸í‰ ë³€í™” ë¹„êµ"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a?`${a.name}ë‹˜ì˜ ìš´ì„¸ ë³€í™”ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤`:"ì „ì²´ì ì¸ ìš´ì„¸ ë³€í™”ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤"})]}),t.jsx("button",{onClick:s,className:"p-2 hover:bg-white/50 dark:hover:bg-gray-700 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"flex justify-center gap-3",children:[{value:"hourly",label:"â° ì‹œê°„ë³„",desc:"2ì‹œê°„ ë‹¨ìœ„"},{value:"daily",label:"ğŸ“… ì¼ë³„",desc:"í•˜ë£¨ ë‹¨ìœ„"},{value:"weekly",label:"ğŸ“† ì£¼ë³„",desc:"ì¼ì£¼ì¼ ë‹¨ìœ„"}].map(({value:e,label:r,desc:a})=>t.jsxs("button",{onClick:()=>n(e),className:"px-6 py-3 rounded-lg font-medium transition-all "+(l===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[t.jsx("div",{children:r}),t.jsx("div",{className:"text-xs opacity-75",children:a})]},e))})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-6",children:d.map((e,r)=>{const a="í˜„ì¬"===e.label||"ì˜¤ëŠ˜"===e.label||"ì´ë²ˆ ì£¼"===e.label;return t.jsxs("div",{className:"p-4 rounded-xl border-2 transition-all "+(a?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 shadow-lg":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),children:[t.jsxs("div",{className:"text-center mb-3",children:[t.jsx("div",{className:"text-sm font-bold mb-1 "+(a?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300"),children:e.label}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.dateTime.toLocaleString("ko-KR",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.jsxs("div",{className:"text-center mb-3 p-2 bg-white dark:bg-gray-900/50 rounded-lg",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:e.chart.solarTerm.name}),t.jsxs("div",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:["yang"===e.chart.yinYang?"ì–‘ë‘”":"ìŒë‘”"," ",e.chart.ju,"êµ­"]})]}),t.jsxs("div",{className:"text-center p-3 rounded-lg "+(s=e.chart.overallFortune.score,s>=80?"bg-green-100 dark:bg-green-900/30":s>=60?"bg-blue-100 dark:bg-blue-900/30":s>=40?"bg-yellow-100 dark:bg-yellow-900/30":s>=20?"bg-orange-100 dark:bg-orange-900/30":"bg-red-100 dark:bg-red-900/30"),children:[t.jsx("div",{className:`text-3xl font-bold ${g(e.chart.overallFortune.score)}`,children:e.chart.overallFortune.score}),t.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"excellent"===e.chart.overallFortune.level?"ëŒ€ê¸¸":"good"===e.chart.overallFortune.level?"ê¸¸":"neutral"===e.chart.overallFortune.level?"í‰":"bad"===e.chart.overallFortune.level?"í‰":"ëŒ€í‰"})]})]},r);var s})}),i&&t.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800 rounded-xl border border-blue-200 dark:border-blue-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:["ğŸ¯ ",i,"ê¶ ë³€í™” ì¶”ì "]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:(m=i,d.map(e=>({label:e.label,fortune:e.chart.palaces[m].fortune,score:e.chart.overallFortune.score}))).map((e,r)=>t.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg text-center border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:e.label}),t.jsx("div",{className:"text-sm font-bold "+("excellent"===e.fortune?"text-green-600":"good"===e.fortune?"text-blue-600":"neutral"===e.fortune?"text-yellow-600":"bad"===e.fortune?"text-orange-600":"text-red-600"),children:"excellent"===e.fortune?"ëŒ€ê¸¸":"good"===e.fortune?"ê¸¸":"neutral"===e.fortune?"í‰":"bad"===e.fortune?"í‰":"ëŒ€í‰"})]},r))})]}),t.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"ğŸ” ê¶ ì„ íƒí•˜ì—¬ ë³€í™” ì¶”ì "}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6,7,8,9].map(e=>t.jsxs("button",{onClick:()=>c(e),className:"px-4 py-2 rounded-lg font-medium transition-all "+(i===e?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[e,"ê¶"]},e))})]})]}),t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 text-center",children:t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ğŸ’¡ ì‹œê°„ëŒ€ë³„ ê¸¸í‰ ë³€í™”ë¥¼ ë¹„êµí•˜ì—¬ ìµœì ì˜ í–‰ë™ ì‹œì ì„ íŒŒì•…í•˜ì„¸ìš”"})})]})});var m}const ie={general:{gates:{},stars:{},spirits:{},description:"ì¼ìƒì ì¸ í™œë™ê³¼ ì „ë°˜ì ì¸ ìš´ì„¸",icon:"ğŸŒŸ",keywords:["ì¼ìƒ","ì¢…í•©","ì „ì²´"]},business:{gates:{"ìƒë¬¸":1,"ê°œë¬¸":.8,"ê²½ë¬¸":.7,"íœ´ë¬¸":.3,"ë‘ë¬¸":-.8,"ì‚¬ë¬¸":-1},stars:{"ì²œë³´":1,"ì²œì„":.8,"ì²œì¶©":.5,"ì²œì˜":.6,"ì²œì˜ˆ":-.9,"ì²œë´‰":-.5},spirits:{"ì§ë¶€":1,"ìœ¡í•©":.8,"êµ¬ì²œ":.7,"ë°±í˜¸":-.9,"í˜„ë¬´":-.8},description:"ì‚¬ì—…, ê³„ì•½, ê±°ë˜, íˆ¬ì, ì°½ì—…",icon:"ğŸ’¼",keywords:["ë¹„ì¦ˆë‹ˆìŠ¤","ì‚¬ì—…","ê³„ì•½","ê±°ë˜","íˆ¬ì","ì°½ì—…"]},love:{gates:{"ìƒë¬¸":1,"ê°œë¬¸":.7,"íœ´ë¬¸":.8,"ê²½ë¬¸":.6,"ìƒë¬¸":-.7,"ì‚¬ë¬¸":-1},stars:{"ì²œì„":.9,"ì²œë³´":.8,"ì²œì‹¬":.7,"ì²œì˜":.5,"ì²œì˜ˆ":-.8,"ì²œì¶©":-.3},spirits:{"ìœ¡í•©":1,"íƒœìŒ":.9,"ì§ë¶€":.6,"ë°±í˜¸":-.9,"ë“±ì‚¬":-.7},description:"ì—°ì• , ë§Œë‚¨, ê²°í˜¼, í”„ë¡œí¬ì¦ˆ, ì¤‘ë§¤",icon:"ğŸ’•",keywords:["ì—°ì• ","ì‚¬ë‘","ê²°í˜¼","ë§Œë‚¨","í”„ë¡œí¬ì¦ˆ","ì´ì„±"]},travel:{gates:{"ê°œë¬¸":1,"ìƒë¬¸":.8,"íœ´ë¬¸":.7,"ê²½ë¬¸":.6,"ë‘ë¬¸":-.9,"ì‚¬ë¬¸":-1},stars:{"ì²œì¶©":.8,"ì²œë³´":.7,"ì²œì„":.6,"ì²œì˜":.5,"ì²œì˜ˆ":-.9,"ì²œë´‰":-.6},spirits:{"êµ¬ì²œ":1,"ì§ë¶€":.7,"ìœ¡í•©":.6,"ë°±í˜¸":-.9,"í˜„ë¬´":-.8},description:"ì—¬í–‰, ì¶œì¥, ì´ì‚¬, ì´ë™, ê·€í–¥",icon:"âœˆï¸",keywords:["ì—¬í–‰","ì¶œì¥","ì´ì‚¬","ì´ë™","ê·€í–¥","ê´€ê´‘"]},health:{gates:{"íœ´ë¬¸":1,"ìƒë¬¸":.9,"ê°œë¬¸":.5,"ìƒë¬¸":-.8,"ì‚¬ë¬¸":-1,"ë‘ë¬¸":-.6},stars:{"ì²œì‹¬":1,"ì²œì„":.8,"ì²œë³´":.7,"ì²œê¸ˆ":.6,"ì²œì˜ˆ":-1,"ì²œë´‰":-.7},spirits:{"ì§ë¶€":.8,"íƒœìŒ":.7,"êµ¬ì§€":.9,"ë°±í˜¸":-1,"ë“±ì‚¬":-.8},description:"ê±´ê°•, ì¹˜ë£Œ, ìˆ˜ìˆ , ê²€ì§„, ìš”ì–‘",icon:"ğŸ¥",keywords:["ê±´ê°•","ì¹˜ë£Œ","ë³‘ì›","ìˆ˜ìˆ ","ê²€ì§„","ìš”ì–‘"]},wealth:{gates:{"ìƒë¬¸":1,"ê°œë¬¸":.8,"ê²½ë¬¸":.7,"íœ´ë¬¸":.5,"ì‚¬ë¬¸":-1,"ë‘ë¬¸":-.7},stars:{"ì²œë³´":1,"ì²œì„":.8,"ì²œê¸ˆ":.7,"ì²œì˜":.5,"ì²œì˜ˆ":-.9,"ì²œë´‰":-.6},spirits:{"ì§ë¶€":.9,"ìœ¡í•©":.7,"êµ¬ì²œ":.6,"í˜„ë¬´":-1,"ë°±í˜¸":-.8},description:"íˆ¬ì, ì¬í…Œí¬, ì‚¬ì—… ìê¸ˆ, ê³„ì•½ê¸ˆ",icon:"ğŸ’°",keywords:["ì¬ë¬¼","íˆ¬ì","ì¬í…Œí¬","ìˆ˜ì…","ëˆ","ìê¸ˆ"]},lawsuit:{gates:{"ê²½ë¬¸":1,"ê°œë¬¸":.6,"íœ´ë¬¸":.5,"ìƒë¬¸":-.3,"ì‚¬ë¬¸":-.8,"ë‘ë¬¸":-.5},stars:{"ì²œì˜":.9,"ì²œì„":.8,"ì²œì¶©":.4,"ì²œì˜ˆ":-.9,"ì²œë´‰":-.7},spirits:{"ì§ë¶€":1,"ìœ¡í•©":.7,"êµ¬ì²œ":.5,"ë°±í˜¸":-1,"í˜„ë¬´":-.9},description:"ì†Œì†¡, ë²•ë¥ , ë¶„ìŸ, ê³„ì•½ ë¬¸ì œ, ê³ ì†Œ",icon:"âš–ï¸",keywords:["ì†Œì†¡","ë²•ë¥ ","ë¶„ìŸ","ì¬íŒ","ê³ ì†Œ","ê³„ì•½"]},education:{gates:{"ìƒë¬¸":1,"ê°œë¬¸":.9,"ê²½ë¬¸":.8,"íœ´ë¬¸":.6,"ë‘ë¬¸":-.7,"ë†€ë¬¸":-.4},stars:{"ì²œë³´":.9,"ì²œì„":.8,"ì²œì‹¬":.7,"ì²œì˜":.8,"ì²œì¶©":.5,"ì²œì˜ˆ":-.8},spirits:{"ì§ë¶€":.9,"ìœ¡í•©":.7,"íƒœìŒ":.6,"ë“±ì‚¬":-.7,"ë°±í˜¸":-.6},description:"ì‹œí—˜, ì…í•™, í•™ì—…, ìê²©ì¦, êµìœ¡",icon:"ğŸ“š",keywords:["ì‹œí—˜","í•™ì—…","ì…í•™","ìê²©ì¦","ê³µë¶€","êµìœ¡"]}};function ce(e){return ie[e||"general"]}function xe(){return Object.entries(ie).map(([e,r])=>({value:e,label:ge(e),icon:r.icon,description:r.description}))}function ge(e){return{general:"ì¼ë°˜ (ì „ì²´)",business:"ë¹„ì¦ˆë‹ˆìŠ¤",love:"ì—°ì• /ê²°í˜¼",travel:"ì—¬í–‰/ì´ë™",health:"ê±´ê°•/ì¹˜ë£Œ",wealth:"ì¬ë¬¼/íˆ¬ì",lawsuit:"ì†Œì†¡/ë²•ë¥ ",education:"êµìœ¡/í•™ì—…"}[e]}function me(e){return e>=80?"excellent":e>=60?"good":e>=40?"neutral":e>=20?"bad":"terrible"}function ue(e,r,t,a){const s=ce(r);!r||s.description,Object.values(e.palaces).map(e=>{const t=function(e,r,t,a){let s=50;const l=g[e].nature;"auspicious"===l?s+=15:"inauspicious"===l&&(s-=15);const n=m[r].nature;if("auspicious"===n?s+=15:"inauspicious"===n&&(s-=15),t){const e=u[t].nature;"auspicious"===e?s+=20:"inauspicious"===e&&(s-=20)}if(!a||"general"===a)return{score:s,fortune:me(s),contextBonus:0};const d=ce(a);let o=0;o+=20*(d.gates[e]||0),o+=15*(d.stars[r]||0),t&&(o+=15*(d.spirits[t]||0));const i=Math.max(0,Math.min(100,s+o));return{score:i,fortune:me(i),contextBonus:o}}(e.gate,e.star,e.spirit,r);return`${e.palace}ê¶(${e.direction}): ${e.gate}, ${e.star}, ${e.spirit||"ì—†ìŒ"} - ${t.score}ì `}).join(", ");let l="";if(a){const e=Q(a.birth_date),r=parseInt(a.birth_date.split("-")[0]);parseInt(a.birth_date.split("-")[1]),parseInt(a.birth_date.split("-")[2]);const t=(new Date).getFullYear()-r;e&&(l=`\n\nğŸ™‹ ê³ ê° ì •ë³´:\n- ì´ë¦„: ${a.name}ë‹˜\n- ìƒë…„ì›”ì¼: ${a.birth_date} (${"lunar"===a.lunar_solar?"ìŒë ¥":"ì–‘ë ¥"})\n- ë‚˜ì´: ${t}ì„¸\n- ìƒë…„ ì²œê°„: ${e.stem}\n- ì˜¤í–‰: ${e.element}\n- ìƒì‹œ: ${a.birth_time||"ë¯¸ìƒ"}\n- íŠ¹ì§•: ${e.characteristics.personality}`)}let n="";if(a){const e=Q(a.birth_date);e&&(n=`${a.name}ë‹˜ì˜ ì‚¬ì£¼(ìƒë…„ ì²œê°„: ${e.stem}, ì˜¤í–‰: ${e.element})ì™€ ê·€ë¬¸ë‘”ê°‘ì„ ì—°ê²°í•˜ì—¬`)}return`ë‹¹ì‹ ì€ 30ë…„ ê²½ë ¥ì˜ ê·€ë¬¸ë‘”ê°‘ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ${a?a.name+"ë‹˜ì—ê²Œ":"ê³ ê°ì—ê²Œ"} ì¹œêµ¬ì²˜ëŸ¼ í¸í•˜ê²Œ ì¡°ì–¸í•˜ë“¯ ìì—°ìŠ¤ëŸ½ê²Œ ëŒ€í™”í•˜ì„¸ìš”.\n${l}\n\nğŸ“ í˜„ì¬ ê·€ë¬¸ë‘”ê°‘ ìƒí™©:\n- í˜„ì¬ ì‹œê°„: ${e.dateTime.toLocaleString("ko-KR")}\n- êµ­(å±€): ${"yang"===e.yinYang?"ì–‘ë‘”":"ìŒë‘”"} ${e.ju}êµ­\n- ì ˆê¸°: ${e.solarTerm.name}\n- ì „ì²´ ê¸°ìš´: ${e.overallFortune.score}ì \n- ì¶”ì²œ ë°©ìœ„: ${e.overallFortune.bestPalaces.map(r=>e.palaces[r].direction).join(", ")}\n- ì£¼ì˜ ë°©ìœ„: ${e.overallFortune.worstPalaces.map(r=>e.palaces[r].direction).join(", ")}\n\nğŸ’¬ ì‚¬ìš©ì ì§ˆë¬¸: "${t}"\n\nâœ… ë°˜ë“œì‹œ ì§€í‚¬ ì‚¬í•­:\n1. ğŸŒ ìˆœìˆ˜ í•œêµ­ì–´ë§Œ ì‚¬ìš© (í•œìì–´ ë‹¨ì–´ëŠ” ê´œì°®ì§€ë§Œ, ì¤‘êµ­ì–´ ê¸€ì, ì˜ì–´, ì¼ë³¸ì–´, ì•„ëì–´ ë“± ì™¸êµ­ì–´ ë¬¸ìëŠ” ì ˆëŒ€ ê¸ˆì§€)\n2. ğŸš« <think> íƒœê·¸ë‚˜ ì‚¬ê³  ê³¼ì • ì ˆëŒ€ ë³´ì—¬ì£¼ì§€ ë§ ê²ƒ\n3. ğŸ“ ë§ˆí¬ë‹¤ìš´ í˜•ì‹(#, **, -, ë“±) ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ\n4. ğŸ’¬ ì¹œêµ¬ì—ê²Œ ë§í•˜ë“¯ "~ê±°ë“ ìš”", "~í•´ìš”", "~ë„¤ìš”" ê°™ì€ í¸í•œ ë§íˆ¬ ì‚¬ìš©\n5. ğŸ’¡ í˜„ì‹¤ì ì´ê³  ê· í˜• ì¡íŒ ì¡°ì–¸ ì œê³µ:\n   - ì¢‹ì€ ì ë§Œ ê°•ì¡°í•˜ì§€ ë§ê³  ì£¼ì˜í•  ì ë„ ë°˜ë“œì‹œ ì–¸ê¸‰\n   - ë‚®ì€ ì ìˆ˜(60ì  ë¯¸ë§Œ) ê¶ìœ„ë‚˜ ë°©ìœ„ëŠ” ì†”ì§í•˜ê²Œ ì•Œë ¤ì£¼ê³  ê·¹ë³µ ë°©ë²• ì œì‹œ\n   - "~í•˜ë©´ ì¢‹ì•„ìš”"ê°€ ì•„ë‹Œ "~í•´ì•¼ í•©ë‹ˆë‹¤", "~ì£¼ì˜í•˜ì„¸ìš”" ê°™ì€ êµ¬ì²´ì  í‘œí˜„ ì‚¬ìš©\n6. ğŸ“‹ êµ¬ì²´ì ì¸ ì‹¤ì²œ ë°©ë²• ì œì‹œ:\n   - ì¶”ìƒì ì¸ ì¡°ì–¸ ê¸ˆì§€ (ì˜ˆ: "ë…¸ë ¥í•˜ì„¸ìš”" âŒ)\n   - êµ¬ì²´ì ì¸ í–‰ë™ ì§€ì¹¨ ì œê³µ (ì˜ˆ: "ì˜¤ì „ 9ì‹œ-11ì‹œ ì‚¬ì´ ë™ìª½ ë°©í–¥ì—ì„œ ê³„ì•½í•˜ì„¸ìš”" âœ…)\n   - ${n||""} ì‹œê°„(ì˜ˆ: ì˜¤ì „ 9ì‹œì—ì„œ 11ì‹œ ì‚¬ì´), ë°©í–¥, ë°©ë²•ì„ ëª…í™•íˆ ì œì‹œ\n7. âš ï¸ ìœ„í—˜ ìš”ì†Œ ëª…í™•íˆ ì „ë‹¬:\n   - ì ìˆ˜ê°€ ë‚®ì€ ê¶ìœ„ëŠ” ì–´ë–¤ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆëŠ”ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…\n   - í”¼í•´ì•¼ í•  í–‰ë™, ì¡°ì‹¬í•´ì•¼ í•  ì‹œê¸°ì™€ ë°©ìœ„ë¥¼ ëª…ì‹œ\n8. ğŸ”® ì˜¤í–‰ ì›ë¦¬ë¡œ ê°„ë‹¨íˆ ì´ìœ  ì„¤ëª…\n9. ğŸ“ 400-600ì ì •ë„ë¡œ ì¶©ë¶„íˆ ì„¤ëª…\n\nì§€ê¸ˆ ë°”ë¡œ ìˆœìˆ˜ í•œêµ­ì–´ë¡œë§Œ ë‹µë³€ì„ ì‹œì‘í•˜ì„¸ìš” (ì™¸êµ­ì–´ ë¬¸ì ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€):`}function he({chart:e,context:a,customer:s,onClose:l}){const[n,d]=r.useState([{role:"system",content:s?`ì•ˆë…•í•˜ì„¸ìš” ${s.name}ë‹˜! ì €ëŠ” ê·€ë¬¸ë‘”ê°‘ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤. ${s.name}ë‹˜ì˜ ì‚¬ì£¼ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë§ì¶¤ ì¡°ì–¸ì„ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì ì„ ë¬¼ì–´ë³´ì„¸ìš”! ğŸ˜Š`:"ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ê·€ë¬¸ë‘”ê°‘ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì ì„ ë¬¼ì–´ë³´ì„¸ìš”! ğŸ˜Š",timestamp:new Date}]),[o,i]=r.useState(""),[c,x]=r.useState(!1),g=r.useRef(null),m=r.useRef(null),[u,h]=r.useState(new Map),[b,p]=r.useState(!1),y=r.useRef(null);r.useEffect(()=>{var e;null==(e=g.current)||e.scrollIntoView({behavior:"smooth"})},[n]),r.useEffect(()=>{var e;null==(e=m.current)||e.focus()},[]),r.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;y.current=new e,y.current.lang="ko-KR",y.current.continuous=!1,y.current.interimResults=!1,y.current.onresult=e=>{const r=e.results[0][0].transcript;i(r),p(!1)},y.current.onerror=e=>{p(!1)},y.current.onend=()=>{p(!1)}}return()=>{y.current&&y.current.stop()}},[]);const j=(e,r,t)=>{const a=e.toLowerCase();if(a.includes("ì–¸ì œ")||a.includes("ì‹œê°„")||a.includes("íƒ€ì´ë°"))return r.hourGanZhi,`í˜„ì¬ ${"yang"===r.yinYang?"ì–‘ë‘”":"ìŒë‘”"} ${r.ju}êµ­ì´ë©°, ì „ì²´ ìš´ì„¸ëŠ” ${r.overallFortune.score}ì ì…ë‹ˆë‹¤. ${r.overallFortune.summary} ê°€ì¥ ì¢‹ì€ ë°©ìœ„ëŠ” ${r.overallFortune.bestPalaces.map(e=>`${e}ê¶(${r.palaces[e].direction})`).join(", ")}ì…ë‹ˆë‹¤. ğŸ˜Š`;if(a.includes("ë°©í–¥")||a.includes("ë°©ìœ„")||a.includes("ì–´ë””")){const e=r.overallFortune.bestPalaces[0],t=r.palaces[e];return`ê°€ì¥ ì¢‹ì€ ë°©ìœ„ëŠ” ${t.direction} ë°©í–¥(${e}ê¶)ì…ë‹ˆë‹¤! ${t.interpretation} âœ¨`}if(a.includes("ì¡°ì‹¬")||a.includes("í”¼í•´ì•¼")||a.includes("ìœ„í—˜")){const e=r.overallFortune.worstPalaces[0],t=r.palaces[e];return`${t.direction} ë°©í–¥(${e}ê¶)ì€ ì¡°ì‹¬í•˜ì„¸ìš”. ${t.interpretation} ì£¼ì˜ì‚¬í•­: ${t.warnings.join(", ")} âš ï¸`}if(a.includes("ì‚¬ì—…")||a.includes("ë¹„ì¦ˆë‹ˆìŠ¤")||a.includes("ê³„ì•½")){const e=Object.values(r.palaces).filter(e=>"ìƒë¬¸"===e.gate||"ê°œë¬¸"===e.gate||"ê²½ë¬¸"===e.gate);if(e.length>0){const r=e[0];return`ë¹„ì¦ˆë‹ˆìŠ¤ì—ëŠ” ${r.direction} ë°©í–¥ì´ ì¢‹ìŠµë‹ˆë‹¤. ${r.gate}ê³¼ ${r.star}ì˜ ì¡°í•©ì´ ì‚¬ì—… ì¶”ì§„ì— ìœ ë¦¬í•©ë‹ˆë‹¤. ê³„ì•½ì´ë‚˜ ë¯¸íŒ…ì„ ì´ ë°©í–¥ì—ì„œ ì§„í–‰í•˜ì„¸ìš”! ğŸ’¼`}}if(a.includes("ì—°ì• ")||a.includes("ì‚¬ë‘")||a.includes("ê²°í˜¼")){const e=Object.values(r.palaces).filter(e=>"ìœ¡í•©"===e.spirit||"íƒœìŒ"===e.spirit);if(e.length>0){const r=e[0];return`ì—°ì• ìš´ì€ ${r.direction} ë°©í–¥ì´ ì¢‹ìŠµë‹ˆë‹¤. ${r.spirit}ì´ ì‘ìš©í•˜ì—¬ ì¢‹ì€ ì¸ì—°ì„ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë°©í–¥ìœ¼ë¡œ ë°ì´íŠ¸ë‚˜ ë§Œë‚¨ì„ ê°€ì ¸ë³´ì„¸ìš”! ğŸ’•`}}return`í˜„ì¬ ${r.solarTerm.name} ì ˆê¸°ì´ë©°, ${"yang"===r.yinYang?"ì–‘ë‘”":"ìŒë‘”"} ${r.ju}êµ­ì…ë‹ˆë‹¤. ì „ì²´ ìš´ì„¸ ì ìˆ˜ëŠ” ${r.overallFortune.score}ì ìœ¼ë¡œ ${r.overallFortune.level} ë“±ê¸‰ì…ë‹ˆë‹¤. ${r.overallFortune.summary} ë” êµ¬ì²´ì ì¸ ì§ˆë¬¸ì„ í•´ì£¼ì‹œë©´ ìì„¸íˆ ë‹µë³€í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤! ğŸ˜Š`},f=async()=>{if(!o.trim()||c)return;const r={role:"user",content:o.trim(),timestamp:new Date};d(e=>[...e,r]),i(""),x(!0);try{const t={role:"assistant",content:await(async r=>{try{const t=`${e.ju}_${e.yinYang}_${a}_${(null==s?void 0:s.id)||"none"}_${r.toLowerCase().trim()}`;if(u.has(t))return u.get(t);const l=ue(e,a,r,s),n=await fetch("/api/v1/qimen/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:l,userQuestion:r})});if(!n.ok)return j(r,e,a);const d=await n.json();return d.success&&d.response?(h(e=>new Map(e).set(t,d.response)),d.response):j(r,e,a)}catch(t){return j(r,e)}})(r.content),timestamp:new Date};d(e=>[...e,t])}catch(t){const e={role:"assistant",content:"ì£„ì†¡í•©ë‹ˆë‹¤. ì‘ë‹µ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",timestamp:new Date};d(r=>[...r,e])}finally{x(!1)}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-center md:items-center p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-3xl md:rounded-3xl shadow-2xl w-full max-w-5xl h-[85vh] md:h-[750px] flex flex-col",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-4 rounded-t-3xl md:rounded-t-3xl flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-2xl",children:"ğŸ¤–"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-white font-bold text-lg",children:"ê·€ë¬¸ë‘”ê°‘ AI ìƒë‹´ì‚¬"}),t.jsx("p",{className:"text-blue-100 text-xs",children:"general"!==a&&`${a} ì „ë¬¸ ìƒë‹´`})]})]}),t.jsx("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map((e,r)=>t.jsx("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:t.jsxs("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 "+("user"===e.role?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"assistant"===e.role?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100":"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800"),children:[t.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),t.jsx("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},r)),c&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl px-4 py-3",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),t.jsx("div",{ref:g})]}),1===n.length&&t.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"ğŸ’¡ ì´ëŸ° ì§ˆë¬¸ì„ í•´ë³´ì„¸ìš”:"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["ì§€ê¸ˆ ì¤‘ìš”í•œ ê³„ì•½í•˜ê¸° ì¢‹ì€ê°€ìš”?","ì–´ëŠ ë°©í–¥ì´ ê°€ì¥ ì¢‹ë‚˜ìš”?","ì¡°ì‹¬í•´ì•¼ í•  ë°©ìœ„ëŠ” ì–´ë””ì¸ê°€ìš”?","ì˜¤ëŠ˜ ì—°ì• ìš´ì€ ì–´ë–¤ê°€ìš”?"].map((e,r)=>t.jsx("button",{onClick:()=>i(e),className:"text-xs px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e},r))})]}),t.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{y.current?b?(y.current.stop(),p(!1)):(y.current.start(),p(!0)):alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")},disabled:c,className:`px-3 py-3 rounded-full font-medium transition-all shadow-md ${b?"bg-red-500 text-white animate-pulse-strong":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"} disabled:opacity-50`,title:"ìŒì„± ì…ë ¥",children:b?"ğŸ¤":"ğŸ™ï¸"}),t.jsx("input",{ref:m,type:"text",value:o,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f())},placeholder:b?"ìŒì„± ì¸ì‹ ì¤‘...":"ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”...",disabled:c,className:"flex-1 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-full text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),t.jsx("button",{onClick:f,disabled:!o.trim()||c,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-medium hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:"ì „ì†¡"})]}),b&&t.jsx("div",{className:"mt-2 text-center text-sm text-red-500 dark:text-red-400 animate-pulse",children:"ğŸ¤ ë“£ê³  ìˆìŠµë‹ˆë‹¤... ë§ì”€í•´ì£¼ì„¸ìš”"})]})]})})}function be({message:e,type:a="info",duration:s=3e3,onClose:l}){r.useEffect(()=>{const e=setTimeout(()=>{l()},s);return()=>clearTimeout(e)},[s,l]);return t.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-slide-in-right",children:t.jsxs("div",{className:`${{success:"bg-green-500 dark:bg-green-600",info:"bg-blue-500 dark:bg-blue-600",warning:"bg-orange-500 dark:bg-orange-600",error:"bg-red-500 dark:bg-red-600"}[a]} text-white px-6 py-4 rounded-lg shadow-2xl flex items-center gap-3 min-w-[300px] max-w-md`,children:[t.jsx("span",{className:"text-2xl",children:{success:"âœ…",info:"â„¹ï¸",warning:"âš ï¸",error:"âŒ"}[a]}),t.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),t.jsx("button",{onClick:l,className:"text-white/80 hover:text-white transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}const pe={enabled:!1,contexts:[],minScore:80,timeRange:{start:"09:00",end:"18:00"},frequency:"hourly",permissionGranted:!1,lastCheckTime:null},ye=v()(N((e,r)=>({settings:pe,history:[],updateSettings:r=>{e(e=>({settings:{...e.settings,...r}}))},toggleEnabled:()=>{e(e=>({settings:{...e.settings,enabled:!e.settings.enabled}}))},requestPermission:async()=>{if(!("Notification"in window))return!1;if("granted"===Notification.permission)return e(e=>({settings:{...e.settings,permissionGranted:!0}})),!0;if("denied"!==Notification.permission)try{const r="granted"===await Notification.requestPermission();return e(e=>({settings:{...e.settings,permissionGranted:r}})),r}catch(r){return!1}return!1},addHistory:r=>{const t={...r,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,clicked:!1,createdAt:new Date};e(e=>({history:[t,...e.history].slice(0,100)}))},markAsClicked:r=>{e(e=>({history:e.history.map(e=>e.id===r?{...e,clicked:!0}:e)}))},clearHistory:()=>{e({history:[]})},updateLastCheckTime:()=>{e(e=>({settings:{...e.settings,lastCheckTime:new Date}}))},resetSettings:()=>{e({settings:pe,history:[]})}}),{name:"qimen-notification-storage",version:1}));function je(){return"Notification"in window&&"granted"===Notification.permission}function fe(e){if(!je())return null;try{const r=new Notification(e.title,{body:e.body,icon:e.icon||"/logo192.png",tag:e.tag||"qimen-notification",badge:"/logo192.png",data:e.data,requireInteraction:!1,silent:!1});return e.onClick?r.onclick=t=>{t.preventDefault(),window.focus(),r.close(),e.onClick()}:r.onclick=()=>{window.focus(),r.close()},setTimeout(()=>{r.close()},5e3),r}catch(r){return null}}function ke(e){if(!e.enabled)return{notified:!1,chart:null,reason:"Notifications disabled"};if(!je())return{notified:!1,chart:null,reason:"No notification permission"};const r=new Date,t=r.getHours(),a=r.getMinutes();t.toString().padStart(2,"0"),a.toString().padStart(2,"0");const[s,l]=e.timeRange.start.split(":").map(Number),[n,d]=e.timeRange.end.split(":").map(Number),o=60*t+a;if(o<60*s+l||o>60*n+d)return{notified:!1,chart:null,reason:"Outside time range"};const i=x({dateTime:r});if(i.overallFortune.score<e.minScore)return{notified:!1,chart:i,reason:`Score too low (${i.overallFortune.score} < ${e.minScore})`};const c={excellent:"ğŸŒŸ",good:"âœ¨",neutral:"âš–ï¸",bad:"âš ï¸",terrible:"âŒ"}[i.overallFortune.level];const g=function(e){return{excellent:"ëŒ€ê¸¸ (å¤§å‰)",good:"ê¸¸ (å‰)",neutral:"í‰ (å¹³)",bad:"í‰ (å‡¶)",terrible:"ëŒ€í‰ (å¤§å‡¶)"}[e]}(i.overallFortune.level);return fe({title:`${c} ê·€ë¬¸ë‘”ê°‘ ì•Œë¦¼`,body:`ì§€ê¸ˆì´ ${g} ì‹œê°„ëŒ€ì…ë‹ˆë‹¤! (ì ìˆ˜: ${i.overallFortune.score}/100)\n${i.overallFortune.summary}`,icon:"/logo192.png",tag:"qimen-good-time",data:{chart:i,timestamp:r.toISOString()},onClick:()=>{window.location.href="/qimen"}}),{notified:!0,chart:i}}const ve=({isOpen:e,onClose:a})=>{const{settings:s,history:l,updateSettings:n,toggleEnabled:d,requestPermission:o,clearHistory:i}=ye(),[c,x]=r.useState(je());r.useEffect(()=>{x(je())},[s.permissionGranted]),r.useEffect(()=>{if(!s.enabled)return;const e=function(e,r){let t;switch(e.frequency){case"realtime":t=3e5;break;case"hourly":default:t=36e5;break;case"daily":t=864e5}const a=ke(e);r&&r(a);const s=setInterval(()=>{const t=ke(e);r&&r(t)},t);return()=>{clearInterval(s)}}(s,e=>{e.notified});return e},[s]);return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-background rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-border shadow-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ””"}),"ê·€ë¬¸ë‘”ê°‘ ì•Œë¦¼ ì„¤ì •"]}),t.jsx("button",{onClick:a,className:"text-muted-foreground hover:text-foreground transition-colors text-2xl",children:"Ã—"})]}),!c&&t.jsx("div",{className:"mb-6 p-4 bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:"âš ï¸"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"ì•Œë¦¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤"}),t.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mb-3",children:"ê¸¸í•œ ì‹œê°„ëŒ€ ì•Œë¦¼ì„ ë°›ìœ¼ë ¤ë©´ ë¸Œë¼ìš°ì € ì•Œë¦¼ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤."}),t.jsx("button",{onClick:async()=>{const e=await o();x(e),e?alert("ì•Œë¦¼ ê¶Œí•œì´ í—ˆìš©ë˜ì—ˆìŠµë‹ˆë‹¤!"):alert("ì•Œë¦¼ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ í—ˆìš©í•´ì£¼ì„¸ìš”.")},className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-md text-sm font-medium transition-colors",children:"ì•Œë¦¼ ê¶Œí•œ í—ˆìš©í•˜ê¸°"})]})]})}),t.jsx("div",{className:"mb-6 p-4 border border-border rounded-lg bg-muted/20",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"ì•Œë¦¼ í™œì„±í™”"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"ê¸¸í•œ ì‹œê°„ëŒ€ì— ìë™ìœ¼ë¡œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤"})]}),t.jsx("button",{onClick:d,disabled:!c,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors ${s.enabled&&c?"bg-primary-500":"bg-gray-300 dark:bg-gray-600"} ${c?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:t.jsx("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform "+(s.enabled&&c?"translate-x-7":"translate-x-1")})})]})}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"ìµœì†Œ ì•Œë¦¼ ì ìˆ˜"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:s.minScore,onChange:e=>n({minScore:parseInt(e.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary-500"}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"ì ìˆ˜:"}),t.jsxs("span",{className:"text-lg font-bold text-primary-500",children:[s.minScore,"ì  ì´ìƒ"]})]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.minScore>=80&&"ğŸŒŸ ëŒ€ê¸¸ (å¤§å‰) ì‹œê°„ëŒ€ì—ë§Œ ì•Œë¦¼",s.minScore>=60&&s.minScore<80&&"âœ¨ ê¸¸ (å‰) ì´ìƒ ì‹œê°„ëŒ€ì— ì•Œë¦¼",s.minScore>=40&&s.minScore<60&&"âš–ï¸ í‰ (å¹³) ì´ìƒ ì‹œê°„ëŒ€ì— ì•Œë¦¼",s.minScore<40&&"âš ï¸ ëª¨ë“  ì‹œê°„ëŒ€ì— ì•Œë¦¼ (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)"]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"ì•Œë¦¼ ë°›ì„ ì‹œê°„ëŒ€"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-muted-foreground mb-2",children:"ì‹œì‘ ì‹œê°„"}),t.jsx("input",{type:"time",value:s.timeRange.start,onChange:e=>n({timeRange:{...s.timeRange,start:e.target.value}}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-muted-foreground mb-2",children:"ì¢…ë£Œ ì‹œê°„"}),t.jsx("input",{type:"time",value:s.timeRange.end,onChange:e=>n({timeRange:{...s.timeRange,end:e.target.value}}),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:ring-2 focus:ring-primary-500"})]})]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[s.timeRange.start," ~ ",s.timeRange.end," ì‚¬ì´ì—ë§Œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤"]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"ì•Œë¦¼ ë¹ˆë„"}),t.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"realtime",label:"ì‹¤ì‹œê°„",desc:"5ë¶„ë§ˆë‹¤"},{value:"hourly",label:"ì‹œê°„ë§ˆë‹¤",desc:"1ì‹œê°„ë§ˆë‹¤"},{value:"daily",label:"í•˜ë£¨ 1íšŒ",desc:"24ì‹œê°„ë§ˆë‹¤"}].map(e=>t.jsxs("button",{onClick:()=>n({frequency:e.value}),className:"p-3 border rounded-lg text-center transition-colors "+(s.frequency===e.value?"border-primary-500 bg-primary-500/10 text-primary-600":"border-border hover:border-primary-300 hover:bg-muted/50"),children:[t.jsx("div",{className:"font-semibold text-sm",children:e.label}),t.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.desc})]},e.value))})]}),l.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-foreground",children:"ì•Œë¦¼ ê¸°ë¡"}),t.jsx("button",{onClick:i,className:"text-sm text-red-500 hover:text-red-700 transition-colors",children:"ê¸°ë¡ ì‚­ì œ"})]}),t.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 border border-border rounded-lg p-3 bg-muted/10",children:l.slice(0,10).map(e=>t.jsxs("div",{className:"text-sm flex items-start gap-2 pb-2 border-b border-border last:border-b-0 last:pb-0",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),t.jsx("span",{className:"flex-1 text-foreground",children:e.message})]},e.id))})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{if(!c)return void alert("ë¨¼ì € ì•Œë¦¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.");fe({title:"ğŸ”® ê·€ë¬¸ë‘”ê°‘ ì•Œë¦¼ í…ŒìŠ¤íŠ¸",body:"ì•Œë¦¼ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê³  ìˆìŠµë‹ˆë‹¤!",icon:"/logo192.png",tag:"qimen-test"})?alert("í…ŒìŠ¤íŠ¸ ì•Œë¦¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!"):alert("ì•Œë¦¼ ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")},disabled:!c,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-md font-medium transition-colors",children:"í…ŒìŠ¤íŠ¸ ì•Œë¦¼"}),t.jsx("button",{onClick:a,className:"flex-1 px-4 py-2 bg-muted hover:bg-muted/80 text-foreground rounded-md font-medium transition-colors",children:"ë‹«ê¸°"})]})]})}):null},Ne=v()(N((e,r)=>({bookmarks:[],addBookmark:r=>{const t={...r,id:`qb-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date,isShared:!1};return e(e=>({bookmarks:[t,...e.bookmarks]})),t},removeBookmark:r=>{e(e=>({bookmarks:e.bookmarks.filter(e=>e.id!==r)}))},updateBookmark:(r,t)=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===r?{...e,...t,updatedAt:new Date}:e)}))},getBookmark:e=>r().bookmarks.find(r=>r.id===e),searchBookmarks:e=>{let t=r().bookmarks;if(e.query&&e.query.trim()){const r=e.query.toLowerCase();t=t.filter(e=>{var t;return e.note.toLowerCase().includes(r)||(null==(t=e.customerName)?void 0:t.toLowerCase().includes(r))||e.tags.some(e=>e.toLowerCase().includes(r))})}return e.context&&(t=t.filter(r=>r.context===e.context)),e.customerName&&(t=t.filter(r=>r.customerName===e.customerName)),e.dateRange&&(t=t.filter(r=>{const t=new Date(r.dateTime);return t>=e.dateRange.start&&t<=e.dateRange.end})),e.tags&&e.tags.length>0&&(t=t.filter(r=>e.tags.some(e=>r.tags.includes(e)))),void 0!==e.isShared&&(t=t.filter(r=>r.isShared===e.isShared)),t},getAllBookmarks:()=>[...r().bookmarks].sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime()),getAllTags:()=>{const e=r().bookmarks.flatMap(e=>e.tags);return Array.from(new Set(e)).sort()},hasBookmark:(e,t,a)=>r().bookmarks.some(r=>{const s=new Date(r.dateTime).toISOString()===e.toISOString(),l=r.customerName===t,n=r.context===a;return s&&l&&n}),setShared:(r,t)=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===r?{...e,isShared:!0,shareUuid:t,updatedAt:new Date}:e)}))},unsetShared:r=>{e(e=>({bookmarks:e.bookmarks.map(e=>e.id===r?{...e,isShared:!1,shareUuid:void 0,updatedAt:new Date}:e)}))},clearAll:()=>{confirm("ëª¨ë“  ì¦ê²¨ì°¾ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")&&e({bookmarks:[]})}}),{name:"qimen-bookmark-storage",version:1})),we=({chart:e,dateTime:a,customerName:s,customerBirthDate:l,context:n,className:d=""})=>{const{hasBookmark:o,addBookmark:i,removeBookmark:c,getAllBookmarks:x}=Ne(),[g,m]=r.useState(!1),[u,h]=r.useState(!1),[b,p]=r.useState(""),[y,j]=r.useState([]),[f,k]=r.useState("");r.useEffect(()=>{m(o(a,s,n))},[a,s,n,o,x()]);const v=()=>{f.trim()&&!y.includes(f.trim())&&(j([...y,f.trim()]),k(""))};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:g?()=>{const e=x().find(e=>new Date(e.dateTime).toISOString()===a.toISOString()&&e.customerName===s&&e.context===n);e&&confirm("ì´ ì¦ê²¨ì°¾ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(c(e.id),m(!1),alert("ì¦ê²¨ì°¾ê¸°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."))}:()=>h(!0),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${g?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"} ${d}`,title:g?"ì¦ê²¨ì°¾ê¸° ì œê±°":"ì¦ê²¨ì°¾ê¸° ì¶”ê°€",children:[t.jsx("span",{className:"text-xl",children:g?"â­":"â˜†"}),t.jsx("span",{children:g?"ì¦ê²¨ì°¾ê¸°ë¨":"ì¦ê²¨ì°¾ê¸°"})]}),u&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[t.jsx("span",{children:"â­"}),t.jsx("span",{children:"ì¦ê²¨ì°¾ê¸° ì¶”ê°€"})]}),t.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[t.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2",children:"ì €ì¥í•  ì°¨íŠ¸ ì •ë³´"}),t.jsxs("div",{className:"text-sm space-y-1 text-purple-700 dark:text-purple-300",children:[t.jsxs("p",{children:["ğŸ“… ì‹œê°„: ",a.toLocaleString("ko-KR")]}),t.jsxs("p",{children:["âš¡ êµ­(å±€): ","yang"===e.yinYang?"ì–‘ë‘”":"ìŒë‘”"," ",e.ju,"êµ­"]}),t.jsxs("p",{children:["ğŸŒ¸ ì ˆê¸°: ",e.solarTerm.name]}),s&&t.jsxs("p",{children:["ğŸ‘¤ ê³ ê°: ",s]}),t.jsxs("p",{children:["ğŸ“Š ì ìˆ˜: ",e.overallFortune.score,"ì  (",e.overallFortune.level,")"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ğŸ“ ë©”ëª¨ (ì„ íƒì‚¬í•­)"}),t.jsx("textarea",{value:b,onChange:e=>p(e.target.value),placeholder:"ì´ ì°¨íŠ¸ì— ëŒ€í•œ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”... (ì˜ˆ: ì¤‘ìš”í•œ íšŒì˜ ì‹œê°„)",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:4})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ğŸ·ï¸ íƒœê·¸ (ì„ íƒì‚¬í•­)"}),t.jsxs("div",{className:"flex gap-2 mb-3",children:[t.jsx("input",{type:"text",value:f,onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),v())},placeholder:"íƒœê·¸ ì…ë ¥ í›„ Enter...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"ì¶”ê°€"})]}),y.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((e,r)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm",children:[e,t.jsx("button",{onClick:()=>(e=>{j(y.filter(r=>r!==e))})(e),className:"hover:text-purple-900 dark:hover:text-purple-100",children:"Ã—"})]},r))}),0===y.length&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"ğŸ’¡ ë©”ëª¨ì™€ íƒœê·¸ë¥¼ ë¹„ì›Œë‘ë©´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤"})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[t.jsx("button",{onClick:()=>{const r=`${"yang"===e.yinYang?"ì–‘ë‘”":"ìŒë‘”"} ${e.ju}êµ­ - ${e.overallFortune.summary.substring(0,50)}...`,t=[e.overallFortune.level,e.solarTerm.name,n];i({chart:e,dateTime:a,customerName:s,customerBirthDate:l,context:n,note:b||r,tags:y.length>0?y:t}),m(!0),h(!1),p(""),j([]),k(""),alert("â­ ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!")},className:"flex-1 px-6 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-medium hover:from-yellow-600 hover:to-orange-600 transition-all shadow-lg hover:shadow-xl",children:"â­ ì¦ê²¨ì°¾ê¸° ì¶”ê°€"}),t.jsx("button",{onClick:()=>h(!1),className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"ì·¨ì†Œ"})]})]})})]})},Se={sm:{width:512,height:512},md:{width:1024,height:1024},lg:{width:2048,height:2048},xl:{width:4096,height:4096}};async function $e(e,r,t={}){const a={format:t.format||"png",size:t.size||"md",includeWatermark:t.includeWatermark??!0,theme:t.theme||"light",quality:t.quality||.95,filename:t.filename},s=document.getElementById(e);if(!s)throw new Error(`Element with ID "${e}" not found`);const l=await w(s,{backgroundColor:"dark"===a.theme?"#1a1a1a":"#ffffff",scale:2,useCORS:!0,allowTaint:!0,logging:!1,width:s.scrollWidth,height:s.scrollHeight}),n=Se[a.size],d=function(e,r,t){const a=document.createElement("canvas");a.width=r,a.height=t;const s=a.getContext("2d");if(!s)throw new Error("Failed to get 2D context");s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high";const l=e.width/e.height;let n=r,d=t,o=0,i=0;l>r/t?(d=r/l,i=(t-d)/2):(n=t*l,o=(r-n)/2);return s.drawImage(e,o,i,n,d),a}(l,n.width,n.height);let o=d;a.includeWatermark&&(o=await async function(e,r,t){const a=e.getContext("2d");if(!a)throw new Error("Failed to get 2D context");const s=e.width,l=e.height,n=Math.floor(.08*l);a.fillStyle="dark"===t?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.7)",a.fillRect(0,l-n,s,n),a.fillStyle="dark"===t?"#ffffff":"#000000",a.font=`bold ${Math.floor(.3*n)}px "Noto Sans KR", sans-serif`,a.textBaseline="middle";const d=`âš¡ ${"yang"===r.yinYang?"ì–‘ë‘”":"ìŒë‘”"} ${r.ju}êµ­ | ${r.solarTerm.name}`;a.textAlign="left",a.fillText(d,Math.floor(.03*s),l-n/2);const o="ìš´ëª…ë‚˜ì¹¨ë°˜.com | ê·€ë¬¸ë‘”ê°‘";a.textAlign="right",a.fillText(o,Math.floor(.97*s),l-n/2);const i=Math.floor(.08*l),c=1.5*i,x=Math.floor(.05*s),g=Math.floor(.05*l),m=r.overallFortune.score>=80?"#10b981":r.overallFortune.score>=60?"#3b82f6":r.overallFortune.score>=40?"#eab308":r.overallFortune.score>=20?"#f97316":"#ef4444";a.fillStyle=m,a.beginPath(),a.arc(x+c/2,g+c/2,c/2,0,2*Math.PI),a.fill(),a.fillStyle="#ffffff",a.font=`bold ${i}px "Noto Sans KR", sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(r.overallFortune.score.toString(),x+c/2,g+c/2);const u="excellent"===r.overallFortune.level?"ëŒ€ê¸¸":"good"===r.overallFortune.level?"ê¸¸":"neutral"===r.overallFortune.level?"í‰":"bad"===r.overallFortune.level?"í‰":"ëŒ€í‰";return a.font=`bold ${.4*i}px "Noto Sans KR", sans-serif`,a.fillStyle="dark"===t?"#ffffff":"#000000",a.fillText(u,x+c/2,g+c+.4*i),e}(d,r,a.theme));return await new Promise((e,r)=>{const t="png"===a.format?"image/png":"image/jpeg";o.toBlob(t=>{t?e(t):r(new Error("Failed to convert canvas to blob"))},t,a.quality)})}const Ce=({isOpen:e,onClose:a,chart:s,elementId:l,customerName:n})=>{const[d,o]=r.useState("png"),[i,c]=r.useState("md"),[x,g]=r.useState(!0),[m,u]=r.useState("light"),[h,b]=r.useState(!1),[p,y]=r.useState(!1);return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ“¤"}),t.jsx("span",{children:"ê·€ë¬¸ë‘”ê°‘ ì°¨íŠ¸ ê³µìœ "})]}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[t.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2",children:"ê³µìœ í•  ì°¨íŠ¸ ì •ë³´"}),t.jsxs("div",{className:"text-sm space-y-1 text-purple-700 dark:text-purple-300",children:[t.jsxs("p",{children:["âš¡ êµ­(å±€): ","yang"===s.yinYang?"ì–‘ë‘”":"ìŒë‘”"," ",s.ju,"êµ­"]}),t.jsxs("p",{children:["ğŸŒ¸ ì ˆê¸°: ",s.solarTerm.name]}),t.jsxs("p",{children:["ğŸ“Š ì ìˆ˜: ",s.overallFortune.score,"ì  (",s.overallFortune.level,")"]}),n&&t.jsxs("p",{children:["ğŸ‘¤ ê³ ê°: ",n]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"ì´ë¯¸ì§€ ì„¤ì •"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ğŸ“· í¬ë§·"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"png",label:"PNG",desc:"ë¬´ì†ì‹¤, íˆ¬ëª… ë°°ê²½ ì§€ì›"},{value:"jpg",label:"JPG",desc:"ì‘ì€ íŒŒì¼ í¬ê¸°"}].map(e=>t.jsxs("button",{onClick:()=>o(e.value),className:"p-3 border rounded-lg text-left transition-colors "+(d===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[t.jsx("div",{className:"font-semibold",children:e.label}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.desc})]},e.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ğŸ“ í¬ê¸°"}),t.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{value:"sm",label:"ì‘ê²Œ",size:"512px"},{value:"md",label:"ì¤‘ê°„",size:"1024px"},{value:"lg",label:"í¬ê²Œ",size:"2048px"},{value:"xl",label:"ìµœëŒ€",size:"4096px"}].map(e=>t.jsxs("button",{onClick:()=>c(e.value),className:"p-3 border rounded-lg text-center transition-colors "+(i===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[t.jsx("div",{className:"font-semibold text-sm",children:e.label}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.size})]},e.value))})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/30 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:"ğŸ·ï¸ ì›Œí„°ë§ˆí¬"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"í•˜ë‹¨ì— ì¶œì²˜ ë° ì ìˆ˜ í‘œì‹œ"})]}),t.jsx("button",{onClick:()=>g(!x),className:"relative inline-flex h-8 w-14 items-center rounded-full transition-colors "+(x?"bg-purple-500":"bg-gray-300 dark:bg-gray-600"),children:t.jsx("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform "+(x?"translate-x-7":"translate-x-1")})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ğŸ¨ í…Œë§ˆ"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"light",label:"ë°ì€ í…Œë§ˆ",emoji:"â˜€ï¸"},{value:"dark",label:"ì–´ë‘ìš´ í…Œë§ˆ",emoji:"ğŸŒ™"}].map(e=>t.jsxs("button",{onClick:()=>u(e.value),className:"p-3 border rounded-lg text-left transition-colors "+(m===e.value?"border-purple-500 bg-purple-500/10 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10"),children:[t.jsx("span",{className:"text-xl",children:e.emoji})," ",e.label]},e.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:async()=>{b(!0);try{await async function(e,r,t={}){const a=await $e(e,r,t),s={format:t.format||"png",size:t.size||"md",includeWatermark:t.includeWatermark??!0,theme:t.theme||"light",quality:t.quality||.95,filename:t.filename},l=(new Date).toISOString().replace(/[:.]/g,"-").substring(0,19),n=`${s.filename||`ê·€ë¬¸ë‘”ê°‘_${"yang"===r.yinYang?"ì–‘ë‘”":"ìŒë‘”"}${r.ju}êµ­_${l}`}.${"png"===s.format?"png":"jpg"}`,d=URL.createObjectURL(a),o=document.createElement("a");o.href=d,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>{URL.revokeObjectURL(d)},100)}(l,s,{format:d,size:i,includeWatermark:x,theme:m,quality:.95}),alert("âœ… ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!")}catch(e){alert("âŒ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{b(!1)}},disabled:h,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg font-medium hover:from-green-600 hover:to-teal-600 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("span",{children:"ğŸ’¾"}),t.jsx("span",{children:h?"ì²˜ë¦¬ ì¤‘...":"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"})]}),t.jsxs("button",{onClick:async()=>{b(!0),y(!1);try{await async function(e,r,t={}){if(!navigator.clipboard||!navigator.clipboard.write)throw new Error("Clipboard API not supported in this browser");const a=await $e(e,r,t),s=new ClipboardItem({"image/png":a});await navigator.clipboard.write([s])}(l,s,{format:"png",size:i,includeWatermark:x,theme:m}),y(!0),alert("âœ… ì´ë¯¸ì§€ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"),setTimeout(()=>y(!1),3e3)}catch(e){alert("âŒ í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")}finally{b(!1)}},disabled:h,className:"px-6 py-3 rounded-lg font-medium transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed "+(p?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gradient-to-r from-blue-400 to-purple-400 text-white hover:from-blue-500 hover:to-purple-500"),children:[t.jsx("span",{children:p?"âœ…":"ğŸ“‹"}),t.jsx("span",{children:p?"ë³µì‚¬ë¨!":h?"ì²˜ë¦¬ ì¤‘...":"í´ë¦½ë³´ë“œ ë³µì‚¬"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-3",children:"SNS ê³µìœ "}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>{alert('ğŸš§ ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.\n\nKakao SDK ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.\nëŒ€ì‹  "ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ" í›„ ì§ì ‘ ê³µìœ í•´ì£¼ì„¸ìš”.')},className:"px-4 py-3 bg-yellow-400 hover:bg-yellow-500 text-gray-900 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ğŸ’¬"}),t.jsx("span",{children:"ì¹´ì¹´ì˜¤í†¡"})]}),t.jsxs("button",{onClick:()=>{alert('ğŸš§ Facebook ê³µìœ  ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.\n\nê³µê°œ URL ìƒì„± ê¸°ëŠ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.\nëŒ€ì‹  "ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ" í›„ ì§ì ‘ ê³µìœ í•´ì£¼ì„¸ìš”.')},className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ğŸ“˜"}),t.jsx("span",{children:"Facebook"})]}),t.jsxs("button",{onClick:()=>{alert('ğŸš§ Twitter ê³µìœ  ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.\n\nê³µê°œ URL ìƒì„± ê¸°ëŠ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.\nëŒ€ì‹  "ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ" í›„ ì§ì ‘ ê³µìœ í•´ì£¼ì„¸ìš”.')},className:"px-4 py-3 bg-sky-500 hover:bg-sky-600 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ğŸ¦"}),t.jsx("span",{children:"Twitter"})]}),t.jsxs("button",{onClick:()=>{alert('ğŸš§ ê³µìœ  URL ìƒì„± ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.\n\në°±ì—”ë“œ ì„œë¹„ìŠ¤ ê°œë°œì´ í•„ìš”í•©ë‹ˆë‹¤.\nëŒ€ì‹  "ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ" í›„ ì§ì ‘ ê³µìœ í•´ì£¼ì„¸ìš”.')},className:"px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ğŸ”—"}),t.jsx("span",{children:"URL ë³µì‚¬"})]})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"ğŸ’¡ SNS ê³µìœ  ê¸°ëŠ¥ì€ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ê°œë°œ í›„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤"})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:t.jsx("button",{onClick:a,className:"w-full px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"ë‹«ê¸°"})})]})}):null};function De(){const{getAllBookmarks:e}=Ne();return r.useMemo(()=>{const r=e();if(0===r.length)return{totalChecks:0,averageScore:0,highestScore:0,lowestScore:0,mostFrequentContext:"business",bestTimeOfDay:"00:00-00:00",favoriteDirection:"N",bestPalace:"center",weeklyTrend:[],monthlyPatterns:[],hourlyDistribution:[],directionStats:[],contextStats:[]};const t=r.map(e=>e.chart.overallFortune.score),a=r.length,s=Math.round(t.reduce((e,r)=>e+r,0)/t.length),l=Math.max(...t),n=Math.min(...t),d={};r.forEach(e=>{d[e.context]=(d[e.context]||0)+1});const o=Object.entries(d).reduce((e,r)=>r[1]>e[1]?r:e)[0],i={};r.forEach(e=>{const r=new Date(e.dateTime).getHours();i[r]||(i[r]={sum:0,count:0}),i[r].sum+=e.chart.overallFortune.score,i[r].count+=1});const c=Object.entries(i).map(([e,r])=>({hour:parseInt(e),avgScore:Math.round(r.sum/r.count),count:r.count})).sort((e,r)=>e.hour-r.hour),x=c.reduce((e,r)=>r.avgScore>e.avgScore?r:e),g=`${String(x.hour).padStart(2,"0")}:00-${String((x.hour+1)%24).padStart(2,"0")}:00`,m={};r.forEach(e=>{(e.chart.overallFortune.bestPalaces||[]).forEach(r=>{const t=e.chart.palaces[r].direction;m[t]||(m[t]={sum:0,count:0,palaces:{}}),m[t].sum+=e.chart.palaces[r].score||0,m[t].count+=1,m[t].palaces[r]=(m[t].palaces[r]||0)+1})});const u=Object.entries(m).map(([e,r])=>{const t=Math.round(r.sum/r.count),a=Object.entries(r.palaces).reduce((e,r)=>r[1]>e[1]?r:e)[0];return{direction:e,avgScore:t,count:r.count,bestPalace:a}}),h=u.length>0?u.reduce((e,r)=>r.avgScore>e.avgScore?r:e).direction:"N",b=u.length>0?u.reduce((e,r)=>r.avgScore>e.avgScore?r:e).bestPalace:"center",p={};r.forEach(e=>{const r=function(e){const r=e.getFullYear(),t=new Date(r,0,1),a=(e.getTime()-t.getTime())/864e5,s=Math.ceil((a+t.getDay()+1)/7);return`${r}-W${String(s).padStart(2,"0")}`}(new Date(e.dateTime));p[r]||(p[r]={sum:0,count:0}),p[r].sum+=e.chart.overallFortune.score,p[r].count+=1});const y=Object.entries(p).map(([e,r])=>({week:e,avgScore:Math.round(r.sum/r.count),count:r.count})).sort((e,r)=>e.week.localeCompare(r.week)).slice(-12),j={};r.forEach(e=>{const r=function(e){const r=e.getFullYear(),t=e.getMonth()+1;return`${r}-${String(t).padStart(2,"0")}`}(new Date(e.dateTime));var t,a;j[r]||(j[r]={scores:[],levels:{excellent:0,good:0,neutral:0,bad:0,terrible:0}}),j[r].scores.push(e.chart.overallFortune.score),t=j[r].levels,"excellent"===(a=e.chart.overallFortune.level)?t.excellent++:"good"===a?t.good++:"neutral"===a?t.neutral++:"bad"===a?t.bad++:"terrible"===a&&t.terrible++});const f=Object.entries(j).map(([e,r])=>({month:e,excellentDays:r.levels.excellent,goodDays:r.levels.good,neutralDays:r.levels.neutral,badDays:r.levels.bad,terribleDays:r.levels.terrible,avgScore:Math.round(r.scores.reduce((e,r)=>e+r,0)/r.scores.length)})).sort((e,r)=>e.month.localeCompare(r.month)).slice(-12),k={};r.forEach(e=>{const r=e.context;k[r]||(k[r]={sum:0,count:0,successCount:0}),k[r].sum+=e.chart.overallFortune.score,k[r].count+=1,e.chart.overallFortune.score>=60&&(k[r].successCount+=1)});return{totalChecks:a,averageScore:s,highestScore:l,lowestScore:n,mostFrequentContext:o,bestTimeOfDay:g,favoriteDirection:h,bestPalace:b,weeklyTrend:y,monthlyPatterns:f,hourlyDistribution:c,directionStats:u,contextStats:Object.entries(k).map(([e,r])=>({context:e,avgScore:Math.round(r.sum/r.count),count:r.count,successRate:Math.round(r.successCount/r.count*100)}))}},[e])}function Fe(e){if(e.length<10)return"stable";const r=[...e].sort((e,r)=>new Date(e.dateTime).getTime()-new Date(r.dateTime).getTime()),t=Math.floor(e.length/3),a=r.slice(-t),s=r.slice(0,t),l=a.reduce((e,r)=>e+r.chart.overallFortune.score,0)/a.length-s.reduce((e,r)=>e+r.chart.overallFortune.score,0)/s.length;return l>5?"improving":l<-5?"declining":"stable"}function Me(e,r){const t=[],a=r.hourlyDistribution.reduce((e,r)=>r.avgScore>e.avgScore?r:e);a.count>=3&&t.push({id:"time-best",type:"insight",title:"ìµœì  ì‹œê°„ëŒ€ ë°œê²¬",description:`${String(a.hour).padStart(2,"0")}:00-${String((a.hour+1)%24).padStart(2,"0")}:00 ì‹œê°„ëŒ€ì—ì„œ í‰ê·  ${a.avgScore}ì ìœ¼ë¡œ ê°€ì¥ ë†’ì€ ìš´ì„¸ë¥¼ ë³´ì…ë‹ˆë‹¤. ì´ ì‹œê°„ëŒ€ì— ì¤‘ìš”í•œ ì¼ì •ì„ ê³„íší•˜ì„¸ìš”.`,confidence:Math.min(95,60+5*a.count),importance:"high",actionable:!0,relatedData:{timeRange:r.bestTimeOfDay,score:a.avgScore}});const s=r.hourlyDistribution.reduce((e,r)=>r.avgScore<e.avgScore?r:e);return s.count>=3&&s.avgScore<40&&t.push({id:"time-worst",type:"warning",title:"ì£¼ì˜ í•„ìš” ì‹œê°„ëŒ€",description:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00 ì‹œê°„ëŒ€ëŠ” í‰ê·  ${s.avgScore}ì ìœ¼ë¡œ ì €ì¡°í•©ë‹ˆë‹¤. ì´ ì‹œê°„ëŒ€ëŠ” ì¤‘ìš”í•œ ê²°ì •ì„ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.`,confidence:Math.min(90,55+5*s.count),importance:"medium",actionable:!0,relatedData:{timeRange:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00`,score:s.avgScore}}),t}function Te(e){const r=[],t=e.contextStats.reduce((e,r)=>r.successRate>e.successRate?r:e);if(t.count>=5&&t.successRate>=70){const e={business:"ì‚¬ì—…/íˆ¬ì",meeting:"íšŒì˜/í˜‘ìƒ",travel:"ì—¬í–‰/ì´ë™",study:"í•™ìŠµ/ì‹œí—˜",health:"ê±´ê°•/ì¹˜ë£Œ",relationship:"ì¸ê°„ê´€ê³„",decision:"ì¤‘ìš”ê²°ì •",lawsuit:"ì†Œì†¡/ë²•ë¥ "};r.push({id:"context-best",type:"insight",title:"ê°•ì  ì˜ì—­ ë°œê²¬",description:`${e[t.context]} ë¶„ì•¼ì—ì„œ ${t.successRate}%ì˜ ë†’ì€ ì„±ê³µë¥ ì„ ë³´ì…ë‹ˆë‹¤. ì´ ë¶„ì•¼ì— ë” ì§‘ì¤‘í•˜ì‹œëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.`,confidence:Math.min(90,50+3*t.count),importance:"high",actionable:!0,relatedData:{context:t.context,score:t.avgScore}})}const a=e.contextStats.reduce((e,r)=>r.successRate<e.successRate?r:e);if(a.count>=5&&a.successRate<=40){const e={business:"ì‚¬ì—…/íˆ¬ì",meeting:"íšŒì˜/í˜‘ìƒ",travel:"ì—¬í–‰/ì´ë™",study:"í•™ìŠµ/ì‹œí—˜",health:"ê±´ê°•/ì¹˜ë£Œ",relationship:"ì¸ê°„ê´€ê³„",decision:"ì¤‘ìš”ê²°ì •",lawsuit:"ì†Œì†¡/ë²•ë¥ "};r.push({id:"context-worst",type:"recommendation",title:"ê°œì„  í•„ìš” ì˜ì—­",description:`${e[a.context]} ë¶„ì•¼ëŠ” ${a.successRate}%ì˜ ë‚®ì€ ì„±ê³µë¥ ì„ ë³´ì…ë‹ˆë‹¤. ì´ ë¶„ì•¼ì˜ í™œë™ì€ ë” ì‹ ì¤‘í•˜ê²Œ ì ‘ê·¼í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì‹œê°„ëŒ€ë¥¼ ì„ íƒí•˜ì„¸ìš”.`,confidence:Math.min(85,45+3*a.count),importance:"medium",actionable:!0,relatedData:{context:a.context,score:a.avgScore}})}return r}function Re(e){const r=[];if(0===e.directionStats.length)return r;const t=e.directionStats.reduce((e,r)=>r.avgScore>e.avgScore?r:e);if(t.count>=5){const e={N:"ë¶ìª½",NE:"ë¶ë™ìª½",E:"ë™ìª½",SE:"ë‚¨ë™ìª½",S:"ë‚¨ìª½",SW:"ë‚¨ì„œìª½",W:"ì„œìª½",NW:"ë¶ì„œìª½",C:"ì¤‘ì•™"};r.push({id:"direction-best",type:"insight",title:"ê¸¸í•œ ë°©í–¥ ë°œê²¬",description:`${e[t.direction]} ë°©í–¥ì´ í‰ê·  ${t.avgScore}ì ìœ¼ë¡œ ê°€ì¥ ê¸¸í•œ ë°©í–¥ì…ë‹ˆë‹¤. ì¤‘ìš”í•œ í™œë™ ì‹œ ì´ ë°©í–¥ì„ ì„ íƒí•˜ì„¸ìš”.`,confidence:Math.min(85,50+2*t.count),importance:"medium",actionable:!0,relatedData:{direction:t.direction,score:t.avgScore}})}return r}function Pe(e){const r=[];if(e.monthlyPatterns.length<3)return r;const t=e.monthlyPatterns.slice(-3),a=t.reduce((e,r)=>e+r.avgScore,0)/t.length,s=e.monthlyPatterns.reduce((e,r)=>e+r.avgScore,0)/e.monthlyPatterns.length,l=a-s;return l>10?r.push({id:"monthly-improving",type:"insight",title:"ìš´ì„¸ ìƒìŠ¹ ì¶”ì„¸",description:`ìµœê·¼ 3ê°œì›” í‰ê· (${Math.round(a)}ì )ì´ ì „ì²´ í‰ê· (${Math.round(s)}ì )ë³´ë‹¤ ë†’ìŠµë‹ˆë‹¤. ê¸ì •ì ì¸ íë¦„ì´ ì§€ì†ë˜ê³  ìˆìŠµë‹ˆë‹¤.`,confidence:80,importance:"high",actionable:!1}):l<-10&&r.push({id:"monthly-declining",type:"warning",title:"ìš´ì„¸ í•˜ë½ ì£¼ì˜",description:`ìµœê·¼ 3ê°œì›” í‰ê· (${Math.round(a)}ì )ì´ ì „ì²´ í‰ê· (${Math.round(s)}ì )ë³´ë‹¤ ë‚®ìŠµë‹ˆë‹¤. ë” ì‹ ì¤‘í•œ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.`,confidence:75,importance:"medium",actionable:!1}),r}function Le(e,r){const t=function(e){const r=e.length,t=new Set(e.map(e=>new Date(e.dateTime).toDateString())).size;return r>=90&&t>=30?{quality:"excellent",message:"ì¶©ë¶„í•œ ë°ì´í„°ë¡œ ë†’ì€ ì‹ ë¢°ë„ì˜ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."}:r>=60&&t>=20?{quality:"good",message:"ì–‘í˜¸í•œ ë°ì´í„°ë¡œ ì˜ë¯¸ìˆëŠ” íŒ¨í„´ì„ ë„ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}:r>=30&&t>=10?{quality:"fair",message:"ê¸°ë³¸ì ì¸ íŒ¨í„´ ë¶„ì„ì´ ê°€ëŠ¥í•˜ë‚˜ ë” ë§ì€ ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤."}:{quality:"poor",message:"ì‹ ë¢°ë„ ë†’ì€ ë¶„ì„ì„ ìœ„í•´ 30ì¼ ì´ìƒì˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•´ì£¼ì„¸ìš”."}}(e),a=Fe(e),s=[...Me(0,r),...Te(r),...Re(r),...Pe(r)];e.length<30&&s.unshift({id:"data-insufficient",type:"warning",title:"ë°ì´í„° ë¶€ì¡±",description:t.message,confidence:100,importance:"high",actionable:!0});const l=function(e,r){const t=[];if(e.length<30)return t;const a=new Date,s=r.hourlyDistribution.reduce((e,r)=>r.avgScore>e.avgScore?r:e),l=r.contextStats.reduce((e,r)=>r.avgScore>e.avgScore?r:e);for(let n=1;n<=7;n++){const d=new Date(a);d.setDate(a.getDate()+n);const o=d.getDay(),i=e.filter(e=>new Date(e.dateTime).getDay()===o);let c=r.averageScore,x=50;const g=[];if(i.length>=3){const e=i.reduce((e,r)=>e+r.chart.overallFortune.score,0)/i.length;c=Math.round((c+e)/2),x+=15,g.push(`ê°™ì€ ìš”ì¼ í‰ê·  ${Math.round(e)}ì  ê¸°ë°˜`)}s.count>=5&&(c=Math.round((c+s.avgScore)/2),x+=10,g.push("ìµœì  ì‹œê°„ëŒ€ í™œìš©"));const m=Fe(e);"improving"===m?(c=Math.min(100,c+5),x+=5,g.push("ìƒìŠ¹ ì¶”ì„¸ ë°˜ì˜")):"declining"===m&&(c=Math.max(0,c-5),x+=5,g.push("í•˜ë½ ì¶”ì„¸ ë°˜ì˜")),t.push({date:d,timeRange:`${String(s.hour).padStart(2,"0")}:00-${String((s.hour+1)%24).padStart(2,"0")}:00`,predictedScore:c,confidence:Math.min(85,x),reasons:g,suggestedContext:l.context,suggestedDirection:r.favoriteDirection})}return t}(e,r),n=[],d=[];r.hourlyDistribution.forEach(e=>{const r=`${String(e.hour).padStart(2,"0")}:00-${String((e.hour+1)%24).padStart(2,"0")}:00`;e.avgScore>=70&&e.count>=3?n.push(r):e.avgScore<=40&&e.count>=3&&d.push(r)});const o=r.contextStats.filter(e=>e.successRate>=60).map(e=>e.context),i=r.directionStats.filter(e=>e.avgScore>=r.averageScore).map(e=>e.direction);return{patterns:s,predictions:l,summary:{overallTrend:a,trendConfidence:e.length>=30?75:50,dataQuality:t.quality,dataPoints:e.length,analysisDate:new Date},recommendations:{bestTimes:n,avoidTimes:d,preferredContexts:o,favoriteDirections:i}}}function Ee({isOpen:d,onClose:o}){const i=De(),{getAllBookmarks:c}=Ne(),x=c(),[g,m]=r.useState("overview"),u=r.useMemo(()=>Le(x,i),[x,i]),h=r.useMemo(()=>function(e){const r={high:3,medium:2,low:1};return[...e].sort((e,t)=>{const a=r[t.importance]-r[e.importance];return 0!==a?a:t.confidence-e.confidence})}(u.patterns),[u.patterns]);if(r.useMemo(()=>u.patterns.filter(e=>e.actionable),[u.patterns]),!d)return null;e.useEffect(()=>{const e=e=>{"Escape"===e.key&&o()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]);const b=document.documentElement.classList.contains("dark"),p=b?"#e5e7eb":"#374151",y=b?"#374151":"#e5e7eb",j={labels:i.monthlyPatterns.map(e=>e.month),datasets:[{label:"í‰ê·  ì ìˆ˜",data:i.monthlyPatterns.map(e=>e.avgScore),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",fill:!0,tension:.4}]},f={labels:i.hourlyDistribution.map(e=>`${String(e.hour).padStart(2,"0")}:00`),datasets:[{label:"í‰ê·  ì ìˆ˜",data:i.hourlyDistribution.map(e=>e.avgScore),backgroundColor:i.hourlyDistribution.map(e=>e.avgScore>=70?"rgba(34, 197, 94, 0.8)":e.avgScore>=50?"rgba(59, 130, 246, 0.8)":e.avgScore>=30?"rgba(251, 191, 36, 0.8)":"rgba(239, 68, 68, 0.8)")}]},k={labels:i.directionStats.map(e=>e.direction),datasets:[{label:"ë°©í–¥ë³„ í‰ê·  ì ìˆ˜",data:i.directionStats.map(e=>e.avgScore),backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgb(147, 51, 234)",borderWidth:2}]},v={business:"ì‚¬ì—…/íˆ¬ì",meeting:"íšŒì˜/í˜‘ìƒ",travel:"ì—¬í–‰/ì´ë™",study:"í•™ìŠµ/ì‹œí—˜",health:"ê±´ê°•/ì¹˜ë£Œ",relationship:"ì¸ê°„ê´€ê³„",decision:"ì¤‘ìš”ê²°ì •",lawsuit:"ì†Œì†¡/ë²•ë¥ "},N={labels:i.contextStats.map(e=>v[e.context]),datasets:[{label:"í‰ê·  ì ìˆ˜",data:i.contextStats.map(e=>e.avgScore),backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(251, 191, 36, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(147, 51, 234, 0.8)","rgba(236, 72, 153, 0.8)","rgba(20, 184, 166, 0.8)","rgba(249, 115, 22, 0.8)"]}]},w={excellent:x.filter(e=>"excellent"===e.chart.overallFortune.level).length,good:x.filter(e=>"good"===e.chart.overallFortune.level).length,neutral:x.filter(e=>"neutral"===e.chart.overallFortune.level).length,bad:x.filter(e=>"bad"===e.chart.overallFortune.level).length,terrible:x.filter(e=>"terrible"===e.chart.overallFortune.level).length},S={labels:["ëŒ€ê¸¸","ê¸¸","í‰","í‰","ëŒ€í‰"],datasets:[{data:[w.excellent,w.good,w.neutral,w.bad,w.terrible],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)","rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)"],borderWidth:0}]},$={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:p}}},scales:{x:{ticks:{color:p},grid:{color:y}},y:{ticks:{color:p},grid:{color:y},min:0,max:100}}},C={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:p}}},scales:{r:{ticks:{color:p},grid:{color:y},min:0,max:100}}},D={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:p}}}},F=e=>{switch(e.type){case"insight":return"ğŸ’¡";case"recommendation":return"âœ…";case"prediction":return"ğŸ”®";case"warning":return"âš ï¸"}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",onClick:o,children:t.jsxs("div",{className:"max-w-7xl w-full bg-white dark:bg-gray-800 rounded-xl shadow-2xl my-8",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"ğŸ“Š ê·€ë¬¸ë‘”ê°‘ í†µê³„ ëŒ€ì‹œë³´ë“œ"}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ì´ ",i.totalChecks,"ê°œì˜ ë°ì´í„° ë¶„ì„ | í‰ê·  ì ìˆ˜: ",i.averageScore,"ì  |"," ","ë°ì´í„° í’ˆì§ˆ: ","excellent"===u.summary.dataQuality?"ìš°ìˆ˜":"good"===u.summary.dataQuality?"ì–‘í˜¸":"fair"===u.summary.dataQuality?"ë³´í†µ":"ë¶€ì¡±"]})]}),t.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl font-bold",children:"âœ•"})]}),t.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 px-6",children:[{id:"overview",label:"ğŸ“‹ ê°œìš”",icon:"ğŸ“‹"},{id:"patterns",label:"ğŸ” íŒ¨í„´ ë¶„ì„",icon:"ğŸ”"},{id:"predictions",label:"ğŸ”® ì˜ˆì¸¡",icon:"ğŸ”®"},{id:"charts",label:"ğŸ“Š ì°¨íŠ¸",icon:"ğŸ“Š"}].map(e=>t.jsx("button",{onClick:()=>m(e.id),className:"px-6 py-3 font-medium transition-colors border-b-2 "+(g===e.id?"border-purple-600 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:e.label},e.id))}),t.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:["overview"===g&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700",children:[t.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 mb-1",children:"ì´ ì¡°íšŒìˆ˜"}),t.jsx("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:i.totalChecks})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:[t.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"í‰ê·  ì ìˆ˜"}),t.jsx("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:i.averageScore})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-lg border border-green-200 dark:border-green-700",children:[t.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 mb-1",children:"ìµœê³  ì ìˆ˜"}),t.jsx("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:i.highestScore})]}),t.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[t.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 mb-1",children:"ìµœì € ì ìˆ˜"}),t.jsx("div",{className:"text-3xl font-bold text-yellow-700 dark:text-yellow-300",children:i.lowestScore})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsxs("h3",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[(()=>{switch(u.summary.overallTrend){case"improving":return"ğŸ“ˆ";case"stable":return"â¡ï¸";case"declining":return"ğŸ“‰"}})()," ì „ë°˜ì  íŠ¸ë Œë“œ"]}),t.jsx("div",{className:`text-2xl font-bold ${(()=>{switch(u.summary.overallTrend){case"improving":return"text-green-600 dark:text-green-400";case"stable":return"text-blue-600 dark:text-blue-400";case"declining":return"text-red-600 dark:text-red-400"}})()}`,children:(()=>{switch(u.summary.overallTrend){case"improving":return"ìƒìŠ¹ ì¶”ì„¸";case"stable":return"ì•ˆì •ì ";case"declining":return"í•˜ë½ ì¶”ì„¸"}})()}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:["ì‹ ë¢°ë„: ",u.summary.trendConfidence,"%"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-100",children:"â­ ì£¼ìš” ì¸ì‚¬ì´íŠ¸"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ìµœì  ì‹œê°„ëŒ€:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:i.bestTimeOfDay})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ì„ í˜¸ ë°©í–¥:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:i.favoriteDirection})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ì£¼ìš” ìš©ë„:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:v[i.mostFrequentContext]})]})]})]})]}),u.recommendations.bestTimes.length>0&&t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border border-green-200 dark:border-green-700",children:[t.jsx("h3",{className:"text-lg font-bold mb-3 text-green-800 dark:text-green-200",children:"âœ… ì¶”ì²œ ì‹œê°„ëŒ€"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:u.recommendations.bestTimes.map((e,r)=>t.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 rounded-full text-sm font-medium",children:e},r))})]}),u.recommendations.avoidTimes.length>0&&t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-5 rounded-lg border border-red-200 dark:border-red-700",children:[t.jsx("h3",{className:"text-lg font-bold mb-3 text-red-800 dark:text-red-200",children:"âš ï¸ ì£¼ì˜ í•„ìš” ì‹œê°„ëŒ€"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:u.recommendations.avoidTimes.map((e,r)=>t.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 rounded-full text-sm font-medium",children:e},r))})]})]}),"patterns"===g&&t.jsx("div",{className:"space-y-4",children:0===h.length?t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-6xl mb-4",children:"ğŸ“Š"}),t.jsx("p",{children:"ë¶„ì„í•  íŒ¨í„´ì´ ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."}),t.jsx("p",{className:"text-sm mt-2",children:"30ì¼ ì´ìƒì˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ë©´ ë” ì •í™•í•œ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."})]}):h.map(e=>{const r=(e=>{switch(e.type){case"insight":return"blue";case"recommendation":return"green";case"prediction":return"purple";case"warning":return"yellow"}})(e);return t.jsx("div",{className:`p-5 rounded-lg border ${{blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700",green:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700",purple:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-700",yellow:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"}[r]}`,children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:F(e)}),t.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.title}),e.actionable&&t.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 rounded text-xs font-medium",children:"ì‹¤í–‰ ê°€ëŠ¥"})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:e.description}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ì‹ ë¢°ë„:"}),t.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:[e.confidence,"%"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ì¤‘ìš”ë„:"}),t.jsx("span",{className:"font-semibold "+("high"===e.importance?"text-red-600 dark:text-red-400":"medium"===e.importance?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400"),children:"high"===e.importance?"ë†’ìŒ":"medium"===e.importance?"ì¤‘ê°„":"ë‚®ìŒ"})]})]})]})})},e.id)})}),"predictions"===g&&t.jsx("div",{className:"space-y-4",children:0===u.predictions.length?t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-6xl mb-4",children:"ğŸ”®"}),t.jsx("p",{children:"ì˜ˆì¸¡ì„ ìƒì„±í•˜ê¸°ì— ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."}),t.jsx("p",{className:"text-sm mt-2",children:"30ì¼ ì´ìƒì˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ë©´ ë¯¸ë˜ ìš´ì„¸ë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-5 rounded-lg border border-purple-200 dark:border-purple-700 mb-6",children:[t.jsx("h3",{className:"text-lg font-bold mb-2 text-purple-800 dark:text-purple-200",children:"ğŸ”® ë‹¤ìŒ 7ì¼ê°„ ìµœì  ì‹œê°„ëŒ€ ì˜ˆì¸¡"}),t.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"ê³¼ê±° íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ AIê°€ ì˜ˆì¸¡í•œ ê²°ê³¼ì…ë‹ˆë‹¤. ì‹¤ì œ ìš´ì„¸ëŠ” ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),u.predictions.map((e,r)=>t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.date.toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"})}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.timeRange})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-3xl font-bold "+(e.predictedScore>=70?"text-green-600 dark:text-green-400":e.predictedScore>=50?"text-blue-600 dark:text-blue-400":e.predictedScore>=30?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:e.predictedScore}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ì‹ ë¢°ë„: ",e.confidence,"%"]})]})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ì¶”ì²œ ìš©ë„:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:v[e.suggestedContext]})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ì¶”ì²œ ë°©í–¥:"})," ",t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:e.suggestedDirection})]})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"ì˜ˆì¸¡ ê·¼ê±°:"}),t.jsx("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:e.reasons.map((e,r)=>t.jsxs("li",{children:["â€¢ ",e]},r))})]})]},r))]})}),"charts"===g&&t.jsx("div",{className:"space-y-6",children:0===i.totalChecks?t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-6xl mb-4",children:"ğŸ“Š"}),t.jsx("p",{children:"í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."}),t.jsx("p",{className:"text-sm mt-2",children:"ê·€ë¬¸ë‘”ê°‘ ë¶„ì„ì„ ë¶ë§ˆí¬í•˜ë©´ í†µê³„ ì°¨íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}):t.jsxs(t.Fragment,{children:[i.monthlyPatterns.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"ğŸ“ˆ ì›”ê°„ í‰ê·  ì ìˆ˜ ì¶”ì´"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(a,{data:j,options:$})})]}),i.hourlyDistribution.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"â° ì‹œê°„ëŒ€ë³„ í‰ê·  ì ìˆ˜"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(s,{data:f,options:$})})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.directionStats.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"ğŸ§­ ë°©í–¥ë³„ í‰ê·  ì ìˆ˜"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(l,{data:k,options:C})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"ğŸ¯ ìš´ì„¸ ë ˆë²¨ ë¶„í¬"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(n,{data:S,options:D})})]})]}),i.contextStats.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"ğŸ“‚ ìš©ë„ë³„ í‰ê·  ì ìˆ˜"}),t.jsx("div",{style:{height:"300px"},children:t.jsx(s,{data:N,options:$})})]})]})})]}),t.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ë§ˆì§€ë§‰ ë¶„ì„: ",u.summary.analysisDate.toLocaleString("ko-KR")]}),t.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"ë‹«ê¸°"})]})]})})}function Ie(){var e;const[a,s]=r.useState(null),[l,n]=r.useState(null),[d,o]=r.useState(new Date),[i,c]=r.useState(!0),[g,m]=r.useState(!1),[u,h]=r.useState(!0),[b,p]=r.useState(!1),[y,j]=r.useState(!1),[v,N]=r.useState(!1),[w,S]=r.useState(null),[$,C]=r.useState(null),[D,F]=r.useState(!1),[M,T]=r.useState("general"),[R,P]=r.useState(!1),[L,E]=r.useState(!1),[I,A]=r.useState(!0),[O,B]=r.useState(null),[G,H]=r.useState(null),[K,Z]=r.useState(!1),[U,X]=r.useState(!1),[V,J]=r.useState(!1),[re,ae]=r.useState([]),[se,le]=r.useState(!1);r.useEffect(()=>{F((null==w?void 0:w.id)!==(null==$?void 0:$.id))},[w,$]),r.useEffect(()=>{try{c(!0);const e=$?{year:parseInt($.birth_date.split("-")[0]),month:parseInt($.birth_date.split("-")[1]),day:parseInt($.birth_date.split("-")[2]),hour:$.birth_time?parseInt($.birth_time.split(":")[0]):void 0}:void 0,r=x({dateTime:d,birthInfo:e});if(a){let e=null,t="";a.solarTerm.name!==r.solarTerm.name?(e="solarTerm",t=`ğŸŒ¸ ì ˆê¸°ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤: ${a.solarTerm.name} â†’ ${r.solarTerm.name}`):a.ju!==r.ju||a.yinYang!==r.yinYang?(e="solarTerm",t=`âš¡ êµ­(å±€)ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤: ${"yang"===a.yinYang?"ì–‘ë‘”":"ìŒë‘”"} ${a.ju}êµ­ â†’ ${"yang"===r.yinYang?"ì–‘ë‘”":"ìŒë‘”"} ${r.ju}êµ­`):a.dayGan!==r.dayGan?(e="day",t=`ğŸ“… ì¼ê°„(æ—¥å¹²)ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤: ${a.dayGan} â†’ ${r.dayGan}`):a.hourGanZhi.gan===r.hourGanZhi.gan&&a.hourGanZhi.zhi===r.hourGanZhi.zhi||(e="hour",t=`â° ì‹œê°„ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤: ${a.hourGanZhi.gan}${a.hourGanZhi.zhi} â†’ ${r.hourGanZhi.gan}${r.hourGanZhi.zhi}`),e&&t&&(H({message:t,type:"solarTerm"===e?"warning":"info"}),ae(t=>[{timestamp:new Date,ju:r.ju,yinYang:"yang"===r.yinYang?"ì–‘ë‘”":"ìŒë‘”",solarTerm:r.solarTerm.name,type:e},...t.slice(0,9)]))}s(r)}catch(e){}finally{c(!1)}},[d,$]),r.useEffect(()=>{const e=()=>{const e=new Date,r=e.getHours();e.getMinutes(),e.getSeconds();const t=r%2==0?r+2:r+1,a=new Date(e);a.setHours(t,0,0,0);const s=new Date(e);s.setDate(s.getDate()+1),s.setHours(0,0,0,0);const l=a.getTime()-e.getTime(),n=Math.floor(l/36e5),d=Math.floor(l%36e5/6e4),o=Math.floor(l%6e4/1e3);B({hours:n,minutes:d,seconds:o,type:"hour"})};e();const r=setInterval(e,1e3);return()=>clearInterval(r)},[]),r.useEffect(()=>{if(!I)return;const e=setInterval(()=>{const e=new Date,r=e.getHours();0===e.getMinutes()&&r%2==1&&o(new Date)},6e4);return()=>clearInterval(e)},[I]);const ne=e=>{n(e)};return i||!a?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"êµ­(å±€) ê³„ì‚° ì¤‘..."})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 p-4 md:p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("header",{className:"text-center mb-8",children:[t.jsxs("div",{className:"flex justify-center items-center gap-4 mb-2",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 dark:from-purple-400 dark:via-pink-400 dark:to-blue-400",children:"âš¡ ê·€ë¬¸ë‘”ê°‘"}),t.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ“–"}),t.jsx("span",{children:"ì´ˆë³´ì ê°€ì´ë“œ"})]}),t.jsxs("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm font-medium hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition-colors flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ””"}),t.jsx("span",{children:"ì•Œë¦¼ ì„¤ì •"})]}),t.jsxs("button",{onClick:()=>J(!0),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-full text-sm font-medium hover:from-cyan-600 hover:to-blue-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ“Š"}),t.jsx("span",{children:"í†µê³„ ë¶„ì„"})]})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg mb-2",children:"å¥‡é–€éç”² - ì‹œê°„ê³¼ ë°©ìœ„ì˜ ê¸¸í‰ íŒë‹¨"}),t.jsxs("div",{className:"flex justify-center items-center gap-3 mb-4 flex-wrap",children:[t.jsx("button",{onClick:()=>A(!I),className:"px-3 py-1 rounded-full text-sm font-medium transition-all "+(I?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:I?"ğŸ”„ ìë™ ê°±ì‹  ON":"â¸ï¸ ìë™ ê°±ì‹  OFF"}),O&&t.jsxs("div",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:["â±ï¸ ë‹¤ìŒ ë³€ê²½ê¹Œì§€: ",O.hours>0&&`${O.hours}ì‹œê°„ `,O.minutes,"ë¶„ ",O.seconds,"ì´ˆ"]}),re.length>0&&t.jsxs("button",{onClick:()=>le(!se),className:"px-3 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors flex items-center gap-1",children:["ğŸ“Š ë³€ê²½ íˆìŠ¤í† ë¦¬ (",re.length,")"]})]}),t.jsxs("div",{className:"max-w-3xl mx-auto mb-6",children:[t.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ğŸ¯ ëª©ì :"}),t.jsx("select",{value:M,onChange:e=>T(e.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border-2 border-purple-300 dark:border-purple-700 rounded-lg text-gray-900 dark:text-gray-100 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all cursor-pointer",children:xe().map(e=>t.jsxs("option",{value:e.value,children:[e.icon," ",e.label]},e.value))}),t.jsxs("button",{onClick:()=>P(!R),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ¤–"}),t.jsx("span",{children:"AIì—ê²Œ ì§ˆë¬¸í•˜ê¸°"})]}),t.jsxs("button",{onClick:async()=>{if(a){E(!0);try{const e=$?`${$.name}(${$.birth_date})`:"ì¼ë°˜",r=d.toLocaleString("ko-KR");await k("qimen-content","âš¡ ê·€ë¬¸ë‘”ê°‘ ë¶„ì„ ê²°ê³¼",`${"yang"===a.yinYang?"ì–‘ë‘”":"ìŒë‘”"} ${a.ju}êµ­ | ${a.solarTerm.name} | ${r}`,`ê·€ë¬¸ë‘”ê°‘_${e}`),alert("PDF ì¶œë ¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(e){alert("PDF ì¶œë ¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{E(!1)}}},disabled:L,className:"px-4 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg font-medium hover:from-green-600 hover:to-teal-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("span",{children:"ğŸ“„"}),t.jsx("span",{children:L?"PDF ìƒì„± ì¤‘...":"PDF ì¶œë ¥"})]}),t.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ“Š"}),t.jsx("span",{children:"ì‹œê°„ëŒ€ ë¹„êµ"})]}),t.jsx(we,{chart:a,dateTime:d,customerName:null==$?void 0:$.name,customerBirthDate:null==$?void 0:$.birth_date,context:M}),t.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg font-medium hover:from-pink-600 hover:to-rose-600 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[t.jsx("span",{children:"ğŸ“¤"}),t.jsx("span",{children:"ê³µìœ í•˜ê¸°"})]})]}),"general"!==M&&t.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 mb-4",children:["ğŸ’¡ ",t.jsx("strong",{children:null==(e=xe().find(e=>e.value===M))?void 0:e.description}),"ì— íŠ¹í™”ëœ í•´ì„ì„ ì œê³µí•©ë‹ˆë‹¤"]})]}),t.jsxs("div",{className:"max-w-2xl mx-auto mb-6",children:[t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[t.jsx(f,{selectedCustomer:w,onSelect:S,showAddButton:!0}),w&&t.jsx("button",{onClick:()=>{C(w),F(!1)},disabled:!D,className:"px-6 py-2 rounded-lg font-medium transition-all "+(D?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl animate-pulse":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-500 cursor-not-allowed"),children:D?"âœ¨ ì ìš©í•˜ê¸°":"âœ“ ì ìš©ë¨"})]}),$&&t.jsxs("div",{className:"mt-2 text-sm text-center text-gray-600 dark:text-gray-400",children:["ğŸ’¡ í˜„ì¬ ",t.jsx("strong",{children:$.name}),"ë‹˜(",$.birth_date,") ê¸°ì¤€ìœ¼ë¡œ ë§ì¶¤ í•´ì„ ì¤‘"]}),w&&D&&t.jsxs("div",{className:"mt-2 text-sm text-center text-orange-600 dark:text-orange-400 font-medium",children:["âš ï¸ ",t.jsx("strong",{children:w.name}),'ë‹˜ìœ¼ë¡œ ë³€ê²½í•˜ë ¤ë©´ "ì ìš©í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”']})]}),t.jsxs("div",{className:"flex justify-center gap-4",children:[t.jsx("button",{onClick:()=>h(!u),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:u?"ìƒì„¸ ëª¨ë“œë¡œ ë³´ê¸° â–¼":"ê°„ë‹¨ ìš”ì•½ ë³´ê¸° â–²"}),t.jsx("button",{onClick:()=>p(!b),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(b?"bg-gradient-to-r from-green-500 to-blue-500 text-white shadow-lg":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600"),children:b?"ğŸ¨ íˆíŠ¸ë§µ ëª¨ë“œ":"ğŸ“Š ì°¨íŠ¸ ëª¨ë“œ"}),t.jsx("button",{onClick:()=>j(!y),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(y?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600"),children:y?"ğŸ² 3D ëª¨ë“œ":"ğŸ¯ 2D ëª¨ë“œ"})]}),t.jsxs("div",{className:"mt-4 flex justify-center gap-4 flex-wrap",children:[t.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"êµ­(å±€)"}),t.jsxs("span",{className:"ml-2 font-bold text-purple-600 dark:text-purple-400",children:["yang"===a.yinYang?"ì–‘ë‘”":"ìŒë‘”"," ",a.ju,"êµ­"]})]}),t.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ì ˆê¸°"}),t.jsx("span",{className:"ml-2 font-bold text-blue-600 dark:text-blue-400",children:a.solarTerm.name})]}),t.jsxs("div",{className:"px-4 py-2 bg-white/80 dark:bg-gray-800/80 rounded-lg backdrop-blur-sm shadow-md",children:[t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ì‹œê°„ ê°„ì§€"}),t.jsxs("span",{className:"ml-2 font-bold text-pink-600 dark:text-pink-400",children:[a.hourGanZhi.gan,a.hourGanZhi.zhi]})]})]})]}),t.jsxs("div",{id:"qimen-content",className:"space-y-6",style:{WebkitPrintColorAdjust:"exact",printColorAdjust:"exact"},children:[t.jsx(_,{selectedDate:d,onChange:e=>{o(e),n(null)}}),u&&t.jsx(te,{chart:a,customerName:null==$?void 0:$.name,customerBirthDate:null==$?void 0:$.birth_date}),t.jsx("div",{className:"my-8",children:y?t.jsx(z,{chart:a,selectedPalace:l,onPalaceSelect:ne,autoRotate:!0}):b?t.jsx(de,{chart:a,selectedPalace:l,onPalaceSelect:ne}):t.jsx(q,{chart:a,selectedPalace:l,onPalaceSelect:ne})}),t.jsxs("div",{className:"mb-8 p-6 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm shadow-lg",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"ğŸ“Š ì „ì²´ ìš´ì„¸"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsx("div",{children:$?(()=>{const e=Q($.birth_date),r=ee(a,e),s=r.personalScore,l=r.bonus;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"text-6xl font-bold "+(s>=80?"text-green-500":s>=60?"text-blue-500":s>=40?"text-yellow-500":s>=20?"text-orange-500":"text-red-500"),children:s}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ë‹¹ì‹ ì˜ ìš´ì„¸",0!==l&&t.jsxs("span",{className:"ml-2 font-bold "+(l>0?"text-green-600":"text-red-600"),children:["(",l>0?"+":"",l,")"]})]}),t.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:s>=80?"ëŒ€ê¸¸ ğŸŒŸ":s>=60?"ê¸¸ âœ¨":s>=40?"í‰ âš–ï¸":s>=20?"í‰ âš ï¸":"ëŒ€í‰ âŒ"})]})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed mb-2",children:a.overallFortune.summary}),0!==l&&t.jsxs("div",{className:"text-sm p-2 rounded "+(l>0?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300"),children:["ğŸ’¡ ",r.explanation]})]})})():t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"text-6xl font-bold "+(a.overallFortune.score>=80?"text-green-500":a.overallFortune.score>=60?"text-blue-500":a.overallFortune.score>=40?"text-yellow-500":a.overallFortune.score>=20?"text-orange-500":"text-red-500"),children:a.overallFortune.score}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ì¢…í•© ì ìˆ˜"}),t.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:"excellent"===a.overallFortune.level?"ëŒ€ê¸¸ ğŸŒŸ":"good"===a.overallFortune.level?"ê¸¸ âœ¨":"neutral"===a.overallFortune.level?"í‰ âš–ï¸":"bad"===a.overallFortune.level?"í‰ âš ï¸":"ëŒ€í‰ âŒ"})]})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:a.overallFortune.summary})]})}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-green-600 dark:text-green-400 mb-2",children:"âœ… ê¸¸í•œ ë°©ìœ„"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:a.overallFortune.bestPalaces.map(e=>t.jsxs("button",{onClick:()=>ne(e),className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm font-medium hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",children:[e,"ê¶ (",a.palaces[e].direction,")"]},e))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-red-600 dark:text-red-400 mb-2",children:"âš ï¸ ë¶ˆë¦¬í•œ ë°©ìœ„"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:a.overallFortune.worstPalaces.map(e=>t.jsxs("button",{onClick:()=>ne(e),className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm font-medium hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[e,"ê¶ (",a.palaces[e].direction,")"]},e))})]})]})]})]})]}),l&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-start justify-center p-4 overflow-y-auto",children:t.jsx("div",{className:"max-w-4xl w-full my-8",children:t.jsx(Y,{palace:a.palaces[l],onClose:()=>n(null)})})}),g&&t.jsx(W,{onClose:()=>m(!1)}),R&&t.jsx(he,{chart:a,context:M,customer:$,onClose:()=>P(!1)}),se&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"ğŸ“Š ì°¨íŠ¸ ë³€ê²½ íˆìŠ¤í† ë¦¬"}),t.jsx("button",{onClick:()=>le(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:0===re.length?t.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"ì•„ì§ ë³€ê²½ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤."}):t.jsx("div",{className:"space-y-3",children:re.map((e,r)=>t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("solarTerm"===e.type?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"day"===e.type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"),children:"solarTerm"===e.type?"ğŸŒ¸ ì ˆê¸°/êµ­ ë³€ê²½":"day"===e.type?"ğŸ“… ì¼ê°„ ë³€ê²½":"â° ì‹œê°„ ë³€ê²½"}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.timestamp.toLocaleString("ko-KR")})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsxs("strong",{children:[e.yinYang," ",e.ju,"êµ­"]})," Â· ì ˆê¸°: ",e.solarTerm]})]})})},r))})})]})}),v&&t.jsx(oe,{baseDate:d,customer:$,onClose:()=>N(!1)}),t.jsx(ve,{isOpen:K,onClose:()=>Z(!1)}),t.jsx(Ce,{isOpen:U,onClose:()=>X(!1),chart:a,elementId:"qimen-content",customerName:null==$?void 0:$.name}),t.jsx(Ee,{isOpen:V,onClose:()=>J(!1)}),G&&t.jsx(be,{message:G.message,type:G.type,onClose:()=>H(null)})]})})}S.register($,C,D,F,M,T,R,P,L,E,I);export{Ie as default};
