var qx=Object.defineProperty;var Jx=(t,e,s)=>e in t?qx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var B=(t,e,s)=>Jx(t,typeof e!="symbol"?e+"":e,s);import{r as j,a as Xx,g as Qx,R as Sr,u as ze,b as Zx,c as E0,d as T0,L as Fs,B as ep,e as tp,f as we,N as sp}from"./react-vendor-CN0IqQCA-1759520869367.js";import{f as $,i as It,s as Cr,e as _r,a as Mr,b as sr,c as nr,d as Ai,g as yn,h as vn,j as np,k as A0,l as zr,m as Bs,n as rp,o as Yc,p as ap,q as _o,r as Gc,t as $n}from"./calendar-vendor-BztppQHM-1759520869367.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var D0={exports:{}},ai={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=j,op=Symbol.for("react.element"),lp=Symbol.for("react.fragment"),cp=Object.prototype.hasOwnProperty,dp=ip.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hp={key:!0,ref:!0,__self:!0,__source:!0};function P0(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)cp.call(e,n)&&!hp.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:op,type:t,key:i,ref:o,props:r,_owner:dp.current}}ai.Fragment=lp;ai.jsx=P0;ai.jsxs=P0;D0.exports=ai;var a=D0.exports,Mo={},Kc=Xx;Mo.createRoot=Kc.createRoot,Mo.hydrateRoot=Kc.hydrateRoot;const up={},qc=t=>{let e;const s=new Set,n=(h,m)=>{const u=typeof h=="function"?h(e):h;if(!Object.is(u,e)){const g=e;e=m??(typeof u!="object"||u===null)?u:Object.assign({},e,u),s.forEach(f=>f(e,g))}},r=()=>e,c={setState:n,getState:r,getInitialState:()=>d,subscribe:h=>(s.add(h),()=>s.delete(h)),destroy:()=>{(up?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},d=e=t(n,r,c);return c},mp=t=>t?qc(t):qc;var R0={exports:{}},L0={},O0={exports:{}},I0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=j;function gp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fp=typeof Object.is=="function"?Object.is:gp,xp=qs.useState,pp=qs.useEffect,bp=qs.useLayoutEffect,yp=qs.useDebugValue;function vp(t,e){var s=e(),n=xp({inst:{value:s,getSnapshot:e}}),r=n[0].inst,i=n[1];return bp(function(){r.value=s,r.getSnapshot=e,Di(r)&&i({inst:r})},[t,s,e]),pp(function(){return Di(r)&&i({inst:r}),t(function(){Di(r)&&i({inst:r})})},[t]),yp(s),s}function Di(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!fp(t,s)}catch{return!0}}function jp(t,e){return e()}var wp=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jp:vp;I0.useSyncExternalStore=qs.useSyncExternalStore!==void 0?qs.useSyncExternalStore:wp;O0.exports=I0;var kp=O0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ii=j,Np=kp;function Sp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cp=typeof Object.is=="function"?Object.is:Sp,_p=Np.useSyncExternalStore,Mp=ii.useRef,Ep=ii.useEffect,Tp=ii.useMemo,Ap=ii.useDebugValue;L0.useSyncExternalStoreWithSelector=function(t,e,s,n,r){var i=Mp(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Tp(function(){function c(g){if(!d){if(d=!0,h=g,g=n(g),r!==void 0&&o.hasValue){var f=o.value;if(r(f,g))return m=f}return m=g}if(f=m,Cp(h,g))return f;var x=n(g);return r!==void 0&&r(f,x)?(h=g,f):(h=g,m=x)}var d=!1,h,m,u=s===void 0?null:s;return[function(){return c(e())},u===null?void 0:function(){return c(u())}]},[e,s,n,r]);var l=_p(t,i[0],i[1]);return Ep(function(){o.hasValue=!0,o.value=l},[l]),Ap(l),l};R0.exports=L0;var Dp=R0.exports;const Pp=Qx(Dp),F0={},{useDebugValue:Rp}=Sr,{useSyncExternalStoreWithSelector:Lp}=Pp;let Jc=!1;const Op=t=>t;function Ip(t,e=Op,s){(F0?"production":void 0)!=="production"&&s&&!Jc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Jc=!0);const n=Lp(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,s);return Rp(n),n}const Xc=t=>{(F0?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?mp(t):t,s=(n,r)=>Ip(e,n,r);return Object.assign(s,e),s},El=t=>t?Xc(t):Xc,Qt=El(t=>({isAuthenticated:!1,isLoading:!1,error:null,user:null,referralStats:null,isLoadingReferralStats:!1,referralCode:"",isValidatingReferral:!1,referralValidation:null,myReferralCode:null,isGeneratingReferralCode:!1,login:async(e,s)=>{t({isLoading:!0,error:null});try{const n=typeof e=="string"?e:e.email,r=typeof e=="string"?s:e.password,i=(n==null?void 0:n.split("@")[0])||"User";t({isAuthenticated:!0,user:{email:n,name:i,id:Date.now().toString()},isLoading:!1})}catch{t({error:"Login failed",isLoading:!1})}},logout:()=>{t({isAuthenticated:!1,user:null})},signUp:async e=>{t({isLoading:!0,error:null});try{const s={id:`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,email:e.email,name:e.name,createdAt:new Date().toISOString(),referredBy:e.referralCode};t({isAuthenticated:!0,user:s,isLoading:!1})}catch{t({error:"Signup failed",isLoading:!1})}},loadReferralStats:async e=>{t({isLoadingReferralStats:!0});try{t({referralStats:{totalReferrals:0,pendingReferrals:0,confirmedReferrals:0,totalCommission:0},isLoadingReferralStats:!1})}catch{t({error:"Failed to load referral stats",isLoadingReferralStats:!1})}},setError:e=>{t({error:e})},setReferralCode:e=>{t({referralCode:e})},validateReferralCode:async e=>{if(!e||e.length!==6)return t({referralValidation:null}),!1;t({isValidatingReferral:!0});try{await new Promise(o=>setTimeout(o,1e3));const s=e.toUpperCase()!=="INVALID"&&e.length===6,n=s?"친구":void 0,r=s?`유효한 추천 코드입니다! ${n}님의 추천으로 특별 혜택을 받으실 수 있습니다.`:"존재하지 않는 추천 코드입니다. 다시 확인해주세요.";return t({referralValidation:{isValid:s,message:r,referrerName:n},isValidatingReferral:!1}),s}catch{return t({referralValidation:{isValid:!1,message:"추천 코드 확인 중 오류가 발생했습니다."},isValidatingReferral:!1}),!1}},clearReferralValidation:()=>{t({referralValidation:null,isValidatingReferral:!1})},generateMyReferralCode:async()=>{t({isGeneratingReferralCode:!0});try{await new Promise(s=>setTimeout(s,500));const e=Math.random().toString(36).substr(2,6).toUpperCase();t({myReferralCode:e,isGeneratingReferralCode:!1})}catch{t({error:"추천 코드 생성에 실패했습니다.",isGeneratingReferralCode:!1})}}})),Eo={isValidReferralCode:t=>{if(!t)return!1;const e=t.trim().toUpperCase();return/^[A-Z0-9]{6}$/.test(e)},isValidEmail:t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim()):!1,getPasswordStrength:t=>{if(!t)return{score:0,feedback:"비밀번호를 입력해주세요."};let e=0;const s=[];t.length>=8?e++:s.push("8자 이상"),/[a-z]/.test(t)?e++:s.push("소문자 포함"),/[A-Z]/.test(t)?e++:s.push("대문자 포함"),/[0-9]/.test(t)?e++:s.push("숫자 포함"),/[^A-Za-z0-9]/.test(t)?e++:s.push("특수문자 포함");const r=["매우 약함","약함","보통","강함","매우 강함"][Math.min(e,4)];return{score:Math.min(e,4),feedback:s.length>0?`${r} (추가 권장: ${s.join(", ")})`:`${r}`}},sanitizeInput:t=>t?t.replace(/[<>'&]/g,"").trim():""},Ur="WELCOME1",Ls={TITLE:"🎉 운명나침반 공식 웰컴 혜택",SUBTITLE:"추천인 코드가 없어도 특별한 혜택을 드려요!",DESCRIPTION:"신규 가입자 전용 웰컴 패키지가 자동으로 적용됩니다",BENEFITS:["프리미엄 사주 분석 1회 무료","궁합 분석 서비스 무제한 (7일)","특별 운세 리포트 제공","VIP 고객 지원 서비스"],CTA_MESSAGE:"더 많은 혜택을 받고 싶다면 친구 추천 코드를 입력해보세요!",AUTO_APPLIED:"✅ 웰컴 혜택이 자동으로 적용되었습니다"},Fp=({className:t="",onValidationChange:e,disabled:s=!1})=>{const{referralCode:n,isValidatingReferral:r,referralValidation:i,setReferralCode:o,validateReferralCode:l,clearReferralValidation:c}=Qt(),[d,h]=j.useState(!1),[m,u]=j.useState(""),[g,f]=j.useState(null),[x,p]=j.useState(!1);j.useEffect(()=>{n?(u(n),h(!0),p(!0)):e==null||e(!0,Ur)},[n,e]);const y=j.useCallback(k=>{g&&clearTimeout(g);const w=setTimeout(async()=>{if(k.length===6){const _=await l(k);e==null||e(_,_?k:Ur),p(_)}else k.length===0&&(c(),e==null||e(!0,Ur),p(!1))},500);f(w)},[g,l,c,e]),v=k=>{const w=k.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");w.length<=6&&(u(w),o(w),y(w))},S=()=>{s||(h(!d),!d&&m&&c())},C=()=>{u(""),o(""),c(),e==null||e(!0,Ur),p(!1)},N=()=>!m||m.length<6?"":r?"border-blue-500 ring-2 ring-blue-200":i!=null&&i.isValid?"border-green-500 ring-2 ring-green-200":i&&!i.isValid?"border-red-500 ring-2 ring-red-200":"",M=()=>r?a.jsx("div",{className:"animate-spin text-blue-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}):i!=null&&i.isValid?a.jsx("div",{className:"text-green-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}):i&&!i.isValid&&m.length===6?a.jsx("div",{className:"text-red-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}):null;return a.jsxs("div",{className:`space-y-4 ${t}`,children:[!x&&a.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 p-6 rounded-xl border border-yellow-200 dark:border-yellow-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-3xl mb-3 block",children:"🎉"}),a.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:Ls.TITLE}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:Ls.SUBTITLE}),a.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-100 dark:bg-green-900/20 px-3 py-2 rounded-lg border border-green-200 dark:border-green-700 mb-4",children:[a.jsx("span",{className:"text-green-600",children:"✅"}),a.jsx("span",{className:"text-green-700 dark:text-green-400 text-sm font-medium",children:Ls.AUTO_APPLIED})]}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-2",children:[a.jsx("p",{className:"font-medium mb-2",children:Ls.DESCRIPTION}),Ls.BENEFITS.map((k,w)=>a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("span",{className:"text-yellow-500",children:"✨"}),a.jsx("span",{className:"text-xs",children:k})]},w))]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:Ls.CTA_MESSAGE})]})}),x&&(i==null?void 0:i.isValid)&&a.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 p-6 rounded-xl border border-green-200 dark:border-green-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-3xl mb-3 block",children:"🎊"}),a.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"친구 추천 혜택 적용 완료!"}),a.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-200 dark:bg-green-800/30 px-4 py-2 rounded-lg border border-green-300 dark:border-green-600 mb-3",children:[a.jsx("span",{className:"text-green-600",children:"✅"}),a.jsxs("span",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:["추천인 코드: ",m]})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i==null?void 0:i.referrerName,"님의 추천으로 특별 혜택을 받으실 수 있습니다!"]})]})}),a.jsxs("button",{type:"button",onClick:S,disabled:s,className:`
          w-full flex items-center justify-between px-4 py-3 
          bg-gradient-to-r from-purple-50 to-pink-50 
          dark:from-purple-900/20 dark:to-pink-900/20 
          border border-purple-200 dark:border-purple-700 
          rounded-lg text-left transition-all duration-200
          ${s?"opacity-50 cursor-not-allowed":"hover:from-purple-100 hover:to-pink-100 dark:hover:from-purple-800/30 dark:hover:to-pink-800/30 cursor-pointer"}
          ${d?"rounded-b-none border-b-0":""}
        `,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:"👫"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"친구 추천 코드가 있으신가요?"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x?"친구 추천으로 더 많은 혜택을 받고 계시네요!":d?"친구가 알려준 6자리 코드를 입력하고 추가 혜택을 받아보세요":"클릭하여 친구 코드를 입력하고 추가 혜택을 받아보세요"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[x&&(i==null?void 0:i.isValid)&&a.jsx("span",{className:"text-green-600 text-sm font-medium",children:"적용됨"}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),d&&a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-l border-r border-b border-purple-200 dark:border-purple-700 rounded-b-lg px-4 py-4 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["친구 추천 코드 ",a.jsx("span",{className:"text-gray-400",children:"(6자리 영문/숫자)"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:m,onChange:v,disabled:s||r,placeholder:"예: AB12CD",className:`
                  w-full px-4 py-3 pr-12 
                  border-2 rounded-lg text-lg font-mono tracking-widest text-center
                  placeholder-gray-400 
                  focus:outline-none focus:ring-0
                  disabled:opacity-50 disabled:cursor-not-allowed
                  bg-white dark:bg-gray-800 
                  text-gray-800 dark:text-gray-200
                  ${N()||"border-gray-300 dark:border-gray-600 focus:border-purple-500"}
                  transition-all duration-200
                `,maxLength:6}),a.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[M(),m&&!r&&a.jsx("button",{type:"button",onClick:C,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",disabled:s,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(6)].map((k,w)=>a.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-200 ${w<m.length?"bg-purple-500":"bg-gray-200 dark:bg-gray-600"}`},w))})]}),i&&m.length>0&&a.jsx("div",{className:`p-3 rounded-lg border ${i.isValid?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700"}`,children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:`mt-0.5 ${i.isValid?"text-green-600":"text-red-600"}`,children:i.isValid?"✅":"❌"}),a.jsx("div",{className:`text-sm ${i.isValid?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:i.message})]})}),r&&a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-600",children:[a.jsx("div",{className:"animate-spin",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),a.jsx("span",{className:"text-sm",children:"친구 추천 코드 확인 중..."})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-blue-600 mt-0.5",children:"💝"}),a.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:[a.jsx("p",{className:"font-medium mb-1",children:"친구 추천 추가 혜택"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:"• 웰컴 혜택 + 친구 추천 혜택 모두 적용"}),a.jsx("li",{children:"• 프리미엄 기능 추가 1개월 연장"}),a.jsx("li",{children:"• 특별 사주 분석 리포트 제공"}),a.jsx("li",{children:"• 친구와 함께 쓰는 궁합 다이어리"})]})]})]})}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[a.jsx("p",{children:"• 친구 추천 코드는 회원가입 시에만 입력할 수 있습니다"}),a.jsx("p",{children:"• 친구 코드가 없어도 웰컴 혜택은 자동으로 적용됩니다"}),a.jsx("p",{children:"• 잘못된 코드를 여러 번 입력하면 일시적으로 제한될 수 있습니다"})]})]})]})},Bp=({className:t="",onSuccess:e,onLoginClick:s})=>{const n=ze(),{signUp:r,isLoading:i,error:o}=Qt(),[l,c]=j.useState({email:"",password:"",confirmPassword:"",name:"",agreedToTerms:!1,agreedToPrivacy:!1,agreedToMarketing:!1}),[d,h]=j.useState({email:{isValid:!1,message:""},password:{isValid:!1,message:""},confirmPassword:{isValid:!1,message:""},name:{isValid:!1,message:""}}),[m,u]=j.useState(!1),[g,f]=j.useState(""),[x,p]=j.useState(!1),[y,v]=j.useState({score:0,feedback:""});j.useEffect(()=>{const w=Eo.isValidEmail(l.email);h(A=>({...A,email:{isValid:w,message:l.email&&!w?"올바른 이메일 주소를 입력해주세요.":""}}));const _=l.name.trim().length>=2;h(A=>({...A,name:{isValid:_,message:l.name&&!_?"이름은 2자 이상 입력해주세요.":""}}));const E=l.password.length>=8,D=Eo.getPasswordStrength(l.password);v(D),h(A=>({...A,password:{isValid:E,message:l.password&&!E?"비밀번호는 8자리 이상 입력해주세요.":""}}));const O=l.password===l.confirmPassword&&l.confirmPassword.length>0;h(A=>({...A,confirmPassword:{isValid:O,message:l.confirmPassword&&!O?"비밀번호가 일치하지 않습니다.":""}}));const L=w&&E&&O&&_,T=l.agreedToTerms&&l.agreedToPrivacy;p(L&&T)},[l]);const S=(w,_)=>{c(E=>({...E,[w]:_}))},C=(w,_)=>{u(w),f(_)},N=async w=>{if(w.preventDefault(),!(!x||i))try{await r({email:l.email,password:l.password,name:l.name,referralCode:m?g:void 0}),e==null||e(),n("/settings")}catch(_){console.error("회원가입 실패:",_)}},M=()=>y.score<=1?"text-red-500":y.score<=2?"text-yellow-500":y.score<=3?"text-blue-500":"text-green-500",k=w=>{const _=`
      w-full px-4 py-3 border-2 rounded-lg 
      focus:outline-none focus:ring-0 transition-all duration-200
      bg-white dark:bg-gray-800 
      text-gray-800 dark:text-gray-200
    `;return!l[w]||l[w]===""?`${_} border-gray-300 dark:border-gray-600 focus:border-purple-500`:d[w].isValid?`${_} border-green-500 focus:border-green-600`:`${_} border-red-500 focus:border-red-600`};return a.jsxs("div",{className:`max-w-md mx-auto ${t}`,children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mb-4",children:a.jsx("span",{className:"text-white text-2xl",children:"🔮"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"운명나침반 가입하기"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"개인화된 사주 분석으로 운명을 확인해보세요"})]}),o&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-red-600",children:"⚠️"}),a.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm",children:o})]})}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이메일 주소 *"}),a.jsx("input",{type:"email",value:l.email,onChange:w=>S("email",w.target.value),placeholder:"example@email.com",className:k("email"),disabled:i}),d.email.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이름 *"}),a.jsx("input",{type:"text",value:l.name,onChange:w=>S("name",w.target.value),placeholder:"홍길동",className:k("name"),disabled:i}),d.name.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호 *"}),a.jsx("input",{type:"password",value:l.password,onChange:w=>S("password",w.target.value),placeholder:"8자 이상 입력",className:k("password"),disabled:i}),l.password&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:`text-sm ${M()}`,children:y.feedback}),a.jsx("div",{className:"mt-1 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${y.score<=1?"bg-red-500":y.score<=2?"bg-yellow-500":y.score<=3?"bg-blue-500":"bg-green-500"}`,style:{width:`${y.score/4*100}%`}})})]}),d.password.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호 확인 *"}),a.jsx("input",{type:"password",value:l.confirmPassword,onChange:w=>S("confirmPassword",w.target.value),placeholder:"비밀번호를 다시 입력",className:k("confirmPassword"),disabled:i}),d.confirmPassword.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.confirmPassword.message})]}),a.jsx(Fp,{onValidationChange:C,disabled:i}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("input",{type:"checkbox",id:"terms",checked:l.agreedToTerms,onChange:w=>S("agreedToTerms",w.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:i}),a.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"font-medium",children:"서비스 이용약관"}),"에 동의합니다 ",a.jsx("span",{className:"text-red-500",children:"*"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("input",{type:"checkbox",id:"privacy",checked:l.agreedToPrivacy,onChange:w=>S("agreedToPrivacy",w.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:i}),a.jsxs("label",{htmlFor:"privacy",className:"text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"font-medium",children:"개인정보 처리방침"}),"에 동의합니다 ",a.jsx("span",{className:"text-red-500",children:"*"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("input",{type:"checkbox",id:"marketing",checked:l.agreedToMarketing,onChange:w=>S("agreedToMarketing",w.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 mt-0.5",disabled:i}),a.jsx("label",{htmlFor:"marketing",className:"text-sm text-gray-700 dark:text-gray-300",children:"마케팅 정보 수신에 동의합니다 (선택)"})]})]}),a.jsx("button",{type:"submit",disabled:!x||i,className:`
              w-full py-4 px-6 rounded-lg font-medium text-lg transition-all duration-200
              ${x&&!i?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}
            `,children:i?a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),a.jsx("span",{children:"가입 처리 중..."})]}):"회원가입 완료"}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["이미 계정이 있으신가요?"," ",a.jsx("button",{type:"button",onClick:s,className:"text-purple-600 hover:text-purple-700 font-medium hover:underline",disabled:i,children:"로그인하기"})]})})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"가입하시면 개인화된 사주 분석과 운세 정보를 받아보실 수 있습니다."})})]})},$p=({className:t="",onSuccess:e,onSignUpClick:s})=>{const n=ze(),{login:r,isLoading:i,error:o}=Qt(),[l,c]=j.useState({email:"",password:"",rememberMe:!1}),[d,h]=j.useState({email:{isValid:!1,message:""},password:{isValid:!1,message:""}}),[m,u]=j.useState(!1);j.useEffect(()=>{const p=Eo.isValidEmail(l.email),y=l.email&&!p?"올바른 이메일 주소를 입력해주세요.":"",v=l.password.length>=8,S=l.password&&!v?"비밀번호는 8자리 이상입니다.":"";h({email:{isValid:p,message:y},password:{isValid:v,message:S}}),u(p&&v)},[l.email,l.password]);const g=(p,y)=>{c(v=>({...v,[p]:y}))},f=async p=>{if(p.preventDefault(),!(!m||i))try{await r({email:l.email,password:l.password}),e==null||e(),n("/dashboard")}catch(y){console.error("로그인 실패:",y)}},x=p=>{const y=`
      w-full px-4 py-3 border-2 rounded-lg 
      focus:outline-none focus:ring-0 transition-all duration-200
      bg-white dark:bg-gray-800 
      text-gray-800 dark:text-gray-200
      placeholder-gray-400
    `;return!l[p]||l[p]===""?`${y} border-gray-300 dark:border-gray-600 focus:border-purple-500`:d[p].isValid?`${y} border-green-500 focus:border-green-600`:`${y} border-red-500 focus:border-red-600`};return a.jsxs("div",{className:`max-w-md mx-auto ${t}`,children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mb-4",children:a.jsx("span",{className:"text-white text-2xl",children:"🔮"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"운명나침반 로그인"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"나만의 운세 분석을 계속해보세요"})]}),o&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-red-600",children:"⚠️"}),a.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm",children:o})]})}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이메일 주소"}),a.jsx("input",{type:"email",value:l.email,onChange:p=>g("email",p.target.value),placeholder:"example@email.com",className:x("email"),disabled:i}),d.email.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"비밀번호"}),a.jsx("input",{type:"password",value:l.password,onChange:p=>g("password",p.target.value),placeholder:"비밀번호를 입력하세요",className:x("password"),disabled:i}),d.password.message&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.password.message})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:l.rememberMe,onChange:p=>g("rememberMe",p.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500",disabled:i}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"로그인 상태 유지"})]}),a.jsx("button",{type:"button",className:"text-sm text-purple-600 hover:text-purple-700 hover:underline",disabled:i,children:"비밀번호 찾기"})]}),a.jsx("button",{type:"submit",disabled:!m||i,className:`
              w-full py-4 px-6 rounded-lg font-medium text-lg transition-all duration-200
              ${m&&!i?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}
            `,children:i?a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),a.jsx("span",{children:"로그인 중..."})]}):"로그인"}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["아직 계정이 없으신가요?"," ",a.jsx("button",{type:"button",onClick:s,className:"text-purple-600 hover:text-purple-700 font-medium hover:underline",disabled:i,children:"회원가입하기"})]})})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:"소셜 계정으로 간편 로그인"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:"🌐"}),a.jsx("div",{className:"text-xs text-gray-500",children:"구글"})]})}),a.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:"💬"}),a.jsx("div",{className:"text-xs text-gray-500",children:"카카오"})]})}),a.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",disabled:!0,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:"📱"}),a.jsx("div",{className:"text-xs text-gray-500",children:"네이버"})]})})]}),a.jsx("div",{className:"text-center text-xs text-gray-400 mt-2",children:"(준비 중)"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"로그인하시면 개인화된 사주 분석과 캘린더 기능을 이용하실 수 있습니다."})})]})},Vp=()=>{const[t,e]=Zx(),s=ze(),{isAuthenticated:n,user:r}=Qt(),i=t.get("mode")||"login",o=i==="signup"||i==="login"?i:"login",[l,c]=j.useState(o);j.useEffect(()=>{n&&r&&s("/dashboard")},[n,r,s]);const d=()=>{c("signup"),e({mode:"signup"},{replace:!0})},h=()=>{c("login"),e({mode:"login"},{replace:!0})},m=()=>{console.log("인증 성공!")};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 dark:from-purple-900 dark:via-gray-900 dark:to-blue-900 flex flex-col justify-center py-12 px-4",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-300/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-3/4 right-1/4 w-96 h-96 bg-pink-300/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-80 h-80 bg-blue-300/20 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"inline-flex items-center space-x-2 mb-6",children:[a.jsx("span",{className:"text-4xl",children:"🔮"}),a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg max-w-md mx-auto",children:"AI와 전통 사주학이 만나 당신의 운명을 안내합니다"})]}),a.jsx("div",{className:"max-w-md mx-auto mb-8",children:a.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm p-1 rounded-xl shadow-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[a.jsx("button",{onClick:h,className:`
                  py-3 px-6 text-sm font-medium rounded-lg transition-all duration-200
                  ${l==="login"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white"}
                `,children:"로그인"}),a.jsx("button",{onClick:d,className:`
                  py-3 px-6 text-sm font-medium rounded-lg transition-all duration-200
                  ${l==="signup"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white"}
                `,children:"회원가입"})]})})}),a.jsx("div",{className:"transition-all duration-300",children:l==="signup"?a.jsx(Bp,{onSuccess:m,onLoginClick:h}):a.jsx($p,{onSuccess:m,onSignUpClick:d})}),a.jsxs("div",{className:"mt-12 max-w-4xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 dark:text-white mb-8",children:"운명나침반과 함께 하는 특별한 경험"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:a.jsx("span",{className:"text-white text-2xl",children:"📊"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"개인화 사주 분석"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"생년월일시를 바탕으로 한 정확한 사주 해석과 운세 분석을 제공합니다."})]}),a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:a.jsx("span",{className:"text-white text-2xl",children:"📅"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"스마트 캘린더"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"일정 관리와 운세 정보가 통합된 지능형 캘린더로 하루를 계획하세요."})]}),a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-green-500 to-teal-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:a.jsx("span",{className:"text-white text-2xl",children:"📝"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"다이어리 & 운세"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"매일의 기록과 함께 개인 맞춤 운세와 조언을 받아보세요."})]})]})]}),l==="signup"&&a.jsx("div",{className:"mt-12 max-w-md mx-auto",children:a.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 p-6 rounded-xl border border-yellow-200 dark:border-yellow-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"🎁"}),a.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"친구 추천 혜택"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"추천인 코드로 가입하시면 특별한 혜택을 드려요!"}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[a.jsx("div",{children:"✨ 프리미엄 기능 1개월 무료"}),a.jsx("div",{children:"🔍 특별 사주 분석 무료 제공"}),a.jsx("div",{children:"💕 궁합 분석 서비스 무료"})]})]})})})]}),a.jsxs("footer",{className:"relative z-10 mt-16 text-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("p",{children:"© 2024 운명나침반. 모든 권리 보유."}),a.jsxs("div",{className:"mt-2 space-x-4",children:[a.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"이용약관"}),a.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"개인정보처리방침"}),a.jsx("a",{href:"#",className:"hover:text-purple-600 transition-colors",children:"고객지원"})]})]})]})};function B0(t,e){return function(){return t.apply(e,arguments)}}const{toString:Hp}=Object.prototype,{getPrototypeOf:Tl}=Object,{iterator:oi,toStringTag:$0}=Symbol,li=(t=>e=>{const s=Hp.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),lt=t=>(t=t.toLowerCase(),e=>li(e)===t),ci=t=>e=>typeof e===t,{isArray:hn}=Array,rr=ci("undefined");function Er(t){return t!==null&&!rr(t)&&t.constructor!==null&&!rr(t.constructor)&&Ve(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const V0=lt("ArrayBuffer");function zp(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&V0(t.buffer),e}const Up=ci("string"),Ve=ci("function"),H0=ci("number"),Tr=t=>t!==null&&typeof t=="object",Wp=t=>t===!0||t===!1,ya=t=>{if(li(t)!=="object")return!1;const e=Tl(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!($0 in t)&&!(oi in t)},Yp=t=>{if(!Tr(t)||Er(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Gp=lt("Date"),Kp=lt("File"),qp=lt("Blob"),Jp=lt("FileList"),Xp=t=>Tr(t)&&Ve(t.pipe),Qp=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ve(t.append)&&((e=li(t))==="formdata"||e==="object"&&Ve(t.toString)&&t.toString()==="[object FormData]"))},Zp=lt("URLSearchParams"),[eb,tb,sb,nb]=["ReadableStream","Request","Response","Headers"].map(lt),rb=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ar(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),hn(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{if(Er(t))return;const i=s?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(n=0;n<o;n++)l=i[n],e.call(null,t[l],l,t)}}function z0(t,e){if(Er(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,r;for(;n-- >0;)if(r=s[n],e===r.toLowerCase())return r;return null}const ms=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,U0=t=>!rr(t)&&t!==ms;function To(){const{caseless:t}=U0(this)&&this||{},e={},s=(n,r)=>{const i=t&&z0(e,r)||r;ya(e[i])&&ya(n)?e[i]=To(e[i],n):ya(n)?e[i]=To({},n):hn(n)?e[i]=n.slice():e[i]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Ar(arguments[n],s);return e}const ab=(t,e,s,{allOwnKeys:n}={})=>(Ar(e,(r,i)=>{s&&Ve(r)?t[i]=B0(r,s):t[i]=r},{allOwnKeys:n}),t),ib=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ob=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},lb=(t,e,s,n)=>{let r,i,o;const l={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!n||n(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=s!==!1&&Tl(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},cb=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},db=t=>{if(!t)return null;if(hn(t))return t;let e=t.length;if(!H0(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},hb=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Tl(Uint8Array)),ub=(t,e)=>{const n=(t&&t[oi]).call(t);let r;for(;(r=n.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},mb=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},gb=lt("HTMLFormElement"),fb=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,r){return n.toUpperCase()+r}),Qc=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),xb=lt("RegExp"),W0=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};Ar(s,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(n[i]=o||r)}),Object.defineProperties(t,n)},pb=t=>{W0(t,(e,s)=>{if(Ve(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Ve(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},bb=(t,e)=>{const s={},n=r=>{r.forEach(i=>{s[i]=!0})};return hn(t)?n(t):n(String(t).split(e)),s},yb=()=>{},vb=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function jb(t){return!!(t&&Ve(t.append)&&t[$0]==="FormData"&&t[oi])}const wb=t=>{const e=new Array(10),s=(n,r)=>{if(Tr(n)){if(e.indexOf(n)>=0)return;if(Er(n))return n;if(!("toJSON"in n)){e[r]=n;const i=hn(n)?[]:{};return Ar(n,(o,l)=>{const c=s(o,r+1);!rr(c)&&(i[l]=c)}),e[r]=void 0,i}}return n};return s(t,0)},kb=lt("AsyncFunction"),Nb=t=>t&&(Tr(t)||Ve(t))&&Ve(t.then)&&Ve(t.catch),Y0=((t,e)=>t?setImmediate:e?((s,n)=>(ms.addEventListener("message",({source:r,data:i})=>{r===ms&&i===s&&n.length&&n.shift()()},!1),r=>{n.push(r),ms.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ve(ms.postMessage)),Sb=typeof queueMicrotask<"u"?queueMicrotask.bind(ms):typeof process<"u"&&process.nextTick||Y0,Cb=t=>t!=null&&Ve(t[oi]),R={isArray:hn,isArrayBuffer:V0,isBuffer:Er,isFormData:Qp,isArrayBufferView:zp,isString:Up,isNumber:H0,isBoolean:Wp,isObject:Tr,isPlainObject:ya,isEmptyObject:Yp,isReadableStream:eb,isRequest:tb,isResponse:sb,isHeaders:nb,isUndefined:rr,isDate:Gp,isFile:Kp,isBlob:qp,isRegExp:xb,isFunction:Ve,isStream:Xp,isURLSearchParams:Zp,isTypedArray:hb,isFileList:Jp,forEach:Ar,merge:To,extend:ab,trim:rb,stripBOM:ib,inherits:ob,toFlatObject:lb,kindOf:li,kindOfTest:lt,endsWith:cb,toArray:db,forEachEntry:ub,matchAll:mb,isHTMLForm:gb,hasOwnProperty:Qc,hasOwnProp:Qc,reduceDescriptors:W0,freezeMethods:pb,toObjectSet:bb,toCamelCase:fb,noop:yb,toFiniteNumber:vb,findKey:z0,global:ms,isContextDefined:U0,isSpecCompliantForm:jb,toJSONObject:wb,isAsyncFn:kb,isThenable:Nb,setImmediate:Y0,asap:Sb,isIterable:Cb};function ee(t,e,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}R.inherits(ee,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const G0=ee.prototype,K0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{K0[t]={value:t}});Object.defineProperties(ee,K0);Object.defineProperty(G0,"isAxiosError",{value:!0});ee.from=(t,e,s,n,r,i)=>{const o=Object.create(G0);return R.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),ee.call(o,t.message,e,s,n,r),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const _b=null;function Ao(t){return R.isPlainObject(t)||R.isArray(t)}function q0(t){return R.endsWith(t,"[]")?t.slice(0,-2):t}function Zc(t,e,s){return t?t.concat(e).map(function(r,i){return r=q0(r),!s&&i?"["+r+"]":r}).join(s?".":""):e}function Mb(t){return R.isArray(t)&&!t.some(Ao)}const Eb=R.toFlatObject(R,{},null,function(e){return/^is[A-Z]/.test(e)});function di(t,e,s){if(!R.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=R.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,p){return!R.isUndefined(p[x])});const n=s.metaTokens,r=s.visitor||h,i=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(e);if(!R.isFunction(r))throw new TypeError("visitor must be a function");function d(f){if(f===null)return"";if(R.isDate(f))return f.toISOString();if(R.isBoolean(f))return f.toString();if(!c&&R.isBlob(f))throw new ee("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(f)||R.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function h(f,x,p){let y=f;if(f&&!p&&typeof f=="object"){if(R.endsWith(x,"{}"))x=n?x:x.slice(0,-2),f=JSON.stringify(f);else if(R.isArray(f)&&Mb(f)||(R.isFileList(f)||R.endsWith(x,"[]"))&&(y=R.toArray(f)))return x=q0(x),y.forEach(function(S,C){!(R.isUndefined(S)||S===null)&&e.append(o===!0?Zc([x],C,i):o===null?x:x+"[]",d(S))}),!1}return Ao(f)?!0:(e.append(Zc(p,x,i),d(f)),!1)}const m=[],u=Object.assign(Eb,{defaultVisitor:h,convertValue:d,isVisitable:Ao});function g(f,x){if(!R.isUndefined(f)){if(m.indexOf(f)!==-1)throw Error("Circular reference detected in "+x.join("."));m.push(f),R.forEach(f,function(y,v){(!(R.isUndefined(y)||y===null)&&r.call(e,y,R.isString(v)?v.trim():v,x,u))===!0&&g(y,x?x.concat(v):[v])}),m.pop()}}if(!R.isObject(t))throw new TypeError("data must be an object");return g(t),e}function ed(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Al(t,e){this._pairs=[],t&&di(t,this,e)}const J0=Al.prototype;J0.append=function(e,s){this._pairs.push([e,s])};J0.toString=function(e){const s=e?function(n){return e.call(this,n,ed)}:ed;return this._pairs.map(function(r){return s(r[0])+"="+s(r[1])},"").join("&")};function Tb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function X0(t,e,s){if(!e)return t;const n=s&&s.encode||Tb;R.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let i;if(r?i=r(e,s):i=R.isURLSearchParams(e)?e.toString():new Al(e,s).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class td{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Q0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ab=typeof URLSearchParams<"u"?URLSearchParams:Al,Db=typeof FormData<"u"?FormData:null,Pb=typeof Blob<"u"?Blob:null,Rb={isBrowser:!0,classes:{URLSearchParams:Ab,FormData:Db,Blob:Pb},protocols:["http","https","file","blob","url","data"]},Dl=typeof window<"u"&&typeof document<"u",Do=typeof navigator=="object"&&navigator||void 0,Lb=Dl&&(!Do||["ReactNative","NativeScript","NS"].indexOf(Do.product)<0),Ob=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ib=Dl&&window.location.href||"http://localhost",Fb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dl,hasStandardBrowserEnv:Lb,hasStandardBrowserWebWorkerEnv:Ob,navigator:Do,origin:Ib},Symbol.toStringTag,{value:"Module"})),Te={...Fb,...Rb};function Bb(t,e){return di(t,new Te.classes.URLSearchParams,{visitor:function(s,n,r,i){return Te.isNode&&R.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function $b(t){return R.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Vb(t){const e={},s=Object.keys(t);let n;const r=s.length;let i;for(n=0;n<r;n++)i=s[n],e[i]=t[i];return e}function Z0(t){function e(s,n,r,i){let o=s[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=s.length;return o=!o&&R.isArray(r)?r.length:o,c?(R.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!l):((!r[o]||!R.isObject(r[o]))&&(r[o]=[]),e(s,n,r[o],i)&&R.isArray(r[o])&&(r[o]=Vb(r[o])),!l)}if(R.isFormData(t)&&R.isFunction(t.entries)){const s={};return R.forEachEntry(t,(n,r)=>{e($b(n),r,s,0)}),s}return null}function Hb(t,e,s){if(R.isString(t))try{return(e||JSON.parse)(t),R.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const Dr={transitional:Q0,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",r=n.indexOf("application/json")>-1,i=R.isObject(e);if(i&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return r?JSON.stringify(Z0(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e)||R.isReadableStream(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Bb(e,this.formSerializer).toString();if((l=R.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return di(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||r?(s.setContentType("application/json",!1),Hb(e)):e}],transformResponse:[function(e){const s=this.transitional||Dr.transitional,n=s&&s.forcedJSONParsing,r=this.responseType==="json";if(R.isResponse(e)||R.isReadableStream(e))return e;if(e&&R.isString(e)&&(n&&!this.responseType||r)){const o=!(s&&s.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?ee.from(l,ee.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Te.classes.FormData,Blob:Te.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],t=>{Dr.headers[t]={}});const zb=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ub=t=>{const e={};let s,n,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),s=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!s||e[s]&&zb[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},sd=Symbol("internals");function jn(t){return t&&String(t).trim().toLowerCase()}function va(t){return t===!1||t==null?t:R.isArray(t)?t.map(va):String(t)}function Wb(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const Yb=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Pi(t,e,s,n,r){if(R.isFunction(n))return n.call(this,e,s);if(r&&(e=s),!!R.isString(e)){if(R.isString(n))return e.indexOf(n)!==-1;if(R.isRegExp(n))return n.test(e)}}function Gb(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function Kb(t,e){const s=R.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(r,i,o){return this[n].call(this,e,r,i,o)},configurable:!0})})}let He=class{constructor(e){e&&this.set(e)}set(e,s,n){const r=this;function i(l,c,d){const h=jn(c);if(!h)throw new Error("header name must be a non-empty string");const m=R.findKey(r,h);(!m||r[m]===void 0||d===!0||d===void 0&&r[m]!==!1)&&(r[m||c]=va(l))}const o=(l,c)=>R.forEach(l,(d,h)=>i(d,h,c));if(R.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(R.isString(e)&&(e=e.trim())&&!Yb(e))o(Ub(e),s);else if(R.isObject(e)&&R.isIterable(e)){let l={},c,d;for(const h of e){if(!R.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?R.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,s)}else e!=null&&i(s,e,n);return this}get(e,s){if(e=jn(e),e){const n=R.findKey(this,e);if(n){const r=this[n];if(!s)return r;if(s===!0)return Wb(r);if(R.isFunction(s))return s.call(this,r,n);if(R.isRegExp(s))return s.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=jn(e),e){const n=R.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Pi(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let r=!1;function i(o){if(o=jn(o),o){const l=R.findKey(n,o);l&&(!s||Pi(n,n[l],l,s))&&(delete n[l],r=!0)}}return R.isArray(e)?e.forEach(i):i(e),r}clear(e){const s=Object.keys(this);let n=s.length,r=!1;for(;n--;){const i=s[n];(!e||Pi(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const s=this,n={};return R.forEach(this,(r,i)=>{const o=R.findKey(n,i);if(o){s[o]=va(r),delete s[i];return}const l=e?Gb(i):String(i).trim();l!==i&&delete s[i],s[l]=va(r),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return R.forEach(this,(n,r)=>{n!=null&&n!==!1&&(s[r]=e&&R.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[sd]=this[sd]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=jn(o);n[l]||(Kb(r,o),n[l]=!0)}return R.isArray(e)?e.forEach(i):i(e),this}};He.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(He.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});R.freezeMethods(He);function Ri(t,e){const s=this||Dr,n=e||s,r=He.from(n.headers);let i=n.data;return R.forEach(t,function(l){i=l.call(s,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function em(t){return!!(t&&t.__CANCEL__)}function un(t,e,s){ee.call(this,t??"canceled",ee.ERR_CANCELED,e,s),this.name="CanceledError"}R.inherits(un,ee,{__CANCEL__:!0});function tm(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new ee("Request failed with status code "+s.status,[ee.ERR_BAD_REQUEST,ee.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function qb(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Jb(t,e){t=t||10;const s=new Array(t),n=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),h=n[i];o||(o=d),s[r]=c,n[r]=d;let m=i,u=0;for(;m!==r;)u+=s[m++],m=m%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),d-o<e)return;const g=h&&d-h;return g?Math.round(u*1e3/g):void 0}}function Xb(t,e){let s=0,n=1e3/e,r,i;const o=(d,h=Date.now())=>{s=h,r=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const h=Date.now(),m=h-s;m>=n?o(d,h):(r=d,i||(i=setTimeout(()=>{i=null,o(r)},n-m)))},()=>r&&o(r)]}const Da=(t,e,s=3)=>{let n=0;const r=Jb(50,250);return Xb(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=r(c),h=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(m)},s)},nd=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},rd=t=>(...e)=>R.asap(()=>t(...e)),Qb=Te.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Te.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Te.origin),Te.navigator&&/(msie|trident)/i.test(Te.navigator.userAgent)):()=>!0,Zb=Te.hasStandardBrowserEnv?{write(t,e,s,n,r,i){const o=[t+"="+encodeURIComponent(e)];R.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),R.isString(n)&&o.push("path="+n),R.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ey(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ty(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function sm(t,e,s){let n=!ey(e);return t&&(n||s==!1)?ty(t,e):e}const ad=t=>t instanceof He?{...t}:t;function Cs(t,e){e=e||{};const s={};function n(d,h,m,u){return R.isPlainObject(d)&&R.isPlainObject(h)?R.merge.call({caseless:u},d,h):R.isPlainObject(h)?R.merge({},h):R.isArray(h)?h.slice():h}function r(d,h,m,u){if(R.isUndefined(h)){if(!R.isUndefined(d))return n(void 0,d,m,u)}else return n(d,h,m,u)}function i(d,h){if(!R.isUndefined(h))return n(void 0,h)}function o(d,h){if(R.isUndefined(h)){if(!R.isUndefined(d))return n(void 0,d)}else return n(void 0,h)}function l(d,h,m){if(m in e)return n(d,h);if(m in t)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,h,m)=>r(ad(d),ad(h),m,!0)};return R.forEach(Object.keys({...t,...e}),function(h){const m=c[h]||r,u=m(t[h],e[h],h);R.isUndefined(u)&&m!==l||(s[h]=u)}),s}const nm=t=>{const e=Cs({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=e;e.headers=o=He.from(o),e.url=X0(sm(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(R.isFormData(s)){if(Te.hasStandardBrowserEnv||Te.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...h]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...h].join("; "))}}if(Te.hasStandardBrowserEnv&&(n&&R.isFunction(n)&&(n=n(e)),n||n!==!1&&Qb(e.url))){const d=r&&i&&Zb.read(i);d&&o.set(r,d)}return e},sy=typeof XMLHttpRequest<"u",ny=sy&&function(t){return new Promise(function(s,n){const r=nm(t);let i=r.data;const o=He.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=r,h,m,u,g,f;function x(){g&&g(),f&&f(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let p=new XMLHttpRequest;p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout;function y(){if(!p)return;const S=He.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:S,config:t,request:p};tm(function(k){s(k),x()},function(k){n(k),x()},N),p=null}"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(y)},p.onabort=function(){p&&(n(new ee("Request aborted",ee.ECONNABORTED,t,p)),p=null)},p.onerror=function(){n(new ee("Network Error",ee.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let C=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const N=r.transitional||Q0;r.timeoutErrorMessage&&(C=r.timeoutErrorMessage),n(new ee(C,N.clarifyTimeoutError?ee.ETIMEDOUT:ee.ECONNABORTED,t,p)),p=null},i===void 0&&o.setContentType(null),"setRequestHeader"in p&&R.forEach(o.toJSON(),function(C,N){p.setRequestHeader(N,C)}),R.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),l&&l!=="json"&&(p.responseType=r.responseType),d&&([u,f]=Da(d,!0),p.addEventListener("progress",u)),c&&p.upload&&([m,g]=Da(c),p.upload.addEventListener("progress",m),p.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(h=S=>{p&&(n(!S||S.type?new un(null,t,p):S),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const v=qb(r.url);if(v&&Te.protocols.indexOf(v)===-1){n(new ee("Unsupported protocol "+v+":",ee.ERR_BAD_REQUEST,t));return}p.send(i||null)})},ry=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,r;const i=function(d){if(!r){r=!0,l();const h=d instanceof Error?d:this.reason;n.abort(h instanceof ee?h:new un(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new ee(`timeout ${e} of ms exceeded`,ee.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>R.asap(l),c}},ay=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,r;for(;n<s;)r=n+e,yield t.slice(n,r),n=r},iy=async function*(t,e){for await(const s of oy(t))yield*ay(s,e)},oy=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},id=(t,e,s,n)=>{const r=iy(t,e);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await r.next();if(d){l(),c.close();return}let m=h.byteLength;if(s){let u=i+=m;s(u)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},hi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",rm=hi&&typeof ReadableStream=="function",ly=hi&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),am=(t,...e)=>{try{return!!t(...e)}catch{return!1}},cy=rm&&am(()=>{let t=!1;const e=new Request(Te.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),od=64*1024,Po=rm&&am(()=>R.isReadableStream(new Response("").body)),Pa={stream:Po&&(t=>t.body)};hi&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Pa[e]&&(Pa[e]=R.isFunction(t[e])?s=>s[e]():(s,n)=>{throw new ee(`Response type '${e}' is not supported`,ee.ERR_NOT_SUPPORT,n)})})})(new Response);const dy=async t=>{if(t==null)return 0;if(R.isBlob(t))return t.size;if(R.isSpecCompliantForm(t))return(await new Request(Te.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(R.isArrayBufferView(t)||R.isArrayBuffer(t))return t.byteLength;if(R.isURLSearchParams(t)&&(t=t+""),R.isString(t))return(await ly(t)).byteLength},hy=async(t,e)=>{const s=R.toFiniteNumber(t.getContentLength());return s??dy(e)},uy=hi&&(async t=>{let{url:e,method:s,data:n,signal:r,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:h,withCredentials:m="same-origin",fetchOptions:u}=nm(t);d=d?(d+"").toLowerCase():"text";let g=ry([r,i&&i.toAbortSignal()],o),f;const x=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let p;try{if(c&&cy&&s!=="get"&&s!=="head"&&(p=await hy(h,n))!==0){let N=new Request(e,{method:"POST",body:n,duplex:"half"}),M;if(R.isFormData(n)&&(M=N.headers.get("content-type"))&&h.setContentType(M),N.body){const[k,w]=nd(p,Da(rd(c)));n=id(N.body,od,k,w)}}R.isString(m)||(m=m?"include":"omit");const y="credentials"in Request.prototype;f=new Request(e,{...u,signal:g,method:s.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:y?m:void 0});let v=await fetch(f,u);const S=Po&&(d==="stream"||d==="response");if(Po&&(l||S&&x)){const N={};["status","statusText","headers"].forEach(_=>{N[_]=v[_]});const M=R.toFiniteNumber(v.headers.get("content-length")),[k,w]=l&&nd(M,Da(rd(l),!0))||[];v=new Response(id(v.body,od,k,()=>{w&&w(),x&&x()}),N)}d=d||"text";let C=await Pa[R.findKey(Pa,d)||"text"](v,t);return!S&&x&&x(),await new Promise((N,M)=>{tm(N,M,{data:C,headers:He.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:f})})}catch(y){throw x&&x(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new ee("Network Error",ee.ERR_NETWORK,t,f),{cause:y.cause||y}):ee.from(y,y&&y.code,t,f)}}),Ro={http:_b,xhr:ny,fetch:uy};R.forEach(Ro,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ld=t=>`- ${t}`,my=t=>R.isFunction(t)||t===null||t===!1,im={getAdapter:t=>{t=R.isArray(t)?t:[t];const{length:e}=t;let s,n;const r={};for(let i=0;i<e;i++){s=t[i];let o;if(n=s,!my(s)&&(n=Ro[(o=String(s)).toLowerCase()],n===void 0))throw new ee(`Unknown adapter '${o}'`);if(n)break;r[o||"#"+i]=n}if(!n){const i=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(ld).join(`
`):" "+ld(i[0]):"as no adapter specified";throw new ee("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Ro};function Li(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new un(null,t)}function cd(t){return Li(t),t.headers=He.from(t.headers),t.data=Ri.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),im.getAdapter(t.adapter||Dr.adapter)(t).then(function(n){return Li(t),n.data=Ri.call(t,t.transformResponse,n),n.headers=He.from(n.headers),n},function(n){return em(n)||(Li(t),n&&n.response&&(n.response.data=Ri.call(t,t.transformResponse,n.response),n.response.headers=He.from(n.response.headers))),Promise.reject(n)})}const om="1.11.0",ui={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ui[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const dd={};ui.transitional=function(e,s,n){function r(i,o){return"[Axios v"+om+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(e===!1)throw new ee(r(o," has been removed"+(s?" in "+s:"")),ee.ERR_DEPRECATED);return s&&!dd[o]&&(dd[o]=!0,console.warn(r(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,o,l):!0}};ui.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function gy(t,e,s){if(typeof t!="object")throw new ee("options must be an object",ee.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const i=n[r],o=e[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new ee("option "+i+" must be "+c,ee.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ee("Unknown option "+i,ee.ERR_BAD_OPTION)}}const ja={assertOptions:gy,validators:ui},ut=ja.validators;let ps=class{constructor(e){this.defaults=e||{},this.interceptors={request:new td,response:new td}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=Cs(this.defaults,s);const{transitional:n,paramsSerializer:r,headers:i}=s;n!==void 0&&ja.assertOptions(n,{silentJSONParsing:ut.transitional(ut.boolean),forcedJSONParsing:ut.transitional(ut.boolean),clarifyTimeoutError:ut.transitional(ut.boolean)},!1),r!=null&&(R.isFunction(r)?s.paramsSerializer={serialize:r}:ja.assertOptions(r,{encode:ut.function,serialize:ut.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),ja.assertOptions(s,{baseUrl:ut.spelling("baseURL"),withXsrfToken:ut.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&R.merge(i.common,i[s.method]);i&&R.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),s.headers=He.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(s)===!1||(c=c&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let h,m=0,u;if(!c){const f=[cd.bind(this),void 0];for(f.unshift(...l),f.push(...d),u=f.length,h=Promise.resolve(s);m<u;)h=h.then(f[m++],f[m++]);return h}u=l.length;let g=s;for(m=0;m<u;){const f=l[m++],x=l[m++];try{g=f(g)}catch(p){x.call(this,p);break}}try{h=cd.call(this,g)}catch(f){return Promise.reject(f)}for(m=0,u=d.length;m<u;)h=h.then(d[m++],d[m++]);return h}getUri(e){e=Cs(this.defaults,e);const s=sm(e.baseURL,e.url,e.allowAbsoluteUrls);return X0(s,e.params,e.paramsSerializer)}};R.forEach(["delete","get","head","options"],function(e){ps.prototype[e]=function(s,n){return this.request(Cs(n||{},{method:e,url:s,data:(n||{}).data}))}});R.forEach(["post","put","patch"],function(e){function s(n){return function(i,o,l){return this.request(Cs(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ps.prototype[e]=s(),ps.prototype[e+"Form"]=s(!0)});let fy=class lm{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(r);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,l){n.reason||(n.reason=new un(i,o,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new lm(function(r){e=r}),cancel:e}}};function xy(t){return function(s){return t.apply(null,s)}}function py(t){return R.isObject(t)&&t.isAxiosError===!0}const Lo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lo).forEach(([t,e])=>{Lo[e]=t});function cm(t){const e=new ps(t),s=B0(ps.prototype.request,e);return R.extend(s,ps.prototype,e,{allOwnKeys:!0}),R.extend(s,e,null,{allOwnKeys:!0}),s.create=function(r){return cm(Cs(t,r))},s}const oe=cm(Dr);oe.Axios=ps;oe.CanceledError=un;oe.CancelToken=fy;oe.isCancel=em;oe.VERSION=om;oe.toFormData=di;oe.AxiosError=ee;oe.Cancel=oe.CanceledError;oe.all=function(e){return Promise.all(e)};oe.spread=xy;oe.isAxiosError=py;oe.mergeConfig=Cs;oe.AxiosHeaders=He;oe.formToJSON=t=>Z0(R.isHTMLForm(t)?new FormData(t):t);oe.getAdapter=im.getAdapter;oe.HttpStatusCode=Lo;oe.default=oe;const{Axios:UM,AxiosError:WM,CanceledError:YM,isCancel:GM,CancelToken:KM,VERSION:qM,all:JM,Cancel:XM,isAxiosError:QM,spread:ZM,toFormData:eE,AxiosHeaders:tE,HttpStatusCode:sE,formToJSON:nE,getAdapter:rE,mergeConfig:aE}=oe;function by(){return"/api"}const dm=by();typeof window<"u"&&(console.log("[Calendar API] Vercel 풀스택 모드"),console.log("[Calendar API] URL:",dm));const Ne=oe.create({baseURL:dm,headers:{"Content-Type":"application/json"}}),Tt={getEvents:async t=>(await Ne.get("/events",{params:t})).data.data||[],getEvent:async t=>(await Ne.get(`/events/${t}`)).data.data,createEvent:async t=>(await Ne.post("/events",t)).data.data,updateEvent:async(t,e)=>(await Ne.put(`/events/${t}`,e)).data.data,deleteEvent:async t=>{await Ne.delete(`/events/${t}`)}},hd={getTags:async()=>(await Ne.get("/tags")).data,getTag:async t=>(await Ne.get(`/tags/${t}`)).data,createTag:async t=>(await Ne.post("/tags",t)).data,updateTag:async(t,e)=>(await Ne.put(`/tags/${t}`,e)).data,deleteTag:async t=>{await Ne.delete(`/tags/${t}`)},addTagsToEvent:async(t,e)=>(await Ne.post(`/tags/events/${t}/tags`,{tagIds:e})).data,getEventTags:async t=>(await Ne.get(`/tags/events/${t}/tags`)).data,removeTagFromEvent:async(t,e)=>{await Ne.delete(`/tags/events/${t}/tags/${e}`)}},Pr={getComprehensiveInterpretation:async t=>{try{const r=await(await fetch("/api/saju/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(r.success&&r.data){const{fourPillars:i,ohHaengBalance:o,interpretation:l,sajuString:c}=r.data;return{basic:{dayMaster:i.day.heaven,dayMasterStrength:"중화",yongshin:"화",gyeokguk:"정격",summary:l,sajuString:c,ohHaengBalance:o}}}else throw new Error("사주 계산 실패")}catch(e){return console.error("사주 계산 오류:",e),{basic:{dayMaster:"계산중",dayMasterStrength:"분석중",yongshin:"분석중",gyeokguk:"분석중",summary:"사주 계산 중 오류가 발생했습니다.",sajuString:"계산 실패",ohHaengBalance:{wood:20,fire:20,earth:20,metal:20,water:20}}}}},getBasicAnalysis:async t=>{const e=await Ne.post("/saju/calculate",t);return{dayMaster:e.data.data.fourPillars.day.heaven,dayMasterStrength:"중화",yongshin:"화",gyeokguk:"정격",summary:e.data.data.interpretation}},getJohooAnalysis:async t=>({season:"봄",seasonalCharacteristics:["성장","발전"],johooNeeds:{fire:30,water:20},monthlyDetails:{},recommendations:["적극적인 활동","새로운 시작"],careerGuidance:["창의적 분야","리더십 발휘"]}),getSpiritualAnalysis:async t=>({beneficialSpirits:["천을귀인","문창귀인"],harmfulSpirits:["겁살","망신살"],dominantInfluence:"길신이 우세",mitigation:["선행 쌓기","정직한 생활"],activation:["학습과 연구","예술 활동"]}),getPersonalityAnalysis:async t=>({dominantTraits:{leadership:80,creativity:70},strengths:["리더십","창의성","추진력"],weaknesses:["성급함","완벽주의"],developmentAreas:["인내심","협력"],recommendations:["팀워크 향상","감정 조절"]}),getFortuneAnalysis:async t=>({currentYear:{overall:75,career:80,health:70},monthlyTrends:[],luckyElements:["화","토"],cautionPeriods:["7월","12월"]}),getCareerGuidance:async t=>({suitableCareers:["경영","교육","예술","IT"],avoidCareers:["반복 업무","단순 노동"],careerTiming:"30대 중반 이후 큰 성과",successFactors:["리더십","창의성","소통능력"],workEnvironment:"자율적이고 창의적인 환경"}),getRelationshipAnalysis:async t=>({marriageCompatibility:{overall:80,communication:75},relationshipPattern:"적극적이고 주도적",challenges:["성급함","고집"],advice:["상대방 배려","소통 강화"],timing:"30대 초반이 길한 시기"}),getHealthGuidance:async t=>({constitution:{type:"화체질",strength:70},vulnerabilities:["심장","소화기"],preventiveCare:["규칙적 운동","스트레스 관리"],seasonalCare:{spring:"간 건강",summer:"심장 건강"},lifestyle:["규칙적 생활","균형 잡힌 식단"]})},Ie={getDiaries:async t=>(await oe.get("http://localhost:5002/api/diaries",{params:t,headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,getDiariesForDateRange:async(t,e)=>(await Ne.get("/diaries/search",{params:{startDate:t,endDate:e},headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,getDiaryByDate:async t=>(await Ne.get(`/diaries?date=${t}`,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,createDiary:async t=>(await Ne.post("/diaries",t,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,updateDiary:async(t,e)=>(await Ne.put(`/diaries?id=${t}`,e,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data,deleteDiary:async t=>{await Ne.delete(`/diaries?id=${t}`,{headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})},searchDiaries:async t=>(await Ne.get("/diaries/search",{params:t,headers:{"x-user-id":"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11"}})).data},wn={getTodos:async()=>(await oe.get("http://localhost:4012/api/calendar/todos")).data,getTodosByDate:async t=>(await oe.get(`http://localhost:4012/api/calendar/todos/${t}`)).data,createTodo:async t=>(await oe.post("http://localhost:4012/api/calendar/todos",t)).data,updateTodo:async(t,e)=>(await oe.put(`http://localhost:4012/api/calendar/todos/${t}`,e)).data,deleteTodo:async t=>{await oe.delete(`http://localhost:4012/api/calendar/todos/${t}`)},toggleTodo:async t=>(await oe.patch(`http://localhost:4012/api/calendar/todos/${t}/toggle`)).data},hm=j.createContext(void 0),ct=()=>{const t=j.useContext(hm);if(!t)throw new Error("useCalendar must be used within a CalendarProvider");return t},yy=({children:t})=>{const[e,s]=j.useState(new Date),[n,r]=j.useState("month"),[i,o]=j.useState(null),[l,c]=j.useState([]),[d,h]=j.useState([]),[m,u]=j.useState(!1),[g]=j.useState({timezone:"Asia/Seoul",weekStartsOn:0,defaultView:"month",showLunarCalendar:!0,showFortune:!0,theme:"light",language:"ko"}),f=T=>({id:T.id,text:T.title,title:T.title,description:T.description,completed:T.completed===1||T.completed===!0,priority:T.priority,date:T.date,createdAt:T.created_at,updatedAt:T.updated_at}),x=T=>({title:T.text||T.title||"",description:T.description,date:T.date||"",priority:T.priority||"medium",completed:T.completed?1:0});j.useEffect(()=>{p()},[]);const p=async()=>{try{u(!0);const A=(await wn.getTodos()).map(f);h(A)}catch(T){console.error("Failed to load todos:",T)}finally{u(!1)}},y=j.useCallback(()=>{const T=new Date(e);switch(n){case"year":T.setFullYear(e.getFullYear()-1);break;case"month":T.setMonth(e.getMonth()-1);break;case"week":T.setDate(e.getDate()-7);break;case"day":T.setDate(e.getDate()-1);break}s(T)},[e,n]),v=j.useCallback(()=>{const T=new Date(e);switch(n){case"year":T.setFullYear(e.getFullYear()+1);break;case"month":T.setMonth(e.getMonth()+1);break;case"week":T.setDate(e.getDate()+7);break;case"day":T.setDate(e.getDate()+1);break}s(T)},[e,n]),S=j.useCallback(()=>{s(new Date)},[]),C=j.useCallback(T=>{const A={...T,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c(I=>[...I,A])},[]),N=j.useCallback((T,A)=>{c(I=>I.map(P=>P.id===T?{...P,...A,updated_at:new Date().toISOString()}:P))},[]),M=j.useCallback(T=>{c(A=>A.filter(I=>I.id!==T))},[]),k=j.useCallback((T,A)=>l.filter(I=>{const P=new Date(I.start_time),H=new Date(I.end_time);return P>=T&&P<=A||H>=T&&H<=A||P<=T&&H>=A}),[l]),w=j.useCallback(async T=>{try{const A=x(T),I=await wn.createTodo(A),P=f(I);return h(H=>[...H,P]),P}catch(A){console.error("Failed to add todo:",A);const I={...T,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date};return h(P=>[...P,I]),I}},[]),_=j.useCallback(async(T,A)=>{try{const I=x(A),P=await wn.updateTodo(T,I),H=f(P);h(z=>z.map(F=>F.id===T?H:F))}catch(I){console.error("Failed to update todo:",I),h(P=>P.map(H=>H.id===T?{...H,...A,updatedAt:new Date}:H))}},[]),E=j.useCallback(async T=>{try{await wn.deleteTodo(T),h(A=>A.filter(I=>I.id!==T))}catch(A){console.error("Failed to delete todo:",A),h(I=>I.filter(P=>P.id!==T))}},[]),D=j.useCallback(async T=>{try{const A=await wn.toggleTodo(T),I=f(A);h(P=>P.map(H=>H.id===T?I:H))}catch(A){console.error("Failed to toggle todo:",A),h(I=>I.map(P=>P.id===T?{...P,completed:!P.completed,updatedAt:new Date}:P))}},[]),O=j.useCallback(T=>{const A=$(T,"yyyy-MM-dd");return d.filter(I=>I.date===A)},[d]),L={currentDate:e,viewMode:n,events:l,selectedDate:i,settings:g,todos:d,setCurrentDate:s,setViewMode:r,setSelectedDate:o,navigatePrevious:y,navigateNext:v,navigateToday:S,addEvent:C,updateEvent:N,deleteEvent:M,getEventsForDateRange:k,addTodo:w,updateTodo:_,deleteTodo:E,toggleTodo:D,getTodosForDate:O};return a.jsx(hm.Provider,{value:L,children:t})},vy=async(t=[])=>{const e=new Date,s=$(e,"yyyy-MM-dd");try{const[n,r]=await Promise.all([Tt.getEvents({start_date:s,end_date:s}),Ie.getDiaryByDate(s).catch(()=>null)]),i=t.filter(l=>It(new Date(l.date),e)),o=i.filter(l=>l.completed).length;return{events:n||[],todos:i,diary:r,hasScheduledEvents:((n==null?void 0:n.length)||0)>0,completedTodos:o,totalTodos:i.length}}catch(n){return console.error("Failed to fetch today data:",n),{events:[],todos:[],diary:null,hasScheduledEvents:!1,completedTodos:0,totalTodos:0}}},jy=async(t=[])=>{const e=new Date,s=Cr(e,{weekStartsOn:0}),n=_r(e,{weekStartsOn:0}),r=Mr({start:s,end:n});try{const[i,o]=await Promise.all([Tt.getEvents({start_date:$(s,"yyyy-MM-dd"),end_date:$(n,"yyyy-MM-dd")}),Promise.all(r.map(u=>Ie.getDiaryByDate($(u,"yyyy-MM-dd")).catch(()=>null)))]),l=t.filter(u=>{const g=new Date(u.date);return g>=s&&g<=n}),c=l.filter(u=>u.completed).length,d=l.length>0?c/l.length*100:0,h=o.filter(u=>u&&u.mood).map(u=>({date:u.date,mood:u.mood||"😐"})),m=r.map(u=>{const g=$(u,"yyyy-MM-dd"),f=(i==null?void 0:i.filter(y=>$(new Date(y.start_time),"yyyy-MM-dd")===g))||[],x=l.filter(y=>$(new Date(y.date),"yyyy-MM-dd")===g),p=o.some(y=>y&&y.date===g);return{date:g,events:f.length,todos:x.length,diary:p}});return{completionRate:Math.round(d),totalEvents:(i==null?void 0:i.length)||0,totalDiaries:o.filter(u=>u).length,moodTrend:h,activityData:m}}catch(i){return console.error("Failed to fetch weekly stats:",i),{completionRate:0,totalEvents:0,totalDiaries:0,moodTrend:[],activityData:[]}}},wy=async(t=[])=>{const e=new Date,s=sr(e),n=nr(e),r=Mr({start:s,end:n});try{const[i,o]=await Promise.all([Tt.getEvents({start_date:$(s,"yyyy-MM-dd"),end_date:$(n,"yyyy-MM-dd")}),Promise.all(r.map(u=>Ie.getDiaryByDate($(u,"yyyy-MM-dd")).catch(()=>null)))]),l=t.filter(u=>{const g=new Date(u.date);return g>=s&&g<=n}),c=r.map(u=>{const g=$(u,"yyyy-MM-dd"),f=(i==null?void 0:i.filter(v=>$(new Date(v.start_time),"yyyy-MM-dd")===g))||[],x=l.filter(v=>$(new Date(v.date),"yyyy-MM-dd")===g),p=o.some(v=>v&&v.date===g);let y=0;return f.length>0&&(y+=1),x.length>0&&(y+=1),p&&(y+=1),x.filter(v=>v.completed).length>0&&(y+=1),{date:g,intensity:Math.min(y,4)}}),d=new Map;i==null||i.forEach(u=>{u.tags&&Array.isArray(u.tags)&&u.tags.forEach(g=>{const f=typeof g=="string"?g:g.name;d.set(f,(d.get(f)||0)+1)})});const h=Array.from(d.entries()).sort((u,g)=>g[1]-u[1]).slice(0,10).map(([u,g],f)=>({name:u,count:g,color:["#3B82F6","#8B5CF6","#10B981","#F59E0B","#EF4444","#6366F1","#EC4899","#14B8A6","#F97316","#84CC16"][f]||"#6B7280"})),m=((i==null?void 0:i.length)||0)+l.length+o.filter(u=>u).length;return{activityHeatmap:c,tagDistribution:h,totalActivities:m}}catch(i){return console.error("Failed to fetch monthly stats:",i),{activityHeatmap:[],tagDistribution:[],totalActivities:0}}},ky=async(t=[])=>{try{const[e,s,n]=await Promise.all([vy(t),jy(t),wy(t)]);return{today:e,week:s,month:n}}catch(e){throw console.error("Failed to fetch dashboard data:",e),e}},Ny=t=>[{id:"add-event",label:"일정 추가",icon:"📅",color:"bg-blue-500 hover:bg-blue-600",action:()=>{var e;(e=t==null?void 0:t.onAddEvent)==null||e.call(t)}},{id:"add-todo",label:"할일 추가",icon:"✅",color:"bg-green-500 hover:bg-green-600",action:()=>{var e;(e=t==null?void 0:t.onAddTodo)==null||e.call(t)}},{id:"write-diary",label:"일기 작성",icon:"📝",color:"bg-purple-500 hover:bg-purple-600",action:()=>{var e;(e=t==null?void 0:t.onWriteDiary)==null||e.call(t)}},{id:"view-calendar",label:"캘린더 보기",icon:"🗓️",color:"bg-orange-500 hover:bg-orange-600",action:()=>{window.location.href="/calendar"}}],Sy={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},Cy=(t,e,s)=>{let n;const r=Sy[t];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?n+" 후":n+" 전":n},_y={full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},My={full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ey={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Ty={date:Ai({formats:_y,defaultWidth:"full"}),time:Ai({formats:My,defaultWidth:"full"}),dateTime:Ai({formats:Ey,defaultWidth:"full"})},Ay={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},Dy=(t,e,s,n)=>Ay[t],Py={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},Ry={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},Ly={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},Oy={narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},Iy={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},Fy={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},By=(t,e)=>{const s=Number(t);switch(String(e==null?void 0:e.unit)){case"minute":case"second":return String(s);case"date":return s+"일";default:return s+"번째"}},$y={ordinalNumber:By,era:yn({values:Py,defaultWidth:"wide"}),quarter:yn({values:Ry,defaultWidth:"wide",argumentCallback:t=>t-1}),month:yn({values:Ly,defaultWidth:"wide"}),day:yn({values:Oy,defaultWidth:"wide"}),dayPeriod:yn({values:Iy,defaultWidth:"wide",formattingValues:Fy,defaultFormattingWidth:"wide"})},Vy=/^(\d+)(일|번째)?/i,Hy=/\d+/i,zy={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},Uy={any:[/^(bc|기원전)/i,/^(ad|서기)/i]},Wy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},Yy={any:[/1/i,/2/i,/3/i,/4/i]},Gy={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},Ky={any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},qy={narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},Jy={any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},Xy={any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},Qy={any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},Zy={ordinalNumber:np({matchPattern:Vy,parsePattern:Hy,valueCallback:t=>parseInt(t,10)}),era:vn({matchPatterns:zy,defaultMatchWidth:"wide",parsePatterns:Uy,defaultParseWidth:"any"}),quarter:vn({matchPatterns:Wy,defaultMatchWidth:"wide",parsePatterns:Yy,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vn({matchPatterns:Gy,defaultMatchWidth:"wide",parsePatterns:Ky,defaultParseWidth:"any"}),day:vn({matchPatterns:qy,defaultMatchWidth:"wide",parsePatterns:Jy,defaultParseWidth:"any"}),dayPeriod:vn({matchPatterns:Xy,defaultMatchWidth:"any",parsePatterns:Qy,defaultParseWidth:"any"})},ve={code:"ko",formatDistance:Cy,formatLong:Ty,formatRelative:Dy,localize:$y,match:Zy,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ev({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const um=j.forwardRef(ev);function tv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const sv=j.forwardRef(tv);function nv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const rv=j.forwardRef(nv);function av({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const iv=j.forwardRef(av);function ov({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const Pl=j.forwardRef(ov);function lv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.143 17.082a24.248 24.248 0 0 0 3.844.148m-3.844-.148a23.856 23.856 0 0 1-5.455-1.31 8.964 8.964 0 0 0 2.3-5.542m3.155 6.852a3 3 0 0 0 5.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 0 0 3.536-1.003A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53"}))}const cv=j.forwardRef(lv);function dv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Oi=j.forwardRef(dv);function hv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const We=j.forwardRef(hv);function uv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Wt=j.forwardRef(uv);function mv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Ra=j.forwardRef(mv);function gv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ct=j.forwardRef(gv);function fv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const mn=j.forwardRef(fv);function xv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const mm=j.forwardRef(xv);function pv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const bv=j.forwardRef(pv);function yv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const vv=j.forwardRef(yv);function jv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const wv=j.forwardRef(jv);function kv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Nv=j.forwardRef(kv);function Sv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Vn=j.forwardRef(Sv);function Cv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const _v=j.forwardRef(Cv);function Mv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const wa=j.forwardRef(Mv);function Ev({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const gm=j.forwardRef(Ev);function Tv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const ud=j.forwardRef(Tv);function Av({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Js=j.forwardRef(Av);function Dv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Pv=j.forwardRef(Dv);function Rv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Lv=j.forwardRef(Rv);function Ov({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Iv=j.forwardRef(Ov);function Fv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Rl=j.forwardRef(Fv);function Bv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const $v=j.forwardRef(Bv);function Vv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Hv=j.forwardRef(Vv);function zv({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const fm=j.forwardRef(zv),md=(t,e,s="시간 오류")=>{try{if(!t)return s;const n=typeof t=="string"?new Date(t):t;return A0(n)?$(n,e,{locale:ve}):(console.warn("Invalid date value:",t),s)}catch(n){return console.error("Date formatting error:",n,"Input:",t),s}},Uv=t=>{try{if(!t)return!1;const e=typeof t=="string"?new Date(t):t;return A0(e)?e<new Date:!1}catch(e){return console.error("Date comparison error:",e,"Input:",t),!1}};function Wv({todayData:t,loading:e}){const s=new Date;if(e)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-full"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-2/3"})]})]})});const n=t.totalTodos>0?Math.round(t.completedTodos/t.totalTodos*100):0;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"오늘의 요약"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:md(s,"yyyy년 M월 d일 EEEE","날짜 오류")})]}),a.jsx("div",{className:"text-2xl",children:"📊"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800/50 rounded-lg",children:a.jsx(Wt,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.events.length}),a.jsx("p",{className:"text-sm text-blue-600/70 dark:text-blue-400/70",children:"오늘 일정"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[a.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800/50 rounded-lg",children:a.jsx(Ct,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[t.completedTodos,"/",t.totalTodos]}),a.jsx("p",{className:"text-sm text-green-600/70 dark:text-green-400/70",children:"완료된 할일"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-800/50 rounded-lg",children:a.jsx(We,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.diary?"작성됨":"미작성"}),a.jsx("p",{className:"text-sm text-purple-600/70 dark:text-purple-400/70",children:"오늘 일기"})]})]})]}),t.totalTodos>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"할일 완료율"}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Wt,{className:"h-5 w-5"}),"오늘 일정 (",t.events.length,")"]}),t.events.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Wt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"오늘 예정된 일정이 없습니다"})]}):a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.events.map(r=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(mn,{className:"h-4 w-4 text-gray-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:r.title}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.all_day?"종일":md(r.start_time,"HH:mm","--:--")})]}),!r.all_day&&Uv(r.start_time)&&a.jsx(vv,{className:"h-4 w-4 text-orange-500"})]},r.id))})]}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Ct,{className:"h-5 w-5"}),"오늘 할일 (",t.todos.length,")"]}),t.todos.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Ct,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"오늘 예정된 할일이 없습니다"})]}):a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.todos.map(r=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${r.completed?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-500"}`,children:r.completed&&a.jsx(Ct,{className:"h-3 w-3 text-white"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-medium truncate ${r.completed?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-white"}`,children:r.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${r.priority==="high"?"bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400":r.priority==="medium"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-600 dark:bg-green-900/20 dark:text-green-400"}`,children:r.priority==="high"?"높음":r.priority==="medium"?"보통":"낮음"})})]})]},r.id))})]}),a.jsx("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-purple-300 dark:border-purple-600",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(We,{className:"h-6 w-6 text-purple-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.diary?"오늘 일기가 작성되었습니다":"오늘 일기를 작성해보세요"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.diary?`기분: ${t.diary.mood||"😐"}`:"하루를 마무리하며 생각을 정리해보세요"})]})]})})]})}function Yv({weeklyData:t,loading:e}){if(e)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-600 rounded mb-4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-full"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-2/3"})]})]})});const s=Math.max(...t.activityData.map(n=>n.events+n.todos+(n.diary?1:0)),1);return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"주간 통계"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"지난 7일간의 활동 요약"})]}),a.jsx("div",{className:"text-2xl",children:"📈"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[t.completionRate,"%"]}),a.jsx("div",{className:"text-xs text-green-600/70 dark:text-green-400/70 mt-1",children:"할일 완료율"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.totalEvents}),a.jsx("div",{className:"text-xs text-blue-600/70 dark:text-blue-400/70 mt-1",children:"총 일정"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.totalDiaries}),a.jsx("div",{className:"text-xs text-purple-600/70 dark:text-purple-400/70 mt-1",children:"일기 작성"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-lg",children:[a.jsx("div",{className:"text-2xl",children:t.moodTrend.length>0?t.moodTrend[t.moodTrend.length-1].mood:"😐"}),a.jsx("div",{className:"text-xs text-yellow-600/70 dark:text-yellow-400/70 mt-1",children:"최근 기분"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:[a.jsx(Ra,{className:"h-5 w-5"}),"일별 활동량"]}),a.jsx("div",{className:"space-y-3",children:t.activityData.map((n,r)=>{const i=n.events+n.todos+(n.diary?1:0),o=s>0?i/s*100:0,l=$(new Date(n.date),"E",{locale:ve}),c=$(new Date(n.date),"d");return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"w-12 text-xs text-gray-500 dark:text-gray-400",children:[l," ",c]}),a.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[a.jsxs("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative overflow-hidden",children:[o>0&&a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-full rounded-full transition-all duration-300",style:{width:`${o}%`}}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-start pl-2 gap-1",children:[n.events>0&&a.jsx(Wt,{className:"h-3 w-3 text-white"}),n.todos>0&&a.jsx(Ct,{className:"h-3 w-3 text-white"}),n.diary&&a.jsx(We,{className:"h-3 w-3 text-white"})]})]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 w-8 text-right",children:i})]})]},n.date)})})]}),t.moodTrend.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:"📊 기분 트렌드"}),a.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:t.moodTrend.map((n,r)=>{const i=new Date(n.date),o=$(i,"E",{locale:ve}),l=$(i,"d");return a.jsxs("div",{className:"flex-shrink-0 text-center p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-2xl mb-1",children:n.mood}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[o," ",l]})]},n.date)})})]}),t.totalEvents===0&&t.totalDiaries===0&&t.completionRate===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Ra,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"이번 주 활동 기록이 없습니다"}),a.jsx("p",{className:"text-sm",children:"일정을 추가하고 일기를 작성해보세요!"})]})]})}function Gv({monthlyData:t,loading:e}){const s=new Date,n=sr(s),r=nr(s),i=Cr(n,{weekStartsOn:0}),o=_r(r,{weekStartsOn:0}),l=Mr({start:i,end:o});if(e)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:Array.from({length:42}).map((m,u)=>a.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-600 rounded"},u))})]})});const c=m=>{switch(m){case 0:return"bg-gray-100 dark:bg-gray-700";case 1:return"bg-green-200 dark:bg-green-800/50";case 2:return"bg-green-300 dark:bg-green-700/70";case 3:return"bg-green-400 dark:bg-green-600/80";case 4:return"bg-green-500 dark:bg-green-500";default:return"bg-gray-100 dark:bg-gray-700"}},d=m=>{const u=$(m,"yyyy-MM-dd"),g=t.activityHeatmap.find(f=>f.date===u);return(g==null?void 0:g.intensity)||0},h=["일","월","화","수","목","금","토"];return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"월간 활동 히트맵"}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[$(s,"yyyy년 M월",{locale:ve})," 활동량 시각화"]})]}),a.jsx("div",{className:"text-2xl",children:"📅"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:h.map(m=>a.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400 font-medium",children:m},m))}),a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:l.map(m=>{const u=d(m),g=m>=n&&m<=r,f=$(m,"yyyy-MM-dd")===$(s,"yyyy-MM-dd");return a.jsx("div",{className:`
                aspect-square flex items-center justify-center text-xs font-medium rounded-lg transition-all cursor-pointer
                ${g?c(u):"bg-gray-50 dark:bg-gray-800/50"}
                ${g?"text-gray-800 dark:text-gray-200":"text-gray-400 dark:text-gray-500"}
                ${f?"ring-2 ring-blue-500":""}
                hover:scale-105
              `,title:`${$(m,"M월 d일",{locale:ve})}: 활동량 ${u}`,children:$(m,"d")},m.toISOString())})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"적음"}),a.jsx("div",{className:"flex gap-1",children:[0,1,2,3,4].map(m=>a.jsx("div",{className:`w-3 h-3 rounded-sm ${c(m)}`},m))}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"많음"})]}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["총 활동: ",t.totalActivities,"개"]})]}),t.tagDistribution.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"🏷️ 인기 태그"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.tagDistribution.slice(0,6).map(m=>a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:m.color}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:m.name}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[m.count,"회 사용"]})]})]},m.name))})]}),t.totalActivities===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"text-4xl mb-3",children:"📊"}),a.jsx("p",{children:"이번 달 활동 기록이 없습니다"}),a.jsx("p",{className:"text-sm",children:"일정과 일기를 작성하여 활동을 기록해보세요!"})]})]})}function Kv({actions:t,loading:e}){return e?a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mb-4"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((s,n)=>a.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-600 rounded-lg"},n))})]})}):a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"빠른 액션"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"자주 사용하는 기능들을 빠르게 실행하세요"})]}),a.jsx("div",{className:"text-2xl",children:"⚡"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map(s=>a.jsxs("button",{onClick:s.action,className:`
              flex flex-col items-center justify-center p-4 rounded-lg text-white
              ${s.color} 
              transition-all duration-200 hover:scale-105 hover:shadow-lg
              focus:outline-none focus:ring-4 focus:ring-opacity-50
            `,children:[a.jsx("div",{className:"text-2xl mb-2",children:s.icon}),a.jsx("span",{className:"text-sm font-medium text-center",children:s.label})]},s.id))}),a.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"text-blue-500 text-lg",children:"💡"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"생산성 팁"}),a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"매일 아침 오늘 할 일을 정리하고, 저녁에는 하루를 되돌아보며 일기를 작성해보세요."})]})]})})]})}const qv=({tag:t,onDelete:e,onClick:s,size:n="medium",deletable:r=!1})=>{const i={small:"text-xs px-2 py-0.5",medium:"text-sm px-3 py-1",large:"text-base px-4 py-2"},o=l=>{l.stopPropagation(),e==null||e()};return a.jsxs("span",{className:`
        inline-flex items-center gap-1 rounded-full font-medium
        ${i[n]}
        ${s?"cursor-pointer hover:opacity-80":""}
        transition-opacity
      `,style:{backgroundColor:`${t.color}20`,color:t.color,border:`1px solid ${t.color}40`},onClick:s,children:[a.jsx("span",{children:t.name}),r&&e&&a.jsx("button",{className:"ml-1 hover:opacity-60 focus:outline-none",onClick:o,"aria-label":`Remove ${t.name} tag`,children:a.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},Jv=({selectedTags:t,onTagsChange:e,placeholder:s="태그를 선택하세요",allowCreate:n=!0})=>{const[r,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(""),[h,m]=j.useState(!1),[u,g]=j.useState(!1),[f,x]=j.useState(""),[p,y]=j.useState("#3B82F6"),v=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280","#F97316"];j.useEffect(()=>{S()},[]);const S=async()=>{try{m(!0);const w=await hd.getTags();i(w)}catch(w){console.error("Failed to load tags:",w)}finally{m(!1)}},C=w=>{t.find(_=>_.id===w.id)||e([...t,w]),l(!1),d("")},N=w=>{e(t.filter(_=>_.id!==w))},M=async()=>{if(f.trim())try{g(!0);const w=await hd.createTag({name:f.trim(),color:p});i([...r,w]),C(w),x(""),y("#3B82F6")}catch(w){console.error("Failed to create tag:",w)}finally{g(!1)}},k=r.filter(w=>w.name.toLowerCase().includes(c.toLowerCase())&&!t.find(_=>_.id===w.id));return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.map(w=>a.jsx(qv,{tag:w,size:"small",deletable:!0,onDelete:()=>N(w.id)},w.id))}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>l(!o),children:a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:t.length>0?`${t.length}개 태그 선택됨`:s})}),o&&a.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg",children:[a.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:a.jsx("input",{type:"text",className:"w-full px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"태그 검색...",value:c,onChange:w=>d(w.target.value),onClick:w=>w.stopPropagation()})}),a.jsx("div",{className:"max-h-48 overflow-y-auto",children:h?a.jsx("div",{className:"p-3 text-center text-gray-500",children:"로딩 중..."}):k.length>0?k.map(w=>a.jsxs("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",onClick:()=>C(w),children:[a.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:w.color}}),a.jsx("span",{className:"text-sm",children:w.name})]},w.id)):a.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:c?"일치하는 태그가 없습니다":"사용 가능한 태그가 없습니다"})}),n&&a.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"새 태그 이름",value:f,onChange:w=>x(w.target.value),onClick:w=>w.stopPropagation()}),a.jsx("div",{className:"flex gap-1",children:v.map(w=>a.jsx("button",{type:"button",className:`w-6 h-6 rounded-full border-2 ${p===w?"border-gray-800 dark:border-gray-200":"border-transparent"}`,style:{backgroundColor:w},onClick:()=>y(w)},w))})]}),a.jsx("button",{type:"button",className:"w-full px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",onClick:M,disabled:!f.trim()||u,children:u?"생성 중...":"새 태그 만들기"})]})]})]})]})},xm=({isOpen:t,onClose:e,onSave:s,event:n,initialDate:r})=>{const{addTodo:i}=ct(),[o,l]=j.useState("event"),[c,d]=j.useState({title:"",description:"",start_time:r?$(r,"yyyy-MM-dd'T'HH:mm"):$(new Date,"yyyy-MM-dd'T'HH:mm"),end_time:r?$(new Date(r.getTime()+60*60*1e3),"yyyy-MM-dd'T'HH:mm"):$(new Date(Date.now()+60*60*1e3),"yyyy-MM-dd'T'HH:mm"),all_day:!1,location:"",type:"personal",color:"#3b82f6",reminder_minutes:15,tags:[]}),[h,m]=j.useState([]),[u,g]=j.useState({text:"",priority:"medium",date:r?$(r,"yyyy-MM-dd"):$(new Date,"yyyy-MM-dd")});j.useEffect(()=>{n?(d(n),m(n.tags||[]),l("event")):r&&(d(y=>({...y,start_time:$(r,"yyyy-MM-dd'T'HH:mm"),end_time:$(new Date(r.getTime()+60*60*1e3),"yyyy-MM-dd'T'HH:mm")})),g(y=>({...y,date:$(r,"yyyy-MM-dd")})))},[n,r]);const f=()=>{if(!u.text.trim()){alert("할일 내용을 입력해주세요.");return}try{i({text:u.text.trim(),completed:!1,priority:u.priority,date:u.date}),e()}catch(y){console.error("Failed to save todo:",y),alert("할일 저장에 실패했습니다.")}},x=async y=>{if(y.preventDefault(),o==="todo"){f();return}if(!c.title||!c.start_time||!c.end_time){alert("제목과 시간을 입력해주세요.");return}try{const v={title:c.title,description:c.description,start_time:c.start_time?`${c.start_time}:00`:c.start_time,end_time:c.end_time?`${c.end_time}:00`:c.end_time,all_day:c.all_day,location:c.location,type:c.type,color:c.color,reminder_minutes:c.reminder_minutes===void 0?void 0:c.reminder_minutes};console.log("Sending API data:",v);let S;n!=null&&n.id?(console.log("Updating event with ID:",n.id),S=await Tt.updateEvent(n.id,v),S.tags=h):(console.log("Creating new event..."),S=await Tt.createEvent(v),S.tags=h),console.log("Event saved successfully:",S),s(S),e()}catch(v){console.error("Failed to save event - Full error:",v),v.response?(console.error("Response status:",v.response.status),console.error("Response data:",v.response.data)):v.request?console.error("Request was made but no response:",v.request):console.error("Error message:",v.message),alert(`일정 저장에 실패했습니다: ${v.message||"알 수 없는 오류"}`)}},p=async()=>{if(n!=null&&n.id&&window.confirm("이 일정을 삭제하시겠습니까?"))try{await Tt.deleteEvent(n.id),e(),window.location.reload()}catch(y){console.error("Failed to delete event:",y),alert("일정 삭제에 실패했습니다.")}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-background rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto border border-border",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-foreground",children:n?"일정 수정":"새 작성"}),!n&&a.jsxs("div",{className:"flex mb-6 bg-muted rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>l("event"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${o==="event"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"📅 일정"}),a.jsx("button",{type:"button",onClick:()=>l("todo"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${o==="todo"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"✅ 할일"})]}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o==="todo"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"할일 내용*"}),a.jsx("input",{type:"text",value:u.text,onChange:y=>g({...u,text:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",placeholder:"할일을 입력하세요...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"우선순위"}),a.jsx("div",{className:"flex space-x-2",children:[{value:"high",label:"높음",icon:"🔴"},{value:"medium",label:"보통",icon:"🟡"},{value:"low",label:"낮음",icon:"🟢"}].map(y=>a.jsxs("button",{type:"button",onClick:()=>g({...u,priority:y.value}),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium border transition-colors ${u.priority===y.value?"border-primary-500 bg-primary-500/10 text-primary-600":"border-border hover:border-primary-300"}`,children:[a.jsx("span",{className:"mr-1",children:y.icon}),y.label]},y.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"날짜"}),a.jsx("input",{type:"date",value:u.date,onChange:y=>g({...u,date:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"제목*"}),a.jsx("input",{type:"text",value:c.title,onChange:y=>d({...c,title:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"설명"}),a.jsx("textarea",{value:c.description||"",onChange:y=>d({...c,description:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",rows:3})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:c.all_day,onChange:y=>d({...c,all_day:y.target.checked}),className:"mr-2"}),a.jsx("label",{className:"text-sm text-foreground",children:"종일"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"시작*"}),a.jsx("input",{type:"datetime-local",value:c.start_time,onChange:y=>d({...c,start_time:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"종료*"}),a.jsx("input",{type:"datetime-local",value:c.end_time,onChange:y=>d({...c,end_time:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"위치"}),a.jsx("input",{type:"text",value:c.location||"",onChange:y=>d({...c,location:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"유형"}),a.jsxs("select",{value:c.type,onChange:y=>d({...c,type:y.target.value}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",children:[a.jsx("option",{value:"personal",children:"개인"}),a.jsx("option",{value:"work",children:"업무"}),a.jsx("option",{value:"holiday",children:"휴일"}),a.jsx("option",{value:"other",children:"기타"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"색상"}),a.jsx("input",{type:"color",value:c.color||"#3b82f6",onChange:y=>d({...c,color:y.target.value}),className:"w-full h-10 border border-border rounded-md bg-background"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"태그"}),a.jsx(Jv,{selectedTags:h,onTagsChange:m,placeholder:"태그를 선택하거나 새로 만들기",allowCreate:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-foreground",children:"알림 (분)"}),a.jsxs("select",{value:c.reminder_minutes,onChange:y=>d({...c,reminder_minutes:parseInt(y.target.value)}),className:"w-full px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-primary-500 bg-background text-foreground",children:[a.jsx("option",{value:"0",children:"없음"}),a.jsx("option",{value:"5",children:"5분 전"}),a.jsx("option",{value:"10",children:"10분 전"}),a.jsx("option",{value:"15",children:"15분 전"}),a.jsx("option",{value:"30",children:"30분 전"}),a.jsx("option",{value:"60",children:"1시간 전"}),a.jsx("option",{value:"1440",children:"1일 전"})]})]})]}),a.jsxs("div",{className:"flex justify-between pt-4",children:[a.jsx("div",{children:(n==null?void 0:n.id)&&a.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-red-600 hover:bg-red-500/10 rounded-md",children:"삭제"})}),a.jsxs("div",{className:"space-x-2",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-foreground hover:bg-muted rounded-md",children:"취소"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600",children:n?"수정":o==="todo"?"할일 저장":"일정 저장"})]})]})]})]})}):null};function Xv({isOpen:t,onClose:e,children:s,className:n=""}){return j.useEffect(()=>{const r=i=>{i.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[t,e]),t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:e,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),a.jsx("div",{className:`
          relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl 
          max-w-lg w-full mx-4 max-h-[90vh] overflow-auto
          transform transition-all duration-200 scale-100
          ${n}
        `,onClick:r=>r.stopPropagation(),children:s})]}):null}const gd=[{emoji:"😊",label:"기쁨",traditional:"희(喜)",color:"wuxing-fire",element:"화(火)"},{emoji:"😢",label:"슬픔",traditional:"애(哀)",color:"wuxing-metal",element:"금(金)"},{emoji:"😠",label:"분노",traditional:"노(怒)",color:"wuxing-wood",element:"목(木)"},{emoji:"😰",label:"두려움",traditional:"공(恐)",color:"wuxing-water",element:"수(水)"},{emoji:"🤔",label:"생각",traditional:"사(思)",color:"wuxing-earth",element:"토(土)"},{emoji:"😌",label:"평온",traditional:"정(靜)",color:"yinyang-yin",element:"음(陰)"},{emoji:"🌟",label:"활기",traditional:"양(陽)",color:"yinyang-yang",element:"양(陽)"},{emoji:"😐",label:"담담",traditional:"무(無)",color:"wuxing-metal-light",element:"중용"}];function Qv({isOpen:t,onClose:e,date:s,onSave:n}){const[r,i]=j.useState(s),[o,l]=j.useState(""),[c,d]=j.useState(""),[h,m]=j.useState(!1),[u,g]=j.useState(null),[f,x]=j.useState(null),[p,y]=j.useState(null),[v,S]=j.useState(!1);j.useEffect(()=>{t&&s&&C()},[s,t]);const C=async()=>{var k;m(!0),y(null);try{const w=$(s,"yyyy-MM-dd"),_=await Ie.getDiaryByDate(w);g(_),l(_.content),d(_.mood||"")}catch(w){((k=w.response)==null?void 0:k.status)===404?(g(null),l(""),d("")):(console.error("Failed to fetch diary:",w),y("일기를 불러오는데 실패했습니다."))}finally{m(!1)}},N=async()=>{if(o.trim()){m(!0),y(null);try{const w={date:$(s,"yyyy-MM-dd"),content:o.trim(),mood:c||"😐",weather:void 0,tags:[]};let _;u!=null&&u.id?_=await Ie.updateDiary(u.id,w):_=await Ie.createDiary(w),n&&n(_),alert(u?"일기가 수정되었습니다.":"일기가 저장되었습니다."),e()}catch(k){console.error("Failed to save diary:",k),y("일기 저장에 실패했습니다. 다시 시도해주세요.")}finally{m(!1)}}},M=()=>{o!==((u==null?void 0:u.content)||"")||c!==((u==null?void 0:u.mood)||"")?window.confirm("작성 중인 내용이 있습니다. 정말 닫으시겠습니까?")&&e():e()};return a.jsx(Xv,{isOpen:t,onClose:M,className:"max-w-2xl",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["📝 ",$(s,"yyyy년 M월 d일 EEEE",{locale:ve})," 일기"]}),a.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xl",children:"✕"})]}),p&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["⚠️ ",p]})}),h&&!u&&a.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"📖 일기를 불러오는 중..."})}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎭"}),"오늘의 마음을 선택해주세요",a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(오행 감정론 기반)"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:gd.map(({emoji:k,label:w,traditional:_,color:E,element:D})=>a.jsxs("button",{onClick:()=>d(k),className:`
                  group relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-300 hover:scale-105
                  ${c===k?`border-${E} bg-gradient-to-br from-${E}/10 to-${E}/20 shadow-lg`:"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-800"}
                `,style:{borderColor:c===k?`hsl(var(--${E.replace("wuxing-","").replace("yinyang-","")}))`:void 0},children:[a.jsxs("div",{className:"relative mb-2",children:[a.jsx("span",{className:"text-2xl transition-transform group-hover:scale-110",children:k}),c===k&&a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs text-white",children:"✓"})})]}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:w}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:_}),a.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:D}),c===k&&a.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-transparent via-white/20 to-transparent opacity-50 pointer-events-none"})]},k))}),c&&a.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(()=>{const k=gd.find(w=>w.emoji===c);return a.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[a.jsx("span",{className:"font-semibold",children:k==null?void 0:k.traditional})," - ",k==null?void 0:k.element," 기운의 감정입니다.",(k==null?void 0:k.element)==="화(火)"&&" 밝고 활발한 에너지를 나타냅니다.",(k==null?void 0:k.element)==="금(金)"&&" 차분하고 정제된 에너지를 나타냅니다.",(k==null?void 0:k.element)==="목(木)"&&" 성장하고 발전하려는 에너지를 나타냅니다.",(k==null?void 0:k.element)==="수(水)"&&" 유연하고 깊이 있는 에너지를 나타냅니다.",(k==null?void 0:k.element)==="토(土)"&&" 안정되고 신중한 에너지를 나타냅니다.",(k==null?void 0:k.element)==="음(陰)"&&" 고요하고 내향적인 에너지를 나타냅니다.",(k==null?void 0:k.element)==="양(陽)"&&" 활발하고 외향적인 에너지를 나타냅니다.",(k==null?void 0:k.element)==="중용"&&" 균형잡힌 중도의 마음을 나타냅니다."]})})()})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"오늘 하루는 어떠셨나요?"}),a.jsx("textarea",{value:o,onChange:k=>l(k.target.value),placeholder:"오늘 있었던 일, 느낀 점, 감사한 일 등을 자유롭게 적어보세요...",rows:8,className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg resize-none bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsxs("div",{className:"flex justify-between mt-2",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:[o.length," / 1000자"]}),a.jsx("span",{className:"text-xs text-gray-400",children:"Tab 키로 들여쓰기 가능"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:M,disabled:h,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"취소"}),a.jsx("button",{onClick:N,disabled:!o.trim()||h,className:`
              px-6 py-2 rounded-lg text-white font-medium transition-colors
              ${o.trim()&&!h?"bg-purple-600 hover:bg-purple-700":"bg-gray-400 cursor-not-allowed"}
            `,children:h?"저장 중...":u?"수정하기":"저장하기"})]}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["💡 ",a.jsx("strong",{children:"팁:"})," 일기는 자동으로 저장되지 않습니다. 작성 완료 후 반드시 저장 버튼을 눌러주세요."]})})]})})}function Zv({userId:t}){const[e,s]=j.useState(null),[n,r]=j.useState([]),[i,o]=j.useState(!0);j.useEffect(()=>{l(),c()},[t]);const l=async()=>{try{s({totalCoursesEnrolled:5,completedCourses:2,inProgressCourses:3,totalLessonsCompleted:24,totalStudyTime:14400,averageScore:87,streak:7,certificates:2}),o(!1)}catch(m){console.error("학습 통계 로딩 실패:",m),o(!1)}},c=()=>{r([{week:"1주",lessonsCompleted:2,studyTime:1800},{week:"2주",lessonsCompleted:4,studyTime:2400},{week:"3주",lessonsCompleted:6,studyTime:3200},{week:"4주",lessonsCompleted:5,studyTime:2800},{week:"5주",lessonsCompleted:7,studyTime:4200}])},d=m=>{const u=Math.floor(m/3600),g=Math.floor(m%3600/60);return u>0?`${u}시간 ${g}분`:`${g}분`},h=Math.max(...n.map(m=>m.lessonsCompleted));return i?a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]})]})}):e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:a.jsx(We,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.completedCourses}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"완료한 강좌"})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:a.jsx(mn,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Math.floor(e.totalStudyTime/3600)}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"총 학습시간"})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:a.jsx(Js,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.averageScore}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"평균 점수"})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:a.jsx(Wt,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.streak}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"연속 학습일"})]})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"주간 학습 진도"}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Ra,{className:"h-4 w-4 mr-1"}),"최근 5주"]})]}),a.jsx("div",{className:"space-y-4",children:n.map((m,u)=>a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-8 text-sm text-gray-600 dark:text-gray-400",children:m.week}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[m.lessonsCompleted,"개 레슨"]}),a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:d(m.studyTime)})]}),a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${m.lessonsCompleted/h*100}%`}})})]})]},u))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"강좌 진행 현황"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료"}),a.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[e.completedCourses,"개"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"진행중"}),a.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:[e.inProgressCourses,"개"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"전체 진행률"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(e.completedCourses/e.totalCoursesEnrolled*100),"%"]})]}),a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full",style:{width:`${e.completedCourses/e.totalCoursesEnrolled*100}%`}})})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"성취 현황"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Iv,{className:"h-8 w-8 text-yellow-500"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["수료증 ",e.certificates,"개"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"강좌 완주 인증"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((m,u)=>a.jsx(Js,{className:`h-5 w-5 ${u<Math.floor(e.averageScore/20)?"text-yellow-500 fill-current":"text-gray-300 dark:text-gray-600"}`},u))}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["평균 ",e.averageScore,"점"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"퀴즈 성적"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-3",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["🔥 ",e.streak,"일 연속 학습 중!"]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"계속해서 꾸준히 학습해보세요"})]})]})]})]})]}):null}function e2({title:t,titleId:e,...s},n){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?j.createElement("title",{id:e},t):null,j.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const La=j.forwardRef(e2);function t2({course:t,progress:e,showEnrollButton:s=!0,onEnroll:n}){const r=ze(),[i,o]=j.useState(!1),l={beginner:"초급",intermediate:"중급",advanced:"고급",expert:"전문가"},c={basic:"기초",fortune:"운세",compatibility:"궁합",professional:"전문가",special:"특강"},d=x=>x===0?"무료":new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(x),h=x=>{const p=Math.floor(x/60),y=x%60;return p>0?`${p}시간 ${y}분`:`${y}분`},m=async()=>{if(n){o(!0);try{await n(t.id)}catch(x){console.error("수강신청 실패:",x)}finally{o(!1)}}},u=()=>{r(`/learning/${t.id}`)},g=()=>{r(`/learning/${t.id}`)},f=()=>e!=null&&e.isEnrolled?e.status==="completed"?a.jsxs("button",{onClick:g,className:"w-full px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[a.jsx(La,{className:"h-4 w-4 mr-1"}),"다시 보기"]}):e.progress>0?a.jsxs("button",{onClick:u,className:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[a.jsx(wa,{className:"h-4 w-4 mr-1"}),"이어서 보기"]}):a.jsxs("button",{onClick:g,className:"w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[a.jsx(wa,{className:"h-4 w-4 mr-1"}),"시작하기"]}):a.jsx("button",{onClick:m,disabled:i||t.status!=="published",className:"w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"수강신청 중...":t.price===0?"무료 수강하기":`${d(t.price)} 결제`});return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden group hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-purple-400 to-blue-500 overflow-hidden",children:[t.thumbnail?a.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"}):a.jsx("div",{className:"flex items-center justify-center h-full text-white",children:a.jsx(We,{className:"h-16 w-16 opacity-50"})}),a.jsxs("div",{className:"absolute top-3 left-3",children:[(e==null?void 0:e.status)==="completed"&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[a.jsx(La,{className:"h-3 w-3 mr-1"}),"완료"]}),(e==null?void 0:e.isEnrolled)&&e.status!=="completed"&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[a.jsx(wa,{className:"h-3 w-3 mr-1"}),"수강중"]}),t.status!=="published"&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:[a.jsx(Nv,{className:"h-3 w-3 mr-1"}),"준비중"]})]}),a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white/90 text-gray-900",children:d(t.price)})}),(e==null?void 0:e.isEnrolled)&&e.status!=="completed"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50",children:a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-white text-xs mb-1",children:[a.jsx("span",{children:"진도율"}),a.jsxs("span",{children:[e.progress,"%"]})]}),a.jsx("div",{className:"bg-white/20 rounded-full h-1",children:a.jsx("div",{className:"bg-white h-1 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})})]})})]}),a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:c[t.category]}),a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:l[t.level]})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:t.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:t.description}),a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx($v,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.instructor_name})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(mn,{className:"h-3 w-3 mr-1"}),h(t.duration)]}),a.jsxs("span",{className:"flex items-center",children:[a.jsx(We,{className:"h-3 w-3 mr-1"}),t.lessons_count,"개 강의"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Js,{className:"h-3 w-3 mr-1 text-yellow-500"}),a.jsx("span",{children:t.rating.toFixed(1)})]}),a.jsxs("span",{children:["(",t.enrollment_count,")"]})]})]}),s&&f(),(e==null?void 0:e.isEnrolled)&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.completedLessons,"/",e.totalLessons," 강의 완료",e.status==="completed"&&a.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:"🎉 수료 완료"})]})})]})]})}function s2(){const{todos:t,addTodo:e}=ct(),[s,n]=j.useState(null),[r,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState(!1),[h,m]=j.useState("overview"),[u,g]=j.useState([]),[f,x]=j.useState(!1),[p,y]=j.useState(!1),[v,S]=j.useState(!1),C=Ny({onAddEvent:()=>x(!0),onAddTodo:()=>S(!0),onWriteDiary:()=>y(!0)}),N=async(w=!1)=>{w?d(!0):i(!0),l(null);try{const _=await ky(t);n(_)}catch(_){console.error("Failed to load dashboard data:",_),l("대시보드 데이터를 불러오는데 실패했습니다.")}finally{i(!1),d(!1)}};j.useEffect(()=>{N(),M()},[t]);const M=async()=>{try{g([{id:"1",title:"사주 기초 입문 과정",description:"사주의 기본 개념부터 실전 해석까지",level:"beginner",category:"basic",status:"published",instructor_id:"1",instructor_name:"김사주 선생님",price:0,rating:4.8,enrollment_count:1234,duration:240,lessons_count:12,created_at:"2024-01-01"},{id:"2",title:"고급 사주 해석법",description:"전문가 수준의 사주 분석 기법",level:"advanced",category:"professional",status:"published",instructor_id:"2",instructor_name:"이운세 선생님",price:99e3,rating:4.9,enrollment_count:567,duration:480,lessons_count:24,created_at:"2024-02-01"}])}catch(w){console.error("수강 강좌 로딩 실패:",w)}},k=()=>{N(!0)};return r&&!s?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-48 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-32"})]}),a.jsx("div",{className:"animate-pulse",children:a.jsx("div",{className:"h-10 w-24 bg-gray-200 dark:bg-gray-600 rounded"})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"}),a.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"}),a.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-600 rounded-xl animate-pulse"})]})]})]})}):o?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"😵"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"오류가 발생했습니다"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:o}),a.jsx("button",{onClick:()=>N(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"다시 시도"})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:h==="overview"?"📊 대시보드":"🎓 학습 현황"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:h==="overview"?"한눈에 보는 나의 활동 현황":"학습 진도와 성취를 확인하세요"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 border border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>m("overview"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${h==="overview"?"bg-purple-600 text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"개요"}),a.jsx("button",{onClick:()=>m("learning"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${h==="learning"?"bg-purple-600 text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"학습"})]}),a.jsxs("button",{onClick:k,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[a.jsx(iv,{className:`h-4 w-4 ${c?"animate-spin":""}`}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:c?"새로고침 중...":"새로고침"})]})]})]}),h==="overview"?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s&&a.jsx(Wv,{todayData:s.today,loading:r}),s&&a.jsx(Yv,{weeklyData:s.week,loading:r})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsx(Kv,{actions:C,loading:r}),s&&a.jsx(Gv,{monthlyData:s.month,loading:r})]})]}):a.jsxs("div",{className:"space-y-8",children:[a.jsx(Zv,{userId:"user-1"}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"수강 중인 강좌"}),u.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"수강 중인 강좌가 없습니다"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"새로운 강좌를 수강해보세요"}),a.jsx("button",{onClick:()=>window.location.href="/saju",className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"강좌 둘러보기"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(w=>a.jsx(t2,{course:w,progress:{courseId:w.id,enrollmentId:`enrollment-${w.id}`,progress:w.id==="1"?25:60,completedLessons:w.id==="1"?3:14,totalLessons:w.lessons_count,isEnrolled:!0,status:(w.id==="1","enrolled")},showEnrollButton:!1},w.id))})]})]}),s&&a.jsx("div",{className:"mt-8 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"text-3xl",children:"🎯"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"오늘의 인사이트"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[s.today.totalTodos===0&&a.jsx("p",{children:"• 오늘 할일을 추가하여 하루를 계획해보세요"}),s.today.diary===null&&a.jsx("p",{children:"• 하루를 마무리하며 일기를 작성해보세요"}),s.week.completionRate>80&&a.jsxs("p",{children:["• 이번 주 할일 완료율이 ",s.week.completionRate,"%입니다. 정말 잘하고 계시네요! 🎉"]}),s.week.completionRate<50&&s.week.completionRate>0&&a.jsx("p",{children:"• 할일 완료율이 낮습니다. 작은 목표부터 차근차근 시작해보세요"}),s.month.totalActivities===0&&a.jsx("p",{children:"• 이번 달의 첫 활동을 기록해보세요!"})]})]})]})})]}),f&&a.jsx(xm,{onClose:()=>x(!1),onSave:w=>{console.log("새 이벤트 생성:",w),x(!1),N(!0)}}),p&&a.jsx(Qv,{date:new Date,onClose:()=>y(!1),onSave:()=>{y(!1),N(!0)}}),v&&(()=>{const w=prompt("새로운 할일을 입력하세요:");return w&&(e({text:w,completed:!1,priority:"medium",date:new Date().toISOString().split("T")[0]}),N(!0)),S(!1),null})()]})}function n2({stats:t}){const e=r=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(r),s=r=>new Intl.NumberFormat("ko-KR").format(r),n=[{title:"전체 강좌",value:s(t.totalCourses),icon:We,color:"blue",bgColor:"bg-blue-50 dark:bg-blue-900/20",iconColor:"text-blue-600 dark:text-blue-400",textColor:"text-blue-600 dark:text-blue-400",description:"개설된 강좌 수"},{title:"전체 학생",value:s(t.totalStudents),icon:Rl,color:"green",bgColor:"bg-green-50 dark:bg-green-900/20",iconColor:"text-green-600 dark:text-green-400",textColor:"text-green-600 dark:text-green-400",description:"등록된 학생 수"},{title:"수강신청",value:s(t.totalEnrollments),icon:um,color:"purple",bgColor:"bg-purple-50 dark:bg-purple-900/20",iconColor:"text-purple-600 dark:text-purple-400",textColor:"text-purple-600 dark:text-purple-400",description:"총 수강신청 건수",subStats:[{label:"진행중",value:t.activeEnrollments},{label:"완료",value:t.completedEnrollments}]},{title:"총 수익",value:e(t.totalRevenue),icon:mm,color:"emerald",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",iconColor:"text-emerald-600 dark:text-emerald-400",textColor:"text-emerald-600 dark:text-emerald-400",description:"전체 매출 현황"},{title:"평균 평점",value:t.averageRating.toFixed(1),icon:Js,color:"yellow",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",iconColor:"text-yellow-600 dark:text-yellow-400",textColor:"text-yellow-600 dark:text-yellow-400",description:"강좌 평균 만족도",suffix:"/5.0"},{title:"완료율",value:`${t.completionRate}%`,icon:Ct,color:"indigo",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",iconColor:"text-indigo-600 dark:text-indigo-400",textColor:"text-indigo-600 dark:text-indigo-400",description:"수강 완료율"}];return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((r,i)=>a.jsxs("div",{className:`${r.bgColor} rounded-xl p-6 border border-opacity-20`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`p-3 ${r.bgColor} rounded-lg`,children:a.jsx(r.icon,{className:`h-6 w-6 ${r.iconColor}`})}),r.color==="green"&&t.totalEnrollments>0&&a.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[a.jsx(Pl,{className:"h-4 w-4 mr-1"}),a.jsxs("span",{className:"text-xs font-medium",children:["+",Math.round(t.activeEnrollments/t.totalEnrollments*100),"%"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r.title}),a.jsxs("div",{className:"flex items-baseline space-x-2",children:[a.jsx("p",{className:`text-2xl font-bold ${r.textColor}`,children:r.value}),r.suffix&&a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.suffix})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.description}),r.subStats&&a.jsx("div",{className:"flex space-x-4 mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:r.subStats.map((o,l)=>a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o.label}),a.jsx("p",{className:`text-sm font-semibold ${r.textColor}`,children:s(o.value)})]},l))})]})]},i))})}function r2({courses:t}){const[e,s]=j.useState(""),[n,r]=j.useState("all"),[i,o]=j.useState("all"),[l,c]=j.useState("all"),d={beginner:"초급",intermediate:"중급",advanced:"고급",expert:"전문가"},h={basic:"기초",fortune:"운세",compatibility:"궁합",professional:"전문가",special:"특강"},m={draft:"초안",published:"공개",archived:"보관됨",coming_soon:"출시 예정"},u={draft:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",published:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",archived:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",coming_soon:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"},g=t.filter(p=>{const y=p.title.toLowerCase().includes(e.toLowerCase()),v=n==="all"||p.status===n,S=i==="all"||p.category===i,C=l==="all"||p.level===l;return y&&v&&S&&C}),f=p=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(p),x=p=>new Date(p).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"강좌 관리"}),a.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["총 ",g.length,"개의 강좌"]})]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(gm,{className:"h-4 w-4"}),"새 강좌 추가"]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"강좌명 검색...",value:e,onChange:p=>s(p.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("select",{value:n,onChange:p=>r(p.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"모든 상태"}),a.jsx("option",{value:"draft",children:"초안"}),a.jsx("option",{value:"published",children:"공개"}),a.jsx("option",{value:"archived",children:"보관됨"}),a.jsx("option",{value:"coming_soon",children:"출시 예정"})]}),a.jsxs("select",{value:i,onChange:p=>o(p.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"모든 카테고리"}),a.jsx("option",{value:"basic",children:"기초"}),a.jsx("option",{value:"fortune",children:"운세"}),a.jsx("option",{value:"compatibility",children:"궁합"}),a.jsx("option",{value:"professional",children:"전문가"}),a.jsx("option",{value:"special",children:"특강"})]}),a.jsxs("select",{value:l,onChange:p=>c(p.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"모든 레벨"}),a.jsx("option",{value:"beginner",children:"초급"}),a.jsx("option",{value:"intermediate",children:"중급"}),a.jsx("option",{value:"advanced",children:"고급"}),a.jsx("option",{value:"expert",children:"전문가"})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:g.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(We,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"강좌가 없습니다"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"새로운 강좌를 추가하거나 검색 조건을 변경해보세요"}),a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"새 강좌 추가"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"강좌 정보"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"상태"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"가격"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"통계"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"생성일"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"작업"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:g.map(p=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:a.jsx(We,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:p.title}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:h[p.category]}),a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:d[p.level]})]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u[p.status]}`,children:m[p.status]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:p.price===0?"무료":f(p.price)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Rl,{className:"h-4 w-4 mr-1"}),p.enrollment_count]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(Js,{className:"h-4 w-4 mr-1"}),p.rating.toFixed(1)]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:x(p.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400",children:a.jsx(wv,{className:"h-4 w-4"})}),a.jsx("button",{className:"text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400",children:a.jsx(_v,{className:"h-4 w-4"})}),a.jsx("button",{className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:a.jsx(Lv,{className:"h-4 w-4"})})]})})]},p.id))})]})})})]})}function a2({stats:t}){const e=parseFloat(t.completionRate),s=(i,o=0)=>{const l=i*360/100,c=o+l,d=50+40*Math.cos(Math.PI*o/180),h=50+40*Math.sin(Math.PI*o/180),m=50+40*Math.cos(Math.PI*c/180),u=50+40*Math.sin(Math.PI*c/180),g=l>180?1:0;return i===100?"M 50 10 A 40 40 0 1 1 49.99 10 Z":`M 50 50 L ${d} ${h} A 40 40 0 ${g} 1 ${m} ${u} Z`},n=t.totalEnrollments>0?t.activeEnrollments/t.totalEnrollments*100:0,r=t.totalEnrollments>0?t.completedEnrollments/t.totalEnrollments*100:0;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"수강신청 현황"}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["전체 ",t.totalEnrollments.toLocaleString(),"건"]})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 transform -rotate-90",children:[a.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-gray-200 dark:text-gray-700"}),r>0&&a.jsx("path",{d:s(r,0),fill:"currentColor",className:"text-green-500"}),n>0&&a.jsx("path",{d:s(n,r*360/100),fill:"currentColor",className:"text-blue-500"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[e.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"완료율"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"완료"}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.completedEnrollments.toLocaleString(),"건 (",r.toFixed(1),"%)"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"진행중"}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.activeEnrollments.toLocaleString(),"건 (",n.toFixed(1),"%)"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-300 dark:bg-gray-600 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"기타"}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(t.totalEnrollments-t.activeEnrollments-t.completedEnrollments).toLocaleString(),"건"]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.totalStudents.toLocaleString()}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"총 학생 수"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[t.averageRating.toFixed(1),"/5.0"]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"평균 만족도"})]})]})]})}function i2({totalRevenue:t}){const e=r=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(r),s=[{month:"1월",revenue:t*.08},{month:"2월",revenue:t*.06},{month:"3월",revenue:t*.12},{month:"4월",revenue:t*.09},{month:"5월",revenue:t*.15},{month:"6월",revenue:t*.11},{month:"7월",revenue:t*.13},{month:"8월",revenue:t*.1},{month:"9월",revenue:t*.16}],n=Math.max(...s.map(r=>r.revenue));return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"월별 매출 현황"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"2024년 누적 매출"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 dark:text-green-400",children:[a.jsx(Pl,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:"+12.5%"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mm,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"}),a.jsx("span",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:e(t)})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"전체 매출 합계"})]}),a.jsx("div",{className:"space-y-3",children:s.map((r,i)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 text-xs text-gray-500 dark:text-gray-400 text-right",children:r.month}),a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative overflow-hidden",children:a.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${r.revenue/n*100}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-full"})})})}),a.jsx("div",{className:"w-20 text-xs text-gray-600 dark:text-gray-300 text-right",children:e(r.revenue)})]},i))}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:e(s[s.length-1].revenue)}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"이번 달"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:e(t/s.length)}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"월 평균"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:"+12.5%"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"전월 대비"})]})]})]})}function o2(){const[t,e]=j.useState(null),[s,n]=j.useState([]),[r,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState("overview"),h=async()=>{try{const g=await fetch("/api/academy/stats/overview");if(!g.ok)throw new Error("Failed to fetch academy stats");const f=await g.json();if(f.success)e(f.data);else throw new Error(f.error||"Failed to load stats")}catch(g){console.error("Failed to load academy stats:",g),l("통계 데이터를 불러오는데 실패했습니다.")}},m=async()=>{try{const g=await fetch("/api/academy/courses?limit=10&sort_by=created_at&sort_order=desc");if(!g.ok)throw new Error("Failed to fetch courses");const f=await g.json();if(f.success)n(f.data.courses);else throw new Error(f.error||"Failed to load courses")}catch(g){console.error("Failed to load courses:",g),l("강좌 데이터를 불러오는데 실패했습니다.")}};j.useEffect(()=>{(async()=>{i(!0),l(null);try{await Promise.all([h(),m()])}catch(f){console.error("Failed to load dashboard data:",f)}finally{i(!1)}})()},[]);const u=async()=>{await Promise.all([h(),m()])};return r?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"animate-pulse mb-8",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-64 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-48"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((g,f)=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-1/2"})]},f))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded"})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm animate-pulse",children:a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded"})})]})]})}):o?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"❌"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"데이터를 불러올 수 없습니다"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:o}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"새로고침"})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(um,{className:"h-8 w-8 text-blue-600"}),"아카데미 관리 대시보드"]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"운명나침반 교육 플랫폼 관리 및 현황"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"새로고침"}),a.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(gm,{className:"h-4 w-4"}),"새 강좌"]})]})]}),a.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-8",children:[{key:"overview",label:"개요",icon:Ra},{key:"courses",label:"강좌 관리",icon:We},{key:"enrollments",label:"수강 현황",icon:Rl},{key:"analytics",label:"분석",icon:Pl}].map(({key:g,label:f,icon:x})=>a.jsxs("button",{onClick:()=>d(g),className:`flex items-center gap-2 px-6 py-3 border-b-2 transition-colors ${c===g?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.jsx(x,{className:"h-4 w-4"}),f]},g))}),c==="overview"&&a.jsxs("div",{className:"space-y-8",children:[t&&a.jsx(n2,{stats:t}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t&&a.jsx(a2,{stats:t}),t&&a.jsx(i2,{totalRevenue:t.totalRevenue})]})]}),c==="courses"&&a.jsx(r2,{courses:s,onRefresh:u}),c==="enrollments"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"수강 현황 관리"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"수강생 관리 기능이 곧 추가됩니다."})]}),c==="analytics"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"상세 분석"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"상세 분석 대시보드가 곧 추가됩니다."})]})]})})}const Ll=({viewMode:t,currentDate:e})=>{const[s,n]=j.useState({diaries:[],diaryDates:new Set,loading:!1,error:null}),r=j.useCallback(()=>{let c,d;switch(t){case"year":c=new Date(e.getFullYear(),0,1),d=new Date(e.getFullYear(),11,31);break;case"month":c=sr(e),d=nr(e);break;case"week":c=Cr(e,{weekStartsOn:0}),d=_r(e,{weekStartsOn:0});break;case"day":c=e,d=e;break;default:c=sr(e),d=nr(e)}return{startDate:$(c,"yyyy-MM-dd"),endDate:$(d,"yyyy-MM-dd")}},[t,e]),i=j.useCallback(async()=>{n(c=>({...c,loading:!0,error:null}));try{const{startDate:c,endDate:d}=r(),h=await Ie.getDiariesForDateRange(c,d),m=new Set;h.forEach(u=>{u.date&&(u.content&&u.content.trim()||u.images&&u.images.length>0)&&m.add(u.date)}),n({diaries:h,diaryDates:m,loading:!1,error:null})}catch(c){console.error("Failed to load diaries:",c),n(d=>({...d,loading:!1,error:"Failed to load diary entries"}))}},[r]),o=j.useCallback(c=>{const d=typeof c=="string"?c:$(c,"yyyy-MM-dd");return s.diaryDates.has(d)},[s.diaryDates]),l=j.useCallback(c=>{const d=typeof c=="string"?c:$(c,"yyyy-MM-dd");return s.diaries.find(h=>h.date===d)},[s.diaries]);return j.useEffect(()=>{i()},[i]),{diaries:s.diaries,diaryDates:s.diaryDates,loading:s.loading,error:s.error,hasDiary:o,getDiaryForDate:l,reloadDiaries:i}},fd={reflection:["오늘 하루 가장 감사했던 순간은 언제였나요?","마음 깊은 곳의 진짜 기분을 솔직하게 적어보세요.","오늘 나에게 가장 소중했던 것은 무엇인가요?","하루를 돌아보며, 나는 어떤 사람이었는지 생각해보세요.","오늘의 나에게 전하고 싶은 한 마디가 있다면?","마음속 깊은 곳의 목소리에 귀 기울여보세요.","오늘 나를 가장 행복하게 만든 순간을 기억해보세요.","지금 이 순간 내 마음은 어떤 색깔인가요?","오늘 하루 나는 누구를 위해 살았나요?","마음이 가장 평화로웠던 시간을 떠올려보세요.","오늘의 나에게 칭찬해주고 싶은 점이 있다면?","하루 종일 가슴 한편에 머물렀던 생각을 적어보세요.","오늘 나는 어떤 마음으로 사람들을 만났나요?","지금 이 순간 내가 가장 그리운 것은 무엇인가요?","오늘의 경험 중 마음에 가장 깊이 새겨두고 싶은 것은?"],emotion:["때로는 슬픔도 소중한 감정입니다. 있는 그대로 받아들여보세요.","웃었던 순간들을 기억해보세요. 그 따뜻함을 글로 남겨보세요.","기쁨이든 슬픔이든, 지금 이 감정도 소중한 나의 일부입니다.","마음이 무거울 때일수록, 작은 행복을 찾아보세요.","감정을 억누르지 말고, 종이 위에 자유롭게 풀어놓으세요.","오늘의 감정들이 내일의 나를 더 단단하게 만들어줄 거예요.","눈물이 나더라도 괜찮아요. 그것도 마음을 정화하는 방법입니다.","행복했던 순간을 글로 적으면서 그 기분을 다시 느껴보세요.","마음속 감정들을 색깔로 표현한다면 어떤 색일까요?","오늘 느낀 모든 감정들에게 고마움을 전해보세요.","감정의 파도가 지나가는 것을 지켜보며 기록해보세요.","내 마음의 날씨는 지금 어떤가요? 맑음? 흐림? 비?","감정도 계절처럼 변한다는 걸 기억하세요.","오늘의 감정을 한 줄로 요약한다면?","마음이 시키는 대로 자유롭게 써보세요."],relationship:["오늘 만난 사람들 중 누구에게 고마움을 느꼈나요?","가족이나 친구에게 하고 싶었던 말을 적어보세요.","오늘 누군가에게 따뜻함을 전했던 순간이 있나요?","소중한 사람과의 대화 중 기억에 남는 말이 있다면?","오늘 누군가의 미소가 나를 행복하게 만들었나요?","마음을 나누고 싶은 사람이 지금 생각나시나요?","오늘 받은 작은 친절이나 배려를 기록해보세요.","누군가에게 미안한 마음이 있다면 솔직하게 적어보세요.","오늘 내가 누군가에게 도움이 되었던 순간이 있나요?","가장 그리운 사람에게 편지를 쓴다면?","오늘의 만남들이 내게 준 의미를 생각해보세요.","혼자였지만 외롭지 않았던 순간, 함께였지만 외로웠던 순간은?","오늘 누군가의 마음을 이해할 수 있었던 순간이 있나요?","내가 사랑하는 사람들의 얼굴을 떠올리며 써보세요.","오늘 새로운 인연이나 깊어진 관계가 있었나요?"],growth:["오늘 새롭게 배운 것이나 깨달은 점이 있다면 기록해보세요.","어제보다 조금이라도 나아진 모습을 찾아보세요.","오늘 나의 한계를 뛰어넘으려 노력했던 순간이 있나요?","실수나 실패에서도 배울 점을 찾아보세요.","미래의 나에게 지금의 경험이 어떤 도움이 될까요?","오늘의 도전이 내일의 성장으로 이어질 거예요.","작은 변화라도 그것이 시작이라는 걸 기억하세요.","오늘 내가 용기를 냈던 순간을 기록해보세요.","어려운 상황에서도 포기하지 않은 나를 칭찬해주세요.","오늘의 경험이 나를 더 지혜롭게 만들었나요?","새로운 시각으로 바라본 것들이 있다면?","오늘 내가 한 선택들을 돌아보며 배운 점은?","힘들었지만 끝까지 해낸 일이 있나요?","오늘의 나를 어제의 나와 비교해보세요.","성장하고 있는 나 자신을 믿어보세요."],gratitude:["오늘 가장 감사한 세 가지를 적어보세요.","작은 일상 속에서 찾은 행복을 기록해보세요.","나를 위해 힘써준 사람들을 떠올리며 감사 인사를 써보세요.","오늘 내가 누릴 수 있었던 것들에 감사해보세요.","건강한 하루를 보낼 수 있어서 감사하다는 마음을 적어보세요.","따뜻한 잠자리, 맛있는 음식... 당연한 것들에 감사해보세요.","오늘 나를 웃게 만든 것들을 나열해보세요.","사계절의 변화, 자연의 아름다움에 감사한 마음을 써보세요.","가족, 친구들의 존재에 대한 감사함을 표현해보세요.","오늘 하루 무사히 보낼 수 있어서 감사합니다.","내가 가진 작은 재능이나 능력에 감사해보세요.","어려움 속에서도 나를 지켜준 것들을 생각해보세요.","오늘의 모든 순간들이 선물이었다고 생각해보세요.","나를 사랑해주는 사람들이 있어서 감사합니다.","지금 이 순간, 글을 쓸 수 있어서 감사합니다."]};function l2(t){const e=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();return e*1e4+s*100+n}function xd(t){const e=Math.sin(t)*1e4;return e-Math.floor(e)}function pd(t){const e=l2(t),s=Object.keys(fd),n=Math.floor(xd(e)*s.length),r=s[n],i=fd[r],o=Math.floor(xd(e+1)*i.length);return{advice:i[o],category:r}}function bd(t){return{reflection:"🤔",emotion:"💝",relationship:"👥",growth:"🌱",gratitude:"🙏"}[t]}function Wr(t){return{reflection:"#8B5CF6",emotion:"#EC4899",relationship:"#3B82F6",growth:"#10B981",gratitude:"#F59E0B"}[t]}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),yd=t=>{const e=d2(t);return e.charAt(0).toUpperCase()+e.slice(1)},pm=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim(),h2=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...u2,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:pm("lucide",r),...!i&&!h2(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>j.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(t,e)=>{const s=j.forwardRef(({className:n,...r},i)=>j.createElement(m2,{ref:i,iconNode:e,className:pm(`lucide-${c2(yd(t))}`,`lucide-${t}`,n),...r}));return s.displayName=yd(t),s};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],f2=Ye("activity",g2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],p2=Ye("briefcase",x2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],y2=Ye("camera",b2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],j2=Ye("check",v2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],k2=Ye("chevron-left",w2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],S2=Ye("chevron-right",N2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_2=Ye("info",C2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],E2=Ye("plus",M2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],A2=Ye("search",T2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],vd=Ye("sparkles",D2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],R2=Ye("trash-2",P2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],O2=Ye("users",L2);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bm=Ye("x",I2);function F2({images:t,currentIndex:e,isOpen:s,onClose:n,onNext:r,onPrev:i}){const[o,l]=j.useState(e),[c,d]=j.useState(!0);j.useEffect(()=>{l(e)},[e]),j.useEffect(()=>{if(!s)return;const g=f=>{f.key==="Escape"?n():f.key==="ArrowLeft"?m():f.key==="ArrowRight"&&h()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s,o,t.length]);const h=()=>{if(t.length<=1)return;const g=(o+1)%t.length;l(g),d(!0),r==null||r()},m=()=>{if(t.length<=1)return;const g=(o-1+t.length)%t.length;l(g),d(!0),i==null||i()},u=()=>{d(!1)};return!s||!t||t.length===0?null:a.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center",onClick:n,children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent",children:[a.jsxs("div",{className:"text-white text-sm font-medium",children:[o+1," / ",t.length]}),a.jsx("button",{onClick:n,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors backdrop-blur-sm","aria-label":"닫기",children:a.jsx(bm,{className:"w-6 h-6 text-white"})})]}),a.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center",onClick:g=>g.stopPropagation(),children:[c&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-white/20 border-t-white rounded-full animate-spin"})}),a.jsx("img",{src:t[o],alt:`이미지 ${o+1}`,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl",onLoad:u,style:{display:c?"none":"block"}}),t.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:g=>{g.stopPropagation(),m()},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-all backdrop-blur-sm group","aria-label":"이전 이미지",children:a.jsx(k2,{className:"w-6 h-6 text-white group-hover:scale-110 transition-transform"})}),a.jsx("button",{onClick:g=>{g.stopPropagation(),h()},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-all backdrop-blur-sm group","aria-label":"다음 이미지",children:a.jsx(S2,{className:"w-6 h-6 text-white group-hover:scale-110 transition-transform"})})]})]}),t.length>1&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/50 to-transparent",children:a.jsx("div",{className:"flex items-center justify-center gap-2 overflow-x-auto max-w-full",children:t.map((g,f)=>a.jsx("button",{onClick:x=>{x.stopPropagation(),l(f),d(!0)},className:`
                  relative w-16 h-16 rounded-lg overflow-hidden border-2 transition-all flex-shrink-0
                  ${f===o?"border-white scale-110 shadow-xl":"border-white/30 hover:border-white/60 hover:scale-105"}
                `,children:a.jsx("img",{src:g,alt:`썸네일 ${f+1}`,className:"w-full h-full object-cover"})},f))})}),a.jsxs("div",{className:"absolute bottom-4 left-4 text-white/60 text-xs",children:[a.jsx("div",{children:"ESC: 닫기"}),a.jsx("div",{children:"← →: 이미지 이동"})]})]})}const jd=[{emoji:"😊",label:"기분 좋음"},{emoji:"😐",label:"보통"},{emoji:"😢",label:"슬픔"},{emoji:"😠",label:"화남"},{emoji:"😴",label:"피곤함"},{emoji:"🤔",label:"고민"},{emoji:"😍",label:"설렘"},{emoji:"😱",label:"놀람"}];function mi({isOpen:t,onClose:e,date:s,onSave:n}){const[r,i]=j.useState(s),[o,l]=j.useState(""),[c,d]=j.useState("😊"),[h,m]=j.useState(!1),[u,g]=j.useState(null),[f,x]=j.useState(null),[p,y]=j.useState(!1),[v,S]=j.useState(0),[C,N]=j.useState([]),[M,k]=j.useState(!1),[w,_]=j.useState(!1),[E,D]=j.useState(0);console.log("📔 DiaryBookModal 렌더링:",{isOpen:t,date:$(s,"yyyy-MM-dd"),currentDate:$(r,"yyyy-MM-dd"),content:`${o.slice(0,50)}...`,contentLength:o.length});const O=pd(r),L=pd(zr(r)),T=zr(r);j.useEffect(()=>{t&&(i(s),A(s))},[t,s]),j.useEffect(()=>{t&&r&&A(r)},[r]),j.useEffect(()=>{if(!o.trim()||!u)return;const V=setTimeout(()=>{(o!==(u==null?void 0:u.content)||c!==(u==null?void 0:u.mood)||JSON.stringify(C)!==JSON.stringify((u==null?void 0:u.images)||[]))&&I()},3e3);return()=>clearTimeout(V)},[o,c,C]),j.useEffect(()=>{S(o.length)},[o]),j.useEffect(()=>{var V,Y;if(u){console.log("✅ todayEntry 변경 감지:",{date:u.date,hasImages:!!u.images,imageCount:((V=u.images)==null?void 0:V.length)||0,images:u.images});const Z=JSON.stringify(C),W=JSON.stringify(u.images||[]);Z!==W&&(console.log("🔄 이미지 상태 업데이트:",{기존:C.length,새로운:((Y=u.images)==null?void 0:Y.length)||0}),N(u.images||[]))}else console.log("📝 새 일기 작성 모드 - 이미지 초기화"),C.length>0&&N([])},[u]);const A=async V=>{var Y,Z,W,fe,Q;m(!0);try{const le=$(V,"yyyy-MM-dd"),K=$(zr(V,1),"yyyy-MM-dd");try{const te=await Ie.getDiaryByDate(le);console.log("📖 일기 로드 성공:",{date:le,hasContent:!!te.content,hasImages:!!te.images,imageCount:((Y=te.images)==null?void 0:Y.length)||0,imagesFirstChar:((W=(Z=te.images)==null?void 0:Z[0])==null?void 0:W.substring(0,30))||"none"}),g(te),l(te.content||""),d(te.mood||"😊"),N(te.images||[])}catch(te){((fe=te.response)==null?void 0:fe.status)===404&&(console.log("📄 일기 없음 - 새 일기 모드"),g(null))}try{const te=await Ie.getDiaryByDate(K);x(te)}catch(te){((Q=te.response)==null?void 0:Q.status)===404&&x(null)}}catch(le){console.error("Failed to load diaries:",le)}finally{m(!1)}},I=async()=>{if(o.trim()){y(!0);try{const Y={date:$(r,"yyyy-MM-dd"),content:o.trim(),mood:c,weather:void 0,images:C.length>0?C:void 0,tags:[]};if(u!=null&&u.id)await Ie.updateDiary(u.id,Y);else{const Z=await Ie.createDiary(Y);g(Z)}}catch(V){console.error("Auto save failed:",V)}finally{y(!1)}}},P=async()=>{var V,Y,Z,W,fe;if(o.trim()){m(!0);try{const Q=$(r,"yyyy-MM-dd");let le;if(C.length>0){le=[];for(const ht of C){const Le=ht.length*3/4/1048576;console.log(`이미지 크기: ${Le.toFixed(2)}MB`),Le>1&&console.warn(`이미지가 1MB를 초과합니다. 현재: ${Le.toFixed(2)}MB`),le.push(ht)}}const K={date:Q,content:o.trim(),mood:c,weather:void 0,images:le,tags:[]};console.log("저장할 일기 데이터:",{date:Q,contentLength:o.length,mood:c,imageCount:(le==null?void 0:le.length)||0,totalDataSize:`${JSON.stringify(K).length/1024}KB`});let te;u!=null&&u.id?(console.log("기존 일기 업데이트:",u.id),te=await Ie.updateDiary(u.id,K)):(console.log("새 일기 생성"),te=await Ie.createDiary(K)),console.log("저장 성공:",te),g(te),n&&n(te),alert("일기가 저장되었습니다!")}catch(Q){console.error("일기 저장 실패 상세 정보:"),console.error("Error object:",Q),console.error("Error message:",Q==null?void 0:Q.message),console.error("Error response:",Q==null?void 0:Q.response),console.error("Error status:",(V=Q==null?void 0:Q.response)==null?void 0:V.status),console.error("Error data:",(Y=Q==null?void 0:Q.response)==null?void 0:Y.data);let le="일기 저장에 실패했습니다.";((Z=Q==null?void 0:Q.response)==null?void 0:Z.status)===413?le="이미지 크기가 너무 큽니다. 더 작은 이미지를 선택해주세요.":((W=Q==null?void 0:Q.response)==null?void 0:W.status)===500?le="서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.":((fe=Q==null?void 0:Q.response)==null?void 0:fe.status)===404?le="다이어리 서비스에 연결할 수 없습니다.":Q!=null&&Q.message&&(le=`저장 실패: ${Q.message}`),alert(le)}finally{m(!1)}}},H=()=>{i(zr(r))},z=()=>{i(rp(r,1))},F=V=>{V.key==="ArrowLeft"&&V.ctrlKey?H():V.key==="ArrowRight"&&V.ctrlKey?z():V.key==="Escape"?e():V.key==="s"&&V.ctrlKey&&(V.preventDefault(),P())},G=async V=>new Promise(Y=>{const Z=document.createElement("canvas"),W=Z.getContext("2d"),fe=new Image;fe.onload=()=>{let{width:Q,height:le}=fe;const K=V.size/(1024*1024);let te=1920,ht=1920,Le=.85;K>20?(te=1200,ht=1200,Le=.7):K>10?(te=1600,ht=1600,Le=.75):K>5&&(te=1920,ht=1920,Le=.8);const Ti=Math.min(te/Q,ht/le);Ti<1&&(Q=Math.floor(Q*Ti),le=Math.floor(le*Ti)),Z.width=Q,Z.height=le,W.imageSmoothingEnabled=!0,W.imageSmoothingQuality="high",W.drawImage(fe,0,0,Q,le);const Hr=document.createElement("canvas");Hr.width=Hr.height=1,Hr.getContext("2d").fillRect(0,0,1,1);const Wc=Hr.toDataURL("image/webp").startsWith("data:image/webp");let bn;if(Wc?bn=Z.toDataURL("image/webp",Le):bn=Z.toDataURL("image/jpeg",Le),bn.length*3/4/(1024*1024)>2&&Le>.5){const Kx=Math.max(.5,Le*.8);bn=Z.toDataURL(Wc?"image/webp":"image/jpeg",Kx)}Y(bn)},fe.src=URL.createObjectURL(V)}),U=async V=>{const Y=V.target.files;if(!(!Y||Y.length===0)){if(C.length+Y.length>3){alert("최대 3장까지 업로드 가능합니다");return}k(!0);try{const Z=[];for(const W of Array.from(Y)){if(!W.type.startsWith("image/")){alert("이미지 파일만 업로드 가능합니다");continue}if(W.size>50*1024*1024){alert("파일 크기는 50MB 이하만 가능합니다");continue}const fe=await G(W),Q=fe.length*3/4,le=Q/(1024*1024),K=((1-Q/W.size)*100).toFixed(1),te=fe.startsWith("data:image/webp")?"WebP":"JPEG";console.log(`✅ 이미지 압축 완료: ${W.name}`),console.log(`📐 포맷: ${te} | 원본: ${(W.size/(1024*1024)).toFixed(2)}MB → 압축: ${le.toFixed(2)}MB`),console.log(`📈 압축률: ${K}% 감소`),Z.push(fe)}N(W=>[...W,...Z])}catch(Z){console.error("Image upload failed:",Z),alert("이미지 업로드 중 오류가 발생했습니다")}finally{k(!1),V.target.value=""}}},X=V=>{N(Y=>Y.filter((Z,W)=>W!==V))};return t?a.jsxs("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,onKeyDown:F,tabIndex:-1,children:[a.jsxs("div",{className:"diary-book-container relative max-w-6xl w-full max-h-[90vh] overflow-hidden",onClick:V=>V.stopPropagation(),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/20 to-gray-700/40 dark:from-slate-900/40 dark:to-slate-700/60 rounded-2xl transform rotate-1 scale-105"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800/30 to-gray-600/50 dark:from-slate-800/50 dark:to-slate-600/70 rounded-2xl transform -rotate-1 scale-102"}),a.jsxs("div",{className:"relative bg-gradient-to-b from-amber-50 to-amber-100 dark:from-slate-800 dark:to-slate-900 rounded-2xl shadow-2xl border-2 border-amber-200 dark:border-slate-700 p-8",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:"text-sm font-medium text-amber-700 dark:text-gray-400",children:$(r,"yyyy년 M월",{locale:ve})}),a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("h1",{className:"text-2xl font-light text-amber-800 dark:text-gray-200 tracking-wide",style:{fontFamily:"Georgia, serif"},children:"하루의 여백"}),a.jsx("div",{className:"w-20 h-0.5 bg-gradient-to-r from-amber-400 to-amber-600 dark:from-purple-500 dark:to-indigo-500 mx-auto mt-2 rounded-full"})]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:"✕"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-8 min-h-[500px]",children:[a.jsxs("div",{className:"diary-page relative",children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-red-300 dark:bg-slate-600 rounded-full"}),a.jsxs("div",{className:"pl-6",children:[a.jsxs("div",{className:"border-b-2 border-dashed border-amber-300 dark:border-slate-600 pb-3 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-amber-700 dark:text-gray-300",children:$(T,"M월 d일",{locale:ve})}),a.jsx("p",{className:"text-sm text-amber-600 dark:text-gray-400",children:$(T,"EEEE",{locale:ve})})]}),(f==null?void 0:f.mood)&&a.jsx("span",{className:"text-2xl",children:f.mood})]}),a.jsx("div",{className:"mt-3 p-2 bg-amber-100/50 dark:bg-slate-700/30 rounded-lg border border-amber-200 dark:border-slate-600",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"text-amber-600 dark:text-gray-400",children:bd(L.category)}),a.jsx("span",{className:"text-amber-700 dark:text-gray-300 leading-relaxed",children:L.advice})]})})]}),a.jsx("div",{className:"diary-content",children:f?a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap text-sm",style:{fontFamily:"Georgia, serif"},children:f.content}),a.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[f.content.length,"자"]})]}):a.jsxs("div",{className:"text-center text-gray-400 dark:text-gray-500 italic py-8",children:[a.jsx("p",{className:"text-sm",children:"어제의 일기가 없습니다"}),a.jsx("span",{className:"text-2xl",children:"📝"})]})})]})]}),a.jsx("div",{className:"hidden lg:block absolute left-1/2 top-16 bottom-16 w-px bg-gradient-to-b from-amber-300 via-amber-400 to-amber-300 dark:from-transparent dark:via-slate-500 dark:to-transparent"}),a.jsxs("div",{className:"diary-page relative",children:[a.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-red-300 dark:bg-slate-600 rounded-full"}),a.jsxs("div",{className:"pr-6",children:[a.jsxs("div",{className:"border-b-2 border-dashed border-amber-300 dark:border-slate-600 pb-3 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-amber-700 dark:text-gray-300",children:$(r,"M월 d일",{locale:ve})}),a.jsx("p",{className:"text-sm text-amber-600 dark:text-gray-400",children:$(r,"EEEE",{locale:ve})})]}),a.jsx("div",{className:"flex gap-1",children:jd.slice(0,4).map(({emoji:V})=>{var Y;return a.jsx("button",{onClick:()=>d(V),className:`text-xl p-1 rounded transition-all hover:scale-110 ${c===V?"bg-amber-200 dark:bg-slate-700 shadow-sm":"hover:bg-amber-100 dark:hover:bg-slate-800"}`,title:(Y=jd.find(Z=>Z.emoji===V))==null?void 0:Y.label,children:V},V)})})]}),a.jsx("div",{className:"mt-3 p-3 rounded-lg border-2 border-dashed shadow-sm",style:{backgroundColor:`${Wr(O.category)}15`,borderColor:`${Wr(O.category)}40`},children:a.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[a.jsx("span",{className:"text-base mt-1",style:{color:Wr(O.category)},children:bd(O.category)}),a.jsx("span",{className:"leading-relaxed font-medium",style:{color:Wr(O.category)},children:O.advice})]})})]}),a.jsxs("div",{className:"diary-content",children:[a.jsx("textarea",{value:o,onChange:V=>{const Y=V.target.value;console.log("📝 Content 변경:",{길이:Y.length,trim길이:Y.trim().length,내용:Y}),l(Y)},placeholder:"오늘 하루는 어땠나요? 마음속 이야기를 자유롭게 적어보세요...",className:"w-full h-64 p-0 border-none bg-transparent resize-none focus:outline-none text-gray-700 dark:text-gray-300 placeholder-amber-400 dark:placeholder-gray-500 leading-relaxed",style:{fontFamily:"Georgia, serif",fontSize:"14px",lineHeight:"24px",background:`repeating-linear-gradient(
                        transparent,
                        transparent 23px,
                        rgba(251, 191, 36, 0.2) 23px,
                        rgba(251, 191, 36, 0.2) 24px
                      )`}}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 
                                       bg-slate-100 dark:bg-slate-700 
                                       hover:bg-slate-200 dark:hover:bg-slate-600 
                                       rounded-lg cursor-pointer transition-colors w-fit
                                       ${M?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx(y2,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:M?"압축 중...":"사진 추가"}),a.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:U,disabled:M})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"최대 3장 • 자동 WebP 압축 • 50MB 이하"})]}),C.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3",children:C.map((V,Y)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:V,className:"w-full h-20 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity",alt:`업로드된 이미지 ${Y+1}`,onClick:()=>{D(Y),_(!0)}}),a.jsx("button",{onClick:()=>X(Y),className:`absolute top-1 right-1 
                                         bg-red-500 hover:bg-red-600 text-white 
                                         rounded-full w-5 h-5 flex items-center justify-center
                                         opacity-0 group-hover:opacity-100 
                                         transition-opacity text-xs font-bold`,children:a.jsx(bm,{className:"w-3 h-3"})})]},Y))}),M&&a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500"}),a.jsx("span",{children:"이미지 업로드 중..."})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 mt-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:[v,"자"]}),p&&a.jsx("span",{className:"text-blue-500 animate-pulse",children:"자동 저장 중..."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-amber-500",children:"✨"}),a.jsx("span",{children:"일기장"})]})]})]})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-amber-200 dark:border-slate-700",children:[a.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 text-amber-700 dark:text-gray-300 hover:bg-amber-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-lg",children:"◀"}),a.jsx("span",{className:"text-sm font-medium",children:"어제"})]}),a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[!Bs(r)&&a.jsx("button",{onClick:()=>i(new Date),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium transition-colors",children:"오늘"}),a.jsx("div",{className:"text-xs text-amber-600 dark:text-gray-500",children:"Ctrl + ← → 로 페이지 이동"})]}),a.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 text-amber-700 dark:text-gray-300 hover:bg-amber-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-sm font-medium",children:"내일"}),a.jsx("span",{className:"text-lg",children:"▶"})]})]}),a.jsx("div",{className:"flex justify-end items-center mt-4",children:a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{onClick:()=>{console.log("💾 저장 버튼 클릭:",{content길이:o.length,trim길이:o.trim().length,isLoading:h,조건:o.trim()&&!h}),P()},disabled:!o.trim()||h,className:`
                  px-6 py-2 rounded-lg font-medium transition-colors
                  ${o.trim()&&!h?"bg-amber-500 hover:bg-amber-600 text-white shadow-sm":"bg-gray-300 dark:bg-gray-600 text-gray-500 cursor-not-allowed"}
                `,children:h?"저장 중...":`저장하기 ${o.length>0?`(${o.length}자)`:""}`})})})]})]}),a.jsx(F2,{images:C,currentIndex:E,isOpen:w,onClose:()=>_(!1)})]}):null}function Ol({isOpen:t,onClose:e,todo:s}){const{updateTodo:n}=ct(),[r,i]=j.useState(""),[o,l]=j.useState("medium"),[c,d]=j.useState(!1),[h,m]=j.useState("");j.useEffect(()=>{s&&(i(s.text),l(s.priority),d(s.hasTime||!1),m(s.startTime||""))},[s]);const u=g=>{g.preventDefault(),!(!s||!r.trim())&&(n(s.id,{text:r.trim(),priority:o,hasTime:c,startTime:c?h:void 0}),e())};return!t||!s?null:a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"할일 수정"}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"할일 내용"}),a.jsx("input",{type:"text",value:r,onChange:g=>i(g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700",placeholder:"할일을 입력하세요",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"우선순위"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>l("high"),className:`flex-1 py-2 px-3 rounded-md ${o==="high"?"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"🔴 높음"}),a.jsx("button",{type:"button",onClick:()=>l("medium"),className:`flex-1 py-2 px-3 rounded-md ${o==="medium"?"bg-yellow-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"🟡 보통"}),a.jsx("button",{type:"button",onClick:()=>l("low"),className:`flex-1 py-2 px-3 rounded-md ${o==="low"?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"🟢 낮음"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:c,onChange:g=>d(g.target.checked),className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:"시간 지정"})]}),c&&a.jsx("input",{type:"time",value:h,onChange:g=>m(g.target.value),className:"mt-2 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700"})]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"수정"}),a.jsx("button",{type:"button",onClick:e,className:"flex-1 py-2 px-4 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"취소"})]})]})]})]})})}function B2({pattern:t="clouds",opacity:e=.1,className:s=""}){const n={clouds:"M10,20 Q15,10 20,20 Q25,10 30,20 Q35,10 40,20",waves:"M0,15 Q5,5 10,15 Q15,25 20,15 Q25,5 30,15 Q35,25 40,15",mountains:"M0,25 L5,15 L10,20 L15,10 L20,20 L25,15 L30,25 L35,10 L40,25",bamboo:"M10,5 L10,25 M15,8 L15,25 M20,5 L20,25"};return a.jsx("div",{className:`absolute inset-0 overflow-hidden pointer-events-none ${s}`,children:a.jsxs("svg",{className:"w-full h-full",style:{opacity:e},viewBox:"0 0 40 30",preserveAspectRatio:"xMidYMid slice",children:[a.jsx("defs",{children:a.jsx("pattern",{id:t,x:"0",y:"0",width:"40",height:"30",patternUnits:"userSpaceOnUse",children:a.jsx("path",{d:n[t],fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-gray-400 dark:text-gray-600"})})}),a.jsx("rect",{width:"100%",height:"100%",fill:`url(#${t})`})]})})}const $2={};function V2(t,e){let s;try{s=t()}catch{return}return{getItem:r=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=s.getItem(r))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,i)=>s.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>s.removeItem(r)}}const ar=t=>e=>{try{const s=t(e);return s instanceof Promise?s:{then(n){return ar(n)(s)},catch(n){return this}}}catch(s){return{then(n){return this},catch(n){return ar(n)(s)}}}},H2=(t,e)=>(s,n,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,y)=>({...y,...p}),...e},o=!1;const l=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...p)},n,r);const h=ar(i.serialize),m=()=>{const p=i.partialize({...n()});let y;const v=h({state:p,version:i.version}).then(S=>d.setItem(i.name,S)).catch(S=>{y=S});if(y)throw y;return v},u=r.setState;r.setState=(p,y)=>{u(p,y),m()};const g=t((...p)=>{s(...p),m()},n,r);let f;const x=()=>{var p;if(!d)return;o=!1,l.forEach(v=>v(n()));const y=((p=i.onRehydrateStorage)==null?void 0:p.call(i,n()))||void 0;return ar(d.getItem.bind(d))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var S;return f=i.merge(v,(S=n())!=null?S:g),s(f,!0),m()}).then(()=>{y==null||y(f,void 0),o=!0,c.forEach(v=>v(f))}).catch(v=>{y==null||y(void 0,v)})};return r.persist={setOptions:p=>{i={...i,...p},p.getStorage&&(d=p.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:p=>(l.add(p),()=>{l.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},x(),f||g},z2=(t,e)=>(s,n,r)=>{let i={storage:V2(()=>localStorage),partialize:x=>x,version:0,merge:(x,p)=>({...p,...x}),...e},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...x)},n,r);const h=()=>{const x=i.partialize({...n()});return d.setItem(i.name,{state:x,version:i.version})},m=r.setState;r.setState=(x,p)=>{m(x,p),h()};const u=t((...x)=>{s(...x),h()},n,r);r.getInitialState=()=>u;let g;const f=()=>{var x,p;if(!d)return;o=!1,l.forEach(v=>{var S;return v((S=n())!=null?S:u)});const y=((p=i.onRehydrateStorage)==null?void 0:p.call(i,(x=n())!=null?x:u))||void 0;return ar(d.getItem.bind(d))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var S;const[C,N]=v;if(g=i.merge(N,(S=n())!=null?S:u),s(g,!0),C)return h()}).then(()=>{y==null||y(g,void 0),g=n(),o=!0,c.forEach(v=>v(g))}).catch(v=>{y==null||y(void 0,v)})};return r.persist={setOptions:x=>{i={...i,...x},x.storage&&(d=x.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:x=>(l.add(x),()=>{l.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||f(),g||u},U2=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?(($2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),H2(t,e)):z2(t,e),ym=U2,Xs=El()(ym(t=>({birthInfo:null,setBirthInfo:e=>t({birthInfo:e}),clearBirthInfo:()=>t({birthInfo:null})}),{name:"saju-settings"})),vm=["갑","을","병","정","무","기","경","신","임","계"],jm={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수",인:"목",묘:"목",사:"화",오:"화",진:"토",술:"토",축:"토",미:"토",유:"금",자:"수",해:"수"},Yr={생:{목:"화",화:"토",토:"금",금:"수",수:"목"},극:{목:"토",화:"금",토:"수",금:"목",수:"화"}},kn={excellent:{level:"excellent",label:"대길",color:"#10b981",icon:"🌟"},good:{level:"good",label:"길함",color:"#22c55e",icon:"✨"},normal:{level:"normal",label:"보통",color:"#f59e0b",icon:"⭐"},caution:{level:"caution",label:"주의",color:"#f97316",icon:"⚠️"},bad:{level:"bad",label:"흉함",color:"#ef4444",icon:"🚨"}},wd=["#4f46e5","#059669","#dc2626","#7c3aed","#ea580c","#0891b2"],kd=[1,3,5,7,9,11,13,17,19,21,23,29];function W2(t){const e=new Date(1900,0,1),r=(Math.floor((t.getTime()-e.getTime())/(1e3*60*60*24))+36)%60%10;return vm[r]}function wm(t){return t>=85?kn.excellent:t>=70?kn.good:t>=50?kn.normal:t>=30?kn.caution:kn.bad}function Y2(t,e){return t===e?75:Yr.생[t]===e?85:Yr.생[e]===t?90:Yr.극[t]===e?45:Yr.극[e]===t?35:60}function G2(t){const e=(t.year-4)%10,s=vm[e];return jm[s]||"목"}function K2(t,e,s){const n=wm(t),i={excellent:["오늘은 모든 일이 순조롭게 풀리는 대길한 날입니다. 새로운 도전을 시작하기에 좋습니다.","행운의 기운이 가득한 하루입니다. 중요한 결정을 내리기에 최적의 시기입니다.","긍정적인 에너지가 충만한 날입니다. 주변 사람들과의 관계도 더욱 좋아질 것입니다."],good:["전반적으로 좋은 흐름을 타는 하루입니다. 계획했던 일들을 추진해보세요.","운세가 상승하는 시기입니다. 적극적인 자세로 임하면 좋은 결과가 있을 것입니다.","안정적이고 평화로운 하루가 될 것입니다. 차분한 마음으로 일을 처리하세요."],normal:["무난한 하루가 예상됩니다. 평소보다 신중하게 행동하는 것이 좋겠습니다.","큰 변화보다는 현재 상황을 유지하는 것이 바람직한 시기입니다.","조급해하지 말고 차근차근 진행하면 좋은 결과를 얻을 수 있습니다."],caution:["조심스럽게 행동하는 것이 필요한 하루입니다. 성급한 판단은 피하세요.","작은 일도 꼼꼼히 확인하고 진행하는 것이 좋겠습니다.","어려움이 있더라도 포기하지 말고 꾸준히 노력하세요."],bad:["오늘은 새로운 일을 시작하기보다는 기존 일을 정리하는 것이 좋겠습니다.","주변 사람들과의 갈등을 피하고 조화를 이루도록 노력하세요.","힘든 시기이지만 이또한 지나갈 것입니다. 긍정적인 마음을 유지하세요."]}[n.level],o=Math.floor(Math.random()*i.length);return i[o]}function q2(t,e=new Date){const s=G2(t),n=W2(e),r=jm[n]||"목",i=Y2(s,r),o=e.getDate(),l=e.getMonth()+1,c=e.getFullYear(),d=(t.year+t.month+t.day+t.hour)%100,h=Math.min(100,Math.max(0,i+(o+d)%31-15)),m=Math.min(100,Math.max(0,i+(l+d)%31-15)),u=Math.min(100,Math.max(0,i+(c+d)%31-15)),g=Math.min(100,Math.max(0,i+(o*l+d)%31-15)),f=Math.min(100,Math.max(0,i+(o+l+d)%31-15)),x=(o+d)%wd.length,p=(l+d)%kd.length;return{date:$(e,"yyyy-MM-dd"),totalLuck:h,loveLuck:m,wealthLuck:u,healthLuck:g,careerLuck:f,message:K2(h),luckyColor:wd[x],luckyNumber:kd[p],advice:`오늘의 기운: ${s}행이 ${r}행과 만나는 날입니다.`}}function km(t){return wm(t)}const J2=t=>t.toISOString().split("T")[0],X2=(t,e)=>!t||!e?!1:t.year===e.year&&t.month===e.month&&t.day===e.day&&t.hour===e.hour&&t.minute===e.minute&&t.isLunar===e.isLunar&&t.isMale===e.isMale,Nm=El()(ym((t,e)=>({dailyFortune:null,lastCalculatedDate:null,lastBirthInfo:null,calculateFortune:(s,n)=>{const r=e(),i=J2(n);if(r.lastCalculatedDate===i&&X2(r.lastBirthInfo,s)&&r.dailyFortune)return console.log("[FortuneStore] 캐시된 운세 데이터 반환:",i),r.dailyFortune;try{console.log("[FortuneStore] 새로운 운세 계산:",{birthInfo:s,date:i});const o=q2(s,n);return t({dailyFortune:o,lastCalculatedDate:i,lastBirthInfo:s}),console.log("[FortuneStore] 운세 계산 완료 및 저장:",o),o}catch(o){return console.error("[FortuneStore] 운세 계산 실패:",o),null}},clearCache:()=>{console.log("[FortuneStore] 캐시 초기화"),t({dailyFortune:null,lastCalculatedDate:null,lastBirthInfo:null})}}),{name:"fortune-storage",partialize:t=>({dailyFortune:t.dailyFortune,lastCalculatedDate:t.lastCalculatedDate,lastBirthInfo:t.lastBirthInfo})})),Q2=({date:t,compact:e=!1})=>{const{birthInfo:s}=Xs(),{calculateFortune:n}=Nm(),r=j.useMemo(()=>s?n(s,t):null,[s,t,n]);if(!r||!s)return null;const i=km(r.totalLuck);return e?a.jsxs("div",{className:"absolute bottom-1 right-1 flex items-center gap-0.5",children:[a.jsx("span",{className:"text-xs",title:`오늘의 운세: ${i.label} (${Math.round(r.totalLuck)}%)`,children:r.totalLuck>=80?"🌟":r.totalLuck>=60?"⭐":r.totalLuck>=40?"☆":"⚪"}),a.jsx("div",{className:"w-12 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${r.totalLuck}%`,backgroundColor:i.color}})})]}):a.jsxs("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold",children:"일간 운세"}),a.jsx("span",{className:"text-lg",children:i.icon||"🔮"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-bold",style:{color:i.color},children:[Math.round(r.totalLuck),"%"]}),a.jsx("div",{className:"text-xs",style:{color:i.color},children:i.label})]})]}),a.jsxs("div",{className:"grid grid-cols-5 gap-1 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"연애"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.loveLuck),"%"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"재물"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.wealthLuck),"%"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"건강"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.healthLuck),"%"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"직업"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.careerLuck),"%"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"학업"}),a.jsxs("div",{className:"font-semibold",children:[Math.round(r.studyLuck),"%"]})]})]}),!e&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300",style:{backgroundColor:r.luckyColor},title:`행운의 색: ${r.luckyColor}`}),a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"색상"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-bold",children:r.luckyNumber}),a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"숫자"})]})]}),!e&&r.message&&a.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 italic",children:["💡 ",r.message]})]})};var se={KOREAN_LUNAR_MIN_VALUE:10000101,KOREAN_LUNAR_MAX_VALUE:20501118,KOREAN_SOLAR_MIN_VALUE:10000213,KOREAN_SOLAR_MAX_VALUE:20501231,KOREAN_LUNAR_BASE_YEAR:1e3,SOLAR_LUNAR_DAY_DIFF:43,LUNAR_SMALL_MONTH_DAY:29,LUNAR_BIG_MONTH_DAY:30,SOLAR_SMALL_YEAR_DAY:365,SOLAR_BIG_YEAR_DAY:366,SOLAR_DAYS:[31,28,31,30,31,30,31,31,30,31,30,31,29],KOREAN_CHEONGAN:[44049,51012,48337,51221,47924,44592,44221,49888,51076,44228].map(function(t){return String.fromCharCode(t)}),KOREAN_GANJI:[51088,52629,51064,47896,51652,49324,50724,48120,49888,50976,49696,54644].map(function(t){return String.fromCharCode(t)}),KOREAN_GAPJA_UNIT:[45380,50900,51068].map(function(t){return String.fromCharCode(t)}),CHINESE_CHEONGAN:[30002,20057,19993,19969,25098,24049,24218,36763,22764,30328].map(function(t){return String.fromCharCode(t)}),CHINESE_GANJI:[23376,19985,23493,21359,36784,24051,21320,26410,30003,37193,25100,20133].map(function(t){return String.fromCharCode(t)}),CHINESE_GAPJA_UNIT:[24180,26376,26085].map(function(t){return String.fromCharCode(t)}),INTERCALATION_STR:[50980,38287].map(function(t){return String.fromCharCode(t)}),KOREAN_LUNAR_DATA:[2194016855,2197734699,2193886506,2194017621,3271595437,2193884522,2194016621,2197837021,3267626157,2193885773,2197827149,2193885990,3271600982,2194016981,2193883994,2197842298,3267758427,2193884315,2197834395,2193885771,3271674533,2193884842,2194016981,2197852893,3267625653,2194016599,2197705902,2194017431,3267626571,2197759306,2194017705,2197857974,3267757677,2193883758,2197907758,2193885486,3267628182,2197835157,2193886538,2197867881,3267627864,2194148715,2197918315,2193883741,3267627307,2197838507,2193885845,2193886026,3271696043,2193883861,2197927258,2194015419,3267625563,2197845303,2193884459,2193884821,3271571285,2193884842,2198063797,2193883765,3267626166,2197850718,2193885782,2193886502,3271581350,2194017621,2193884586,2197822826,3267758445,2197861551,2193884317,2193885773,3271589165,2193885862,2194017109,2197833173,3267625818,2194016605,2197885299,2193884251,3271596623,2193884747,2193885861,2197842793,3267757749,2193883866,2197826230,2194016567,3271476375,2194017431,2193884747,2197718698,3267759525,2193884596,2198030957,2193883822,3267628641,2197826862,2193886358,2197855565,2193886538,2194017637,2197906837,2194015581,3267625581,2197826141,2193885483,2197858967,3267627669,2193886026,2197850970,2194016981,3267757403,2197832375,2193884247,2193884459,3271564587,2193884821,2197853997,2193884586,3267758773,2197837037,2193884342,2194016855,3271504974,2193886502,2197929618,2194017621,3267626410,2197850554,2194016621,2193884334,3271576221,2193885773,2193886501,2197827365,3267627860,2198056297,2193883866,2194016605,3271648411,2193884315,2193885771,2197834571,3267626661,2197863251,2193884852,2194016950,3271657814,2194016663,2193884311,2197833367,3267626315,2197735077,2194017701,2193884588,3271797429,2193883758,2193885486,2197843118,3267628182,2193886538,2197827402,2194017621,3271603563,2194015579,2193883741,2197846333,3267627303,2193885845,2197904661,2193886026,3267758933,2197885653,2194015451,2197721694,3267758679,2193884459,2197842603,2193884821,3267626666,2197830570,2194016949,2197861559,3267626158,2194016855,2197714222,2193886502,3267759763,2197837525,2193884586,2194016693,3271566701,2193884334,2197924429,2193885773,3267628326,2197843301,2193886034,2194017642,3271567066,2194016605,2197931165,2193884315,3267627595,2197850795,2193884837,2193886036,3271576500,2194016950,2194016603,2197824823,3267626135,2197853775,2193884491,2193884837,3271653061,2193884588,2194016950,2197895278,3267627310,2197867671,2193886358,2193886538,3271593386,2194017109,2193884522,2197969627,3267625565,2193885486,2197826859,2193885845,3271597389,2193885994,2194017109,2197845365,3267626202,2194016859,2197833047,2193884459,3271674515,2193884819,2193884842,2197850842,3267758821,2193884342,2197834414,2194016855,3267626279,2197759270,2194017875,2197857995,3267626410,2194015661,2197906605,2193884334,3267627598,2197835085,2193886502,2197863763,3267627858,2194017130,2197919082,2194015575,3267626141,2197903899,2193885771,2193885861,3271564965,2193886034,2197863258,2194016950,3267758427,2197841079,2193884311,2193884747,3271571275,2193884837,2197862067,2193884588,3267758774,2197914285,2193884318,2193885773,3271581003,2193885989,2193886034,2197892690,3267758938,2197858654,2194016603,2193884315,3271584343,2193885771,2193885861,2197834661,3267626708,2197867222,2194016950,2194016567,2197849247,2193884311,2193884747,2197706442,3267759525,2193884586,2197822828,2194016878,3271604527,2193885486,2193886358,2197847381,3267628362,2194017621,2197894485,2193884522,3267758701,2197822045,2193885483,2197850715,3267627669,2193885994,2197904170,2194016981,3267626202,2197822650,2194016855,2197853487,3267626279,2193884819,2197845683,2193884842,3267758773,2197828981,2193884342,2197867111,3267627566,2193886486,2197851798,2193886538,3267759530,2197837290,2194015597,2193884334,3271632989,2193885741,2197859607,2193885861,3267627858,2197847412,2194016986,2194015581,3271570747,2193884251,2193885739,2197887531,3267627685,2197855061,2193884850,2194016982,3271644470,2194016567,2193884247,2197830231,3267626283,2197727910,2194017685,2193884586,3271654060,2194016878,2193884462,2197830830,3267627606,2197863723,2193886506,2194017621,3271595437,2193884522,2194016877,2197837149,3267626283,2193885837,2197827157,2193885994,3271600982,2194016981,2193884378,2197842554,3267758679,2193884443,2197899799,2193884755,3271673513,2193884586,2194016949,2197852861,3267625654,2194016823,2197706030,2193886486,2194017867,2197698386,2194017706,2197927348,3267757421,2193883822,2197846589,2193885741,3267628309,2197835157,2193886034,2197867369,3267758810,2194015581,2197918299,2193884251,3267627563,2197838507,2193885845,2193886034,3271564970,2194016950,2197865819,2194015415,3267626071,2197845303,2193884459,2193884821,3271640725,2193884586,2197867189,2194016878,3267626158,2197850718,2193885782,2193886506,3271585450,2194017621,2193884522,2197891418,3267758429,2197861551,2193884315,2193885773,3271589165,2193885994,2194017109,2197833173,3267625690,2194016603,2197885271,2193884315,3271596623,2193884747,2193884841,2197842666,3267757749,2193883830,2197826222,2194016567,3271537814,2193886358,2194017867,2197714610,3267759530,2194015661,2197828461,2193883758,3267627310,2197826861,2193886357,2197855565,3267627850,2194017129,2197906778,2194015579,3267625565,2197826139,2193885483,2197858967,3267626645,2193885002,2197850970,2194016950,3267757371,2197832375,2193883735,2193884459,3271564587,2193884821,2197853869,2193884586,3267758773,2197837037,2193884334,2194016855,3271504974,2193886506,2197929364,2194017109,2193884522,2197846394,2194016605,2193884334,3271576219,2193885773,2193886501,2197887658,3267758933,2197853549,2193883866,2194016603,3271578807,2193884311,2193885771,2197834571,3267626665,2197867221,2194015669,2193883830,3271592286,2194016559,2193884311,2197702294,3267628362,2197868197,2194017641,2194015597,3271664309,2193883758,2193885486,2197843117,3267628181,2193886538,2197827402,2194017113,3271607661,2194015579,2193883741,2197846331,3267627307,2193885845,2197904149,2193884874,3267758805,2197885622,2194015419,2197852767,3267625559,2193884459,2197711530,2194017941,3267626666,2197830570,2194016949,2197861559,3267626158,2194016855,2197714221,2193886502,3267759509,2197837269,2193884522,2194016621,3271566685,2193884334,2197858895,2193885773,3267628325,2197843305,2194017109,2193883994,3271568058,2194016603,2197931163,2193884311,3267627595,2197850923,2193884837,2193884884,3271772853,2193883830,2194016567,2197824815,3267626135,2197722702,2193886538,2194017957,3271648937,2194015597,2193883830,2197895262,3267627310,2197863575,2193885845,2193886538,3271593386,2194017101,2194015595,2197832411,3267625565,2193885485,2197826859,2193885845,3271596877,2193884842,2194016981,2197841269,3267757243,2193883739,2197894231,2193884459,3271539348,2194017941,2193884842,2197850842,3267758517,2193884342,2197834414,2194016847,3267495206,2197892390,2194017621,2197923241,3267626346,2194016621,2197906589,2193884318,3267627597,2197835085,2193886501,2197863763,3267627860,2194017114,2197915994,2194016603,3267626139,2197834391,2193885771,2193885861,3271564965,2193884884,2197994203,2193883830,3267758391,2197841071,2193884311,2193884747,3271440202,2194017701,2197862069,2194015597,3267625646,2197846334,2193885486,2193886358,3271646485,2193886538,2194017701,2197894485,3267626346,2197846650,2194016861,2193885485,3271584427,2193885845,2193886026,2197834666,3267758805,2193884506,2197891258,2194016859,3271587127,2193884459,2193884819,2197903125,3267626666,2194016981,2197829045,2193884342,3271592542,2193885774,2193886502,2197843622,3267628370,2194017706,2197898858,2194015597,3267626158,2197830301,2193885773,2197847339,3267627813,2193886546,2197904724,2194017114,3267757405,2197828955,2193884315,2197845591,2193885771,2193885861,2197842789,2193884882,3267758810,2197833142,2194016567,2193884311,3271571095,2193884749,2197714602,2194017701,3267626410,2197838572,2194016942,2193885486,3271572782,2193886358,2197916997,2193886538,3267759445,2197906837,2193884522,2194016877,3271574877,2193884461,2193885845,2197896341,3267627850,2197912394,2194016981,2193884506,3271645754,2194016859,2193884459,2197899799,3267626643,2197853867,2193884842,2194016949,3271582965,2193884342,2194016855,2197701934,3267628310,2194017939,2197698386,2194017706,3271652778,2194015597,2193884334,2197903901,3267627565,2193886485,2197835173,2193886034,3271597418,2194016986,2194015581,2197906075,3267626075,2193885739,2197838635,2193885845,3267627858,2197891762,2194016982,2197910870,3267757367,2193884247,2197837399,2193884459,3267626645,2197829525,2193884586,2197858998,3267758701,2193884334,2197842542,2193885782,3267628330,2197839530,2194017621,2193884586,3271572330,2194016877,2197845181,2193884331,3267627661,2197839189,2193885994,2194017109,3271574997,2193884378,2194016605,2197824855,3267626139,2197842583,2193884747,2193884841,2197834666,2194015925,2193883834,2197826230,3267758391,2197710126,2193886486,2194017867,3271448274,2194017705,2194015669,2197828461,3267625646,2193885742,2197827117,2193886357,3271585109,2193886034,2194017129,2197833178,3267757405,2193883741,2197830235,2193885739,3271654027,2193885845,2193886026,2197904170,3267758805,2194015579,2197832375,2193883735,3271595311,2193884459,2193884821,2197841621,3267626410,2194016949,2197833069,2193884334,3267758679,2197763158,2193886506,2197913226,3267759445,2193884586,2197838554,2194016605,3267626158,2197834411,2193885773,2197851435,3267627817,2194017109,2197845365,2193883866,3267758429,2197837015,2193884315,2193885771,3271637579,2193884841,2197850841,2194015925,3267625654,2197903670,2194016567,2193884311,3271444118,2193886794,2197860006,2194017705,3267757485,2197906093,2193883822,2193885486,3271580845,2193886357,2193886538,2197896522,3267758953,2197845370,2194015579,2193883741,3271579995,2193885483,2193885845,2197835157,3267627850,2194017109,2197825237,2194015579,3271582327,2193883735,2193884459,2197707434,3267759765,2193884842,2197830570,2194016949,2197849277,2193884334,2194016855,2197706061,3267628326,2194017685,2197898837,2193884522,3267758509,2197824861,2193884334,2197842523,3267627597,2193886501,2197839273,2194017109,3267626346,2197826266,2194016605,2197845179,3267626139,2193885771,2197838667,2193884841,3267627732,2197965749,2193883830,2194016603,3271566647,2193884311,2197710422,2193886794,3267759781,2197903017,2194015669,2193883830,3271637166,2193885486,2197912717,2193886357,3267628362,2197908874,2194017129,2194015597,3271639643,2193883741,2193885485,2197826859,3267627669,2197847381,2193886026,2194017109,3271644501,2194015451,2193883739,2197895255,3267626283,2197850779,2193884821,2193884842,3271584490,2194016949,2193884342,2197834414,3267758679,2193884455,2197698342,2194017685,3271587509,2193884522,2194016685,2197837021,3267626158,2193885774,2197835085,2193886501,3271593305,2193886036,2194017642,2197907802,3267758427,2193884315,2197834395,2193885771,3271600935,2193884837,2193884884,2197973877,3267625654,2194016603,2197836983,2193884311,3267626571,2197698378,2194017957,2197849817,3267757485,2193883830,2197838190,2193885486,3267628182,2197835413,2193886538,2194017701,3271567189,2193884524,2197977787,2193883741,3267627309,2197839019,2193885845,2193886026,3271637834,2194017109,2197853533,2193884346,3267758683,2197837143,2193884459,2193885845,3271576469,2193884842,2194016981,2197825205,3267626166,2197842542,2194016855,2193884455,3271448230,2194017683,2193884586,2197830506,3267758445,2197861551,2193884334,2193885773,3271650573,2193886501,2193886546,2197839316,3267758954,2194016621,2197824859,2193884315,3271588439,2193885771,2193885989,2197904165,3267626708,2194016986,2197895350]},Z2=function(){function t(){this.solarCalendar={year:0,month:0,day:0},this.lunarCalendar={year:0,month:0,day:0,intercalation:!1},this.gapjaYearInx=[0,0,0],this.gapjaMonthInx=[0,0,1],this.gapjaDayInx=[0,0,2]}return t.prototype.getLunarData=function(e){return se.KOREAN_LUNAR_DATA[e-se.KOREAN_LUNAR_BASE_YEAR]},t.prototype.getLunarIntercalationMonth=function(e){return e>>12&15},t.prototype.getLunarDays=function(e){var s=this.getLunarData(e);return s>>17&511},t.prototype.getLunarDays2=function(e,s,n){var r=0,i=this.getLunarData(e);return n&&this.getLunarIntercalationMonth(i)==s?r=(i>>16&1)>0?se.LUNAR_BIG_MONTH_DAY:se.LUNAR_SMALL_MONTH_DAY:r=(i>>12-s&1)>0?se.LUNAR_BIG_MONTH_DAY:se.LUNAR_SMALL_MONTH_DAY,r},t.prototype.getLunarDaysBeforeBaseYear=function(e){for(var s=0,n=se.KOREAN_LUNAR_BASE_YEAR;n<e+1;n++)s+=this.getLunarDays(n);return s},t.prototype.getLunarDaysBeforeBaseMonth=function(e,s,n){var r=0;if(e>=se.KOREAN_LUNAR_BASE_YEAR&&s>0){for(var i=1;i<s+1;i++)r+=this.getLunarDays2(e,i,!1);if(n){var o=this.getLunarIntercalationMonth(this.getLunarData(e));o>0&&o<s+1&&(r+=this.getLunarDays2(e,o,!0))}}return r},t.prototype.getLunarAbsDays=function(e,s,n,r){var i=0;return i=this.getLunarDaysBeforeBaseYear(e-1)+this.getLunarDaysBeforeBaseMonth(e,s-1,!0)+n,r&&this.getLunarIntercalationMonth(this.getLunarData(e))==s&&(i+=this.getLunarDays2(e,s,!1)),i},t.prototype.isSolarIntercalationYear=function(e){return(e>>30&1)>0},t.prototype.getSolarDays=function(e){var s=0,n=this.getLunarData(e);return s=this.isSolarIntercalationYear(n)?se.SOLAR_BIG_YEAR_DAY:se.SOLAR_SMALL_YEAR_DAY,s},t.prototype.getSolarDays2=function(e,s){var n=0,r=this.getLunarData(e);return s==2&&this.isSolarIntercalationYear(r)?n=se.SOLAR_DAYS[12]:n=se.SOLAR_DAYS[s-1],n},t.prototype.getSolarDayBeforeBaseYear=function(e){for(var s=0,n=se.KOREAN_LUNAR_BASE_YEAR;n<e+1;n++)s+=this.getSolarDays(n);return s},t.prototype.getSolarDaysBeforeBaseMonth=function(e,s){for(var n=0,r=1;r<s+1;r++)n+=this.getSolarDays2(e,r);return n},t.prototype.getSolarAbsDays=function(e,s,n){var r=0;return r=this.getSolarDayBeforeBaseYear(e-1)+this.getSolarDaysBeforeBaseMonth(e,s-1)+n,r-=se.SOLAR_LUNAR_DAY_DIFF,r},t.prototype.setSolarDateByLunarDate=function(e,s,n,r){var i=this.getLunarAbsDays(e,s,n,r),o=0,l=0,c=0;o=i<this.getSolarAbsDays(e+1,1,1)?e:e+1;for(var d=12;d>0;d--){var h=this.getSolarAbsDays(o,d,1);if(i>=h){l=d,c=i-h+1;break}}this.solarCalendar={year:o,month:l,day:c}},t.prototype.setLunarDateBySolarDate=function(e,s,n){var r=this.getSolarAbsDays(e,s,n),i=0,o=0,l=0,c=!1;i=r>=this.getLunarAbsDays(e,1,1,!1)?e:e-1;for(var d=12;d>0;d--){var h=this.getLunarAbsDays(i,d,1,!1);if(r>=h){o=d,this.getLunarIntercalationMonth(this.getLunarData(i))==d&&(c=r>=this.getLunarAbsDays(i,d,1,!0)),l=r-this.getLunarAbsDays(i,o,1,c)+1;break}}this.lunarCalendar={year:i,month:o,day:l,intercalation:c}},t.prototype.checkValidDate=function(e,s,n,r,i){var o=!1,l=n*1e4+r*100+i;if((e?se.KOREAN_LUNAR_MIN_VALUE:se.KOREAN_SOLAR_MIN_VALUE)<=l&&(e?se.KOREAN_LUNAR_MAX_VALUE:se.KOREAN_SOLAR_MAX_VALUE)>=l&&r>0&&r<13&&i>0){var c=e?this.getLunarDays2(n,r,s):this.getSolarDays2(n,r);if(!e&&n==1582&&r==10){if(i>4&&i<15)return!1;c+=10}i<=c&&(o=!0)}return o},t.prototype.setLunarDate=function(e,s,n,r){var i=!1;return this.checkValidDate(!0,r,e,s,n)&&(this.lunarCalendar={year:e,month:s,day:n,intercalation:r&&this.getLunarIntercalationMonth(this.getLunarData(e))==s},this.setSolarDateByLunarDate(e,s,n,r),i=!0),i},t.prototype.setSolarDate=function(e,s,n){var r=!1;return this.checkValidDate(!1,!1,e,s,n)&&(this.solarCalendar={year:e,month:s,day:n},this.setLunarDateBySolarDate(e,s,n),r=!0),r},t.prototype.setGapJa=function(){var e=this.getLunarAbsDays(this.lunarCalendar.year,this.lunarCalendar.month,this.lunarCalendar.day,!!this.lunarCalendar.intercalation);if(e>0){this.gapjaYearInx[0]=(this.lunarCalendar.year+6-se.KOREAN_LUNAR_BASE_YEAR)%se.KOREAN_CHEONGAN.length,this.gapjaYearInx[1]=(this.lunarCalendar.year+0-se.KOREAN_LUNAR_BASE_YEAR)%se.KOREAN_GANJI.length;var s=this.lunarCalendar.month;s+=12*(this.lunarCalendar.year-se.KOREAN_LUNAR_BASE_YEAR),this.gapjaMonthInx[0]=(s+3)%se.KOREAN_CHEONGAN.length,this.gapjaMonthInx[1]=(s+1)%se.KOREAN_GANJI.length,this.gapjaDayInx[0]=(e+4)%se.KOREAN_CHEONGAN.length,this.gapjaDayInx[1]=(e+2)%se.KOREAN_GANJI.length}},t.prototype.getGapJaIndex=function(){return this.setGapJa(),{cheongan:{year:this.gapjaYearInx[0],month:this.gapjaMonthInx[0],day:this.gapjaDayInx[0]},ganji:{year:this.gapjaYearInx[1],month:this.gapjaMonthInx[1],day:this.gapjaDayInx[1]}}},t.prototype.getGapja=function(e){var s=this.getGapJaIndex(),n=e?se.CHINESE_CHEONGAN:se.KOREAN_CHEONGAN,r=e?se.CHINESE_GANJI:se.KOREAN_GANJI,i=e?se.CHINESE_GAPJA_UNIT:se.KOREAN_GAPJA_UNIT,o=e?"".concat(se.INTERCALATION_STR[1]).concat(se.CHINESE_GAPJA_UNIT[1]):"".concat(se.INTERCALATION_STR[0]).concat(se.KOREAN_GAPJA_UNIT[1]);return{year:"".concat(n[s.cheongan.year]).concat(r[s.ganji.year]).concat(i[this.gapjaYearInx[2]]),month:"".concat(n[s.cheongan.month]).concat(r[s.ganji.month]).concat(i[this.gapjaMonthInx[2]]),day:"".concat(n[s.cheongan.day]).concat(r[s.ganji.day]).concat(i[this.gapjaDayInx[2]]),intercalation:this.lunarCalendar.intercalation?o:""}},t.prototype.getKoreanGapja=function(){return this.getGapja()},t.prototype.getChineseGapja=function(){return this.getGapja(!0)},t.prototype.getLunarCalendar=function(){return this.lunarCalendar},t.prototype.getSolarCalendar=function(){return this.solarCalendar},t}();const e1=(t,e,s,n=!1)=>{try{const r=new Z2;r.setLunarDate(t,e,s,n);const i=r.getSolarYear(),o=r.getSolarMonth(),l=r.getSolarDay();return new Date(i||t,(o||e)-1,l||s)}catch(r){return console.error("Error converting lunar to solar:",r),new Date(t,e-1,s)}},t1={입춘:{month:2,day:4},우수:{month:2,day:19},경칩:{month:3,day:6},춘분:{month:3,day:21},청명:{month:4,day:5},곡우:{month:4,day:20},입하:{month:5,day:6},소만:{month:5,day:21},망종:{month:6,day:6},하지:{month:6,day:21},소서:{month:7,day:7},대서:{month:7,day:23},입추:{month:8,day:8},처서:{month:8,day:23},백로:{month:9,day:8},추분:{month:9,day:23},한로:{month:10,day:8},상강:{month:10,day:23},입동:{month:11,day:8},소설:{month:11,day:22},대설:{month:12,day:7},동지:{month:12,day:22},소한:{month:1,day:6},대한:{month:1,day:20}},s1=t=>{const e=t.getMonth()+1,s=t.getDate();for(const[n,r]of Object.entries(t1))if(r.month===e&&r.day===s)return n;return null},n1=["일","월","화","수","목","금","토"];function Nd({events:t,onCreateEvent:e,onDateClick:s,onEditEvent:n,onDeleteEvent:r,highlightedEventId:i}){const{currentDate:o,getTodosForDate:l,deleteTodo:c}=ct(),[d,h]=j.useState(null),[m,u]=j.useState(!1),[g,f]=j.useState(new Date),[x,p]=j.useState(null),{diaryDates:y}=Ll({viewMode:"month",currentDate:o}),v=j.useMemo(()=>{const E=sr(o),D=nr(o),O=Cr(E,{weekStartsOn:0}),L=_r(D,{weekStartsOn:0});return Mr({start:O,end:L})},[o]),S=j.useMemo(()=>{const E=new Map,D=new Set;return v.forEach(O=>{if(Yc(O,o)){const L=$(O,"yyyy-MM-dd"),T=s1(O);T&&(D.has(T)||(D.add(T),E.set(L,T)))}}),E},[v,o]),C=E=>t.filter(D=>{const O=new Date(D.start_time);return It(O,E)}).slice(0,3),N=j.useMemo(()=>{const E=new Map;return v.forEach(D=>{const O=$(D,"yyyy-MM-dd");E.set(O,l(D))}),E},[v,l]),M=E=>{switch(E){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return"⚪"}},k=(E,D)=>{s?s(E,D):e(E)},w=(E,D)=>{D.stopPropagation(),n(E)},_=E=>{f(E),u(!0)};return a.jsxs("div",{className:"h-full flex flex-col bg-background",children:[a.jsxs("div",{className:"relative grid grid-cols-7 border-b border-border bg-gradient-to-r from-hanbok-white via-white to-hanbok-white",children:[a.jsx(B2,{pattern:"clouds",opacity:.05}),n1.map((E,D)=>a.jsxs("div",{className:`
              relative px-2 py-4 text-center font-bold tracking-wider
              ${D===0?"text-hanbok-red":D===6?"text-hanbok-blue":"text-gray-700 dark:text-gray-300"}
              ${D===0||D===6?"text-base":"text-sm"}
              transition-colors duration-200 hover:bg-white/50
            `,children:[a.jsx("span",{className:"relative z-10",children:E}),(D===0||D===6)&&a.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-0.5 bg-current opacity-30 rounded"})]},E))]}),a.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-6 gap-px bg-border",children:v.map(E=>{const D=ap(E),O=Yc(E,o),L=Bs(E),T=C(E),A=$(E,"yyyy-MM-dd"),I=N.get(A)||[],P=I.filter(F=>!F.completed),H=I.filter(F=>F.completed),z=S.get(A)||null;return a.jsxs("div",{onClick:F=>k(E,F),onMouseEnter:()=>h(E),onMouseLeave:()=>h(null),className:`
                relative p-2 cursor-pointer transition-all duration-200 group
                bg-background hover:bg-gradient-to-br hover:from-hanbok-white hover:to-white
                ${O?"":"bg-muted/30"}
                ${L?"bg-gradient-to-br from-hanbok-yellow/20 to-yinyang-yang/10 shadow-inner border-2 border-yinyang-yang/30":""}
                ${D===0?"hover:from-hanbok-red/5 hover:to-red-50":""}
                ${D===6?"hover:from-hanbok-blue/5 hover:to-blue-50":""}
                min-h-[120px] border border-gray-100 dark:border-gray-800
              `,children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:`
                        font-bold transition-all duration-200
                        ${L?"bg-gradient-to-br from-yinyang-yang to-hanbok-yellow text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg text-sm":"text-base"}
                        ${O?"":"text-muted-foreground opacity-50"}
                        ${D===0?"text-hanbok-red":""}
                        ${D===6?"text-hanbok-blue":""}
                        group-hover:scale-110
                      `,children:$(E,"d")}),L&&a.jsx("span",{className:"text-xs animate-pulse",children:"✨"})]}),a.jsx("div",{className:"flex flex-col",children:z&&a.jsx("span",{className:"text-[9px] text-hanbok-red font-bold bg-hanbok-red/10 px-1 py-0.5 rounded mt-0.5 truncate",children:z})})]}),O&&a.jsxs("div",{className:"flex items-center gap-1",children:[y.has($(E,"yyyy-MM-dd"))&&a.jsx("button",{onClick:F=>{F.stopPropagation(),_(E)},className:"p-1 rounded text-xs transition-all hover:scale-110 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:"📖"}),I.length>0&&a.jsxs(a.Fragment,{children:[P.filter(F=>F.priority==="high").length>0&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full",children:P.filter(F=>F.priority==="high").length}),P.filter(F=>F.priority==="medium").length>0&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-yellow-500 rounded-full",children:P.filter(F=>F.priority==="medium").length}),P.filter(F=>F.priority==="low").length>0&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-green-500 rounded-full",children:P.filter(F=>F.priority==="low").length}),H.length>0&&a.jsx("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-bold text-gray-500 bg-gray-200 rounded-full",children:"✓"})]})]})]}),a.jsxs("div",{className:"space-y-1",children:[T.map(F=>a.jsxs("div",{className:`text-xs p-1 rounded cursor-pointer hover:opacity-80 group flex items-center ${i===F.id?"ring-2 ring-primary animate-pulse":""}`,style:{backgroundColor:`${F.color||"#3b82f6"}20`,color:F.color||"#3b82f6",borderLeft:`2px solid ${F.color||"#3b82f6"}`},onClick:G=>w(F,G),children:[a.jsxs("span",{className:"flex-1 truncate",children:[F.all_day&&a.jsx("span",{className:"font-semibold",children:"종일 "}),!F.all_day&&$(new Date(F.start_time),"HH:mm")," ",F.title]}),r&&a.jsx("button",{onClick:G=>{G.stopPropagation(),confirm(`"${F.title}" 일정을 삭제하시겠습니까?`)&&(r==null||r(F.id))},className:"opacity-50 hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-1 text-lg font-bold",title:"일정 삭제",children:"×"})]},F.id)),t.filter(F=>F.id&&It(new Date(F.start_time),E)).length>3&&a.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:["+",t.filter(F=>F.id&&It(new Date(F.start_time),E)).length-3,"개 더보기"]})]}),O&&a.jsx(Q2,{date:E,compact:!0}),d&&It(d,E)&&I.length>0&&a.jsxs("div",{className:"absolute z-50 top-full left-0 mt-2 w-64 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3",children:[a.jsxs("div",{className:"text-sm font-semibold mb-2 text-gray-800 dark:text-gray-200",children:["할일 목록 (",I.length,"개)"]}),a.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:[I.slice(0,5).map(F=>a.jsxs("div",{className:"flex items-start gap-2 text-xs group",children:[a.jsx("span",{children:M(F.priority)}),a.jsx("span",{className:`flex-1 cursor-pointer hover:underline ${F.completed?"line-through text-gray-500":"text-gray-700 dark:text-gray-300"}`,onClick:G=>{G.stopPropagation(),p(F)},children:F.text}),a.jsx("button",{onClick:G=>{G.stopPropagation(),p(F)},className:"opacity-0 group-hover:opacity-100 text-blue-500 hover:text-blue-700 transition-opacity text-xs",title:"할일 수정",children:"✏️"}),a.jsx("button",{onClick:G=>{G.stopPropagation(),c(F.id)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity",title:"할일 삭제",children:"×"})]},F.id)),I.length>5&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["+",I.length-5,"개 더보기"]})]})]})]},E.toISOString())})}),a.jsx(mi,{isOpen:m,onClose:()=>u(!1),date:g,onSave:()=>u(!1)}),a.jsx(Ol,{isOpen:!!x,onClose:()=>p(null),todo:x})]})}function r1({date:t,hour:e,onClose:s,onAddEvent:n,onAddTodo:r}){const[i,o]=j.useState("event"),[l,c]=j.useState(""),[d,h]=j.useState(""),[m,u]=j.useState(e?`${e.toString().padStart(2,"0")}:00`:"09:00"),[g,f]=j.useState(e?`${(e+1).toString().padStart(2,"0")}:00`:"10:00"),[x,p]=j.useState("medium"),[y,v]=j.useState(!!e),S=C=>{if(C.preventDefault(),!!l.trim()){if(i==="event"){const N=new Date(t),[M,k]=m.split(":").map(Number);N.setHours(M,k,0,0);const w=new Date(t),[_,E]=g.split(":").map(Number);w.setHours(_,E,0,0),n({title:l.trim(),description:d.trim()||void 0,start_time:N.toISOString(),end_time:w.toISOString(),all_day:!1,location:void 0,color:"#3b82f6"})}else{const N={text:l.trim(),description:d.trim()||void 0,completed:!1,priority:x,date:$(t,"yyyy-MM-dd"),hasTime:y,startTime:y?m:void 0,endTime:y?g:void 0};r(N)}s()}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[$(t,"M월 d일")," 항목 추가"]}),a.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:a.jsx(fm,{className:"h-5 w-5 text-gray-500"})})]}),a.jsxs("form",{onSubmit:S,className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"추가할 항목"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"itemType",value:"event",checked:i==="event",onChange:C=>o(C.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"📅 일정"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"itemType",value:"todo",checked:i==="todo",onChange:C=>o(C.target.value),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"✅ 할일"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:i==="event"?"일정 제목":"할일 내용"}),a.jsx("input",{type:"text",value:l,onChange:C=>c(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:i==="event"?"일정 제목을 입력하세요":"할일을 입력하세요",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"설명 (선택사항)"}),a.jsx("textarea",{value:d,onChange:C=>h(C.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white resize-none",placeholder:"추가 설명을 입력하세요"})]}),i==="todo"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"우선순위"}),a.jsxs("select",{value:x,onChange:C=>p(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"high",children:"🔴 높음"}),a.jsx("option",{value:"medium",children:"🟡 보통"}),a.jsx("option",{value:"low",children:"🟢 낮음"})]})]}),a.jsxs("div",{children:[i==="todo"&&a.jsx("div",{className:"mb-3",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y,onChange:C=>v(C.target.checked),className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"시간 지정"})]})}),(i==="event"||y)&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:"시작 시간"}),a.jsx("input",{type:"time",value:m,onChange:C=>u(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:i==="event"?"종료 시간":"종료 시간 (선택)"}),a.jsx("input",{type:"time",value:g,onChange:C=>f(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:i==="event"})]})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"취소"}),a.jsx("button",{type:"submit",disabled:!l.trim(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i==="event"?"일정 추가":"할일 추가"})]})]})]})})}const Gr={event:{background:"#3b82f620",border:"#3b82f6",text:"#3b82f6"},todo:{high:{background:"#ef444420",border:"#ef4444",text:"#ef4444"},medium:{background:"#f59e0b20",border:"#f59e0b",text:"#f59e0b"},low:{background:"#10b98120",border:"#10b981",text:"#10b981"}}},Sd=Array.from({length:11},(t,e)=>e+9);function a1({events:t,onCreateEvent:e,onDateClick:s,onEditEvent:n,onDeleteEvent:r,highlightedEventId:i}){const{currentDate:o,getTodosForDate:l,addTodo:c,deleteTodo:d,toggleTodo:h}=ct(),[m,u]=j.useState(!1),[g,f]=j.useState(new Date),[x,p]=j.useState(),[y,v]=j.useState(!1),[S,C]=j.useState(new Date),[N,M]=j.useState(null),{diaryDates:k}=Ll({viewMode:"week",currentDate:o}),w=j.useMemo(()=>{const P=Cr(o,{weekStartsOn:0}),H=_r(o,{weekStartsOn:0});return Mr({start:P,end:H})},[o]),_=P=>{switch(P){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return""}},E=P=>{C(P),v(!0)},D=(P,H)=>!t||t.length===0?[]:t.filter(z=>{if(!z.start_time)return!1;try{const F=new Date(z.start_time);if(isNaN(F.getTime()))return!1;const G=_o(F);return It(F,P)&&G===H}catch(F){return console.warn("Invalid event date:",z.start_time,F),!1}}),O=(P,H)=>l(P).filter(F=>{if(!F.hasTime||!F.startTime)return!1;try{const[G]=F.startTime.split(":").map(Number);return G===H}catch(G){return console.warn("Invalid todo time:",F.startTime,G),!1}}),L=P=>l(P).filter(z=>!z.hasTime||!z.startTime),T=new Date().getHours(),A=new Date().getMinutes(),I=(T*60+A)/(24*60)*100;return a.jsxs("div",{className:"h-full flex flex-col bg-background",children:[a.jsxs("div",{className:"grid grid-cols-8 border-b border-border bg-muted sticky top-0 z-10",children:[a.jsx("div",{className:"p-3 text-center text-sm font-semibold text-muted-foreground",children:"시간"}),w.map(P=>{const H=P.getDay(),z=Bs(P);return a.jsxs("div",{className:`
                p-3 text-center border-l border-border
                ${z?"bg-primary/10":""}
              `,children:[a.jsx("div",{className:`text-xs font-medium ${H===0?"text-red-600":H===6?"text-blue-600":"text-muted-foreground"}`,children:$(P,"EEE",{locale:ve})}),a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx("div",{className:`text-lg font-semibold ${z?"text-primary":"text-foreground"}`,children:$(P,"d")}),k.has($(P,"yyyy-MM-dd"))&&a.jsx("button",{onClick:()=>E(P),className:"p-1 rounded-full text-xs transition-all hover:scale-110 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:"📖"})]})]},P.toISOString())})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs("div",{className:"relative",children:[w.some(P=>Bs(P))&&a.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${I}%`},children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-16"}),a.jsx("div",{className:"flex-1 h-0.5 bg-red-500"}),a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full -ml-1"})]})}),a.jsxs("div",{className:"grid grid-cols-8",children:[a.jsx("div",{className:"border-r border-border",children:Sd.map(P=>a.jsx("div",{className:"h-16 px-2 py-1 text-xs text-muted-foreground text-right",children:$(new Date().setHours(P,0,0,0),"HH:mm")},P))}),w.map(P=>{const H=Bs(P);return a.jsx("div",{className:"border-r border-border",children:Sd.map(z=>{const F=D(P,z),G=O(P,z);return a.jsxs("div",{className:`
                          h-16 border-b border-border/50 p-1 cursor-pointer
                          hover:bg-muted/50 transition-colors
                          ${H&&T===z?"bg-primary/10":""}
                        `,onClick:U=>{s?s(P,U):(f(new Date(P)),p(z),u(!0))},children:[F.map(U=>{if(!U.id||!U.start_time||!U.title)return null;try{const X=new Date(U.start_time);return isNaN(X.getTime())?null:a.jsxs("div",{className:"text-xs p-1 mb-1 rounded truncate cursor-pointer hover:opacity-80 group flex items-center justify-between",style:{backgroundColor:Gr.event.background,color:Gr.event.text,borderLeft:`2px solid ${Gr.event.border}`},onClick:V=>{V.stopPropagation(),n(U)},children:[a.jsxs("span",{className:"truncate",children:[$(X,"HH:mm")," ",U.title]}),r&&a.jsx("button",{onClick:V=>{V.stopPropagation(),confirm(`"${U.title}" 일정을 삭제하시겠습니까?`)&&r(U.id)},className:"opacity-60 hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-1 flex-shrink-0 text-sm font-bold",title:"일정 삭제",children:"×"})]},U.id)}catch(X){return console.warn("Error rendering event:",U,X),null}}),G.map(U=>{const X=Gr.todo[U.priority];return a.jsxs("div",{className:"text-xs p-1 mb-1 rounded truncate cursor-pointer hover:opacity-80 flex items-center space-x-1",style:{backgroundColor:X.background,color:X.text,borderLeft:`2px solid ${X.border}`},onClick:V=>{V.stopPropagation()},children:[a.jsx("button",{onClick:V=>{V.stopPropagation(),h(U.id)},className:`
                                w-2 h-2 rounded-full border flex items-center justify-center text-xs
                                ${U.completed?"bg-green-500 border-green-500 text-white":"border-orange-400"}
                              `,children:U.completed&&"✓"}),a.jsx("span",{className:"text-xs",children:_(U.priority)}),a.jsxs("span",{className:`flex-1 ${U.completed?"line-through opacity-60":""}`,children:[U.startTime," ",U.text]})]},U.id)})]},`${P.toISOString()}-${z}`)})},P.toISOString())})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-8 gap-px bg-border",children:[a.jsx("div",{className:"bg-muted p-3 text-center text-sm font-semibold text-muted-foreground",children:"할일"}),w.map(P=>{const H=L(P),z=Bs(P);return a.jsxs("div",{className:`
                    bg-background p-3 min-h-[120px]
                    ${z?"bg-primary/5":""}
                  `,children:[k.has($(P,"yyyy-MM-dd"))&&a.jsx("div",{className:"mb-2 flex items-center",children:a.jsxs("button",{onClick:()=>E(P),className:"p-1 rounded text-xs transition-all hover:scale-105 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",title:"일기 보기/수정",children:["📖 ",a.jsx("span",{className:"ml-1 text-xs",children:"일기"})]})}),a.jsx("div",{className:"space-y-1 mb-2",children:H.map(F=>a.jsxs("div",{className:"flex items-center space-x-1 group",children:[a.jsx("button",{onClick:()=>h(F.id),className:`
                            w-3 h-3 rounded-full border flex items-center justify-center text-xs
                            ${F.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600"}
                          `,children:F.completed&&"✓"}),a.jsx("span",{className:"text-xs",children:_(F.priority)}),a.jsx("span",{className:`
                            flex-1 text-xs truncate cursor-pointer hover:underline
                            ${F.completed?"line-through text-gray-500":"text-gray-800 dark:text-gray-200"}
                          `,onClick:()=>M(F),children:F.text}),a.jsx("button",{onClick:()=>M(F),className:"opacity-0 group-hover:opacity-100 text-blue-500 hover:text-blue-700 text-xs",title:"수정",children:"✏️"}),a.jsx("button",{onClick:()=>d(F.id),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 text-xs",children:"×"})]},F.id))})]},`todos-${P.toISOString()}`)})]})]})}),m&&a.jsx(r1,{date:g,hour:x,onClose:()=>u(!1),onAddEvent:P=>{e(new Date(P.start_time)),u(!1)},onAddTodo:P=>{c(P),u(!1)}}),a.jsx(mi,{isOpen:y,onClose:()=>v(!1),date:S,onSave:()=>v(!1)}),a.jsx(Ol,{isOpen:!!N,onClose:()=>M(null),todo:N})]})}const Cd=({label:t,score:e,icon:s,description:n})=>{const r=km(e),i=Math.round(e);return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all hover:scale-105 border border-border/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:s}),a.jsx("h3",{className:"text-xl font-bold text-foreground",children:t})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold",style:{color:r.color},children:[i,"%"]}),a.jsx("div",{className:"text-sm font-medium",style:{color:r.color},children:r.label})]})]}),a.jsx("div",{className:"w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${i}%`,backgroundColor:r.color,boxShadow:`0 0 10px ${r.color}40`}})}),n&&a.jsx("p",{className:"text-sm text-muted-foreground mt-3 italic",children:n})]})},i1=()=>a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-8 flex items-center gap-3",children:[a.jsx("span",{className:"animate-pulse",children:"✨"}),"오늘의 운세"]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 flex-1",children:[1,2,3,4,5].map(t=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 animate-pulse",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),a.jsx("div",{className:"w-24 h-6 bg-muted rounded"})]}),a.jsx("div",{className:"w-16 h-8 bg-muted rounded"})]}),a.jsx("div",{className:"w-full h-4 bg-muted rounded-full"})]},t))})]}),o1=()=>{const t=ze(),{user:e}=Qt();return a.jsx("div",{className:"h-full flex flex-col items-center justify-center",children:a.jsxs("div",{className:"max-w-md text-center",children:[a.jsx("div",{className:"text-6xl mb-6",children:"🔮"}),a.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"운세를 확인하려면 설정이 필요합니다"}),a.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"생년월일시 정보를 입력하여 맞춤 운세를 받아보세요"}),a.jsx("button",{onClick:()=>{t("/settings")},className:"px-8 py-4 bg-primary-500 text-white text-lg font-semibold rounded-xl hover:bg-primary-600 transition-colors shadow-lg",children:"설정하러 가기"}),e&&a.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[a.jsxs("p",{children:["로그인된 계정: ",e.email]}),a.jsx("p",{className:"text-xs mt-1",children:"설정 페이지에서 생년월일시를 입력하면 자동으로 운세가 계산됩니다"})]})]})})},_d={총운:"하루 전반적인 운의 흐름을 나타냅니다",연애운:"사랑과 인간관계의 조화를 보여줍니다",재물운:"금전적 이득과 재산 증식의 기회를 알려줍니다",건강운:"신체와 정신의 건강 상태를 나타냅니다",직업운:"업무 성과와 경력 발전 가능성을 보여줍니다"},l1=({currentDate:t,_onDiaryClick:e,_hasDiary:s})=>{const{birthInfo:n,setBirthInfo:r}=Xs(),{user:i}=Qt();Sr.useEffect(()=>{if(n)console.log("[TodayFortuneSection] birthInfo 존재:",n);else{console.log("[TodayFortuneSection] birthInfo가 없음, localStorage 확인...");const d=localStorage.getItem("sajuapp-personal-info");if(d)try{const h=JSON.parse(d);if(console.log("[TodayFortuneSection] localStorage에서 데이터 발견:",h),h.birthDate&&h.birthTime){const m=new Date(h.birthDate),[u,g]=h.birthTime.split(":").map(Number),f={year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate(),hour:u||0,minute:g||0,isLunar:h.calendarType==="lunar",isMale:h.gender==="male",name:h.gender==="male"?"사용자(남)":"사용자(여)"};console.log("[TodayFortuneSection] Store에 저장할 사주 정보:",f),r(f)}}catch(h){console.error("[TodayFortuneSection] localStorage 파싱 오류:",h)}else console.log("[TodayFortuneSection] localStorage에도 데이터 없음")}},[n,r]),console.log("[TodayFortuneSection] 현재 birthInfo:",n),console.log("[TodayFortuneSection] 현재 user:",i);const{calculateFortune:o}=Nm(),l=j.useMemo(()=>n?o(n,t):(console.log("[TodayFortuneSection] No birthInfo available"),null),[n,t,o]);if(!n)return a.jsx(o1,{});if(!l)return a.jsx(i1,{});const c=[{label:"총운",score:l.totalLuck,icon:"🌟"},{label:"연애운",score:l.loveLuck,icon:"💕"},{label:"재물운",score:l.wealthLuck,icon:"💰"},{label:"건강운",score:l.healthLuck,icon:"🏥"},{label:"직업운",score:l.careerLuck,icon:"💼"}];return a.jsxs("div",{className:"h-full flex flex-col p-2",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-4xl font-bold text-foreground mb-2 flex items-center gap-3",children:[a.jsx("span",{className:"text-yellow-500",children:"✨"}),"오늘의 운세"]}),a.jsx("p",{className:"text-lg text-muted-foreground",children:"당신의 사주명리로 풀어보는 오늘 하루"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6 flex-1",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(Cd,{label:c[0].label,score:c[0].score,icon:c[0].icon,description:_d[c[0].label]})}),c.slice(1).map(d=>a.jsx(Cd,{label:d.label,score:d.score,icon:d.icon,description:_d[d.label]},d.label))]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 rounded-2xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"오늘의 행운 아이템"}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full shadow-lg flex items-center justify-center bg-white dark:bg-gray-800",children:a.jsx("div",{className:"w-12 h-12 rounded-full",style:{backgroundColor:l.luckyColor},title:"행운의 색상"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"행운의 색상"}),a.jsx("div",{className:"font-bold text-lg",children:l.luckyColor})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 text-white rounded-full flex items-center justify-center text-2xl font-bold shadow-lg",children:l.luckyNumber}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"행운의 숫자"}),a.jsxs("div",{className:"font-bold text-lg",children:["숫자 ",l.luckyNumber]})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl p-6 shadow-lg",children:[a.jsxs("h3",{className:"text-xl font-bold text-foreground mb-3 flex items-center gap-2",children:[a.jsx("span",{children:"💌"}),"오늘의 메시지"]}),a.jsx("p",{className:"text-lg text-foreground leading-relaxed mb-3",children:l.message}),l.advice&&a.jsxs("p",{className:"text-sm text-muted-foreground italic border-t border-border/30 pt-3",children:["💡 ",l.advice]})]})]})]})},c1=Array.from({length:10},(t,e)=>e+9);function d1({events:t,onCreateEvent:e,onEditEvent:s,onDeleteEvent:n}){const{currentDate:r,getTodosForDate:i,deleteTodo:o,toggleTodo:l}=ct(),[c,d]=j.useState(!1),[h,m]=j.useState(null),u=j.useMemo(()=>i(r),[r,i]),g=w=>{switch(w){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return"🟡"}},f=j.useMemo(()=>u.filter(w=>w.hasTime&&w.startTime),[u]),x=j.useMemo(()=>u.filter(w=>!w.hasTime||!w.startTime),[u]),p=j.useMemo(()=>t.filter(w=>{const _=new Date(w.start_time);return It(_,r)}).sort((w,_)=>new Date(w.start_time).getTime()-new Date(_.start_time).getTime()),[t,r]),y=p.filter(w=>w.all_day),v=p.filter(w=>!w.all_day),S=new Date().getHours(),C=new Date().getMinutes(),M=S>=9&&S<=18?((S-9)*60+C)/(10*60)*100:-1,k=w=>{const _=new Date(w.start_time),E=new Date(w.end_time),D=_o(_),O=_o(E),L=Math.max((D-9)*60+Gc(_),0),T=Math.min((O-9)*60+Gc(E),10*60),A=L/(10*60)*100,I=(T-L)/(10*60)*100;return{top:`${A}%`,height:`${Math.max(I,2)}%`}};return a.jsxs("div",{className:"h-full flex flex-col lg:flex-row bg-background",children:[a.jsxs("div",{className:"lg:w-1/2 w-full lg:border-r border-b lg:border-b-0 border-border p-6 overflow-auto bg-gradient-to-br from-background to-muted/20 h-1/2 lg:h-full",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-foreground mb-1",children:$(r,"yyyy년 M월 d일",{locale:ve})}),a.jsx("p",{className:"text-xl text-muted-foreground",children:$(r,"EEEE",{locale:ve})})]}),a.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-gradient-to-r from-primary-500/10 to-primary-600/10 border border-primary-500/20",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"빠른 작성"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("button",{onClick:()=>{const w=new Date(r);w.setHours(new Date().getHours(),0,0,0),e(w)},className:"px-3 py-2 text-sm bg-blue-500/10 hover:bg-blue-500/20 text-blue-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[a.jsx("span",{children:"📅"})," 일정"]}),a.jsxs("button",{onClick:()=>{const w=new Date(r);w.setHours(new Date().getHours(),0,0,0),e(w)},className:"px-3 py-2 text-sm bg-amber-500/10 hover:bg-amber-500/20 text-amber-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[a.jsx("span",{children:"✅"})," 할일"]}),a.jsxs("button",{onClick:()=>d(!0),className:"px-3 py-2 text-sm bg-purple-500/10 hover:bg-purple-500/20 text-purple-600 rounded-md transition-colors flex items-center justify-center gap-1",children:[a.jsx("span",{children:"📖"})," 일기"]})]})]}),a.jsx("div",{className:"h-full flex flex-col",children:a.jsx(l1,{currentDate:r})})]}),a.jsxs("div",{className:"lg:w-1/2 w-full overflow-auto h-1/2 lg:h-full",children:[y.length>0&&a.jsxs("div",{className:"p-4 border-b border-border bg-muted/30",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"종일 일정"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(w=>a.jsxs("div",{className:"group inline-flex items-center px-3 py-1 rounded-full text-sm cursor-pointer hover:opacity-80 transition-opacity",style:{backgroundColor:w.color||"#3b82f6",color:"white"},onClick:()=>s(w),title:w.description||w.title,children:[a.jsx("span",{children:w.title}),n&&a.jsx("button",{onClick:_=>{_.stopPropagation(),confirm(`"${w.title}" 일정을 삭제하시겠습니까?`)&&n(w.id)},className:"opacity-0 group-hover:opacity-100 ml-2 hover:text-red-200 transition-opacity",title:"일정 삭제",children:"×"})]},w.id))})]}),a.jsxs("div",{className:"relative min-h-full",children:[It(r,new Date)&&M>=0&&a.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${M}%`},children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-20"}),a.jsx("div",{className:"flex-1 h-0.5 bg-red-500"}),a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full -ml-1.5"})]})}),a.jsxs("div",{className:"relative",children:[c1.map(w=>a.jsxs("div",{className:"flex border-b border-border/30",style:{height:"100px"},children:[a.jsx("div",{className:"w-20 px-4 py-3 text-muted-foreground text-right",children:a.jsx("div",{className:"text-xl font-semibold",children:$(new Date().setHours(w,0,0,0),"HH:mm")})}),a.jsxs("div",{className:"flex-1 relative cursor-pointer hover:bg-muted/20 transition-colors group",onClick:()=>{const _=new Date(r);_.setHours(w,0,0,0),e(_)},title:`${w}:00에 일정 추가`,children:[a.jsx("div",{className:"absolute top-1/2 left-0 right-0 border-t border-border/15"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-500/20 flex items-center justify-center",children:a.jsx("span",{className:"text-primary-600 text-lg",children:"+"})})})]})]},w)),a.jsxs("div",{className:"absolute top-0 left-20 right-0 bottom-0",children:[v.map(w=>{const _=k(w);return a.jsx("div",{className:"absolute left-4 right-1/2 p-4 rounded-xl cursor-pointer hover:shadow-lg transition-all hover:scale-[1.02] mr-2 group",style:{..._,backgroundColor:`${w.color||"#3b82f6"}15`,borderLeft:`4px solid ${w.color||"#3b82f6"}`,border:`1px solid ${w.color||"#3b82f6"}30`},onClick:()=>s(w),children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"text-sm font-semibold mb-1",style:{color:w.color||"#3b82f6"},children:[$(new Date(w.start_time),"HH:mm")," - ",$(new Date(w.end_time),"HH:mm")]}),a.jsx("div",{className:"font-semibold text-foreground text-lg mb-1",children:w.title}),w.description&&a.jsx("div",{className:"text-sm text-muted-foreground",children:w.description}),w.location&&a.jsxs("div",{className:"text-sm text-muted-foreground mt-2 flex items-center gap-1",children:[a.jsx("span",{children:"📍"})," ",w.location]})]}),n&&a.jsx("button",{onClick:E=>{E.stopPropagation(),confirm(`"${w.title}" 일정을 삭제하시겠습니까?`)&&n(w.id)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity ml-2 text-lg",title:"일정 삭제",children:"×"})]})},w.id)}),f.map(w=>{const[_,E]=(w.startTime||"09:00").split(":").map(Number);new Date(r).setHours(_,E,0,0);const O=Math.max(((_-9)*60+E)/(10*60)*100,0);return a.jsx("div",{className:"absolute left-1/2 right-4 p-3 rounded-lg cursor-pointer hover:shadow-md transition-all ml-2",style:{top:`${O}%`,height:"40px",backgroundColor:w.completed?"#10b98115":"#fbbf2415",borderLeft:`3px solid ${w.completed?"#10b981":"#fbbf24"}`,opacity:w.completed?.7:1},onClick:()=>l(w.id),children:a.jsxs("div",{className:"flex items-center justify-between h-full",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:w.completed,onChange:()=>l(w.id),className:"w-4 h-4",onClick:L=>L.stopPropagation()}),a.jsx("span",{className:"text-sm font-medium",children:g(w.priority)}),a.jsx("span",{className:`text-sm ${w.completed?"line-through text-muted-foreground":""}`,children:w.text}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",w.startTime,")"]})]}),a.jsx("button",{onClick:L=>{L.stopPropagation(),o(w.id)},className:"text-red-500 hover:text-red-700 text-sm px-2",children:"✕"})]})},w.id)})]})]})]}),x.length>0&&a.jsxs("div",{className:"p-4 border-t border-border bg-muted/10",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"시간 미지정 할일"}),a.jsx("div",{className:"space-y-2",children:x.map(w=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background border border-border hover:shadow-sm transition-all",style:{opacity:w.completed?.6:1},children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("input",{type:"checkbox",checked:w.completed,onChange:()=>l(w.id),className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:g(w.priority)}),a.jsx("span",{className:`text-sm flex-1 cursor-pointer hover:underline ${w.completed?"line-through text-muted-foreground":""}`,onClick:()=>m(w),children:w.text})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>m(w),className:"text-blue-500 hover:text-blue-700 text-sm px-2 py-1",children:"수정"}),a.jsx("button",{onClick:()=>o(w.id),className:"text-red-500 hover:text-red-700 text-sm px-2 py-1",children:"삭제"})]})]},w.id))})]})]}),a.jsx(mi,{isOpen:c,onClose:()=>d(!1),date:r,onSave:()=>{d(!1)}}),a.jsx(Ol,{isOpen:!!h,onClose:()=>m(null),todo:h})]})}const Sm=j.createContext(void 0),h1=()=>{const t=j.useContext(Sm);if(!t)throw new Error("useYearlyMemo must be used within a YearlyMemoProvider");return t},u1=({children:t})=>{const[e,s]=j.useState([]);j.useEffect(()=>{const h=localStorage.getItem("yearlyMemos");if(h)try{const u=JSON.parse(h).map(g=>({...g,createdAt:new Date(g.createdAt),updatedAt:new Date(g.updatedAt)}));s(u)}catch(m){console.error("Failed to load memos from localStorage:",m)}},[]),j.useEffect(()=>{e.length>0&&localStorage.setItem("yearlyMemos",JSON.stringify(e))},[e]);const n=h=>{const m={...h,id:`memo-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date};s(u=>[...u,m])},r=(h,m)=>{s(u=>u.map(g=>g.id===h?{...g,...m,updatedAt:new Date}:g))},i=h=>{s(m=>m.filter(u=>u.id!==h))},o=h=>{s(m=>m.map(u=>u.id===h?{...u,completed:!u.completed,updatedAt:new Date}:u))},l=(h,m)=>e.filter(u=>u.year===h&&u.month===m).sort((u,g)=>(u.position||0)-(g.position||0)),d={memos:e,addMemo:n,updateMemo:r,deleteMemo:i,toggleComplete:o,getMemosByMonth:l,getMonthStatistics:(h,m)=>{const u=l(h,m),g=u.reduce((f,x)=>(f[x.type]=(f[x.type]||0)+1,f),{});return{total:u.length,byType:g,completed:u.filter(f=>f.completed).length}}};return a.jsx(Sm.Provider,{value:d,children:t})},Nn={goal:{icon:"🎯",label:"목표",color:"#9333EA",bgColor:"bg-purple-100 dark:bg-purple-900/30",textColor:"text-purple-600 dark:text-purple-400"},event:{icon:"📅",label:"이벤트",color:"#3B82F6",bgColor:"bg-blue-100 dark:bg-blue-900/30",textColor:"text-blue-600 dark:text-blue-400"},memo:{icon:"📝",label:"메모",color:"#EAB308",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",textColor:"text-yellow-600 dark:text-yellow-400"},milestone:{icon:"🏆",label:"마일스톤",color:"#22C55E",bgColor:"bg-green-100 dark:bg-green-900/30",textColor:"text-green-600 dark:text-green-400"}},m1={high:{icon:"🔴",label:"높음"},medium:{icon:"🟡",label:"보통"},low:{icon:"🟢",label:"낮음"}},g1=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];function f1({_events:t,_onCreateEvent:e,_onEditEvent:s,_onDateClick:n,_highlightedEventId:r}){const{currentDate:i,setCurrentDate:o,setViewMode:l}=ct(),{getMemosByMonth:c,addMemo:d,deleteMemo:h,toggleComplete:m,getMonthStatistics:u}=h1(),{diaries:g}=Ll({viewMode:"year",currentDate:i}),f=i.getFullYear(),[x,p]=j.useState(null),[y,v]=j.useState(null),[S,C]=j.useState(null),[N,M]=j.useState("all"),[k,w]=j.useState(""),[_,E]=j.useState(""),[D,O]=j.useState("memo"),[L,T]=j.useState("medium"),[A,I]=j.useState(""),P=G=>{let U=c(f,G);if(N!=="all"&&(U=U.filter(X=>X.type===N)),k){const X=k.toLowerCase();U=U.filter(V=>{var Y;return V.title.toLowerCase().includes(X)||((Y=V.description)==null?void 0:Y.toLowerCase().includes(X))})}return U},H=G=>{if(!_.trim())return;const U=Nn[D];d({year:f,month:G,type:D,title:_,description:A,color:U.color,importance:L,completed:!1,position:0}),E(""),I(""),O("memo"),T("medium"),v(null)},z=G=>{if(!g||g.length===0)return 0;const U=String(G).padStart(2,"0"),X=`${f}-${U}`;return g.filter(V=>V.date&&V.date.startsWith(X)).length},F=j.useMemo(()=>{let G=0,U=0;const X={goal:0,event:0,memo:0,milestone:0};for(let V=1;V<=12;V++){const Y=u(f,V);G+=Y.total,U+=Y.completed,Object.entries(Y.byType).forEach(([Z,W])=>{X[Z]+=W})}return{totalMemos:G,completedMemos:U,typeCount:X}},[f,c]);return a.jsx("div",{className:"h-full overflow-auto bg-background p-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:[f,"년 연간 계획"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(A2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"검색...",value:k,onChange:G=>w(G.target.value),className:`pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                           bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100
                           focus:ring-2 focus:ring-purple-500`})]}),a.jsxs("select",{value:N,onChange:G=>M(G.target.value),className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100`,children:[a.jsx("option",{value:"all",children:"모든 타입"}),Object.entries(Nn).map(([G,U])=>a.jsxs("option",{value:G,children:[U.icon," ",U.label]},G))]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:F.totalMemos}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전체"})]}),a.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:F.completedMemos}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료"})]}),Object.entries(Nn).map(([G,U])=>a.jsxs("div",{className:`text-center p-3 rounded-lg ${U.bgColor}`,children:[a.jsx("div",{className:`text-2xl font-bold ${U.textColor}`,children:F.typeCount[G]||0}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:U.label})]},G))]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g1.map((G,U)=>{const X=U+1,V=P(X),Y=u(f,X),Z=y===X;return a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md 
                         transition-all duration-200 border border-gray-200 dark:border-gray-700`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:G}),a.jsx("button",{onClick:()=>v(Z?null:X),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(E2,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]}),a.jsxs("div",{className:"mt-2 flex gap-2 text-xs",children:[Y.total>0&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[Y.total,"개 항목"]}),Y.completed>0&&a.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[Y.completed,"개 완료"]})]}),z(X)>0&&a.jsxs("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:["📔 ",z(X)]})]})]}),a.jsxs("div",{className:"p-4 space-y-2 max-h-64 overflow-y-auto",children:[Z&&a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg space-y-2",children:[a.jsx("input",{type:"text",placeholder:"제목 입력...",value:_,onChange:W=>E(W.target.value),onKeyPress:W=>W.key==="Enter"&&H(X),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 
                                 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,autoFocus:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{value:D,onChange:W=>O(W.target.value),className:`flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 
                                   rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,children:Object.entries(Nn).map(([W,fe])=>a.jsx("option",{value:W,children:fe.label},W))}),a.jsx("select",{value:L,onChange:W=>T(W.target.value),className:`flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 
                                   rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,children:Object.entries(m1).map(([W,fe])=>a.jsx("option",{value:W,children:fe.label},W))})]}),a.jsxs("div",{className:"flex gap-1 justify-end",children:[a.jsx("button",{onClick:()=>H(X),className:"px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:"추가"}),a.jsx("button",{onClick:()=>{v(null),E("")},className:`px-2 py-1 text-xs bg-gray-300 dark:bg-gray-600 text-gray-700 
                                   dark:text-gray-300 rounded hover:bg-gray-400 dark:hover:bg-gray-500`,children:"취소"})]})]}),V.length===0&&!Z?a.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 text-sm py-4",children:"메모가 없습니다"}):V.slice(0,5).map(W=>{const fe=Nn[W.type];return W.id,a.jsx("div",{className:`p-2 rounded-lg border ${W.completed?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600":`${fe.bgColor} border-gray-200 dark:border-gray-600`} group hover:shadow-sm transition-all`,children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("button",{onClick:()=>m(W.id),className:`mt-0.5 w-4 h-4 rounded border-2 flex items-center justify-center
                                ${W.completed?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-600 hover:border-purple-500"}`,children:W.completed&&a.jsx(j2,{className:"w-3 h-3 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-sm",children:fe.icon}),a.jsx("span",{className:`text-sm font-medium ${W.completed?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:W.title})]}),W.description&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:W.description})]}),a.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>h(W.id),className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",children:a.jsx(R2,{className:"w-3 h-3 text-red-500"})})})]})},W.id)}),V.length>5&&a.jsxs("button",{onClick:()=>{o(new Date(f,U,1)),l("month")},className:`w-full text-center text-xs text-purple-600 dark:text-purple-400 
                               hover:text-purple-700 dark:hover:text-purple-300 py-1`,children:["+",V.length-5,"개 더 보기"]})]})]},X)})})]})})}function x1({isOpen:t,onClose:e,date:s,position:n,onSelectAction:r}){const i=j.useRef(null);if(j.useEffect(()=>{const h=u=>{i.current&&!i.current.contains(u.target)&&e()},m=u=>{u.key==="Escape"&&e()};return t&&(document.addEventListener("mousedown",h),document.addEventListener("keydown",m)),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",m)}},[t,e]),!t)return null;const o={x:Math.min(n.x,window.innerWidth-200),y:Math.min(n.y,window.innerHeight-160)},l=[{type:"event",icon:"📅",label:"일정,할일 추가",description:"새로운 일정과 할일을 만듭니다",color:"text-blue-600 dark:text-blue-400"},{type:"diary",icon:"📝",label:"일기 쓰기",description:"오늘의 일기를 작성합니다",color:"text-purple-600 dark:text-purple-400"}],c=h=>new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(h),d=h=>{r(h),e()};return a.jsx("div",{className:"fixed inset-0 z-50",style:{background:"rgba(0, 0, 0, 0.1)"},children:a.jsxs("div",{ref:i,className:"absolute bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 p-4 min-w-[240px] max-w-[280px]",style:{left:o.x,top:o.y},children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"작업 선택"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-lg",children:"✕"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(s)})]}),a.jsx("div",{className:"space-y-2",children:l.map(h=>a.jsx("button",{onClick:()=>d(h.type),className:"w-full text-left p-3 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-150 group",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("span",{className:"text-xl flex-shrink-0",children:h.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:`text-sm font-medium ${h.color} group-hover:opacity-80`,children:h.label}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]}),a.jsx("div",{className:"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors",children:"→"})]})},h.type))}),a.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-600",children:a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"ESC 키로 닫기"})})]})})}const p1=({className:t})=>a.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),b1=({className:t})=>a.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})});function y1(){const{currentDate:t,setCurrentDate:e,viewMode:s,setViewMode:n,navigatePrevious:r,navigateNext:i,navigateToday:o}=ct(),[l,c]=j.useState([]),[d,h]=j.useState(null),[m,u]=j.useState(!1),[g,f]=j.useState(null),[x,p]=j.useState(""),[y,v]=j.useState([]),[S,C]=j.useState(null),[N,M]=j.useState(!1),[k,w]=j.useState({x:0,y:0}),[_,E]=j.useState(null),[D,O]=j.useState(!1),[L,T]=j.useState(null),A=K=>{T(K),O(!0)};j.useEffect(()=>{I()},[]),j.useEffect(()=>{if(x){const K=l.filter(te=>{var ht,Le;return te.title.toLowerCase().includes(x.toLowerCase())||((ht=te.description)==null?void 0:ht.toLowerCase().includes(x.toLowerCase()))||((Le=te.location)==null?void 0:Le.toLowerCase().includes(x.toLowerCase()))});v(K)}else v(l)},[x,l]);const I=async()=>{try{const K=await Tt.getEvents();c(K)}catch(K){console.error("Failed to load events:",K)}},P=K=>{f(K||null),h(null),u(!0)},H=K=>{h(K),u(!0)},z=K=>{I()},F=async K=>{try{await Tt.deleteEvent(K),I()}catch(te){console.error("Failed to delete event:",te)}},G=()=>{u(!1),h(null),f(null)},U=(K,te)=>{E(K),w({x:te.clientX,y:te.clientY}),M(!0)},X=K=>{if(_){switch(K){case"event":f(_),h(null),u(!0);break;case"diary":T(_),O(!0);break}M(!1)}},V=()=>{M(!1),E(null)},Y=()=>{O(!1),T(null)},Z=()=>{if(y.length===0||!x)return;const K=y[0],te=new Date(K.start_time);e(te),s==="year"&&n("month"),C(K.id),setTimeout(()=>{C(null)},3e3)},W=K=>{K.key==="Enter"?Z():K.key==="Escape"&&(p(""),C(null))},fe=()=>{const K={events:x?y:l,onCreateEvent:P,onDateClick:U,onEditEvent:H,onDeleteEvent:F,highlightedEventId:S,onDiaryClick:A};switch(s){case"year":return a.jsx(f1,{...K});case"month":return a.jsx(Nd,{...K});case"week":return a.jsx(a1,{...K});case"day":return a.jsx(d1,{...K});default:return a.jsx(Nd,{...K})}},Q={year:"년",month:"월",week:"주",day:"일"},le=()=>{switch(s){case"year":return $(t,"yyyy년",{locale:ve});case"month":return $(t,"yyyy년 M월",{locale:ve});case"week":return $(t,"yyyy년 M월 w주차",{locale:ve});case"day":return $(t,"yyyy년 M월 d일 EEEE",{locale:ve});default:return""}};return a.jsxs("div",{className:"h-screen flex flex-col",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:le()}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["year","month","week","day"].map(K=>a.jsx("button",{onClick:()=>n(K),className:`
                    px-3 py-1 rounded-md text-sm font-medium transition-colors
                    ${s===K?"bg-white dark:bg-gray-600 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100"}
                  `,children:Q[K]},K))}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(p1,{className:"w-5 h-5"})}),a.jsx("button",{onClick:o,className:"px-3 py-1 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"오늘"}),a.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(b1,{className:"w-5 h-5"})})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex-1 max-w-md relative",children:[a.jsx("input",{type:"text",placeholder:"일정, 할일, 일기 검색...",value:x,onChange:K=>p(K.target.value),onKeyDown:W,className:"w-full px-4 py-2 pl-10 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"}),a.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),x&&a.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x&&a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.length,"개의 결과"]})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:fe()}),a.jsx(xm,{isOpen:m,onClose:G,onSave:z,event:d,initialDate:g||void 0}),a.jsx(x1,{isOpen:N,onClose:V,date:_||new Date,position:k,onSelectAction:X}),a.jsx(mi,{isOpen:D,onClose:Y,date:L||new Date})]})}function Md(){const{date:t}=E0(),e=ze(),[s,n]=j.useState(new Date),[r,i]=j.useState(""),[o,l]=j.useState(3),[c,d]=j.useState([]),[h,m]=j.useState(""),[u,g]=j.useState([]),[f,x]=j.useState("");j.useEffect(()=>{t&&n(new Date(t))},[t]);const p={1:{emoji:"😢",label:"매우 나쁨",color:"text-red-500"},2:{emoji:"😕",label:"나쁨",color:"text-orange-500"},3:{emoji:"😐",label:"보통",color:"text-yellow-500"},4:{emoji:"🙂",label:"좋음",color:"text-green-500"},5:{emoji:"😄",label:"매우 좋음",color:"text-blue-500"}},y=()=>{h.trim()&&!c.includes(h.trim())&&(d([...c,h.trim()]),m(""))},v=k=>{d(c.filter(w=>w!==k))},S=()=>{f.trim()&&(g([...u,{id:Date.now().toString(),text:f.trim(),completed:!1}]),x(""))},C=k=>{g(u.map(w=>w.id===k?{...w,completed:!w.completed}:w))},N=k=>{g(u.filter(w=>w.id!==k))},M=()=>{console.log({date:s,content:r,mood:o,tags:c,todos:u}),alert("다이어리가 저장되었습니다!")};return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:$(s,"yyyy년 M월 d일",{locale:ve})}),a.jsx("p",{className:"text-muted-foreground",children:$(s,"EEEE",{locale:ve})})]}),a.jsx("input",{type:"date",value:$(s,"yyyy-MM-dd"),onChange:k=>{const w=new Date(k.target.value);n(w),e(`/diary/${$(w,"yyyy-MM-dd")}`)},className:"px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg p-4 bg-muted",children:[a.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"오늘의 운세"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"오늘은 새로운 시작을 하기에 좋은 날입니다. 긍정적인 에너지가 충만한 하루가 될 것입니다."})]})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"오늘의 기분"}),a.jsx("div",{className:"flex justify-around",children:[1,2,3,4,5].map(k=>{const w=p[k];return a.jsxs("button",{onClick:()=>l(k),className:`
                    flex flex-col items-center p-3 rounded-lg transition-all
                    ${o===k?"bg-muted ring-2 ring-primary-500":"hover:bg-muted/50"}
                  `,children:[a.jsx("span",{className:`text-3xl mb-1 ${w.color}`,children:w.emoji}),a.jsx("span",{className:"text-xs text-muted-foreground",children:w.label})]},k)})})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"일기 내용"}),a.jsx("textarea",{value:r,onChange:k=>i(k.target.value),placeholder:"오늘은 어떤 하루였나요?",className:"w-full h-64 p-4 border border-border rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"태그"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:c.map(k=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary/20 text-primary border border-primary/30",children:["#",k,a.jsx("button",{onClick:()=>v(k),className:"ml-2 text-primary hover:text-primary/80",children:"×"})]},k))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:h,onChange:k=>m(k.target.value),onKeyPress:k=>k.key==="Enter"&&y(),placeholder:"태그 추가 (Enter로 추가)",className:"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"}),a.jsx("button",{onClick:y,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"추가"})]})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"오늘의 할일"}),a.jsxs("div",{className:"space-y-3 mb-4",children:[u.map(k=>a.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:k.completed,onChange:()=>C(k.id),className:"w-4 h-4 text-primary rounded border-border focus:ring-primary/50"}),a.jsx("span",{className:`flex-1 ${k.completed?"text-muted-foreground line-through":"text-foreground"}`,children:k.text}),a.jsx("button",{onClick:()=>N(k.id),className:"text-muted-foreground hover:text-red-500 transition-colors",children:"×"})]},k.id)),u.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"할일을 추가해보세요"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:f,onChange:k=>x(k.target.value),onKeyPress:k=>k.key==="Enter"&&S(),placeholder:"할일 추가 (Enter로 추가)",className:"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"}),a.jsx("button",{onClick:S,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"추가"})]}),u.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[a.jsx("span",{children:"완료율"}),a.jsxs("span",{children:[u.filter(k=>k.completed).length,"/",u.length," (",Math.round(u.filter(k=>k.completed).length/u.length*100),"%)"]})]}),a.jsx("div",{className:"w-full bg-muted rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${u.length?u.filter(k=>k.completed).length/u.length*100:0}%`}})})]})]}),a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"연결된 일정"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"이 날짜에 등록된 캘린더 일정이 여기에 표시됩니다."})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{onClick:()=>e("/diary"),className:"px-6 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors",children:"취소"}),a.jsx("button",{onClick:M,className:"px-6 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"저장"})]})]})})}const Cm=async()=>{if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="denied")return!1;try{return await Notification.requestPermission()==="granted"}catch(t){return console.error("Failed to request notification permission:",t),!1}},_m=()=>"Notification"in window&&Notification.permission==="granted",Mm=t=>{if(!_m())return console.warn("Notification permission not granted"),null;try{const e=new Notification(t.title,{body:t.body,icon:t.icon||"/favicon.ico",tag:t.tag,badge:t.badge,data:t.data,requireInteraction:t.requireInteraction||!1,silent:t.silent||!1});return t.requireInteraction||setTimeout(()=>{e.close()},5e3),e}catch(e){return console.error("Failed to show notification:",e),null}},v1=(t,e,s,n)=>{const r=Date.now(),o=s.getTime()-r;if(o<=0)return console.warn("Cannot schedule notification for past time"),null;const l=24*60*60*1e3;if(o>l)return console.warn("Cannot schedule notification more than 24 hours in advance"),null;const c=window.setTimeout(()=>{Mm({title:t,body:e,icon:"/favicon.ico",requireInteraction:!0,...n})},o);return console.log(`Notification scheduled for ${s.toLocaleString()}, delay: ${o}ms`),c},Em="notification-settings",Il=()=>{try{const t=localStorage.getItem(Em);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load notification settings:",t)}return{enabled:!1,eventReminders:!0,diaryReminders:!0,todoDeadlines:!0,reminderMinutes:15}},j1=t=>{try{localStorage.setItem(Em,JSON.stringify(t))}catch(e){console.error("Failed to save notification settings:",e)}},w1=()=>{const t=Il();if(!t.enabled||!t.diaryReminders)return null;const e=new Date,s=new Date;return s.setHours(21,0,0,0),e.getHours()>=21&&s.setDate(s.getDate()+1),v1("📝 일기 작성 시간","오늘 하루는 어떠셨나요? 일기를 작성해보세요.",s,{tag:"diary-reminder",data:{type:"diary"},requireInteraction:!1})},k1=async()=>{if(!Il().enabled)return;if(!await Cm()){console.warn("Notification permission denied");return}w1(),console.log("Notifications initialized")},N1=()=>{Mm({title:"🧭 운명나침반",body:"알림이 정상적으로 작동합니다!",requireInteraction:!1})};function S1(){const[t,e]=j.useState(Il()),[s,n]=j.useState("default"),[r,i]=j.useState(!1),[o,l]=j.useState(!1);j.useEffect(()=>{"Notification"in window&&n(Notification.permission)},[]);const c=(m,u)=>{const g={...t,[m]:u};e(g),j1(g),l(!0),setTimeout(()=>l(!1),2e3)},d=async()=>{i(!0);try{const m=await Cm();n(m?"granted":"denied"),m&&c("enabled",!0)}catch(m){console.error("Permission request failed:",m)}finally{i(!1)}},h=()=>{_m()?N1():alert("알림 권한이 필요합니다.")};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:a.jsx(Oi,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"알림 설정"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"일정, 할일, 일기 알림을 관리합니다"})]})]}),o&&a.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 animate-fade-in",children:[a.jsx(Ct,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:"저장됨"})]})]}),a.jsx("div",{className:"mb-6 p-4 rounded-lg border",children:s==="granted"?a.jsxs("div",{className:"flex items-center gap-3 text-green-600 dark:text-green-400",children:[a.jsx(Oi,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 승인됨"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"브라우저 알림을 받을 수 있습니다"})]})]}):s==="denied"?a.jsxs("div",{className:"flex items-center gap-3 text-red-600 dark:text-red-400",children:[a.jsx(cv,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 거부됨"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"브라우저 설정에서 알림을 허용해주세요"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 text-yellow-600 dark:text-yellow-400",children:[a.jsx(Oi,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"알림 권한 필요"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"알림을 받으려면 권한을 허용해주세요"})]})]}),a.jsx("button",{onClick:d,disabled:r,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 text-sm font-medium",children:r?"요청 중...":"권한 요청"})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"알림 활성화"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"모든 알림을 활성화/비활성화합니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.enabled,onChange:m=>c("enabled",m.target.checked),disabled:s!=="granted",className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600 peer-disabled:opacity-50"})]})]}),t.enabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"일정 알림"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"예정된 일정 시작 전에 알림을 받습니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.eventReminders,onChange:m=>c("eventReminders",m.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"할일 마감 알림"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"할일 마감 시간 전에 알림을 받습니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.todoDeadlines,onChange:m=>c("todoDeadlines",m.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"일기 작성 리마인더"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"매일 저녁 9시에 일기 작성을 안내합니다"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.diaryReminders,onChange:m=>c("diaryReminders",m.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"알림 시간"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"일정/할일 시작/마감 몇 분 전에 알림을 받을지 설정합니다"})]}),a.jsxs("select",{value:t.reminderMinutes,onChange:m=>c("reminderMinutes",parseInt(m.target.value)),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:5,children:"5분 전"}),a.jsx("option",{value:10,children:"10분 전"}),a.jsx("option",{value:15,children:"15분 전"}),a.jsx("option",{value:30,children:"30분 전"}),a.jsx("option",{value:60,children:"1시간 전"})]})]})]})]}),t.enabled&&s==="granted"&&a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:a.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm font-medium",children:"📱 테스트 알림 보내기"})})]})}var Qs={},C1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Tm={},Ge={};let Fl;const _1=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ge.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ge.getSymbolTotalCodewords=function(e){return _1[e]};Ge.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Ge.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Fl=e};Ge.isKanjiModeEnabled=function(){return typeof Fl<"u"};Ge.toSJIS=function(e){return Fl(e)};var gi={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+s)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,r){if(t.isValid(n))return n;try{return e(n)}catch{return r}}})(gi);function Am(){this.buffer=[],this.length=0}Am.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let s=0;s<e;s++)this.putBit((t>>>e-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var M1=Am;function Rr(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Rr.prototype.set=function(t,e,s,n){const r=t*this.size+e;this.data[r]=s,n&&(this.reservedBit[r]=!0)};Rr.prototype.get=function(t,e){return this.data[t*this.size+e]};Rr.prototype.xor=function(t,e,s){this.data[t*this.size+e]^=s};Rr.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var E1=Rr,Dm={};(function(t){const e=Ge.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const r=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*r-2))*2,l=[i-7];for(let c=1;c<r-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const r=[],i=t.getRowColCoords(n),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||r.push([i[l],i[c]]);return r}})(Dm);var Pm={};const T1=Ge.getSymbolSize,Ed=7;Pm.getPositions=function(e){const s=T1(e);return[[0,0],[s-Ed,0],[0,s-Ed]]};var Rm={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},t.from=function(r){return t.isValid(r)?parseInt(r,10):void 0},t.getPenaltyN1=function(r){const i=r.size;let o=0,l=0,c=0,d=null,h=null;for(let m=0;m<i;m++){l=c=0,d=h=null;for(let u=0;u<i;u++){let g=r.get(m,u);g===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=g,l=1),g=r.get(u,m),g===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=g,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(r){const i=r.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=r.get(l,c)+r.get(l,c+1)+r.get(l+1,c)+r.get(l+1,c+1);(d===4||d===0)&&o++}return o*e.N2},t.getPenaltyN3=function(r){const i=r.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let h=0;h<i;h++)l=l<<1&2047|r.get(d,h),h>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|r.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(r){let i=0;const o=r.data.length;for(let c=0;c<o;c++)i+=r.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function s(n,r,i){switch(n){case t.Patterns.PATTERN000:return(r+i)%2===0;case t.Patterns.PATTERN001:return r%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(r+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return r*i%2+r*i%3===0;case t.Patterns.PATTERN110:return(r*i%2+r*i%3)%2===0;case t.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(r,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,s(r,c,l))},t.getBestMask=function(r,i){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),t.applyMask(d,r);const h=t.getPenaltyN1(r)+t.getPenaltyN2(r)+t.getPenaltyN3(r)+t.getPenaltyN4(r);t.applyMask(d,r),h<c&&(c=h,l=d)}return l}})(Rm);var fi={};const Ft=gi,Kr=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],qr=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];fi.getBlocksCount=function(e,s){switch(s){case Ft.L:return Kr[(e-1)*4+0];case Ft.M:return Kr[(e-1)*4+1];case Ft.Q:return Kr[(e-1)*4+2];case Ft.H:return Kr[(e-1)*4+3];default:return}};fi.getTotalCodewordsCount=function(e,s){switch(s){case Ft.L:return qr[(e-1)*4+0];case Ft.M:return qr[(e-1)*4+1];case Ft.Q:return qr[(e-1)*4+2];case Ft.H:return qr[(e-1)*4+3];default:return}};var Lm={},xi={};const Hn=new Uint8Array(512),Oa=new Uint8Array(256);(function(){let e=1;for(let s=0;s<255;s++)Hn[s]=e,Oa[e]=s,e<<=1,e&256&&(e^=285);for(let s=255;s<512;s++)Hn[s]=Hn[s-255]})();xi.log=function(e){if(e<1)throw new Error("log("+e+")");return Oa[e]};xi.exp=function(e){return Hn[e]};xi.mul=function(e,s){return e===0||s===0?0:Hn[Oa[e]+Oa[s]]};(function(t){const e=xi;t.mul=function(n,r){const i=new Uint8Array(n.length+r.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<r.length;l++)i[o+l]^=e.mul(n[o],r[l]);return i},t.mod=function(n,r){let i=new Uint8Array(n);for(;i.length-r.length>=0;){const o=i[0];for(let c=0;c<r.length;c++)i[c]^=e.mul(r[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},t.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let i=0;i<n;i++)r=t.mul(r,new Uint8Array([1,e.exp(i)]));return r}})(Lm);const Om=Lm;function Bl(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Bl.prototype.initialize=function(e){this.degree=e,this.genPoly=Om.generateECPolynomial(this.degree)};Bl.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(e.length+this.degree);s.set(e);const n=Om.mod(s,this.genPoly),r=this.degree-n.length;if(r>0){const i=new Uint8Array(this.degree);return i.set(n,r),i}return n};var A1=Bl,Im={},Zt={},$l={};$l.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var vt={};const Fm="[0-9]+",D1="[A-Z $%*+\\-./:]+";let ir="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ir=ir.replace(/u/g,"\\u");const P1="(?:(?![A-Z0-9 $%*+\\-./:]|"+ir+`)(?:.|[\r
]))+`;vt.KANJI=new RegExp(ir,"g");vt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");vt.BYTE=new RegExp(P1,"g");vt.NUMERIC=new RegExp(Fm,"g");vt.ALPHANUMERIC=new RegExp(D1,"g");const R1=new RegExp("^"+ir+"$"),L1=new RegExp("^"+Fm+"$"),O1=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");vt.testKanji=function(e){return R1.test(e)};vt.testNumeric=function(e){return L1.test(e)};vt.testAlphanumeric=function(e){return O1.test(e)};(function(t){const e=$l,s=vt;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return s.testNumeric(i)?t.NUMERIC:s.testAlphanumeric(i)?t.ALPHANUMERIC:s.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+r)}}t.from=function(i,o){if(t.isValid(i))return i;try{return n(i)}catch{return o}}})(Zt);(function(t){const e=Ge,s=fi,n=gi,r=Zt,i=$l,o=7973,l=e.getBCHDigit(o);function c(u,g,f){for(let x=1;x<=40;x++)if(g<=t.getCapacity(x,f,u))return x}function d(u,g){return r.getCharCountIndicator(u,g)+4}function h(u,g){let f=0;return u.forEach(function(x){const p=d(x.mode,g);f+=p+x.getBitsLength()}),f}function m(u,g){for(let f=1;f<=40;f++)if(h(u,f)<=t.getCapacity(f,g,r.MIXED))return f}t.from=function(g,f){return i.isValid(g)?parseInt(g,10):f},t.getCapacity=function(g,f,x){if(!i.isValid(g))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=r.BYTE);const p=e.getSymbolTotalCodewords(g),y=s.getTotalCodewordsCount(g,f),v=(p-y)*8;if(x===r.MIXED)return v;const S=v-d(x,g);switch(x){case r.NUMERIC:return Math.floor(S/10*3);case r.ALPHANUMERIC:return Math.floor(S/11*2);case r.KANJI:return Math.floor(S/13);case r.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(g,f){let x;const p=n.from(f,n.M);if(Array.isArray(g)){if(g.length>1)return m(g,p);if(g.length===0)return 1;x=g[0]}else x=g;return c(x.mode,x.getLength(),p)},t.getEncodedBits=function(g){if(!i.isValid(g)||g<7)throw new Error("Invalid QR Code version");let f=g<<12;for(;e.getBCHDigit(f)-l>=0;)f^=o<<e.getBCHDigit(f)-l;return g<<12|f}})(Im);var Bm={};const Oo=Ge,$m=1335,I1=21522,Td=Oo.getBCHDigit($m);Bm.getEncodedBits=function(e,s){const n=e.bit<<3|s;let r=n<<10;for(;Oo.getBCHDigit(r)-Td>=0;)r^=$m<<Oo.getBCHDigit(r)-Td;return(n<<10|r)^I1};var Vm={};const F1=Zt;function Zs(t){this.mode=F1.NUMERIC,this.data=t.toString()}Zs.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Zs.prototype.getLength=function(){return this.data.length};Zs.prototype.getBitsLength=function(){return Zs.getBitsLength(this.data.length)};Zs.prototype.write=function(e){let s,n,r;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),r=parseInt(n,10),e.put(r,10);const i=this.data.length-s;i>0&&(n=this.data.substr(s),r=parseInt(n,10),e.put(r,i*3+1))};var B1=Zs;const $1=Zt,Ii=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function en(t){this.mode=$1.ALPHANUMERIC,this.data=t}en.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};en.prototype.getLength=function(){return this.data.length};en.prototype.getBitsLength=function(){return en.getBitsLength(this.data.length)};en.prototype.write=function(e){let s;for(s=0;s+2<=this.data.length;s+=2){let n=Ii.indexOf(this.data[s])*45;n+=Ii.indexOf(this.data[s+1]),e.put(n,11)}this.data.length%2&&e.put(Ii.indexOf(this.data[s]),6)};var V1=en;const H1=Zt;function tn(t){this.mode=H1.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}tn.getBitsLength=function(e){return e*8};tn.prototype.getLength=function(){return this.data.length};tn.prototype.getBitsLength=function(){return tn.getBitsLength(this.data.length)};tn.prototype.write=function(t){for(let e=0,s=this.data.length;e<s;e++)t.put(this.data[e],8)};var z1=tn;const U1=Zt,W1=Ge;function sn(t){this.mode=U1.KANJI,this.data=t}sn.getBitsLength=function(e){return e*13};sn.prototype.getLength=function(){return this.data.length};sn.prototype.getBitsLength=function(){return sn.getBitsLength(this.data.length)};sn.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let s=W1.toSJIS(this.data[e]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),t.put(s,13)}};var Y1=sn,Hm={exports:{}};(function(t){var e={single_source_shortest_paths:function(s,n,r){var i={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,d,h,m,u,g,f,x,p;!l.empty();){c=l.pop(),d=c.value,m=c.cost,u=s[d]||{};for(h in u)u.hasOwnProperty(h)&&(g=u[h],f=m+g,x=o[h],p=typeof o[h]>"u",(p||x>f)&&(o[h]=f,l.push(h,f),i[h]=d))}if(typeof r<"u"&&typeof o[r]>"u"){var y=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(y)}return i},extract_shortest_path_from_predecessor_list:function(s,n){for(var r=[],i=n;i;)r.push(i),s[i],i=s[i];return r.reverse(),r},find_path:function(s,n,r){var i=e.single_source_shortest_paths(s,n,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(s){var n=e.PriorityQueue,r={},i;s=s||{};for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r.queue=[],r.sorter=s.sorter||n.default_sorter,r},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var r={value:s,cost:n};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Hm);var G1=Hm.exports;(function(t){const e=Zt,s=B1,n=V1,r=z1,i=Y1,o=vt,l=Ge,c=G1;function d(y){return unescape(encodeURIComponent(y)).length}function h(y,v,S){const C=[];let N;for(;(N=y.exec(S))!==null;)C.push({data:N[0],index:N.index,mode:v,length:N[0].length});return C}function m(y){const v=h(o.NUMERIC,e.NUMERIC,y),S=h(o.ALPHANUMERIC,e.ALPHANUMERIC,y);let C,N;return l.isKanjiModeEnabled()?(C=h(o.BYTE,e.BYTE,y),N=h(o.KANJI,e.KANJI,y)):(C=h(o.BYTE_KANJI,e.BYTE,y),N=[]),v.concat(S,C,N).sort(function(k,w){return k.index-w.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function u(y,v){switch(v){case e.NUMERIC:return s.getBitsLength(y);case e.ALPHANUMERIC:return n.getBitsLength(y);case e.KANJI:return i.getBitsLength(y);case e.BYTE:return r.getBitsLength(y)}}function g(y){return y.reduce(function(v,S){const C=v.length-1>=0?v[v.length-1]:null;return C&&C.mode===S.mode?(v[v.length-1].data+=S.data,v):(v.push(S),v)},[])}function f(y){const v=[];for(let S=0;S<y.length;S++){const C=y[S];switch(C.mode){case e.NUMERIC:v.push([C,{data:C.data,mode:e.ALPHANUMERIC,length:C.length},{data:C.data,mode:e.BYTE,length:C.length}]);break;case e.ALPHANUMERIC:v.push([C,{data:C.data,mode:e.BYTE,length:C.length}]);break;case e.KANJI:v.push([C,{data:C.data,mode:e.BYTE,length:d(C.data)}]);break;case e.BYTE:v.push([{data:C.data,mode:e.BYTE,length:d(C.data)}])}}return v}function x(y,v){const S={},C={start:{}};let N=["start"];for(let M=0;M<y.length;M++){const k=y[M],w=[];for(let _=0;_<k.length;_++){const E=k[_],D=""+M+_;w.push(D),S[D]={node:E,lastCount:0},C[D]={};for(let O=0;O<N.length;O++){const L=N[O];S[L]&&S[L].node.mode===E.mode?(C[L][D]=u(S[L].lastCount+E.length,E.mode)-u(S[L].lastCount,E.mode),S[L].lastCount+=E.length):(S[L]&&(S[L].lastCount=E.length),C[L][D]=u(E.length,E.mode)+4+e.getCharCountIndicator(E.mode,v))}}N=w}for(let M=0;M<N.length;M++)C[N[M]].end=0;return{map:C,table:S}}function p(y,v){let S;const C=e.getBestModeForData(y);if(S=e.from(v,C),S!==e.BYTE&&S.bit<C.bit)throw new Error('"'+y+'" cannot be encoded with mode '+e.toString(S)+`.
 Suggested mode is: `+e.toString(C));switch(S===e.KANJI&&!l.isKanjiModeEnabled()&&(S=e.BYTE),S){case e.NUMERIC:return new s(y);case e.ALPHANUMERIC:return new n(y);case e.KANJI:return new i(y);case e.BYTE:return new r(y)}}t.fromArray=function(v){return v.reduce(function(S,C){return typeof C=="string"?S.push(p(C,null)):C.data&&S.push(p(C.data,C.mode)),S},[])},t.fromString=function(v,S){const C=m(v,l.isKanjiModeEnabled()),N=f(C),M=x(N,S),k=c.find_path(M.map,"start","end"),w=[];for(let _=1;_<k.length-1;_++)w.push(M.table[k[_]].node);return t.fromArray(g(w))},t.rawSplit=function(v){return t.fromArray(m(v,l.isKanjiModeEnabled()))}})(Vm);const pi=Ge,Fi=gi,K1=M1,q1=E1,J1=Dm,X1=Pm,Io=Rm,Fo=fi,Q1=A1,Ia=Im,Z1=Bm,ej=Zt,Bi=Vm;function tj(t,e){const s=t.size,n=X1.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],o=n[r][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||s<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||s<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(i+l,o+c,!0,!0):t.set(i+l,o+c,!1,!0))}}function sj(t){const e=t.size;for(let s=8;s<e-8;s++){const n=s%2===0;t.set(s,6,n,!0),t.set(6,s,n,!0)}}function nj(t,e){const s=J1.getPositions(e);for(let n=0;n<s.length;n++){const r=s[n][0],i=s[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(r+o,i+l,!0,!0):t.set(r+o,i+l,!1,!0)}}function rj(t,e){const s=t.size,n=Ia.getEncodedBits(e);let r,i,o;for(let l=0;l<18;l++)r=Math.floor(l/3),i=l%3+s-8-3,o=(n>>l&1)===1,t.set(r,i,o,!0),t.set(i,r,o,!0)}function $i(t,e,s){const n=t.size,r=Z1.getEncodedBits(e,s);let i,o;for(i=0;i<15;i++)o=(r>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(n-15+i,8,o,!0),i<8?t.set(8,n-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(n-8,8,1,!0)}function aj(t,e){const s=t.size;let n=-1,r=s-1,i=7,o=0;for(let l=s-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(r,l-c)){let d=!1;o<e.length&&(d=(e[o]>>>i&1)===1),t.set(r,l-c,d),i--,i===-1&&(o++,i=7)}if(r+=n,r<0||s<=r){r-=n,n=-n;break}}}function ij(t,e,s){const n=new K1;s.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),ej.getCharCountIndicator(c.mode,t)),c.write(n)});const r=pi.getSymbolTotalCodewords(t),i=Fo.getTotalCodewordsCount(t,e),o=(r-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return oj(n,t,e)}function oj(t,e,s){const n=pi.getSymbolTotalCodewords(e),r=Fo.getTotalCodewordsCount(e,s),i=n-r,o=Fo.getBlocksCount(e,s),l=n%o,c=o-l,d=Math.floor(n/o),h=Math.floor(i/o),m=h+1,u=d-h,g=new Q1(u);let f=0;const x=new Array(o),p=new Array(o);let y=0;const v=new Uint8Array(t.buffer);for(let k=0;k<o;k++){const w=k<c?h:m;x[k]=v.slice(f,f+w),p[k]=g.encode(x[k]),f+=w,y=Math.max(y,w)}const S=new Uint8Array(n);let C=0,N,M;for(N=0;N<y;N++)for(M=0;M<o;M++)N<x[M].length&&(S[C++]=x[M][N]);for(N=0;N<u;N++)for(M=0;M<o;M++)S[C++]=p[M][N];return S}function lj(t,e,s,n){let r;if(Array.isArray(t))r=Bi.fromArray(t);else if(typeof t=="string"){let d=e;if(!d){const h=Bi.rawSplit(t);d=Ia.getBestVersionForData(h,s)}r=Bi.fromString(t,d||40)}else throw new Error("Invalid data");const i=Ia.getBestVersionForData(r,s);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=ij(e,s,r),l=pi.getSymbolSize(e),c=new q1(l);return tj(c,e),sj(c),nj(c,e),$i(c,s,0),e>=7&&rj(c,e),aj(c,o),isNaN(n)&&(n=Io.getBestMask(c,$i.bind(null,c,s))),Io.applyMask(n,c),$i(c,s,n),{modules:c,version:e,errorCorrectionLevel:s,maskPattern:n,segments:r}}Tm.create=function(e,s){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Fi.M,r,i;return typeof s<"u"&&(n=Fi.from(s.errorCorrectionLevel,Fi.M),r=Ia.from(s.version),i=Io.from(s.maskPattern),s.toSJISFunc&&pi.setToSJISFunction(s.toSJISFunc)),lj(e,r,n,i)};var zm={},Vl={};(function(t){function e(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const r=parseInt(n.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const r=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:r,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,r){return r.width&&r.width>=n+r.margin*2?r.width/(n+r.margin*2):r.scale},t.getImageWidth=function(n,r){const i=t.getScale(n,r);return Math.floor((n+r.margin*2)*i)},t.qrToImageData=function(n,r,i){const o=r.modules.size,l=r.modules.data,c=t.getScale(o,i),d=Math.floor((o+i.margin*2)*c),h=i.margin*c,m=[i.color.light,i.color.dark];for(let u=0;u<d;u++)for(let g=0;g<d;g++){let f=(u*d+g)*4,x=i.color.light;if(u>=h&&g>=h&&u<d-h&&g<d-h){const p=Math.floor((u-h)/c),y=Math.floor((g-h)/c);x=m[l[p*o+y]?1:0]}n[f++]=x.r,n[f++]=x.g,n[f++]=x.b,n[f]=x.a}}})(Vl);(function(t){const e=Vl;function s(r,i,o){r.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=n()),c=e.getOptions(c);const h=e.getImageWidth(i.modules.size,c),m=d.getContext("2d"),u=m.createImageData(h,h);return e.qrToImageData(u.data,i,c),s(m,d,h),m.putImageData(u,0,0),d},t.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=t.render(i,o,c),h=c.type||"image/png",m=c.rendererOpts||{};return d.toDataURL(h,m.quality)}})(zm);var Um={};const cj=Vl;function Ad(t,e){const s=t.a/255,n=e+'="'+t.hex+'"';return s<1?n+" "+e+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function Vi(t,e,s){let n=t+e;return typeof s<"u"&&(n+=" "+s),n}function dj(t,e,s){let n="",r=0,i=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),d=Math.floor(l/e);!c&&!i&&(i=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=i?Vi("M",c+s,.5+d+s):Vi("m",r,0),r=0,i=!1),c+1<e&&t[l+1]||(n+=Vi("h",o),o=0)):r++}return n}Um.render=function(e,s,n){const r=cj.getOptions(s),i=e.modules.size,o=e.modules.data,l=i+r.margin*2,c=r.color.light.a?"<path "+Ad(r.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+Ad(r.color.dark,"stroke")+' d="'+dj(o,i,r.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof n=="function"&&n(null,u),u};const hj=C1,Bo=Tm,Wm=zm,uj=Um;function Hl(t,e,s,n,r){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!hj())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(r=s,s=e,e=n=void 0):o===3&&(e.getContext&&typeof r>"u"?(r=n,n=void 0):(r=n,n=s,s=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(s=e,e=n=void 0):o===2&&!e.getContext&&(n=s,s=e,e=void 0),new Promise(function(c,d){try{const h=Bo.create(s,n);c(t(h,e,n))}catch(h){d(h)}})}try{const c=Bo.create(s,n);r(null,t(c,e,n))}catch(c){r(c)}}Qs.create=Bo.create;Qs.toCanvas=Hl.bind(null,Wm.render);Qs.toDataURL=Hl.bind(null,Wm.renderToDataURL);Qs.toString=Hl.bind(null,function(t,e,s){return uj.render(t,s)});var Co;let Sn=(Co=class{static async generateToCanvas(e,s,n){const r={...this.defaultOptions,...n};try{await Qs.toCanvas(e,s,r)}catch(i){throw console.error("QR코드 생성 실패:",i),new Error("QR코드를 생성할 수 없습니다.")}}static async generateToDataURL(e,s){const n={...this.defaultOptions,...s};try{return await Qs.toDataURL(e,n)}catch(r){throw console.error("QR코드 생성 실패:",r),new Error("QR코드를 생성할 수 없습니다.")}}static async generateToBlob(e,s){const n={...this.defaultOptions,width:400,...s};try{const r=await this.generateToDataURL(e,n);return await(await fetch(r)).blob()}catch(r){throw console.error("QR코드 Blob 생성 실패:",r),new Error("QR코드 파일을 생성할 수 없습니다.")}}static createReferralUrl(e,s){return`${s||window.location.origin}/auth?mode=signup&ref=${e}`}static downloadFile(e,s){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}static async downloadReferralQRCode(e,s){try{const n=this.createReferralUrl(e),r=await this.generateToBlob(n,s),i=`referral-qr-${e}.png`;this.downloadFile(r,i)}catch(n){throw console.error("QR코드 다운로드 실패:",n),n}}static async shareReferralQRCode(e,s){if(!navigator.share)throw new Error("이 브라우저는 공유 기능을 지원하지 않습니다.");try{const n=this.createReferralUrl(e),r=await this.generateToBlob(n,s),i=new File([r],`referral-qr-${e}.png`,{type:"image/png"});await navigator.share({title:"🔮 운명나침반 추천 QR코드",text:`추천인 코드: ${e}
함께 가입하면 특별 혜택을 받을 수 있어요!`,url:n,files:[i]})}catch(n){if(n instanceof Error&&n.name==="AbortError")return;throw console.error("QR코드 공유 실패:",n),new Error("QR코드를 공유할 수 없습니다.")}}},B(Co,"defaultOptions",{width:200,margin:2,color:{dark:"#4338CA",light:"#FFFFFF"},errorCorrectionLevel:"M"}),Co);const mj=({referralCode:t,className:e=""})=>{const s=j.useRef(null),[n,r]=j.useState(!1),[i,o]=j.useState(null),[l,c]=j.useState("idle"),[d,h]=j.useState("idle");j.useEffect(()=>{if(!t||!s.current)return;(async()=>{r(!0),o(null);try{const f=Sn.createReferralUrl(t);await Sn.generateToCanvas(s.current,f,{width:160,color:{dark:"#667eea",light:"#ffffff"}})}catch(f){o("QR코드를 생성할 수 없습니다."),console.error("QR코드 생성 오류:",f)}finally{r(!1)}})()},[t]);const m=async()=>{if(t){c("downloading");try{await Sn.downloadReferralQRCode(t,{width:400,color:{dark:"#667eea",light:"#ffffff"}}),c("success"),setTimeout(()=>c("idle"),2e3)}catch(g){console.error("다운로드 실패:",g),c("error"),setTimeout(()=>c("idle"),2e3)}}},u=async()=>{if(t){h("sharing");try{if(typeof navigator.share=="function")await Sn.shareReferralQRCode(t,{width:400,color:{dark:"#667eea",light:"#ffffff"}}),h("success");else{const g=Sn.createReferralUrl(t);await navigator.clipboard.writeText(g),h("success")}setTimeout(()=>h("idle"),2e3)}catch(g){console.error("공유 실패:",g),h("error"),setTimeout(()=>h("idle"),2e3)}}};return a.jsx("div",{className:`bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600 rounded-xl p-6 text-white ${e}`,children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center justify-center",children:[a.jsx("span",{className:"mr-2",children:"📱"}),"QR코드로 쉽게 공유하기"]}),a.jsx("div",{className:"inline-block bg-white p-4 rounded-xl shadow-lg mb-4",children:n?a.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-indigo-500 border-t-transparent rounded-full"})}):i?a.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-2xl mb-2",children:"❌"}),a.jsx("div",{className:"text-xs",children:i})]})}):a.jsx("canvas",{ref:s,className:"block",style:{imageRendering:"pixelated"}})}),a.jsx("p",{className:"text-sm opacity-90 mb-4",children:"QR코드를 스캔하면 바로 가입 페이지로 이동해요!"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[a.jsx("button",{onClick:m,disabled:l==="downloading"||n||!!i,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${l==="downloading"?"bg-gray-400 cursor-not-allowed":l==="success"?"bg-green-500 hover:bg-green-600":l==="error"?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"}`,children:l==="downloading"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block mr-2",children:"⏳"}),"다운로드 중..."]}):l==="success"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"✅"}),"다운로드 완료"]}):l==="error"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"❌"}),"다운로드 실패"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"💾"}),"PNG 다운로드"]})}),a.jsx("button",{onClick:u,disabled:d==="sharing"||n||!!i,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${d==="sharing"?"bg-gray-400 cursor-not-allowed":d==="success"?"bg-green-500 hover:bg-green-600":d==="error"?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"}`,children:d==="sharing"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin inline-block mr-2",children:"⏳"}),"공유 중..."]}):d==="success"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"✅"}),"공유 완료"]}):d==="error"?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"❌"}),"공유 실패"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mr-2",children:"🔗"}),typeof navigator.share=="function"?"QR 공유하기":"링크 복사"]})})]}),a.jsx("div",{className:"mt-4 text-xs opacity-75",children:a.jsx("p",{children:"💡 QR코드를 저장해서 오프라인에서도 공유해보세요!"})})]})})},gj=({className:t=""})=>{const{user:e,myReferralCode:s,isGeneratingReferralCode:n,referralStats:r,isLoadingReferralStats:i,error:o,generateMyReferralCode:l,loadReferralStats:c}=Qt(),[d,h]=j.useState("idle"),[m,u]=j.useState(!1);j.useEffect(()=>{e&&!s&&l()},[e,s,l]);const g=async()=>{if(s)try{await navigator.clipboard.writeText(s),h("copied"),setTimeout(()=>h("idle"),2e3)}catch(v){console.error("복사 실패:",v),h("error"),setTimeout(()=>h("idle"),2e3)}},f=async()=>{!m&&(!r||Object.keys(r).length===0)&&(e!=null&&e.id)&&await c(e.id),u(!m)},x=()=>s?`${window.location.origin}/auth?mode=signup&ref=${s}`:"",p=()=>s?`🔮 운명나침반에서 당신의 운명을 확인해보세요!

추천인 코드: ${s}
링크: ${x()}

✨ 함께 가입하면 특별 혜택을 받을 수 있어요!`:"",y=v=>{const S=p(),C=x();switch(v){case"kakao":window.Kakao&&window.Kakao.Share?window.Kakao.Share.sendDefault({objectType:"text",text:S,link:{mobileWebUrl:C,webUrl:C}}):g();break;case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(C)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(S)}`,"_blank");break;case"copy":navigator.clipboard.writeText(S),h("copied"),setTimeout(()=>h("idle"),2e3);break}};return e?a.jsxs("div",{className:`space-y-6 ${t}`,children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎁"}),"내 추천 코드"]}),a.jsxs("button",{onClick:f,className:"text-sm text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 flex items-center space-x-1",children:[a.jsx("span",{children:"실적 보기"}),a.jsx("svg",{className:`w-4 h-4 transition-transform ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full mr-3"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"추천 코드 생성 중..."})]}):s?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 border-2 border-purple-200 dark:border-purple-700 rounded-lg p-4",children:a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"text-2xl font-mono tracking-widest text-purple-700 dark:text-purple-300",children:s})})}),a.jsx("button",{onClick:g,className:`px-4 py-3 rounded-lg font-medium transition-all duration-200 ${d==="copied"?"bg-green-500 text-white":d==="error"?"bg-red-500 text-white":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:d==="copied"?"✓ 복사됨":d==="error"?"❌ 실패":"📋 복사"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[a.jsxs("button",{onClick:()=>y("kakao"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"💬"}),a.jsx("span",{children:"카카오톡"})]}),a.jsxs("button",{onClick:()=>y("facebook"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"📘"}),a.jsx("span",{children:"페이스북"})]}),a.jsxs("button",{onClick:()=>y("twitter"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"🐦"}),a.jsx("span",{children:"트위터"})]}),a.jsxs("button",{onClick:()=>y("copy"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm",children:[a.jsx("span",{children:"📎"}),a.jsx("span",{children:"링크복사"})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:a.jsx("span",{className:"font-medium",children:"친구 추천 혜택"})}),a.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:"• 친구가 가입하면 둘 다 프리미엄 기능 1개월 무료"}),a.jsx("li",{children:"• 특별 사주 분석 리포트 제공"}),a.jsx("li",{children:"• 궁합 분석 서비스 무제한 이용"})]})]}),a.jsx(mj,{referralCode:s,className:"mt-4"})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"추천 코드를 생성할 수 없습니다."}),a.jsx("button",{onClick:l,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"다시 시도"})]})]}),m&&a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-xl p-6 border border-green-200 dark:border-green-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"📊"}),"추천 실적"]}),i?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-green-500 border-t-transparent rounded-full mr-3"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"실적 로딩 중..."})]}):r?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r.totalReferred}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총 추천 인원"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.pendingRewards}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"대기 중인 혜택"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:r.totalRewards}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"받은 총 혜택"})]})]}),r.referredUsers.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"추천한 친구들"}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.referredUsers.map(v=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:v.name.charAt(0).toUpperCase()})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:v.name}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[new Date(v.joinedAt).toLocaleDateString("ko-KR")," 가입"]})]})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${v.rewardStatus==="completed"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:v.rewardStatus==="completed"?"혜택 지급 완료":"혜택 대기 중"})]},v.id))})]}),r.referredUsers.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"아직 추천한 친구가 없어요"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"친구들에게 추천 코드를 공유해보세요!"})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"실적 정보를 불러올 수 없습니다."}),a.jsx("button",{onClick:()=>(e==null?void 0:e.id)&&c(e.id),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"다시 시도"})]})]}),o&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-red-600",children:"⚠️"}),a.jsx("span",{className:"text-red-700 dark:text-red-400 text-sm",children:o})]})})]}):null},gn="/api/customers";typeof window<"u"&&(console.log("[Customer API] Vercel 풀스택 모드"),console.log("[Customer API] Base URL:",gn));async function Ym(t=1,e=20,s=""){const n=new URLSearchParams({page:t.toString(),limit:e.toString(),search:s}),r=`${gn}?${n}`;console.log("[Customer API] 고객 목록 조회:",r);try{const i=await fetch(r);if(!i.ok)throw new Error(`고객 목록을 불러오는데 실패했습니다 (${i.status})`);return await i.json()}catch(i){throw console.error("[Customer API] 요청 실패:",i),i}}async function fj(t){const e=`${gn}/${t}`,s=await fetch(e);if(!s.ok)throw new Error("고객 정보를 불러오는데 실패했습니다");return s.json()}async function Gm(t){const s=await fetch(gn,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.json();throw new Error(n.error||"고객 등록에 실패했습니다")}return s.json()}async function xj(t,e){const s=`${gn}/${t}`,n=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"고객 정보 수정에 실패했습니다")}return n.json()}async function pj(t){const e=`${gn}/${t}`,s=await fetch(e,{method:"DELETE"});if(!s.ok){const n=await s.json();throw new Error(n.error||"고객 삭제에 실패했습니다")}return s.json()}function Km({embedded:t=!1}){const[e,s]=j.useState([]),[n,r]=j.useState(0),[i,o]=j.useState(1),[l,c]=j.useState(""),[d,h]=j.useState(!1),[m,u]=j.useState(null),[g,f]=j.useState(!1),[x,p]=j.useState({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""});j.useEffect(()=>{y()},[i,l]);const y=async()=>{try{f(!0);const k=await Ym(i,20,l);s(k.data),r(k.totalPages)}catch(k){console.error("Error loading customers:",k),alert("고객 목록을 불러오는데 실패했습니다")}finally{f(!1)}},v=async k=>{k.preventDefault();try{m?(await xj(m.id,x),alert("고객 정보가 수정되었습니다")):(await Gm(x),alert("고객이 등록되었습니다")),h(!1),u(null),N(),y()}catch(w){alert(w.message||"저장 중 오류가 발생했습니다")}},S=k=>{u(k),p({name:k.name,birth_date:k.birth_date,birth_time:k.birth_time,phone:k.phone,lunar_solar:k.lunar_solar,gender:k.gender,memo:k.memo||""}),h(!0)},C=async k=>{if(confirm("정말 삭제하시겠습니까?"))try{await pj(k),alert("고객이 삭제되었습니다"),y()}catch(w){alert(w.message||"삭제 중 오류가 발생했습니다")}},N=()=>{p({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""})},M=()=>{u(null),N(),h(!0)};return a.jsx("div",{className:t?"w-full":"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:a.jsxs("div",{className:t?"w-full":"max-w-7xl mx-auto",children:[a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${t?"border border-gray-200 dark:border-gray-600":""}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:`${t?"text-lg":"text-2xl"} font-bold text-gray-900 dark:text-white`,children:"🗂️ 고객 관리"}),a.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"➕ 새 고객 등록"})]}),a.jsx("div",{className:"mb-6",children:a.jsx("input",{type:"text",placeholder:"🔍 이름 또는 전화번호로 검색...",value:l,onChange:k=>c(k.target.value),className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg 
                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white`})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"번호"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"이름"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"생년월일"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"생시"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"전화번호"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"음/양"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"성별"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"관리"})]})}),a.jsx("tbody",{children:g?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"로딩 중..."})}):e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"등록된 고객이 없습니다"})}):e.map((k,w)=>a.jsxs("tr",{className:"border-b dark:border-gray-700",children:[a.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:(i-1)*20+w+1}),a.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white font-medium",children:k.name}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:k.birth_date}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:k.birth_time}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:k.phone}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:k.lunar_solar==="lunar"?"음력":"양력"}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:k.gender==="male"?"남":"여"}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("button",{onClick:()=>S(k),className:"text-blue-600 hover:text-blue-800 mr-3",children:"✏️"}),a.jsx("button",{onClick:()=>C(k.id),className:"text-red-600 hover:text-red-800",children:"🗑️"})]})]},k.id))})]})}),n>1&&a.jsxs("div",{className:"flex justify-center mt-6 space-x-2",children:[a.jsx("button",{onClick:()=>o(k=>Math.max(1,k-1)),disabled:i===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"◀"}),[...Array(n)].map((k,w)=>a.jsx("button",{onClick:()=>o(w+1),className:`px-3 py-1 border rounded ${i===w+1?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:w+1},w)),a.jsx("button",{onClick:()=>o(k=>Math.min(n,k+1)),disabled:i===n,className:"px-3 py-1 border rounded disabled:opacity-50",children:"▶"})]})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-900 dark:text-white",children:m?"고객 정보 수정":"새 고객 등록"}),a.jsxs("form",{onSubmit:v,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"이름 *"}),a.jsx("input",{type:"text",required:!0,value:x.name,onChange:k=>p({...x,name:k.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"생년월일 *"}),a.jsx("input",{type:"date",required:!0,value:x.birth_date,onChange:k=>p({...x,birth_date:k.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"생시 * (24시간 형식)"}),a.jsx("input",{type:"time",required:!0,value:x.birth_time,onChange:k=>p({...x,birth_time:k.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"전화번호 *"}),a.jsx("input",{type:"tel",required:!0,placeholder:"010-1234-5678",value:x.phone,onChange:k=>p({...x,phone:k.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"음력/양력"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"solar",checked:x.lunar_solar==="solar",onChange:k=>p({...x,lunar_solar:"solar"}),className:"mr-2"}),"양력"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"lunar",checked:x.lunar_solar==="lunar",onChange:k=>p({...x,lunar_solar:"lunar"}),className:"mr-2"}),"음력"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"성별 *"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"male",checked:x.gender==="male",onChange:k=>p({...x,gender:"male"}),className:"mr-2"}),"남"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"female",checked:x.gender==="female",onChange:k=>p({...x,gender:"female"}),className:"mr-2"}),"여"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"메모"}),a.jsx("textarea",{value:x.memo,onChange:k=>p({...x,memo:k.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>{h(!1),u(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"취소"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:m?"수정하기":"등록하기"})]})]})]})})]})})}function bj(){const t=ze(),{settings:e}=ct(),{setBirthInfo:s}=Xs(),[n,r]=j.useState(e),[i,o]=j.useState("general"),[l,c]=j.useState({birthDate:"",birthTime:"",calendarType:"solar",gender:"",birthPlace:""}),[d,h]=j.useState("idle");j.useEffect(()=>{const f=localStorage.getItem("sajuapp-personal-info");if(f)try{const x=JSON.parse(f);c(x)}catch(x){console.error("Failed to parse saved personal info:",x)}},[]);const m=[{id:"general",label:"일반",icon:"⚙️"},{id:"calendar",label:"캘린더",icon:"📅"},{id:"diary",label:"다이어리",icon:"📝"},{id:"notifications",label:"알림",icon:"🔔"},{id:"account",label:"계정",icon:"👤"},{id:"customers",label:"고객관리",icon:"👥"}],u=()=>l.birthDate?l.birthTime?l.gender?!0:(alert("성별을 선택해주세요."),!1):(alert("출생시간을 입력해주세요."),!1):(alert("생년월일을 입력해주세요."),!1),g=async()=>{if(!(i==="general"&&!u())){h("saving");try{if(i==="general"){localStorage.setItem("sajuapp-personal-info",JSON.stringify(l));const f={year:new Date(l.birthDate).getFullYear(),month:new Date(l.birthDate).getMonth()+1,day:new Date(l.birthDate).getDate(),hour:parseInt(l.birthTime.split(":")[0])||0,minute:parseInt(l.birthTime.split(":")[1])||0,isLunar:l.calendarType==="lunar",isMale:l.gender==="male",name:l.gender==="male"?"사용자(남)":"사용자(여)"};s(f),console.log("[설정페이지] 사주 정보 저장됨:",f);const x=Xs.getState().birthInfo;console.log("[설정페이지] Store에 저장된 정보:",x),window.dispatchEvent(new CustomEvent("personalInfoUpdated",{detail:l}))}localStorage.setItem("sajuapp-settings",JSON.stringify(n)),h("saved"),setTimeout(()=>{h("idle"),i==="general"&&window.confirm("설정이 저장되었습니다. 운세를 확인하러 캘린더로 이동하시겠습니까?")&&t("/calendar")},2e3),console.log("Settings saved successfully:",{personalInfo:i==="general"?l:"not updated",localSettings:n})}catch(f){console.error("Failed to save settings:",f),h("error"),alert("설정 저장에 실패했습니다. 다시 시도해주세요.")}}};return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground mb-6",children:"설정"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("div",{className:"w-64",children:a.jsx("nav",{className:"bg-background rounded-lg shadow-sm border border-border p-2",children:m.map(f=>a.jsxs("button",{onClick:()=>o(f.id),className:`
                    w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors
                    ${i===f.id?"bg-primary/10 text-primary":"text-foreground hover:bg-muted"}
                  `,children:[a.jsx("span",{className:"text-xl",children:f.icon}),a.jsx("span",{className:"font-medium",children:f.label})]},f.id))})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"bg-background rounded-lg shadow-sm border border-border p-6",children:[i==="general"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"일반 설정"}),a.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200 dark:border-purple-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎂"}),"사주 정보 (개인화 운세를 위해 필요)"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"생년월일 *"}),a.jsx("input",{type:"date",value:l.birthDate,onChange:f=>c({...l,birthDate:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",placeholder:"YYYY-MM-DD"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"출생 시간 *"}),a.jsx("input",{type:"time",step:"1800",value:l.birthTime,onChange:f=>c({...l,birthTime:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"24시간 형식으로 입력해주세요 (예: 14:30)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"달력 종류 *"}),a.jsxs("select",{value:l.calendarType,onChange:f=>c({...l,calendarType:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[a.jsx("option",{value:"solar",children:"양력"}),a.jsx("option",{value:"lunar",children:"음력"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"성별 *"}),a.jsxs("select",{value:l.gender,onChange:f=>c({...l,gender:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[a.jsx("option",{value:"",children:"선택해주세요"}),a.jsx("option",{value:"male",children:"남성"}),a.jsx("option",{value:"female",children:"여성"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"전통 사주학에서 성별에 따른 해석이 달라집니다"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"출생지 (선택사항)"}),a.jsx("input",{type:"text",value:l.birthPlace,onChange:f=>c({...l,birthPlace:f.target.value}),placeholder:"예: 서울시 강남구",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"더 정확한 시간 계산을 위해 출생지를 입력할 수 있습니다"})]}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",a.jsx("strong",{children:"개인정보 보호:"})," 입력하신 정보는 개인화된 운세 제공을 위해서만 사용되며, 로컬에 안전하게 저장됩니다."]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"테마"}),a.jsxs("select",{value:n.theme,onChange:f=>r({...n,theme:f.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"light",children:"라이트"}),a.jsx("option",{value:"dark",children:"다크"}),a.jsx("option",{value:"system",children:"시스템 설정 따르기"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"언어"}),a.jsxs("select",{value:n.language,onChange:f=>r({...n,language:f.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"ko",children:"한국어"}),a.jsx("option",{value:"en",children:"English"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"시간대"}),a.jsxs("select",{value:n.timezone,onChange:f=>r({...n,timezone:f.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"Asia/Seoul",children:"서울 (GMT+9)"}),a.jsx("option",{value:"America/New_York",children:"뉴욕 (GMT-5)"}),a.jsx("option",{value:"Europe/London",children:"런던 (GMT+0)"})]})]})]}),i==="calendar"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"캘린더 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"기본 보기"}),a.jsxs("select",{value:n.defaultView,onChange:f=>r({...n,defaultView:f.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"year",children:"년"}),a.jsx("option",{value:"month",children:"월"}),a.jsx("option",{value:"week",children:"주"}),a.jsx("option",{value:"day",children:"일"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"주 시작일"}),a.jsxs("select",{value:n.weekStartsOn,onChange:f=>r({...n,weekStartsOn:parseInt(f.target.value)}),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"0",children:"일요일"}),a.jsx("option",{value:"1",children:"월요일"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.showLunarCalendar,onChange:f=>r({...n,showLunarCalendar:f.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"음력 날짜 표시"})]})}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.showFortune,onChange:f=>r({...n,showFortune:f.target.checked}),className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"운세 정보 표시"})]})})]}),i==="diary"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"다이어리 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"기본 공개 범위"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground",children:[a.jsx("option",{value:"private",children:"비공개"}),a.jsx("option",{value:"friends",children:"친구만"}),a.jsx("option",{value:"public",children:"전체 공개"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"일일 알림 활성화"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-7",children:"매일 저녁 9시에 다이어리 작성 알림을 받습니다."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"자동 저장"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-7",children:"작성 중인 내용을 30초마다 자동으로 저장합니다."})]})]}),i==="notifications"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"알림 설정"}),a.jsx(S1,{})]}),i==="account"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"계정 설정"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"이메일"}),a.jsx("input",{type:"email",defaultValue:"user@example.com",disabled:!0,className:"w-full px-3 py-2 border border-border rounded-lg bg-muted text-muted-foreground"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"사용자명"}),a.jsx("input",{type:"text",defaultValue:"홍길동",className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-background text-foreground"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"프로필 사진"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center text-2xl text-muted-foreground",children:"👤"}),a.jsx("button",{className:"px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors",children:"사진 변경"})]})]}),a.jsx("div",{className:"pt-4 border-t border-border",children:a.jsx(gj,{})}),a.jsx("div",{className:"pt-4 border-t border-border",children:a.jsx("button",{className:"px-4 py-2 text-red-600 hover:bg-red-500/10 rounded-lg transition-colors",children:"계정 삭제"})})]}),i==="customers"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"고객관리"}),a.jsx(Km,{embedded:!0}),a.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[a.jsxs("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:[a.jsx("span",{className:"mr-2",children:"⚙️"}),"고객 데이터 설정"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"고객 정보 자동 백업"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"상담 알림 활성화"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary border-border rounded focus:ring-primary/50"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:"고객 생일 알림"})]})]})]})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-border flex justify-end gap-3",children:[a.jsx("button",{className:"px-6 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors",children:"취소"}),a.jsx("button",{onClick:g,disabled:d==="saving",className:`px-6 py-2 rounded-lg transition-colors ${d==="saving"?"bg-gray-400 cursor-not-allowed text-white":d==="saved"?"bg-green-500 hover:bg-green-600 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`,children:d==="saving"?"저장 중...":d==="saved"?"✓ 저장 완료":"저장"})]})]})})]})]})})}const yj=()=>{const[t,e]=j.useState(new Date),[s,n]=j.useState(null),[r,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(!1);j.useEffect(()=>{(()=>{const x=localStorage.getItem("sajuapp-personal-info");if(x)try{const p=JSON.parse(x);l(p),d(!1)}catch(p){console.error("Failed to parse personal info:",p),d(!0)}else d(!0)})();const f=x=>{l(x.detail),d(!1)};return window.addEventListener("personalInfoUpdated",f),()=>{window.removeEventListener("personalInfoUpdated",f)}},[]);const h=()=>({date:t.toISOString().split("T")[0],overallScore:Math.floor(Math.random()*30)+70,categories:{love:{score:Math.floor(Math.random()*100),description:"새로운 만남의 기회가 있을 수 있습니다. 열린 마음으로 대화를 나누어보세요."},career:{score:Math.floor(Math.random()*100),description:"업무에서 중요한 성과를 낼 수 있는 날입니다. 집중력을 발휘하세요."},money:{score:Math.floor(Math.random()*100),description:"재정 관리에 신중을 기하세요. 충동적인 소비는 피하는 것이 좋습니다."},health:{score:Math.floor(Math.random()*100),description:"충분한 휴식이 필요합니다. 스트레스 관리에 유의하세요."}},luckyItems:{number:Math.floor(Math.random()*100),color:["빨강","파랑","노랑","초록","보라"][Math.floor(Math.random()*5)],direction:["동","서","남","북","중앙"][Math.floor(Math.random()*5)],time:`${Math.floor(Math.random()*12)+1}시`},advice:"오늘은 긍정적인 에너지가 충만한 날입니다. 평소 미루어왔던 일을 시작하기에 좋은 시기입니다.",warning:"과도한 자신감은 실수를 부를 수 있으니 겸손한 자세를 유지하세요."});j.useEffect(()=>{if(!o||c){n(null);return}i(!0),setTimeout(()=>{n(h()),i(!1)},500)},[t,o,c]);const m=g=>g>=80?"text-green-600 dark:text-green-400":g>=60?"text-yellow-600 dark:text-yellow-400":g>=40?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400",u=g=>g>=80?"😄":g>=60?"🙂":g>=40?"😐":"😔";return a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"🔮 오늘의 운세"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"AI와 전통 사주명리학이 분석한 당신의 하루"})]}),a.jsx("div",{className:"flex justify-center mb-8",children:a.jsx("input",{type:"date",value:t.toISOString().split("T")[0],onChange:g=>e(new Date(g.target.value)),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})}),r?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):c?a.jsx("div",{className:"max-w-md mx-auto text-center",children:a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🔮"}),a.jsx("h3",{className:"text-xl font-semibold text-yellow-800 dark:text-yellow-200 mb-4",children:"개인정보가 필요합니다"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"정확한 사주 분석을 위해 생년월일, 출생시간 등의 개인정보가 필요합니다."}),a.jsx("button",{onClick:()=>window.location.href="/settings",className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"⚙️ 설정에서 개인정보 입력하기"})]})}):s?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-8 text-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"종합 운세 점수"}),a.jsxs("div",{className:"text-6xl font-bold mb-2",children:[s.overallScore,"점"]}),a.jsx("div",{className:"text-4xl mb-4",children:u(s.overallScore)}),a.jsx("p",{className:"text-lg opacity-90",children:s.advice})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(s.categories).map(([g,f])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white capitalize",children:[g==="love"&&"💕 연애운",g==="career"&&"💼 직장운",g==="money"&&"💰 금전운",g==="health"&&"🏃 건강운"]}),a.jsxs("span",{className:`text-2xl font-bold ${m(f.score)}`,children:[f.score,"점"]})]}),a.jsx("div",{className:"relative h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-4",children:a.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500",style:{width:`${f.score}%`}})}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:f.description})]},g))}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"🍀 오늘의 행운 아이템"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"🔢"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 숫자"}),a.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:s.luckyItems.number})]}),a.jsxs("div",{className:"text-center p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"🎨"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 색"}),a.jsx("p",{className:"text-lg font-bold text-pink-600 dark:text-pink-400",children:s.luckyItems.color})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"🧭"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"길한 방향"}),a.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:s.luckyItems.direction})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[a.jsx("span",{className:"text-3xl mb-2 block",children:"⏰"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"행운의 시간"}),a.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:s.luckyItems.time})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"⚠️ 오늘의 주의사항"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.warning})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"📱 카카오톡 공유"}),a.jsx("button",{className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"💬 네이버 공유"}),a.jsx("button",{className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"📷 이미지 저장"})]})]}):null]})},Dd=["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"],vj={갑:["병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축"],을:["무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축"],병:["경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축"],정:["임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축"],무:["갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해","갑자","을축"],기:["병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해","병자","정축"],경:["무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해","무자","기축"],신:["경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해","경자","신축"],임:["임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해","임자","계축"],계:["갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해","갑자","을축"]},jj={갑:["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해"],을:["병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해"],병:["무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해"],정:["경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해"],무:["임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"],기:["갑자","을축","병인","정묘","무진","기사","경오","신미","임신","계유","갑술","을해"],경:["병자","정축","무인","기묘","경진","신사","임오","계미","갑신","을유","병술","정해"],신:["무자","기축","경인","신묘","임진","계사","갑오","을미","병신","정유","무술","기해"],임:["경자","신축","임인","계묘","갑진","을사","병오","정미","무신","기유","경술","신해"],계:["임자","계축","갑인","을묘","병진","정사","무오","기미","경신","신유","임술","계해"]};class Ys{static calculateYearPillar(e){let r=(e-1924)%60;r<0&&(r+=60);const i=Dd[r];return{heavenly:i[0],earthly:i[1],combined:i}}static getSolarMonth(e,s,n){return s===1?n>=6?12:11:s===2?n>=4?1:12:s===3?n>=6?2:1:s===4?n>=5?3:2:s===5?n>=6?4:3:s===6?n>=6?5:4:s===7?n>=7?6:5:s===8?n>=8?7:6:s===9?n>=8?8:7:s===10?n>=8?9:8:s===11?n>=7?10:9:s===12?n>=7?11:10:s}static calculateMonthPillar(e,s,n){const i=this.calculateYearPillar(e).heavenly,o=this.getSolarMonth(e,s,n),l=o-1,c=vj[i];if(!c)return console.error("Invalid year stem:",i),{heavenly:"갑",earthly:"자",combined:"갑자"};const d=c[l];return d?(console.log("월주 계산:",{양력:`${e}년 ${s}월 ${n}일`,절기월:o,년간:i,월주:d}),{heavenly:d[0],earthly:d[1],combined:d}):(console.error("Invalid month index:",l),{heavenly:"갑",earthly:"자",combined:"갑자"})}static calculateDayPillar(e,s,n){const r=new Date(1971,10,17),o=new Date(e,s-1,n).getTime()-r.getTime();let c=(42+Math.floor(o/(1e3*60*60*24)))%60;c<0&&(c+=60);const d=Dd[c];return{heavenly:d[0],earthly:d[1],combined:d}}static calculateHourPillar(e,s,n,r,i=0){const l=this.calculateDayPillar(e,s,n).heavenly;let c;const d=r+i/60;d>=23||d<1?c=0:d<3?c=1:d<5?c=2:d<7?c=3:d<9?c=4:d<11?c=5:d<13?c=6:d<15?c=7:d<17?c=8:d<19?c=9:d<21?c=10:c=11;const h=jj[l];if(!h)return console.error("Invalid day stem for hour calculation:",l),{heavenly:"갑",earthly:"자",combined:"갑자"};const m=h[c];return{heavenly:m[0],earthly:m[1],combined:m}}static calculateFourPillars(e){let{year:s,month:n,day:r,hour:i,minute:o=0}=e;if(e.isLunar)try{const l=e1(s,n,r,e.isLeapMonth||!1);s=l.getFullYear(),n=l.getMonth()+1,r=l.getDate()}catch(l){console.error("음력 변환 오류:",l)}return{year:this.calculateYearPillar(s),month:this.calculateMonthPillar(s,n,r),day:this.calculateDayPillar(s,n,r),hour:this.calculateHourPillar(s,n,r,i,o)}}static testReferenceCases(){console.log("=== 사주 계산 테스트 ===");const e={year:1971,month:11,day:17,hour:4,minute:0,isLunar:!1},s=this.calculateFourPillars(e);console.log(`
테스트 1: 1971년 11월 17일 04시`),console.log("결과:",Pd(s)),console.log("기대값: 신해년 기해월 병오일 경인시"),console.log("검증:",s.year.combined==="신해"&&s.month.combined==="기해"&&s.day.combined==="병오"&&s.hour.combined==="경인"?"✅ 정확":"❌ 오류");const n={year:1976,month:9,day:16,hour:9,minute:40,isLunar:!1},r=this.calculateFourPillars(n);console.log(`
테스트 2: 1976년 9월 16일 09시 40분`),console.log("결과:",Pd(r)),console.log("기대값: 병진년 정유월 신미일 계사시"),console.log("검증:",r.year.combined==="병진"&&r.month.combined==="정유"&&r.day.combined==="신미"&&r.hour.combined==="계사"?"✅ 정확":"❌ 오류")}}function Pd(t){return`${t.year.heavenly}${t.year.earthly}년 ${t.month.heavenly}${t.month.earthly}월 ${t.day.heavenly}${t.day.earthly}일 ${t.hour.heavenly}${t.hour.earthly}시`}const Rd={갑:"wood",을:"wood",병:"fire",정:"fire",무:"earth",기:"earth",경:"metal",신:"metal",임:"water",계:"water"},wj={자:"water",축:"earth",인:"wood",묘:"wood",진:"earth",사:"fire",오:"fire",미:"earth",신:"metal",유:"metal",술:"earth",해:"water"},qm={자:["계"],축:["기","계","신"],인:["갑","병","무"],묘:["을"],진:["무","을","계"],사:["병","무","경"],오:["정","기"],미:["기","정","을"],신:["경","임","무"],유:["신"],술:["무","신","정"],해:["임","갑"]},Hi={갑:{갑:"bijeon",을:"geopjae",병:"siksin",정:"sanggwan",무:"pyeonjae",기:"jeongjae",경:"pyeongwan",신:"jeonggwan",임:"pyeongin",계:"jeongin"},을:{을:"bijeon",갑:"geopjae",정:"siksin",병:"sanggwan",기:"pyeonjae",무:"jeongjae",신:"pyeongwan",경:"jeonggwan",계:"pyeongin",임:"jeongin"},병:{병:"bijeon",정:"geopjae",무:"siksin",기:"sanggwan",경:"pyeonjae",신:"jeongjae",임:"pyeongwan",계:"jeonggwan",갑:"pyeongin",을:"jeongin"},정:{정:"bijeon",병:"geopjae",기:"siksin",무:"sanggwan",신:"pyeonjae",경:"jeongjae",계:"pyeongwan",임:"jeonggwan",을:"pyeongin",갑:"jeongin"},무:{무:"bijeon",기:"geopjae",경:"siksin",신:"sanggwan",임:"pyeonjae",계:"jeongjae",갑:"pyeongwan",을:"jeonggwan",병:"pyeongin",정:"jeongin"},기:{기:"bijeon",무:"geopjae",신:"siksin",경:"sanggwan",계:"pyeonjae",임:"jeongjae",을:"pyeongwan",갑:"jeonggwan",정:"pyeongin",병:"jeongin"},경:{경:"bijeon",신:"geopjae",임:"siksin",계:"sanggwan",갑:"pyeonjae",을:"jeongjae",병:"pyeongwan",정:"jeonggwan",무:"pyeongin",기:"jeongin"},신:{신:"bijeon",경:"geopjae",계:"siksin",임:"sanggwan",을:"pyeonjae",갑:"jeongjae",정:"pyeongwan",병:"jeonggwan",기:"pyeongin",무:"jeongin"},임:{임:"bijeon",계:"geopjae",갑:"siksin",을:"sanggwan",병:"pyeonjae",정:"jeongjae",무:"pyeongwan",기:"jeonggwan",경:"pyeongin",신:"jeongin"},계:{계:"bijeon",임:"geopjae",을:"siksin",갑:"sanggwan",정:"pyeonjae",병:"jeongjae",기:"pyeongwan",무:"jeonggwan",신:"pyeongin",경:"jeongin"}};function kj(t){const e={wood:0,fire:0,earth:0,metal:0,water:0};[t.year,t.month,t.day,t.hour].forEach((r,i)=>{const o=Rd[r.heavenly];if(o){const d=i===2?20:15;e[o]+=d}const l=wj[r.earthly];if(l){const d=i===2?15:10;e[l]+=d}(qm[r.earthly]||[]).forEach(d=>{const h=Rd[d];h&&(e[h]+=5)})});const n=Object.values(e).reduce((r,i)=>r+i,0);return n>0&&Object.keys(e).forEach(r=>{const i=r;e[i]=Math.round(e[i]/n*100)}),e}function Nj(t){const e=t.day.heavenly,s={bijeon:0,geopjae:0,siksin:0,sanggwan:0,jeongjae:0,pyeonjae:0,jeonggwan:0,pyeongwan:0,jeongin:0,pyeongin:0};return Hi[e]?([t.year,t.month,t.day,t.hour].forEach((r,i)=>{const o=Hi[e][r.heavenly];if(o){const c=i===2?15:10;s[o]+=c}(qm[r.earthly]||[]).forEach(c=>{const d=Hi[e][c];d&&(s[d]+=5)})}),s):(console.error("Invalid day master:",e),s)}function Sj(t,e){return{foundation:Cj(t,e),thinking:_j(t,e),relationship:Mj(t,e),action:Ej(t,e),luck:Tj(t,e),environment:Aj(t,e)}}function Cj(t,e){const s=(t.wood+t.earth)/2,n=e.bijeon*2+e.jeongin*2;return Math.min(100,Math.round(s+n))}function _j(t,e){const s=(t.water+t.fire)/2,n=e.siksin*2+e.sanggwan*1.5;return Math.min(100,Math.round(s+n))}function Mj(t,e){const s=(t.wood+t.fire)/2,n=e.jeongjae*2+e.pyeonjae*1.5;return Math.min(100,Math.round(s+n))}function Ej(t,e){const s=(t.metal+t.wood)/2,n=e.jeonggwan*2+e.pyeongwan*1.5;return Math.min(100,Math.round(s+n))}function Tj(t,e){const s=Object.values(t),n=s.reduce((l,c)=>l+c,0)/s.length,r=s.reduce((l,c)=>l+Math.pow(c-n,2),0)/s.length,i=Math.max(0,100-r*2),o=(e.jeongin+e.pyeongin+e.siksin)/3;return Math.min(100,Math.round(i*.6+o*.4))}function Aj(t,e){const s=(t.earth+t.water)/2,n=e.bijeon*1.5+e.geopjae*1.5;return Math.min(100,Math.round(s+n))}function Dj(t,e){return{emotion:Math.min(100,Math.round(t.water*.7+e.jeongin*2)),logic:Math.min(100,Math.round(t.metal*.7+e.jeonggwan*2)),artistic:Math.min(100,Math.round(t.fire*.7+e.siksin*2)),rational:Math.min(100,Math.round(t.earth*.7+e.sanggwan*2)),character:Math.min(100,Math.round(t.wood*.7+e.bijeon*2)),intelligence:Math.min(100,Math.round((t.water+t.metal)*.4+e.pyeongin*2)),learning:Math.min(100,Math.round(t.wood*.5+e.jeongin*2.5))}}function Pj(t,e){return{health:Math.min(100,Math.round(t.wood*.8+e.bijeon*2)),marriage:Math.min(100,Math.round(t.fire*.6+(e.jeongjae+e.pyeonjae)*1.5)),power:Math.min(100,Math.round(t.metal*.7+(e.jeonggwan+e.pyeongwan)*1.5)),fame:Math.min(100,Math.round(t.fire*.8+e.siksin*2)),accident:Math.max(10,Math.round(100-t.earth*.8-e.jeongin*2)),business:Math.min(100,Math.round(t.metal*.6+e.pyeonjae*2.5)),movement:Math.min(100,Math.round(t.water*.8+e.geopjae*2)),separation:Math.max(10,Math.round(100-t.earth*.7-e.bijeon*2)),relationship:Math.min(100,Math.round(t.fire*.7+e.jeongin*2)),children:Math.min(100,Math.round(t.wood*.6+e.siksin*2.5)),talent:Math.min(100,Math.round(t.water*.7+e.pyeongin*2)),wealth:Math.min(100,Math.round(t.metal*.5+(e.jeongjae+e.pyeonjae)*2)),ancestor:Math.min(100,Math.round(t.earth*.8+e.jeongin*1.5)),career:Math.min(100,Math.round(t.metal*.6+e.jeonggwan*2.5)),family:Math.min(100,Math.round(t.earth*.7+e.bijeon*2)),study:Math.min(100,Math.round(t.water*.6+e.jeongin*2.5)),fortune:Math.min(100,Math.round((t.fire+t.water)*.4+e.pyeongin*2))}}function Rj(t){return Object.values(t).reduce((e,s)=>e+s,0)}function Lj(t){const e=Object.values(t);return e.reduce((s,n)=>s+n,0)/e.length}function Oj(t){return{year:{heavenly:t.year.heavenly,earthly:t.year.earthly},month:{heavenly:t.month.heavenly,earthly:t.month.earthly},day:{heavenly:t.day.heavenly,earthly:t.day.earthly},hour:{heavenly:t.hour.heavenly,earthly:t.hour.earthly}}}function Jm(t){const e=Ys.calculateFourPillars(t),s=kj(e),n=Nj(e),r=Sj(s,n),i=Dj(s,n),o=Pj(s,n);return{birthInfo:t,fourPillars:Oj(e),fiveElements:s,tenGods:n,sixAreas:r,dayMaster:e.day.heavenly,totalScore:Rj(r),averageScore:Lj(r),personalityTraits:i,seventeenFortunes:o}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Lr(t){return t+.5|0}const Bt=(t,e,s)=>Math.max(Math.min(t,s),e);function Ln(t){return Bt(Lr(t*2.55),0,255)}function Yt(t){return Bt(Lr(t*255),0,255)}function Nt(t){return Bt(Lr(t/2.55)/100,0,1)}function Ld(t){return Bt(Lr(t*100),0,100)}const Ke={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$o=[..."0123456789ABCDEF"],Ij=t=>$o[t&15],Fj=t=>$o[(t&240)>>4]+$o[t&15],Jr=t=>(t&240)>>4===(t&15),Bj=t=>Jr(t.r)&&Jr(t.g)&&Jr(t.b)&&Jr(t.a);function $j(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Ke[t[1]]*17,g:255&Ke[t[2]]*17,b:255&Ke[t[3]]*17,a:e===5?Ke[t[4]]*17:255}:(e===7||e===9)&&(s={r:Ke[t[1]]<<4|Ke[t[2]],g:Ke[t[3]]<<4|Ke[t[4]],b:Ke[t[5]]<<4|Ke[t[6]],a:e===9?Ke[t[7]]<<4|Ke[t[8]]:255})),s}const Vj=(t,e)=>t<255?e(t):"";function Hj(t){var e=Bj(t)?Ij:Fj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Vj(t.a,e):void 0}const zj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xm(t,e,s){const n=e*Math.min(s,1-s),r=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Uj(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function Wj(t,e,s){const n=Xm(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function Yj(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function zl(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),o=Math.min(s,n,r),l=(i+o)/2;let c,d,h;return i!==o&&(h=i-o,d=l>.5?h/(2-i-o):h/(i+o),c=Yj(s,n,r,h,i),c=c*60+.5),[c|0,d||0,l]}function Ul(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Yt)}function Wl(t,e,s){return Ul(Xm,t,e,s)}function Gj(t,e,s){return Ul(Wj,t,e,s)}function Kj(t,e,s){return Ul(Uj,t,e,s)}function Qm(t){return(t%360+360)%360}function qj(t){const e=zj.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Ln(+e[5]):Yt(+e[5]));const r=Qm(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=Gj(r,i,o):e[1]==="hsv"?n=Kj(r,i,o):n=Wl(r,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function Jj(t,e){var s=zl(t);s[0]=Qm(s[0]+e),s=Wl(s),t.r=s[0],t.g=s[1],t.b=s[2]}function Xj(t){if(!t)return;const e=zl(t),s=e[0],n=Ld(e[1]),r=Ld(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${Nt(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const Od={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Id={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Qj(){const t={},e=Object.keys(Id),s=Object.keys(Od);let n,r,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,Od[i]);i=parseInt(Id[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Xr;function Zj(t){Xr||(Xr=Qj(),Xr.transparent=[0,0,0,0]);const e=Xr[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const ew=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function tw(t){const e=ew.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?Ln(o):Bt(o*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?Ln(n):Bt(n,0,255)),r=255&(e[4]?Ln(r):Bt(r,0,255)),i=255&(e[6]?Ln(i):Bt(i,0,255)),{r:n,g:r,b:i,a:s}}}function sw(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Nt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const zi=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Os=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function nw(t,e,s){const n=Os(Nt(t.r)),r=Os(Nt(t.g)),i=Os(Nt(t.b));return{r:Yt(zi(n+s*(Os(Nt(e.r))-n))),g:Yt(zi(r+s*(Os(Nt(e.g))-r))),b:Yt(zi(i+s*(Os(Nt(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Qr(t,e,s){if(t){let n=zl(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Wl(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Zm(t,e){return t&&Object.assign(e||{},t)}function Fd(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Yt(t[3]))):(e=Zm(t,{r:0,g:0,b:0,a:1}),e.a=Yt(e.a)),e}function rw(t){return t.charAt(0)==="r"?tw(t):qj(t)}class or{constructor(e){if(e instanceof or)return e;const s=typeof e;let n;s==="object"?n=Fd(e):s==="string"&&(n=$j(e)||Zj(e)||rw(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Zm(this._rgb);return e&&(e.a=Nt(e.a)),e}set rgb(e){this._rgb=Fd(e)}rgbString(){return this._valid?sw(this._rgb):void 0}hexString(){return this._valid?Hj(this._rgb):void 0}hslString(){return this._valid?Xj(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,n.r=255&d*n.r+i*r.r+.5,n.g=255&d*n.g+i*r.g+.5,n.b=255&d*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=nw(this._rgb,e._rgb,s)),this}clone(){return new or(this.rgb)}alpha(e){return this._rgb.a=Yt(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Lr(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Qr(this._rgb,2,e),this}darken(e){return Qr(this._rgb,2,-e),this}saturate(e){return Qr(this._rgb,1,e),this}desaturate(e){return Qr(this._rgb,1,-e),this}rotate(e){return Jj(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function jt(){}const aw=(()=>{let t=0;return()=>t++})();function ne(t){return t==null}function ue(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function re(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function be(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ue(t,e){return be(t)?t:e}function J(t,e){return typeof t>"u"?e:t}const iw=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,eg=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ce(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function ie(t,e,s,n){let r,i,o;if(ue(t))for(i=t.length,r=0;r<i;r++)e.call(s,t[r],r);else if(re(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(s,t[o[r]],o[r])}function Fa(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Ba(t){if(ue(t))return t.map(Ba);if(re(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Ba(t[s[r]]);return e}return t}function tg(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function ow(t,e,s,n){if(!tg(t))return;const r=e[t],i=s[t];re(r)&&re(i)?lr(r,i,n):e[t]=Ba(i)}function lr(t,e,s){const n=ue(e)?e:[e],r=n.length;if(!re(t))return t;s=s||{};const i=s.merger||ow;let o;for(let l=0;l<r;++l){if(o=n[l],!re(o))continue;const c=Object.keys(o);for(let d=0,h=c.length;d<h;++d)i(c[d],t,o,s)}return t}function zn(t,e){return lr(t,e,{merger:lw})}function lw(t,e,s){if(!tg(t))return;const n=e[t],r=s[t];re(n)&&re(r)?zn(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ba(r))}const Bd={"":t=>t,x:t=>t.x,y:t=>t.y};function cw(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function dw(t){const e=cw(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Kt(t,e){return(Bd[e]||(Bd[e]=dw(e)))(t)}function Yl(t){return t.charAt(0).toUpperCase()+t.slice(1)}const cr=t=>typeof t<"u",qt=t=>typeof t=="function",$d=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function hw(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ae=Math.PI,he=2*ae,uw=he+ae,$a=Number.POSITIVE_INFINITY,mw=ae/180,je=ae/2,ns=ae/4,Vd=ae*2/3,$t=Math.log10,xt=Math.sign;function Un(t,e,s){return Math.abs(t-e)<s}function Hd(t){const e=Math.round(t);t=Un(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor($t(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function gw(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function fw(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function nn(t){return!fw(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function xw(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function sg(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function it(t){return t*(ae/180)}function Gl(t){return t*(180/ae)}function zd(t){if(!be(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function ng(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*ae&&(i+=he),{angle:i,distance:r}}function Vo(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function pw(t,e){return(t-e+uw)%he-ae}function Ee(t){return(t%he+he)%he}function dr(t,e,s,n){const r=Ee(t),i=Ee(e),o=Ee(s),l=Ee(i-r),c=Ee(o-r),d=Ee(r-i),h=Ee(r-o);return r===i||r===o||n&&i===o||l>c&&d<h}function Ce(t,e,s){return Math.max(e,Math.min(s,t))}function bw(t){return Ce(t,-32768,32767)}function _t(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Kl(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const Mt=(t,e,s,n)=>Kl(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),yw=(t,e,s)=>Kl(t,s,n=>t[n][e]>=s);function vw(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const rg=["push","pop","shift","splice","unshift"];function jw(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),rg.forEach(s=>{const n="_onData"+Yl(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function Ud(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(rg.forEach(i=>{delete t[i]}),delete t._chartjs)}function ag(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ig=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function og(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,ig.call(window,()=>{n=!1,t.apply(e,s)}))}}function ww(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const ql=t=>t==="start"?"left":t==="end"?"right":"center",Me=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,kw=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function lg(t,e,s){const n=e.length;let r=0,i=n;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:m,max:u,minDefined:g,maxDefined:f}=o.getUserBounds();if(g){if(r=Math.min(Mt(c,h,m).lo,s?n:Mt(e,h,o.getPixelForValue(m)).lo),d){const x=c.slice(0,r+1).reverse().findIndex(p=>!ne(p[l.axis]));r-=Math.max(0,x)}r=Ce(r,0,n-1)}if(f){let x=Math.max(Mt(c,o.axis,u,!0).hi+1,s?0:Mt(e,h,o.getPixelForValue(u),!0).hi+1);if(d){const p=c.slice(x-1).findIndex(y=>!ne(y[l.axis]));x+=Math.max(0,p)}i=Ce(x,r,n)-r}else i=n-r}return{start:r,count:i}}function cg(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=r,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,r),i}const Zr=t=>t===0||t===1,Wd=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*he/s)),Yd=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*he/s)+1,Wn={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*je)+1,easeOutSine:t=>Math.sin(t*je),easeInOutSine:t=>-.5*(Math.cos(ae*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Zr(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Zr(t)?t:Wd(t,.075,.3),easeOutElastic:t=>Zr(t)?t:Yd(t,.075,.3),easeInOutElastic(t){return Zr(t)?t:t<.5?.5*Wd(t*2,.1125,.45):.5+.5*Yd(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Wn.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Wn.easeInBounce(t*2)*.5:Wn.easeOutBounce(t*2-1)*.5+.5};function Jl(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Gd(t){return Jl(t)?t:new or(t)}function Ui(t){return Jl(t)?t:new or(t).saturate(.5).darken(.1).hexString()}const Nw=["x","y","borderWidth","radius","tension"],Sw=["color","borderColor","backgroundColor"];function Cw(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Sw},numbers:{type:"number",properties:Nw}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function _w(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Kd=new Map;function Mw(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Kd.get(s);return n||(n=new Intl.NumberFormat(t,e),Kd.set(s,n)),n}function Or(t,e,s){return Mw(e,s).format(t)}const dg={values(t){return ue(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=Ew(t,s)}const o=$t(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Or(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor($t(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?dg.numeric.call(this,t,e,s):""}};function Ew(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var bi={formatters:dg};function Tw(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const _s=Object.create(null),Ho=Object.create(null);function Yn(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function Wi(t,e,s){return typeof e=="string"?lr(Yn(t,e),s):lr(Yn(t,""),e)}class Aw{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>Ui(r.backgroundColor),this.hoverBorderColor=(n,r)=>Ui(r.borderColor),this.hoverColor=(n,r)=>Ui(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Wi(this,e,s)}get(e){return Yn(this,e)}describe(e,s){return Wi(Ho,e,s)}override(e,s){return Wi(_s,e,s)}route(e,s,n,r){const i=Yn(this,e),o=Yn(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=o[r];return re(c)?Object.assign({},d,c):J(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var me=new Aw({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Cw,_w,Tw]);function Dw(t){return!t||ne(t.size)||ne(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Va(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function Pw(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const l=s.length;let c,d,h,m,u;for(c=0;c<l;c++)if(m=s[c],m!=null&&!ue(m))o=Va(t,r,i,o,m);else if(ue(m))for(d=0,h=m.length;d<h;d++)u=m[d],u!=null&&!ue(u)&&(o=Va(t,r,i,o,u));t.restore();const g=i.length/2;if(g>s.length){for(c=0;c<g;c++)delete r[i[c]];i.splice(0,g)}return o}function rs(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function qd(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function zo(t,e,s,n){hg(t,e,s,n,null)}function hg(t,e,s,n,r){let i,o,l,c,d,h,m,u;const g=e.pointStyle,f=e.rotation,x=e.radius;let p=(f||0)*mw;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(p),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),g){default:r?t.ellipse(s,n,r/2,x,0,0,he):t.arc(s,n,x,0,he),t.closePath();break;case"triangle":h=r?r/2:x,t.moveTo(s+Math.sin(p)*h,n-Math.cos(p)*x),p+=Vd,t.lineTo(s+Math.sin(p)*h,n-Math.cos(p)*x),p+=Vd,t.lineTo(s+Math.sin(p)*h,n-Math.cos(p)*x),t.closePath();break;case"rectRounded":d=x*.516,c=x-d,o=Math.cos(p+ns)*c,m=Math.cos(p+ns)*(r?r/2-d:c),l=Math.sin(p+ns)*c,u=Math.sin(p+ns)*(r?r/2-d:c),t.arc(s-m,n-l,d,p-ae,p-je),t.arc(s+u,n-o,d,p-je,p),t.arc(s+m,n+l,d,p,p+je),t.arc(s-u,n+o,d,p+je,p+ae),t.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*x,h=r?r/2:c,t.rect(s-h,n-c,2*h,2*c);break}p+=ns;case"rectRot":m=Math.cos(p)*(r?r/2:x),o=Math.cos(p)*x,l=Math.sin(p)*x,u=Math.sin(p)*(r?r/2:x),t.moveTo(s-m,n-l),t.lineTo(s+u,n-o),t.lineTo(s+m,n+l),t.lineTo(s-u,n+o),t.closePath();break;case"crossRot":p+=ns;case"cross":m=Math.cos(p)*(r?r/2:x),o=Math.cos(p)*x,l=Math.sin(p)*x,u=Math.sin(p)*(r?r/2:x),t.moveTo(s-m,n-l),t.lineTo(s+m,n+l),t.moveTo(s+u,n-o),t.lineTo(s-u,n+o);break;case"star":m=Math.cos(p)*(r?r/2:x),o=Math.cos(p)*x,l=Math.sin(p)*x,u=Math.sin(p)*(r?r/2:x),t.moveTo(s-m,n-l),t.lineTo(s+m,n+l),t.moveTo(s+u,n-o),t.lineTo(s-u,n+o),p+=ns,m=Math.cos(p)*(r?r/2:x),o=Math.cos(p)*x,l=Math.sin(p)*x,u=Math.sin(p)*(r?r/2:x),t.moveTo(s-m,n-l),t.lineTo(s+m,n+l),t.moveTo(s+u,n-o),t.lineTo(s-u,n+o);break;case"line":o=r?r/2:Math.cos(p)*x,l=Math.sin(p)*x,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(p)*(r?r/2:x),n+Math.sin(p)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Et(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function yi(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function vi(t){t.restore()}function Rw(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function Lw(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Ow(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ne(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Iw(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,h=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(l,h),t.stroke()}}function Fw(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Ms(t,e,s,n,r,i={}){const o=ue(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,Ow(t,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&Fw(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ne(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,n,i.maxWidth)),t.fillText(d,s,n,i.maxWidth),Iw(t,s,n,d,i),n+=Number(r.lineHeight);t.restore()}function hr(t,e){const{x:s,y:n,w:r,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*ae,ae,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,ae,je,!0),t.lineTo(s+r-o.bottomRight,n+i),t.arc(s+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,je,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-je,!0),t.lineTo(s+o.topLeft,n)}const Bw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$w=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Vw(t,e){const s=(""+t).match(Bw);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const Hw=t=>+t||0;function Xl(t,e){const s={},n=re(e),r=n?Object.keys(e):e,i=re(t)?n?o=>J(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=Hw(i(o));return s}function ug(t){return Xl(t,{top:"y",right:"x",bottom:"y",left:"x"})}function bs(t){return Xl(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Pe(t){const e=ug(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Se(t,e){t=t||{},e=e||me.font;let s=J(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=J(t.style,e.style);n&&!(""+n).match($w)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:J(t.family,e.family),lineHeight:Vw(J(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:J(t.weight,e.weight),string:""};return r.string=Dw(r),r}function On(t,e,s,n){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function zw(t,e,s){const{min:n,max:r}=t,i=eg(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function es(t,e){return Object.assign(Object.create(t),e)}function Ql(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=xg("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>Ql([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return gg(l,c,()=>Xw(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Xd(l).includes(c)},ownKeys(l){return Xd(l)},set(l,c,d){const h=l._storage||(l._storage=r());return l[c]=h[c]=d,delete l._keys,!0}})}function rn(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:mg(t,n),setContext:i=>rn(t,i,s,n),override:i=>rn(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return gg(i,o,()=>Ww(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function mg(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:qt(s)?s:()=>s,isIndexable:qt(n)?n:()=>n}}const Uw=(t,e)=>t?t+Yl(e):e,Zl=(t,e)=>re(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gg(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function Ww(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=t;let l=n[e];return qt(l)&&o.isScriptable(e)&&(l=Yw(e,l,t,s)),ue(l)&&l.length&&(l=Gw(e,l,t,o.isIndexable)),Zl(e,l)&&(l=rn(l,r,i&&i[e],o)),l}function Yw(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),Zl(t,c)&&(c=ec(r._scopes,r,t,c)),c}function Gw(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(re(e[0])){const c=e,d=r._scopes.filter(h=>h!==c);e=[];for(const h of c){const m=ec(d,r,t,h);e.push(rn(m,i,o&&o[t],l))}}return e}function fg(t,e,s){return qt(t)?t(e,s):t}const Kw=(t,e)=>t===!0?e:typeof t=="string"?Kt(e,t):void 0;function qw(t,e,s,n,r){for(const i of e){const o=Kw(s,i);if(o){t.add(o);const l=fg(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function ec(t,e,s,n){const r=e._rootScopes,i=fg(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=Jd(l,o,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=Jd(l,o,i,c,n),c===null)?!1:Ql(Array.from(l),[""],r,i,()=>Jw(e,s,n))}function Jd(t,e,s,n,r){for(;s;)s=qw(t,e,s,n,r);return s}function Jw(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return ue(r)&&re(s)?s:r||{}}function Xw(t,e,s,n){let r;for(const i of e)if(r=xg(Uw(i,t),s),typeof r<"u")return Zl(t,r)?ec(s,n,t,r):r}function xg(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Xd(t){let e=t._keys;return e||(e=t._keys=Qw(t._scopes)),e}function Qw(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function pg(t,e,s,n){const{iScale:r}=t,{key:i="r"}=this._parsing,o=new Array(n);let l,c,d,h;for(l=0,c=n;l<c;++l)d=l+s,h=e[d],o[l]={r:r.parse(Kt(h,i),d)};return o}const Zw=Number.EPSILON||1e-14,an=(t,e)=>e<t.length&&!t[e].skip&&t[e],bg=t=>t==="x"?"y":"x";function ek(t,e,s,n){const r=t.skip?e:t,i=e,o=s.skip?e:s,l=Vo(i,r),c=Vo(o,i);let d=l/(l+c),h=c/(l+c);d=isNaN(d)?0:d,h=isNaN(h)?0:h;const m=n*d,u=n*h;return{previous:{x:i.x-m*(o.x-r.x),y:i.y-m*(o.y-r.y)},next:{x:i.x+u*(o.x-r.x),y:i.y+u*(o.y-r.y)}}}function tk(t,e,s){const n=t.length;let r,i,o,l,c,d=an(t,0);for(let h=0;h<n-1;++h)if(c=d,d=an(t,h+1),!(!c||!d)){if(Un(e[h],0,Zw)){s[h]=s[h+1]=0;continue}r=s[h]/e[h],i=s[h+1]/e[h],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),s[h]=r*o*e[h],s[h+1]=i*o*e[h])}}function sk(t,e,s="x"){const n=bg(s),r=t.length;let i,o,l,c=an(t,0);for(let d=0;d<r;++d){if(o=l,l=c,c=an(t,d+1),!l)continue;const h=l[s],m=l[n];o&&(i=(h-o[s])/3,l[`cp1${s}`]=h-i,l[`cp1${n}`]=m-i*e[d]),c&&(i=(c[s]-h)/3,l[`cp2${s}`]=h+i,l[`cp2${n}`]=m+i*e[d])}}function nk(t,e="x"){const s=bg(e),n=t.length,r=Array(n).fill(0),i=Array(n);let o,l,c,d=an(t,0);for(o=0;o<n;++o)if(l=c,c=d,d=an(t,o+1),!!c){if(d){const h=d[e]-c[e];r[o]=h!==0?(d[s]-c[s])/h:0}i[o]=l?d?xt(r[o-1])!==xt(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}tk(t,r,i),sk(t,i,e)}function ea(t,e,s){return Math.max(Math.min(t,s),e)}function rk(t,e){let s,n,r,i,o,l=Et(t[0],e);for(s=0,n=t.length;s<n;++s)o=i,i=l,l=s<n-1&&Et(t[s+1],e),i&&(r=t[s],o&&(r.cp1x=ea(r.cp1x,e.left,e.right),r.cp1y=ea(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=ea(r.cp2x,e.left,e.right),r.cp2y=ea(r.cp2y,e.top,e.bottom)))}function ak(t,e,s,n,r){let i,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")nk(t,r);else{let d=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=ek(d,l,t[Math.min(i+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&rk(t,s)}function tc(){return typeof window<"u"&&typeof document<"u"}function sc(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ha(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const ji=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function ik(t,e){return ji(t).getPropertyValue(e)}const ok=["top","right","bottom","left"];function ys(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=ok[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const lk=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function ck(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let o=!1,l,c;if(lk(r,i,t.target))l=r,c=i;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function ls(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=ji(s),i=r.boxSizing==="border-box",o=ys(r,"padding"),l=ys(r,"border","width"),{x:c,y:d,box:h}=ck(t,s),m=o.left+(h&&l.left),u=o.top+(h&&l.top);let{width:g,height:f}=e;return i&&(g-=o.width+l.width,f-=o.height+l.height),{x:Math.round((c-m)/g*s.width/n),y:Math.round((d-u)/f*s.height/n)}}function dk(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&sc(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),l=ji(i),c=ys(l,"border","width"),d=ys(l,"padding");e=o.width-d.width-c.width,s=o.height-d.height-c.height,n=Ha(l.maxWidth,i,"clientWidth"),r=Ha(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||$a,maxHeight:r||$a}}const ta=t=>Math.round(t*10)/10;function hk(t,e,s,n){const r=ji(t),i=ys(r,"margin"),o=Ha(r.maxWidth,t,"clientWidth")||$a,l=Ha(r.maxHeight,t,"clientHeight")||$a,c=dk(t,e,s);let{width:d,height:h}=c;if(r.boxSizing==="content-box"){const u=ys(r,"border","width"),g=ys(r,"padding");d-=g.width+u.width,h-=g.height+u.height}return d=Math.max(0,d-i.width),h=Math.max(0,n?d/n:h-i.height),d=ta(Math.min(d,o,c.maxWidth)),h=ta(Math.min(h,l,c.maxHeight)),d&&!h&&(h=ta(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&h>c.height&&(h=c.height,d=ta(Math.floor(h*n))),{width:d,height:h}}function Qd(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=n,o.height=r,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const uk=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};tc()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Zd(t,e){const s=ik(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function cs(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function mk(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function gk(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=cs(t,r,s),l=cs(r,i,s),c=cs(i,e,s),d=cs(o,l,s),h=cs(l,c,s);return cs(d,h,s)}const fk=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},xk=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Gs(t,e,s){return t?fk(e,s):xk()}function yg(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function vg(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function jg(t){return t==="angle"?{between:dr,compare:pw,normalize:Ee}:{between:_t,compare:(e,s)=>e-s,normalize:e=>e}}function eh({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function pk(t,e,s){const{property:n,start:r,end:i}=s,{between:o,normalize:l}=jg(n),c=e.length;let{start:d,end:h,loop:m}=t,u,g;if(m){for(d+=c,h+=c,u=0,g=c;u<g&&o(l(e[d%c][n]),r,i);++u)d--,h--;d%=c,h%=c}return h<d&&(h+=c),{start:d,end:h,loop:m,style:t.style}}function wg(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,o=e.length,{compare:l,between:c,normalize:d}=jg(n),{start:h,end:m,loop:u,style:g}=pk(t,e,s),f=[];let x=!1,p=null,y,v,S;const C=()=>c(r,S,y)&&l(r,S)!==0,N=()=>l(i,y)===0||c(i,S,y),M=()=>x||C(),k=()=>!x||N();for(let w=h,_=h;w<=m;++w)v=e[w%o],!v.skip&&(y=d(v[n]),y!==S&&(x=c(y,r,i),p===null&&M()&&(p=l(y,r)===0?w:_),p!==null&&k()&&(f.push(eh({start:p,end:w,loop:u,count:o,style:g})),p=null),_=w,S=y));return p!==null&&f.push(eh({start:p,end:m,loop:u,count:o,style:g})),f}function kg(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=wg(n[r],t.points,e);i.length&&s.push(...i)}return s}function bk(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function yk(t,e,s,n){const r=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&i.push({start:e%r,end:o%r,loop:n}),i}function vk(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:o,end:l}=bk(s,r,i,n);if(n===!0)return th(t,[{start:o,end:l,loop:i}],s,e);const c=l<o?l+r:l,d=!!t._fullLoop&&o===0&&l===r-1;return th(t,yk(s,o,c,d),s,e)}function th(t,e,s,n){return!n||!n.setContext||!s?e:jk(t,e,s,n)}function jk(t,e,s,n){const r=t._chart.getContext(),i=sh(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=s.length,d=[];let h=i,m=e[0].start,u=m;function g(f,x,p,y){const v=l?-1:1;if(f!==x){for(f+=c;s[f%c].skip;)f-=v;for(;s[x%c].skip;)x+=v;f%c!==x%c&&(d.push({start:f%c,end:x%c,loop:p,style:y}),h=y,m=x%c)}}for(const f of e){m=l?m:f.start;let x=s[m%c],p;for(u=m+1;u<=f.end;u++){const y=s[u%c];p=sh(n.setContext(es(r,{type:"segment",p0:x,p1:y,p0DataIndex:(u-1)%c,p1DataIndex:u%c,datasetIndex:o}))),wk(p,h)&&g(m,u-1,f.loop,h),x=y,h=p}m<u-1&&g(m,u-1,f.loop,h)}return d}function sh(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function wk(t,e){if(!e)return!1;const s=[],n=function(r,i){return Jl(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function sa(t,e,s){return t.options.clip?t[s]:e[s]}function kk(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:sa(s,e,"left"),right:sa(s,e,"right"),top:sa(n,e,"top"),bottom:sa(n,e,"bottom")}:e}function Ng(t,e){const s=e._clip;if(s.disabled)return!1;const n=kk(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Nk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ig.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wt=new Nk;const nh="transparent",Sk={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Gd(t||nh),r=n.valid&&Gd(e||nh);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class Ck{constructor(e,s,n,r){const i=s[n];r=On([e.to,r,i,e.from]);const o=On([e.from,i,r]);this._active=!0,this._fn=e.fn||Sk[e.type||typeof o],this._easing=Wn[e.easing]||Wn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=On([e.to,s,r,e.from]),this._from=On([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class Sg{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!re(e))return;const s=Object.keys(me.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!re(i))return;const o={};for(const l of s)o[l]=i[l];(ue(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=Mk(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&_k(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const h=s[d];let m=i[d];const u=n.get(d);if(m)if(u&&m.active()){m.update(u,h,l);continue}else m.cancel();if(!u||!u.duration){e[d]=h;continue}i[d]=m=new Ck(u,e,d,h),r.push(m)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return wt.add(this._chart,n),!0}}function _k(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function Mk(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function rh(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function Ek(t,e,s){if(s===!1)return!1;const n=rh(t,s),r=rh(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function Tk(t){let e,s,n,r;return re(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function Cg(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function ah(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let o,l,c,d;if(e===null)return;let h=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(h=!0,n.all)continue;break}d=t.values[c],be(d)&&(i||e===0||xt(e)===xt(d))&&(e+=d)}return!h&&!n.all?0:e}function Ak(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,h;for(c=0,d=o.length;c<d;++c)h=o[c],l[c]={[r]:h,[i]:t[h]};return l}function Yi(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Dk(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Pk(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function Rk(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function ih(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function oh(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,d=o.axis,h=Dk(i,o,n),m=e.length;let u;for(let g=0;g<m;++g){const f=e[g],{[c]:x,[d]:p}=f,y=f._stacks||(f._stacks={});u=y[d]=Rk(r,h,x),u[l]=p,u._top=ih(u,o,!0,n.type),u._bottom=ih(u,o,!1,n.type);const v=u._visualValues||(u._visualValues={});v[l]=p}}function Gi(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function Lk(t,e){return es(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Ok(t,e,s){return es(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Cn(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const Ki=t=>t==="reset"||t==="none",lh=(t,e)=>e?t:Object.assign({},t),Ik=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Cg(s,!0),values:null};class ot{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Yi(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Cn(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(m,u,g,f)=>m==="x"?u:m==="r"?f:g,i=s.xAxisID=J(n.xAxisID,Gi(e,"x")),o=s.yAxisID=J(n.yAxisID,Gi(e,"y")),l=s.rAxisID=J(n.rAxisID,Gi(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,i,o,l),h=s.vAxisID=r(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ud(this._data,this),e._stacked&&Cn(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(re(s)){const r=this._cachedMeta;this._data=Ak(s,r)}else if(n!==s){if(n){Ud(n,this);const r=this._cachedMeta;Cn(r),r._parsed=[]}s&&Object.isExtensible(s)&&jw(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=Yi(s.vScale,s),s.stack!==n.stack&&(r=!0,Cn(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(oh(this,s._parsed),s._stacked=Yi(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],h,m,u;if(this._parsing===!1)n._parsed=r,n._sorted=!0,u=r;else{ue(r[e])?u=this.parseArrayData(n,r,e,s):re(r[e])?u=this.parseObjectData(n,r,e,s):u=this.parsePrimitiveData(n,r,e,s);const g=()=>m[l]===null||d&&m[l]<d[l];for(h=0;h<s;++h)n._parsed[h+e]=m=u[h],c&&(g()&&(c=!1),d=m);n._sorted=c}o&&oh(this,u)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,d=i.getLabels(),h=i===o,m=new Array(r);let u,g,f;for(u=0,g=r;u<g;++u)f=u+n,m[u]={[l]:h||i.parse(d[f],f),[c]:o.parse(s[f],f)};return m}parseArrayData(e,s,n,r){const{xScale:i,yScale:o}=e,l=new Array(r);let c,d,h,m;for(c=0,d=r;c<d;++c)h=c+n,m=s[h],l[c]={x:i.parse(m[0],h),y:o.parse(m[1],h)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let h,m,u,g;for(h=0,m=r;h<m;++h)u=h+n,g=s[u],d[h]={x:i.parse(Kt(g,l),u),y:o.parse(Kt(g,c),u)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:Cg(r,!0),values:s._stacks[e.axis]._visualValues};return ah(l,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let o=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=ah(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=Ik(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:m}=Pk(l);let u,g;function f(){g=r[u];const x=g[l.axis];return!be(g[e.axis])||h>x||m<x}for(u=0;u<o&&!(!f()&&(this.updateRangeFromParsed(d,e,g,c),i));++u);if(i){for(u=o-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(d,e,g,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=s.length;r<i;++r)o=s[r][e.axis],be(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=Tk(J(this.options.clip,Ek(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(e,i,l,c),h=l;h<l+c;++h){const m=r[h];m.hidden||(m.active&&d?o.push(m):m.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Ok(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Lk(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&cr(n);if(l)return lh(l,c);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),m=r?[`${e}Hover`,"hover",e,""]:[e,""],u=d.getOptionScopes(this.getDataset(),h),g=Object.keys(me.elements[e]),f=()=>this.getContext(n,r,s),x=d.resolveNamedOptions(u,g,f,m);return x.$shared&&(x.$shared=c,i[o]=Object.freeze(lh(x,c))),x}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const h=this.chart.config,m=h.datasetAnimationScopeKeys(this._type,s),u=h.getOptionScopes(this.getDataset(),m);c=h.createResolver(u,this.getContext(e,n,s))}const d=new Sg(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Ki(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,r){Ki(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!Ki(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,i=s.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,o=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=o;l--)d[l]=d[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&Cn(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}B(ot,"defaults",{}),B(ot,"datasetElementType",null),B(ot,"dataElementType",null);function Fk(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let r=0,i=s.length;r<i;r++)n=n.concat(s[r].controller.getAllParsedValues(t));t._cache.$bar=ag(n.sort((r,i)=>r-i))}return t._cache.$bar}function Bk(t){const e=t.iScale,s=Fk(e,t.type);let n=e._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(cr(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,i=s.length;r<i;++r)o=e.getPixelForValue(s[r]),c();for(l=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),c();return n}function $k(t,e,s,n){const r=s.barThickness;let i,o;return ne(r)?(i=e.min*s.categoryPercentage,o=s.barPercentage):(i=r*n,o=1),{chunk:i/n,ratio:o,start:e.pixels[t]-i/2}}function Vk(t,e,s,n){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,l=t<r.length-1?r[t+1]:null;const c=s.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/n,ratio:s.barPercentage,start:d}}function Hk(t,e,s,n){const r=s.parse(t[0],n),i=s.parse(t[1],n),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[s.axis]=d,e._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function _g(t,e,s,n){return ue(t)?Hk(t,e,s,n):e[s.axis]=s.parse(t,n),e}function ch(t,e,s,n){const r=t.iScale,i=t.vScale,o=r.getLabels(),l=r===i,c=[];let d,h,m,u;for(d=s,h=s+n;d<h;++d)u=e[d],m={},m[r.axis]=l||r.parse(o[d],d),c.push(_g(u,m,i,d));return c}function qi(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function zk(t,e,s){return t!==0?xt(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function Uk(t){let e,s,n,r,i;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(r="end",i="start"):(r="start",i="end"),{start:s,end:n,reverse:e,top:r,bottom:i}}function Wk(t,e,s,n){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:h}=Uk(t);r==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?r=d:(s._bottom||0)===n?r=h:(i[dh(h,o,l,c)]=!0,r=d)),i[dh(r,o,l,c)]=!0,t.borderSkipped=i}function dh(t,e,s,n){return n?(t=Yk(t,e,s),t=hh(t,s,e)):t=hh(t,e,s),t}function Yk(t,e,s){return t===e?s:t===s?e:t}function hh(t,e,s){return t==="start"?e:t==="end"?s:t}function Gk(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class Gn extends ot{parsePrimitiveData(e,s,n,r){return ch(e,s,n,r)}parseArrayData(e,s,n,r){return ch(e,s,n,r)}parseObjectData(e,s,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,h=o.axis==="x"?l:c,m=[];let u,g,f,x;for(u=n,g=n+r;u<g;++u)x=s[u],f={},f[i.axis]=i.parse(Kt(x,d),u),m.push(_g(Kt(x,h),f,o,u));return m}updateRangeFromParsed(e,s,n,r){super.updateRangeFromParsed(e,s,n,r);const i=n._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:r}=s,i=this.getParsed(e),o=i._custom,l=qi(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),h=this._getRuler(),{sharedOptions:m,includeOptions:u}=this._getSharedOptions(s,r);for(let g=s;g<s+n;g++){const f=this.getParsed(g),x=i||ne(f[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),p=this._calculateBarIndexPixels(g,h),y=(f._stacks||{})[l.axis],v={horizontal:d,base:x.base,enableBorderRadius:!y||qi(f._custom)||o===y._top||o===y._bottom,x:d?x.head:p.center,y:d?p.center:x.head,height:d?p.size:Math.abs(x.size),width:d?Math.abs(x.size):p.size};u&&(v.options=m||this.resolveDataElementOptions(g,e[g].active?"active":r));const S=v.options||e[g].options;Wk(v,S,y,o),Gk(v,S,h.ratio),this.updateElement(e[g],g,v,r)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),i=n.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[n.axis],d=h=>{const m=h._parsed.find(g=>g[n.axis]===c),u=m&&m[h.vScale.axis];if(ne(u)||isNaN(u))return!0};for(const h of r)if(!(s!==void 0&&d(h))&&((i===!1||o.indexOf(h.stack)===-1||i===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[J(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const r=this._getStacks(e,n),i=s!==void 0?r.indexOf(s):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,r=[];let i,o;for(i=0,o=s.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const l=e.barThickness;return{min:l||Bk(s),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),d=c._custom,h=qi(d);let m=c[s.axis],u=0,g=n?this.applyStack(s,c,n):m,f,x;g!==m&&(u=g-m,g=m),h&&(m=d.barStart,g=d.barEnd-d.barStart,m!==0&&xt(m)!==xt(d.barEnd)&&(u=0),u+=m);const p=!ne(i)&&!h?i:u;let y=s.getPixelForValue(p);if(this.chart.getDataVisibility(e)?f=s.getPixelForValue(u+g):f=y,x=f-y,Math.abs(x)<o){x=zk(x,s,l)*o,m===l&&(y-=x/2);const v=s.getPixelForDecimal(0),S=s.getPixelForDecimal(1),C=Math.min(v,S),N=Math.max(v,S);y=Math.max(Math.min(y,N),C),f=y+x,n&&!h&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(f)-s.getValueForPixel(y))}if(y===s.getPixelForValue(l)){const v=xt(x)*s.getLineWidthForValue(l)/2;y+=v,x-=v}return{size:x,base:y,head:f,center:f+x/2}}_calculateBarIndexPixels(e,s){const n=s.scale,r=this.options,i=r.skipNull,o=J(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(s.grouped){const h=i?this._getStackCount(e):s.stackCount,m=r.barThickness==="flex"?Vk(e,s,r,h*d):$k(e,s,r,h*d),u=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(J(u,this.getFirstScaleIdForIndexAxis())),f=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+g;l=m.start+m.chunk*f+m.chunk/2,c=Math.min(o,m.chunk*m.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(o,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)this.getParsed(i)[s.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}B(Gn,"id","bar"),B(Gn,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),B(Gn,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ka extends ot{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,r){const i=super.parsePrimitiveData(e,s,n,r);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+n).radius;return i}parseArrayData(e,s,n,r){const i=super.parseArrayData(e,s,n,r);for(let o=0;o<i.length;o++){const l=s[n+o];i[o]._custom=J(l[2],this.resolveDataElementOptions(o+n).radius)}return i}parseObjectData(e,s,n,r){const i=super.parseObjectData(e,s,n,r);for(let o=0;o<i.length;o++){const l=s[n+o];i[o]._custom=J(l&&l.r&&+l.r,this.resolveDataElementOptions(o+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=s,o=this.getParsed(e),l=r.getLabelForValue(o.x),c=i.getLabelForValue(o.y),d=o._custom;return{label:n[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,r){const i=r==="reset",{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(s,r),h=o.axis,m=l.axis;for(let u=s;u<s+n;u++){const g=e[u],f=!i&&this.getParsed(u),x={},p=x[h]=i?o.getPixelForDecimal(.5):o.getPixelForValue(f[h]),y=x[m]=i?l.getBasePixel():l.getPixelForValue(f[m]);x.skip=isNaN(p)||isNaN(y),d&&(x.options=c||this.resolveDataElementOptions(u,g.active?"active":r),i&&(x.options.radius=0)),this.updateElement(g,u,x,r)}}resolveDataElementOptions(e,s){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,s);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return s!=="active"&&(r.radius=0),r.radius+=J(n&&n._custom,i),r}}B(ka,"id","bubble"),B(ka,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),B(ka,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Kk(t,e,s){let n=1,r=1,i=0,o=0;if(e<he){const l=t,c=l+e,d=Math.cos(l),h=Math.sin(l),m=Math.cos(c),u=Math.sin(c),g=(S,C,N)=>dr(S,l,c,!0)?1:Math.max(C,C*s,N,N*s),f=(S,C,N)=>dr(S,l,c,!0)?-1:Math.min(C,C*s,N,N*s),x=g(0,d,m),p=g(je,h,u),y=f(ae,d,m),v=f(ae+je,h,u);n=(x-y)/2,r=(p-v)/2,i=-(x+y)/2,o=-(p+v)/2}return{ratioX:n,ratioY:r,offsetX:i,offsetY:o}}class Vt extends ot{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let i=c=>+n[c];if(re(n[e])){const{key:c="value"}=this._parsing;i=d=>+Kt(n[d],c)}let o,l;for(o=e,l=e+s;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return it(this.options.rotation-90)}_getCircumference(){return it(this.options.circumference)}_getRotationExtents(){let e=he,s=-he;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),s=Math.max(s,i+o)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-o)/2,0),c=Math.min(iw(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:h,rotation:m}=this._getRotationExtents(),{ratioX:u,ratioY:g,offsetX:f,offsetY:x}=Kk(m,h,c),p=(n.width-o)/u,y=(n.height-o)/g,v=Math.max(Math.min(p,y)/2,0),S=eg(this.options.radius,v),C=Math.max(S*c,0),N=(S-C)/this._getVisibleDatasetWeightTotal();this.offsetX=f*S,this.offsetY=x*S,r.total=this.calculateTotal(),this.outerRadius=S-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,s){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/he)}updateElements(e,s,n,r){const i=r==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,h=(l.left+l.right)/2,m=(l.top+l.bottom)/2,u=i&&d.animateScale,g=u?0:this.innerRadius,f=u?0:this.outerRadius,{sharedOptions:x,includeOptions:p}=this._getSharedOptions(s,r);let y=this._getRotation(),v;for(v=0;v<s;++v)y+=this._circumference(v,i);for(v=s;v<s+n;++v){const S=this._circumference(v,i),C=e[v],N={x:h+this.offsetX,y:m+this.offsetY,startAngle:y,endAngle:y+S,circumference:S,outerRadius:f,innerRadius:g};p&&(N.options=x||this.resolveDataElementOptions(v,C.active?"active":r)),y+=S,this.updateElement(C,v,N,r)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,r;for(r=0;r<s.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!s[r].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?he*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Or(s._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let s=0;const n=this.chart;let r,i,o,l,c;if(!e){for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),e=o.data,l=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(s=Math.max(s,c.borderWidth||0,c.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,r=e.length;n<r;++n){const i=this.resolveDataElementOptions(n);s=Math.max(s,i.offset||0,i.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(J(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}B(Vt,"id","doughnut"),B(Vt,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),B(Vt,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),B(Vt,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return s.labels.map((i,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}});class Na extends ot{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=s,o=this.chart._animationsDisabled;let{start:l,count:c}=lg(s,r,o);this._drawStart=l,this._drawCount=c,cg(s)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:d},e),this.updateElements(r,l,c,e)}updateElements(e,s,n,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:m}=this._getSharedOptions(s,r),u=o.axis,g=l.axis,{spanGaps:f,segment:x}=this.options,p=nn(f)?f:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||r==="none",v=s+n,S=e.length;let C=s>0&&this.getParsed(s-1);for(let N=0;N<S;++N){const M=e[N],k=y?M:{};if(N<s||N>=v){k.skip=!0;continue}const w=this.getParsed(N),_=ne(w[g]),E=k[u]=o.getPixelForValue(w[u],N),D=k[g]=i||_?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,w,c):w[g],N);k.skip=isNaN(E)||isNaN(D)||_,k.stop=N>0&&Math.abs(w[u]-C[u])>p,x&&(k.parsed=w,k.raw=d.data[N]),m&&(k.options=h||this.resolveDataElementOptions(N,M.active?"active":r)),y||this.updateElement(M,N,k,r),C=w}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}B(Na,"id","line"),B(Na,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),B(Na,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Kn extends ot{constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Or(s._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,s,n,r){return pg.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,r)=>{const i=this.getParsed(r).r;!isNaN(i)&&this.chart.getDataVisibility(r)&&(i<s.min&&(s.min=i),i>s.max&&(s.max=i))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,n=e.options,r=Math.min(s.right-s.left,s.bottom-s.top),i=Math.max(r/2,0),o=Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0),l=(i-o)/e.getVisibleDatasetCount();this.outerRadius=i-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,s,n,r){const i=r==="reset",o=this.chart,c=o.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,m=d.yCenter,u=d.getIndexAngle(0)-.5*ae;let g=u,f;const x=360/this.countVisibleElements();for(f=0;f<s;++f)g+=this._computeAngle(f,r,x);for(f=s;f<s+n;f++){const p=e[f];let y=g,v=g+this._computeAngle(f,r,x),S=o.getDataVisibility(f)?d.getDistanceFromCenterForValue(this.getParsed(f).r):0;g=v,i&&(c.animateScale&&(S=0),c.animateRotate&&(y=v=u));const C={x:h,y:m,innerRadius:0,outerRadius:S,startAngle:y,endAngle:v,options:this.resolveDataElementOptions(f,p.active?"active":r)};this.updateElement(p,f,C,r)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?it(this.resolveDataElementOptions(e,s).angle||n):0}}B(Kn,"id","polarArea"),B(Kn,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),B(Kn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return s.labels.map((i,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Uo extends Vt{}B(Uo,"id","pie"),B(Uo,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class qn extends ot{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return pg.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta,n=s.dataset,r=s.data||[],i=s.iScale.getLabels();if(n.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===r.length,options:o};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){const i=this._cachedMeta.rScale,o=r==="reset";for(let l=s;l<s+n;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":r),h=i.getPointPositionForValue(l,this.getParsed(l).r),m=o?i.xCenter:h.x,u=o?i.yCenter:h.y,g={x:m,y:u,angle:h.angle,skip:isNaN(m)||isNaN(u),options:d};this.updateElement(c,l,g,r)}}}B(qn,"id","radar"),B(qn,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),B(qn,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Sa extends ot{getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=s,o=this.getParsed(e),l=r.getLabelForValue(o.x),c=i.getLabelForValue(o.y);return{label:n[e]||"",value:"("+l+", "+c+")"}}update(e){const s=this._cachedMeta,{data:n=[]}=s,r=this.chart._animationsDisabled;let{start:i,count:o}=lg(s,n,r);if(this._drawStart=i,this._drawCount=o,cg(s)&&(i=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=s;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=n;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:d},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(s,r),m=this.getSharedOptions(h),u=this.includeOptions(r,m),g=o.axis,f=l.axis,{spanGaps:x,segment:p}=this.options,y=nn(x)?x:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||r==="none";let S=s>0&&this.getParsed(s-1);for(let C=s;C<s+n;++C){const N=e[C],M=this.getParsed(C),k=v?N:{},w=ne(M[f]),_=k[g]=o.getPixelForValue(M[g],C),E=k[f]=i||w?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,M,c):M[f],C);k.skip=isNaN(_)||isNaN(E)||w,k.stop=C>0&&Math.abs(M[g]-S[g])>y,p&&(k.parsed=M,k.raw=d.data[C]),u&&(k.options=m||this.resolveDataElementOptions(C,N.active?"active":r)),v||this.updateElement(N,C,k,r),S=M}this.updateSharedOptions(m,r,h)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let l=0;for(let c=s.length-1;c>=0;--c)l=Math.max(l,s[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}}B(Sa,"id","scatter"),B(Sa,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),B(Sa,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var qk=Object.freeze({__proto__:null,BarController:Gn,BubbleController:ka,DoughnutController:Vt,LineController:Na,PieController:Uo,PolarAreaController:Kn,RadarController:qn,ScatterController:Sa});function as(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class nc{constructor(e){B(this,"options");this.options=e||{}}static override(e){Object.assign(nc.prototype,e)}init(){}formats(){return as()}parse(){return as()}format(){return as()}add(){return as()}diff(){return as()}startOf(){return as()}endOf(){return as()}}var Jk={_date:nc};function Xk(t,e,s,n){const{controller:r,data:i,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const d=l._reversePixels?yw:Mt;if(n){if(r._sharedOptions){const h=i[0],m=typeof h.getRange=="function"&&h.getRange(e);if(m){const u=d(i,e,s-m),g=d(i,e,s+m);return{lo:u.lo,hi:g.hi}}}}else{const h=d(i,e,s);if(c){const{vScale:m}=r._cachedMeta,{_parsed:u}=t,g=u.slice(0,h.lo+1).reverse().findIndex(x=>!ne(x[m.axis]));h.lo-=Math.max(0,g);const f=u.slice(h.hi).findIndex(x=>!ne(x[m.axis]));h.hi+=Math.max(0,f)}return h}}return{lo:0,hi:i.length-1}}function wi(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:h}=i[l],{lo:m,hi:u}=Xk(i[l],e,o,r);for(let g=m;g<=u;++g){const f=h[g];f.skip||n(f,d,g)}}}function Qk(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Ji(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||wi(t,s,e,function(l,c,d){!r&&!Et(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function Zk(t,e,s,n){let r=[];function i(o,l,c){const{startAngle:d,endAngle:h}=o.getProps(["startAngle","endAngle"],n),{angle:m}=ng(o,{x:e.x,y:e.y});dr(m,d,h)&&r.push({element:o,datasetIndex:l,index:c})}return wi(t,s,e,i),r}function eN(t,e,s,n,r,i){let o=[];const l=Qk(s);let c=Number.POSITIVE_INFINITY;function d(h,m,u){const g=h.inRange(e.x,e.y,r);if(n&&!g)return;const f=h.getCenterPoint(r);if(!(!!i||t.isPointInArea(f))&&!g)return;const p=l(e,f);p<c?(o=[{element:h,datasetIndex:m,index:u}],c=p):p===c&&o.push({element:h,datasetIndex:m,index:u})}return wi(t,s,e,d),o}function Xi(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?Zk(t,e,s,r):eN(t,e,s,n,r,i)}function uh(t,e,s,n,r){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return wi(t,s,e,(c,d,h)=>{c[o]&&c[o](e[s],r)&&(i.push({element:c,datasetIndex:d,index:h}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var tN={modes:{index(t,e,s,n){const r=ls(e,t),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?Ji(t,r,i,n,o):Xi(t,r,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const h=l[0].index,m=d.data[h];m&&!m.skip&&c.push({element:m,datasetIndex:d.index,index:h})}),c):[]},dataset(t,e,s,n){const r=ls(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?Ji(t,r,i,n,o):Xi(t,r,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let h=0;h<d.length;++h)l.push({element:d[h],datasetIndex:c,index:h})}return l},point(t,e,s,n){const r=ls(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return Ji(t,r,i,n,o)},nearest(t,e,s,n){const r=ls(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return Xi(t,r,i,s.intersect,n,o)},x(t,e,s,n){const r=ls(e,t);return uh(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=ls(e,t);return uh(t,r,"y",s.intersect,n)}}};const Mg=["left","top","right","bottom"];function _n(t,e){return t.filter(s=>s.pos===e)}function mh(t,e){return t.filter(s=>Mg.indexOf(s.pos)===-1&&s.box.axis===e)}function Mn(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function sN(t){const e=[];let s,n,r,i,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return e}function nN(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!Mg.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function rN(t,e){const s=nN(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],h=d&&l.stackWeight/d.weight;l.horizontal?(l.width=h?h*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=h?h*r:c&&e.availableHeight)}return s}function aN(t){const e=sN(t),s=Mn(e.filter(d=>d.box.fullSize),!0),n=Mn(_n(e,"left"),!0),r=Mn(_n(e,"right")),i=Mn(_n(e,"top"),!0),o=Mn(_n(e,"bottom")),l=mh(e,"x"),c=mh(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:_n(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function gh(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function Eg(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function iN(t,e,s,n){const{pos:r,box:i}=s,o=t.maxPadding;if(!re(r)){s.size&&(t[r]-=s.size);const m=n[s.stack]||{size:0,count:1};m.size=Math.max(m.size,s.horizontal?i.height:i.width),s.size=m.size/m.count,t[r]+=s.size}i.getPadding&&Eg(o,i.getPadding());const l=Math.max(0,e.outerWidth-gh(o,t,"left","right")),c=Math.max(0,e.outerHeight-gh(o,t,"top","bottom")),d=l!==t.w,h=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:h}:{same:h,other:d}}function oN(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function lN(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function In(t,e,s,n){const r=[];let i,o,l,c,d,h;for(i=0,o=t.length,d=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,lN(l.horizontal,e));const{same:m,other:u}=iN(e,s,l,n);d|=m&&r.length,h=h||u,c.fullSize||r.push(l)}return d&&In(r,e,s,n)||h}function na(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function fh(t,e,s,n){const r=s.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,d=n[l.stack]||{placed:0,weight:1},h=l.stackWeight/d.weight||1;if(l.horizontal){const m=e.w*h,u=d.size||c.height;cr(d.start)&&(o=d.start),c.fullSize?na(c,r.left,o,s.outerWidth-r.right-r.left,u):na(c,e.left+d.placed,o,m,u),d.start=o,d.placed+=m,o=c.bottom}else{const m=e.h*h,u=d.size||c.width;cr(d.start)&&(i=d.start),c.fullSize?na(c,i,r.top,u,s.outerHeight-r.bottom-r.top):na(c,i,e.top+d.placed,u,m),d.start=i,d.placed+=m,i=c.right}}e.x=i,e.y=o}var Ae={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=Pe(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=aN(t.boxes),c=l.vertical,d=l.horizontal;ie(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=c.reduce((x,p)=>p.box.options&&p.box.options.display===!1?x:x+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),u=Object.assign({},r);Eg(u,Pe(n));const g=Object.assign({maxPadding:u,w:i,h:o,x:r.left,y:r.top},r),f=rN(c.concat(d),m);In(l.fullSize,g,m,f),In(c,g,m,f),In(d,g,m,f)&&In(c,g,m,f),oN(g),fh(l.leftAndTop,g,m,f),g.x+=g.w,g.y+=g.h,fh(l.rightAndBottom,g,m,f),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ie(l.chartArea,x=>{const p=x.box;Object.assign(p,t.chartArea),p.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Tg{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class cN extends Tg{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ca="$chartjs",dN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xh=t=>t===null||t==="";function hN(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[Ca]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",xh(r)){const i=Zd(t,"width");i!==void 0&&(t.width=i)}if(xh(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Zd(t,"height");i!==void 0&&(t.height=i)}return t}const Ag=uk?{passive:!0}:!1;function uN(t,e,s){t&&t.addEventListener(e,s,Ag)}function mN(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Ag)}function gN(t,e){const s=dN[t.type]||t.type,{x:n,y:r}=ls(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function za(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function fN(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||za(l.addedNodes,n),o=o&&!za(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function xN(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||za(l.removedNodes,n),o=o&&!za(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const ur=new Map;let ph=0;function Dg(){const t=window.devicePixelRatio;t!==ph&&(ph=t,ur.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function pN(t,e){ur.size||window.addEventListener("resize",Dg),ur.set(t,e)}function bN(t){ur.delete(t),ur.size||window.removeEventListener("resize",Dg)}function yN(t,e,s){const n=t.canvas,r=n&&sc(n);if(!r)return;const i=og((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,h=c.contentRect.height;d===0&&h===0||i(d,h)});return o.observe(r),pN(t,i),o}function Qi(t,e,s){s&&s.disconnect(),e==="resize"&&bN(t)}function vN(t,e,s){const n=t.canvas,r=og(i=>{t.ctx!==null&&s(gN(i,t))},t);return uN(n,e,r),r}class jN extends Tg{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(hN(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Ca])return!1;const n=s[Ca].initial;["height","width"].forEach(i=>{const o=n[i];ne(o)?s.removeAttribute(i):s.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[Ca],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:fN,detach:xN,resize:yN}[s]||vN;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:Qi,detach:Qi,resize:Qi}[s]||mN)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return hk(e,s,n,r)}isAttached(e){const s=e&&sc(e);return!!(s&&s.isConnected)}}function wN(t){return!tc()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?cN:jN}var ba;let Rt=(ba=class{constructor(){B(this,"x");B(this,"y");B(this,"active",!1);B(this,"options");B(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return nn(this.x)&&nn(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}},B(ba,"defaults",{}),B(ba,"defaultRoutes"),ba);function kN(t,e){const s=t.options.ticks,n=NN(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?CN(e):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return _N(e,d,i,o/r),d;const h=SN(i,e,r);if(o>0){let m,u;const g=o>1?Math.round((c-l)/(o-1)):null;for(ra(e,d,h,ne(g)?0:l-g,l),m=0,u=o-1;m<u;m++)ra(e,d,h,i[m],i[m+1]);return ra(e,d,h,c,ne(g)?e.length:c+g),d}return ra(e,d,h),d}function NN(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function SN(t,e,s){const n=MN(t),r=e.length/s;if(!n)return Math.max(r,1);const i=gw(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function CN(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function _N(t,e,s,n){let r=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=s[r*n])}function ra(t,e,s,n,r){const i=J(n,0),o=Math.min(J(r,t.length),t.length);let l=0,c,d,h;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),h=i;h<0;)l++,h=Math.round(i+l*s);for(d=Math.max(i,0);d<o;d++)d===h&&(e.push(t[d]),l++,h=Math.round(i+l*s))}function MN(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const EN=t=>t==="left"?"right":t==="right"?"left":t,bh=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,yh=(t,e)=>Math.min(e||t,t);function vh(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function TN(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-i,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<i-l||c>o+l)))return c}function AN(t,e){ie(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function En(t){return t.drawTicks?t.tickLength:0}function jh(t,e){if(!t.display)return 0;const s=Se(t.font,e),n=Pe(t.padding);return(ue(t.text)?t.text.length:1)*s.lineHeight+n.height}function DN(t,e){return es(t,{scale:e,type:"scale"})}function PN(t,e,s){return es(t,{tick:s,index:e,type:"tick"})}function RN(t,e,s){let n=ql(t);return(s&&e!=="right"||!s&&e==="right")&&(n=EN(n)),n}function LN(t,e,s,n){const{top:r,left:i,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:h}=c;let m=0,u,g,f;const x=o-r,p=l-i;if(t.isHorizontal()){if(g=Me(n,i,l),re(s)){const y=Object.keys(s)[0],v=s[y];f=h[y].getPixelForValue(v)+x-e}else s==="center"?f=(d.bottom+d.top)/2+x-e:f=bh(t,s,e);u=l-i}else{if(re(s)){const y=Object.keys(s)[0],v=s[y];g=h[y].getPixelForValue(v)-p+e}else s==="center"?g=(d.left+d.right)/2-p+e:g=bh(t,s,e);f=Me(n,o,r),m=s==="left"?-je:je}return{titleX:g,titleY:f,maxWidth:u,rotation:m}}class As extends Rt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=Ue(e,Number.POSITIVE_INFINITY),s=Ue(s,Number.NEGATIVE_INFINITY),n=Ue(n,Number.POSITIVE_INFINITY),r=Ue(r,Number.NEGATIVE_INFINITY),{min:Ue(e,n),max:Ue(s,r),minDefined:be(e),maxDefined:be(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:Ue(s,Ue(n,s)),max:Ue(n,Ue(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ce(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zw(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?vh(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ce(this.options.afterUpdate,[this])}beforeSetDimensions(){ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ce(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ce(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=ce(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=yh(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),m=h.widest.width,u=h.highest.height,g=Ce(this.chart.width-m,0,this.maxWidth);l=e.offset?this.maxWidth/n:g/(n-1),m+6>l&&(l=g/(n-(e.offset?.5:1)),c=this.maxHeight-En(e.grid)-s.padding-jh(e.title,this.chart.options.font),d=Math.sqrt(m*m+u*u),o=Gl(Math.min(Math.asin(Ce((h.highest.height+6)/l,-1,1)),Math.asin(Ce(c/d,-1,1))-Math.asin(Ce(u/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ce(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=jh(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=En(i)+c):(e.height=this.maxHeight,e.width=En(i)+c),n.display&&this.ticks.length){const{first:d,last:h,widest:m,highest:u}=this._getLabelSizes(),g=n.padding*2,f=it(this.labelRotation),x=Math.cos(f),p=Math.sin(f);if(l){const y=n.mirror?0:p*m.width+x*u.height;e.height=Math.min(this.maxHeight,e.height+y+g)}else{const y=n.mirror?0:x*m.width+p*u.height;e.width=Math.min(this.maxWidth,e.width+y+g)}this._calculatePadding(d,h,p,x)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,g=0;c?d?(u=r*e.width,g=n*s.height):(u=n*e.height,g=r*s.width):i==="start"?g=s.width:i==="end"?u=e.width:i!=="inner"&&(u=e.width/2,g=s.width/2),this.paddingLeft=Math.max((u-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-m+o)*this.width/(this.width-m),0)}else{let h=s.height/2,m=e.height/2;i==="start"?(h=0,m=e.height):i==="end"&&(h=s.height,m=0),this.paddingTop=h+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ce(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)ne(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=vh(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/yh(s,n));let d=0,h=0,m,u,g,f,x,p,y,v,S,C,N;for(m=0;m<s;m+=c){if(f=e[m].label,x=this._resolveTickFontOptions(m),r.font=p=x.string,y=i[p]=i[p]||{data:{},gc:[]},v=x.lineHeight,S=C=0,!ne(f)&&!ue(f))S=Va(r,y.data,y.gc,S,f),C=v;else if(ue(f))for(u=0,g=f.length;u<g;++u)N=f[u],!ne(N)&&!ue(N)&&(S=Va(r,y.data,y.gc,S,N),C+=v);o.push(S),l.push(C),d=Math.max(S,d),h=Math.max(C,h)}AN(i,s);const M=o.indexOf(d),k=l.indexOf(h),w=_=>({width:o[_]||0,height:l[_]||0});return{first:w(0),last:w(s-1),widest:w(M),highest:w(k),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return bw(this._alignToPixels?rs(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=PN(this.getContext(),e,n))}return this.$context||(this.$context=DN(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=it(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),m=this.ticks.length+(c?1:0),u=En(i),g=[],f=l.setContext(this.getContext()),x=f.display?f.width:0,p=x/2,y=function(I){return rs(n,I,x)};let v,S,C,N,M,k,w,_,E,D,O,L;if(o==="top")v=y(this.bottom),k=this.bottom-u,_=v-p,D=y(e.top)+p,L=e.bottom;else if(o==="bottom")v=y(this.top),D=e.top,L=y(e.bottom)-p,k=v+p,_=this.top+u;else if(o==="left")v=y(this.right),M=this.right-u,w=v-p,E=y(e.left)+p,O=e.right;else if(o==="right")v=y(this.left),E=e.left,O=y(e.right)-p,M=v+p,w=this.left+u;else if(s==="x"){if(o==="center")v=y((e.top+e.bottom)/2+.5);else if(re(o)){const I=Object.keys(o)[0],P=o[I];v=y(this.chart.scales[I].getPixelForValue(P))}D=e.top,L=e.bottom,k=v+p,_=k+u}else if(s==="y"){if(o==="center")v=y((e.left+e.right)/2);else if(re(o)){const I=Object.keys(o)[0],P=o[I];v=y(this.chart.scales[I].getPixelForValue(P))}M=v-p,w=M-u,E=e.left,O=e.right}const T=J(r.ticks.maxTicksLimit,m),A=Math.max(1,Math.ceil(m/T));for(S=0;S<m;S+=A){const I=this.getContext(S),P=i.setContext(I),H=l.setContext(I),z=P.lineWidth,F=P.color,G=H.dash||[],U=H.dashOffset,X=P.tickWidth,V=P.tickColor,Y=P.tickBorderDash||[],Z=P.tickBorderDashOffset;C=TN(this,S,c),C!==void 0&&(N=rs(n,C,z),d?M=w=E=O=N:k=_=D=L=N,g.push({tx1:M,ty1:k,tx2:w,ty2:_,x1:E,y1:D,x2:O,y2:L,width:z,color:F,borderDash:G,borderDashOffset:U,tickWidth:X,tickColor:V,tickBorderDash:Y,tickBorderDashOffset:Z}))}return this._ticksLength=m,this._borderValue=v,g}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:h,mirror:m}=i,u=En(n.grid),g=u+h,f=m?-h:g,x=-it(this.labelRotation),p=[];let y,v,S,C,N,M,k,w,_,E,D,O,L="middle";if(r==="top")M=this.bottom-f,k=this._getXAxisLabelAlignment();else if(r==="bottom")M=this.top+f,k=this._getXAxisLabelAlignment();else if(r==="left"){const A=this._getYAxisLabelAlignment(u);k=A.textAlign,N=A.x}else if(r==="right"){const A=this._getYAxisLabelAlignment(u);k=A.textAlign,N=A.x}else if(s==="x"){if(r==="center")M=(e.top+e.bottom)/2+g;else if(re(r)){const A=Object.keys(r)[0],I=r[A];M=this.chart.scales[A].getPixelForValue(I)+g}k=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")N=(e.left+e.right)/2-g;else if(re(r)){const A=Object.keys(r)[0],I=r[A];N=this.chart.scales[A].getPixelForValue(I)}k=this._getYAxisLabelAlignment(u).textAlign}s==="y"&&(c==="start"?L="top":c==="end"&&(L="bottom"));const T=this._getLabelSizes();for(y=0,v=l.length;y<v;++y){S=l[y],C=S.label;const A=i.setContext(this.getContext(y));w=this.getPixelForTick(y)+i.labelOffset,_=this._resolveTickFontOptions(y),E=_.lineHeight,D=ue(C)?C.length:1;const I=D/2,P=A.color,H=A.textStrokeColor,z=A.textStrokeWidth;let F=k;o?(N=w,k==="inner"&&(y===v-1?F=this.options.reverse?"left":"right":y===0?F=this.options.reverse?"right":"left":F="center"),r==="top"?d==="near"||x!==0?O=-D*E+E/2:d==="center"?O=-T.highest.height/2-I*E+E:O=-T.highest.height+E/2:d==="near"||x!==0?O=E/2:d==="center"?O=T.highest.height/2-I*E:O=T.highest.height-D*E,m&&(O*=-1),x!==0&&!A.showLabelBackdrop&&(N+=E/2*Math.sin(x))):(M=w,O=(1-D)*E/2);let G;if(A.showLabelBackdrop){const U=Pe(A.backdropPadding),X=T.heights[y],V=T.widths[y];let Y=O-U.top,Z=0-U.left;switch(L){case"middle":Y-=X/2;break;case"bottom":Y-=X;break}switch(k){case"center":Z-=V/2;break;case"right":Z-=V;break;case"inner":y===v-1?Z-=V:y>0&&(Z-=V/2);break}G={left:Z,top:Y,width:V+U.width,height:X+U.height,color:A.backdropColor}}p.push({label:C,font:_,textOffset:O,options:{rotation:x,color:P,strokeColor:H,strokeWidth:z,textAlign:F,textBaseline:L,translation:[N,M],backdrop:G}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-it(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let d,h;return s==="left"?r?(h=this.right+i,n==="near"?d="left":n==="center"?(d="center",h+=c/2):(d="right",h+=c)):(h=this.right-l,n==="near"?d="right":n==="center"?(d="center",h-=c/2):(d="left",h=this.left)):s==="right"?r?(h=this.left+i,n==="near"?d="right":n==="center"?(d="center",h-=c/2):(d="left",h-=c)):(h=this.left+l,n==="near"?d="left":n==="center"?(d="center",h+=c/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,d,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=r.length;i<o;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,h,m,u;this.isHorizontal()?(d=rs(e,this.left,o)-o/2,h=rs(e,this.right,l)+l/2,m=u=c):(m=rs(e,this.top,o)-o/2,u=rs(e,this.bottom,l)+l/2,d=h=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,m),s.lineTo(h,u),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&yi(n,r);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,d=o.label,h=o.textOffset;Ms(n,d,0,h,c,l)}r&&vi(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=Se(n.font),o=Pe(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||re(s)?(c+=o.bottom,ue(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:d,titleY:h,maxWidth:m,rotation:u}=LN(this,c,s,l);Ms(e,n.text,0,0,i,{color:n.color,maxWidth:m,rotation:u,textAlign:RN(l,s,r),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=J(e.grid&&e.grid.z,-1),r=J(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==As.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Se(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class aa{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;FN(s)&&(n=this.register(s));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,ON(e,o,n),this.override&&me.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in me[r]&&(delete me[r][n],this.override&&delete _s[n])}}function ON(t,e,s){const n=lr(Object.create(null),[s?me.get(s):{},me.get(e),t.defaults]);me.set(e,n),t.defaultRoutes&&IN(e,t.defaultRoutes),t.descriptors&&me.describe(e,t.descriptors)}function IN(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");me.route(i,r,c,l)})}function FN(t){return"id"in t&&"defaults"in t}class BN{constructor(){this.controllers=new aa(ot,"datasets",!0),this.elements=new aa(Rt,"elements"),this.plugins=new aa(Object,"plugins"),this.scales=new aa(As,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ie(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=Yl(e);ce(n["before"+r],[],n),s[e](n),ce(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var gt=new BN;class $N{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const i of e){const o=i.plugin,l=o[n],c=[s,r,i.options];if(ce(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=J(n.options&&n.options.plugins,{}),i=VN(n);return r===!1&&!s?[]:zN(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function VN(t){const e={},s=[],n=Object.keys(gt.plugins.items);for(let i=0;i<n.length;i++)s.push(gt.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function HN(t,e){return!e&&t===!1?null:t===!0?{}:t}function zN(t,{plugins:e,localIds:s},n,r){const i=[],o=t.getContext();for(const l of e){const c=l.id,d=HN(n[c],r);d!==null&&i.push({plugin:l,options:UN(t.config,{plugin:l,local:s[c]},d,o)})}return i}function UN(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wo(t,e){const s=me.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function WN(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function YN(t,e){return t===e?"_index_":"_value_"}function wh(t){if(t==="x"||t==="y"||t==="r")return t}function GN(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Yo(t,...e){if(wh(t))return t;for(const s of e){const n=s.axis||GN(s.position)||t.length>1&&wh(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kh(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function KN(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return kh(t,"x",s[0])||kh(t,"y",s[0])}return{}}function qN(t,e){const s=_s[t.type]||{scales:{}},n=e.scales||{},r=Wo(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!re(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Yo(o,l,KN(o,t),me.scales[l.type]),d=YN(c,r),h=s.scales||{};i[o]=zn(Object.create(null),[{axis:c},l,h[c],h[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||Wo(l,e),h=(_s[l]||{}).scales||{};Object.keys(h).forEach(m=>{const u=WN(m,c),g=o[u+"AxisID"]||u;i[g]=i[g]||Object.create(null),zn(i[g],[{axis:u},n[g],h[m]])})}),Object.keys(i).forEach(o=>{const l=i[o];zn(l,[me.scales[l.type],me.scale])}),i}function Pg(t){const e=t.options||(t.options={});e.plugins=J(e.plugins,{}),e.scales=qN(t,e)}function Rg(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function JN(t){return t=t||{},t.data=Rg(t.data),Pg(t),t}const Nh=new Map,Lg=new Set;function ia(t,e){let s=Nh.get(t);return s||(s=e(),Nh.set(t,s),Lg.add(s)),s}const Tn=(t,e,s)=>{const n=Kt(e,s);n!==void 0&&t.add(n)};class XN{constructor(e){this._config=JN(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Rg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Pg(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ia(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return ia(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return ia(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return ia(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(h=>{e&&(c.add(e),h.forEach(m=>Tn(c,e,m))),h.forEach(m=>Tn(c,r,m)),h.forEach(m=>Tn(c,_s[i]||{},m)),h.forEach(m=>Tn(c,me,m)),h.forEach(m=>Tn(c,Ho,m))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Lg.has(s)&&o.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,_s[s]||{},me.datasets[s]||{},{type:s},me,Ho]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=Sh(this._resolverCache,e,r);let c=o;if(ZN(o,s)){i.$shared=!1,n=qt(n)?n():n;const d=this.createResolver(e,n,l);c=rn(o,n,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,n=[""],r){const{resolver:i}=Sh(this._resolverCache,e,n);return re(s)?rn(i,s,void 0,r):i}}function Sh(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:Ql(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const QN=t=>re(t)&&Object.getOwnPropertyNames(t).some(e=>qt(t[e]));function ZN(t,e){const{isScriptable:s,isIndexable:n}=mg(t);for(const r of e){const i=s(r),o=n(r),l=(o||i)&&t[r];if(i&&(qt(l)||QN(l))||o&&ue(l))return!0}return!1}var e5="4.5.0";const t5=["top","bottom","left","right","chartArea"];function Ch(t,e){return t==="top"||t==="bottom"||t5.indexOf(t)===-1&&e==="x"}function _h(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function Mh(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),ce(s&&s.onComplete,[t],e)}function s5(t){const e=t.chart,s=e.options.animation;ce(s&&s.onProgress,[t],e)}function Og(t){return tc()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _a={},Eh=t=>{const e=Og(t);return Object.values(_a).filter(s=>s.canvas===e).pop()};function n5(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const o=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=o)}}}function r5(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var Lt;let dt=(Lt=class{static register(...e){gt.add(...e),Th()}static unregister(...e){gt.remove(...e),Th()}constructor(e,s){const n=this.config=new XN(s),r=Og(e),i=Eh(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||wN(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;if(this.id=aw(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $N,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ww(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],_a[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}wt.listen(this,"complete",Mh),wt.listen(this,"progress",s5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return ne(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return gt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Qd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qd(this.canvas,this.ctx),this}stop(){return wt.stop(this),this}resize(e,s){wt.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Qd(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ce(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};ie(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=Yo(o,l),d=c==="r",h=c==="x";return{options:l,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),ie(i,o=>{const l=o.options,c=l.id,d=Yo(c,l),h=J(l.type,o.dtype);(l.position===void 0||Ch(l.position,d)!==Ch(o.dposition))&&(l.position=o.dposition),r[c]=!0;let m=null;if(c in n&&n[c].type===h)m=n[c];else{const u=gt.getScale(h);m=new u({id:c,type:h,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(l,e)}),ie(r,(o,l)=>{o||delete n[l]}),ie(n,o=>{Ae.configure(this,o,o.options),Ae.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(_h("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||Wo(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=gt.getController(l),{datasetElementType:d,dataElementType:h}=me.datasets[l];Object.assign(c,{dataElementType:gt.getElement(h),datasetElementType:d&&gt.getElement(d)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ie(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:m}=this.getDatasetMeta(d),u=!r&&i.indexOf(m)===-1;m.buildOrUpdateElements(u),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||ie(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(_h("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ie(this.scales,e=>{Ae.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!$d(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const o=n==="_removeElements"?-i:i;n5(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!$d(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ae.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],ie(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,qt(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wt.has(this)?this.attached&&!wt.running(this)&&wt.start(this):(this.draw(),Mh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Ng(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&yi(s,r),e.controller.draw(),r&&vi(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Et(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=tN.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=es(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);cr(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),wt.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qd(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete _a[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};ie(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){ie(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},ie(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Fa(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,d)=>c.filter(h=>!d.some(m=>h.datasetIndex===m.datasetIndex&&h.index===m.index)),o=i(s,e),l=n?e:i(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,o=s,l=this._getActiveElements(e,r,n,o),c=hw(e),d=r5(e,this._lastEvent,n,c);n&&(this._lastEvent=null,ce(i.onHover,[e,l,this],this),c&&ce(i.onClick,[e,l,this],this));const h=!Fa(l,r);return(h||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,h}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},B(Lt,"defaults",me),B(Lt,"instances",_a),B(Lt,"overrides",_s),B(Lt,"registry",gt),B(Lt,"version",e5),B(Lt,"getChart",Eh),Lt);function Th(){return ie(dt.instances,t=>t._plugins.invalidate())}function a5(t,e,s){const{startAngle:n,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:h}=c,m=Math.min(d/o,Ee(n-s));if(t.beginPath(),t.arc(r,i,o-d/2,n+m/2,s-m/2),l>0){const u=Math.min(d/l,Ee(n-s));t.arc(r,i,l+d/2,s-u/2,n+u/2,!0)}else{const u=Math.min(d/2,o*Ee(n-s));if(h==="round")t.arc(r,i,u,s-ae/2,n+ae/2,!0);else if(h==="bevel"){const g=2*u*u,f=-g*Math.cos(s+ae/2)+r,x=-g*Math.sin(s+ae/2)+i,p=g*Math.cos(n+ae/2)+r,y=g*Math.sin(n+ae/2)+i;t.lineTo(f,x),t.lineTo(p,y)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function i5(t,e,s){const{startAngle:n,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=e;let d=r/l;t.beginPath(),t.arc(i,o,l,n-d,s+d),c>r?(d=r/c,t.arc(i,o,c,s+d,n-d,!0)):t.arc(i,o,r,s+je,n-je),t.closePath(),t.clip()}function o5(t){return Xl(t,["outerStart","outerEnd","innerStart","innerEnd"])}function l5(t,e,s,n){const r=o5(t.options.borderRadius),i=(s-e)/2,o=Math.min(i,n*e/2),l=c=>{const d=(s-Math.min(i,c))*n/2;return Ce(c,0,Math.min(i,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Ce(r.innerStart,0,o),innerEnd:Ce(r.innerEnd,0,o)}}function Is(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function Ua(t,e,s,n,r,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:h}=e,m=Math.max(e.outerRadius+n+s-d,0),u=h>0?h+n+s+d:0;let g=0;const f=r-c;if(n){const A=h>0?h-n:0,I=m>0?m-n:0,P=(A+I)/2,H=P!==0?f*P/(P+n):f;g=(f-H)/2}const x=Math.max(.001,f*m-s/ae)/m,p=(f-x)/2,y=c+p+g,v=r-p-g,{outerStart:S,outerEnd:C,innerStart:N,innerEnd:M}=l5(e,u,m,v-y),k=m-S,w=m-C,_=y+S/k,E=v-C/w,D=u+N,O=u+M,L=y+N/D,T=v-M/O;if(t.beginPath(),i){const A=(_+E)/2;if(t.arc(o,l,m,_,A),t.arc(o,l,m,A,E),C>0){const z=Is(w,E,o,l);t.arc(z.x,z.y,C,E,v+je)}const I=Is(O,v,o,l);if(t.lineTo(I.x,I.y),M>0){const z=Is(O,T,o,l);t.arc(z.x,z.y,M,v+je,T+Math.PI)}const P=(v-M/u+(y+N/u))/2;if(t.arc(o,l,u,v-M/u,P,!0),t.arc(o,l,u,P,y+N/u,!0),N>0){const z=Is(D,L,o,l);t.arc(z.x,z.y,N,L+Math.PI,y-je)}const H=Is(k,y,o,l);if(t.lineTo(H.x,H.y),S>0){const z=Is(k,_,o,l);t.arc(z.x,z.y,S,y-je,_)}}else{t.moveTo(o,l);const A=Math.cos(_)*m+o,I=Math.sin(_)*m+l;t.lineTo(A,I);const P=Math.cos(E)*m+o,H=Math.sin(E)*m+l;t.lineTo(P,H)}t.closePath()}function c5(t,e,s,n,r){const{fullCircles:i,startAngle:o,circumference:l}=e;let c=e.endAngle;if(i){Ua(t,e,s,n,c,r);for(let d=0;d<i;++d)t.fill();isNaN(l)||(c=o+(l%he||he))}return Ua(t,e,s,n,c,r),t.fill(),c}function d5(t,e,s,n,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:h,borderDash:m,borderDashOffset:u,borderRadius:g}=c,f=c.borderAlign==="inner";if(!d)return;t.setLineDash(m||[]),t.lineDashOffset=u,f?(t.lineWidth=d*2,t.lineJoin=h||"round"):(t.lineWidth=d,t.lineJoin=h||"bevel");let x=e.endAngle;if(i){Ua(t,e,s,n,x,r);for(let p=0;p<i;++p)t.stroke();isNaN(l)||(x=o+(l%he||he))}f&&i5(t,e,x),c.selfJoin&&x-o>=ae&&g===0&&h!=="miter"&&a5(t,e,x),i||(Ua(t,e,s,n,x,r),t.stroke())}class gs extends Rt{constructor(s){super();B(this,"circumference");B(this,"endAngle");B(this,"fullCircles");B(this,"innerRadius");B(this,"outerRadius");B(this,"pixelMargin");B(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.getProps(["x","y"],r),{angle:o,distance:l}=ng(i,{x:s,y:n}),{startAngle:c,endAngle:d,innerRadius:h,outerRadius:m,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,f=J(u,d-c),x=dr(o,c,d)&&c!==d,p=f>=he||x,y=_t(l,h+g,m+g);return p&&y}getCenterPoint(s){const{x:n,y:r,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:d,spacing:h}=this.options,m=(i+o)/2,u=(l+c+h+d)/2;return{x:n+Math.cos(m)*u,y:r+Math.sin(m)*u}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:n,circumference:r}=this,i=(n.offset||0)/4,o=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>he?Math.floor(r/he):0,r===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const c=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(ae,r||0)),h=i*d;s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,c5(s,this,h,o,l),d5(s,this,h,o,l),s.restore()}}B(gs,"id","arc"),B(gs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),B(gs,"defaultRoutes",{backgroundColor:"backgroundColor"}),B(gs,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function Ig(t,e,s=e){t.lineCap=J(s.borderCapStyle,e.borderCapStyle),t.setLineDash(J(s.borderDash,e.borderDash)),t.lineDashOffset=J(s.borderDashOffset,e.borderDashOffset),t.lineJoin=J(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=J(s.borderWidth,e.borderWidth),t.strokeStyle=J(s.borderColor,e.borderColor)}function h5(t,e,s){t.lineTo(s.x,s.y)}function u5(t){return t.stepped?Rw:t.tension||t.cubicInterpolationMode==="monotone"?Lw:h5}function Fg(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:o,end:l}=e,c=Math.max(r,o),d=Math.min(i,l),h=r<o&&i<o||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!h?n+d-c:d-c}}function m5(t,e,s,n){const{points:r,options:i}=e,{count:o,start:l,loop:c,ilen:d}=Fg(r,s,n),h=u5(i);let{move:m=!0,reverse:u}=n||{},g,f,x;for(g=0;g<=d;++g)f=r[(l+(u?d-g:g))%o],!f.skip&&(m?(t.moveTo(f.x,f.y),m=!1):h(t,x,f,u,i.stepped),x=f);return c&&(f=r[(l+(u?d:0))%o],h(t,x,f,u,i.stepped)),!!c}function g5(t,e,s,n){const r=e.points,{count:i,start:o,ilen:l}=Fg(r,s,n),{move:c=!0,reverse:d}=n||{};let h=0,m=0,u,g,f,x,p,y;const v=C=>(o+(d?l-C:C))%i,S=()=>{x!==p&&(t.lineTo(h,p),t.lineTo(h,x),t.lineTo(h,y))};for(c&&(g=r[v(0)],t.moveTo(g.x,g.y)),u=0;u<=l;++u){if(g=r[v(u)],g.skip)continue;const C=g.x,N=g.y,M=C|0;M===f?(N<x?x=N:N>p&&(p=N),h=(m*h+C)/++m):(S(),t.lineTo(C,N),f=M,m=0,x=p=N),y=N}S()}function Go(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?g5:m5}function f5(t){return t.stepped?mk:t.tension||t.cubicInterpolationMode==="monotone"?gk:cs}function x5(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),Ig(t,e.options),t.stroke(r)}function p5(t,e,s,n){const{segments:r,options:i}=e,o=Go(e);for(const l of r)Ig(t,i,l.style),t.beginPath(),o(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const b5=typeof Path2D=="function";function y5(t,e,s,n){b5&&!e.options.segment?x5(t,e,s,n):p5(t,e,s,n)}class Qe extends Rt{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;ak(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=vk(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,o=kg(this,{property:s,start:r,end:r});if(!o.length)return;const l=[],c=f5(n);let d,h;for(d=0,h=o.length;d<h;++d){const{start:m,end:u}=o[d],g=i[m],f=i[u];if(g===f){l.push(g);continue}const x=Math.abs((r-g[s])/(f[s]-g[s])),p=c(g,f,x,n.stepped);p[s]=e[s],l.push(p)}return l.length===1?l[0]:l}pathSegment(e,s,n){return Go(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=Go(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)o&=i(e,this,l,{start:s,end:s+n-1});return!!o}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),y5(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}B(Qe,"id","line"),B(Qe,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),B(Qe,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),B(Qe,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ah(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class Gt extends Rt{constructor(s){super();B(this,"parsed");B(this,"skip");B(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(s-o,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return Ah(this,s,"x",n)}inYRange(s,n){return Ah(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!Et(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,zo(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}B(Gt,"id","point"),B(Gt,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),B(Gt,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Bg(t,e){const{x:s,y:n,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,d,h,m;return t.horizontal?(m=o/2,l=Math.min(s,r),c=Math.max(s,r),d=n-m,h=n+m):(m=i/2,l=s-m,c=s+m,d=Math.min(n,r),h=Math.max(n,r)),{left:l,top:d,right:c,bottom:h}}function Ht(t,e,s,n){return t?0:Ce(e,s,n)}function v5(t,e,s){const n=t.options.borderWidth,r=t.borderSkipped,i=ug(n);return{t:Ht(r.top,i.top,0,s),r:Ht(r.right,i.right,0,e),b:Ht(r.bottom,i.bottom,0,s),l:Ht(r.left,i.left,0,e)}}function j5(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=bs(r),o=Math.min(e,s),l=t.borderSkipped,c=n||re(r);return{topLeft:Ht(!c||l.top||l.left,i.topLeft,0,o),topRight:Ht(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Ht(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Ht(!c||l.bottom||l.right,i.bottomRight,0,o)}}function w5(t){const e=Bg(t),s=e.right-e.left,n=e.bottom-e.top,r=v5(t,s/2,n/2),i=j5(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:s-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function Zi(t,e,s,n){const r=e===null,i=s===null,l=t&&!(r&&i)&&Bg(t,n);return l&&(r||_t(e,l.left,l.right))&&(i||_t(s,l.top,l.bottom))}function k5(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function N5(t,e){t.rect(e.x,e.y,e.w,e.h)}function eo(t,e,s={}){const n=t.x!==s.x?-e:0,r=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-n,o=(t.y+t.h!==s.y+s.h?e:0)-r;return{x:t.x+n,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class vs extends Rt{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=w5(this),l=k5(o.radius)?hr:N5;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,eo(o,s,i)),e.clip(),l(e,eo(i,-s,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,eo(i,s)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,s,n){return Zi(this,e,s,n)}inXRange(e,s){return Zi(this,e,null,s)}inYRange(e,s){return Zi(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+r)/2:s,y:i?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}B(vs,"id","bar"),B(vs,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),B(vs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var S5=Object.freeze({__proto__:null,ArcElement:gs,BarElement:vs,LineElement:Qe,PointElement:Gt});const Ko=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Dh=Ko.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function $g(t){return Ko[t%Ko.length]}function Vg(t){return Dh[t%Dh.length]}function C5(t,e){return t.borderColor=$g(e),t.backgroundColor=Vg(e),++e}function _5(t,e){return t.backgroundColor=t.data.map(()=>$g(e++)),e}function M5(t,e){return t.backgroundColor=t.data.map(()=>Vg(e++)),e}function E5(t){let e=0;return(s,n)=>{const r=t.getDatasetMeta(n).controller;r instanceof Vt?e=_5(s,e):r instanceof Kn?e=M5(s,e):r&&(e=C5(s,e))}}function Ph(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function T5(t){return t&&(t.borderColor||t.backgroundColor)}function A5(){return me.borderColor!=="rgba(0,0,0,0.1)"||me.backgroundColor!=="rgba(0,0,0,0.1)"}var D5={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:n},options:r}=t.config,{elements:i}=r,o=Ph(n)||T5(r)||i&&Ph(i)||A5();if(!s.forceOverride&&o)return;const l=E5(t);n.forEach(l)}};function P5(t,e,s,n,r){const i=r.samples||n;if(i>=s)return t.slice(e,e+s);const o=[],l=(s-2)/(i-2);let c=0;const d=e+s-1;let h=e,m,u,g,f,x;for(o[c++]=t[h],m=0;m<i-2;m++){let p=0,y=0,v;const S=Math.floor((m+1)*l)+1+e,C=Math.min(Math.floor((m+2)*l)+1,s)+e,N=C-S;for(v=S;v<C;v++)p+=t[v].x,y+=t[v].y;p/=N,y/=N;const M=Math.floor(m*l)+1+e,k=Math.min(Math.floor((m+1)*l)+1,s)+e,{x:w,y:_}=t[h];for(g=f=-1,v=M;v<k;v++)f=.5*Math.abs((w-p)*(t[v].y-_)-(w-t[v].x)*(y-_)),f>g&&(g=f,u=t[v],x=v);o[c++]=u,h=x}return o[c++]=t[d],o}function R5(t,e,s,n){let r=0,i=0,o,l,c,d,h,m,u,g,f,x;const p=[],y=e+s-1,v=t[e].x,C=t[y].x-v;for(o=e;o<e+s;++o){l=t[o],c=(l.x-v)/C*n,d=l.y;const N=c|0;if(N===h)d<f?(f=d,m=o):d>x&&(x=d,u=o),r=(i*r+l.x)/++i;else{const M=o-1;if(!ne(m)&&!ne(u)){const k=Math.min(m,u),w=Math.max(m,u);k!==g&&k!==M&&p.push({...t[k],x:r}),w!==g&&w!==M&&p.push({...t[w],x:r})}o>0&&M!==g&&p.push(t[M]),p.push(l),h=N,i=0,f=x=d,m=u=g=o}}return p}function Hg(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Rh(t){t.data.datasets.forEach(e=>{Hg(e)})}function L5(t,e){const s=e.length;let n=0,r;const{iScale:i}=t,{min:o,max:l,minDefined:c,maxDefined:d}=i.getUserBounds();return c&&(n=Ce(Mt(e,i.axis,o).lo,0,s-1)),d?r=Ce(Mt(e,i.axis,l).hi+1,n,s)-n:r=s-n,{start:n,count:r}}var O5={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){Rh(t);return}const n=t.width;t.data.datasets.forEach((r,i)=>{const{_data:o,indexAxis:l}=r,c=t.getDatasetMeta(i),d=o||r.data;if(On([l,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const h=t.scales[c.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:m,count:u}=L5(c,d);const g=s.threshold||4*n;if(u<=g){Hg(r);return}ne(o)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let f;switch(s.algorithm){case"lttb":f=P5(d,m,u,n,s);break;case"min-max":f=R5(d,m,u,n);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}r._decimated=f})},destroy(t){Rh(t)}};function I5(t,e,s){const n=t.segments,r=t.points,i=e.points,o=[];for(const l of n){let{start:c,end:d}=l;d=ki(c,d,r);const h=qo(s,r[c],r[d],l.loop);if(!e.segments){o.push({source:l,target:h,start:r[c],end:r[d]});continue}const m=kg(e,h);for(const u of m){const g=qo(s,i[u.start],i[u.end],u.loop),f=wg(l,r,g);for(const x of f)o.push({source:x,target:u,start:{[s]:Lh(h,g,"start",Math.max)},end:{[s]:Lh(h,g,"end",Math.min)}})}}return o}function qo(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=Ee(r),i=Ee(i)),{property:t,start:r,end:i}}function F5(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=ki(o,l,r);const c=r[o],d=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:d.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function ki(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Lh(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function zg(t,e){let s=[],n=!1;return ue(t)?(n=!0,s=t):s=F5(t,e),s.length?new Qe({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Oh(t){return t&&t.fill!==!1}function B5(t,e,s){let r=t[e].fill;const i=[e];let o;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!be(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function $5(t,e,s){const n=U5(t);if(re(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return be(r)&&Math.floor(r)===r?V5(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function V5(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function H5(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:re(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function z5(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:re(t)?n=t.value:n=e.getBaseValue(),n}function U5(t){const e=t.options,s=e.fill;let n=J(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function W5(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,o=n.points,l=Y5(e,s);l.push(zg({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const d=i[c];for(let h=d.start;h<=d.end;h++)G5(r,o[h],l)}return new Qe({points:r,options:{}})}function Y5(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function G5(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:o,last:l,point:c}=K5(i,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function K5(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,o=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const h=i[d],m=o[h.start][s],u=o[h.end][s];if(_t(r,m,u)){l=r===m,c=r===u;break}}return{first:l,last:c,point:n}}class Ug{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:o}=this;return s=s||{start:0,end:he},e.arc(r,i,o,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function q5(t){const{chart:e,fill:s,line:n}=t;if(be(s))return J5(e,s);if(s==="stack")return W5(t);if(s==="shape")return!0;const r=X5(t);return r instanceof Ug?r:zg(r,n)}function J5(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function X5(t){return(t.scale||{}).getPointPositionForValue?Z5(t):Q5(t)}function Q5(t){const{scale:e={},fill:s}=t,n=H5(s,e);if(be(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function Z5(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,o=z5(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new Ug({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,o));return l}function to(t,e,s){const n=q5(e),{chart:r,index:i,line:o,scale:l,axis:c}=e,d=o.options,h=d.fill,m=d.backgroundColor,{above:u=m,below:g=m}=h||{},f=r.getDatasetMeta(i),x=Ng(r,f);n&&o.points.length&&(yi(t,s),eS(t,{line:o,target:n,above:u,below:g,area:s,scale:l,axis:c,clip:x}),vi(t))}function eS(t,e){const{line:s,target:n,above:r,below:i,area:o,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let h=i;i!==r&&(d==="x"?(Ih(t,n,o.top),so(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),Ih(t,n,o.bottom)):d==="y"&&(Fh(t,n,o.left),so(t,{line:s,target:n,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),Fh(t,n,o.right),h=r)),so(t,{line:s,target:n,color:h,scale:l,property:d,clip:c}),t.restore()}function Ih(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,h=r[c],m=r[ki(c,d,r)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(h.x,s),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(m.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function Fh(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,h=r[c],m=r[ki(c,d,r)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(s,h.y),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(s,m.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function so(t,e){const{line:s,target:n,property:r,color:i,scale:o,clip:l}=e,c=I5(s,n,r);for(const{source:d,target:h,start:m,end:u}of c){const{style:{backgroundColor:g=i}={}}=d,f=n!==!0;t.save(),t.fillStyle=g,tS(t,o,l,f&&qo(r,m,u)),t.beginPath();const x=!!s.pathSegment(t,d);let p;if(f){x?t.closePath():Bh(t,n,u,r);const y=!!n.pathSegment(t,h,{move:x,reverse:!0});p=x&&y,p||Bh(t,n,m,r)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function tS(t,e,s,n){const r=e.chart.chartArea,{property:i,start:o,end:l}=n||{};if(i==="x"||i==="y"){let c,d,h,m;i==="x"?(c=o,d=r.top,h=l,m=r.bottom):(c=r.left,d=o,h=r.right,m=l),t.beginPath(),s&&(c=Math.max(c,s.left),h=Math.min(h,s.right),d=Math.max(d,s.top),m=Math.min(m,s.bottom)),t.rect(c,d,h-c,m-d),t.clip()}}function Bh(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var Ni={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,o,l,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof Qe&&(c={visible:t.isDatasetVisible(o),index:o,fill:$5(l,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(o=0;o<n;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=B5(r,o,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&to(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;Oh(i)&&to(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Oh(n)||s.drawTime!=="beforeDatasetDraw"||to(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $h=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},sS=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Vh extends Rt{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=ce(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=Se(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=$h(n,i);let d,h;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(o,i,l,c)+10):(h=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],h=r+l;let m=e;i.textAlign="left",i.textBaseline="middle";let u=-1,g=-h;return this.legendItems.forEach((f,x)=>{const p=n+s/2+i.measureText(f.text).width;(x===0||d[d.length-1]+p+2*l>o)&&(m+=h,d[d.length-(x>0?0:1)]=0,g+=h,u++),c[x]={left:0,top:g,row:u,width:p,height:r},d[d.length-1]+=p+l}),m}_fitCols(e,s,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],h=o-e;let m=l,u=0,g=0,f=0,x=0;return this.legendItems.forEach((p,y)=>{const{itemWidth:v,itemHeight:S}=nS(n,s,i,p,r);y>0&&g+S+2*l>h&&(m+=u+l,d.push({width:u,height:g}),f+=u+l,x++,u=g=0),c[y]={left:f,top:g,col:x,width:v,height:S},u=Math.max(u,v),g+=S+l}),m+=u,d.push({width:u,height:g}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,o=Gs(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Me(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=Me(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=Me(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=Me(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;yi(e,this),this._draw(),vi(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,l=me.color,c=Gs(e.rtl,this.left,this.width),d=Se(o.font),{padding:h}=o,m=d.size,u=m/2;let g;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:f,boxHeight:x,itemHeight:p}=$h(o,m),y=function(M,k,w){if(isNaN(f)||f<=0||isNaN(x)||x<0)return;r.save();const _=J(w.lineWidth,1);if(r.fillStyle=J(w.fillStyle,l),r.lineCap=J(w.lineCap,"butt"),r.lineDashOffset=J(w.lineDashOffset,0),r.lineJoin=J(w.lineJoin,"miter"),r.lineWidth=_,r.strokeStyle=J(w.strokeStyle,l),r.setLineDash(J(w.lineDash,[])),o.usePointStyle){const E={radius:x*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:_},D=c.xPlus(M,f/2),O=k+u;hg(r,E,D,O,o.pointStyleWidth&&f)}else{const E=k+Math.max((m-x)/2,0),D=c.leftForLtr(M,f),O=bs(w.borderRadius);r.beginPath(),Object.values(O).some(L=>L!==0)?hr(r,{x:D,y:E,w:f,h:x,radius:O}):r.rect(D,E,f,x),r.fill(),_!==0&&r.stroke()}r.restore()},v=function(M,k,w){Ms(r,w.text,M,k+p/2,d,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},S=this.isHorizontal(),C=this._computeTitleHeight();S?g={x:Me(i,this.left+h,this.right-n[0]),y:this.top+h+C,line:0}:g={x:this.left+h,y:Me(i,this.top+C+h,this.bottom-s[0].height),line:0},yg(this.ctx,e.textDirection);const N=p+h;this.legendItems.forEach((M,k)=>{r.strokeStyle=M.fontColor,r.fillStyle=M.fontColor;const w=r.measureText(M.text).width,_=c.textAlign(M.textAlign||(M.textAlign=o.textAlign)),E=f+u+w;let D=g.x,O=g.y;c.setWidth(this.width),S?k>0&&D+E+h>this.right&&(O=g.y+=N,g.line++,D=g.x=Me(i,this.left+h,this.right-n[g.line])):k>0&&O+N>this.bottom&&(D=g.x=D+s[g.line].width+h,g.line++,O=g.y=Me(i,this.top+C+h,this.bottom-s[g.line].height));const L=c.x(D);if(y(L,O,M),D=kw(_,D+f+u,S?D+E:this.right,e.rtl),v(c.x(D),O,M),S)g.x+=E+h;else if(typeof M.text!="string"){const T=d.lineHeight;g.y+=Wg(M,T)+h}else g.y+=N}),vg(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Se(s.font),r=Pe(s.padding);if(!s.display)return;const i=Gs(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let h,m=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),h=this.top+d,m=Me(e.align,m,this.right-u);else{const f=this.columnSizes.reduce((x,p)=>Math.max(x,p.height),0);h=d+Me(e.align,this.top,this.bottom-f-e.labels.padding-this._computeTitleHeight())}const g=Me(l,m,m+u);o.textAlign=i.textAlign(ql(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,Ms(o,s.text,g,h,n)}_computeTitleHeight(){const e=this.options.title,s=Se(e.font),n=Pe(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(_t(e,this.left,this.right)&&_t(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],_t(e,r.left,r.left+r.width)&&_t(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!iS(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=sS(r,n);r&&!i&&ce(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&ce(s.onHover,[e,n,this],this)}else n&&ce(s.onClick,[e,n,this],this)}}function nS(t,e,s,n,r){const i=rS(n,t,e,s),o=aS(r,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function rS(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(r).width}function aS(t,e,s){let n=t;return typeof e.text!="string"&&(n=Wg(e,s)),n}function Wg(t,e){const s=t.text?t.text.length:0;return e*s}function iS(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ds={id:"legend",_element:Vh,start(t,e,s){const n=t.legend=new Vh({ctx:t.ctx,options:s,chart:t});Ae.configure(t,n,s),Ae.addBox(t,n)},stop(t){Ae.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Ae.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),h=Pe(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class rc extends Rt{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const r=ue(n.text)?n.text.length:1;this._padding=Pe(n.padding);const i=r*Se(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,h,m;return this.isHorizontal()?(h=Me(l,n,i),m=s+e,d=i-n):(o.position==="left"?(h=n+e,m=Me(l,r,s),c=ae*-.5):(h=i-e,m=Me(l,s,r),c=ae*.5),d=r-s),{titleX:h,titleY:m,maxWidth:d,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Se(s.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Ms(e,s.text,0,0,n,{color:s.color,maxWidth:c,rotation:d,textAlign:ql(s.align),textBaseline:"middle",translation:[o,l]})}}function oS(t,e){const s=new rc({ctx:t.ctx,options:e,chart:t});Ae.configure(t,s,e),Ae.addBox(t,s),t.titleBlock=s}var ac={id:"title",_element:rc,start(t,e,s){oS(t,s)},stop(t){const e=t.titleBlock;Ae.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;Ae.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const oa=new WeakMap;var lS={id:"subtitle",start(t,e,s){const n=new rc({ctx:t.ctx,options:s,chart:t});Ae.configure(t,n,s),Ae.addBox(t,n),oa.set(t,n)},stop(t){Ae.removeBox(t,oa.get(t)),oa.delete(t)},beforeUpdate(t,e,s){const n=oa.get(t);Ae.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fn={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),h=Vo(e,d);h<r&&(r=h,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function mt(t,e){return e&&(ue(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function kt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function cS(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function Hh(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=Se(e.bodyFont),d=Se(e.titleFont),h=Se(e.footerFont),m=i.length,u=r.length,g=n.length,f=Pe(e.padding);let x=f.height,p=0,y=n.reduce((C,N)=>C+N.before.length+N.lines.length+N.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,m&&(x+=m*d.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),y){const C=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=g*C+(y-g)*c.lineHeight+(y-1)*e.bodySpacing}u&&(x+=e.footerMarginTop+u*h.lineHeight+(u-1)*e.footerSpacing);let v=0;const S=function(C){p=Math.max(p,s.measureText(C).width+v)};return s.save(),s.font=d.string,ie(t.title,S),s.font=c.string,ie(t.beforeBody.concat(t.afterBody),S),v=e.displayColors?o+2+e.boxPadding:0,ie(n,C=>{ie(C.before,S),ie(C.lines,S),ie(C.after,S)}),v=0,s.font=h.string,ie(t.footer,S),s.restore(),p+=f.width,{width:p,height:x}}function dS(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function hS(t,e,s,n){const{x:r,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function uS(t,e,s,n){const{x:r,width:i}=s,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),hS(d,t,e,s)&&(d="center"),d}function zh(t,e,s){const n=s.yAlign||e.yAlign||dS(t,s);return{xAlign:s.xAlign||e.xAlign||uS(t,e,s,n),yAlign:n}}function mS(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function gS(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function Uh(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,d=r+i,{topLeft:h,topRight:m,bottomLeft:u,bottomRight:g}=bs(o);let f=mS(e,l);const x=gS(e,c,d);return c==="center"?l==="left"?f+=d:l==="right"&&(f-=d):l==="left"?f-=Math.max(h,u)+r:l==="right"&&(f+=Math.max(m,g)+r),{x:Ce(f,0,n.width-e.width),y:Ce(x,0,n.height-e.height)}}function la(t,e,s){const n=Pe(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Wh(t){return mt([],kt(t))}function fS(t,e,s){return es(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Yh(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const Yg={beforeTitle:jt,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:jt,beforeBody:jt,beforeLabel:jt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ne(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:jt,afterBody:jt,beforeFooter:jt,footer:jt,afterFooter:jt};function Oe(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?Yg[e].call(s,n):r}class Jo extends Rt{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new Sg(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=fS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=Oe(n,"beforeTitle",this,e),i=Oe(n,"title",this,e),o=Oe(n,"afterTitle",this,e);let l=[];return l=mt(l,kt(r)),l=mt(l,kt(i)),l=mt(l,kt(o)),l}getBeforeBody(e,s){return Wh(Oe(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return ie(e,i=>{const o={before:[],lines:[],after:[]},l=Yh(n,i);mt(o.before,kt(Oe(l,"beforeLabel",this,i))),mt(o.lines,Oe(l,"label",this,i)),mt(o.after,kt(Oe(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,s){return Wh(Oe(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=Oe(n,"beforeFooter",this,e),i=Oe(n,"footer",this,e),o=Oe(n,"afterFooter",this,e);let l=[];return l=mt(l,kt(r)),l=mt(l,kt(i)),l=mt(l,kt(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(cS(this.chart,s[c]));return e.filter&&(l=l.filter((h,m,u)=>e.filter(h,m,u,n))),e.itemSort&&(l=l.sort((h,m)=>e.itemSort(h,m,n))),ie(l,h=>{const m=Yh(e.callbacks,h);r.push(Oe(m,"labelColor",this,h)),i.push(Oe(m,"labelPointStyle",this,h)),o.push(Oe(m,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Fn[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=Hh(this,n),d=Object.assign({},l,c),h=zh(this.chart,n,d),m=Uh(n,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:m}=bs(l),{x:u,y:g}=e,{width:f,height:x}=s;let p,y,v,S,C,N;return i==="center"?(C=g+x/2,r==="left"?(p=u,y=p-o,S=C+o,N=C-o):(p=u+f,y=p+o,S=C-o,N=C+o),v=p):(r==="left"?y=u+Math.max(c,h)+o:r==="right"?y=u+f-Math.max(d,m)-o:y=this.caretX,i==="top"?(S=g,C=S-o,p=y-o,v=y+o):(S=g+x,C=S+o,p=y+o,v=y-o),N=S),{x1:p,x2:y,x3:v,y1:S,y2:C,y3:N}}drawTitle(e,s,n){const r=this.title,i=r.length;let o,l,c;if(i){const d=Gs(n.rtl,this.x,this.width);for(e.x=la(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",o=Se(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(r[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,h=Se(i.bodyFont),m=la(this,"left",i),u=r.x(m),g=c<h.lineHeight?(h.lineHeight-c)/2:0,f=s.y+g;if(i.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},p=r.leftForLtr(u,d)+d/2,y=f+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,zo(e,x,p,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,zo(e,x,p,y)}else{e.lineWidth=re(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(u,d),p=r.leftForLtr(r.xPlus(u,1),d-2),y=bs(o.borderRadius);Object.values(y).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,hr(e,{x,y:f,w:d,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),hr(e,{x:p,y:f+1,w:d-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,f,d,c),e.strokeRect(x,f,d,c),e.fillStyle=o.backgroundColor,e.fillRect(p,f+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:h}=n,m=Se(n.bodyFont);let u=m.lineHeight,g=0;const f=Gs(n.rtl,this.x,this.width),x=function(w){s.fillText(w,f.x(e.x+g),e.y+u/2),e.y+=u+i},p=f.textAlign(o);let y,v,S,C,N,M,k;for(s.textAlign=o,s.textBaseline="middle",s.font=m.string,e.x=la(this,p,n),s.fillStyle=n.bodyColor,ie(this.beforeBody,x),g=l&&p!=="right"?o==="center"?d/2+h:d+2+h:0,C=0,M=r.length;C<M;++C){for(y=r[C],v=this.labelTextColors[C],s.fillStyle=v,ie(y.before,x),S=y.lines,l&&S.length&&(this._drawColorBox(s,e,C,f,n),u=Math.max(m.lineHeight,c)),N=0,k=S.length;N<k;++N)x(S[N]),u=m.lineHeight;ie(y.after,x)}g=0,u=m.lineHeight,ie(this.afterBody,x),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let o,l;if(i){const c=Gs(n.rtl,this.x,this.width);for(e.x=la(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=Se(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:h}=n,{topLeft:m,topRight:u,bottomLeft:g,bottomRight:f}=bs(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+m,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-u,c),s.quadraticCurveTo(l+d,c,l+d,c+u),o==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+h-f),s.quadraticCurveTo(l+d,c+h,l+d-f,c+h),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+g,c+h),s.quadraticCurveTo(l,c+h,l,c+h-g),o==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+m),s.quadraticCurveTo(l,c,l+m,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=Fn[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Hh(this,e),c=Object.assign({},o,this._size),d=zh(s,e,c),h=Uh(e,c,d,s);(r._to!==h.x||i._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Pe(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),yg(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),vg(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Fa(n,r),o=this._positionChanged(r,s);(i||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),l=this._positionChanged(o,e),c=s||!Fa(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,o=Fn[i.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}B(Jo,"positioners",Fn);var Ps={id:"tooltip",_element:Jo,positioners:Fn,afterInit(t,e,s){s&&(t.tooltip=new Jo({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Yg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},xS=Object.freeze({__proto__:null,Colors:D5,Decimation:O5,Filler:Ni,Legend:Ds,SubTitle:lS,Title:ac,Tooltip:Ps});const pS=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function bS(t,e,s,n){const r=t.indexOf(e);if(r===-1)return pS(t,e,s,n);const i=t.lastIndexOf(e);return r!==i?s:r}const yS=(t,e)=>t===null?null:Ce(Math.round(t),0,e);function Gh(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class on extends As{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:r,label:i}of s)n[r]===i&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ne(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:bS(n,e,J(s,e),this._addedLabels),yS(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=s;o++)r.push({value:o});return r}getLabelForValue(e){return Gh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}B(on,"id","category"),B(on,"defaults",{ticks:{callback:Gh}});function vS(t,e){const s=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:h,maxDigits:m,includeBounds:u}=t,g=i||1,f=h-1,{min:x,max:p}=e,y=!ne(o),v=!ne(l),S=!ne(d),C=(p-x)/(m+1);let N=Hd((p-x)/f/g)*g,M,k,w,_;if(N<1e-14&&!y&&!v)return[{value:x},{value:p}];_=Math.ceil(p/N)-Math.floor(x/N),_>f&&(N=Hd(_*N/f/g)*g),ne(c)||(M=Math.pow(10,c),N=Math.ceil(N*M)/M),r==="ticks"?(k=Math.floor(x/N)*N,w=Math.ceil(p/N)*N):(k=x,w=p),y&&v&&i&&xw((l-o)/i,N/1e3)?(_=Math.round(Math.min((l-o)/N,h)),N=(l-o)/_,k=o,w=l):S?(k=y?o:k,w=v?l:w,_=d-1,N=(w-k)/_):(_=(w-k)/N,Un(_,Math.round(_),N/1e3)?_=Math.round(_):_=Math.ceil(_));const E=Math.max(zd(N),zd(k));M=Math.pow(10,ne(c)?E:c),k=Math.round(k*M)/M,w=Math.round(w*M)/M;let D=0;for(y&&(u&&k!==o?(s.push({value:o}),k<o&&D++,Un(Math.round((k+D*N)*M)/M,o,Kh(o,C,t))&&D++):k<o&&D++);D<_;++D){const O=Math.round((k+D*N)*M)/M;if(v&&O>l)break;s.push({value:O})}return v&&u&&w!==l?s.length&&Un(s[s.length-1].value,l,Kh(l,C,t))?s[s.length-1].value=l:s.push({value:l}):(!v||w===l)&&s.push({value:w}),s}function Kh(t,e,{horizontal:s,minRotation:n}){const r=it(n),i=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class Wa extends As{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ne(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=xt(r),d=xt(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=vS(r,i);return e.bounds==="ticks"&&sg(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Or(e,this.chart.options.locale,this.options.ticks.format)}}class ln extends Wa{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=be(e)?e:0,this.max=be(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=it(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}B(ln,"id","linear"),B(ln,"defaults",{ticks:{callback:bi.formatters.numeric}});const mr=t=>Math.floor($t(t)),is=(t,e)=>Math.pow(10,mr(t)+e);function qh(t){return t/Math.pow(10,mr(t))===1}function Jh(t,e,s){const n=Math.pow(10,s),r=Math.floor(t/n);return Math.ceil(e/n)-r}function jS(t,e){const s=e-t;let n=mr(s);for(;Jh(t,e,n)>10;)n++;for(;Jh(t,e,n)<10;)n--;return Math.min(n,mr(t))}function wS(t,{min:e,max:s}){e=Ue(t.min,e);const n=[],r=mr(e);let i=jS(e,s),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=r>i?Math.pow(10,r):0,d=Math.round((e-c)*o)/o,h=Math.floor((e-c)/l/10)*l*10;let m=Math.floor((d-h)/Math.pow(10,i)),u=Ue(t.min,Math.round((c+h+m*Math.pow(10,i))*o)/o);for(;u<s;)n.push({value:u,major:qh(u),significand:m}),m>=10?m=m<15?15:20:m++,m>=20&&(i++,m=2,o=i>=0?1:o),u=Math.round((c+h+m*Math.pow(10,i))*o)/o;const g=Ue(t.max,u);return n.push({value:g,major:qh(g),significand:m}),n}class Xo extends As{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=Wa.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return be(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=be(e)?Math.max(0,e):null,this.max=be(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!be(this._userMin)&&(this.min=e===is(this.min,0)?is(this.min,-1):is(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,r=this.max;const i=l=>n=e?n:l,o=l=>r=s?r:l;n===r&&(n<=0?(i(1),o(10)):(i(is(n,-1)),o(is(r,1)))),n<=0&&i(is(r,-1)),r<=0&&o(is(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=wS(s,this);return e.bounds==="ticks"&&sg(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Or(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=$t(e),this._valueRange=$t(this.max)-$t(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:($t(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}B(Xo,"id","logarithmic"),B(Xo,"defaults",{ticks:{callback:bi.formatters.logarithmic,major:{enabled:!0}}});function Qo(t){const e=t.ticks;if(e.display&&t.display){const s=Pe(e.backdropPadding);return J(e.font&&e.font.size,me.font.size)+s.height}return 0}function kS(t,e,s){return s=ue(s)?s:[s],{w:Pw(t,e.string,s),h:s.length*e.lineHeight}}function Xh(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function NS(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?ae/i:0;for(let c=0;c<i;c++){const d=o.setContext(t.getPointLabelContext(c));r[c]=d.padding;const h=t.getPointPosition(c,t.drawingArea+r[c],l),m=Se(d.font),u=kS(t.ctx,m,t._pointLabels[c]);n[c]=u;const g=Ee(t.getIndexAngle(c)+l),f=Math.round(Gl(g)),x=Xh(f,h.x,u.w,0,180),p=Xh(f,h.y,u.h,90,270);SS(s,e,g,x,p)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=MS(t,n,r)}function SS(t,e,s,n,r){const i=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function CS(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:o,size:l}=s,c=t.getPointPosition(e,n+r+o,i),d=Math.round(Gl(Ee(c.angle+je))),h=AS(c.y,l.h,d),m=ES(d),u=TS(c.x,l.w,m);return{visible:!0,x:c.x,y:h,textAlign:m,left:u,top:h,right:u+l.w,bottom:h+l.h}}function _S(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(Et({x:s,y:n},e)||Et({x:s,y:i},e)||Et({x:r,y:n},e)||Et({x:r,y:i},e))}function MS(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:Qo(i)/2,additionalAngle:o?ae/r:0};let d;for(let h=0;h<r;h++){c.padding=s[h],c.size=e[h];const m=CS(t,h,c);n.push(m),l==="auto"&&(m.visible=_S(m,d),m.visible&&(d=m))}return n}function ES(t){return t===0||t===180?"center":t<180?"left":"right"}function TS(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function AS(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function DS(t,e,s){const{left:n,top:r,right:i,bottom:o}=s,{backdropColor:l}=e;if(!ne(l)){const c=bs(e.borderRadius),d=Pe(e.backdropPadding);t.fillStyle=l;const h=n-d.left,m=r-d.top,u=i-n+d.width,g=o-r+d.height;Object.values(c).some(f=>f!==0)?(t.beginPath(),hr(t,{x:h,y:m,w:u,h:g,radius:c}),t.fill()):t.fillRect(h,m,u,g)}}function PS(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const o=n.setContext(t.getPointLabelContext(r));DS(s,o,i);const l=Se(o.font),{x:c,y:d,textAlign:h}=i;Ms(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Gg(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,he);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),r.lineTo(i.x,i.y)}}function RS(t,e,s,n,r){const i=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),Gg(t,s,o,n),i.closePath(),i.stroke(),i.restore())}function LS(t,e,s){return es(t,{label:s,index:e,type:"pointLabel"})}class zt extends Wa{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Pe(Qo(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=be(e)&&!isNaN(e)?e:0,this.max=be(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Qo(this.options))}generateTickLabels(e){Wa.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=ce(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?NS(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=he/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ee(e*s+it(n))}getDistanceFromCenterForValue(e){if(ne(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(ne(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return LS(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-je+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Gg(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,o=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&PS(this,o),r.display&&this.ticks.forEach((h,m)=>{if(m!==0||m===0&&this.min<0){c=this.getDistanceFromCenterForValue(h.value);const u=this.getContext(m),g=r.setContext(u),f=i.setContext(u);RS(this,g,c,o,f)}}),n.display){for(e.save(),l=o-1;l>=0;l--){const h=n.setContext(this.getPointLabelContext(l)),{color:m,lineWidth:u}=h;!u||!m||(e.lineWidth=u,e.strokeStyle=m,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),h=Se(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=h.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const m=Pe(d.backdropPadding);e.fillRect(-o/2-m.left,-i-h.size/2-m.top,o+m.width,h.size+m.height)}Ms(e,l.label,0,-i,h,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}B(zt,"id","radialLinear"),B(zt,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:bi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),B(zt,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),B(zt,"descriptors",{angleLines:{_fallback:"grid"}});const Si={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fe=Object.keys(Si);function Qh(t,e){return t-e}function Zh(t,e){if(ne(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),be(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(nn(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,r)),+o)}function eu(t,e,s,n){const r=Fe.length;for(let i=Fe.indexOf(t);i<r-1;++i){const o=Si[Fe[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return Fe[i]}return Fe[r-1]}function OS(t,e,s,n,r){for(let i=Fe.length-1;i>=Fe.indexOf(s);i--){const o=Fe[i];if(Si[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return Fe[s?Fe.indexOf(s):0]}function IS(t){for(let e=Fe.indexOf(t)+1,s=Fe.length;e<s;++e)if(Si[Fe[e]].common)return Fe[e]}function tu(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=Kl(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function FS(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function su(t,e,s){const n=[],r={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return i===0||!s?n:FS(t,n,r,s)}class gr extends As{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new Jk._date(e.adapters.date);r.init(s),zn(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Zh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=be(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=be(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=vw(r,i,o);return this._unit=s.unit||(n.autoSkip?eu(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):OS(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:IS(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),su(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=Ce(s,0,o),n=Ce(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||eu(i.minUnit,s,n,this._getLabelCapacity(s)),l=J(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=nn(c)||c===!0,h={};let m=s,u,g;if(d&&(m=+e.startOf(m,"isoWeek",c)),m=+e.startOf(m,d?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const f=r.ticks.source==="data"&&this.getDataTimestamps();for(u=m,g=0;u<n;u=+e.add(u,l,o),g++)tu(h,u,f);return(u===n||r.bounds==="ticks"||g===1)&&tu(h,u,f),Object.keys(h).sort(Qh).map(x=>+x)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,o=s||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const i=this.options,o=i.ticks.callback;if(o)return ce(o,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,h=c&&l[c],m=d&&l[d],u=n[s],g=d&&m&&u&&u.major;return this._adapter.format(e,r||(g?m:h))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=it(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,su(this,[e],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Zh(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ag(e.sort(Qh))}}B(gr,"id","time"),B(gr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ca(t,e,s){let n=0,r=t.length-1,i,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=Mt(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=Mt(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[r]);const d=o-i;return d?l+(c-l)*(e-i)/d:l}class Zo extends gr{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=ca(s,this.min),this._tableRange=ca(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let o,l,c,d,h;for(o=0,l=e.length;o<l;++o)d=e[o],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)h=r[o+1],c=r[o-1],d=r[o],Math.round((h+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(ca(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return ca(this._table,n*this._tableRange+this._minPos,!0)}}B(Zo,"id","timeseries"),B(Zo,"defaults",gr.defaults);var BS=Object.freeze({__proto__:null,CategoryScale:on,LinearScale:ln,LogarithmicScale:Xo,RadialLinearScale:zt,TimeScale:gr,TimeSeriesScale:Zo});const $S=[qk,S5,xS,BS],Kg="label";function nu(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function VS(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function qg(t,e){t.labels=e}function Jg(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kg;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function HS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kg;const s={labels:[],datasets:[]};return qg(s,t.labels),Jg(s,t.datasets,e),s}function zS(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:h,updateMode:m,...u}=t,g=j.useRef(null),f=j.useRef(null),x=()=>{g.current&&(f.current=new dt(g.current,{type:o,data:HS(l,i),options:c&&{...c},plugins:d}),nu(e,f.current))},p=()=>{nu(e,null),f.current&&(f.current.destroy(),f.current=null)};return j.useEffect(()=>{!r&&f.current&&c&&VS(f.current,c)},[r,c]),j.useEffect(()=>{!r&&f.current&&qg(f.current.config.data,l.labels)},[r,l.labels]),j.useEffect(()=>{!r&&f.current&&l.datasets&&Jg(f.current.config.data,l.datasets,i)},[r,l.datasets]),j.useEffect(()=>{f.current&&(r?(p(),setTimeout(x)):f.current.update(m))},[r,c,l.labels,l.datasets,m]),j.useEffect(()=>{f.current&&(p(),setTimeout(x))},[o]),j.useEffect(()=>(x(),()=>p()),[]),Sr.createElement("canvas",{ref:g,role:"img",height:s,width:n,...u},h)}const Xg=j.forwardRef(zS);function ic(t,e){return dt.register(e),j.forwardRef((s,n)=>Sr.createElement(Xg,{...s,ref:n,type:t}))}const Qg=ic("bar",Gn),oc=ic("radar",qn),el=ic("doughnut",Vt);class An{static analyzeFromSaju(e){const{fiveElements:s}=e;return{wood:s.wood||0,fire:s.fire||0,earth:s.earth||0,metal:s.metal||0,water:s.water||0}}static analyzeElementRelationships(e){const s=e.wood+e.fire+e.earth+e.metal+e.water,n={wood_fire:Math.min(e.wood*e.fire/100,100),fire_earth:Math.min(e.fire*e.earth/100,100),earth_metal:Math.min(e.earth*e.metal/100,100),metal_water:Math.min(e.metal*e.water/100,100),water_wood:Math.min(e.water*e.wood/100,100)},r={wood_earth:Math.min(e.wood*e.earth/100,100),fire_metal:Math.min(e.fire*e.metal/100,100),earth_water:Math.min(e.earth*e.water/100,100),metal_wood:Math.min(e.metal*e.wood/100,100),water_fire:Math.min(e.water*e.fire/100,100)},i=Object.values(e),o=s/5,l=i.reduce((u,g)=>u+Math.pow(g-o,2),0)/5,c=Math.max(0,100-l),d=[],h=[],m=[];return Object.entries(e).forEach(([u,g])=>{const f=g/s;f>.3?d.push(u):f<.1&&h.push(u),g===0&&m.push(u)}),{mutual_generation:n,mutual_destruction:r,balance_score:c,dominant_elements:d,weak_elements:h,missing_elements:m}}static generateRecommendations(e,s){const n=this.getColorRecommendations(e),r=this.getDirectionRecommendations(e),i=this.getActivityRecommendations(e),o=this.getLifestyleRecommendations(e);return{colors:n,directions:r,activities:i,lifestyle:o}}static getElementDetails(){return{wood:{name:"Wood",korean:"목(木)",icon:"🌳",color:{primary:"#10B981",secondary:"#34D399",background:"#ECFDF5"},characteristics:{positive:["창의성","성장력","유연성","진취성"],negative:["성급함","변덕","우유부단","과도한 이상주의"]},season:"봄",direction:"동쪽",body_parts:["간","담","눈","근육"],emotions:["분노","짜증","좌절감"]},fire:{name:"Fire",korean:"화(火)",icon:"🔥",color:{primary:"#EF4444",secondary:"#F87171",background:"#FEF2F2"},characteristics:{positive:["열정","활력","리더십","표현력"],negative:["성급함","충동성","과열","소진"]},season:"여름",direction:"남쪽",body_parts:["심장","소장","혀","혈관"],emotions:["기쁨","흥분","조급함"]},earth:{name:"Earth",korean:"토(土)",icon:"🏔️",color:{primary:"#A16207",secondary:"#D97706",background:"#FFFBEB"},characteristics:{positive:["안정성","신뢰성","포용력","인내력"],negative:["고집","보수성","느림","걱정"]},season:"늦여름",direction:"중앙",body_parts:["비장","위","입","살"],emotions:["걱정","우려","사려깊음"]},metal:{name:"Metal",korean:"금(金)",icon:"⚡",color:{primary:"#FCD34D",secondary:"#FDE047",background:"#FEFCE8"},characteristics:{positive:["정의감","원칙성","완결력","논리성"],negative:["경직성","냉정함","비판적","완벽주의"]},season:"가을",direction:"서쪽",body_parts:["폐","대장","코","피부"],emotions:["슬픔","우울","아쉬움"]},water:{name:"Water",korean:"수(水)",icon:"💧",color:{primary:"#3B82F6",secondary:"#60A5FA",background:"#EFF6FF"},characteristics:{positive:["지혜","융통성","적응력","직관력"],negative:["우유부단","소극성","냉담","변덕"]},season:"겨울",direction:"북쪽",body_parts:["신장","방광","귀","뼈"],emotions:["두려움","불안","신중함"]}}}static getColorRecommendations(e){const s=Object.entries(e).sort(([,i],[,o])=>i-o)[0][0],n=Object.entries(e).sort(([,i],[,o])=>o-i)[0][0],r={wood:{color:"초록색",hex:"#10B981",effect:"성장과 창의성 증진"},fire:{color:"빨간색",hex:"#EF4444",effect:"활력과 열정 증진"},earth:{color:"갈색",hex:"#A16207",effect:"안정성과 신뢰성 증진"},metal:{color:"금색",hex:"#FCD34D",effect:"논리성과 완결력 증진"},water:{color:"파란색",hex:"#3B82F6",effect:"지혜와 적응력 증진"}};return{beneficial:[{name:r[s].color,hex:r[s].hex,description:`부족한 ${s} 오행을 보완하여 ${r[s].effect}`}],avoid:[{name:r[n].color,hex:r[n].hex,reason:`과도한 ${n} 오행을 더욱 강화시켜 불균형 초래`}]}}static getDirectionRecommendations(e){const s={wood:"동쪽",fire:"남쪽",earth:"중앙",metal:"서쪽",water:"북쪽"},n=Object.entries(e).sort(([,r],[,i])=>r-i)[0][0];return{beneficial:[{direction:s[n],element:n,benefit:`부족한 ${n} 오행 에너지 보충`}],avoid:[]}}static getActivityRecommendations(e){return{beneficial:[{activity:"산책, 원예",element:"wood",effect:"목 오행 보충으로 창의성 증진"},{activity:"운동, 사교활동",element:"fire",effect:"화 오행 보충으로 활력 증진"},{activity:"명상, 요가",element:"earth",effect:"토 오행 보충으로 안정성 증진"},{activity:"독서, 학습",element:"metal",effect:"금 오행 보충으로 논리성 증진"},{activity:"수영, 음악감상",element:"water",effect:"수 오행 보충으로 지혜 증진"}],avoid:[]}}static getLifestyleRecommendations(e){return{diet:[{food:"녹색 채소",element:"wood",benefit:"간 건강과 해독 기능 강화"},{food:"붉은 과일",element:"fire",benefit:"심장 건강과 순환 기능 강화"},{food:"곡물류",element:"earth",benefit:"소화 기능과 영양 흡수 강화"},{food:"견과류",element:"metal",benefit:"폐 기능과 면역력 강화"},{food:"해산물",element:"water",benefit:"신장 기능과 수분 대사 강화"}],exercise:[{type:"스트레칭",element:"wood",effect:"유연성과 순환 개선"},{type:"유산소 운동",element:"fire",effect:"심폐 기능과 활력 증진"},{type:"근력 운동",element:"earth",effect:"근육량과 기초대사 증진"},{type:"호흡 운동",element:"metal",effect:"폐활량과 집중력 증진"},{type:"수영",element:"water",effect:"전신 순환과 유연성 증진"}],career:[{field:"예술, 디자인",element:"wood",aptitude:"창의성과 미적 감각 활용"},{field:"영업, 마케팅",element:"fire",aptitude:"소통능력과 추진력 활용"},{field:"관리, 서비스",element:"earth",aptitude:"신뢰성과 책임감 활용"},{field:"분석, 연구",element:"metal",aptitude:"논리성과 체계성 활용"},{field:"상담, 교육",element:"water",aptitude:"지혜와 포용력 활용"}]}}static generateChartData(e){const s=this.getElementDetails();return{labels:Object.keys(e).map(n=>s[n].korean),datasets:[{data:Object.values(e),backgroundColor:Object.keys(e).map(n=>s[n].color.primary),borderColor:Object.keys(e).map(n=>s[n].color.secondary),borderWidth:2,hoverOffset:10}]}}}const Ci=({interpretation:t,loading:e=!1,error:s=null,category:n="basic"})=>{const[r,i]=j.useState(!0),[o,l]=j.useState(n==="spiritual"||n==="johoo"?"basic":n);if(j.useEffect(()=>{l(n==="spiritual"||n==="johoo"?"basic":n)},[n]),e)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),a.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"해석 데이터를 불러오는 중..."})]})});if(s)return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[a.jsx("span",{className:"mr-2",children:"⚠️"}),a.jsxs("span",{children:["해석 데이터를 불러올 수 없습니다: ",s]})]})});if(!t)return null;const c=[{id:"basic",label:"기본 분석",icon:_2},{id:"personality",label:"성격",icon:vd},{id:"fortune",label:"운세",icon:vd},{id:"career",label:"직업",icon:p2},{id:"relationship",label:"인연",icon:O2},{id:"health",label:"건강",icon:f2}],d=()=>{var S;const p=t.basic,y=t.johoo,v=t.spiritual;return p?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"사주 기본 분석"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"일간:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:p.dayMaster})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"강약:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:p.dayMasterStrength==="strong"?"강함":p.dayMasterStrength==="weak"?"약함":"중간"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"용신:"}),a.jsx("span",{className:"ml-2 font-medium text-indigo-600 dark:text-indigo-400",children:p.yongshin})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"격국:"}),a.jsx("span",{className:"ml-2 font-medium text-indigo-600 dark:text-indigo-400",children:p.gyeokguk})]})]}),a.jsx("p",{className:"mt-3 text-sm text-gray-700 dark:text-gray-300",children:p.summary})]}),y&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"조후 분석 (계절 조화)"}),a.jsxs("div",{className:"text-sm space-y-2",children:[a.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["출생 계절: ",a.jsx("span",{className:"font-medium",children:y.season==="spring"?"봄":y.season==="summer"?"여름":y.season==="autumn"?"가을":"겨울"})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(S=y.seasonalCharacteristics)==null?void 0:S.map((C,N)=>a.jsx("span",{className:"px-2 py-1 bg-white dark:bg-gray-700 rounded text-xs",children:C},N))}),y.recommendations&&y.recommendations.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1",children:"추천사항:"}),a.jsx("ul",{className:"list-disc list-inside text-gray-600 dark:text-gray-400",children:y.recommendations.map((C,N)=>a.jsx("li",{children:C},N))})]})]})]}),v&&a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"신살 분석"}),a.jsxs("div",{className:"text-sm space-y-3",children:[v.beneficialSpirits&&v.beneficialSpirits.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-green-700 dark:text-green-400 mb-1",children:"길신 (吉神)"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:v.beneficialSpirits.map((C,N)=>a.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs",children:["✨ ",C]},N))})]}),v.harmfulSpirits&&v.harmfulSpirits.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-red-700 dark:text-red-400 mb-1",children:"흉신 (凶神)"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:v.harmfulSpirits.map((C,N)=>a.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded text-xs",children:["⚠️ ",C]},N))})]})]})]})]}):a.jsx("p",{className:"text-gray-500",children:"기본 분석 데이터가 없습니다."})},h=()=>{const p=t.personality;return p?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"성격 특성"}),p.strengths&&p.strengths.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"강점"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.strengths.map((y,v)=>a.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs",children:y},v))})]}),p.weaknesses&&p.weaknesses.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-400 mb-2",children:"보완점"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.weaknesses.map((y,v)=>a.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-full text-xs",children:y},v))})]}),p.developmentAreas&&p.developmentAreas.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"발전 방향"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:p.developmentAreas.map((y,v)=>a.jsx("li",{children:y},v))})]})]})}):a.jsx("p",{className:"text-gray-500",children:"성격 분석 데이터가 없습니다."})},m=()=>{const p=t.fortune;return p?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"올해 운세"}),p.luckyElements&&p.luckyElements.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-400 mb-2",children:"행운 요소"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.luckyElements.map((y,v)=>a.jsxs("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-full text-xs",children:["🍀 ",y]},v))})]}),p.cautionPeriods&&p.cautionPeriods.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:"주의 시기"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.cautionPeriods.map((y,v)=>a.jsxs("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full text-xs",children:["⚠️ ",y]},v))})]})]})}):a.jsx("p",{className:"text-gray-500",children:"운세 분석 데이터가 없습니다."})},u=()=>{const p=t.career;return p?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"직업 적성"}),p.suitableCareers&&p.suitableCareers.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"적합한 직업"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.suitableCareers.map((y,v)=>a.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs",children:y},v))})]}),p.workEnvironment&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"추천 근무 환경"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.workEnvironment})]})]})}):a.jsx("p",{className:"text-gray-500",children:"직업 지도 데이터가 없습니다."})},g=()=>{const p=t.relationship;return p?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"인간관계"}),p.relationshipPattern&&a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:p.relationshipPattern}),p.advice&&p.advice.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-pink-700 dark:text-pink-400 mb-2",children:"관계 조언"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:p.advice.map((y,v)=>a.jsx("li",{children:y},v))})]})]})}):a.jsx("p",{className:"text-gray-500",children:"관계 분석 데이터가 없습니다."})},f=()=>{const p=t.health;return p?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"건강 관리"}),p.vulnerabilities&&p.vulnerabilities.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-400 mb-2",children:"주의할 건강 부위"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.vulnerabilities.map((y,v)=>a.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-full text-xs",children:y},v))})]}),p.lifestyle&&p.lifestyle.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"추천 생활습관"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400",children:p.lifestyle.map((y,v)=>a.jsx("li",{children:y},v))})]})]})}):a.jsx("p",{className:"text-gray-500",children:"건강 지도 데이터가 없습니다."})},x=()=>{switch(o){case"basic":return d();case"personality":return h();case"fortune":return m();case"career":return u();case"relationship":return g();case"health":return f();default:return d()}};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"✨"}),"사주 해석 분석"]}),a.jsx("button",{onClick:()=>i(!r),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:a.jsx("span",{children:r?"▲":"▼"})})]})}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700",children:c.map(p=>{const y=p.icon;return a.jsxs("button",{onClick:()=>l(p.id),className:`flex items-center px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors ${o===p.id?"text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600 dark:border-indigo-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.jsx(y,{className:"w-4 h-4 mr-2"}),p.label]},p.id)})}),a.jsx("div",{className:"p-6",children:x()})]})]})};dt.register(gs,Ps,Ds);const US=({sajuData:t,height:e=350,className:s="",showLegend:n=!0,showTooltips:r=!0})=>{const[i,o]=j.useState(null),[l,c]=j.useState(!1),[d,h]=j.useState(null),m=j.useMemo(()=>An.analyzeFromSaju(t),[t]),u=j.useMemo(()=>An.analyzeElementRelationships(m),[m]),g=j.useMemo(()=>An.generateRecommendations(m,u),[m,u]),f=j.useMemo(()=>An.getElementDetails(),[]);j.useEffect(()=>{(async()=>{if(t){c(!0),h(null);try{const N=await Pr.getComprehensiveInterpretation(t);o(N)}catch(N){console.error("해석 데이터 로드 실패:",N),h("해석 데이터를 불러올 수 없습니다.")}finally{c(!1)}}})()},[t]);const x=j.useMemo(()=>An.generateChartData(m),[m]),p=j.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:n,position:"right",labels:{font:{family:"Noto Sans KR, sans-serif",size:12},padding:15,usePointStyle:!0,pointStyle:"circle",generateLabels:C=>{var M;const N=C.data.datasets;if(N.length>0){const k=N[0];return((M=C.data.labels)==null?void 0:M.map((w,_)=>{var L,T;const E=k.data[_],D=k.data.reduce((A,I)=>A+I,0),O=D>0?(E/D*100).toFixed(1):"0.0";return{text:`${w} (${O}%)`,fillStyle:((L=k.backgroundColor)==null?void 0:L[_])||"#000",strokeStyle:((T=k.borderColor)==null?void 0:T[_])||"#000",lineWidth:2,hidden:!1,index:_}}))||[]}return[]}}},tooltip:{enabled:r,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{label(C){const N=C.label||"",M=C.parsed,k=C.dataset.data.reduce((D,O)=>D+O,0),w=k>0?(M/k*100).toFixed(1):"0.0",_=Object.keys(m)[C.dataIndex],E=f[_];return[`${N}: ${M}점 (${w}%)`,`특성: ${E.characteristics.positive.join(", ")}`]}}}},cutout:"50%",animation:{animateRotate:!0,animateScale:!0,duration:1e3}}),[n,r,m,f]),v=(()=>{const C=u.balance_score;return C>=80?{status:"매우 균형",color:"text-green-600",icon:"🟢"}:C>=60?{status:"균형 양호",color:"text-blue-600",icon:"🔵"}:C>=40?{status:"보통",color:"text-yellow-600",icon:"🟡"}:{status:"불균형",color:"text-red-600",icon:"🔴"}})();return Object.values(m).some(C=>C>0)?a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${s}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"🎯 오행 균형도"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"목, 화, 토, 금, 수 다섯 요소의 조화 상태"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${v.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:v.icon}),v.status]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["균형점수: ",u.balance_score.toFixed(0),"점"]})]})]}),a.jsxs("div",{className:"relative mb-6",style:{height:e-150},children:[a.jsx(el,{data:x,options:p}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:u.balance_score.toFixed(0)}),a.jsx("div",{className:"text-xs text-gray-500",children:"균형점수"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-1",children:"💪 강한 오행"}),u.dominant_elements.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300",children:u.dominant_elements.map(C=>f[C].korean).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-xs",children:"균형적 분포"})]}),a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-red-800 dark:text-red-200 mb-1",children:"⚠️ 약한 오행"}),u.weak_elements.length>0?a.jsx("div",{className:"text-red-700 dark:text-red-300",children:u.weak_elements.map(C=>f[C].korean).join(", ")}):a.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs",children:"특별히 약한 요소 없음"})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"🎨 추천 색상"}),g.colors.beneficial.length>0?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:g.colors.beneficial[0].hex}}),a.jsx("span",{className:"text-blue-700 dark:text-blue-300 text-xs",children:g.colors.beneficial[0].name})]}):a.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:"균형 유지"})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx(Ci,{interpretation:i,loading:l,error:d,category:"basic"})})]}):a.jsx("div",{className:`flex items-center justify-center ${s}`,style:{height:e},children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📊"}),a.jsx("div",{className:"text-lg font-medium",children:"오행 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})})},hs={bijeon:{name:"Bijeon",koreanName:"비견",hanja:"比肩",category:"self",icon:"🤝",color:{primary:"#6366F1",secondary:"#818CF8",background:"#EEF2FF"},keywords:["자아","동등","협력","자존심"],positiveTraits:["협동성","동료애","공정함","균형감각"],negativeTraits:["고집","경직성","비타협적","자기중심적"],description:"자아와 동등한 기운으로 협력과 경쟁을 나타냄",roles:["팀워크","동료관계","자아실현","공정한 경쟁"]},geopjae:{name:"Geopjae",koreanName:"겁재",hanja:"劫財",category:"self",icon:"⚡",color:{primary:"#8B5CF6",secondary:"#A78BFA",background:"#F3F4F6"},keywords:["경쟁","도전","변화","투쟁"],positiveTraits:["도전정신","변화적응","추진력","개척정신"],negativeTraits:["성급함","충동성","파괴성","불안정"],description:"재물을 빼앗는 기운으로 경쟁과 도전을 의미",roles:["혁신","변화주도","경쟁력","위기대응"]},siksin:{name:"Siksin",koreanName:"식신",hanja:"食神",category:"expression",icon:"🎨",color:{primary:"#10B981",secondary:"#34D399",background:"#ECFDF5"},keywords:["표현","재능","즐거움","창작"],positiveTraits:["재능","표현력","유쾌함","창의성"],negativeTraits:["방만함","안일함","현실도피","의존성"],description:"일간이 생하는 기운으로 재능과 표현력을 나타냄",roles:["예술","창작","엔터테인먼트","서비스"]},sanggwan:{name:"Sanggwan",koreanName:"상관",hanja:"傷官",category:"expression",icon:"🚀",color:{primary:"#F59E0B",secondary:"#FBBF24",background:"#FFFBEB"},keywords:["창조","반항","혁신","비판"],positiveTraits:["창조력","혁신성","독창성","예술성"],negativeTraits:["반항성","비판적","불안정","극단적"],description:"관을 상하게 하는 기운으로 창조와 혁신을 의미",roles:["혁신","창업","예술","비판"]},pyeonjae:{name:"Pyeonjae",koreanName:"편재",hanja:"偏財",category:"wealth",icon:"💰",color:{primary:"#EF4444",secondary:"#F87171",background:"#FEF2F2"},keywords:["활동","사교","유동","기회"],positiveTraits:["사교성","활동력","기회포착","유연성"],negativeTraits:["산만함","불안정","투기성","낭비"],description:"일간이 극하는 동성 재물로 활동적 재물을 의미",roles:["영업","사교","서비스","유통"]},jeongjae:{name:"Jeongjae",koreanName:"정재",hanja:"正財",category:"wealth",icon:"🏦",color:{primary:"#DC2626",secondary:"#EF4444",background:"#FEF2F2"},keywords:["근면","절약","안정","축적"],positiveTraits:["근면성","절약정신","계획성","안정성"],negativeTraits:["보수성","소심함","경직성","물질주의"],description:"일간이 극하는 이성 재물로 정당한 재물을 의미",roles:["관리","회계","저축","투자"]},pyeongwan:{name:"Pyeongwan",koreanName:"편관",hanja:"偏官",category:"authority",icon:"⚔️",color:{primary:"#7C2D12",secondary:"#A16207",background:"#FEF3C7"},keywords:["개척","모험","권력","압박"],positiveTraits:["개척정신","추진력","결단력","리더십"],negativeTraits:["독선적","권위적","성급함","강압적"],description:"일간을 극하는 동성 관성으로 개척과 권력을 의미",roles:["개척","경영","군사","혁신"]},jeonggwan:{name:"Jeonggwan",koreanName:"정관",hanja:"正官",category:"authority",icon:"👑",color:{primary:"#92400E",secondary:"#D97706",background:"#FEF3C7"},keywords:["명예","권위","질서","책임"],positiveTraits:["책임감","신뢰성","품격","리더십"],negativeTraits:["보수성","형식적","권위의존","소극성"],description:"일간을 극하는 이성 관성으로 명예와 권위를 의미",roles:["관리","행정","교육","상담"]},pyeongin:{name:"Pyeongin",koreanName:"편인",hanja:"偏印",category:"support",icon:"🔮",color:{primary:"#3B82F6",secondary:"#60A5FA",background:"#EFF6FF"},keywords:["직감","독창","신비","특별함"],positiveTraits:["직감력","독창성","신비성","특별함"],negativeTraits:["외로움","비현실적","변덕","까다로움"],description:"일간을 생하는 동성 인성으로 직감과 독창성을 의미",roles:["연구","창작","상담","치료"]},jeongin:{name:"Jeongin",koreanName:"정인",hanja:"正印",category:"support",icon:"📚",color:{primary:"#1D4ED8",secondary:"#3B82F6",background:"#EFF6FF"},keywords:["학습","보호","지혜","인덕"],positiveTraits:["학습력","인덕","보호본능","지혜"],negativeTraits:["의존성","소극성","현실도피","게으름"],description:"일간을 생하는 이성 인성으로 학습과 보호를 의미",roles:["교육","학습","상담","보육"]}},no={self:{name:"자아성",description:"자아와 관련된 기운",tenGods:["bijeon","geopjae"]},expression:{name:"표현성",description:"재능과 표현에 관련된 기운",tenGods:["siksin","sanggwan"]},wealth:{name:"재물성",description:"재물과 관련된 기운",tenGods:["pyeonjae","jeongjae"]},authority:{name:"관성",description:"권위와 명예에 관련된 기운",tenGods:["pyeongwan","jeonggwan"]},support:{name:"인성",description:"학습과 보호에 관련된 기운",tenGods:["pyeongin","jeongin"]}},Dn={DOMINANT_MIN:.15,WEAK_MAX:.03,EXCELLENT_MIN:85,GOOD_MIN:70,FAIR_MIN:50};class ro{static analyzeFromSaju(e){const{tenGods:s}=e;return{bijeon:s.bijeon||0,geopjae:s.geopjae||0,siksin:s.siksin||0,sanggwan:s.sanggwan||0,pyeonjae:s.pyeonjae||0,jeongjae:s.jeongjae||0,pyeongwan:s.pyeongwan||0,jeonggwan:s.jeonggwan||0,pyeongin:s.pyeongin||0,jeongin:s.jeongin||0}}static performFullAnalysis(e){const s=this.analyzeFromSaju(e),n=Object.values(s).reduce((m,u)=>m+u,0),r={};Object.entries(s).forEach(([m,u])=>{r[m]=n>0?u/n:0});const i=[],o=[],l=[];Object.entries(r).forEach(([m,u])=>{const g=m;s[g]===0?l.push(g):u>=Dn.DOMINANT_MIN?i.push(g):u<=Dn.WEAK_MAX&&o.push(g)});const c=this.calculateBalance(s),d=this.analyzePersonality(s),h=this.generateRecommendations(s,d);return{data:s,total:n,percentages:r,dominant:i,weak:o,missing:l,balance:c,personality:d,recommendations:h}}static calculateBalance(e){const n=Object.values(e).reduce((h,m)=>h+m,0);if(n===0)return{score:0,status:"poor",description:"십성 데이터가 부족합니다"};const r=Object.entries(no).map(([h,m])=>m.tenGods.reduce((g,f)=>g+e[f],0)/n),i=1/Object.keys(no).length,o=r.reduce((h,m)=>h+Math.pow(m-i,2),0)/r.length,l=Math.max(0,Math.min(100,100-o*500));let c,d;return l>=Dn.EXCELLENT_MIN?(c="excellent",d="매우 균형 잡힌 십성 분포"):l>=Dn.GOOD_MIN?(c="good",d="균형 잡힌 십성 분포"):l>=Dn.FAIR_MIN?(c="fair",d="보통 수준의 십성 분포"):(c="poor",d="불균형한 십성 분포"),{score:l,status:c,description:d}}static analyzePersonality(e){var g;const s=Object.values(e).reduce((f,x)=>f+x,0);if(s===0)return{leadership:0,creativity:0,stability:0,sociability:0,independence:0,overall:"분석 불가"};const n=Math.round((e.jeonggwan+e.pyeongwan)/s*100),r=Math.round((e.siksin+e.sanggwan)/s*100),i=Math.round((e.jeongin+e.pyeongin)/s*100),o=Math.round((e.jeongjae+e.pyeonjae)/s*100),l=Math.round((e.bijeon+e.geopjae)/s*100),c={leadership:n,creativity:r,stability:i,sociability:o,independence:l},d=Math.max(...Object.values(c)),h=(g=Object.entries(c).find(([,f])=>f===d))==null?void 0:g[0],u={leadership:"리더십형 - 권위와 책임감이 강한 성향",creativity:"창의형 - 표현력과 창조성이 뛰어난 성향",stability:"안정형 - 학습과 보호본능이 강한 성향",sociability:"사교형 - 대인관계와 재물관리에 뛰어난 성향",independence:"독립형 - 자아실현과 경쟁에 강한 성향"}[h||"stability"]||"균형형 - 다양한 면에서 고른 성향";return{leadership:n,creativity:r,stability:i,sociability:o,independence:l,overall:u}}static generateRecommendations(e,s){const n=this.getCareerRecommendations(e),r=this.getRelationshipAdvice(e,s),i=this.getDevelopmentSuggestions(e),o=this.getCautionAreas(e);return{career:n,relationships:r,development:i,caution:o}}static getCareerRecommendations(e){const s=Object.values(e).reduce((l,c)=>l+c,0),n=[],r=e.jeonggwan+e.pyeongwan;r/s>=.2&&n.push({field:"관리직, 행정직, 공무원",tenGod:"jeonggwan",suitability:Math.round(r/s*100),reason:"강한 관성으로 권위와 책임을 잘 감당할 수 있음"});const i=e.siksin+e.sanggwan;i/s>=.2&&n.push({field:"예술, 창작, 엔터테인먼트",tenGod:"siksin",suitability:Math.round(i/s*100),reason:"뛰어난 표현력과 창의성을 활용할 수 있음"});const o=e.jeongjae+e.pyeonjae;return o/s>=.2&&n.push({field:"영업, 마케팅, 금융",tenGod:"jeongjae",suitability:Math.round(o/s*100),reason:"재물 관리와 대인관계 능력이 뛰어남"}),n.length>0?n:[{field:"균형 잡힌 다양한 분야",tenGod:"bijeon",suitability:70,reason:"고른 십성 분포로 다양한 분야에 적응 가능"}]}static getRelationshipAdvice(e,s){const n=[];return s.sociability>30&&n.push({type:"대인관계",advice:"뛰어난 사교성을 활용하여 네트워킹을 적극적으로 활용하세요",basedOn:["jeongjae","pyeonjae"]}),s.independence>30&&n.push({type:"자아실현",advice:"독립적인 성향을 살려 자신만의 영역을 구축하세요",basedOn:["bijeon","geopjae"]}),n.length>0?n:[{type:"균형발전",advice:"다양한 관계를 통해 균형 잡힌 성장을 추구하세요",basedOn:["jeongin"]}]}static getDevelopmentSuggestions(e){const s=[];return Object.entries(e).sort(([,r],[,i])=>r-i).slice(0,2).map(([r])=>r).forEach(r=>{const i=hs[r];s.push({area:`${i.koreanName} 개발`,method:`${i.positiveTraits.join(", ")} 관련 활동 증가`,targetTenGod:r})}),s}static getCautionAreas(e){const s=[],n=Object.values(e).reduce((r,i)=>r+i,0);return Object.entries(e).forEach(([r,i])=>{if(i/n>.3){const l=hs[r];s.push({issue:`${l.koreanName} 과다`,reason:`${l.negativeTraits.join(", ")} 경향이 나타날 수 있음`,solution:`${l.positiveTraits[0]} 측면을 적절히 조절하고 다른 십성을 균형있게 발전시키세요`})}}),s}static generateChartData(e){const s=Object.keys(e).map(i=>`${hs[i].koreanName}
${hs[i].hanja}`),n=Object.values(e),r=Object.keys(e).map(i=>hs[i].color.primary);return{labels:s,datasets:[{label:"십성 분포",data:n,backgroundColor:r.map(i=>`${i}80`),borderColor:r,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}static generateCategoryChartData(e){const s=Object.entries(no).map(([n,r])=>{const i=r.tenGods.reduce((o,l)=>o+e[l],0);return{category:n,name:r.name,value:i}});return{labels:s.map(n=>n.name),datasets:[{data:s.map(n=>n.value),backgroundColor:["#6366F1","#10B981","#EF4444","#F59E0B","#3B82F6"],borderWidth:2}]}}}dt.register(on,ln,vs,gs,ac,Ps,Ds);const WS=({sajuData:t,height:e=400,className:s="",chartType:n="bar",_showCategory:r=!1})=>{const[i,o]=j.useState("individual"),[l,c]=j.useState(null),[d,h]=j.useState(!1),[m,u]=j.useState(null),g=j.useMemo(()=>ro.performFullAnalysis(t),[t]);j.useEffect(()=>{(async()=>{if(t){h(!0),u(null);try{const N=await Pr.getPersonalityAnalysis(t);c({personality:N})}catch(N){console.error("성격 분석 데이터 로드 실패:",N),u("성격 분석 데이터를 불러올 수 없습니다.")}finally{h(!1)}}})()},[t]);const f=j.useMemo(()=>ro.generateChartData(g.data),[g.data]),x=j.useMemo(()=>ro.generateCategoryChartData(g.data),[g.data]),p=j.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{title(C){return C[0].label||""},label(C){const N=C.parsed.x,M=g.total>0?(N/g.total*100).toFixed(1):"0.0",k=Object.keys(g.data)[C.dataIndex],w=hs[k];return[`점수: ${N}점 (${M}%)`,`특성: ${w.keywords.join(", ")}`,`장점: ${w.positiveTraits.join(", ")}`]}}}},scales:{x:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{font:{family:"Noto Sans KR, sans-serif",size:11}}},y:{grid:{display:!1},ticks:{font:{family:"Noto Sans KR, sans-serif",size:11},callback(C){return this.getLabelForValue(C).split(`
`)[0]}}}},animation:{duration:1e3}}),[g.data,g.total]),y=j.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{font:{family:"Noto Sans KR, sans-serif",size:11},padding:15,usePointStyle:!0,pointStyle:"rectRounded",generateLabels:C=>{var M;const N=C.data.datasets;if(N.length>0){const k=N[0];return((M=C.data.labels)==null?void 0:M.map((w,_)=>{var O,L;const E=k.data[_];if(E===0)return null;const D=g.total>0?(E/g.total*100).toFixed(1):"0.0";return{text:`${w} (${D}%)`,fillStyle:((O=k.backgroundColor)==null?void 0:O[_])||"#000",strokeStyle:((L=k.borderColor)==null?void 0:L[_])||"#000",lineWidth:2,hidden:!1,index:_}}).filter(Boolean))||[]}return[]}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",callbacks:{label(C){const N=C.parsed,M=g.total>0?(N/g.total*100).toFixed(1):"0.0";return`${C.label}: ${N}점 (${M}%)`}}}},cutout:"40%",animation:{animateRotate:!0,duration:1e3}}),[g.total]),S=(()=>{const C=g.balance.score;return C>=80?{status:"매우 균형",color:"text-green-600",icon:"🟢"}:C>=60?{status:"균형 양호",color:"text-blue-600",icon:"🔵"}:C>=40?{status:"보통",color:"text-yellow-600",icon:"🟡"}:{status:"불균형",color:"text-red-600",icon:"🔴"}})();return g.total===0?a.jsx("div",{className:`flex items-center justify-center ${s}`,style:{height:e},children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📊"}),a.jsx("div",{className:"text-lg font-medium",children:"십성 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})}):a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${s}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"⭐ 십성 분포도"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"10가지 십성의 강도와 성격 특성 분석"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[a.jsx("button",{onClick:()=>o("individual"),className:`px-3 py-1 text-xs transition-colors ${i==="individual"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"개별십성"}),a.jsx("button",{onClick:()=>o("category"),className:`px-3 py-1 text-xs transition-colors ${i==="category"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"카테고리"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${S.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:S.icon}),S.status]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["균형점수: ",g.balance.score.toFixed(0),"점"]})]})]})]}),a.jsx("div",{className:"mb-6",style:{height:e-200},children:i==="individual"?n==="bar"?a.jsx(Qg,{data:f,options:p}):a.jsx(el,{data:f,options:y}):a.jsx(el,{data:x,options:y})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🧠 성격 특성"}),a.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm",children:g.personality.overall})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"💪 강한 십성"}),g.dominant.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300 text-sm",children:g.dominant.map(C=>hs[C].koreanName).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm",children:"균형적 분포"})]}),a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-purple-800 dark:text-purple-200 mb-2",children:"🎯 추천 분야"}),g.recommendations.career.length>0?a.jsx("div",{className:"text-purple-700 dark:text-purple-300 text-sm",children:g.recommendations.career[0].field}):a.jsx("div",{className:"text-purple-600 dark:text-purple-400 text-sm",children:"다양한 분야 적합"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"핵심 능력치"}),Object.entries({리더십:g.personality.leadership,창의성:g.personality.creativity,안정성:g.personality.stability,사교성:g.personality.sociability,독립성:g.personality.independence}).map(([C,N])=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-16 text-xs text-gray-600 dark:text-gray-400",children:C}),a.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-purple-500",style:{width:`${N}%`}})}),a.jsx("div",{className:"w-8 text-xs text-gray-500 text-right",children:N})]},C))]}),a.jsx("div",{className:"mt-6",children:a.jsx(Ci,{interpretation:l,loading:d,error:m,category:"personality"})})]})},Xe={ja:{name:"Ja",koreanName:"자",hanja:"子",animal:"쥐",animalEmoji:"🐭",element:"water",season:"winter",month:11,direction:"북",time:"23:00-01:00",color:{primary:"#1E40AF",secondary:"#3B82F6",background:"#EFF6FF"},characteristics:["영리함","적응력","기회포착"],positiveTraits:["지혜","민첩성","실용성","생존력"],negativeTraits:["욕심","계산적","의심","소심함"],compatibility:["jin","sin"],conflict:["o"]},chuk:{name:"Chuk",koreanName:"축",hanja:"丑",animal:"소",animalEmoji:"🐂",element:"earth",season:"winter",month:12,direction:"북동",time:"01:00-03:00",color:{primary:"#92400E",secondary:"#D97706",background:"#FEF3C7"},characteristics:["성실함","인내력","신뢰성"],positiveTraits:["근면","신중함","책임감","안정성"],negativeTraits:["완고함","보수적","느림","고집"],compatibility:["sa","yu"],conflict:["mi"]},in:{name:"In",koreanName:"인",hanja:"寅",animal:"호랑이",animalEmoji:"🐅",element:"wood",season:"spring",month:1,direction:"동북",time:"03:00-05:00",color:{primary:"#059669",secondary:"#10B981",background:"#ECFDF5"},characteristics:["용맹함","리더십","정의감"],positiveTraits:["용기","추진력","정의감","보호본능"],negativeTraits:["성급함","독선","고집","감정적"],compatibility:["o","sul"],conflict:["sin"]},myo:{name:"Myo",koreanName:"묘",hanja:"卯",animal:"토끼",animalEmoji:"🐰",element:"wood",season:"spring",month:2,direction:"동",time:"05:00-07:00",color:{primary:"#16A34A",secondary:"#22C55E",background:"#F0FDF4"},characteristics:["온화함","예술성","직관력"],positiveTraits:["부드러움","예술감각","평화주의","직관"],negativeTraits:["우유부단","소심함","의존성","현실도피"],compatibility:["mi","hae"],conflict:["yu"]},jin:{name:"Jin",koreanName:"진",hanja:"辰",animal:"용",animalEmoji:"🐉",element:"earth",season:"spring",month:3,direction:"동남",time:"07:00-09:00",color:{primary:"#CA8A04",secondary:"#EAB308",background:"#FEFCE8"},characteristics:["역동성","변화","신비성"],positiveTraits:["포용력","변화적응","신비성","창조력"],negativeTraits:["변덕","과도함","신경질","불안정"],compatibility:["ja","yu"],conflict:["sul"]},sa:{name:"Sa",koreanName:"사",hanja:"巳",animal:"뱀",animalEmoji:"🐍",element:"fire",season:"summer",month:4,direction:"남동",time:"09:00-11:00",color:{primary:"#DC2626",secondary:"#EF4444",background:"#FEF2F2"},characteristics:["지혜","신중함","신비함"],positiveTraits:["지혜","통찰력","신중함","집중력"],negativeTraits:["의심","질투","복잡함","집착"],compatibility:["chuk","yu"],conflict:["hae"]},o:{name:"O",koreanName:"오",hanja:"午",animal:"말",animalEmoji:"🐎",element:"fire",season:"summer",month:5,direction:"남",time:"11:00-13:00",color:{primary:"#E11D48",secondary:"#F43F5E",background:"#FFF1F2"},characteristics:["활동성","열정","자유로움"],positiveTraits:["활력","자유로움","열정","진취성"],negativeTraits:["성급함","변덕","불안정","산만함"],compatibility:["in","sul"],conflict:["ja"]},mi:{name:"Mi",koreanName:"미",hanja:"未",animal:"양",animalEmoji:"🐑",element:"earth",season:"summer",month:6,direction:"남서",time:"13:00-15:00",color:{primary:"#A16207",secondary:"#D97706",background:"#FEF3C7"},characteristics:["온순함","협조성","예술성"],positiveTraits:["온순함","협조성","예술성","평화주의"],negativeTraits:["우유부단","의존성","소극적","걱정"],compatibility:["myo","hae"],conflict:["chuk"]},sin:{name:"Sin",koreanName:"신",hanja:"申",animal:"원숭이",animalEmoji:"🐵",element:"metal",season:"autumn",month:7,direction:"서남",time:"15:00-17:00",color:{primary:"#F59E0B",secondary:"#FBBF24",background:"#FFFBEB"},characteristics:["재치","활발함","변화"],positiveTraits:["재치","활발함","적응력","창의성"],negativeTraits:["변덕","경박함","불안정","장난"],compatibility:["ja","jin"],conflict:["in"]},yu:{name:"Yu",koreanName:"유",hanja:"酉",animal:"닭",animalEmoji:"🐓",element:"metal",season:"autumn",month:8,direction:"서",time:"17:00-19:00",color:{primary:"#D97706",secondary:"#F59E0B",background:"#FEF3C7"},characteristics:["정확성","부지런함","완벽주의"],positiveTraits:["정확성","부지런함","완벽주의","책임감"],negativeTraits:["까다로움","비판적","경직성","걱정"],compatibility:["chuk","sa","jin"],conflict:["myo"]},sul:{name:"Sul",koreanName:"술",hanja:"戌",animal:"개",animalEmoji:"🐕",element:"earth",season:"autumn",month:9,direction:"서북",time:"19:00-21:00",color:{primary:"#92400E",secondary:"#B45309",background:"#FEF3C7"},characteristics:["충성심","정의감","보호본능"],positiveTraits:["충성심","정의감","보호본능","신뢰성"],negativeTraits:["완고함","의심","보수적","걱정"],compatibility:["in","o"],conflict:["jin"]},hae:{name:"Hae",koreanName:"해",hanja:"亥",animal:"돼지",animalEmoji:"🐷",element:"water",season:"winter",month:10,direction:"북서",time:"21:00-23:00",color:{primary:"#1E40AF",secondary:"#2563EB",background:"#EFF6FF"},characteristics:["관대함","성실함","단순함"],positiveTraits:["관대함","성실함","정직함","포용력"],negativeTraits:["단순함","게으름","욕심","고집"],compatibility:["myo","mi"],conflict:["sa"]}},YS={harmony:{name:"조화",description:"서로를 보완하고 발전시키는 관계",color:"#10B981",icon:"🤝"},conflict:{name:"충돌",description:"서로 대립하고 견제하는 관계",color:"#EF4444",icon:"⚔️"},punishment:{name:"형",description:"서로를 억제하고 제약하는 관계",color:"#F59E0B",icon:"⚠️"},destruction:{name:"파괴",description:"서로를 해치고 파괴하는 관계",color:"#DC2626",icon:"💥"},neutral:{name:"중립",description:"특별한 영향을 주고받지 않는 관계",color:"#6B7280",icon:"➖"}};class GS{static analyzeFromSaju(e){const s={ja:Math.floor(Math.random()*30),chuk:Math.floor(Math.random()*30),in:Math.floor(Math.random()*30),myo:Math.floor(Math.random()*30),jin:Math.floor(Math.random()*30),sa:Math.floor(Math.random()*30),o:Math.floor(Math.random()*30),mi:Math.floor(Math.random()*30),sin:Math.floor(Math.random()*30),yu:Math.floor(Math.random()*30),sul:Math.floor(Math.random()*30),hae:Math.floor(Math.random()*30)},n=this.getYearBranch(e.birthInfo.year);return n&&(s[n]+=30),s}static performFullAnalysis(e){const s=this.analyzeFromSaju(e),n=Object.values(s).reduce((m,u)=>m+u,0),r=[],i=[];Object.entries(s).forEach(([m,u])=>{const g=m;u===0?i.push(g):u>=30&&r.push(g)});const o=this.analyzeInteractions(s),l=this.calculateOverallHarmony(s,o),c=this.calculateSeasonalBalance(s),d=this.analyzeAnimalPersonality(s,r),h=this.generateRecommendations(s,r,i);return{data:s,total:n,dominant:r,missing:i,interactions:o,overallHarmony:l,seasonalBalance:c,animalPersonality:d,recommendations:h}}static getYearBranch(e){const s=["sin","yu","sul","hae","ja","chuk","in","myo","jin","sa","o","mi"],n=e%12;return s[n]||null}static analyzeInteractions(e){const s={},n=Object.entries(e).filter(([r,i])=>i>10).map(([r])=>r);for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++){const o=n[r],l=n[i],c=`${o}-${l}`;s[c]=this.analyzeRelationship(o,l)}return s}static analyzeRelationship(e,s){const n=Xe[e];return n.compatibility.includes(s)?{relationship:{type:"harmony",strength:80,description:"서로 조화를 이루며 시너지를 발생시킴"},effects:["긍정적 에너지 증폭","목표 달성 용이","관계 개선"],recommendations:["함께 협력하면 좋은 결과","파트너십 강화 필요"]}:n.conflict.includes(s)?{relationship:{type:"conflict",strength:70,description:"서로 대립하고 충돌하는 관계"},effects:["갈등 가능성","스트레스 증가","의견 충돌"],recommendations:["중재자 필요","거리두기 권장","이해와 배려 필요"]}:{relationship:{type:"neutral",strength:30,description:"특별한 영향 없는 중립적 관계"},effects:["평범한 관계","특별한 영향 없음"],recommendations:["자연스러운 관계 유지"]}}static calculateOverallHarmony(e,s){let n=50;Object.values(s).forEach(l=>{l.relationship.type==="harmony"?n+=10:l.relationship.type==="conflict"&&(n-=10)});const r=Object.values(e),i=r.reduce((l,c)=>l+c,0)/r.length,o=r.reduce((l,c)=>l+Math.pow(c-i,2),0)/r.length;return n+=Math.max(0,30-Math.sqrt(o)),Math.max(0,Math.min(100,n))}static calculateSeasonalBalance(e){const s=(e.in||0)+(e.myo||0)+(e.jin||0),n=(e.sa||0)+(e.o||0)+(e.mi||0),r=(e.sin||0)+(e.yu||0)+(e.sul||0),i=(e.hae||0)+(e.ja||0)+(e.chuk||0),o=s+n+r+i,l=o>0?s/o*100:25,c=o>0?n/o*100:25,d=o>0?r/o*100:25,h=o>0?i/o*100:25,m=[Math.abs(l-25),Math.abs(c-25),Math.abs(d-25),Math.abs(h-25)],u=Math.max(...m),g=Math.max(0,100-u*2);return{spring:l,summer:c,autumn:d,winter:h,balance:g}}static analyzeAnimalPersonality(e,s){const n=s[0]||"ja",r=Xe[n];return{primaryAnimal:`${r.animalEmoji} ${r.animal}형 인격`,traits:r.positiveTraits,compatibility:r.compatibility.map(i=>Xe[i].animal),cautions:r.negativeTraits,lifePattern:`${r.time} 시간대에 활동적, ${r.direction}방향 선호`}}static generateRecommendations(e,s,n){const r=[],i=[],o=[],l=[];if(s.forEach(c=>{const d=Xe[c];r.push({color:d.color.primary,hex:d.color.primary,reason:`${d.animal}의 기운을 강화`}),i.push({direction:d.direction,benefit:`${d.element} 오행 에너지 증진`}),o.push({period:d.time,activity:"중요한 일정",effect:"최상의 컨디션과 운세"})}),s.length>0){const c=Xe[s[0]];l.push({compatible:c.compatibility.map(d=>Xe[d].animal),avoid:c.conflict.map(d=>Xe[d].animal),reason:"간지 상성과 상충 관계"})}return{colors:r.slice(0,3),directions:i.slice(0,2),timing:o.slice(0,3),relationships:l.slice(0,1)}}}class At{static findMaximumValues(e){const s=[];return e.forEach((n,r)=>{const i=Math.max(...n.values),o=n.values.indexOf(i);s.push({datasetIndex:r,pointIndex:o,value:i})}),s}static createHighlightedPointStyles(e,s){const n=this.findMaximumValues(e);return e.map((r,i)=>{const o=n.find(m=>m.datasetIndex===i),l=r.values.map((m,u)=>o&&u===o.pointIndex?s.maxPointStyle.radius:s.normalPointStyle.radius),c=r.values.map((m,u)=>o&&u===o.pointIndex?s.maxPointStyle.backgroundColor:this.COLOR_PALETTE.primary[i%this.COLOR_PALETTE.primary.length]),d=r.values.map((m,u)=>o&&u===o.pointIndex?s.maxPointStyle.borderColor:this.COLOR_PALETTE.primary[i%this.COLOR_PALETTE.primary.length]),h=r.values.map((m,u)=>o&&u===o.pointIndex?s.maxPointStyle.borderWidth:s.normalPointStyle.borderWidth);return{label:r.label,data:r.values,backgroundColor:`${this.COLOR_PALETTE.primary[i%this.COLOR_PALETTE.primary.length]}20`,borderColor:this.COLOR_PALETTE.primary[i%this.COLOR_PALETTE.primary.length],pointBackgroundColor:c,pointBorderColor:d,pointRadius:l,pointBorderWidth:h,borderWidth:2,tension:.1}})}static applyDarkMode(e,s){var r,i,o,l,c,d,h,m,u,g,f,x;const n=s?this.COLOR_PALETTE.dark:this.COLOR_PALETTE.light;return{...e,plugins:{...e.plugins,legend:{...(r=e.plugins)==null?void 0:r.legend,labels:{...(o=(i=e.plugins)==null?void 0:i.legend)==null?void 0:o.labels,color:n.text}}},scales:{r:{...(l=e.scales)==null?void 0:l.r,ticks:{...(d=(c=e.scales)==null?void 0:c.r)==null?void 0:d.ticks,color:n.text,display:!1},grid:{...(m=(h=e.scales)==null?void 0:h.r)==null?void 0:m.grid,color:n.gridLines},angleLines:{...(g=(u=e.scales)==null?void 0:u.r)==null?void 0:g.angleLines,color:n.gridLines},pointLabels:{...(x=(f=e.scales)==null?void 0:f.r)==null?void 0:x.pointLabels,color:n.text}}}}}static createCompatibilityRadarConfig(e,s,n,r=!1){const i=this.createHighlightedPointStyles(s,n),o=this.applyDarkMode(this.DEFAULT_RADAR_OPTIONS,r);return{type:"radar",data:{labels:e,datasets:i},options:{...o,animation:{...o.animation,duration:n.animation.duration,easing:n.animation.easing}}}}static createStandardRadarConfig(e,s,n=!1,r=!0){const i={highlightMaximum:r,maxPointStyle:{radius:6,backgroundColor:this.COLOR_PALETTE.accent,borderColor:this.COLOR_PALETTE.accent,borderWidth:3},normalPointStyle:{radius:3,borderWidth:2},animation:{duration:1200,easing:"easeInOutQuart"}};return this.createCompatibilityRadarConfig(e,s,i,n)}static getGradeColor(e){const s={S:"#FFD700","A+":"#FF6B6B",A:"#4ECDC4","B+":"#45B7D1",B:"#96CEB4",C:"#FFEAA7",D:"#DDA0DD"};return s[e]||s.B}static getResponsiveOptions(e){const s=e<400?10:e<600?12:14;return{plugins:{legend:{labels:{font:{size:s}}}},scales:{r:{ticks:{font:{size:Math.max(8,s-2)}},pointLabels:{font:{size:s}}}}}}static getUpdateAnimation(){return{duration:800,easing:"easeInOutQuart",onComplete(){}}}static getCompatibilityColorScheme(e){return e>=90?["#FFD700","#FFA500","#FF8C00"]:e>=80?["#FF6B6B","#FF8A80","#FFAB91"]:e>=70?["#4ECDC4","#80DEEA","#B2EBF2"]:e>=60?["#45B7D1","#81C784","#A5D6A7"]:["#96CEB4","#BCAAA4","#D7CCC8"]}}B(At,"COLOR_PALETTE",{primary:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#FFB4B4"],accent:"#FFD700",success:"#4CAF50",warning:"#FF9800",danger:"#F44336",dark:{background:"rgba(255, 255, 255, 0.1)",text:"#ffffff",gridLines:"rgba(255, 255, 255, 0.2)"},light:{background:"rgba(0, 0, 0, 0.1)",text:"#333333",gridLines:"rgba(0, 0, 0, 0.1)"}}),B(At,"DEFAULT_RADAR_OPTIONS",{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12,weight:"normal"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#ffffff",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label(e){const s=e.dataset.label||"",n=Math.round(e.parsed.r*10)/10;return`${s}: ${n}점`}}}},scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,display:!1,font:{size:10}},grid:{color:"rgba(128, 128, 128, 0.2)",lineWidth:1},angleLines:{color:"rgba(128, 128, 128, 0.2)",lineWidth:1},pointLabels:{font:{size:12,weight:"bold"}}}},animation:{duration:1500,easing:"easeInOutQuart"}});At.COLOR_PALETTE.accent,At.COLOR_PALETTE.accent;dt.register(zt,Gt,Qe,Ni,Ps,Ds);const KS=({sajuData:t,height:e=400,className:s="",showRelationships:n=!0,showSeasonalBalance:r=!0})=>{const[i,o]=j.useState("branches"),[l,c]=j.useState(!1);j.useEffect(()=>{const _=()=>{c(document.documentElement.classList.contains("dark"))};_();const E=new MutationObserver(_);return E.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>E.disconnect()},[]);const[d,h]=j.useState(null),[m,u]=j.useState(!1),[g,f]=j.useState(null),x=j.useMemo(()=>GS.performFullAnalysis(t),[t]);j.useEffect(()=>{(async()=>{if(t){u(!0),f(null);try{const E=await Pr.getSpiritualAnalysis(t);h({spiritual:E})}catch(E){console.error("신살 분석 데이터 로드 실패:",E),f("신살 분석 데이터를 불러올 수 없습니다.")}finally{u(!1)}}})()},[t]);const p=j.useMemo(()=>[{label:"12간지 분포",values:Object.values(x.data),timeFrame:"base"}],[x.data]),y=j.useMemo(()=>{const _=Object.keys(x.data).map(E=>{const D=Xe[E];return`${D.koreanName} ${D.animalEmoji}`});return At.createStandardRadarConfig(_,p,l,!0)},[p,l]),v=y.data,S=j.useMemo(()=>{const{seasonalBalance:_}=x;return[{label:"계절별 균형",values:[_.spring,_.summer,_.autumn,_.winter],timeFrame:"base"}]},[x.seasonalBalance]),C=j.useMemo(()=>{const _=["봄 🌸","여름 ☀️","가을 🍂","겨울 ❄️"];return At.createStandardRadarConfig(_,S,l,!0)},[S,l]),N=C.data,M=j.useMemo(()=>{var E,D,O,L,T,A,I,P,H,z,F,G,U;const _=i==="branches"?y.options:C.options;return{..._,responsive:!0,maintainAspectRatio:!1,plugins:{..._==null?void 0:_.plugins,legend:{...(E=_==null?void 0:_.plugins)==null?void 0:E.legend,display:!1},tooltip:{...(D=_==null?void 0:_.plugins)==null?void 0:D.tooltip,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",titleFont:{family:"Noto Sans KR, sans-serif",size:14,weight:"bold"},bodyFont:{family:"Noto Sans KR, sans-serif",size:12},callbacks:{...(L=(O=_==null?void 0:_.plugins)==null?void 0:O.tooltip)==null?void 0:L.callbacks,label(X){const V=X.parsed.r,Y=x.total>0?(V/x.total*100).toFixed(1):"0.0";if(i==="branches"){const Z=Object.keys(x.data)[X.dataIndex],W=Xe[Z];return[`${X.label}: ${V}점 (${Y}%)`,`원소: ${W.element}`,`특성: ${W.characteristics.join(", ")}`]}else return`${X.label}: ${V.toFixed(1)}점`}}}},scales:{..._==null?void 0:_.scales,r:{...(T=_==null?void 0:_.scales)==null?void 0:T.r,beginAtZero:!0,min:0,max:i==="branches"?Math.max(...Object.values(x.data))*1.2:100,ticks:{...(I=(A=_==null?void 0:_.scales)==null?void 0:A.r)==null?void 0:I.ticks,stepSize:i==="branches"?10:20,display:!1,font:{family:"Noto Sans KR, sans-serif",size:10},color:l?"#9CA3AF":"#6B7280"},grid:{...(H=(P=_==null?void 0:_.scales)==null?void 0:P.r)==null?void 0:H.grid,color:l?"rgba(156, 163, 175, 0.2)":"rgba(156, 163, 175, 0.3)"},angleLines:{...(F=(z=_==null?void 0:_.scales)==null?void 0:z.r)==null?void 0:F.angleLines,color:l?"rgba(156, 163, 175, 0.2)":"rgba(156, 163, 175, 0.3)"},pointLabels:{...(U=(G=_==null?void 0:_.scales)==null?void 0:G.r)==null?void 0:U.pointLabels,font:{family:"Noto Sans KR, sans-serif",size:11,weight:"500"},color:l?"#E5E7EB":"#1F2937",padding:10}}},animation:{..._==null?void 0:_.animation,duration:1e3}}},[i,y,C,x.data,x.total,l]),w=(()=>{const _=x.overallHarmony;return _>=80?{status:"매우 조화",color:"text-green-600 dark:text-green-400",icon:"🟢"}:_>=60?{status:"조화 양호",color:"text-blue-600 dark:text-blue-400",icon:"🔵"}:_>=40?{status:"보통",color:"text-yellow-600 dark:text-yellow-400",icon:"🟡"}:{status:"부조화",color:"text-red-600 dark:text-red-400",icon:"🔴"}})();return x.total===0?a.jsx("div",{className:`flex items-center justify-center ${s}`,style:{height:e},children:a.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"text-4xl mb-2",children:"🐲"}),a.jsx("div",{className:"text-lg font-medium",children:"12간지 데이터가 없습니다"}),a.jsx("div",{className:"text-sm",children:"사주 정보를 확인해주세요"})]})}):a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ${s}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:"🐲 12간지 상호작용"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"12지지의 분포와 상호 관계 분석"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[a.jsx("button",{onClick:()=>o("branches"),className:`px-3 py-1 text-xs transition-colors ${i==="branches"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"12간지"}),a.jsx("button",{onClick:()=>o("seasonal"),className:`px-3 py-1 text-xs transition-colors ${i==="seasonal"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"계절균형"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-sm font-medium ${w.color} flex items-center`,children:[a.jsx("span",{className:"mr-1",children:w.icon}),w.status]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["조화도: ",x.overallHarmony.toFixed(0),"점"]})]})]})]}),a.jsx("div",{className:"mb-6",style:{height:e-250},children:a.jsx(oc,{data:i==="branches"?v:N,options:M})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-purple-800 dark:text-purple-200 mb-2",children:x.animalPersonality.primaryAnimal}),a.jsx("div",{className:"text-purple-700 dark:text-purple-300 text-sm",children:x.animalPersonality.traits.slice(0,3).join(", ")})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"💪 강한 간지"}),x.dominant.length>0?a.jsx("div",{className:"text-green-700 dark:text-green-300 text-sm",children:x.dominant.map(_=>{const E=Xe[_];return`${E.koreanName}(${E.animal})`}).join(", ")}):a.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm",children:"균형적 분포"})]}),r&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🌈 계절 균형"}),a.jsxs("div",{className:"text-blue-700 dark:text-blue-300 text-sm",children:["균형도: ",x.seasonalBalance.balance.toFixed(0),"점"]})]})]}),n&&x.dominant.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"주요 관계 패턴"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(x.interactions).slice(0,3).map(([_,E])=>{const[D,O]=_.split("-"),L=YS[E.relationship.type];return a.jsxs("div",{className:"px-2 py-1 text-xs rounded-full flex items-center space-x-1",style:{backgroundColor:`${L.color}20`,color:L.color},children:[a.jsx("span",{children:L.icon}),a.jsxs("span",{children:[Xe[D].koreanName,"-",Xe[O].koreanName]})]},_)})})]}),a.jsx("div",{className:"mt-6",children:a.jsx(Ci,{interpretation:d,loading:m,error:g,category:"spiritual"})})]})},Zg=j.createContext({});function qS(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const lc=typeof window<"u",JS=lc?j.useLayoutEffect:j.useEffect,cc=j.createContext(null);function dc(t,e){t.indexOf(e)===-1&&t.push(e)}function hc(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Dt=(t,e,s)=>s>e?e:s<t?t:s;let uc=()=>{};const Pt={},ef=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function tf(t){return typeof t=="object"&&t!==null}const sf=t=>/^0[^.\s]+$/u.test(t);function mc(t){let e;return()=>(e===void 0&&(e=t()),e)}const st=t=>t,XS=(t,e)=>s=>e(t(s)),Ir=(...t)=>t.reduce(XS),fr=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n};class gc{constructor(){this.subscriptions=[]}add(e){return dc(this.subscriptions,e),()=>hc(this.subscriptions,e)}notify(e,s,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,s,n);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pt=t=>t*1e3,bt=t=>t/1e3;function nf(t,e){return e?t*(1e3/e):0}const rf=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,QS=1e-7,ZS=12;function e4(t,e,s,n,r){let i,o,l=0;do o=e+(s-e)/2,i=rf(o,n,r)-t,i>0?s=o:e=o;while(Math.abs(i)>QS&&++l<ZS);return o}function Fr(t,e,s,n){if(t===e&&s===n)return st;const r=i=>e4(i,0,1,t,s);return i=>i===0||i===1?i:rf(r(i),e,n)}const af=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,of=t=>e=>1-t(1-e),lf=Fr(.33,1.53,.69,.99),fc=of(lf),cf=af(fc),df=t=>(t*=2)<1?.5*fc(t):.5*(2-Math.pow(2,-10*(t-1))),xc=t=>1-Math.sin(Math.acos(t)),hf=of(xc),uf=af(xc),t4=Fr(.42,0,1,1),s4=Fr(0,0,.58,1),mf=Fr(.42,0,.58,1),n4=t=>Array.isArray(t)&&typeof t[0]!="number",gf=t=>Array.isArray(t)&&typeof t[0]=="number",r4={linear:st,easeIn:t4,easeInOut:mf,easeOut:s4,circIn:xc,circInOut:uf,circOut:hf,backIn:fc,backInOut:cf,backOut:lf,anticipate:df},a4=t=>typeof t=="string",ru=t=>{if(gf(t)){uc(t.length===4);const[e,s,n,r]=t;return Fr(e,s,n,r)}else if(a4(t))return r4[t];return t},da=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function i4(t,e){let s=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,m=!1,u=!1)=>{const f=u&&r?s:n;return m&&o.add(h),f.has(h)||f.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(l=h,r){i=!0;return}r=!0,[s,n]=[n,s],s.forEach(c),s.clear(),r=!1,i&&(i=!1,d.process(h))}};return d}const o4=40;function ff(t,e){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=da.reduce((S,C)=>(S[C]=i4(i),S),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:h,update:m,preRender:u,render:g,postRender:f}=o,x=()=>{const S=Pt.useManualTiming?r.timestamp:performance.now();s=!1,Pt.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(S-r.timestamp,o4),1)),r.timestamp=S,r.isProcessing=!0,l.process(r),c.process(r),d.process(r),h.process(r),m.process(r),u.process(r),g.process(r),f.process(r),r.isProcessing=!1,s&&e&&(n=!1,t(x))},p=()=>{s=!0,n=!0,r.isProcessing||t(x)};return{schedule:da.reduce((S,C)=>{const N=o[C];return S[C]=(M,k=!1,w=!1)=>(s||p(),N.schedule(M,k,w)),S},{}),cancel:S=>{for(let C=0;C<da.length;C++)o[da[C]].cancel(S)},state:r,steps:o}}const{schedule:ge,cancel:Jt,state:_e,steps:ao}=ff(typeof requestAnimationFrame<"u"?requestAnimationFrame:st,!0);let Ma;function l4(){Ma=void 0}const Be={now:()=>(Ma===void 0&&Be.set(_e.isProcessing||Pt.useManualTiming?_e.timestamp:performance.now()),Ma),set:t=>{Ma=t,queueMicrotask(l4)}},xf=t=>e=>typeof e=="string"&&e.startsWith(t),pc=xf("--"),c4=xf("var(--"),bc=t=>c4(t)?d4.test(t.split("/*")[0].trim()):!1,d4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},xr={...fn,transform:t=>Dt(0,1,t)},ha={...fn,default:1},Jn=t=>Math.round(t*1e5)/1e5,yc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function h4(t){return t==null}const u4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vc=(t,e)=>s=>!!(typeof s=="string"&&u4.test(s)&&s.startsWith(t)||e&&!h4(s)&&Object.prototype.hasOwnProperty.call(s,e)),pf=(t,e,s)=>n=>{if(typeof n!="string")return n;const[r,i,o,l]=n.match(yc);return{[t]:parseFloat(r),[e]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},m4=t=>Dt(0,255,t),io={...fn,transform:t=>Math.round(m4(t))},fs={test:vc("rgb","red"),parse:pf("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+io.transform(t)+", "+io.transform(e)+", "+io.transform(s)+", "+Jn(xr.transform(n))+")"};function g4(t){let e="",s="",n="",r="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),r=t.substring(4,5),e+=e,s+=s,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const tl={test:vc("#"),parse:g4,transform:fs.transform},Br=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ot=Br("deg"),yt=Br("%"),q=Br("px"),f4=Br("vh"),x4=Br("vw"),au={...yt,parse:t=>yt.parse(t)/100,transform:t=>yt.transform(t*100)},$s={test:vc("hsl","hue"),parse:pf("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+yt.transform(Jn(e))+", "+yt.transform(Jn(s))+", "+Jn(xr.transform(n))+")"},ke={test:t=>fs.test(t)||tl.test(t)||$s.test(t),parse:t=>fs.test(t)?fs.parse(t):$s.test(t)?$s.parse(t):tl.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?fs.transform(t):$s.transform(t),getAnimatableNone:t=>{const e=ke.parse(t);return e.alpha=0,ke.transform(e)}},p4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function b4(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(yc))==null?void 0:e.length)||0)+(((s=t.match(p4))==null?void 0:s.length)||0)>0}const bf="number",yf="color",y4="var",v4="var(",iu="${}",j4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pr(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},r=[];let i=0;const l=e.replace(j4,c=>(ke.test(c)?(n.color.push(i),r.push(yf),s.push(ke.parse(c))):c.startsWith(v4)?(n.var.push(i),r.push(y4),s.push(c)):(n.number.push(i),r.push(bf),s.push(parseFloat(c))),++i,iu)).split(iu);return{values:s,split:l,indexes:n,types:r}}function vf(t){return pr(t).values}function jf(t){const{split:e,types:s}=pr(t),n=e.length;return r=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],r[o]!==void 0){const l=s[o];l===bf?i+=Jn(r[o]):l===yf?i+=ke.transform(r[o]):i+=r[o]}return i}}const w4=t=>typeof t=="number"?0:ke.test(t)?ke.getAnimatableNone(t):t;function k4(t){const e=vf(t);return jf(t)(e.map(w4))}const Xt={test:b4,parse:vf,createTransformer:jf,getAnimatableNone:k4};function oo(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function N4({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let r=0,i=0,o=0;if(!e)r=i=o=s;else{const l=s<.5?s*(1+e):s+e-s*e,c=2*s-l;r=oo(c,l,t+1/3),i=oo(c,l,t),o=oo(c,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Ya(t,e){return s=>s>0?e:t}const xe=(t,e,s)=>t+(e-t)*s,lo=(t,e,s)=>{const n=t*t,r=s*(e*e-n)+n;return r<0?0:Math.sqrt(r)},S4=[tl,fs,$s],C4=t=>S4.find(e=>e.test(t));function ou(t){const e=C4(t);if(!e)return!1;let s=e.parse(t);return e===$s&&(s=N4(s)),s}const lu=(t,e)=>{const s=ou(t),n=ou(e);if(!s||!n)return Ya(t,e);const r={...s};return i=>(r.red=lo(s.red,n.red,i),r.green=lo(s.green,n.green,i),r.blue=lo(s.blue,n.blue,i),r.alpha=xe(s.alpha,n.alpha,i),fs.transform(r))},sl=new Set(["none","hidden"]);function _4(t,e){return sl.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function M4(t,e){return s=>xe(t,e,s)}function jc(t){return typeof t=="number"?M4:typeof t=="string"?bc(t)?Ya:ke.test(t)?lu:A4:Array.isArray(t)?wf:typeof t=="object"?ke.test(t)?lu:E4:Ya}function wf(t,e){const s=[...t],n=s.length,r=t.map((i,o)=>jc(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)s[o]=r[o](i);return s}}function E4(t,e){const s={...t,...e},n={};for(const r in s)t[r]!==void 0&&e[r]!==void 0&&(n[r]=jc(t[r])(t[r],e[r]));return r=>{for(const i in n)s[i]=n[i](r);return s}}function T4(t,e){const s=[],n={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],o=t.indexes[i][n[i]],l=t.values[o]??0;s[r]=l,n[i]++}return s}const A4=(t,e)=>{const s=Xt.createTransformer(e),n=pr(t),r=pr(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?sl.has(t)&&!r.values.length||sl.has(e)&&!n.values.length?_4(t,e):Ir(wf(T4(n,r),r.values),s):Ya(t,e)};function kf(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?xe(t,e,s):jc(t)(t,e)}const D4=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>ge.update(e,s),stop:()=>Jt(e),now:()=>_e.isProcessing?_e.timestamp:Be.now()}},Nf=(t,e,s=10)=>{let n="";const r=Math.max(Math.round(e/s),2);for(let i=0;i<r;i++)n+=Math.round(t(i/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Ga=2e4;function wc(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<Ga;)e+=s,n=t.next(e);return e>=Ga?1/0:e}function P4(t,e=100,s){const n=s({...t,keyframes:[0,e]}),r=Math.min(wc(n),Ga);return{type:"keyframes",ease:i=>n.next(r*i).value/e,duration:bt(r)}}const R4=5;function Sf(t,e,s){const n=Math.max(e-R4,0);return nf(s-t(n),e-n)}const pe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},co=.001;function L4({duration:t=pe.duration,bounce:e=pe.bounce,velocity:s=pe.velocity,mass:n=pe.mass}){let r,i,o=1-e;o=Dt(pe.minDamping,pe.maxDamping,o),t=Dt(pe.minDuration,pe.maxDuration,bt(t)),o<1?(r=d=>{const h=d*o,m=h*t,u=h-s,g=nl(d,o),f=Math.exp(-m);return co-u/g*f},i=d=>{const m=d*o*t,u=m*s+s,g=Math.pow(o,2)*Math.pow(d,2)*t,f=Math.exp(-m),x=nl(Math.pow(d,2),o);return(-r(d)+co>0?-1:1)*((u-g)*f)/x}):(r=d=>{const h=Math.exp(-d*t),m=(d-s)*t+1;return-co+h*m},i=d=>{const h=Math.exp(-d*t),m=(s-d)*(t*t);return h*m});const l=5/t,c=I4(r,i,l);if(t=pt(t),isNaN(c))return{stiffness:pe.stiffness,damping:pe.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:t}}}const O4=12;function I4(t,e,s){let n=s;for(let r=1;r<O4;r++)n=n-t(n)/e(n);return n}function nl(t,e){return t*Math.sqrt(1-e*e)}const F4=["duration","bounce"],B4=["stiffness","damping","mass"];function cu(t,e){return e.some(s=>t[s]!==void 0)}function $4(t){let e={velocity:pe.velocity,stiffness:pe.stiffness,damping:pe.damping,mass:pe.mass,isResolvedFromDuration:!1,...t};if(!cu(t,B4)&&cu(t,F4))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),r=n*n,i=2*Dt(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:pe.mass,stiffness:r,damping:i}}else{const s=L4(t);e={...e,...s,mass:pe.mass},e.isResolvedFromDuration=!0}return e}function Ka(t=pe.visualDuration,e=pe.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:r}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:h,duration:m,velocity:u,isResolvedFromDuration:g}=$4({...s,velocity:-bt(s.velocity||0)}),f=u||0,x=d/(2*Math.sqrt(c*h)),p=o-i,y=bt(Math.sqrt(c/h)),v=Math.abs(p)<5;n||(n=v?pe.restSpeed.granular:pe.restSpeed.default),r||(r=v?pe.restDelta.granular:pe.restDelta.default);let S;if(x<1){const N=nl(y,x);S=M=>{const k=Math.exp(-x*y*M);return o-k*((f+x*y*p)/N*Math.sin(N*M)+p*Math.cos(N*M))}}else if(x===1)S=N=>o-Math.exp(-y*N)*(p+(f+y*p)*N);else{const N=y*Math.sqrt(x*x-1);S=M=>{const k=Math.exp(-x*y*M),w=Math.min(N*M,300);return o-k*((f+x*y*p)*Math.sinh(w)+N*p*Math.cosh(w))/N}}const C={calculatedDuration:g&&m||null,next:N=>{const M=S(N);if(g)l.done=N>=m;else{let k=N===0?f:0;x<1&&(k=N===0?pt(f):Sf(S,N,M));const w=Math.abs(k)<=n,_=Math.abs(o-M)<=r;l.done=w&&_}return l.value=l.done?o:M,l},toString:()=>{const N=Math.min(wc(C),Ga),M=Nf(k=>C.next(N*k).value,N,30);return N+"ms "+M},toTransition:()=>{}};return C}Ka.applyToOptions=t=>{const e=P4(t,100,Ka);return t.ease=e.ease,t.duration=pt(e.duration),t.type="keyframes",t};function rl({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const m=t[0],u={done:!1,value:m},g=w=>l!==void 0&&w<l||c!==void 0&&w>c,f=w=>l===void 0?c:c===void 0||Math.abs(l-w)<Math.abs(c-w)?l:c;let x=s*e;const p=m+x,y=o===void 0?p:o(p);y!==p&&(x=y-m);const v=w=>-x*Math.exp(-w/n),S=w=>y+v(w),C=w=>{const _=v(w),E=S(w);u.done=Math.abs(_)<=d,u.value=u.done?y:E};let N,M;const k=w=>{g(u.value)&&(N=w,M=Ka({keyframes:[u.value,f(u.value)],velocity:Sf(S,w,u.value),damping:r,stiffness:i,restDelta:d,restSpeed:h}))};return k(0),{calculatedDuration:null,next:w=>{let _=!1;return!M&&N===void 0&&(_=!0,C(w),k(w)),N!==void 0&&w>=N?M.next(w-N):(!_&&C(w),u)}}}function V4(t,e,s){const n=[],r=s||Pt.mix||kf,i=t.length-1;for(let o=0;o<i;o++){let l=r(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||st:e;l=Ir(c,l)}n.push(l)}return n}function H4(t,e,{clamp:s=!0,ease:n,mixer:r}={}){const i=t.length;if(uc(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=V4(e,n,r),c=l.length,d=h=>{if(o&&h<t[0])return e[0];let m=0;if(c>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const u=fr(t[m],t[m+1],h);return l[m](u)};return s?h=>d(Dt(t[0],t[i-1],h)):d}function z4(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const r=fr(0,e,n);t.push(xe(s,1,r))}}function U4(t){const e=[0];return z4(e,t.length-1),e}function W4(t,e){return t.map(s=>s*e)}function Y4(t,e){return t.map(()=>e||mf).splice(0,t.length-1)}function Xn({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const r=n4(n)?n.map(ru):ru(n),i={done:!1,value:e[0]},o=W4(s&&s.length===e.length?s:U4(e),t),l=H4(o,e,{ease:Array.isArray(r)?r:Y4(e,r)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const G4=t=>t!==null;function kc(t,{repeat:e,repeatType:s="loop"},n,r=1){const i=t.filter(G4),l=r<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const K4={decay:rl,inertia:rl,tween:Xn,keyframes:Xn,spring:Ka};function Cf(t){typeof t.type=="string"&&(t.type=K4[t.type])}class Nc{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const q4=t=>t/100;class Sc extends Nc{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,r;const{motionValue:s}=this.options;s&&s.updatedAt!==Be.now()&&this.tick(Be.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(n=this.options).onStop)==null||r.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Cf(e);const{type:s=Xn,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=s||Xn;c!==Xn&&typeof l[0]!="number"&&(this.mixKeyframes=Ir(q4,kf(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=wc(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=d}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:h,repeat:m,repeatType:u,repeatDelay:g,type:f,onUpdate:x,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const y=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>r;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let S=this.currentTime,C=n;if(m){const w=Math.min(this.currentTime,r)/l;let _=Math.floor(w),E=w%1;!E&&w>=1&&(E=1),E===1&&_--,_=Math.min(_,m+1),!!(_%2)&&(u==="reverse"?(E=1-E,g&&(E-=g/l)):u==="mirror"&&(C=o)),S=Dt(0,1,E)*l}const N=v?{done:!1,value:h[0]}:C.next(S);i&&(N.value=i(N.value));let{done:M}=N;!v&&c!==null&&(M=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return k&&f!==rl&&(N.value=kc(h,this.options,p,this.speed)),x&&x(N.value),k&&this.finish(),N}then(e,s){return this.finished.then(e,s)}get duration(){return bt(this.calculatedDuration)}get time(){return bt(this.currentTime)}set time(e){var s;e=pt(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Be.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=bt(this.currentTime))}play(){var r,i;if(this.isStopped)return;const{driver:e=D4,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(r=this.options).onPlay)==null||i.call(r);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Be.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function J4(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const xs=t=>t*180/Math.PI,al=t=>{const e=xs(Math.atan2(t[1],t[0]));return il(e)},X4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:al,rotateZ:al,skewX:t=>xs(Math.atan(t[1])),skewY:t=>xs(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},il=t=>(t=t%360,t<0&&(t+=360),t),du=al,hu=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),uu=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Q4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hu,scaleY:uu,scale:t=>(hu(t)+uu(t))/2,rotateX:t=>il(xs(Math.atan2(t[6],t[5]))),rotateY:t=>il(xs(Math.atan2(-t[2],t[0]))),rotateZ:du,rotate:du,skewX:t=>xs(Math.atan(t[4])),skewY:t=>xs(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ol(t){return t.includes("scale")?1:0}function ll(t,e){if(!t||t==="none")return ol(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(s)n=Q4,r=s;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=X4,r=l}if(!r)return ol(e);const i=n[e],o=r[1].split(",").map(e6);return typeof i=="function"?i(o):o[i]}const Z4=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return ll(s,e)};function e6(t){return parseFloat(t.trim())}const xn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pn=new Set(xn),mu=t=>t===fn||t===q,t6=new Set(["x","y","z"]),s6=xn.filter(t=>!t6.has(t));function n6(t){const e=[];return s6.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const js={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ll(e,"x"),y:(t,{transform:e})=>ll(e,"y")};js.translateX=js.x;js.translateY=js.y;const ws=new Set;let cl=!1,dl=!1,hl=!1;function _f(){if(dl){const t=Array.from(ws).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const r=n6(n);r.length&&(s.set(n,r),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=s.get(n);r&&r.forEach(([i,o])=>{var l;(l=n.getValue(i))==null||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}dl=!1,cl=!1,ws.forEach(t=>t.complete(hl)),ws.clear()}function Mf(){ws.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(dl=!0)})}function r6(){hl=!0,Mf(),_f(),hl=!1}class Cc{constructor(e,s,n,r,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ws.add(this),cl||(cl=!0,ge.read(Mf),ge.resolveKeyframes(_f))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:r}=this;if(e[0]===null){const i=r==null?void 0:r.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&s){const l=n.readValue(s,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&i===void 0&&r.set(e[0])}J4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ws.delete(this)}cancel(){this.state==="scheduled"&&(ws.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const a6=t=>t.startsWith("--");function i6(t,e,s){a6(e)?t.style.setProperty(e,s):t.style[e]=s}const o6=mc(()=>window.ScrollTimeline!==void 0),l6={};function c6(t,e){const s=mc(t);return()=>l6[e]??s()}const Ef=c6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bn=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,gu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bn([0,.65,.55,1]),circOut:Bn([.55,0,1,.45]),backIn:Bn([.31,.01,.66,-.59]),backOut:Bn([.33,1.53,.69,.99])};function Tf(t,e){if(t)return typeof t=="function"?Ef()?Nf(t,e):"ease-out":gf(t)?Bn(t):Array.isArray(t)?t.map(s=>Tf(s,e)||gu.easeOut):gu[t]}function d6(t,e,s,{delay:n=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const h={[e]:s};c&&(h.offset=c);const m=Tf(l,r);Array.isArray(m)&&(h.easing=m);const u={delay:n,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(u.pseudoElement=d),t.animate(h,u)}function Af(t){return typeof t=="function"&&"applyToOptions"in t}function h6({type:t,...e}){return Af(t)&&Ef()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class u6 extends Nc{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:n,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,uc(typeof e.type!="string");const d=h6(e);this.animation=d6(s,n,r,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=kc(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):i6(s,n,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,n;const e=((n=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:n.call(s).duration)||0;return bt(Number(e))}get time(){return bt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&o6()?(this.animation.timeline=e,st):s(this)}}const Df={anticipate:df,backInOut:cf,circInOut:uf};function m6(t){return t in Df}function g6(t){typeof t.ease=="string"&&m6(t.ease)&&(t.ease=Df[t.ease])}const fu=10;class f6 extends u6{constructor(e){g6(e),Cf(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:n,onComplete:r,element:i,...o}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const l=new Sc({...o,autoplay:!1}),c=pt(this.finishedTime??this.time);s.setWithVelocity(l.sample(c-fu).value,l.sample(c).value,fu),l.stop()}}const xu=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xt.test(t)||t==="0")&&!t.startsWith("url("));function x6(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function p6(t,e,s,n){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=xu(r,e),l=xu(i,e);return!o||!l?!1:x6(t)||(s==="spring"||Af(s))&&n}function ul(t){t.duration=0,t.type}const b6=new Set(["opacity","clipPath","filter","transform"]),y6=mc(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v6(t){var h;const{motionValue:e,name:s,repeatDelay:n,repeatType:r,damping:i,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return y6()&&s&&b6.has(s)&&(s!=="transform"||!d)&&!c&&!n&&r!=="mirror"&&i!==0&&o!=="inertia"}const j6=40;class w6 extends Nc{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:h,...m}){var f;super(),this.stop=()=>{var x,p;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(p=this.keyframeResolver)==null||p.cancel()},this.createdAt=Be.now();const u={autoplay:e,delay:s,type:n,repeat:r,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:h,...m},g=(h==null?void 0:h.KeyframeResolver)||Cc;this.keyframeResolver=new g(l,(x,p,y)=>this.onKeyframesResolved(x,p,u,!y),c,d,h),(f=this.keyframeResolver)==null||f.scheduleResolve()}onKeyframesResolved(e,s,n,r){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:h}=n;this.resolvedAt=Be.now(),p6(e,i,o,l)||((Pt.instantAnimations||!c)&&(h==null||h(kc(e,n,s))),e[0]=e[e.length-1],ul(n),n.repeat=0);const u={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>j6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:e},g=!d&&v6(u)?new f6({...u,element:u.motionValue.owner.current}):new Sc(u);g.finished.then(()=>this.notifyFinished()).catch(st),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),r6()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const k6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function N6(t){const e=k6.exec(t);if(!e)return[,];const[,s,n,r]=e;return[`--${s??n}`,r]}function Pf(t,e,s=1){const[n,r]=N6(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return ef(o)?parseFloat(o):o}return bc(r)?Pf(r,e,s+1):r}function _c(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Rf=new Set(["width","height","top","left","right","bottom",...xn]),S6={test:t=>t==="auto",parse:t=>t},Lf=t=>e=>e.test(t),Of=[fn,q,yt,Ot,x4,f4,S6],pu=t=>Of.find(Lf(t));function C6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||sf(t):!0}const _6=new Set(["brightness","contrast","saturate","opacity"]);function M6(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(yc)||[];if(!n)return t;const r=s.replace(n,"");let i=_6.has(e)?1:0;return n!==s&&(i*=100),e+"("+i+r+")"}const E6=/\b([a-z-]*)\(.*?\)/gu,ml={...Xt,getAnimatableNone:t=>{const e=t.match(E6);return e?e.map(M6).join(" "):t}},bu={...fn,transform:Math.round},T6={rotate:Ot,rotateX:Ot,rotateY:Ot,rotateZ:Ot,scale:ha,scaleX:ha,scaleY:ha,scaleZ:ha,skew:Ot,skewX:Ot,skewY:Ot,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:xr,originX:au,originY:au,originZ:q},Mc={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,backgroundPositionX:q,backgroundPositionY:q,...T6,zIndex:bu,fillOpacity:xr,strokeOpacity:xr,numOctaves:bu},A6={...Mc,color:ke,backgroundColor:ke,outlineColor:ke,fill:ke,stroke:ke,borderColor:ke,borderTopColor:ke,borderRightColor:ke,borderBottomColor:ke,borderLeftColor:ke,filter:ml,WebkitFilter:ml},If=t=>A6[t];function Ff(t,e){let s=If(t);return s!==ml&&(s=Xt),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const D6=new Set(["auto","none","0"]);function P6(t,e,s){let n=0,r;for(;n<t.length&&!r;){const i=t[n];typeof i=="string"&&!D6.has(i)&&pr(i).values.length&&(r=t[n]),n++}if(r&&s)for(const i of e)t[i]=Ff(s,r)}class R6 extends Cc{constructor(e,s,n,r,i){super(e,s,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),bc(d))){const h=Pf(d,s.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Rf.has(n)||e.length!==2)return;const[r,i]=e,o=pu(r),l=pu(i);if(o!==l)if(mu(o)&&mu(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else js[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let r=0;r<e.length;r++)(e[r]===null||C6(e[r]))&&n.push(r);n.length&&P6(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=js[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const r=s[s.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var l;const{element:e,name:s,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(s);r&&r.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=js[s](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function L6(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const r=(s==null?void 0:s[t])??n.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const Bf=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function O6(t){return tf(t)&&"offsetHeight"in t}const yu=30,I6=t=>!isNaN(parseFloat(t));class F6{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const r=Be.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Be.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=I6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new gc);const n=this.events[e].add(s);return e==="change"?()=>{n(),ge.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Be.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>yu)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,yu);return nf(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cn(t,e){return new F6(t,e)}const{schedule:Ec}=ff(queueMicrotask,!1),at={x:!1,y:!1};function $f(){return at.x||at.y}function B6(t){return t==="x"||t==="y"?at[t]?null:(at[t]=!0,()=>{at[t]=!1}):at.x||at.y?null:(at.x=at.y=!0,()=>{at.x=at.y=!1})}function Vf(t,e){const s=L6(t),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[s,r,()=>n.abort()]}function vu(t){return!(t.pointerType==="touch"||$f())}function $6(t,e,s={}){const[n,r,i]=Vf(t,s),o=l=>{if(!vu(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const h=m=>{vu(m)&&(d(m),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,r)};return n.forEach(l=>{l.addEventListener("pointerenter",o,r)}),i}const Hf=(t,e)=>e?t===e?!0:Hf(t,e.parentElement):!1,Tc=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,V6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function H6(t){return V6.has(t.tagName)||t.tabIndex!==-1}const Ea=new WeakSet;function ju(t){return e=>{e.key==="Enter"&&t(e)}}function ho(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const z6=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=ju(()=>{if(Ea.has(s))return;ho(s,"down");const r=ju(()=>{ho(s,"up")}),i=()=>ho(s,"cancel");s.addEventListener("keyup",r,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function wu(t){return Tc(t)&&!$f()}function U6(t,e,s={}){const[n,r,i]=Vf(t,s),o=l=>{const c=l.currentTarget;if(!wu(l))return;Ea.add(c);const d=e(c,l),h=(g,f)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",u),Ea.has(c)&&Ea.delete(c),wu(g)&&typeof d=="function"&&d(g,{success:f})},m=g=>{h(g,c===window||c===document||s.useGlobalTarget||Hf(c,g.target))},u=g=>{h(g,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",u,r)};return n.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),O6(l)&&(l.addEventListener("focus",d=>z6(d,r)),!H6(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function zf(t){return tf(t)&&"ownerSVGElement"in t}function W6(t){return zf(t)&&t.tagName==="svg"}const De=t=>!!(t&&t.getVelocity),Y6=[...Of,ke,Xt],G6=t=>Y6.find(Lf(t)),Uf=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function K6(t=!0){const e=j.useContext(cc);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:r}=e,i=j.useId();j.useEffect(()=>{if(t)return r(i)},[t]);const o=j.useCallback(()=>t&&n&&n(i),[i,n,t]);return!s&&n?[!1,o]:[!0]}const Wf=j.createContext({strict:!1}),ku={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dn={};for(const t in ku)dn[t]={isEnabled:e=>ku[t].some(s=>!!e[s])};function q6(t){for(const e in t)dn[e]={...dn[e],...t[e]}}const J6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qa(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||J6.has(t)}let Yf=t=>!qa(t);function X6(t){typeof t=="function"&&(Yf=e=>e.startsWith("on")?!qa(e):t(e))}try{X6(require("@emotion/is-prop-valid").default)}catch{}function Q6(t,e,s){const n={};for(const r in t)r==="values"&&typeof t.values=="object"||(Yf(r)||s===!0&&qa(r)||!e&&!qa(r)||t.draggable&&r.startsWith("onDrag"))&&(n[r]=t[r]);return n}const _i=j.createContext({});function Mi(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function br(t){return typeof t=="string"||Array.isArray(t)}const Ac=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dc=["initial",...Ac];function Ei(t){return Mi(t.animate)||Dc.some(e=>br(t[e]))}function Gf(t){return!!(Ei(t)||t.variants)}function Z6(t,e){if(Ei(t)){const{initial:s,animate:n}=t;return{initial:s===!1||br(s)?s:void 0,animate:br(n)?n:void 0}}return t.inherit!==!1?e:{}}function e3(t){const{initial:e,animate:s}=Z6(t,j.useContext(_i));return j.useMemo(()=>({initial:e,animate:s}),[Nu(e),Nu(s)])}function Nu(t){return Array.isArray(t)?t.join(" "):t}const yr={};function t3(t){for(const e in t)yr[e]=t[e],pc(e)&&(yr[e].isCSSVariable=!0)}function Kf(t,{layout:e,layoutId:s}){return pn.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!yr[t]||t==="opacity")}const s3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},n3=xn.length;function r3(t,e,s){let n="",r=!0;for(let i=0;i<n3;i++){const o=xn[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const d=Bf(l,Mc[o]);if(!c){r=!1;const h=s3[o]||o;n+=`${h}(${d}) `}s&&(e[o]=d)}}return n=n.trim(),s?n=s(e,r?"":n):r&&(n="none"),n}function Pc(t,e,s){const{style:n,vars:r,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(pn.has(c)){o=!0;continue}else if(pc(c)){r[c]=d;continue}else{const h=Bf(d,Mc[c]);c.startsWith("origin")?(l=!0,i[c]=h):n[c]=h}}if(e.transform||(o||s?n.transform=r3(e,t.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=i;n.transformOrigin=`${c} ${d} ${h}`}}const Rc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qf(t,e,s){for(const n in e)!De(e[n])&&!Kf(n,s)&&(t[n]=e[n])}function a3({transformTemplate:t},e){return j.useMemo(()=>{const s=Rc();return Pc(s,e,t),Object.assign({},s.vars,s.style)},[e])}function i3(t,e){const s=t.style||{},n={};return qf(n,s,t),Object.assign(n,a3(t,e)),n}function o3(t,e){const s={},n=i3(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}const l3={offset:"stroke-dashoffset",array:"stroke-dasharray"},c3={offset:"strokeDashoffset",array:"strokeDasharray"};function d3(t,e,s=1,n=0,r=!0){t.pathLength=1;const i=r?l3:c3;t[i.offset]=q.transform(-n);const o=q.transform(e),l=q.transform(s);t[i.array]=`${o} ${l}`}function Jf(t,{attrX:e,attrY:s,attrScale:n,pathLength:r,pathSpacing:i=1,pathOffset:o=0,...l},c,d,h){if(Pc(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:u}=t;m.transform&&(u.transform=m.transform,delete m.transform),(u.transform||m.transformOrigin)&&(u.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),u.transform&&(u.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),s!==void 0&&(m.y=s),n!==void 0&&(m.scale=n),r!==void 0&&d3(m,r,i,o,!1)}const Xf=()=>({...Rc(),attrs:{}}),Qf=t=>typeof t=="string"&&t.toLowerCase()==="svg";function h3(t,e,s,n){const r=j.useMemo(()=>{const i=Xf();return Jf(i,e,Qf(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};qf(i,t.style,t),r.style={...i,...r.style}}return r}const u3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lc(t){return typeof t!="string"||t.includes("-")?!1:!!(u3.indexOf(t)>-1||/[A-Z]/u.test(t))}function m3(t,e,s,{latestValues:n},r,i=!1){const l=(Lc(t)?h3:o3)(e,n,r,t),c=Q6(e,typeof t=="string",i),d=t!==j.Fragment?{...c,...l,ref:s}:{},{children:h}=e,m=j.useMemo(()=>De(h)?h.get():h,[h]);return j.createElement(t,{...d,children:m})}function Su(t){const e=[{},{}];return t==null||t.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function Oc(t,e,s,n){if(typeof e=="function"){const[r,i]=Su(n);e=e(s!==void 0?s:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=Su(n);e=e(s!==void 0?s:t.custom,r,i)}return e}function Ta(t){return De(t)?t.get():t}function g3({scrapeMotionValuesFromProps:t,createRenderState:e},s,n,r){return{latestValues:f3(s,n,r,t),renderState:e()}}function f3(t,e,s,n){const r={},i=n(t,{});for(const u in i)r[u]=Ta(i[u]);let{initial:o,animate:l}=t;const c=Ei(t),d=Gf(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=s?s.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!Mi(m)){const u=Array.isArray(m)?m:[m];for(let g=0;g<u.length;g++){const f=Oc(t,u[g]);if(f){const{transitionEnd:x,transition:p,...y}=f;for(const v in y){let S=y[v];if(Array.isArray(S)){const C=h?S.length-1:0;S=S[C]}S!==null&&(r[v]=S)}for(const v in x)r[v]=x[v]}}}return r}const Zf=t=>(e,s)=>{const n=j.useContext(_i),r=j.useContext(cc),i=()=>g3(t,e,n,r);return s?i():qS(i)};function Ic(t,e,s){var i;const{style:n}=t,r={};for(const o in n)(De(n[o])||e.style&&De(e.style[o])||Kf(o,t)||((i=s==null?void 0:s.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(r[o]=n[o]);return r}const x3=Zf({scrapeMotionValuesFromProps:Ic,createRenderState:Rc});function ex(t,e,s){const n=Ic(t,e,s);for(const r in t)if(De(t[r])||De(e[r])){const i=xn.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}const p3=Zf({scrapeMotionValuesFromProps:ex,createRenderState:Xf}),b3=Symbol.for("motionComponentSymbol");function Vs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function y3(t,e,s){return j.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):Vs(s)&&(s.current=n))},[e])}const Fc=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),v3="framerAppearId",tx="data-"+Fc(v3),sx=j.createContext({});function j3(t,e,s,n,r){var x,p;const{visualElement:i}=j.useContext(_i),o=j.useContext(Wf),l=j.useContext(cc),c=j.useContext(Uf).reducedMotion,d=j.useRef(null);n=n||o.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:i,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,m=j.useContext(sx);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&w3(d.current,s,r,m);const u=j.useRef(!1);j.useInsertionEffect(()=>{h&&u.current&&h.update(s,l)});const g=s[tx],f=j.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((p=window.MotionHasOptimisedAnimation)==null?void 0:p.call(window,g)));return JS(()=>{h&&(u.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),f.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,g)}),f.current=!1),h.enteringChildren=void 0)}),h}function w3(t,e,s,n){const{layoutId:r,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:nx(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||l&&Vs(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:h,layoutScroll:c,layoutRoot:d})}function nx(t){if(t)return t.options.allowProjection!==!1?t.projection:nx(t.parent)}function uo(t,{forwardMotionProps:e=!1}={},s,n){s&&q6(s);const r=Lc(t)?p3:x3;function i(l,c){let d;const h={...j.useContext(Uf),...l,layoutId:k3(l)},{isStatic:m}=h,u=e3(l),g=r(l,m);if(!m&&lc){N3();const f=S3(h);d=f.MeasureLayout,u.visualElement=j3(t,g,h,n,f.ProjectionNode)}return a.jsxs(_i.Provider,{value:u,children:[d&&u.visualElement?a.jsx(d,{visualElement:u.visualElement,...h}):null,m3(t,l,y3(g,u.visualElement,c),g,m,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=j.forwardRef(i);return o[b3]=t,o}function k3({layoutId:t}){const e=j.useContext(Zg).id;return e&&t!==void 0?e+"-"+t:t}function N3(t,e){j.useContext(Wf).strict}function S3(t){const{drag:e,layout:s}=dn;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function C3(t,e){if(typeof Proxy>"u")return uo;const s=new Map,n=(i,o)=>uo(i,o,t,e),r=(i,o)=>n(i,o);return new Proxy(r,{get:(i,o)=>o==="create"?n:(s.has(o)||s.set(o,uo(o,void 0,t,e)),s.get(o))})}function rx({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function _3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function M3(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function mo(t){return t===void 0||t===1}function gl({scale:t,scaleX:e,scaleY:s}){return!mo(t)||!mo(e)||!mo(s)}function ds(t){return gl(t)||ax(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ax(t){return Cu(t.x)||Cu(t.y)}function Cu(t){return t&&t!=="0%"}function Ja(t,e,s){const n=t-s,r=e*n;return s+r}function _u(t,e,s,n,r){return r!==void 0&&(t=Ja(t,r,n)),Ja(t,s,n)+e}function fl(t,e=0,s=1,n,r){t.min=_u(t.min,e,s,n,r),t.max=_u(t.max,e,s,n,r)}function ix(t,{x:e,y:s}){fl(t.x,e.translate,e.scale,e.originPoint),fl(t.y,s.translate,s.scale,s.originPoint)}const Mu=.999999999999,Eu=1.0000000000001;function E3(t,e,s,n=!1){const r=s.length;if(!r)return;e.x=e.y=1;let i,o;for(let l=0;l<r;l++){i=s[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&zs(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ix(t,o)),n&&ds(i.latestValues)&&zs(t,i.latestValues))}e.x<Eu&&e.x>Mu&&(e.x=1),e.y<Eu&&e.y>Mu&&(e.y=1)}function Hs(t,e){t.min=t.min+e,t.max=t.max+e}function Tu(t,e,s,n,r=.5){const i=xe(t.min,t.max,r);fl(t,e,s,i,n)}function zs(t,e){Tu(t.x,e.x,e.scaleX,e.scale,e.originX),Tu(t.y,e.y,e.scaleY,e.scale,e.originY)}function ox(t,e){return rx(M3(t.getBoundingClientRect(),e))}function T3(t,e,s){const n=ox(t,s),{scroll:r}=e;return r&&(Hs(n.x,r.offset.x),Hs(n.y,r.offset.y)),n}const Au=()=>({translate:0,scale:1,origin:0,originPoint:0}),Us=()=>({x:Au(),y:Au()}),Du=()=>({min:0,max:0}),ye=()=>({x:Du(),y:Du()}),xl={current:null},lx={current:!1};function A3(){if(lx.current=!0,!!lc)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xl.current=t.matches;t.addEventListener("change",e),e()}else xl.current=!1}const D3=new WeakMap;function P3(t,e,s){for(const n in e){const r=e[n],i=s[n];if(De(r))t.addValue(n,r);else if(De(i))t.addValue(n,cn(r,{owner:t}));else if(i!==r)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(n);t.addValue(n,cn(o!==void 0?o:r,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const Pu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class R3{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Cc,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const u=Be.now();this.renderScheduledAt<u&&(this.renderScheduledAt=u,ge.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Ei(s),this.isVariantNode=Gf(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(s,{},this);for(const u in m){const g=m[u];c[u]!==void 0&&De(g)&&g.set(c[u])}}mount(e){var s;this.current=e,D3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),lx.current||A3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xl.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Jt(this.notifyUpdate),Jt(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const n=this.features[s];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=pn.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=s.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ge.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in dn){const s=dn[e];if(!s)continue;const{isEnabled:n,Feature:r}=s;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ye()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Pu.length;n++){const r=Pu[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=P3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=cn(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(ef(n)||sf(n))?n=parseFloat(n):!G6(n)&&Xt.test(s)&&(n=Ff(e,s)),this.setBaseTarget(e,De(n)?n.get():n)),De(n)?n.get():n}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const o=Oc(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[e])}if(s&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!De(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new gc),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){Ec.render(this.render)}}class cx extends R3{constructor(){super(...arguments),this.KeyframeResolver=R6}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;De(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function dx(t,{style:e,vars:s},n,r){const i=t.style;let o;for(o in e)i[o]=e[o];r==null||r.applyProjectionStyles(i,n);for(o in s)i.setProperty(o,s[o])}function L3(t){return window.getComputedStyle(t)}class O3 extends cx{constructor(){super(...arguments),this.type="html",this.renderInstance=dx}readValueFromInstance(e,s){var n;if(pn.has(s))return(n=this.projection)!=null&&n.isProjecting?ol(s):Z4(e,s);{const r=L3(e),i=(pc(s)?r.getPropertyValue(s):r[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return ox(e,s)}build(e,s,n){Pc(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return Ic(e,s,n)}}const hx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function I3(t,e,s,n){dx(t,e,void 0,n);for(const r in e.attrs)t.setAttribute(hx.has(r)?r:Fc(r),e.attrs[r])}class F3 extends cx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ye}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(pn.has(s)){const n=If(s);return n&&n.default||0}return s=hx.has(s)?s:Fc(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return ex(e,s,n)}build(e,s,n){Jf(e,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,s,n,r){I3(e,s,n,r)}mount(e){this.isSVGTag=Qf(e.tagName),super.mount(e)}}const B3=(t,e)=>Lc(t)?new F3(e):new O3(e,{allowProjection:t!==j.Fragment});function Ks(t,e,s){const n=t.getProps();return Oc(n,e,s!==void 0?s:n.custom,t)}const pl=t=>Array.isArray(t);function $3(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,cn(s))}function V3(t){return pl(t)?t[t.length-1]||0:t}function H3(t,e){const s=Ks(t,e);let{transitionEnd:n={},transition:r={},...i}=s||{};i={...i,...n};for(const o in i){const l=V3(i[o]);$3(t,o,l)}}function z3(t){return!!(De(t)&&t.add)}function bl(t,e){const s=t.getValue("willChange");if(z3(s))return s.add(e);if(!s&&Pt.WillChange){const n=new Pt.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function ux(t){return t.props[tx]}const U3=t=>t!==null;function W3(t,{repeat:e,repeatType:s="loop"},n){const r=t.filter(U3),i=e&&s!=="loop"&&e%2===1?0:r.length-1;return r[i]}const Y3={type:"spring",stiffness:500,damping:25,restSpeed:10},G3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),K3={type:"keyframes",duration:.8},q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J3=(t,{keyframes:e})=>e.length>2?K3:pn.has(t)?t.startsWith("scale")?G3(e[1]):Y3:q3;function X3({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const Bc=(t,e,s,n={},r,i)=>o=>{const l=_c(n,t)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-pt(c);const h={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:u=>{e.set(u),l.onUpdate&&l.onUpdate(u)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:r};X3(l)||Object.assign(h,J3(t,h)),h.duration&&(h.duration=pt(h.duration)),h.repeatDelay&&(h.repeatDelay=pt(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(ul(h),h.delay===0&&(m=!0)),(Pt.instantAnimations||Pt.skipAnimations)&&(m=!0,ul(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,m&&!i&&e.get()!==void 0){const u=W3(h.keyframes,l);if(u!==void 0){ge.update(()=>{h.onUpdate(u),h.onComplete()});return}}return l.isSync?new Sc(h):new w6(h)};function Q3({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function mx(t,e,{delay:s=0,transitionOverride:n,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(i=n);const c=[],d=r&&t.animationState&&t.animationState.getState()[r];for(const h in l){const m=t.getValue(h,t.latestValues[h]??null),u=l[h];if(u===void 0||d&&Q3(d,h))continue;const g={delay:s,..._c(i||{},h)},f=m.get();if(f!==void 0&&!m.isAnimating&&!Array.isArray(u)&&u===f&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const y=ux(t);if(y){const v=window.MotionHandoffAnimation(y,h,ge);v!==null&&(g.startTime=v,x=!0)}}bl(t,h),m.start(Bc(h,m,u,t.shouldReduceMotion&&Rf.has(h)?{type:!1}:g,t,x));const p=m.animation;p&&c.push(p)}return o&&Promise.all(c).then(()=>{ge.update(()=>{o&&H3(t,o)})}),c}function gx(t,e,s,n=0,r=1){const i=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*n;return typeof s=="function"?s(i,o):r===1?i*n:l-i*n}function yl(t,e,s={}){var c;const n=Ks(t,e,s.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(r=s.transitionOverride);const i=n?()=>Promise.all(mx(t,n,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:u}=r;return Z3(t,e,d,h,m,u,s)}:()=>Promise.resolve(),{when:l}=r;if(l){const[d,h]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>h())}else return Promise.all([i(),o(s.delay)])}function Z3(t,e,s=0,n=0,r=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(yl(c,e,{...o,delay:s+(typeof n=="function"?0:n)+gx(t.variantChildren,c,n,r,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function eC(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(i=>yl(t,i,s));n=Promise.all(r)}else if(typeof e=="string")n=yl(t,e,s);else{const r=typeof e=="function"?Ks(t,e,s.custom):e;n=Promise.all(mx(t,r,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}function fx(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}const tC=Dc.length;function xx(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?xx(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<tC;s++){const n=Dc[s],r=t.props[n];(br(r)||r===!1)&&(e[n]=r)}return e}const sC=[...Ac].reverse(),nC=Ac.length;function rC(t){return e=>Promise.all(e.map(({animation:s,options:n})=>eC(t,s,n)))}function aC(t){let e=rC(t),s=Ru(),n=!0;const r=c=>(d,h)=>{var u;const m=Ks(t,h,c==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);if(m){const{transition:g,transitionEnd:f,...x}=m;d={...d,...x,...f}}return d};function i(c){e=c(t)}function o(c){const{props:d}=t,h=xx(t.parent)||{},m=[],u=new Set;let g={},f=1/0;for(let p=0;p<nC;p++){const y=sC[p],v=s[y],S=d[y]!==void 0?d[y]:h[y],C=br(S),N=y===c?v.isActive:null;N===!1&&(f=p);let M=S===h[y]&&S!==d[y]&&C;if(M&&n&&t.manuallyAnimateOnMount&&(M=!1),v.protectedKeys={...g},!v.isActive&&N===null||!S&&!v.prevProp||Mi(S)||typeof S=="boolean")continue;const k=iC(v.prevProp,S);let w=k||y===c&&v.isActive&&!M&&C||p>f&&C,_=!1;const E=Array.isArray(S)?S:[S];let D=E.reduce(r(y),{});N===!1&&(D={});const{prevResolvedValues:O={}}=v,L={...O,...D},T=P=>{w=!0,u.has(P)&&(_=!0,u.delete(P)),v.needsAnimating[P]=!0;const H=t.getValue(P);H&&(H.liveStyle=!1)};for(const P in L){const H=D[P],z=O[P];if(g.hasOwnProperty(P))continue;let F=!1;pl(H)&&pl(z)?F=!fx(H,z):F=H!==z,F?H!=null?T(P):u.add(P):H!==void 0&&u.has(P)?T(P):v.protectedKeys[P]=!0}v.prevProp=S,v.prevResolvedValues=D,v.isActive&&(g={...g,...D}),n&&t.blockInitialAnimation&&(w=!1);const A=M&&k;w&&(!A||_)&&m.push(...E.map(P=>{const H={type:y};if(typeof P=="string"&&n&&!A&&t.manuallyAnimateOnMount&&t.parent){const{parent:z}=t,F=Ks(z,P);if(z.enteringChildren&&F){const{delayChildren:G}=F.transition||{};H.delay=gx(z.enteringChildren,t,G)}}return{animation:P,options:H}}))}if(u.size){const p={};if(typeof d.initial!="boolean"){const y=Ks(t,Array.isArray(d.initial)?d.initial[0]:d.initial);y&&y.transition&&(p.transition=y.transition)}u.forEach(y=>{const v=t.getBaseTarget(y),S=t.getValue(y);S&&(S.liveStyle=!0),p[y]=v??null}),m.push({animation:p})}let x=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),n=!1,x?e(m):Promise.resolve()}function l(c,d){var m;if(s[c].isActive===d)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(u=>{var g;return(g=u.animationState)==null?void 0:g.setActive(c,d)}),s[c].isActive=d;const h=o(c);for(const u in s)s[u].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s,reset:()=>{s=Ru(),n=!0}}}function iC(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fx(e,t):!1}function os(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ru(){return{animate:os(!0),whileInView:os(),whileHover:os(),whileTap:os(),whileDrag:os(),whileFocus:os(),exit:os()}}class ts{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oC extends ts{constructor(e){super(e),e.animationState||(e.animationState=aC(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mi(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let lC=0;class cC extends ts{constructor(){super(...arguments),this.id=lC++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);s&&!e&&r.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const dC={animation:{Feature:oC},exit:{Feature:cC}};function vr(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function $r(t){return{point:{x:t.pageX,y:t.pageY}}}const hC=t=>e=>Tc(e)&&t(e,$r(e));function Qn(t,e,s,n){return vr(t,e,hC(s),n)}const px=1e-4,uC=1-px,mC=1+px,bx=.01,gC=0-bx,fC=0+bx;function Re(t){return t.max-t.min}function xC(t,e,s){return Math.abs(t-e)<=s}function Lu(t,e,s,n=.5){t.origin=n,t.originPoint=xe(e.min,e.max,t.origin),t.scale=Re(s)/Re(e),t.translate=xe(s.min,s.max,t.origin)-t.originPoint,(t.scale>=uC&&t.scale<=mC||isNaN(t.scale))&&(t.scale=1),(t.translate>=gC&&t.translate<=fC||isNaN(t.translate))&&(t.translate=0)}function Zn(t,e,s,n){Lu(t.x,e.x,s.x,n?n.originX:void 0),Lu(t.y,e.y,s.y,n?n.originY:void 0)}function Ou(t,e,s){t.min=s.min+e.min,t.max=t.min+Re(e)}function pC(t,e,s){Ou(t.x,e.x,s.x),Ou(t.y,e.y,s.y)}function Iu(t,e,s){t.min=e.min-s.min,t.max=t.min+Re(e)}function er(t,e,s){Iu(t.x,e.x,s.x),Iu(t.y,e.y,s.y)}function Je(t){return[t("x"),t("y")]}const yx=({current:t})=>t?t.ownerDocument.defaultView:null,Fu=(t,e)=>Math.abs(t-e);function bC(t,e){const s=Fu(t.x,e.x),n=Fu(t.y,e.y);return Math.sqrt(s**2+n**2)}class vx{constructor(e,s,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=fo(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,f=bC(u.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!f)return;const{point:x}=u,{timestamp:p}=_e;this.history.push({...x,timestamp:p});const{onStart:y,onMove:v}=this.handlers;g||(y&&y(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,g)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=go(g,this.transformPagePoint),ge.update(this.updatePoint,!0)},this.handlePointerUp=(u,g)=>{this.end();const{onEnd:f,onSessionEnd:x,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=fo(u.type==="pointercancel"?this.lastMoveEventInfo:go(g,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,y),x&&x(u,y)},!Tc(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=r||window;const l=$r(e),c=go(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=_e;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=s;m&&m(e,fo(c,this.history)),this.removeListeners=Ir(Qn(this.contextWindow,"pointermove",this.handlePointerMove),Qn(this.contextWindow,"pointerup",this.handlePointerUp),Qn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Jt(this.updatePoint)}}function go(t,e){return e?{point:e(t.point)}:t}function Bu(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fo({point:t},e){return{point:t,delta:Bu(t,jx(e)),offset:Bu(t,yC(e)),velocity:vC(e,.1)}}function yC(t){return t[0]}function jx(t){return t[t.length-1]}function vC(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const r=jx(t);for(;s>=0&&(n=t[s],!(r.timestamp-n.timestamp>pt(e)));)s--;if(!n)return{x:0,y:0};const i=bt(r.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-n.x)/i,y:(r.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function jC(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?xe(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?xe(s,t,n.max):Math.min(t,s)),t}function $u(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function wC(t,{top:e,left:s,bottom:n,right:r}){return{x:$u(t.x,s,r),y:$u(t.y,e,n)}}function Vu(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function kC(t,e){return{x:Vu(t.x,e.x),y:Vu(t.y,e.y)}}function NC(t,e){let s=.5;const n=Re(t),r=Re(e);return r>n?s=fr(e.min,e.max-n,t.min):n>r&&(s=fr(t.min,t.max-r,e.min)),Dt(0,1,s)}function SC(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const vl=.35;function CC(t=vl){return t===!1?t=0:t===!0&&(t=vl),{x:Hu(t,"left","right"),y:Hu(t,"top","bottom")}}function Hu(t,e,s){return{min:zu(t,e),max:zu(t,s)}}function zu(t,e){return typeof t=="number"?t:t[e]||0}const _C=new WeakMap;class MC{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ye(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor($r(m).point)},o=(m,u)=>{const{drag:g,dragPropagation:f,onDragStart:x}=this.getProps();if(g&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=B6(g),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=u,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Je(y=>{let v=this.getAxisMotionValue(y).get()||0;if(yt.test(v)){const{projection:S}=this.visualElement;if(S&&S.layout){const C=S.layout.layoutBox[y];C&&(v=Re(C)*(parseFloat(v)/100))}}this.originPoint[y]=v}),x&&ge.postRender(()=>x(m,u)),bl(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},l=(m,u)=>{this.latestPointerEvent=m,this.latestPanInfo=u;const{dragPropagation:g,dragDirectionLock:f,onDirectionLock:x,onDrag:p}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:y}=u;if(f&&this.currentDirection===null){this.currentDirection=EC(y),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",u.point,y),this.updateAxis("y",u.point,y),this.visualElement.render(),p&&p(m,u)},c=(m,u)=>{this.latestPointerEvent=m,this.latestPanInfo=u,this.stop(m,u),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Je(m=>{var u;return this.getAnimationState(m)==="paused"&&((u=this.getAxisMotionValue(m).animation)==null?void 0:u.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new vx(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:n,contextWindow:yx(this.visualElement)})}stop(e,s){const n=e||this.latestPointerEvent,r=s||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ge.postRender(()=>l(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:r}=this.getProps();if(!n||!ua(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=jC(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,r=this.constraints;e&&Vs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=wC(n.layoutBox,e):this.constraints=!1,this.elastic=CC(s),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Je(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=SC(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Vs(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=T3(n,r.root,this.visualElement.getTransformPagePoint());let o=kC(r.layout.layoutBox,i);if(s){const l=s(_3(o));this.hasMutatedConstraints=!!l,l&&(o=rx(l))}return o}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Je(h=>{if(!ua(h,s,this.currentDirection))return;let m=c&&c[h]||{};o&&(m={min:0,max:0});const u=r?200:1e6,g=r?40:1e7,f={type:"inertia",velocity:n?e[h]:0,bounceStiffness:u,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(h,f)});return Promise.all(d).then(l)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return bl(this.visualElement,e),n.start(Bc(e,n,0,s,this.visualElement,!1))}stopAnimation(){Je(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Je(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[s];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Je(s=>{const{drag:n}=this.getProps();if(!ua(s,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(s);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[s];i.set(e[s]-xe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Vs(s)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Je(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();r[o]=NC({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Je(o=>{if(!ua(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(xe(c,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;_C.set(this.visualElement,this);const e=this.visualElement.current,s=Qn(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Vs(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ge.read(n);const o=vr(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Je(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=vl,dragMomentum:l=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function ua(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function EC(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class TC extends ts{constructor(e){super(e),this.removeGroupControls=st,this.removeListeners=st,this.controls=new MC(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||st}unmount(){this.removeGroupControls(),this.removeListeners()}}const Uu=t=>(e,s)=>{t&&ge.postRender(()=>t(e,s))};class AC extends ts{constructor(){super(...arguments),this.removePointerDownListener=st}onPointerDown(e){this.session=new vx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Uu(e),onStart:Uu(s),onMove:n,onEnd:(i,o)=>{delete this.session,r&&ge.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=Qn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Aa={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Wu(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(q.test(t))t=parseFloat(t);else return t;const s=Wu(t,e.target.x),n=Wu(t,e.target.y);return`${s}% ${n}%`}},DC={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,r=Xt.parse(t);if(r.length>5)return n;const i=Xt.createTransformer(t),o=typeof r[0]!="number"?1:0,l=s.x.scale*e.x,c=s.y.scale*e.y;r[0+o]/=l,r[1+o]/=c;const d=xe(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),i(r)}};let xo=!1;class PC extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;t3(RC),i&&(s.group&&s.group.add(i),n&&n.register&&r&&n.register(i),xo&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Aa.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:r,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,xo=!0,r||e.layoutDependency!==s||s===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ge.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ec.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:r}=e;xo=!0,r&&(r.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wx(t){const[e,s]=K6(),n=j.useContext(Zg);return a.jsx(PC,{...t,layoutGroup:n,switchLayoutGroup:j.useContext(sx),isPresent:e,safeToRemove:s})}const RC={borderRadius:{...Pn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pn,borderTopRightRadius:Pn,borderBottomLeftRadius:Pn,borderBottomRightRadius:Pn,boxShadow:DC};function LC(t,e,s){const n=De(t)?t:cn(t);return n.start(Bc("",n,e,s)),n.animation}const OC=(t,e)=>t.depth-e.depth;class IC{constructor(){this.children=[],this.isDirty=!1}add(e){dc(this.children,e),this.isDirty=!0}remove(e){hc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(OC),this.isDirty=!1,this.children.forEach(e)}}function FC(t,e){const s=Be.now(),n=({timestamp:r})=>{const i=r-s;i>=e&&(Jt(n),t(i-e))};return ge.setup(n,!0),()=>Jt(n)}const kx=["TopLeft","TopRight","BottomLeft","BottomRight"],BC=kx.length,Yu=t=>typeof t=="string"?parseFloat(t):t,Gu=t=>typeof t=="number"||q.test(t);function $C(t,e,s,n,r,i){r?(t.opacity=xe(0,s.opacity??1,VC(n)),t.opacityExit=xe(e.opacity??1,0,HC(n))):i&&(t.opacity=xe(e.opacity??1,s.opacity??1,n));for(let o=0;o<BC;o++){const l=`border${kx[o]}Radius`;let c=Ku(e,l),d=Ku(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Gu(c)===Gu(d)?(t[l]=Math.max(xe(Yu(c),Yu(d),n),0),(yt.test(d)||yt.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||s.rotate)&&(t.rotate=xe(e.rotate||0,s.rotate||0,n))}function Ku(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const VC=Nx(0,.5,hf),HC=Nx(.5,.95,st);function Nx(t,e,s){return n=>n<t?0:n>e?1:s(fr(t,e,n))}function qu(t,e){t.min=e.min,t.max=e.max}function qe(t,e){qu(t.x,e.x),qu(t.y,e.y)}function Ju(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Xu(t,e,s,n,r){return t-=e,t=Ja(t,1/s,n),r!==void 0&&(t=Ja(t,1/r,n)),t}function zC(t,e=0,s=1,n=.5,r,i=t,o=t){if(yt.test(e)&&(e=parseFloat(e),e=xe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=xe(i.min,i.max,n);t===i&&(l-=e),t.min=Xu(t.min,e,s,l,r),t.max=Xu(t.max,e,s,l,r)}function Qu(t,e,[s,n,r],i,o){zC(t,e[s],e[n],e[r],e.scale,i,o)}const UC=["x","scaleX","originX"],WC=["y","scaleY","originY"];function Zu(t,e,s,n){Qu(t.x,e,UC,s?s.x:void 0,n?n.x:void 0),Qu(t.y,e,WC,s?s.y:void 0,n?n.y:void 0)}function e0(t){return t.translate===0&&t.scale===1}function Sx(t){return e0(t.x)&&e0(t.y)}function t0(t,e){return t.min===e.min&&t.max===e.max}function YC(t,e){return t0(t.x,e.x)&&t0(t.y,e.y)}function s0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Cx(t,e){return s0(t.x,e.x)&&s0(t.y,e.y)}function n0(t){return Re(t.x)/Re(t.y)}function r0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class GC{constructor(){this.members=[]}add(e){dc(this.members,e),e.scheduleRender()}remove(e){if(hc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(r=>e===r);if(s===0)return!1;let n;for(let r=s;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function KC(t,e,s){let n="";const r=t.x.translate/e.x,i=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((r||i||o)&&(n=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:u,skewX:g,skewY:f}=s;d&&(n=`perspective(${d}px) ${n}`),h&&(n+=`rotate(${h}deg) `),m&&(n+=`rotateX(${m}deg) `),u&&(n+=`rotateY(${u}deg) `),g&&(n+=`skewX(${g}deg) `),f&&(n+=`skewY(${f}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const po=["","X","Y","Z"],qC=1e3;let JC=0;function bo(t,e,s,n){const{latestValues:r}=e;r[t]&&(s[t]=r[t],e.setStaticValue(t,0),n&&(n[t]=0))}function _x(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=ux(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",ge,!(r||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&_x(n)}function Mx({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=JC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZC),this.nodes.forEach(n_),this.nodes.forEach(r_),this.nodes.forEach(e_)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new IC)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new gc),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=zf(o)&&!W6(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,m=0;const u=()=>this.root.updateBlockedByResize=!1;ge.read(()=>{m=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==m&&(m=g,this.root.updateBlockedByResize=!0,h&&h(),h=FC(u,250),Aa.hasAnimatedSinceResize&&(Aa.hasAnimatedSinceResize=!1,this.nodes.forEach(o0)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:u,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||d.getDefaultTransition()||c_,{onLayoutAnimationStart:x,onLayoutAnimationComplete:p}=d.getProps(),y=!this.targetLayout||!Cx(this.targetLayout,g),v=!m&&u;if(this.options.layoutRoot||this.resumeFrom||v||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={..._c(f,"layout"),onPlay:x,onComplete:p};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(h,v)}else m||o0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Jt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(a_),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_x(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(a0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(i0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(s_),this.nodes.forEach(XC),this.nodes.forEach(QC)):this.nodes.forEach(i0),this.clearAllSnapshots();const l=Be.now();_e.delta=Dt(0,1e3/60,l-_e.timestamp),_e.timestamp=l,_e.isProcessing=!0,ao.update.process(_e),ao.preRender.process(_e),ao.render.process(_e),_e.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ec.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(t_),this.sharedNodes.forEach(i_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Re(this.snapshot.measuredBox.x)&&!Re(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Sx(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||ds(this.latestValues)||h)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),d_(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return ye();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(h_))){const{scroll:h}=this.root;h&&(Hs(l.x,h.offset.x),Hs(l.y,h.offset.y))}return l}removeElementScroll(o){var c;const l=ye();if(qe(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:u}=h;h!==this.root&&m&&u.layoutScroll&&(m.wasRoot&&qe(l,o),Hs(l.x,m.offset.x),Hs(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const c=ye();qe(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&zs(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ds(h.latestValues)&&zs(c,h.latestValues)}return ds(this.latestValues)&&zs(c,this.latestValues),c}removeTransform(o){const l=ye();qe(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ds(d.latestValues))continue;gl(d.latestValues)&&d.updateSnapshot();const h=ye(),m=d.measurePageBox();qe(h,m),Zu(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return ds(this.latestValues)&&Zu(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_e.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var u;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(u=this.parent)!=null&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=_e.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),er(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ye(),this.targetWithTransforms=ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qe(this.target,this.layout.layoutBox),ix(this.target,this.targetDelta)):qe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),er(this.relativeTargetOrigin,this.target,g.target),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gl(this.parent.latestValues)||ax(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===_e.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;qe(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,u=this.treeScale.y;E3(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ye());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ju(this.prevProjectionDelta.x,this.projectionDelta.x),Ju(this.prevProjectionDelta.y,this.projectionDelta.y)),Zn(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==u||!r0(this.projectionDelta.x,this.prevProjectionDelta.x)||!r0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Us(),this.projectionDelta=Us(),this.projectionDeltaWithTransform=Us()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},m=Us();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const u=ye(),g=c?c.source:void 0,f=this.layout?this.layout.source:void 0,x=g!==f,p=this.getStack(),y=!p||p.members.length<=1,v=!!(x&&!y&&this.options.crossfade===!0&&!this.path.some(l_));this.animationProgress=0;let S;this.mixTargetDelta=C=>{const N=C/1e3;l0(m.x,o.x,N),l0(m.y,o.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(er(u,this.layout.layoutBox,this.relativeParent.layout.layoutBox),o_(this.relativeTarget,this.relativeTargetOrigin,u,N),S&&YC(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ye()),qe(S,this.relativeTarget)),x&&(this.animationValues=h,$C(h,d,this.latestValues,N,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Jt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ge.update(()=>{Aa.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cn(0)),this.currentAnimation=LC(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Ex(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||ye();const m=Re(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const u=Re(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+u}qe(l,c),zs(l,h),Zn(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new GC),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&bo("z",o,d,this.animationValues);for(let h=0;h<po.length;h++)bo(`rotate${po[h]}`,o,d,this.animationValues),bo(`skew${po[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ta(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ta(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ds(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=KC(this.projectionDeltaWithTransform,this.treeScale,h);c&&(m=c(h,m)),o.transform=m;const{x:u,y:g}=this.projectionDelta;o.transformOrigin=`${u.origin*100}% ${g.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const f in yr){if(h[f]===void 0)continue;const{correct:x,applyTo:p,isCSSVariable:y}=yr[f],v=m==="none"?h[f]:x(h[f],d);if(p){const S=p.length;for(let C=0;C<S;C++)o[p[C]]=v}else y?this.options.visualElement.renderState.vars[f]=v:o[f]=v}this.options.layoutId&&(o.pointerEvents=d===this?Ta(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(a0),this.root.sharedNodes.clear()}}}function XC(t){t.updateLayout()}function QC(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Je(m=>{const u=o?e.measuredBox[m]:e.layoutBox[m],g=Re(u);u.min=n[m].min,u.max=u.min+g}):Ex(i,e.layoutBox,n)&&Je(m=>{const u=o?e.measuredBox[m]:e.layoutBox[m],g=Re(n[m]);u.max=u.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+g)});const l=Us();Zn(l,n,e.layoutBox);const c=Us();o?Zn(c,t.applyTransform(r,!0),e.measuredBox):Zn(c,n,e.layoutBox);const d=!Sx(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:u,layout:g}=m;if(u&&g){const f=ye();er(f,e.layoutBox,u.layoutBox);const x=ye();er(x,n,g.layoutBox),Cx(f,x)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=f,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function ZC(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function e_(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function t_(t){t.clearSnapshot()}function a0(t){t.clearMeasurements()}function i0(t){t.isLayoutDirty=!1}function s_(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function o0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function n_(t){t.resolveTargetDelta()}function r_(t){t.calcProjection()}function a_(t){t.resetSkewAndRotation()}function i_(t){t.removeLeadSnapshot()}function l0(t,e,s){t.translate=xe(e.translate,0,s),t.scale=xe(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function c0(t,e,s,n){t.min=xe(e.min,s.min,n),t.max=xe(e.max,s.max,n)}function o_(t,e,s,n){c0(t.x,e.x,s.x,n),c0(t.y,e.y,s.y,n)}function l_(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const c_={duration:.45,ease:[.4,0,.1,1]},d0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),h0=d0("applewebkit/")&&!d0("chrome/")?Math.round:st;function u0(t){t.min=h0(t.min),t.max=h0(t.max)}function d_(t){u0(t.x),u0(t.y)}function Ex(t,e,s){return t==="position"||t==="preserve-aspect"&&!xC(n0(e),n0(s),.2)}function h_(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const u_=Mx({attachResizeListener:(t,e)=>vr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yo={current:void 0},Tx=Mx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!yo.current){const t=new u_({});t.mount(window),t.setOptions({layoutScroll:!0}),yo.current=t}return yo.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),m_={pan:{Feature:AC},drag:{Feature:TC,ProjectionNode:Tx,MeasureLayout:wx}};function m0(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const r="onHover"+s,i=n[r];i&&ge.postRender(()=>i(e,$r(e)))}class g_ extends ts{mount(){const{current:e}=this.node;e&&(this.unmount=$6(e,(s,n)=>(m0(this.node,n,"Start"),r=>m0(this.node,r,"End"))))}unmount(){}}class f_ extends ts{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ir(vr(this.node.current,"focus",()=>this.onFocus()),vr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function g0(t,e,s){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const r="onTap"+(s==="End"?"":s),i=n[r];i&&ge.postRender(()=>i(e,$r(e)))}class x_ extends ts{mount(){const{current:e}=this.node;e&&(this.unmount=U6(e,(s,n)=>(g0(this.node,n,"Start"),(r,{success:i})=>g0(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const jl=new WeakMap,vo=new WeakMap,p_=t=>{const e=jl.get(t.target);e&&e(t)},b_=t=>{t.forEach(p_)};function y_({root:t,...e}){const s=t||document;vo.has(s)||vo.set(s,{});const n=vo.get(s),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(b_,{root:t,...e})),n[r]}function v_(t,e,s){const n=y_(e);return jl.set(t,s),n.observe(t),()=>{jl.delete(t),n.unobserve(t)}}const j_={some:0,all:1};class w_ extends ts{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:r="some",once:i}=e,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:j_[r]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),u=d?h:m;u&&u(c)};return v_(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(k_(e,s))&&this.startObserver()}unmount(){}}function k_({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const N_={inView:{Feature:w_},tap:{Feature:x_},focus:{Feature:f_},hover:{Feature:g_}},S_={layout:{ProjectionNode:Tx,MeasureLayout:wx}},C_={...dC,...N_,...m_,...S_},__=C3(C_,B3),Ax=({birthInfo:t,fourPillars:e,userName:s,className:n="",showEditButton:r=!0,onEditClick:i})=>{const o=u=>{const g=["일","월","화","수","목","금","토"],f=new Date(u.year,u.month-1,u.day),x=g[f.getDay()];return`${u.year}년 ${u.month}월 ${u.day}일 ${u.hour}시 ${u.minute||0}분 (${x}요일) ${u.isLunar?"음력":"양력"}`},l=u=>`${u.year.heavenly}${u.year.earthly}년 ${u.month.heavenly}${u.month.earthly}월 ${u.day.heavenly}${u.day.earthly}일 ${u.hour.heavenly}${u.hour.earthly}시`,c=u=>({갑:"text-emerald-600 dark:text-emerald-400",을:"text-green-600 dark:text-green-400",병:"text-red-600 dark:text-red-400",정:"text-pink-600 dark:text-pink-400",무:"text-yellow-600 dark:text-yellow-400",기:"text-amber-600 dark:text-amber-400",경:"text-slate-600 dark:text-slate-400",신:"text-gray-600 dark:text-gray-400",임:"text-blue-600 dark:text-blue-400",계:"text-cyan-600 dark:text-cyan-400"})[u]||"text-gray-600 dark:text-gray-400",d=u=>({자:"text-blue-800 dark:text-blue-300",해:"text-cyan-800 dark:text-cyan-300",축:"text-yellow-800 dark:text-yellow-300",진:"text-amber-800 dark:text-amber-300",미:"text-orange-800 dark:text-orange-300",술:"text-yellow-800 dark:text-yellow-300",인:"text-green-800 dark:text-green-300",묘:"text-emerald-800 dark:text-emerald-300",사:"text-red-800 dark:text-red-300",오:"text-rose-800 dark:text-rose-300",신:"text-gray-800 dark:text-gray-300",유:"text-slate-800 dark:text-slate-300"})[u]||"text-gray-800 dark:text-gray-300",h=u=>({갑:"木(목)",을:"木(목)",병:"火(화)",정:"火(화)",무:"土(토)",기:"土(토)",경:"金(금)",신:"金(금)",임:"水(수)",계:"水(수)"})[u]||"",m=u=>({자:"水(수)",해:"水(수)",축:"土(토)",진:"土(토)",미:"土(토)",술:"土(토)",인:"木(목)",묘:"木(목)",사:"火(화)",오:"火(화)",신:"金(금)",유:"金(금)"})[u]||`${u}(?)`;return a.jsxs(__.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`bg-gradient-to-r from-purple-50 to-blue-50 dark:from-gray-800 dark:to-purple-900/30 rounded-xl shadow-lg border border-purple-200 dark:border-purple-700/50 p-6 mb-8 ${n}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"👤"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:s||t.name||"사주 분석 대상"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"출생 정보 기반 분석"})]})]}),r&&i&&a.jsx("button",{onClick:i,className:"px-4 py-2 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg border border-gray-300 dark:border-gray-600 transition-colors text-sm font-medium",title:"출생 정보 수정",children:"⚙️ 수정"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🎂"}),"출생 정보"]}),a.jsx("div",{className:"bg-white dark:bg-gray-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"생년월일시:"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:o(t)})]}),t.gender&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"성별:"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:t.gender==="male"?"남성":"여성"})]})]})})]}),e&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🔮"}),"사주 (四柱)"]}),a.jsxs("div",{className:"bg-white dark:bg-gray-700/50 rounded-lg p-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-semibold text-red-800 dark:text-red-200",children:"년주 (年柱)"}),a.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:e.year.combined}),a.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[a.jsxs("span",{className:`font-medium ${c(e.year.heavenly)}`,children:[e.year.heavenly,"(",h(e.year.heavenly),")"]}),a.jsxs("span",{className:`font-medium ${d(e.year.earthly)}`,children:[e.year.earthly,"(",m(e.year.earthly),")"]})]})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-semibold text-green-800 dark:text-green-200",children:"월주 (月柱)"}),a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.month.combined}),a.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[a.jsxs("span",{className:`font-medium ${c(e.month.heavenly)}`,children:[e.month.heavenly,"(",h(e.month.heavenly),")"]}),a.jsxs("span",{className:`font-medium ${d(e.month.earthly)}`,children:[e.month.earthly,"(",m(e.month.earthly),")"]})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"일주 (日柱)"}),a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.day.combined}),a.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[a.jsxs("span",{className:`font-medium ${c(e.day.heavenly)}`,children:[e.day.heavenly,"(",h(e.day.heavenly),") (일간)"]}),a.jsxs("span",{className:`font-medium ${d(e.day.earthly)}`,children:[e.day.earthly,"(",m(e.day.earthly),")"]})]})]}),a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[a.jsx("div",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"시주 (時柱)"}),a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.hour.combined}),a.jsxs("div",{className:"text-xs flex items-center justify-between mt-1",children:[a.jsxs("span",{className:`font-medium ${c(e.hour.heavenly)}`,children:[e.hour.heavenly,"(",h(e.hour.heavenly),")"]}),a.jsxs("span",{className:`font-medium ${d(e.hour.earthly)}`,children:[e.hour.earthly,"(",m(e.hour.earthly),")"]})]})]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:l(e)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"완전한 사주(四柱)"})]}),a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 text-center font-medium",children:"🌟 오행(五行) 구성 안내"}),a.jsxs("div",{className:"grid grid-cols-5 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🌳"}),a.jsx("div",{className:"font-medium text-green-700 dark:text-green-300",children:"木(목)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"갑을인묘"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🔥"}),a.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:"火(화)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"병정사오"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"🏔️"}),a.jsx("div",{className:"font-medium text-yellow-700 dark:text-yellow-300",children:"土(토)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"무기진미축술"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"⚔️"}),a.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"金(금)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"경신신유"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-1",children:"💧"}),a.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:"水(수)"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"임계자해"})]})]})]})]})]})]})]})]})},M_=()=>{const t=ze(),{birthInfo:e}=Xs(),[s,n]=j.useState("fiveElements"),[r,i]=j.useState("bar"),o=j.useMemo(()=>{if(!e)return null;try{return Jm(e)}catch(l){return console.error("사주 계산 오류:",l),null}},[e]);return!e||!o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📊"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"사주 정보가 필요합니다"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"차트를 확인하려면 먼저 생년월일 정보를 입력해주세요."}),a.jsx("button",{onClick:()=>t("/settings"),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"생년월일 입력하기"})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsx(Ax,{birthInfo:e,fourPillars:{year:{heavenly:o.fourPillars.year.heavenly,earthly:o.fourPillars.year.earthly,combined:`${o.fourPillars.year.heavenly}${o.fourPillars.year.earthly}`},month:{heavenly:o.fourPillars.month.heavenly,earthly:o.fourPillars.month.earthly,combined:`${o.fourPillars.month.heavenly}${o.fourPillars.month.earthly}`},day:{heavenly:o.fourPillars.day.heavenly,earthly:o.fourPillars.day.earthly,combined:`${o.fourPillars.day.heavenly}${o.fourPillars.day.earthly}`},hour:{heavenly:o.fourPillars.hour.heavenly,earthly:o.fourPillars.hour.earthly,combined:`${o.fourPillars.hour.heavenly}${o.fourPillars.hour.earthly}`}},userName:e.name,showEditButton:!0,onEditClick:()=>t("/settings")})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>n("fiveElements"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="fiveElements"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"🎯 오행균형도"}),a.jsx("button",{onClick:()=>n("tenGods"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="tenGods"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"⭐ 십성분포도"}),a.jsx("button",{onClick:()=>n("twelveEarthly"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="twelveEarthly"?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"🐲 12간지상호작용"})]}),s==="tenGods"&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"차트 타입:"}),a.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[a.jsx("button",{onClick:()=>i("bar"),className:`px-3 py-1 text-sm transition-colors ${r==="bar"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"막대"}),a.jsx("button",{onClick:()=>i("doughnut"),className:`px-3 py-1 text-sm transition-colors ${r==="doughnut"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:"도넛"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.jsx("div",{className:"lg:col-span-2",children:s==="fiveElements"?a.jsx(US,{sajuData:o,height:450,showLegend:!0,showTooltips:!0}):s==="tenGods"?a.jsx(WS,{sajuData:o,height:450,chartType:r,showCategory:!0}):a.jsx(KS,{sajuData:o,height:450,showRelationships:!0,showSeasonalBalance:!0})})}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총점"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[o.totalScore.toFixed(0),"점"]})]}),a.jsx("div",{className:"text-4xl",children:"💯"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"평균"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[o.averageScore.toFixed(1),"점"]})]}),a.jsx("div",{className:"text-4xl",children:"📊"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"일간"}),a.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:o.dayMaster})]}),a.jsx("div",{className:"text-4xl",children:"☯️"})]})})]}),a.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/saju"),className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"사주 분석으로"}),a.jsx("button",{onClick:()=>t("/six-areas"),className:"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"6대 영역 분석"})]})]})})},E_=[{id:"basic",name:"기본 분석",icon:"🔍",color:"blue"},{id:"personality",name:"성격 분석",icon:"🧠",color:"purple"},{id:"fortune",name:"운세 분석",icon:"🌟",color:"yellow"},{id:"career",name:"직업 지도",icon:"💼",color:"green"},{id:"relationship",name:"관계 분석",icon:"❤️",color:"red"},{id:"health",name:"건강 지도",icon:"🏥",color:"cyan"},{id:"spiritual",name:"신살 분석",icon:"⚡",color:"indigo"},{id:"johoo",name:"조후 분석",icon:"🌡️",color:"orange"}],T_=()=>{const t=ze(),{birthInfo:e}=Xs(),[s,n]=j.useState("basic"),[r,i]=j.useState(null),[o,l]=j.useState(!1),[c,d]=j.useState(null),h=j.useMemo(()=>{if(!e)return null;try{return Jm(e)}catch(m){return console.error("사주 계산 오류:",m),null}},[e]);return j.useEffect(()=>{(async()=>{if(h){l(!0),d(null);try{const u=await Pr.getComprehensiveInterpretation(h);i(u)}catch(u){console.error("해석 데이터 로드 실패:",u),d("해석 데이터를 불러올 수 없습니다.")}finally{l(!1)}}})()},[h]),!e||!h?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"사주 정보가 필요합니다"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"종합 해석을 확인하려면 먼저 생년월일 정보를 입력해주세요."}),a.jsx("button",{onClick:()=>t("/settings"),className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"생년월일 입력하기"})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsx(Ax,{birthInfo:e,fourPillars:{year:{heavenly:h.fourPillars.year.heavenly,earthly:h.fourPillars.year.earthly,combined:`${h.fourPillars.year.heavenly}${h.fourPillars.year.earthly}`},month:{heavenly:h.fourPillars.month.heavenly,earthly:h.fourPillars.month.earthly,combined:`${h.fourPillars.month.heavenly}${h.fourPillars.month.earthly}`},day:{heavenly:h.fourPillars.day.heavenly,earthly:h.fourPillars.day.earthly,combined:`${h.fourPillars.day.heavenly}${h.fourPillars.day.earthly}`},hour:{heavenly:h.fourPillars.hour.heavenly,earthly:h.fourPillars.hour.earthly,combined:`${h.fourPillars.hour.heavenly}${h.fourPillars.hour.earthly}`}},userName:e.name,showEditButton:!0,onEditClick:()=>t("/settings")})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"📚 종합 사주 해석"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"5대 고전을 기반으로 한 심층 분석"})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 mb-6",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:E_.map(m=>a.jsxs("button",{onClick:()=>n(m.id),className:`px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 ${s===m.id?`bg-${m.color}-500 text-white shadow-lg transform scale-105`:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[a.jsx("span",{className:"text-xl",children:m.icon}),a.jsx("span",{className:"text-sm",children:m.name})]},m.id))})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:a.jsx(Ci,{interpretation:r,loading:o,error:c,category:s,showTabs:!1,fullHeight:!0})}),a.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/saju-chart"),className:"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"📊 차트 보기"}),a.jsx("button",{onClick:()=>t("/calendar"),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"📅 캘린더로 돌아가기"})]})]})})},ks=["갑","을","병","정","무","기","경","신","임","계"],Ns=["자","축","인","묘","진","사","오","미","신","유","술","해"],de={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},Ze={인:"목",묘:"목",사:"화",오:"화",진:"토",술:"토",축:"토",미:"토",신:"금",유:"금",자:"수",해:"수"},Dx={근본:["토","목"],사고:["수","금"],인연:["화","목"],행동:["화","목"],행운:["화","수"],환경:["토","수"],건강:["목","수"],성격:["화","토"],지혜:["수","금"],관계:["화","목"],재물:["금","토"],명예:["화","금"],감성:["화","수"],논리성:["금","수"],예술성:["목","화"],이성:["금","수"],인성:["목","토"],지성:["수","금"],학습성:["목","수"],관대함:["목","화"],끈기:["토","금"],리더십:["화","금"],분석력:["수","금"],순수함:["목","수"],용기:["화","목"],권력욕:["금","화"],기쁨:["화","목"],노여움:["화","금"],두려움:["수","금"],명예욕:["화","금"],물욕:["금","토"],미움:["금","화"],사람:["화","목"],색욕:["수","화"],소유욕:["토","금"],수면욕:["수","토"],슬픔:["수","토"],승부욕:["화","금"],식욕:["토","수"],욕심:["금","토"],즐거움:["화","목"],애정욕:["화","목"],지배욕:["금","화"],성욕:["수","화"],지식욕:["수","목"],인정욕:["화","토"],자유욕:["목","화"],창조욕:["목","수"],탐구욕:["수","금"],표현욕:["화","목"],휴식욕:["토","수"],간:["목","화"],갑상선:["화","수"],근육:["목","토"],뇌하수체:["수","금"],대사:["화","토"],스트레스:["화","금"],신장:["수","목"],심장:["화","목"],유전:["목","수"],지방:["토","수"],호르몬:["수","화"],활동량:["화","목"],강박:["금","토"],걱정:["토","수"],공포:["수","금"],낙관:["화","목"],무기력:["토","수"],불안:["수","화"],스트레스심리:["화","금"],우울:["수","토"],자신감:["화","목"],집착:["토","금"],충동:["화","목"],회피:["수","토"],건물:["토","금"],공장:["금","화"],다가구:["토","목"],부동산:["토","금"],다세대:["토","목"],단독:["토","목"],대지:["토"],상가:["금","화"],아파트:["토","금"],연립:["토","목"],오피스:["금","토"],주상복합:["토","금"],주택:["토","목"],대여:["금","수"],동산:["금","목"],사업:["화","금"],주식:["수","금"],채권:["금","토"],투자:["금","수"],펀드:["수","금"],현금:["금"],기술:["금","수"],방송:["화","목"],선물:["수","금"],예능:["화","목"],인력:["목","화"],제품:["금","토"],외가친척:["목","수"],외갓집:["목","토"],외삼촌:["목","화"],외숙모:["수","목"],외조모:["토","수"],외조부:["목","금"],외종형제:["목","화"],이모:["수","목"],이모부:["화","목"],큰이모:["수","토"],남자:["화","목"],배우자:["토","수"],애인:["화","목"],여자:["수","목"],연인:["화","수"],이성관계:["화","수"],계산:["금","수"],과학:["수","금"],관찰:["수","목"],논리일반:["수","금"],논증:["금","수"],도형:["토","금"],문장:["목","수"],법칙:["금","토"],분류:["금","수"],분석:["수","금"],비교:["금","수"],비판:["금","화"],수리:["금","수"],연역:["금","수"],요약:["금","토"],원인:["수","목"],응용:["화","금"],이해:["수","목"],인과:["목","수"],전략:["금","화"],추론:["수","금"],통계:["금","수"],판단:["금","화"],해석:["수","목"],공간:["토","목"],공예:["토","목"],농담:["화","목"],댄스:["화","목"],디자인:["목","화"],리듬:["화","수"],만화:["목","화"],멜로디:["수","목"],무용:["화","목"],문학:["목","수"],미술:["목","토"],박자:["화","금"],사진:["금","수"],색채:["화","목"],연극:["화","목"],연기:["화","수"],영상:["화","금"],영화:["화","금"],예술일반:["목","화"],음악:["수","목"],조각:["토","금"],조형:["토","목"],창작:["목","화"],화음:["수","목"],격려:["화","목"],결단:["금","화"],계획:["금","수"],고집:["토","금"],공감:["수","목"],관리:["금","토"],교육:["목","수"],긍정:["화","목"],기획:["수","금"],대화:["목","화"],도덕:["목","토"],명령:["금","화"],봉사:["목","수"],비판업무:["금","화"],사교:["화","목"],상담:["수","목"],섬세:["수","목"],성실:["토","금"],소통:["목","화"],솔선:["화","목"],수리업무:["금","수"],시간:["금","토"],신뢰:["토","금"],실천:["화","토"],언어:["목","수"],예의:["목","토"],유머:["화","목"],응용업무:["수","금"],인내:["토","금"],적응:["수","목"],정리:["금","토"],정직:["토","목"],조정:["수","토"],주도:["화","금"],책임:["토","금"],추진:["화","목"],타협:["수","토"],포용:["목","수"],개방적:["목","화"],계산적:["금","수"],긍정적:["화","목"],배타적:["금","토"],부정적:["수","금"],사교적:["화","목"],이기적:["금","화"],진취적:["화","목"],합리적:["금","수"],희생적:["목","수"],건강운:["목","수"],결혼운:["화","토"],금전운:["금","토"],대인운:["화","목"],사업운:["화","금"],성공운:["화","목"],승진운:["화","금"],시험운:["수","목"],재물운:["금","토"],직장운:["토","금"],취업운:["금","화"],학업운:["수","목"],여행운:["목","화"],이사운:["토","목"],이직운:["금","화"],인기운:["화","목"],자녀운:["목","화"],투자운:["금","수"],학운:["수","목"],해외운:["수","목"],혼인운:["화","토"],연애운:["화","목"],애정운:["화","수"]},Xa={상생:{목:"화",화:"토",토:"금",금:"수",수:"목"},상극:{목:"토",화:"금",토:"수",금:"목",수:"화"}},A_={1:{수:20,토:15},2:{목:20,화:10,금:-10},3:{목:20,화:10,금:-10},4:{목:15,토:20,금:-5},5:{화:20,토:10,수:-10},6:{화:20,토:10,수:-10},7:{화:15,토:20,수:-5},8:{금:20,수:10,목:-10},9:{금:20,수:10,목:-10},10:{금:15,토:20,목:-5},11:{수:20,목:10,화:-10},12:{수:20,목:10,화:-10}},D_={23:{수:15},0:{수:15},1:{수:15},3:{목:15},4:{목:15},5:{목:15},7:{토:10},8:{토:10},9:{화:15},10:{화:15},11:{화:15},12:{화:15},13:{토:10},14:{토:10},15:{금:15},16:{금:15},17:{금:15},18:{금:15},19:{토:10},20:{토:10},21:{수:15},22:{수:15}};function P_(t,e,s,n){let r=0;switch(n){case"today":t.day.gan===e&&(r+=20),t.day.ji===s&&(r+=15);break;case"month":t.month.gan===e&&(r+=18),t.month.ji===s&&(r+=12);break;case"year":t.year.gan===e&&(r+=15),t.year.ji===s&&(r+=10);break}return r}function R_(t,e,s){let n=0;const i={today:{상생:25,비화:15,상극:-15},month:{상생:20,비화:12,상극:-12},year:{상생:15,비화:10,상극:-10}}[s];return t.forEach(o=>{Xa.상생[e]===o?n+=i.상생:e===o?n+=i.비화:Xa.상극[e]===o&&(n+=i.상극)}),n}function L_(t,e){const s=A_[e]||{};let n=0;return t.forEach(r=>{const i=s[r]||0;n+=i*.5}),n}function O_(t,e){const s=D_[e]||{};let n=0;return t.forEach(r=>{const i=s[r]||0;n+=i*.3}),n}function ma(t,e,s,n){const r=Px(t,e),i=new Date,o=i.getFullYear(),l=i.getMonth()+1,c=i.getDate(),d=i.getHours(),h=Dx[t]||[];if(h.length===0)return r;let m=8,u,g,f;switch(s){case"today":u=ks[Math.abs((c-1)%10)],g=Ns[Math.abs((c-1)%12)],f=de[u],m+=O_(h,d);break;case"month":u=ks[Math.abs((l-1)%10)],g=Ns[Math.abs((l-1)%12)],f=de[u],m+=L_(h,l);break;case"year":u=ks[Math.abs((o-1984)%10)],g=Ns[Math.abs((o-1984)%12)],f=de[u];break;default:return r}m+=P_(e,u,g,s),m+=R_(h,f,s),m+=(Math.random()-.5)*8;const x=Math.round(r+m);return Math.max(20,Math.min(90,x))}function Px(t,e){var c,d,h,m;let s=50;if(!e||!((c=e.year)!=null&&c.gan)||!((d=e.month)!=null&&d.gan)||!((h=e.day)!=null&&h.gan)||!((m=e.time)!=null&&m.gan))return console.log("[경고] 유효하지 않은 사주 데이터 - 랜덤 점수 사용"),Math.floor(Math.random()*30)+40;console.log(`[사주 점수 계산] 항목: ${t}, 사주: ${e.fullSaju}`);const n=Dx[t]||[];if(n.length===0)return console.log(`[경고] ${t} 항목이 오행 매핑에 없음 - 랜덤 점수 사용`),Math.floor(Math.random()*30)+40;console.log(`[오행 매핑] ${t} → [${n.join(", ")}]`);const r=[];try{r.push(de[e.year.gan]),r.push(de[e.month.gan]),r.push(de[e.day.gan]),r.push(de[e.time.gan]),r.push(Ze[e.year.ji]),r.push(Ze[e.month.ji]),r.push(Ze[e.day.ji]),r.push(Ze[e.time.ji])}catch(u){return console.error("[오행 분포 계산 오류]",u),Math.floor(Math.random()*30)+40}n.forEach(u=>{const g=r.filter(f=>f===u).length;s+=g*5,r.forEach(f=>{Xa.상생[f]===u&&(s+=8),Xa.상극[f]===u&&(s-=5)})});const i=I_(e.ohHaengBalance,n);s+=i;const o=de[e.day.gan];n.includes(o)&&(s+=10);const l=Math.max(20,Math.min(85,Math.round(s)));return console.log(`[최종 점수] ${t}: ${l}점 (계산값: ${s})`),l}function I_(t,e){let s=0;return e.forEach(n=>{const r=t[n];r>=40&&r<=60?s+=5:r>=70?s+=8:r<=20&&(s-=3)}),s}function F_(){return{year:{gan:"갑",ji:"자"},month:{gan:"병",ji:"인"},day:{gan:"무",ji:"진"},time:{gan:"경",ji:"신"},ohHaengBalance:{목:30,화:25,토:20,금:15,수:10},fullSaju:"갑자 병인 무진 경신"}}const jr={갑:"기",을:"경",병:"신",정:"임",무:"계",기:"갑",경:"을",신:"병",임:"정",계:"무"},Rx={인:["오","술"],오:["인","술"],술:["인","오"],신:["자","진"],자:["신","진"],진:["신","자"],해:["묘","미"],묘:["해","미"],미:["해","묘"],사:["유","축"],유:["사","축"],축:["사","유"]},Qa={자:"축",축:"자",인:"해",해:"인",묘:"술",술:"묘",진:"유",유:"진",사:"신",신:"사",오:"미",미:"오"},wr={자:"오",오:"자",축:"미",미:"축",인:"신",신:"인",묘:"유",유:"묘",진:"술",술:"진",사:"해",해:"사"},Za={목:"화",화:"토",토:"금",금:"수",수:"목"},kr={목:"토",화:"금",토:"수",금:"목",수:"화"};function B_(t,e){const s=$_(t),n=V_(t),r=H_(t),i=z_(t),o=U_(s,n,r,i),l=[];new Date().getFullYear();for(let d=0;d<=95;d++){const h=e+d,m=Math.floor(d/10),u=W_(t,m),g=K_(t,h),f=q_(t,d);let x=o*.4+u*.3+g*.2+f*.1;x=J_(x,d);const p=X_(t,d);x+=p,x=Math.max(0,Math.min(100,x)),l.push(x)}const c=Q_(l);return{baseScore:o,yearlyScores:l,pattern:c,keyCharacteristics:{elementBalance:s,dayMasterStrength:n,harmonyLevel:r,conflictLevel:i}}}function $_(t){const e={목:0,화:0,토:0,금:0,수:0};e[de[t.year.gan]]++,e[de[t.month.gan]]++,e[de[t.day.gan]]++,e[de[t.time.gan]]++,e[Ze[t.year.ji]]++,e[Ze[t.month.ji]]++,e[Ze[t.day.ji]]++,e[Ze[t.time.ji]]++;const s=Object.values(e),n=Math.max(...s),r=Math.min(...s),i=s.reduce((c,d)=>c+d)/s.length,o=s.reduce((c,d)=>c+Math.pow(d-i,2),0)/s.length;return Math.max(0,100-Math.sqrt(o)*25-(n-r)*10)}function V_(t){var c;const e=t.day.gan,s=de[e];let n=50;const r=[t.year.gan,t.month.gan,t.time.gan,t.year.ji,t.month.ji,t.day.ji,t.time.ji].filter(d=>de[d]===s||Ze[d]===s).length;n+=r*5;const i=(c=Object.entries(Za).find(([d,h])=>h===s))==null?void 0:c[0];if(i){const d=[t.year.gan,t.month.gan,t.time.gan,t.year.ji,t.month.ji,t.day.ji,t.time.ji].filter(h=>de[h]===i||Ze[h]===i).length;n+=d*3}const o=kr[s],l=[t.year.gan,t.month.gan,t.time.gan,t.year.ji,t.month.ji,t.day.ji,t.time.ji].filter(d=>de[d]===o||Ze[d]===o).length;return n-=l*4,Math.max(0,Math.min(100,n))}function H_(t){let e=50;const s=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];for(let r=0;r<s.length;r++)for(let i=r+1;i<s.length;i++)jr[s[r]]===s[i]&&(e+=10);const n=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++)Qa[n[r]]===n[i]&&(e+=8);for(const r of n){const i=Rx[r];if(i){const o=i.filter(l=>n.includes(l)).length;e+=o*5}}return Math.min(100,e)}function z_(t){let e=0;const s=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(let r=0;r<s.length;r++)for(let i=r+1;i<s.length;i++)wr[s[r]]===s[i]&&(e+=15);const n=[de[t.year.gan],de[t.month.gan],de[t.day.gan],de[t.time.gan]];for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++)kr[n[r]]===n[i]&&(e+=10);return Math.min(100,e)}function U_(t,e,s,n){const r=t*.3+e*.3+s*.25+(100-n)*.15;return Math.round(r)}function W_(t,e){const s=t.month.ji,n=t.day.gan,r=["갑","병","무","경","임"].includes(n),i=ks.indexOf(t.month.gan),o=Ns.indexOf(s);let l,c;r?(l=(i+e+1)%10,c=(o+e+1)%12):(l=(i-e-1+10)%10,c=(o-e-1+12)%12);const d=ks[l],h=Ns[c];let m=50;const u=de[t.day.gan],g=de[d];Za[g]===u?m+=45:Za[u]===g&&(m+=35),kr[g]===u?m-=50:kr[u]===g&&(m-=40),u===g&&(m+=10),(jr[t.day.gan]===d||jr[d]===t.day.gan)&&(m+=35),(wr[t.day.ji]===h||wr[h]===t.day.ji)&&(m-=25),(Qa[t.day.ji]===h||Qa[h]===t.day.ji)&&(m+=20);const f=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],x=Rx[h];if(x){const v=x.filter(S=>f.includes(S)).length;m+=v*12}const p=Y_(t,e,d,h);m+=p;const y=G_(s,h);return m+=y,Math.max(10,Math.min(90,m))}function Y_(t,e,s,n){let r=0;const i=$c(t),o=[i%3+1,i%5+3,i%7+6];o.includes(e)&&(r=(i+e)%2===0?45:-45,e===o[0]&&(r*=1.5));const l=ks.indexOf(s)*12+Ns.indexOf(n);[13,27,41,55].includes(l)&&(r+=(i%3-1)*30);const d=Math.sin((e+i)*.7)*20;return r+=d,r}function G_(t,e){const s={인:"봄",묘:"봄",진:"봄말",사:"여름",오:"여름",미:"여름말",신:"가을",유:"가을",술:"가을말",자:"겨울",축:"겨울말",해:"겨울"},n=s[t],r=s[e];return n===r?8:{봄:"가을",가을:"봄",여름:"겨울",겨울:"여름"}[n]===r?-5:0}function K_(t,e){const s=(e-4)%10,n=(e-4)%12,r=ks[s],i=Ns[n];let o=50;jr[t.day.gan]===r&&(o+=15),Qa[t.day.ji]===i&&(o+=12),wr[t.day.ji]===i&&(o-=18);const l=de[t.day.gan],c=de[r];return Za[c]===l&&(o+=8),kr[c]===l&&(o-=12),Math.max(0,Math.min(100,o))}function q_(t,e){const s=$c(t),n=Math.sin(e*2*Math.PI/23)*15,r=Math.sin(e*2*Math.PI/28)*10,i=Math.sin(e*2*Math.PI/33)*8,o=Math.sin((e+s)*.15)*25+Math.cos((e+s*2)*.08)*15+Math.sin((e+s*3)*.3)*10,l=50+n+r+i+o;return Math.max(0,Math.min(100,l))}function $c(t){const e={갑:1,을:2,병:3,정:4,무:5,기:6,경:7,신:8,임:9,계:10},s={자:1,축:2,인:3,묘:4,진:5,사:6,오:7,미:8,신:9,유:10,술:11,해:12},n=((e[t.year.gan]-1)*12+(s[t.year.ji]-1))%60,r=((e[t.month.gan]-1)*12+(s[t.month.ji]-1))%60,i=((e[t.day.gan]-1)*12+(s[t.day.ji]-1))%60,o=((e[t.time.gan]-1)*12+(s[t.time.ji]-1))%60,l={목:0,화:0,토:0,금:0,수:0};[t.year.gan,t.month.gan,t.day.gan,t.time.gan].forEach(C=>{l[de[C]]++}),[t.year.ji,t.month.ji,t.day.ji,t.time.ji].forEach(C=>{l[Ze[C]]++});const c=Object.values(l),d=Math.max(...c),h=Math.min(...c),m=(d-h)*100;let u=0,g=0;const f=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];for(let C=0;C<f.length;C++)for(let N=C+1;N<f.length;N++)jr[f[C]]===f[N]&&(u+=(C+1)*(N+1)*10);const x=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(let C=0;C<x.length;C++)for(let N=C+1;N<x.length;N++)wr[x[C]]===x[N]&&(g+=(C+1)*(N+1)*15);de[t.day.gan];const p=e[t.day.gan]*s[t.day.ji]*5,y=t.month.ji,v=s[y]*7;return n*1e3+r*500+i*800+o*300+m*20+u*3+g*2+p+v*10}function J_(t,e){return e<=10?t*.9+10:e<=20?t*1.1:e<=35?t*1.05:e<=55?t*.95+5:t*(1-(e-55)*.003)}function X_(t,e){const s=$c(t),n=Math.sin((e+s*.1)*.3)*3,r=Math.cos((e+s*.2)*.5)*2,i=Math.sin(e*s*.01*.7)*1.5;return n+r+i}function Q_(t){const e=t.reduce((c,d)=>c+d)/t.length,s=t.reduce((c,d)=>c+Math.pow(d-e,2),0)/t.length,n=Math.sqrt(s)/50,r=t.slice(0,48).reduce((c,d)=>c+d)/48,i=t.slice(48).reduce((c,d)=>c+d)/48;let o;i-r>10?o="ascending":r-i>10?o="descending":n>.5?o="cyclic":o="stable";let l="안정형";return n>.7?l="격변형":n>.5?l="변동형":o==="ascending"?l="상승형":o==="descending"&&(l="하강형"),{type:l,volatility:Math.min(1,n),trend:o}}const Lx="/api/saju";typeof window<"u"&&(console.log("[Saju API] Using URL:",Lx),console.log("[Saju API] Current hostname:",window.location.hostname));async function Z_(){try{console.log("🔮 백엔드 사주 카테고리 데이터 요청...");const t=await fetch(`${Lx}/categories`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return console.log("✅ 사주 카테고리 데이터 수신 완료:",e),e}catch(t){throw console.error("❌ 사주 카테고리 데이터 가져오기 실패:",t),t}}function e8(t){const e=[];if(t.positive){const s=Object.entries(t.positive).map(([n,r])=>({id:n.toLowerCase().replace(/\s+/g,"_"),name:n,items:r.items.map((i,o)=>({id:`${n.toLowerCase()}_${o}`,name:i.name,baseScore:Math.round(i.weight*i.confidence)}))}));e.push({id:"juneung",name:"주능",icon:"⚡",description:"능력과 잠재력 분석",subcategories:s})}if(t.negative){const s=Object.entries(t.negative).map(([n,r])=>({id:n.toLowerCase().replace(/\s+/g,"_"),name:n,items:r.items.map((i,o)=>({id:`${n.toLowerCase()}_${o}`,name:i.name,baseScore:Math.round((100-i.weight)*i.confidence)}))}));e.push({id:"juhyung",name:"주흉",icon:"⚠️",description:"위험과 주의사항 분석",subcategories:s})}return e}let wl=null,Ox=0;const t8=5*60*1e3;function s8(){return wl&&Date.now()-Ox<t8?(console.log("💾 캐시된 사주 카테고리 데이터 사용"),wl):null}function n8(t){wl=t,Ox=Date.now(),console.log("💾 사주 카테고리 데이터 캐시 저장")}async function r8(){const t=s8();if(t)return t;const e=await Z_(),s=e8(e.data);return n8(s),s}let Ix=null;function jo(t){Ix=t}function b(t,e){try{const s=Ix||F_();return Px(t,s)}catch{return e}}const us=[{id:"jubon",name:"주본",icon:"🎯",description:"근본본, 성향, 욕정, 주격, 주운 분석",subcategories:[{id:"geunbonbon",name:"근본본",items:[{id:"geunbon",name:"근본",baseScore:b("근본",75)},{id:"sago",name:"사고",baseScore:b("사고",70)},{id:"inyeon",name:"인연",baseScore:b("인연",65)},{id:"haengdong",name:"행동",baseScore:b("행동",72)},{id:"haengun",name:"행운",baseScore:b("행운",68)},{id:"hwangyeong",name:"환경",baseScore:b("환경",70)}]},{id:"seonghyang",name:"성향",items:[{id:"gamseong",name:"감성",baseScore:b("감성",70)},{id:"nonriseong",name:"논리성",baseScore:b("논리성",68)},{id:"yesulseong",name:"예술성",baseScore:b("예술성",65)},{id:"iseong",name:"이성",baseScore:b("이성",72)},{id:"inseong",name:"인성",baseScore:b("인성",75)},{id:"jiseong",name:"지성",baseScore:b("지성",70)},{id:"hakseupseong",name:"학습성",baseScore:b("학습성",68)}]},{id:"yokjeong",name:"욕정",items:[{id:"gwonryeokyok",name:"권력욕",baseScore:b("권력욕",60)},{id:"gippeum",name:"기쁨",baseScore:b("기쁨",75)},{id:"noyeoum",name:"노여움",baseScore:b("노여움",45)},{id:"duryeoum",name:"두려움",baseScore:b("두려움",40)},{id:"myeongyeyok",name:"명예욕",baseScore:b("명예욕",65)},{id:"muryok",name:"물욕",baseScore:b("물욕",55)},{id:"mium",name:"미움",baseScore:b("미움",35)},{id:"saram",name:"사람",baseScore:b("사람",70)},{id:"saegyok",name:"색욕",baseScore:b("색욕",50)},{id:"soyuyok",name:"소유욕",baseScore:b("소유욕",60)},{id:"sumyeonyok",name:"수면욕",baseScore:b("수면욕",65)},{id:"seulpeum",name:"슬픔",baseScore:b("슬픔",45)},{id:"seungbuyok",name:"승부욕",baseScore:b("승부욕",70)},{id:"sigyok",name:"식욕",baseScore:b("식욕",60)},{id:"yoksim",name:"욕심",baseScore:b("욕심",55)},{id:"jeulgeoum",name:"즐거움",baseScore:b("즐거움",75)}]},{id:"jugak",name:"주격",items:[{id:"gaebangjeogin",name:"개방적",baseScore:b("개방적",70)},{id:"gyesanjeogin",name:"계산적",baseScore:b("계산적",65)},{id:"geungjeongjeeogin",name:"긍정적",baseScore:b("긍정적",75)},{id:"baetajeogin",name:"배타적",baseScore:b("배타적",45)},{id:"bujeongjeogin",name:"부정적",baseScore:b("부정적",40)},{id:"sagyojeogin",name:"사교적",baseScore:b("사교적",70)},{id:"igijeogin",name:"이기적",baseScore:b("이기적",50)},{id:"jinchwijeogin",name:"진취적",baseScore:b("진취적",72)},{id:"haprijeogin",name:"합리적",baseScore:b("합리적",75)},{id:"heuisaengjeogin",name:"희생적",baseScore:b("희생적",65)}]},{id:"juun",name:"주운",items:[{id:"geongangun",name:"건강운",baseScore:b("건강운",70)},{id:"gyeolhonun",name:"결혼운",baseScore:b("결혼운",65)},{id:"gwonryeogun",name:"권력운",baseScore:b("권력운",60)},{id:"myeongyeun",name:"명예운",baseScore:b("명예운",62)},{id:"sagoun",name:"사고운",baseScore:b("사고운",45)},{id:"saeobun",name:"사업운",baseScore:b("사업운",68)},{id:"idongun",name:"이동운",baseScore:b("이동운",55)},{id:"ibyeorun",name:"이별운",baseScore:b("이별운",40)},{id:"inyeonun",name:"인연운",baseScore:b("인연운",72)},{id:"jasigun",name:"자식운",baseScore:b("자식운",65)},{id:"jaeneungun",name:"재능운",baseScore:b("재능운",70)},{id:"jaemorun",name:"재물운",baseScore:b("재물운",60)},{id:"josangun",name:"조상운",baseScore:b("조상운",58)},{id:"jigeobun",name:"직업운",baseScore:b("직업운",68)},{id:"jibangun",name:"집안운",baseScore:b("집안운",65)},{id:"hageobun",name:"학업운",baseScore:b("학업운",70)},{id:"haengunun",name:"행운운",baseScore:b("행운운",60)}]}]},{id:"jugeon",name:"주건",icon:"💪",description:"비만, 심리, 인체계, 정력, 질환, 뇌 분석",subcategories:[{id:"biman",name:"비만",items:[{id:"geongangsikpum",name:"건강식품",baseScore:b("건강식품",70)},{id:"gwanri",name:"관리",baseScore:b("관리",65)},{id:"dansik",name:"단식",baseScore:b("단식",50)},{id:"boyak",name:"보약",baseScore:b("보약",60)},{id:"sangdam",name:"상담",baseScore:b("상담",65)},{id:"sumyeon",name:"수면",baseScore:b("수면",70)},{id:"subun",name:"수분",baseScore:b("수분",75)},{id:"undong",name:"운동",baseScore:b("운동",68)},{id:"eumsik",name:"음식",baseScore:b("음식",65)},{id:"chehyeong",name:"체형",baseScore:b("체형",60)},{id:"chiryo",name:"치료",baseScore:b("치료",70)},{id:"keondisyeon",name:"컨디션",baseScore:b("컨디션",72)}]},{id:"simri",name:"심리",items:[{id:"galdeung",name:"갈등",baseScore:b("갈등",45)},{id:"gonoe",name:"고뇌",baseScore:b("고뇌",40)},{id:"nakgwan",name:"낙관",baseScore:b("낙관",75)},{id:"mugwansim",name:"무관심",baseScore:b("무관심",50)},{id:"buran",name:"불안",baseScore:b("불안",45)},{id:"sinjung",name:"신중",baseScore:b("신중",70)},{id:"uul",name:"우울",baseScore:b("우울",35)},{id:"uisim",name:"의심",baseScore:b("의심",50)},{id:"jiltu",name:"질투",baseScore:b("질투",40)},{id:"jjajeung",name:"짜증",baseScore:b("짜증",45)},{id:"hogisim",name:"호기심",baseScore:b("호기심",75)},{id:"heungbun",name:"흥분",baseScore:b("흥분",60)}]},{id:"inchegye",name:"인체계",items:[{id:"golgegyae",name:"골격계",baseScore:b("골격계",65)},{id:"geunukgye",name:"근육계",baseScore:b("근육계",68)},{id:"namsaengsiggye",name:"남생식기",baseScore:b("남생식기",60)},{id:"naebungye",name:"내분비계",baseScore:b("내분비계",70)},{id:"sohwagye",name:"소화계",baseScore:b("소화계",68)},{id:"sunhwangye",name:"순환계",baseScore:b("순환계",72)},{id:"singyeonggye",name:"신경계",baseScore:b("신경계",75)},{id:"oebungye",name:"외분비계",baseScore:b("외분비계",65)},{id:"oehyeonggye",name:"외형계",baseScore:b("외형계",60)},{id:"jeonsingye",name:"정신계",baseScore:b("정신계",70)},{id:"pibugye",name:"피부계",baseScore:b("피부계",65)},{id:"hoheupgye",name:"호흡계",baseScore:b("호흡계",72)}]},{id:"jeongryeok",name:"정력",items:[{id:"dolbal",name:"돌발",baseScore:b("돌발",55)},{id:"sekseu",name:"섹스",baseScore:b("섹스",65)},{id:"seutemina",name:"스테미나",baseScore:b("스테미나",70)},{id:"oreugarijeum",name:"오르가즘",baseScore:b("오르가즘",60)},{id:"joyeol",name:"조절",baseScore:b("조절",68)},{id:"junbi",name:"준비",baseScore:b("준비",65)},{id:"chungdong",name:"충동",baseScore:b("충동",60)},{id:"taim",name:"타임",baseScore:b("타임",62)}]},{id:"jilhwan",name:"질환",items:[{id:"gamyeomseong",name:"감염성질환",baseScore:b("감염성질환",40)},{id:"golsuseong",name:"골수성혈액질환",baseScore:b("골수성혈액질환",35)},{id:"gugangmit",name:"구강및악안면병리",baseScore:b("구강및악안면병리",45)},{id:"geungolggyae",name:"근골격계장애",baseScore:b("근골격계장애",50)},{id:"geunuk",name:"근육질환",baseScore:b("근육질환",45)},{id:"naebunbi",name:"내분비질환",baseScore:b("내분비질환",40)},{id:"noejilhwan",name:"뇌질환",baseScore:b("뇌질환",35)},{id:"rimpeu",name:"림프계면역장애",baseScore:b("림프계면역장애",40)},{id:"manseong",name:"만성피로",baseScore:b("만성피로",50)},{id:"binyugi",name:"비뇨기계질환",baseScore:b("비뇨기계질환",45)},{id:"biman_jilhwan",name:"비만질환",baseScore:b("비만질환",40)},{id:"ppyeogol",name:"뼈골절질환",baseScore:b("뼈골절질환",35)},{id:"saengsiggye",name:"생식기질환",baseScore:b("생식기질환",40)},{id:"seoncheonseong",name:"선천성질환",baseScore:b("선천성질환",30)},{id:"sohwa",name:"소화질환",baseScore:b("소화질환",45)},{id:"sunhwan",name:"순환질환",baseScore:b("순환질환",40)},{id:"singyeonggye_jilhwan",name:"신경계질환",baseScore:b("신경계질환",35)},{id:"simhyeolgwan",name:"심혈관질환",baseScore:b("심혈관질환",40)},{id:"angwa",name:"안과질환",baseScore:b("안과질환",50)},{id:"am",name:"암",baseScore:b("암",25)},{id:"janggi",name:"장기질환",baseScore:b("장기질환",40)},{id:"jeongsin",name:"정신장애",baseScore:b("정신장애",35)},{id:"jeunghugun",name:"증후군",baseScore:b("증후군",40)},{id:"taae",name:"태아질환",baseScore:b("태아질환",30)},{id:"pibu",name:"피부질환",baseScore:b("피부질환",50)},{id:"horumon",name:"호르몬질환",baseScore:b("호르몬질환",40)},{id:"hoheup",name:"호흡질환",baseScore:b("호흡질환",45)}]},{id:"noe",name:"뇌",items:[{id:"gannoe",name:"간뇌",baseScore:b("간뇌",65)},{id:"noehasuche",name:"뇌하수체",baseScore:b("뇌하수체",68)},{id:"daenoe",name:"대뇌",baseScore:b("대뇌",75)},{id:"duchungeop",name:"두충엽",baseScore:b("두충엽",60)},{id:"byeongyeongeop",name:"변연엽",baseScore:b("변연엽",62)},{id:"sonoe",name:"소뇌",baseScore:b("소뇌",70)},{id:"sisang",name:"시상",baseScore:b("시상",65)},{id:"sisanghabu",name:"시상하부",baseScore:b("시상하부",68)},{id:"yeonsu",name:"연수",baseScore:b("연수",72)},{id:"jeondueop",name:"전두엽",baseScore:b("전두엽",75)},{id:"jeoneop",name:"전엽",baseScore:b("전엽",70)},{id:"jungnoe",name:"중뇌",baseScore:b("중뇌",68)},{id:"jungeop",name:"중엽",baseScore:b("중엽",65)},{id:"cheoksu",name:"척수",baseScore:b("척수",60)},{id:"cheukdueop",name:"측두엽",baseScore:b("측두엽",70)},{id:"hutueop",name:"후투엽",baseScore:b("후투엽",65)},{id:"hueop",name:"후엽",baseScore:b("후엽",68)}]}]},{id:"jumul",name:"주물",icon:"💰",description:"부동산, 재물, 투자 분석",subcategories:[{id:"budongsan",name:"부동산",items:[{id:"geonmul",name:"건물",baseScore:b("건물",65)},{id:"gongjang",name:"공장",baseScore:b("공장",60)},{id:"dagagu",name:"다가구",baseScore:b("다가구",62)},{id:"budongsan_item",name:"부동산",baseScore:b("부동산",70)},{id:"dasedae",name:"다세대",baseScore:b("다세대",63)},{id:"dandok",name:"단독",baseScore:b("단독",68)},{id:"daeji",name:"대지",baseScore:b("대지",65)},{id:"sangga",name:"상가",baseScore:b("상가",72)},{id:"apateu",name:"아파트",baseScore:b("아파트",75)},{id:"yeonrip",name:"연립",baseScore:b("연립",60)},{id:"opiseu",name:"오피스",baseScore:b("오피스",70)},{id:"jusangbokhap",name:"주상복합",baseScore:b("주상복합",68)},{id:"jutaek",name:"주택",baseScore:b("주택",67)}]},{id:"jaemul",name:"재물",items:[{id:"daeyeo",name:"대여",baseScore:b("대여",55)},{id:"dongsan",name:"동산",baseScore:b("동산",60)},{id:"budongsan_jaemul",name:"부동산",baseScore:b("부동산",70)},{id:"saeop",name:"사업",baseScore:b("사업",65)},{id:"jusik",name:"주식",baseScore:b("주식",62)},{id:"chaegwon",name:"채권",baseScore:b("채권",58)},{id:"tuja",name:"투자",baseScore:b("투자",60)},{id:"peondeu",name:"펀드",baseScore:b("펀드",57)},{id:"hyeongeum",name:"현금",baseScore:b("현금",75)}]},{id:"tuja_jumul",name:"투자",items:[{id:"daeyeo_tuja",name:"대여",baseScore:b("대여",55)},{id:"dongsan_tuja",name:"동산",baseScore:b("동산",58)},{id:"budongsan_tuja",name:"부동산",baseScore:b("부동산",70)},{id:"jusik_tuja",name:"주식",baseScore:b("주식",65)},{id:"chaegwon_tuja",name:"채권",baseScore:b("채권",60)},{id:"peondeu_tuja",name:"펀드",baseScore:b("펀드",58)},{id:"gisul",name:"기술",baseScore:b("기술",68)},{id:"bangsong",name:"방송",baseScore:b("방송",62)},{id:"seonmul",name:"선물",baseScore:b("선물",55)},{id:"yeneung",name:"예능",baseScore:b("예능",60)},{id:"inryeok",name:"인력",baseScore:b("인력",63)},{id:"jepum",name:"제품",baseScore:b("제품",65)}]}]},{id:"juyeon",name:"주연",icon:"🤝",description:"외가, 이성, 인연, 선배, 친가, 친구, 후배, 가정, 가족 분석",subcategories:[{id:"oega",name:"외가",items:[{id:"oesachon",name:"외사촌",baseScore:b("외사촌",65)},{id:"oesamchon",name:"외삼촌",baseScore:b("외삼촌",70)},{id:"oesukmo",name:"외숙모",baseScore:b("외숙모",68)},{id:"oejomo",name:"외조모",baseScore:b("외조모",75)},{id:"oejobu",name:"외조부",baseScore:b("외조부",72)},{id:"oejoka",name:"외조카",baseScore:b("외조카",60)},{id:"oejongomo",name:"외종조모",baseScore:b("외종조모",65)},{id:"oejongjobu",name:"외종조부",baseScore:b("외종조부",68)},{id:"imo",name:"이모",baseScore:b("이모",70)},{id:"imobu",name:"이모부",baseScore:b("이모부",65)}]},{id:"iseong",name:"이성",items:[{id:"gohyangiseong",name:"고향이성",baseScore:b("고향이성",60)},{id:"dandaeiseong",name:"단체이성",baseScore:b("단체이성",65)},{id:"dongneiseong",name:"동네이성",baseScore:b("동네이성",68)},{id:"dongmuniseong",name:"동문이성",baseScore:b("동문이성",70)},{id:"moimiseong",name:"모임이성",baseScore:b("모임이성",65)},{id:"hoesaiseong",name:"회사이성",baseScore:b("회사이성",72)}]},{id:"inyeon",name:"인연",items:[{id:"iseong_inyeon",name:"이성",baseScore:b("이성",70)},{id:"baeuja",name:"배우자",baseScore:b("배우자",75)},{id:"gajok",name:"가족",baseScore:b("가족",80)},{id:"guin",name:"귀인",baseScore:b("귀인",65)},{id:"dongryo",name:"동료",baseScore:b("동료",68)},{id:"dongmun",name:"동문",baseScore:b("동문",65)},{id:"donghyang",name:"동향",baseScore:b("동향",60)},{id:"seonbae_inyeon",name:"선배",baseScore:b("선배",70)},{id:"seuseung",name:"스승",baseScore:b("스승",72)},{id:"aein",name:"애인",baseScore:b("애인",75)},{id:"oega_inyeon",name:"외가",baseScore:b("외가",68)},{id:"chinga_inyeon",name:"친가",baseScore:b("친가",70)}]},{id:"seonbae",name:"선배",items:[{id:"gohyangseonbae",name:"고향선배",baseScore:b("고향선배",65)},{id:"dandaeseonbae",name:"단체선배",baseScore:b("단체선배",68)},{id:"dongneseonbae",name:"동네선배",baseScore:b("동네선배",60)},{id:"dongmunseonbae",name:"동문선배",baseScore:b("동문선배",70)},{id:"moimseonbae",name:"모임선배",baseScore:b("모임선배",65)},{id:"iseongseonbae",name:"이성선배",baseScore:b("이성선배",68)},{id:"hoesaseonbae",name:"회사선배",baseScore:b("회사선배",75)}]},{id:"chinga",name:"친가",items:[{id:"gomo",name:"고모",baseScore:b("고모",68)},{id:"gomobu",name:"고모부",baseScore:b("고모부",65)},{id:"baekmo",name:"백모",baseScore:b("백모",70)},{id:"baekbu",name:"백부",baseScore:b("백부",72)},{id:"sachon",name:"사촌",baseScore:b("사촌",65)},{id:"samchon",name:"삼촌",baseScore:b("삼촌",70)},{id:"sukmo",name:"숙모",baseScore:b("숙모",68)},{id:"jomo",name:"조모",baseScore:b("조모",75)},{id:"jobu",name:"조부",baseScore:b("조부",72)},{id:"joka",name:"조카",baseScore:b("조카",60)},{id:"jeungjomo",name:"증조모",baseScore:b("증조모",65)},{id:"jeungjobu",name:"증조부",baseScore:b("증조부",68)}]},{id:"chingu",name:"친구",items:[{id:"gohyangchingu",name:"고향친구",baseScore:b("고향친구",65)},{id:"dandaechingu",name:"단체친구",baseScore:b("단체친구",68)},{id:"dongnechingu",name:"동네친구",baseScore:b("동네친구",70)},{id:"dongmunchingu",name:"동문친구",baseScore:b("동문친구",72)},{id:"moimchingu",name:"모임친구",baseScore:b("모임친구",65)},{id:"iseongchingu",name:"이성친구",baseScore:b("이성친구",75)},{id:"hoesachingu",name:"회사친구",baseScore:b("회사친구",68)}]},{id:"hubae",name:"후배",items:[{id:"gohyanghubae",name:"고향후배",baseScore:b("고향후배",60)},{id:"dandaehubae",name:"단체후배",baseScore:b("단체후배",65)},{id:"dongnehubae",name:"동네후배",baseScore:b("동네후배",62)},{id:"dongmunhubae",name:"동문후배",baseScore:b("동문후배",68)},{id:"moimhubae",name:"모임후배",baseScore:b("모임후배",60)},{id:"iseonghubae",name:"이성후배",baseScore:b("이성후배",65)},{id:"hoesahubae",name:"회사후배",baseScore:b("회사후배",70)}]},{id:"gajeong",name:"가정",items:[{id:"ttal",name:"딸",baseScore:b("딸",75)},{id:"baeuja_gajeong",name:"배우자",baseScore:b("배우자",80)},{id:"adeul",name:"아들",baseScore:b("아들",75)}]},{id:"gajok_juyeon",name:"가족",items:[{id:"nuna",name:"누나",baseScore:b("누나",68)},{id:"dongsaeng",name:"동생",baseScore:b("동생",65)},{id:"abeoji",name:"아버지",baseScore:b("아버지",78)},{id:"eomeoni",name:"어머니",baseScore:b("어머니",80)},{id:"halmeoni",name:"할머니",baseScore:b("할머니",72)},{id:"harabeoji",name:"할아버지",baseScore:b("할아버지",70)},{id:"hyeong",name:"형",baseScore:b("형",68)}]}]},{id:"jujae",name:"주재",icon:"🎨",description:"논리, 예술, 학습 분석",subcategories:[{id:"nonri",name:"논리",items:[{id:"undong",name:"운동",baseScore:b("운동",65)},{id:"gamgak",name:"감각",baseScore:b("감각",70)},{id:"gaenyeom",name:"개념",baseScore:b("개념",72)},{id:"gieok",name:"기억",baseScore:b("기억",68)},{id:"nonri_item",name:"논리",baseScore:b("논리",75)},{id:"migak",name:"미각",baseScore:b("미각",60)},{id:"bunseok",name:"분석",baseScore:b("분석",75)},{id:"suri",name:"수리",baseScore:b("수리",70)},{id:"sigak",name:"시각",baseScore:b("시각",68)},{id:"eohi",name:"어휘",baseScore:b("어휘",72)},{id:"eoneo",name:"언어",baseScore:b("언어",75)},{id:"yeonsan",name:"연산",baseScore:b("연산",70)},{id:"ihae",name:"이해",baseScore:b("이해",75)},{id:"insik",name:"인식",baseScore:b("인식",72)},{id:"inji",name:"인지",baseScore:b("인지",70)},{id:"jeonryak",name:"전략",baseScore:b("전략",68)},{id:"jinhaeng",name:"진행",baseScore:b("진행",65)},{id:"jipjung",name:"집중",baseScore:b("집중",72)},{id:"cheonggak",name:"청각",baseScore:b("청각",68)},{id:"tongje",name:"통제",baseScore:b("통제",65)},{id:"pyeonghaeng",name:"평행",baseScore:b("평행",60)},{id:"hakseup_nonri",name:"학습",baseScore:b("학습",75)},{id:"hoheup_nonri",name:"호흡",baseScore:b("호흡",65)},{id:"hwasul",name:"화술",baseScore:b("화술",70)}]},{id:"yesul",name:"예술",items:[{id:"sumyeon_yesul",name:"수면",baseScore:b("수면",65)},{id:"joyeol_yesul",name:"조절",baseScore:b("조절",68)},{id:"chungdong_yesul",name:"충동",baseScore:b("충동",60)},{id:"geim",name:"게임",baseScore:b("게임",70)},{id:"muyong",name:"무용",baseScore:b("무용",65)},{id:"misul",name:"미술",baseScore:b("미술",70)},{id:"banbok",name:"반복",baseScore:b("반복",62)},{id:"byeonhwa",name:"변화",baseScore:b("변화",75)},{id:"bijeon",name:"비젼",baseScore:b("비젼",68)},{id:"sangsang",name:"상상",baseScore:b("상상",75)},{id:"saeksang",name:"색상",baseScore:b("색상",68)},{id:"saenggak",name:"생각",baseScore:b("생각",72)},{id:"yeonye",name:"연예",baseScore:b("연예",60)},{id:"yeoljeong",name:"열정",baseScore:b("열정",75)},{id:"yuhok",name:"유혹",baseScore:b("유혹",55)},{id:"eumak",name:"음악",baseScore:b("음악",70)},{id:"jageuk",name:"자극",baseScore:b("자극",65)},{id:"jeontal",name:"전달",baseScore:b("전달",70)},{id:"jejak",name:"제작",baseScore:b("제작",68)},{id:"jungdok",name:"중독",baseScore:b("중독",50)},{id:"changjak",name:"창작",baseScore:b("창작",75)},{id:"chegye",name:"체계",baseScore:b("체계",65)},{id:"hyeongsang",name:"형상",baseScore:b("형상",70)},{id:"hwaldong_yesul",name:"활동",baseScore:b("활동",72)}]},{id:"hakseup",name:"학습",items:[{id:"nonri_hakseup",name:"논리",baseScore:b("논리",75)},{id:"bunseok_hakseup",name:"분석",baseScore:b("분석",72)},{id:"suri_hakseup",name:"수리",baseScore:b("수리",70)},{id:"eoneo_hakseup",name:"언어",baseScore:b("언어",75)},{id:"ihae_hakseup",name:"이해",baseScore:b("이해",75)},{id:"jipjung_hakseup",name:"집중",baseScore:b("집중",70)},{id:"changjak_hakseup",name:"창작",baseScore:b("창작",68)},{id:"gyesan",name:"계산",baseScore:b("계산",70)},{id:"dohyeong",name:"도형",baseScore:b("도형",65)},{id:"mobang",name:"모방",baseScore:b("모방",60)},{id:"munjang",name:"문장",baseScore:b("문장",72)},{id:"bokseup",name:"복습",baseScore:b("복습",70)},{id:"bunbae",name:"분배",baseScore:b("분배",65)},{id:"seontaek",name:"선택",baseScore:b("선택",68)},{id:"sigan",name:"시간",baseScore:b("시간",65)},{id:"amgi",name:"암기",baseScore:b("암기",68)},{id:"yeseup",name:"예습",baseScore:b("예습",70)},{id:"yuchu",name:"유추",baseScore:b("유추",72)},{id:"eungyong",name:"응용",baseScore:b("응용",75)},{id:"jeongni",name:"정리",baseScore:b("정리",68)},{id:"jiri",name:"지리",baseScore:b("지리",60)},{id:"pandoan",name:"판단",baseScore:b("판단",72)},{id:"puri",name:"풀이",baseScore:b("풀이",70)},{id:"haeseok",name:"해석",baseScore:b("해석",72)}]}]},{id:"jueop",name:"주업",icon:"💼",description:"능력, 성향, 업무, 업종, 직업 분석",subcategories:[{id:"neungryeok",name:"능력",items:[{id:"gaebalryeok",name:"개발력",baseScore:b("개발력",70)},{id:"gaejoryeok",name:"개조력",baseScore:b("개조력",65)},{id:"gamsuryeok",name:"감수력",baseScore:b("감수력",60)},{id:"gyesanryeok",name:"계산력",baseScore:b("계산력",70)},{id:"gwangyeryeok",name:"관계력",baseScore:b("관계력",72)},{id:"gwanriryeok",name:"관리력",baseScore:b("관리력",68)},{id:"gisulryeok",name:"기술력",baseScore:b("기술력",70)},{id:"gieokryeok",name:"기억력",baseScore:b("기억력",68)},{id:"gihoekryeok",name:"기획력",baseScore:b("기획력",72)},{id:"nodongryeok",name:"노동력",baseScore:b("노동력",65)},{id:"rideoryeok",name:"리더력",baseScore:b("리더력",70)},{id:"munsoryeok",name:"문서력",baseScore:b("문서력",65)},{id:"balpyoryeok",name:"발표력",baseScore:b("발표력",68)},{id:"bunseokryeok",name:"분석력",baseScore:b("분석력",75)},{id:"saengsanryeok",name:"생산력",baseScore:b("생산력",68)},{id:"seolmyeongryeok",name:"설명력",baseScore:b("설명력",70)},{id:"sujipryeok",name:"수집력",baseScore:b("수집력",65)},{id:"sungryeonryeok",name:"숙련력",baseScore:b("숙련력",72)},{id:"eohiryeok",name:"어휘력",baseScore:b("어휘력",70)},{id:"yeongeopryeok",name:"영업력",baseScore:b("영업력",68)},{id:"eungyongryeok",name:"응용력",baseScore:b("응용력",72)},{id:"ihaeryeok",name:"이해력",baseScore:b("이해력",75)},{id:"jeondalryeok",name:"전달력",baseScore:b("전달력",70)},{id:"jejakkryeok",name:"제작력",baseScore:b("제작력",68)},{id:"jidoryeok",name:"지도력",baseScore:b("지도력",70)},{id:"jipjungryeok",name:"집중력",baseScore:b("집중력",72)},{id:"changyiryeok",name:"창의력",baseScore:b("창의력",75)},{id:"chaegimryeok",name:"책임력",baseScore:b("책임력",70)},{id:"cheorryeok",name:"처리력",baseScore:b("처리력",68)},{id:"chujiryeok",name:"추진력",baseScore:b("추진력",70)},{id:"pandanryeok",name:"판단력",baseScore:b("판단력",72)},{id:"panmaeryeok",name:"판매력",baseScore:b("판매력",65)},{id:"pyeonjipryeok",name:"편집력",baseScore:b("편집력",68)},{id:"pyohyeonryeok",name:"표현력",baseScore:b("표현력",70)},{id:"haegeolryeok",name:"해결력",baseScore:b("해결력",75)},{id:"hwahapryeok",name:"화합력",baseScore:b("화합력",68)},{id:"hwaldongryeok",name:"활동력",baseScore:b("활동력",72)}]},{id:"seonghyang_jueop",name:"성향",items:[{id:"gwangyeseong",name:"관계성",baseScore:b("관계성",70)},{id:"gwanriseong",name:"관리성",baseScore:b("관리성",68)},{id:"bunseokseong",name:"분석성",baseScore:b("분석성",72)},{id:"sukjiseong",name:"숙지성",baseScore:b("숙지성",65)},{id:"jeonmunseong",name:"전문성",baseScore:b("전문성",75)},{id:"changyiseong",name:"창의성",baseScore:b("창의성",70)},{id:"hwaldongseong",name:"활동성",baseScore:b("활동성",68)}]},{id:"eommu",name:"업무",items:[{id:"gaebal",name:"개발",baseScore:b("개발",70)},{id:"gyeongni",name:"경리",baseScore:b("경리",65)},{id:"gumaae",name:"구매",baseScore:b("구매",60)},{id:"nomu",name:"노무",baseScore:b("노무",58)},{id:"boan",name:"보안",baseScore:b("보안",68)},{id:"saengsan",name:"생산",baseScore:b("생산",65)},{id:"segeum",name:"세금",baseScore:b("세금",60)},{id:"sosong",name:"소송",baseScore:b("소송",55)},{id:"yeongu",name:"연구",baseScore:b("연구",75)},{id:"yeongop",name:"영업",baseScore:b("영업",68)},{id:"unsong",name:"운송",baseScore:b("운송",60)},{id:"unmyeong",name:"운명",baseScore:b("운명",50)},{id:"jageum",name:"자금",baseScore:b("자금",65)},{id:"junggae",name:"중계",baseScore:b("중계",62)},{id:"chuljang",name:"출장",baseScore:b("출장",60)},{id:"panmae",name:"판매",baseScore:b("판매",65)},{id:"hyeonjang",name:"현장",baseScore:b("현장",68)},{id:"hongbo",name:"홍보",baseScore:b("홍보",70)},{id:"hoegye",name:"회계",baseScore:b("회계",68)}]},{id:"eopjong",name:"업종",items:[{id:"gyeongyeong",name:"경영",baseScore:b("경영",68)},{id:"gyoyuk_gita",name:"교육/기타",baseScore:b("교육/기타",70)},{id:"dijain",name:"디자인",baseScore:b("디자인",65)},{id:"maketing",name:"마케팅",baseScore:b("마케팅",70)},{id:"seobiseu",name:"서비스",baseScore:b("서비스",68)},{id:"yeonye_bangsong",name:"연예/방송",baseScore:b("연예/방송",60)},{id:"yutong",name:"유통",baseScore:b("유통",65)},{id:"jeonja_tongsin",name:"전자/통신",baseScore:b("전자/통신",72)},{id:"jejjo",name:"제조",baseScore:b("제조",68)}]},{id:"jigeop",name:"직업",items:[{id:"gongmuwon",name:"공무원",baseScore:b("공무원",70)},{id:"gyosa",name:"교사",baseScore:b("교사",72)},{id:"ganhoha",name:"간호사",baseScore:b("간호사",68)},{id:"uisa",name:"의사",baseScore:b("의사",75)},{id:"byeonsa",name:"변호사",baseScore:b("변호사",70)},{id:"hoegesa",name:"회계사",baseScore:b("회계사",68)},{id:"gisulga",name:"기술자",baseScore:b("기술자",70)},{id:"yesulga",name:"예술가",baseScore:b("예술가",65)},{id:"saeopga",name:"사업가",baseScore:b("사업가",65)},{id:"yeongunja",name:"연구자",baseScore:b("연구자",72)}]}]},{id:"jusaeng",name:"주생",icon:"🌱",description:"일상 생활 전반 분석",subcategories:[{id:"gajok_jusaeng",name:"가족",items:[{id:"gyeyak",name:"계약",baseScore:b("계약",65)},{id:"gyoyuk",name:"교육",baseScore:b("교육",70)},{id:"daehwa",name:"대화",baseScore:b("대화",72)},{id:"moim",name:"모임",baseScore:b("모임",68)},{id:"syoping",name:"쇼핑",baseScore:b("쇼핑",65)},{id:"eonjaeng",name:"언쟁",baseScore:b("언쟁",45)},{id:"yeohaeng",name:"여행",baseScore:b("여행",70)},{id:"oesik",name:"외식",baseScore:b("외식",68)},{id:"isa",name:"이사",baseScore:b("이사",60)},{id:"jaesan",name:"재산",baseScore:b("재산",65)},{id:"haengsa",name:"행사",baseScore:b("행사",68)}]},{id:"geongang",name:"건강",items:[{id:"geongangsikpum_geongang",name:"건강식품",baseScore:b("건강식품",70)},{id:"boyak_geongang",name:"보약",baseScore:b("보약",62)},{id:"sangdam_geongang",name:"상담",baseScore:b("상담",65)},{id:"sumyeon_geongang",name:"수면",baseScore:b("수면",72)},{id:"undong_geongang",name:"운동",baseScore:b("운동",75)},{id:"eumsik_geongang",name:"음식",baseScore:b("음식",68)},{id:"geomsa",name:"검사",baseScore:b("검사",60)},{id:"yeohaeng_geongang",name:"여행",baseScore:b("여행",70)},{id:"masaji",name:"마사지",baseScore:b("마사지",68)},{id:"myeongsang",name:"명상",baseScore:b("명상",65)},{id:"biman_geongang",name:"비만",baseScore:b("비만",50)},{id:"sauna",name:"사우나",baseScore:b("사우나",62)},{id:"chimi",name:"취미",baseScore:b("취미",70)},{id:"hyusik",name:"휴식",baseScore:b("휴식",75)}]},{id:"gyeolhon",name:"결혼",items:[{id:"sago_gyeolhon",name:"사고",baseScore:b("사고",40)},{id:"iseong_gyeolhon",name:"이성",baseScore:b("이성",70)},{id:"sekseu_gyeolhon",name:"섹스",baseScore:b("섹스",65)},{id:"saeop_gyeolhon",name:"사업",baseScore:b("사업",62)},{id:"gyoyuk_gyeolhon",name:"교육",baseScore:b("교육",68)},{id:"isa_gyeolhon",name:"이사",baseScore:b("이사",60)},{id:"jaesan_gyeolhon",name:"재산",baseScore:b("재산",65)},{id:"geongang_gyeolhon",name:"건강",baseScore:b("건강",70)},{id:"bumo",name:"부모",baseScore:b("부모",72)},{id:"bunjaeng",name:"분쟁",baseScore:b("분쟁",45)},{id:"yusan",name:"유산",baseScore:b("유산",60)},{id:"jasik",name:"자식",baseScore:b("자식",75)},{id:"jonggyo",name:"종교",baseScore:b("종교",55)},{id:"jigeop_gyeolhon",name:"직업",baseScore:b("직업",68)}]},{id:"gyeyak_jusaeng",name:"계약",items:[{id:"daeyeo_gyeyak",name:"대여",baseScore:b("대여",58)},{id:"dongsan_gyeyak",name:"동산",baseScore:b("동산",60)},{id:"budongsan_gyeyak",name:"부동산",baseScore:b("부동산",70)},{id:"saeop_gyeyak",name:"사업",baseScore:b("사업",65)},{id:"jusik_gyeyak",name:"주식",baseScore:b("주식",62)},{id:"chaegwon_gyeyak",name:"채권",baseScore:b("채권",58)},{id:"peondeu_gyeyak",name:"펀드",baseScore:b("펀드",55)},{id:"gumae",name:"구매",baseScore:b("구매",65)},{id:"gongjeung",name:"공증",baseScore:b("공증",60)},{id:"bojeung",name:"보증",baseScore:b("보증",55)},{id:"bunsil",name:"분실",baseScore:b("분실",40)},{id:"sinyong",name:"신용",baseScore:b("신용",72)}]},{id:"byuti",name:"뷰티",items:[{id:"geongangsikpum_byuti",name:"건강식품",baseScore:b("건강식품",65)},{id:"boyak_byuti",name:"보약",baseScore:b("보약",60)},{id:"sangdam_byuti",name:"상담",baseScore:b("상담",62)},{id:"chiryo_byuti",name:"치료",baseScore:b("치료",68)},{id:"masaji_byuti",name:"마사지",baseScore:b("마사지",70)},{id:"gyojeong",name:"교정",baseScore:b("교정",65)},{id:"neilateu",name:"네일아트",baseScore:b("네일아트",62)},{id:"seupa",name:"스파",baseScore:b("스파",68)},{id:"anmyeon",name:"안면",baseScore:b("안면",70)},{id:"oemo",name:"외모",baseScore:b("외모",72)},{id:"heeo",name:"헤어",baseScore:b("헤어",68)},{id:"hwajangpum",name:"화장품",baseScore:b("화장품",65)}]},{id:"sago_jusaeng",name:"사고",items:[{id:"segeum_sago",name:"세금",baseScore:b("세금",50)},{id:"sosong_sago",name:"소송",baseScore:b("소송",45)},{id:"eonjaeng_sago",name:"언쟁",baseScore:b("언쟁",48)},{id:"jaesan_sago",name:"재산",baseScore:b("재산",55)},{id:"bunjaeng_sago",name:"분쟁",baseScore:b("분쟁",45)},{id:"bunsil_sago",name:"분실",baseScore:b("분실",40)},{id:"gyotong",name:"교통",baseScore:b("교통",50)},{id:"dansok",name:"단속",baseScore:b("단속",48)},{id:"donan",name:"도난",baseScore:b("도난",35)},{id:"mangsin",name:"망신",baseScore:b("망신",38)},{id:"sagi",name:"사기",baseScore:b("사기",30)},{id:"wiban",name:"위반",baseScore:b("위반",45)},{id:"wiheom",name:"위험",baseScore:b("위험",40)},{id:"pokhaeng",name:"폭행",baseScore:b("폭행",25)}]},{id:"saeop_jusaeng",name:"사업",items:[{id:"gwanri_saeop",name:"관리",baseScore:b("관리",68)},{id:"jusik_saeop",name:"주식",baseScore:b("주식",62)},{id:"tuja_saeop",name:"투자",baseScore:b("투자",60)},{id:"gaebal_saeop",name:"개발",baseScore:b("개발",70)},{id:"gumae_saeop",name:"구매",baseScore:b("구매",65)},{id:"saengsan_saeop",name:"생산",baseScore:b("생산",68)},{id:"sosong_saeop",name:"소송",baseScore:b("소송",45)},{id:"yeongop_saeop",name:"영업",baseScore:b("영업",70)},{id:"jageum_saeop",name:"자금",baseScore:b("자금",65)},{id:"gyeyak_saeop",name:"계약",baseScore:b("계약",68)},{id:"gihoek",name:"기획",baseScore:b("기획",72)},{id:"dongeop",name:"동업",baseScore:b("동업",60)}]},{id:"yeonae",name:"연애",items:[{id:"iseong_yeonae",name:"이성",baseScore:b("이성",72)},{id:"keondisyeon_yeonae",name:"컨디션",baseScore:b("컨디션",68)},{id:"sekseu_yeonae",name:"섹스",baseScore:b("섹스",65)},{id:"eonjaeng_yeonae",name:"언쟁",baseScore:b("언쟁",45)},{id:"yeohaeng_yeonae",name:"여행",baseScore:b("여행",75)},{id:"chimi_yeonae",name:"취미",baseScore:b("취미",70)},{id:"gamjeong",name:"감정",baseScore:b("감정",72)},{id:"gwanram",name:"관람",baseScore:b("관람",68)},{id:"simri",name:"심리",baseScore:b("심리",65)},{id:"ibyeol",name:"이별",baseScore:b("이별",40)},{id:"hogam",name:"호감",baseScore:b("호감",75)}]},{id:"siheom",name:"시험",items:[{id:"sumyeon_siheom",name:"수면",baseScore:b("수면",70)},{id:"keondisyeon_siheom",name:"컨디션",baseScore:b("컨디션",72)},{id:"gieok_siheom",name:"기억",baseScore:b("기억",68)},{id:"jipjung_siheom",name:"집중",baseScore:b("집중",75)},{id:"bokseup_siheom",name:"복습",baseScore:b("복습",70)},{id:"seontaek_siheom",name:"선택",baseScore:b("선택",65)},{id:"yeseup_siheom",name:"예습",baseScore:b("예습",68)},{id:"eungyong_siheom",name:"응용",baseScore:b("응용",72)},{id:"puri_siheom",name:"풀이",baseScore:b("풀이",70)},{id:"geongang_siheom",name:"건강",baseScore:b("건강",68)},{id:"siheom_item",name:"시험",baseScore:b("시험",65)},{id:"junbimul",name:"준비물",baseScore:b("준비물",60)}]},{id:"undong_jusaeng",name:"운동",items:[{id:"gwanri_undong",name:"관리",baseScore:b("관리",68)},{id:"gisul_undong",name:"기술",baseScore:b("기술",70)},{id:"pyeonghaeng_undong",name:"평행",baseScore:b("평행",65)},{id:"banbok_undong",name:"반복",baseScore:b("반복",62)},{id:"gonggangam",name:"공간감",baseScore:b("공간감",68)},{id:"gigu",name:"기구",baseScore:b("기구",65)},{id:"giryeok",name:"기력",baseScore:b("기력",70)},{id:"danche",name:"단체",baseScore:b("단체",68)},{id:"jeongsinryeok",name:"정신력",baseScore:b("정신력",72)},{id:"jiguryeok",name:"지구력",baseScore:b("지구력",75)},{id:"hoejeon",name:"회전",baseScore:b("회전",65)},{id:"heureum",name:"흐름",baseScore:b("흐름",68)}]},{id:"idong",name:"이동",items:[{id:"iseong_idong",name:"이성",baseScore:b("이성",65)},{id:"saeop_idong",name:"사업",baseScore:b("사업",68)},{id:"gajok_idong",name:"가족",baseScore:b("가족",70)},{id:"chingu_idong",name:"친구",baseScore:b("친구",68)},{id:"chuljang_idong",name:"출장",baseScore:b("출장",62)},{id:"yeohaeng_idong",name:"여행",baseScore:b("여행",75)},{id:"isa_idong",name:"이사",baseScore:b("이사",60)},{id:"haengsa_idong",name:"행사",baseScore:b("행사",65)},{id:"gohyang",name:"고향",baseScore:b("고향",68)},{id:"guknae",name:"국내",baseScore:b("국내",70)},{id:"gugoe",name:"국외",baseScore:b("국외",65)},{id:"seom",name:"섬",baseScore:b("섬",60)},{id:"hageop_idong",name:"학업",baseScore:b("학업",68)}]},{id:"ilsang",name:"일상",items:[{id:"sago_ilsang",name:"사고",baseScore:b("사고",45)},{id:"undong_ilsang",name:"운동",baseScore:b("운동",70)},{id:"saeop_ilsang",name:"사업",baseScore:b("사업",65)},{id:"gajok_ilsang",name:"가족",baseScore:b("가족",72)},{id:"isa_ilsang",name:"이사",baseScore:b("이사",58)},{id:"geongang_ilsang",name:"건강",baseScore:b("건강",70)},{id:"jonggyo_ilsang",name:"종교",baseScore:b("종교",55)},{id:"hageop_ilsang",name:"학업",baseScore:b("학업",68)},{id:"bongsa",name:"봉사",baseScore:b("봉사",65)},{id:"yeonae_ilsang",name:"연애",baseScore:b("연애",70)},{id:"jaemul_ilsang",name:"재물",baseScore:b("재물",62)}]},{id:"jayeongeop",name:"자영업",items:[{id:"gwanri_jayeong",name:"관리",baseScore:b("관리",68)},{id:"sangdam_jayeong",name:"상담",baseScore:b("상담",65)},{id:"gumae_jayeong",name:"구매",baseScore:b("구매",62)},{id:"segeum_jayeong",name:"세금",baseScore:b("세금",55)},{id:"yeongop_jayeong",name:"영업",baseScore:b("영업",70)},{id:"gyeyak_jayeong",name:"계약",baseScore:b("계약",68)},{id:"dansok_jayeong",name:"단속",baseScore:b("단속",50)},{id:"napum",name:"납품",baseScore:b("납품",65)},{id:"yeyak",name:"예약",baseScore:b("예약",62)},{id:"jaego",name:"재고",baseScore:b("재고",60)},{id:"chaeyong",name:"채용",baseScore:b("채용",65)},{id:"chinjeol",name:"친절",baseScore:b("친절",72)}]},{id:"jaeneung",name:"재능",items:[{id:"undong_jaeneung",name:"운동",baseScore:b("운동",68)},{id:"gisul_jaeneung",name:"기술",baseScore:b("기술",70)},{id:"misul_jaeneung",name:"미술",baseScore:b("미술",65)},{id:"eumak_jaeneung",name:"음악",baseScore:b("음악",68)},{id:"jejak_jaeneung",name:"제작",baseScore:b("제작",65)},{id:"gyesan_jaeneung",name:"계산",baseScore:b("계산",70)},{id:"hageop_jaeneung",name:"학업",baseScore:b("학업",72)},{id:"dokseo",name:"독서",baseScore:b("독서",70)},{id:"deutgi",name:"듣기",baseScore:b("듣기",68)},{id:"malhagi",name:"말하기",baseScore:b("말하기",70)},{id:"sseugi",name:"쓰기",baseScore:b("쓰기",68)},{id:"oegugeo",name:"외국어",baseScore:b("외국어",65)}]},{id:"jeongchi",name:"정치",items:[{id:"jageum_jeongchi",name:"자금",baseScore:b("자금",60)},{id:"gyeyak_jeongchi",name:"계약",baseScore:b("계약",62)},{id:"moim_jeongchi",name:"모임",baseScore:b("모임",65)},{id:"geongang_jeongchi",name:"건강",baseScore:b("건강",68)},{id:"bunjaeng_jeongchi",name:"분쟁",baseScore:b("분쟁",50)},{id:"gyeoljeong",name:"결정",baseScore:b("결정",70)},{id:"gwonryeok",name:"권력",baseScore:b("권력",65)},{id:"myeonggye",name:"명예",baseScore:b("명예",68)},{id:"balpyo",name:"발표",baseScore:b("발표",65)},{id:"jeongchaek",name:"정책",baseScore:b("정책",70)},{id:"julma",name:"줄마",baseScore:b("줄마",55)},{id:"huwon",name:"후원",baseScore:b("후원",62)}]},{id:"jikjang",name:"직장",items:[{id:"keondisyeon_jikjang",name:"컨디션",baseScore:b("컨디션",70)},{id:"tuja_jikjang",name:"투자",baseScore:b("투자",60)},{id:"gaebal_jikjang",name:"개발",baseScore:b("개발",72)},{id:"moim_jikjang",name:"모임",baseScore:b("모임",65)},{id:"geongang_jikjang",name:"건강",baseScore:b("건강",68)},{id:"hogam_jikjang",name:"호감",baseScore:b("호감",70)},{id:"balpyo_jikjang",name:"발표",baseScore:b("발표",65)},{id:"gyeoljae",name:"결재",baseScore:b("결재",68)},{id:"bogoseo",name:"보고서",baseScore:b("보고서",65)},{id:"siljeok",name:"실적",baseScore:b("실적",70)},{id:"jeopdae",name:"접대",baseScore:b("접대",62)},{id:"jingeup",name:"진급",baseScore:b("진급",68)}]},{id:"chieop",name:"취업",items:[{id:"keondisyeon_chieop",name:"컨디션",baseScore:b("컨디션",70)},{id:"gisul_chieop",name:"기술",baseScore:b("기술",72)},{id:"gaebal_chieop",name:"개발",baseScore:b("개발",70)},{id:"gyeyak_chieop",name:"계약",baseScore:b("계약",65)},{id:"geongang_chieop",name:"건강",baseScore:b("건강",68)},{id:"siheom_chieop",name:"시험",baseScore:b("시험",70)},{id:"balpyo_chieop",name:"발표",baseScore:b("발표",65)},{id:"geunsim",name:"근심",baseScore:b("근심",50)},{id:"myeonjeop",name:"면접",baseScore:b("면접",68)},{id:"jeongong",name:"전공",baseScore:b("전공",72)},{id:"chucheon",name:"추천",baseScore:b("추천",65)},{id:"chieop_item",name:"취업",baseScore:b("취업",70)}]},{id:"chimi_jusaeng",name:"취미",items:[{id:"undong_chimi",name:"운동",baseScore:b("운동",70)},{id:"eumsik_chimi",name:"음식",baseScore:b("음식",68)},{id:"geim_chimi",name:"게임",baseScore:b("게임",65)},{id:"misul_chimi",name:"미술",baseScore:b("미술",65)},{id:"eumak_chimi",name:"음악",baseScore:b("음악",70)},{id:"jejak_chimi",name:"제작",baseScore:b("제작",62)},{id:"moim_chimi",name:"모임",baseScore:b("모임",68)},{id:"syoping_chimi",name:"쇼핑",baseScore:b("쇼핑",65)},{id:"yeohaeng_chimi",name:"여행",baseScore:b("여행",75)},{id:"gwanram_chimi",name:"관람",baseScore:b("관람",68)},{id:"bongsa_chimi",name:"봉사",baseScore:b("봉사",62)},{id:"dokseo_chimi",name:"독서",baseScore:b("독서",70)},{id:"gongye",name:"공예",baseScore:b("공예",65)},{id:"daenseu",name:"댄스",baseScore:b("댄스",68)}]},{id:"haksaeng",name:"학생",items:[{id:"iseong_haksaeng",name:"이성",baseScore:b("이성",65)},{id:"gajok_haksaeng",name:"가족",baseScore:b("가족",70)},{id:"seuseung",name:"스승",baseScore:b("스승",72)},{id:"chingu_haksaeng",name:"친구",baseScore:b("친구",68)},{id:"moim_haksaeng",name:"모임",baseScore:b("모임",65)},{id:"geongang_haksaeng",name:"건강",baseScore:b("건강",68)},{id:"oemo_haksaeng",name:"외모",baseScore:b("외모",62)},{id:"siheom_haksaeng",name:"시험",baseScore:b("시험",70)},{id:"ibyeol_haksaeng",name:"이별",baseScore:b("이별",45)},{id:"hageop_haksaeng",name:"학업",baseScore:b("학업",72)},{id:"balpyo_haksaeng",name:"발표",baseScore:b("발표",65)},{id:"geunsim_haksaeng",name:"근심",baseScore:b("근심",50)}]}]},{id:"juneung",name:"주능",icon:"⚡",description:"능력과 잠재력 분석",subcategories:[]},{id:"juhyung",name:"주흉",icon:"⚠️",description:"위험과 주의사항 분석",subcategories:[]}];async function a8(){try{console.log("🔄 동적 사주 카테고리 데이터 로드 시작...");const t=await r8();console.log("📥 백엔드에서 받은 카테고리:",t);const e=us.findIndex(n=>n.id==="juneung"),s=us.findIndex(n=>n.id==="juhyung");console.log(`📌 주능 인덱스: ${e}, 주흉 인덱스: ${s}`),t.forEach(n=>{n.id==="juneung"&&e!==-1?(us[e].subcategories=n.subcategories,console.log(`✅ 주능 카테고리 업데이트: ${n.subcategories.length}개 중항목`),console.log("주능 서브카테고리:",n.subcategories)):n.id==="juhyung"&&s!==-1&&(us[s].subcategories=n.subcategories,console.log(`✅ 주흉 카테고리 업데이트: ${n.subcategories.length}개 중항목`),console.log("주흉 서브카테고리:",n.subcategories))}),console.log("🎉 동적 사주 카테고리 데이터 로드 완료!"),console.log("최종 SAJU_RADAR_CATEGORIES:",us)}catch(t){console.error("❌ 동적 사주 카테고리 데이터 로드 실패:",t)}}function i8(){return us}function o8({categories:t,selectedCategory:e,onCategoryChange:s}){return a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 xl:grid-cols-9 gap-4",children:t.map(n=>a.jsx("button",{onClick:()=>s(n.id),className:`p-4 rounded-xl border-2 transition-all duration-200 ${e===n.id?"border-purple-500 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 shadow-lg":"border-gray-200 dark:border-gray-600 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/10 bg-white dark:bg-gray-700"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-2",children:n.icon}),a.jsx("h3",{className:"font-bold text-lg mb-1",children:n.name}),a.jsx("p",{className:`text-sm mt-1 ${e===n.id?"text-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-400"}`,children:n.description})]})},n.id))})})}function l8({subcategories:t,selectedSubcategory:e,onSubcategoryChange:s}){return a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex overflow-x-auto gap-2 pb-2",children:t.map(n=>a.jsxs("button",{onClick:()=>s(n.id),className:`px-4 py-2 rounded-lg whitespace-nowrap transition-colors duration-200 font-medium ${e===n.id?"bg-purple-500 text-white shadow-md":"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:[n.name,a.jsxs("span",{className:"ml-2 text-xs opacity-75",children:["(",n.items.length,")"]})]},n.id))})})}const St={DIMENSIONS:{height:"400px"},COLORS:{backgrounds:{base:"rgba(139, 92, 246, 0.1)",today:"rgba(239, 68, 68, 0.15)",month:"rgba(6, 182, 212, 0.15)",year:"rgba(245, 158, 11, 0.15)"},borders:{base:"#8b5cf6",today:"#ef4444",month:"#06b6d4",year:"#f59e0b"}},CHART_OPTIONS:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:13,weight:700},padding:16,boxWidth:12,usePointStyle:!0,color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#8b5cf6",borderWidth:2,cornerRadius:8,padding:14,displayColors:!0,titleFont:{size:14,weight:600},bodyFont:{size:13}}},scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:10,font:{size:12,weight:600},color:"#6b7280",backdropColor:"transparent",showLabelBackdrop:!1},grid:{color:"rgba(107, 114, 128, 0.4)",lineWidth:2},angleLines:{color:"rgba(107, 114, 128, 0.3)",lineWidth:2},pointLabels:{font:{size:13,weight:700},color:"#374151"}}},interaction:{intersect:!1},animation:{duration:1e3,easing:"easeInOutQuart"}},DARK_MODE_CHART_OPTIONS:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:13,weight:700},padding:16,boxWidth:12,usePointStyle:!0,color:"#f1f5f9"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#a78bfa",borderWidth:2,cornerRadius:8,padding:14,displayColors:!0,titleFont:{size:14,weight:600},bodyFont:{size:13}}},scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:10,font:{size:12,weight:600},color:"#cbd5e1",backdropColor:"transparent",showLabelBackdrop:!1},grid:{color:"rgba(156, 163, 175, 0.5)",lineWidth:2},angleLines:{color:"rgba(156, 163, 175, 0.4)",lineWidth:2},pointLabels:{font:{size:13,weight:700},color:"#f1f5f9"}}},interaction:{intersect:!1},animation:{duration:1e3,easing:"easeInOutQuart"}},BUTTON_STYLES:{timeFrame:{base:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",active:{base:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",today:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",month:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",year:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300"},inactive:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}},LAYOUT:{timeFrameSelector:{container:"flex flex-wrap justify-center gap-3 mb-6"},chartContainer:{wrapper:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6"}}},f0=t=>{const e=St.COLORS;switch(t){case"today":return{background:e.backgrounds.today,border:e.borders.today};case"month":return{background:e.backgrounds.month,border:e.borders.month};case"year":return{background:e.backgrounds.year,border:e.borders.year};default:return{background:e.backgrounds.base,border:e.borders.base}}},c8=(t,e)=>{const s=t?St.DARK_MODE_CHART_OPTIONS:St.CHART_OPTIONS;return e?{...s,...e,plugins:{...s.plugins,...e.plugins},scales:{...s.scales,...e.scales}}:s};dt.register(zt,Gt,Qe,Ni,Ps,Ds,on,ln,vs);const d8=({data:t,birthDate:e,sajuData:s})=>{console.log("[차트 컴포넌트] 받은 사주 데이터:",s);const[n,r]=j.useState(!1),[i,o]=j.useState("base");j.useEffect(()=>{const N=()=>{r(document.documentElement.classList.contains("dark"))};N();const M=new MutationObserver(N);return M.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>M.disconnect()},[]);const l=(N,M=1,k,w=85)=>{const E=N*.8*M,D=(Math.random()-.5)*k,O=E+D;return Math.max(20,Math.min(w,Math.round(O)))},c=j.useMemo(()=>{console.log("[useMemo 실행] sajuData:",s);const N={},M=k=>{var w,_,E,D,O,L,T,A;return k?((w=k.year)==null?void 0:w.gan)&&((_=k.year)==null?void 0:_.ji)&&((E=k.month)==null?void 0:E.gan)&&((D=k.month)==null?void 0:D.ji)&&((O=k.day)==null?void 0:O.gan)&&((L=k.day)==null?void 0:L.ji)&&((T=k.time)==null?void 0:T.gan)&&((A=k.time)==null?void 0:A.ji)&&k.ohHaengBalance:!1};return M(s)?(console.log("[기본 점수 계산] 유효한 sajuData 존재함:",s.fullSaju),N.base=t.items.map(k=>{try{const w=ma(k.name,s,"base");return console.log(`[항목 점수] ${k.name}: ${w}점`),w}catch(w){return console.error(`[점수 계산 오류] ${k.name}:`,w),k.baseScore}})):(console.log("[경고] 유효한 sajuData가 없음 - 정적 점수 사용"),N.base=t.items.map(k=>k.baseScore)),M(s)?(N.today=t.items.map(k=>{try{return ma(k.name,s,"today")}catch(w){return console.error(`[오늘 점수 계산 오류] ${k.name}:`,w),l(k.baseScore,1,25)}}),N.month=t.items.map(k=>{try{return ma(k.name,s,"month")}catch(w){return console.error(`[이번달 점수 계산 오류] ${k.name}:`,w),l(k.baseScore,1,18)}}),N.year=t.items.map(k=>{try{return ma(k.name,s,"year")}catch(w){return console.error(`[올해 점수 계산 오류] ${k.name}:`,w),l(k.baseScore,1,12)}})):(N.today=t.items.map(k=>l(k.baseScore,1,25)),N.month=t.items.map(k=>l(k.baseScore,1,18)),N.year=t.items.map(k=>l(k.baseScore,1,12))),N},[t.items,s]),d=j.useMemo(()=>{const N=[],M=c.base||t.items.map(k=>k.baseScore);if(N.push({label:"나의 기본 사주",values:M,timeFrame:"base"}),i!=="base"&&c[i]){const k={today:"오늘의 운세",month:"이번달 운세",year:"올해 운세"};N.push({label:k[i]||i,values:c[i],timeFrame:i})}return N},[c,i,t.items]),h=c.base||t.items.map(N=>N.baseScore),m=Math.max(...h),u=h.map((N,M)=>N===m?M:-1).filter(N=>N!==-1),g=j.useMemo(()=>{const N=t.items.map(M=>M.name);return At.createStandardRadarConfig(N,d,n,!0)},[t.items,d,n]),f=g.data,x=j.useMemo(()=>{var E,D,O,L,T,A;const N=g.options,M=c8(n,{plugins:{legend:{display:i!=="base"},tooltip:{callbacks:{label:I=>`${I.dataset.label}: ${I.parsed.r}점`}}}}),k=[];k.push(...c.base||[]),i!=="base"&&c[i]&&k.push(...c[i]||[]);const w=Math.max(...k,50),_=Math.ceil(w/10)*10+10;return console.log(`[차트 스케일] 최대값: ${w}, 동적 max: ${_}`),{...N,...M,plugins:{...N==null?void 0:N.plugins,...M.plugins,legend:{...(E=N==null?void 0:N.plugins)==null?void 0:E.legend,...(D=M.plugins)==null?void 0:D.legend},tooltip:{...(O=N==null?void 0:N.plugins)==null?void 0:O.tooltip,...(L=M.plugins)==null?void 0:L.tooltip}},scales:{...N==null?void 0:N.scales,...M.scales,r:{...(T=N==null?void 0:N.scales)==null?void 0:T.r,...(A=M.scales)==null?void 0:A.r,max:_}}}},[g,n,i,c]),y=(h.reduce((N,M)=>N+M,0)/t.items.length).toFixed(1),v={labels:t.items.map(N=>N.name),datasets:[{label:"나의 기본 사주",data:h,backgroundColor:h.map((N,M)=>u.includes(M)?At.COLOR_PALETTE.accent:f0("base").background),borderColor:h.map((N,M)=>u.includes(M)?At.COLOR_PALETTE.accent:f0("base").border),borderWidth:2,borderRadius:8,borderSkipped:!1}]},S={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:n?"#374151":"#f3f4f6",titleColor:n?"#ffffff":"#000000",bodyColor:n?"#ffffff":"#000000",borderColor:n?"#6b7280":"#d1d5db",borderWidth:1,callbacks:{label:N=>`${N.dataset.label}: ${N.parsed.y}점`}}},scales:{x:{grid:{display:!1},ticks:{color:n?"#9ca3af":"#6b7280"}},y:{beginAtZero:!0,max:100,grid:{color:n?"#374151":"#e5e7eb"},ticks:{color:n?"#9ca3af":"#6b7280"}}}},C=t.items.length<=2;return a.jsxs("div",{className:St.LAYOUT.chartContainer.wrapper,children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:["🔮 ",t.title," 상세 분석"]}),e&&a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["출생정보: ",e]}),C&&a.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"💡 항목이 적어 막대 차트로 표시됩니다"})]}),a.jsx("div",{className:"mb-6",style:{height:St.DIMENSIONS.height},children:C?a.jsx(Qg,{data:v,options:S}):a.jsx(oc,{data:f,options:x})}),a.jsx("div",{className:`${St.LAYOUT.timeFrameSelector.container} mb-6`,children:[{key:"base",label:"기본",active:"base"},{key:"today",label:"오늘",active:"today"},{key:"month",label:"이달",active:"month"},{key:"year",label:"올해",active:"year"}].map(({key:N,label:M,active:k})=>a.jsx("button",{onClick:()=>o(N),className:`${St.BUTTON_STYLES.timeFrame.base} ${i===N?St.BUTTON_STYLES.timeFrame.active[N]:St.BUTTON_STYLES.timeFrame.inactive}`,children:M},N))}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-xl p-6 text-center",children:[a.jsxs("h3",{className:"text-xl font-semibold mb-3",children:["🔮 ",t.title," 종합 분석"]}),a.jsx("div",{className:"text-lg",children:Number(y)>=80?"✨ 매우 우수한 사주":Number(y)>=60?"🌟 양호한 사주":Number(y)>=40?"⭐ 평범한 사주":"💪 노력이 필요한 사주"}),a.jsx("div",{className:"text-sm mt-2 opacity-90",children:"각 영역별 균형과 최고점을 차트에서 확인하세요"})]})]})};function h8({isOpen:t,onClose:e,onCustomerAdded:s}){const[n,r]=j.useState({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""}),[i,o]=j.useState({}),[l,c]=j.useState(!1),[d,h]=j.useState(null),m=j.useCallback(()=>{l||(u(),e())},[l,e]);j.useEffect(()=>{t&&u()},[t]),j.useEffect(()=>{const v=S=>{S.key==="Escape"&&t&&m()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[t,m]);const u=()=>{r({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""}),o({}),h(null)},g=()=>{const v={};if(n.name.trim()?n.name.length<2&&(v.name="이름은 2자 이상 입력해주세요"):v.name="이름을 입력해주세요",!n.birth_date)v.birth_date="생년월일을 선택해주세요";else{const S=new Date(n.birth_date),C=new Date,N=new Date(1900,0,1);S>C?v.birth_date="미래 날짜는 선택할 수 없습니다":S<N&&(v.birth_date="1900년 이후 날짜를 선택해주세요")}return n.birth_time||(v.birth_time="생시를 선택해주세요"),n.phone.trim()?/^010-\d{4}-\d{4}$/.test(n.phone)||(v.phone="올바른 전화번호 형식이 아닙니다 (예: 010-1234-5678)"):v.phone="전화번호를 입력해주세요",o(v),Object.keys(v).length===0},f=v=>{const S=v.replace(/[^\d]/g,"");return S.length<=3?S:S.length<=7?`${S.slice(0,3)}-${S.slice(3)}`:`${S.slice(0,3)}-${S.slice(3,7)}-${S.slice(7,11)}`},x=(v,S)=>{v==="phone"&&(S=f(S)),r(C=>({...C,[v]:S})),i[v]&&o(C=>({...C,[v]:void 0})),d&&h(null)},p=async v=>{if(v.preventDefault(),!!g()){c(!0),h(null);try{const S={name:n.name.trim(),birth_date:n.birth_date,birth_time:n.birth_time,phone:n.phone,lunar_solar:n.lunar_solar,gender:n.gender,memo:n.memo.trim()},C=await Gm(S);h({type:"success",text:"고객이 성공적으로 등록되었습니다!"}),setTimeout(()=>{s(C.data),m()},500)}catch(S){console.error("고객 등록 실패:",S),h({type:"error",text:S instanceof Error?S.message:"고객 등록 중 오류가 발생했습니다"})}finally{c(!1)}}},y=v=>{v.target===v.currentTarget&&m()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:y,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-100",children:[a.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 px-6 py-4 border-b border-gray-200 dark:border-gray-700 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:"👤"}),"새 고객 등록"]}),a.jsx("button",{onClick:m,disabled:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50","aria-label":"모달 닫기",children:a.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsxs("form",{onSubmit:p,className:"p-6",children:[a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 이름"]}),a.jsx("input",{type:"text",value:n.name,onChange:v=>x("name",v.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors
                  ${i.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}
                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,placeholder:"고객 이름을 입력하세요",disabled:l,autoComplete:"name"}),i.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.name})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 생년월일"]}),a.jsx("input",{type:"date",value:n.birth_date,onChange:v=>x("birth_date",v.target.value),max:new Date().toISOString().split("T")[0],min:"1900-01-01",className:`w-full px-4 py-3 border rounded-xl transition-colors
                  ${i.birth_date?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}
                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,disabled:l}),i.birth_date&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.birth_date})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 생시 (24시간 형식)"]}),a.jsx("input",{type:"time",value:n.birth_time,onChange:v=>x("birth_time",v.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors
                  ${i.birth_time?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}
                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,disabled:l}),i.birth_time&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.birth_time})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 전화번호"]}),a.jsx("input",{type:"tel",value:n.phone,onChange:v=>x("phone",v.target.value),className:`w-full px-4 py-3 border rounded-xl transition-colors
                  ${i.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}
                  dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2`,placeholder:"010-1234-5678",disabled:l,autoComplete:"tel"}),i.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.phone})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-3 text-gray-700 dark:text-gray-300",children:"음력/양력"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"solar",checked:n.lunar_solar==="solar",onChange:()=>x("lunar_solar","solar"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:l}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"🌞 양력"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"lunar",checked:n.lunar_solar==="lunar",onChange:()=>x("lunar_solar","lunar"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:l}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"🌙 음력"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-3 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"text-red-500",children:"*"})," 성별"]}),a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"male",checked:n.gender==="male",onChange:()=>x("gender","male"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:l}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"👨 남성"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"female",checked:n.gender==="female",onChange:()=>x("gender","female"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:l}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"👩 여성"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"메모"}),a.jsx("textarea",{value:n.memo,onChange:v=>x("memo",v.target.value),rows:3,className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl
                         dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none`,placeholder:"고객에 대한 추가 정보를 입력하세요 (선택사항)",disabled:l})]}),d&&a.jsx("div",{className:`p-4 rounded-xl text-sm font-medium ${d.type==="success"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[d.type==="success"?a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),d.text]})})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:m,disabled:l,className:`px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300
                       rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:"취소"}),a.jsx("button",{type:"submit",disabled:l,className:`px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl
                       hover:from-blue-700 hover:to-blue-800 transition-all duration-200
                       disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium`,children:l?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})}),"등록 중..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"등록하기"]})})]})]})]})}):null}function kl({onSelect:t,selectedCustomer:e,showAddButton:s=!0}){ze();const[n,r]=j.useState([]),[i,o]=j.useState(!1),[l,c]=j.useState(""),[d,h]=j.useState(!1),[m,u]=j.useState(!1),g=j.useCallback(async()=>{try{h(!0);const v=await Ym(1,100,l);r(v.data)}catch(v){console.error("Error loading customers:",v)}finally{h(!1)}},[l]);j.useEffect(()=>{g()},[g]);const f=v=>{t(v),o(!1),c("")},x=()=>{t(null),c("")},p=v=>{g(),t(v),u(!1)},y=()=>{u(!0),o(!1)};return!d&&n.length,a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"고객 선택:"}),e?a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[a.jsxs("span",{className:"text-blue-700 dark:text-blue-300",children:["👤 ",e.name," (",e.birth_date,")"]}),a.jsx("button",{onClick:x,className:"text-red-500 hover:text-red-700",children:"✕"})]}):a.jsx("button",{onClick:()=>o(!i),className:`px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                     rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors`,children:"👤 고객 선택하기"})]}),i&&a.jsxs("div",{className:`absolute top-full mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-xl 
                      border border-gray-200 dark:border-gray-700 z-50`,children:[a.jsxs("div",{className:"p-4 space-y-3",children:[s&&a.jsx("button",{onClick:y,className:`w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg
                         flex items-center justify-center gap-2 transition-colors`,children:"➕ 새 고객 등록"}),s&&a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600"}),a.jsx("input",{type:"text",placeholder:"이름 또는 전화번호로 검색...",value:l,onChange:v=>c(v.target.value),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg
                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,autoFocus:!0})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:d?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"로딩 중..."}):n.length===0?a.jsxs("div",{className:"p-6 text-center space-y-4",children:[a.jsx("div",{className:"text-4xl",children:"🔮"}),a.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[a.jsx("p",{className:"font-medium mb-2",children:"등록된 고객이 없습니다"}),a.jsxs("p",{className:"text-sm",children:['위의 "새 고객 등록" 버튼을 클릭하여',a.jsx("br",{}),"첫 고객을 등록해보세요"]})]})]}):a.jsx("div",{className:"divide-y dark:divide-gray-700",children:n.map(v=>a.jsx("button",{onClick:()=>f(v),className:`w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700
                             transition-colors text-left`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:v.name}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[v.birth_date," ",v.birth_time," ·",v.lunar_solar==="lunar"?"음력":"양력"," ·",v.gender==="male"?"남":"여"]})]}),a.jsx("div",{className:"text-sm text-gray-400",children:v.phone})]})},v.id))})}),a.jsx("div",{className:"p-2 border-t dark:border-gray-700",children:a.jsx("button",{onClick:()=>o(!1),className:`w-full px-3 py-2 text-gray-600 dark:text-gray-400 
                       hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg`,children:"닫기"})})]}),a.jsx(h8,{isOpen:m,onClose:()=>u(!1),onCustomerAdded:p})]})}function u8(t){const e=new Date(t.birth_date),[s]=t.birth_time.split(":").map(Number);let n=null;if(t.saju_data)try{n=typeof t.saju_data=="string"?JSON.parse(t.saju_data):t.saju_data}catch(r){console.warn("사주 데이터 파싱 실패:",r)}return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:s,isLunar:t.lunar_solar==="lunar",gender:t.gender,sajuData:n}}function m8(t){return t?"name"in t?t.name:"사용자":"미선택"}function g8(t){if(!t)return"";if("birth_date"in t){const e=new Date(t.birth_date),s=t.lunar_solar==="lunar"?"(음력)":"";return`${e.getFullYear()}년 ${e.getMonth()+1}월 ${e.getDate()}일 ${t.birth_time} ${s}`}else if("birthInfo"in t){const e=t.birthInfo,s=e.isLunar?"(음력)":"";return`${e.year}년 ${e.month}월 ${e.day}일 ${e.hour}시 ${s}`}return""}const f8=({customer:t,lifetimeFortune:e,loading:s=!1,error:n=null,onLoadChart:r,onScrollToChart:i})=>{var h,m;const o=m8(t),l=g8(t),c=!!e,d=()=>{c&&i?i():!s&&r&&r()};if(!t)return a.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 text-center",children:a.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[a.jsx("span",{className:"text-2xl mb-2 block",children:"📊"}),a.jsx("p",{className:"text-lg font-medium",children:"100년 인생운세 차트"}),a.jsx("p",{className:"text-sm mt-2",children:"고객을 선택하면 인생운세 차트를 확인할 수 있습니다"})]})});if(s)return a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl p-6 text-white shadow-lg animate-pulse",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"animate-spin text-2xl",children:"⭐"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-lg font-bold",children:[o,"님의 100년 운세를 계산하고 있습니다..."]}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:l})]})]})}),a.jsx("div",{className:"text-white/60",children:a.jsxs("svg",{className:"animate-spin h-8 w-8",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})})]})});if(n)return a.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all",onClick:d,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:"❌"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-bold",children:"차트 로드 실패"}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:n}),a.jsx("p",{className:"text-xs opacity-75 mt-2",children:"클릭하여 다시 시도"})]})]})}),a.jsx("div",{className:"text-white/60",children:a.jsx("svg",{className:"h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})});if(c){const u=(h=e==null?void 0:e.data)==null?void 0:h.analysis,g=(m=e==null?void 0:e.data)==null?void 0:m.lifetimeFortune;let f={age:0,score:0},x=0;if(u){const p=e.data.analysis;f=p.bestYear,x=p.averageScore}else if(g){const p=e.data.lifetimeFortune;if(p&&p.length>0){const y=p.reduce((S,C)=>C.totalScore>S.totalScore?C:S,p[0]);f={age:y.age,score:y.totalScore},x=p.reduce((S,C)=>S+C.totalScore,0)/p.length}}return a.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all transform hover:scale-[1.02]",onClick:d,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:"📈"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xl font-bold",children:[o,"님의 100년 인생운세 차트"]}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:l}),a.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[a.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded",children:["최고운세: ",f.age,"세 (",f.score,"점)"]}),a.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded",children:["평균: ",x.toFixed(1),"점"]})]})]})]})}),a.jsx("div",{className:"text-white",children:a.jsx("svg",{className:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),a.jsx("div",{className:"mt-3 text-center",children:a.jsx("p",{className:"text-sm opacity-75",children:"클릭하여 상세 차트 보기 ↓"})})]})}return a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl p-6 text-white shadow-lg cursor-pointer hover:shadow-xl transition-all transform hover:scale-[1.02]",onClick:d,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:"🔮"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xl font-bold",children:[o,"님의 100년 인생운세 차트"]}),a.jsx("p",{className:"text-sm opacity-90 mt-1",children:l}),a.jsx("p",{className:"text-xs opacity-75 mt-2",children:"클릭하여 운세 차트 확인하기"})]})]})}),a.jsx("div",{className:"text-white",children:a.jsx("svg",{className:"h-10 w-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})})};dt.register(on,ln,vs,Qe,Gt,ac,Ps,Ds);function x8({data:t,currentAge:e=0,birthYear:s}){const n=new Date().getFullYear(),r=s||(e>0?n-e+1:n-35),i=j.useMemo(()=>{const c=t.map(f=>`${r+f.age-1}년`),d=t.map(f=>f.totalScore),h=t.map(f=>f.fortune),m=t.map(f=>f.willpower),u=t.map(f=>f.environment),g=t.map(f=>f.change);return{labels:c,datasets:[{type:"bar",label:"종합 운세",data:d,backgroundColor:f=>{var y;const x=f.dataIndex;return((y=t[x])==null?void 0:y.age)===e?"rgba(55, 65, 81, 0.8)":"rgba(156, 163, 175, 0.6)"},borderColor:f=>{var y;const x=f.dataIndex;return((y=t[x])==null?void 0:y.age)===e?"rgba(55, 65, 81, 1)":"rgba(107, 114, 128, 1)"},borderWidth:1,yAxisID:"y",order:2},{type:"line",label:"행운 (재물·명예)",data:h,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"의지 (추진력·실행)",data:m,borderColor:"#f97316",backgroundColor:"rgba(249, 115, 22, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"환경 (대인·지원)",data:u,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1},{type:"line",label:"변화 (기회·위기)",data:g,borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:3,tension:.4,yAxisID:"y",order:1}]}},[t,r,e]),o=j.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"100년 인생운세 차트",font:{size:18,weight:"bold"},padding:20},legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}},title:{padding:{top:35,bottom:10}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,padding:12,displayColors:!0,position:"nearest",yAlign:"bottom",callbacks:{title:c=>{const d=c[0].dataIndex,h=t[d];return`${r+h.age-1}년 (${h.age}세)`},afterLabel:c=>{const d=c.dataIndex,h=t[d];return c.dataset.label==="종합 운세"?[`대운: ${h.대운.천간}${h.대운.지지} (${h.대운.오행})`,`세운: ${h.세운.천간}${h.세운.지지} (${h.세운.오행})`]:[]}},external(c){const{chart:d,tooltip:h}=c,m=d.canvas;if(!h||!h.opacity)return;let u=m.parentNode.querySelector("div.chartjs-tooltip");if(u||(u=document.createElement("div"),u.className="chartjs-tooltip",u.style.cssText=`
              position: absolute;
              background: rgba(0, 0, 0, 0.9);
              color: white;
              padding: 12px 16px;
              border-radius: 8px;
              font-size: 13px;
              pointer-events: none;
              transition: all 0.1s ease;
              z-index: 1000;
              min-width: 200px;
              border: 1px solid rgba(255, 255, 255, 0.2);
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            `,m.parentNode.appendChild(u)),h.body){const M=h.title||[],k=h.body.map(_=>_.lines);let w='<div style="font-weight: bold; margin-bottom: 8px; font-size: 14px;">';M.forEach(_=>{w+=_}),w+="</div>",k.forEach((_,E)=>{const D=h.labelColors[E];if(D){const O=`background:${D.backgroundColor}; width: 12px; height: 12px; display: inline-block; margin-right: 8px; border-radius: 2px;`;w+=`<div style="margin: 4px 0;"><span style="${O}"></span>${_}</div>`}else w+=`<div style="margin: 4px 0; color: #cbd5e1; font-size: 12px;">${_}</div>`}),u.innerHTML=w}const g=d.canvas.getBoundingClientRect(),f=d.chartArea,x=u.offsetHeight;let p=g.left+window.pageXOffset+h.caretX;const y=u.offsetWidth;p+y>window.innerWidth&&(p=window.innerWidth-y-10);const v=f.bottom,C=g.height-v,N=g.top+window.pageYOffset+v+(C-x)/2;u.style.left=`${p}px`,u.style.top=`${N}px`,u.style.opacity="1"}}},scales:{x:{display:!0,title:{display:!0,text:"연도",font:{size:14}},ticks:{callback(c,d){var h;return d%10===0?`${r+((h=t[d])==null?void 0:h.age)-1}년`:""},font:{size:11}}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"운세 점수",font:{size:14}},min:0,max:100,ticks:{stepSize:20,font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.1)"}}}}),[t,r]),l=j.useMemo(()=>({id:"currentAgeIndicator",afterDraw:c=>{var x;if(!e||e<=0)return;const d=c.ctx,h=c.chartArea,m=c.getDatasetMeta(0),u=t.findIndex(p=>p.age===e);if(u===-1)return;const g=(x=m.data[u])==null?void 0:x.x;if(!g)return;d.save(),d.strokeStyle="#ef4444",d.lineWidth=3,d.setLineDash([5,5]),d.beginPath(),d.moveTo(g,h.top),d.lineTo(g,h.bottom),d.stroke(),d.fillStyle="#ef4444",d.font="bold 12px sans-serif",d.textAlign="center";const f=n;d.fillText(`현재 ${f}년 (${e}세)`,g,h.top-40),d.restore()}}),[e,t,r]);return a.jsx("div",{className:"w-full",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"100년 인생운세 차트"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"전통 사주학의 대운(大運)과 세운(歲運)을 기반으로 한 100년간의 인생 운세를 시각화합니다."})]}),a.jsxs("div",{className:"mb-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"행운: 재물·명예·성공"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"의지: 추진력·실행력"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"환경: 대인관계·지원"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"변화: 기회·위기·변동"})]})]}),a.jsx("div",{className:"relative h-96 md:h-[500px] pt-8 pb-24",children:a.jsx(Xg,{type:"bar",data:i,options:o,plugins:[l]})}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"인생 주요 전환점"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"20-30세:"})," 기반 구축기"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"40-50세:"})," 성취 발전기"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"60-70세:"})," 완성 안정기"]})]})]})]})})}const ga={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},fa={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"};class p8{static generateUniversalLifeChart(e,s){const n=new Date(s.birthDate).getFullYear(),r=new Date().getFullYear(),i=r-n+1;console.log("🔮 UniversalSajuEngine v7.0 - 사주 기반 개인별 점수 계산 시작"),console.log("📅 생년:",n),console.log("🎯 사주:",e);const o=B_(e,n);console.log("📊 계산된 점수 결과:",{baseScore:o.baseScore,pattern:o.pattern,characteristics:o.keyCharacteristics});const l=this.generateChartFromScores(o.yearlyScores,n,e),c=this.analyzeLifePeriods(l,n),d={calculationDate:new Date().toISOString(),version:"7.0.0",accuracy:Math.round(100-o.pattern.volatility*20)};return{personalInfo:s,timeline:{startYear:n,endYear:n+95,currentYear:r,currentAge:i,lifeProgress:Math.round(i/95*100)},chartData:l,lifePeriods:c,metadata:d}}static generateChartFromScores(e,s,n){const r={geunbon:[],woon:[],haeng:[],hyeong:[],byeon:[]},i=this.calculateDimensionFactors(n);for(let o=0;o<=95;o++){const l=s+o,c=e[o]||50;r.geunbon.push({age:o,value:c,year:l,intensity:Math.abs(c-50)/50});const d=Math.max(0,Math.min(100,c+Math.sin(o*i.woon)*8));r.woon.push({age:o,value:d,year:l,intensity:Math.abs(d-50)/50});const h=Math.max(0,Math.min(100,c+Math.sin(o*i.haeng)*10));r.haeng.push({age:o,value:h,year:l,intensity:Math.abs(h-50)/50});const m=Math.max(0,Math.min(100,c+Math.cos(o*i.hyeong)*7));r.hyeong.push({age:o,value:m,year:l,intensity:Math.abs(m-50)/50});const u=Math.max(0,Math.min(100,c+Math.sin(o*i.byeon)*12));r.byeon.push({age:o,value:u,year:l,intensity:Math.abs(u-50)/50})}return r}static calculateWuxingBalance(e){const s={목:0,화:0,토:0,금:0,수:0};s[ga[e.year.gan]]++,s[ga[e.month.gan]]++,s[ga[e.day.gan]]++,s[ga[e.time.gan]]++,s[fa[e.year.ji]]++,s[fa[e.month.ji]]++,s[fa[e.day.ji]]++,s[fa[e.time.ji]]++;const n=Object.values(s),r=Math.max(...n),i=Math.min(...n);return 100-(r-i)*15}static calculateDimensionFactors(e){const s=this.getSajuHash(e);return{woon:.15+s%10*.01,haeng:.2+s%7*.01,hyeong:.08+s%5*.01,byeon:.3+s%8*.01}}static getSajuHash(e){const s={갑:1,을:2,병:3,정:4,무:5,기:6,경:7,신:8,임:9,계:10},n={자:1,축:2,인:3,묘:4,진:5,사:6,오:7,미:8,신:9,유:10,술:11,해:12};return s[e.year.gan]*1e3+n[e.year.ji]*100+s[e.month.gan]*50+n[e.month.ji]*25+s[e.day.gan]*10+n[e.day.ji]*5+s[e.time.gan]*2+n[e.time.ji]}static generatePreciseChart_DEPRECATED(e,s,n){const r={geunbon:[],woon:[],haeng:[],hyeong:[],byeon:[]};for(let i=0;i<=95;i++){const l=Math.max(0,Math.min(100,50));r.geunbon.push({age:i,value:l,year:2e3+i,intensity:Math.abs(l-50)/50});const c=Math.max(0,Math.min(100,50+Math.sin(i*.15)*8));r.woon.push({age:i,value:c,year:2e3+i,intensity:Math.abs(c-50)/50});const d=Math.max(0,Math.min(100,50+Math.sin(i*.2)*10));r.haeng.push({age:i,value:d,year:2e3+i,intensity:Math.abs(d-50)/50});const h=Math.max(0,Math.min(100,50+Math.sin(i*.08)*5));r.hyeong.push({age:i,value:h,year:2e3+i,intensity:Math.abs(h-50)/50});const m=Math.max(0,Math.min(100,50+Math.cos(i*.3)*12));r.byeon.push({age:i,value:m,year:2e3+i,intensity:Math.abs(m-50)/50})}return r}static analyzeLifePeriods(e,s){const n=[];return[{phase:"childhood",start:0,end:12,desc:"성장과 기초 형성기"},{phase:"youth",start:13,end:22,desc:"학습과 탐색기"},{phase:"early_adult",start:23,end:35,desc:"도전과 성취기"},{phase:"middle_adult",start:36,end:50,desc:"안정과 발전기"},{phase:"late_adult",start:51,end:65,desc:"성숙과 지혜기"},{phase:"senior",start:66,end:80,desc:"여유와 전수기"},{phase:"elder",start:81,end:95,desc:"완성과 회고기"}].forEach(({phase:i,start:o,end:l,desc:c})=>{const d=e.geunbon.slice(o,Math.min(l+1,e.geunbon.length));if(d.length===0)return;const h=d.reduce((y,v)=>y+v.value,0)/d.length,m=d.filter(y=>Math.abs(y.value-50)>20).map(y=>y.age).slice(0,3);let u="stable";const g=d.slice(0,Math.floor(d.length/2)),f=d.slice(Math.floor(d.length/2)),x=g.reduce((y,v)=>y+v.value,0)/g.length||0,p=f.reduce((y,v)=>y+v.value,0)/f.length||0;p-x>5?u="ascending":x-p>5?u="descending":Math.abs(h-50)>15&&(u="turbulent"),n.push({startAge:o,endAge:l,phase:i,description:c,majorEvents:this.getMajorEvents(i),overallTrend:u,keyYears:m})}),n}static getMajorEvents(e){return{childhood:["성장기 특성 형성","기초 교육 시작","가족관계 형성"],youth:["학업 집중기","진로 탐색","자아 정체성 확립"],early_adult:["사회 진출","경력 시작","인간관계 확대"],middle_adult:["경력 안정기","가정 형성","사회적 성취"],late_adult:["전문성 정점","후진 양성","인생 성찰"],senior:["은퇴 준비","건강 관리","지혜 전수"],elder:["여생 정리","유산 전달","회고와 성찰"]}[e]||[]}}function b8(t){const e=[];try{const s={year:{gan:t.year.gan,ji:t.year.ji,combined:t.year.gan+t.year.ji},month:{gan:t.month.gan,ji:t.month.ji,combined:t.month.gan+t.month.ji},day:{gan:t.day.gan,ji:t.day.ji,combined:t.day.gan+t.day.ji},time:{gan:t.time.gan,ji:t.time.ji,combined:t.time.gan+t.time.ji}};return xa(s.year)||e.push("년주 데이터 불완전"),xa(s.month)||e.push("월주 데이터 불완전"),xa(s.day)||e.push("일주 데이터 불완전"),xa(s.time)||e.push("시주 데이터 불완전"),{standardSaju:s,isValid:e.length===0,source:"backend",warnings:e}}catch(s){throw console.error("Backend 사주 변환 실패:",s),new Error(`Backend 사주 데이터 변환 실패: ${s}`)}}function y8(t){const e=[];try{const s={year:{gan:t.year.heavenly,ji:t.year.earthly,combined:t.year.combined},month:{gan:t.month.heavenly,ji:t.month.earthly,combined:t.month.combined},day:{gan:t.day.heavenly,ji:t.day.earthly,combined:t.day.combined},time:{gan:t.hour.heavenly,ji:t.hour.earthly,combined:t.hour.combined}};return s.year.combined!==s.year.gan+s.year.ji&&e.push("년주 조합 불일치"),s.month.combined!==s.month.gan+s.month.ji&&e.push("월주 조합 불일치"),s.day.combined!==s.day.gan+s.day.ji&&e.push("일주 조합 불일치"),s.time.combined!==s.time.gan+s.time.ji&&e.push("시주 조합 불일치"),{standardSaju:s,isValid:e.length===0,source:"frontend",warnings:e}}catch(s){throw console.error("Frontend 사주 변환 실패:",s),new Error(`Frontend 사주 데이터 변환 실패: ${s}`)}}function v8(t,e){const s={year:t.year.combined!==e.year.combined,month:t.month.combined!==e.month.combined,day:t.day.combined!==e.day.combined,time:t.time.combined!==e.time.combined},n=4,r=Object.values(s).filter(l=>!l).length,i=Math.round(r/n*100);let o;return i>=75?o="use_backend":i>=50?o="use_frontend":o="recalculate",{isMatch:i===100,differences:s,confidence:i,recommendation:o}}function j8(t,e){console.log("🔍 사주 데이터 해결 시작");let s=null,n=null;if(t)try{const r=b8(t);r.isValid?(s=r.standardSaju,console.log("✅ Backend 사주 변환 성공:",s)):console.warn("⚠️ Backend 사주 데이터 유효하지 않음:",r.warnings)}catch(r){console.error("❌ Backend 사주 변환 실패:",r)}if(e)try{const r=y8(e);r.isValid?(n=r.standardSaju,console.log("✅ Frontend 사주 변환 성공:",n)):console.warn("⚠️ Frontend 사주 데이터 유효하지 않음:",r.warnings)}catch(r){console.error("❌ Frontend 사주 변환 실패:",r)}if(s&&n){const r=v8(s,n);if(console.log(`🔍 사주 일치도: ${r.confidence}%`),console.log("차이점:",r.differences),r.isMatch)return console.log("✅ 사주 완전 일치 - Backend 데이터 사용"),{finalSaju:s,resolution:"사주 완전 일치 - Backend 데이터 사용",confidence:100};switch(r.recommendation){case"use_backend":return console.log("📤 Backend 데이터 우선 사용 (일치도 높음)"),{finalSaju:s,resolution:`Backend 우선 사용 (일치도: ${r.confidence}%)`,confidence:r.confidence};case"use_frontend":return console.log("🔄 Frontend 재계산 데이터 사용 (일치도 중간)"),{finalSaju:n,resolution:`Frontend 재계산 사용 (일치도: ${r.confidence}%)`,confidence:r.confidence};default:return console.log("⚠️ 사주 심각한 불일치 - Backend 데이터 강제 사용"),{finalSaju:s,resolution:`심각한 불일치로 Backend 강제 사용 (일치도: ${r.confidence}%)`,confidence:r.confidence}}}if(s)return console.log("📤 Backend 데이터만 사용 가능"),{finalSaju:s,resolution:"Backend 데이터만 사용",confidence:80};if(n)return console.log("🔄 Frontend 재계산 데이터만 사용 가능"),{finalSaju:n,resolution:"Frontend 재계산 데이터만 사용",confidence:60};throw new Error("사주 데이터가 없거나 모두 유효하지 않음")}function xa(t){const e=["갑","을","병","정","무","기","경","신","임","계"],s=["자","축","인","묘","진","사","오","미","신","유","술","해"];return e.includes(t.gan)&&s.includes(t.ji)&&t.combined===t.gan+t.ji}function w8(t){return{year:{gan:t.year.gan,ji:t.year.ji},month:{gan:t.month.gan,ji:t.month.ji},day:{gan:t.day.gan,ji:t.day.ji},time:{gan:t.time.gan,ji:t.time.ji}}}function k8(t,e){console.log(`🔍 ${e} 사주:`,{년주:t.year.combined,월주:t.month.combined,일주:t.day.combined,시주:t.time.combined})}const wo=["갑","을","병","정","무","기","경","신","임","계"],ko=["자","축","인","묘","진","사","오","미","신","유","술","해"],Rn={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},N8={인:"목",묘:"목",사:"화",오:"화",진:"토",술:"토",축:"토",미:"토",신:"금",유:"금",자:"수",해:"수"},No={목:"화",화:"토",토:"금",금:"수",수:"목"},So={목:"토",화:"금",토:"수",금:"목",수:"화"},x0={봄:{목:100,화:50,토:25,금:10,수:75},여름:{목:25,화:100,토:75,금:10,수:10},가을:{목:10,화:10,토:25,금:100,수:50},겨울:{목:50,화:10,토:10,금:75,수:100}},S8={인:"봄",묘:"봄",진:"봄",사:"여름",오:"여름",미:"여름",신:"가을",유:"가을",술:"가을",자:"겨울",축:"겨울",해:"겨울"},p0={갑:"기",기:"갑",을:"경",경:"을",병:"신",신:"병",정:"임",임:"정",무:"계",계:"무"},b0={자:"오",오:"자",축:"미",미:"축",인:"신",신:"인",묘:"유",유:"묘",진:"술",술:"진",사:"해",해:"사"},C8={자:"축",축:"자",인:"해",해:"인",묘:"술",술:"묘",진:"유",유:"진",사:"신",신:"사",오:"미",미:"오"};class Fx{static calculateAuthenticLifeChart(e,s){this.DEBUG&&(console.log("🔮 정통 사주학 계산 시작"),console.log("📅 사주 팔자:",e),console.log("🎂 출생년도:",s));const n=this.analyzeGyeokGuk(e),r=this.selectYongSin(n),i=this.calculateDaeUn(e,n),o=this.calculateYearlyScores(e,n,r,i,s),l=this.calculateStatistics(o,r);return this.DEBUG&&(console.log("✅ 격국 분석 완료:",n),console.log("✅ 용신 선정 완료:",r),console.log("📊 대운 수:",i.length),console.log("📈 평균 점수:",l.평균점수)),{개인정보:{사주:this.formatSaju(e),격국:n,용신:r},대운목록:i,연도별점수:o,통계:l}}static analyzeGyeokGuk(e){const s=e.day.gan,n=Rn[s],r=e.month.ji,i=S8[r],o={목:0,화:0,토:0,금:0,수:0};[e.year.gan,e.month.gan,e.day.gan,e.time.gan].forEach(u=>{o[Rn[u]]+=20}),[e.year.ji,e.month.ji,e.day.ji,e.time.ji].forEach(u=>{o[N8[u]]+=30});const c=x0[i][n];let d;const h=o[n]+c;h>=120?d="강":h<=60?d="약":d="중";let m="일반격";return d==="강"?m="신강격":d==="약"&&(m="신약격"),this.DEBUG&&(console.log("🏛️ 격국 분석:"),console.log(`   일간: ${s}(${n}) | 월령: ${r}(${i})`),console.log("   오행분포:",o),console.log(`   월령지원: ${c} | 일간강약: ${d}`),console.log(`   격국유형: ${m}`)),{일간:s,일간오행:n,일간강약:d,월령:r,계절:i,월령지원:c,오행분포:o,격국유형:m}}static selectYongSin(e){const s={목:0,화:0,토:0,금:0,수:0};if(e.일간강약==="약")s[e.일간오행]+=100,s[this.getGeneratingElement(e.일간오행)]+=90;else if(e.일간강약==="강")s[No[e.일간오행]]+=100,s[So[e.일간오행]]+=90,s[this.getConflictingElement(e.일간오행)]+=80;else{const d=Object.values(e.오행분포).reduce((h,m)=>h+m)/5;Object.entries(e.오행분포).forEach(([h,m])=>{m<d&&(s[h]+=d-m)})}const n=x0[e.계절];Object.entries(n).forEach(([d,h])=>{h<30&&(s[d]+=50)});const r=Object.entries(s).sort(([,d],[,h])=>h-d).map(([d])=>d),i=r.slice(0,2),o=r.slice(2,4),l=r.slice(4);let c="";return e.일간강약==="약"?c="신약으로 인한 부족 오행 보충 필요":e.일간강약==="강"?c="신강으로 인한 과잉 오행 소모 필요":c="중화로 인한 균형 오행 보완 필요",this.DEBUG&&(console.log("⭐ 용신 선정:"),console.log(`   용신: [${i.join(", ")}]`),console.log(`   기신: [${o.join(", ")}]`),console.log("   용신점수:",s),console.log(`   선정이유: ${c}`)),{용신:i,기신:o,희신:l,기신원인:c,용신점수:s}}static calculateDaeUn(e,s){const n=[],r=e.day.gan,i=e.year.gan,o=this.determineDaeunDirection(r,i),l=wo.indexOf(e.month.gan),c=ko.indexOf(e.month.ji);for(let d=0;d<10;d++){let h,m;o==="순행"?(h=(l+d+1)%10,m=(c+d+1)%12):(h=(l-d-1+10)%10,m=(c-d-1+12)%12);const u=wo[h],g=ko[m],f=Rn[u];let x=50;u===r?x+=15:p0[r]===u?x+=25:No[f]===s.일간오행?x+=20:So[f]===s.일간오행&&(x-=15),b0[e.day.ji]===g?x-=20:C8[e.day.ji]===g&&(x+=15);const p=this.analyzeDaeunFeatures(d,u,g,o);n.push({cycle:d,천간:u,지지:g,오행:f,순역행:o,점수:Math.max(10,Math.min(90,x)),특징:p})}return this.DEBUG&&(console.log("🌊 대운 계산:"),console.log(`   순역행: ${o}`),n.slice(0,3).forEach(d=>{console.log(`   ${d.cycle*10}-${d.cycle*10+9}세: ${d.천간}${d.지지}(${d.오행}) ${d.점수}점`)})),n}static calculateYearlyScores(e,s,n,r,i){const o=[],l=this.get격국별기본점수(s.격국유형,s.일간),c=this.get일간보정값(s.일간);for(let d=0;d<=95;d++){const h=i+d,m=Math.floor(d/10),u=r[m]||r[r.length-1],g=(h-4)%10,f=(h-4)%12,x=wo[g],p=ko[f],y=Rn[x];let v=l+c;x===e.day.gan?v+=10:p0[e.day.gan]===x&&(v+=15);let S=0;const C=this.get나이별용신가중치(d);n.용신.includes(y)?S+=35*C:n.희신.includes(y)?S+=18*C:n.기신.includes(y)&&(S-=30*C);let N=0;u.천간===x&&(N+=20),u.지지===p&&(N+=15),b0[u.지지]===p&&(N-=25);const M=u.점수,k=Math.max(10,Math.min(90,M*.4+(v+S)*.4+N*.2)),w={년도:h,나이:d,천간:x,지지:p,오행:y,점수:v,대운상호작용:N};o.push({나이:d,년도:h,총점:Math.round(k),대운점수:M,세운점수:v,용신효과:S,상세:w})}return o}static calculateStatistics(e,s){const n=e.map(m=>m.총점),r=Math.max(...n),i=Math.min(...n),o=n.reduce((m,u)=>m+u)/n.length,l=e.find(m=>m.총점===r),c=e.find(m=>m.총점===i),h=e.filter(m=>m.용신효과>20).length/e.length*100;return{최고점년도:{나이:l.나이,점수:r},최저점년도:{나이:c.나이,점수:i},평균점수:Math.round(o),용신부합도:Math.round(h)}}static get격국별기본점수(e,s){return{신강격:70,신약격:50,종격:60,특수격:65,기타:55}[e]||55}static get일간보정값(e){return{갑:5,을:3,병:7,정:4,무:6,기:2,경:8,신:3,임:4,계:5}[e]||0}static get나이별용신가중치(e){return e>=20&&e<=40?1.5:e>=40&&e<=60?1.3:e>=60?1.1:1}static getGeneratingElement(e){return Object.fromEntries(Object.entries(No).map(([n,r])=>[r,n]))[e]}static getConflictingElement(e){return Object.fromEntries(Object.entries(So).map(([n,r])=>[r,n]))[e]}static determineDaeunDirection(e,s){return["갑","병","무","경","임"].includes(s)?"순행":"역행"}static analyzeDaeunFeatures(e,s,n,r){const i=[];e===0?i.push("기초형성기"):e===1?i.push("성장발전기"):e===2?i.push("도전기회기"):e===3?i.push("안정확립기"):e===4?i.push("성숙전성기"):e===5?i.push("지혜전수기"):i.push("완성회고기");const o=Rn[s];return i.push(`${o}기운`),i.join(", ")}static formatSaju(e){return`${e.year.gan}${e.year.ji} ${e.month.gan}${e.month.ji} ${e.day.gan}${e.day.ji} ${e.time.gan}${e.time.ji}`}static createParkJunSooTestCase(){return{year:{gan:"신",ji:"해"},month:{gan:"기",ji:"해"},day:{gan:"병",ji:"오"},time:{gan:"경",ji:"인"}}}static createJeongBiJeTestCase(){return{year:{gan:"병",ji:"진"},month:{gan:"정",ji:"유"},day:{gan:"신",ji:"미"},time:{gan:"계",ji:"사"}}}static runTestCases(){var i,o,l,c;console.log("🧪 === 정통 사주학 테스트 케이스 실행 ==="),console.log(`
👤 박준수 (신해기해병오경인) 테스트:`);const e=this.createParkJunSooTestCase(),s=this.calculateAuthenticLifeChart(e,1971);console.log("용신:",s.개인정보.용신.용신),console.log("40세 점수:",(i=s.연도별점수[40])==null?void 0:i.총점),console.log("50세 점수:",(o=s.연도별점수[50])==null?void 0:o.총점),console.log(`
👤 정비제 (병진정유신미계사) 테스트:`);const n=this.createJeongBiJeTestCase(),r=this.calculateAuthenticLifeChart(n,1976);console.log("용신:",r.개인정보.용신.용신),console.log("40세 점수:",(l=r.연도별점수[40])==null?void 0:l.총점),console.log("50세 점수:",(c=r.연도별점수[50])==null?void 0:c.총점),console.log(`
✅ 테스트 완료`)}}B(Fx,"DEBUG",!0);async function _8(t){try{console.log("🎯 100년 인생운세 API 호출:",t);const e=M8(t);return console.log("✅ 100년 인생운세 데이터 생성 완료 (임시)"),e}catch(e){throw console.error("❌ 100년 인생운세 API 오류:",e),e}}function M8(t){return console.log("🔮 실제 사주 계산 시작:",t),console.log("⚙️ 정통 사주학 계산기 사용:",t.useAuthenticCalculator!==!1),t.useAuthenticCalculator!==!1?E8(t):T8(t)}function E8(t){console.log("🏛️ 정통 사주학 계산기로 운세 생성 중...");const e=Ys.calculateFourPillars({year:t.year,month:t.month,day:t.day,hour:t.hour,minute:0,isLunar:t.isLunar||!1,isLeapMonth:!1});console.log("🔵 기본 사주 계산 완료:",e);const s={year:{gan:e.year.heavenly,ji:e.year.earthly},month:{gan:e.month.heavenly,ji:e.month.earthly},day:{gan:e.day.heavenly,ji:e.day.earthly},time:{gan:e.hour.heavenly,ji:e.hour.earthly}};console.log("📋 정통 사주학 형식 변환:",s);const n=Fx.calculateAuthenticLifeChart(s,t.year);console.log("✨ 정통 사주학 계산 완료"),console.log("🎯 격국:",n.개인정보.격국.격국유형),console.log("⭐ 용신:",n.개인정보.용신.용신),console.log("📊 평균점수:",n.통계.평균점수);const r=n.연도별점수.map(c=>{var d,h,m;return{year:c.년도,age:c.나이,totalScore:c.총점,fortune:Math.min(100,Math.max(0,c.대운점수*.6+c.세운점수*.4+Math.max(0,c.용신효과*.3)+10)),willpower:Math.min(100,Math.max(0,c.대운점수*.8+20)),environment:Math.min(100,Math.max(0,c.세운점수*.8+20)),change:Math.min(100,Math.max(0,Math.abs(c.용신효과)*.6+30)),대운:{천간:((d=n.대운목록[Math.floor(c.나이/10)])==null?void 0:d.천간)||"갑",지지:((h=n.대운목록[Math.floor(c.나이/10)])==null?void 0:h.지지)||"자",오행:((m=n.대운목록[Math.floor(c.나이/10)])==null?void 0:m.오행)||"목",score:c.대운점수},세운:{천간:c.상세.천간,지지:c.상세.지지,오행:c.상세.오행,score:c.세운점수}}}),i=r.reduce((c,d)=>c.totalScore>d.totalScore?c:d),o=r.reduce((c,d)=>c.totalScore<d.totalScore?c:d),l=n.통계.평균점수;return console.log("📈 분석 결과:"),console.log(`   최고점: ${i.age}세 (${i.totalScore}점)`),console.log(`   최저점: ${o.age}세 (${o.totalScore}점)`),console.log(`   평균: ${l}점`),{success:!0,data:{lifetimeFortune:r,analysis:{keyYears:r.filter(c=>Math.abs(c.totalScore-l)>15).slice(0,5),bestYear:{year:i.year,age:i.age,score:i.totalScore},worstYear:{year:o.year,age:o.age,score:o.totalScore},averageScore:l}},timestamp:new Date().toISOString()}}function T8(t){var g,f,x,p,y;console.log("🔧 레거시 엔진으로 운세 생성 중..."),t.sajuData?console.log("🔴 전달받은 사주 데이터:",t.sajuData):console.log("⚠️ 사주 데이터가 전달되지 않음 - 재계산 필요");const e=Ys.calculateFourPillars({year:t.year,month:t.month,day:t.day,hour:t.hour,minute:0,isLunar:t.isLunar||!1,isLeapMonth:!1});console.log("🔵 재계산된 사주:",e);let s;try{s=j8(t.sajuData,e),console.log("✅ 사주 데이터 해결 완료:",s.resolution),console.log("🎯 신뢰도:",`${s.confidence}%`),k8(s.finalSaju,"최종 선택된")}catch(v){console.error("❌ 사주 데이터 해결 실패:",v),s={finalSaju:{year:{gan:e.year.heavenly,ji:e.year.earthly,combined:e.year.combined},month:{gan:e.month.heavenly,ji:e.month.earthly,combined:e.month.combined},day:{gan:e.day.heavenly,ji:e.day.earthly,combined:e.day.combined},time:{gan:e.hour.heavenly,ji:e.hour.earthly,combined:e.hour.combined}},resolution:"폴백: 재계산 사주 사용",confidence:50}}const n=w8(s.finalSaju);console.log("📌 최종 사용 사주 (엔진 형식):",n);const r=`${t.year}-${String(t.month).padStart(2,"0")}-${String(t.day).padStart(2,"0")}`,i=`${String(t.hour).padStart(2,"0")}:00`,o=`${e.year.combined} ${e.month.combined} ${e.day.combined} ${e.hour.combined}`,l={name:"사용자",birthDate:r,birthTime:i,sajuText:o,gender:t.gender||"male",lunarSolar:t.isLunar?"lunar":"solar"};console.log("👤 개인정보:",l),console.log("🔄 해결 방법:",s.resolution),console.log("📊 데이터 신뢰도:",`${s.confidence}%`);const c=p8.generateUniversalLifeChart(n,l),d=[];for(let v=0;v<=95;v++){const S=t.year+v,C=((g=c.chartData.geunbon[v])==null?void 0:g.value)||50,N=((f=c.chartData.woon[v])==null?void 0:f.value)||50,M=((x=c.chartData.haeng[v])==null?void 0:x.value)||50,k=((p=c.chartData.hyeong[v])==null?void 0:p.value)||50,w=((y=c.chartData.byeon[v])==null?void 0:y.value)||50,_=Math.round((C+N+M+k+w)/5);d.push({year:S,age:v,totalScore:_,fortune:Math.min(100,Math.max(0,N*.7+C*.3)),willpower:Math.min(100,Math.max(0,M*.8+N*.2)),environment:Math.min(100,Math.max(0,k*.7+C*.3)),change:Math.min(100,Math.max(0,w*.9+10)),대운:{천간:["갑","을","병","정","무","기","경","신","임","계"][Math.floor(v/10)%10],지지:["자","축","인","묘","진","사","오","미","신","유","술","해"][Math.floor(v/10)%12],오행:["목","화","토","금","수"][Math.floor(v/10)%5],score:Math.round((N+k)/2)},세운:{천간:["갑","을","병","정","무","기","경","신","임","계"][S%10],지지:["자","축","인","묘","진","사","오","미","신","유","술","해"][S%12],오행:["목","화","토","금","수"][S%5],score:Math.round(w)}})}const h=d.reduce((v,S)=>v.totalScore>S.totalScore?v:S),m=d.reduce((v,S)=>v.totalScore<S.totalScore?v:S),u=d.reduce((v,S)=>v+S.totalScore,0)/d.length;return{success:!0,data:{lifetimeFortune:d,analysis:{keyYears:d.filter(v=>Math.abs(v.totalScore-u)>20).slice(0,5),bestYear:{year:h.year,age:h.age,score:h.totalScore},worstYear:{year:m.year,age:m.age,score:m.totalScore},averageScore:Math.round(u)}},timestamp:new Date().toISOString()}}const nt={year:{gan:"신",ji:"해"},month:{gan:"기",ji:"해"},day:{gan:"병",ji:"오"},time:{gan:"경",ji:"인"}},rt={year:{gan:"병",ji:"진"},month:{gan:"정",ji:"유"},day:{gan:"신",ji:"미"},time:{gan:"계",ji:"사"}},Nl={갑:1,을:2,병:3,정:4,무:5,기:6,경:7,신:8,임:9,계:10},Sl={자:1,축:2,인:3,묘:4,진:5,사:6,오:7,미:8,신:9,유:10,술:11,해:12},Cl={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},_l={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"};function y0(t){const e=Nl,s=Sl,n=((e[t.year.gan]-1)*12+(s[t.year.ji]-1))%60,r=((e[t.month.gan]-1)*12+(s[t.month.ji]-1))%60,i=((e[t.day.gan]-1)*12+(s[t.day.ji]-1))%60,o=((e[t.time.gan]-1)*12+(s[t.time.ji]-1))%60,l={목:0,화:0,토:0,금:0,수:0};[t.year.gan,t.month.gan,t.day.gan,t.time.gan].forEach(g=>{l[Cl[g]]++}),[t.year.ji,t.month.ji,t.day.ji,t.time.ji].forEach(g=>{l[_l[g]]++});const c=Object.values(l),d=Math.max(...c),h=Math.min(...c),m=(d-h)*100;return n*1e3+r*500+i*800+o*300+m*20}function A8(){const t=y0(nt),e=y0(rt);console.log("🔍 개인별 고유값 테스트 결과:"),console.log(`박준수님 (신해 기해 병오 경인): ${t}`),console.log(`정비제님 (병진 정유 신미 계사): ${e}`),console.log(`차이값: ${Math.abs(t-e)}`),console.log(`차이율: ${(Math.abs(t-e)/Math.max(t,e)*100).toFixed(2)}%`),console.log(`
📊 구성요소별 분석:`);const s=((Nl[nt.year.gan]-1)*12+(Sl[nt.year.ji]-1))%60,n={목:0,화:0,토:0,금:0,수:0};[nt.year.gan,nt.month.gan,nt.day.gan,nt.time.gan].forEach(o=>{n[Cl[o]]++}),[nt.year.ji,nt.month.ji,nt.day.ji,nt.time.ji].forEach(o=>{n[_l[o]]++});const r=((Nl[rt.year.gan]-1)*12+(Sl[rt.year.ji]-1))%60,i={목:0,화:0,토:0,금:0,수:0};return[rt.year.gan,rt.month.gan,rt.day.gan,rt.time.gan].forEach(o=>{i[Cl[o]]++}),[rt.year.ji,rt.month.ji,rt.day.ji,rt.time.ji].forEach(o=>{i[_l[o]]++}),console.log(`박준수님 - 갑자패턴: ${s}, 오행분포: ${JSON.stringify(n)}`),console.log(`정비제님 - 갑자패턴: ${r}, 오행분포: ${JSON.stringify(i)}`),{parkUniqueValue:t,jungUniqueValue:e}}typeof window<"u"&&(window.testUniqueValues=A8,console.log("🚀 테스트 함수 등록 완료: window.testUniqueValues() 호출하여 테스트 실행"));function D8(){var E,D,O,L,T;const[t,e]=j.useState("jubon"),[s,n]=j.useState(""),[r,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState(!1),[h,m]=j.useState(!1),[u,g]=j.useState(null),[f,x]=j.useState(!1),[p,y]=j.useState(null),[v,S]=j.useState(us),C=A=>{const I=new Date(A),P=new Date;let H=P.getFullYear()-I.getFullYear();const z=P.getMonth()-I.getMonth();return(z<0||z===0&&P.getDate()<I.getDate())&&H--,H+1},N=v.find(A=>A.id===t);j.useEffect(()=>{N&&N.subcategories.length>0&&n(N.subcategories[0].id)},[t,N]),j.useEffect(()=>{r!=null&&r.id?k(r.id):(l(null),jo(null))},[r]),j.useEffect(()=>{(async()=>{if(!c&&!h){m(!0);try{await a8();const I=i8();S([...I]),d(!0)}catch(I){console.error("카테고리 로드 실패:",I)}finally{m(!1)}}})()},[c,h]);const M=async A=>{try{x(!0),y(null),g(null),console.log("🔄 인생차트 로드 시작:",A.name);const I=u8(A);console.log("📤 인생운세 요청 데이터:",I),console.log("  - 사주 데이터 포함 여부:",I.sajuData?"✅":"❌");const P=await _8(I);g(P),console.log("✅ 인생차트 로드 완료:",A.name)}catch(I){y(I.message||"인생차트 로드 실패"),console.error("❌ 인생차트 로드 실패:",I)}finally{x(!1)}},k=async A=>{try{console.log("[데이터 로드 시작] 고객 ID:",A);const I=await fj(A);console.log("[API 응답]",I.data);let P=I.data.saju_data;if(typeof P=="string")try{P=JSON.parse(P),console.log("[사주 데이터 파싱 완료]",P)}catch(H){console.error("[사주 데이터 파싱 실패]",H),P=null}console.log("[사주 데이터 수신]",P),l(P),jo(P),console.log("[전역 사주 데이터 설정 완료]",P)}catch(I){console.error("[에러] 고객 사주 데이터 로딩 실패:",I),jo(null)}},w=j.useMemo(()=>{if(!N||!s)return null;const A=N.subcategories.find(I=>I.id===s);return A?{categoryId:t,subcategoryId:s,title:`${N.name} - ${A.name}`,items:A.items,chartData:A.items.map(I=>I.baseScore),maxValue:100}:null},[t,s,N]),_=r?`${r.birth_date} ${r.birth_time}`:"고객을 선택해주세요";return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"🔮 통합 사주 레이더 분석"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"주문차트 기반 9개 대항목 상세 분석 시스템"}),a.jsx("div",{className:"mt-2 text-sm text-purple-600 dark:text-purple-400",children:"기존 6대/17대/7대 성향 차트가 통합된 새로운 분석 시스템"})]}),a.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[a.jsx(kl,{onSelect:i,selectedCustomer:r}),r&&o&&a.jsx("div",{className:"mt-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:a.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:[a.jsx("div",{className:"font-semibold mb-1",children:"사주 팔자:"}),a.jsx("div",{children:o.fullSaju}),a.jsxs("div",{className:"mt-2 grid grid-cols-5 gap-2 text-xs",children:[a.jsxs("div",{children:["목: ",(E=o.ohHaengBalance)==null?void 0:E.목,"%"]}),a.jsxs("div",{children:["화: ",(D=o.ohHaengBalance)==null?void 0:D.화,"%"]}),a.jsxs("div",{children:["토: ",(O=o.ohHaengBalance)==null?void 0:O.토,"%"]}),a.jsxs("div",{children:["금: ",(L=o.ohHaengBalance)==null?void 0:L.금,"%"]}),a.jsxs("div",{children:["수: ",(T=o.ohHaengBalance)==null?void 0:T.수,"%"]})]})]})})]}),r&&a.jsx("div",{className:"mb-6",children:a.jsx(f8,{customer:r,lifetimeFortune:u,loading:f,error:p,onLoadChart:()=>M(r),onScrollToChart:()=>{var A;return(A=document.getElementById("hundred-year-chart"))==null?void 0:A.scrollIntoView({behavior:"smooth"})}})}),u&&r&&a.jsx("div",{id:"hundred-year-chart",className:"mb-8",children:a.jsx(x8,{data:u.data.lifetimeFortune,currentAge:C(r.birth_date),birthYear:new Date(r.birth_date).getFullYear()})}),h&&a.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full"}),a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"🔮 주능/주흉 카테고리 데이터를 백엔드에서 가져오는 중..."})]})}),a.jsx(o8,{categories:v,selectedCategory:t,onCategoryChange:e}),N&&a.jsx("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"text-4xl",children:N.icon}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N.name}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:N.description}),a.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 mt-1",children:[N.subcategories.length,"개 중항목 • 총 ",N.subcategories.reduce((A,I)=>A+I.items.length,0),"개 세부항목"]})]})]})}),N&&a.jsx(l8,{subcategories:N.subcategories,selectedSubcategory:s,onSubcategoryChange:n}),w&&a.jsxs("div",{className:"mb-8",children:[console.log("[차트 렌더링] customerSajuData:",o),a.jsx(d8,{data:w,birthDate:_,sajuData:o})]}),a.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm",children:[a.jsx("p",{children:"✨ 이 분석은 전통 사주학과 현대 통계학을 결합한 해석입니다."}),a.jsx("p",{className:"mt-1",children:"💡 시간대별 운세 변화는 참고용이며, 개인의 노력과 환경에 따라 달라질 수 있습니다."})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:"9"}),a.jsx("div",{className:"text-sm",children:"대항목"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:v.reduce((A,I)=>A+I.subcategories.length,0)}),a.jsx("div",{className:"text-sm",children:"중항목"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:v.reduce((A,I)=>A+I.subcategories.reduce((P,H)=>P+H.items.length,0),0)}),a.jsx("div",{className:"text-sm",children:"세부항목"})]})]})]})})}dt.register(...$S);const Vc=j.createContext(void 0);function P8({children:t,defaultTheme:e="light",storageKey:s="sajuapp-theme"}){const[n,r]=j.useState(()=>{if(typeof window<"u"){const o=localStorage.getItem(s);if(o==="light"||o==="dark")return o;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return e});j.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),o.classList.add(n),localStorage.setItem(s,n)},[n,s]),j.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),l=c=>{localStorage.getItem(s)||r(c.matches?"dark":"light")};return o.addEventListener("change",l),()=>o.removeEventListener("change",l)},[s]);const i={theme:n,setTheme:o=>{r(o)},toggleTheme:()=>{r(o=>o==="light"?"dark":"light")}};return a.jsx(Vc.Provider,{value:i,children:t})}const Bx=()=>{const t=j.useContext(Vc);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},R8=({data:t})=>{const e=j.useRef(null),s=j.useRef(null),n=j.useContext(Vc),r=(n==null?void 0:n.theme)==="dark";return j.useEffect(()=>{if(!e.current||!t)return;s.current&&s.current.destroy();const i=e.current.getContext("2d");if(!i)return;const o=t.categories.map(m=>m.name),l=t.categories.map(m=>m.score),c=t.categories.map(()=>100),d=r?"rgba(229, 231, 235, 1)":"rgba(31, 41, 55, 1)",h=r?"rgba(107, 114, 128, 0.3)":"rgba(0, 0, 0, 0.1)";return s.current=new dt(i,{type:"radar",data:{labels:o,datasets:[{label:`${t.person1Name} ♥ ${t.person2Name}`,data:l,backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgba(147, 51, 234, 1)",borderWidth:2,pointBackgroundColor:"rgba(147, 51, 234, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(147, 51, 234, 1)",pointRadius:4,pointHoverRadius:6},{label:"이상적 궁합",data:c,backgroundColor:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.3)",borderWidth:1,borderDash:[5,5],pointRadius:0,pointHoverRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{font:{size:12},padding:20,usePointStyle:!0,color:d}},tooltip:{callbacks:{label(m){const u=m.dataset.label||"",g=m.parsed.r||m.parsed.y;return`${u}: ${Math.round(g)}점`}}}},scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,font:{size:10},color:d,callback(m){return`${m}점`}},pointLabels:{font:{size:13,weight:"bold"},color:d,callback(m,u){const g=l[u];return`${m}
(${Math.round(g)}점)`}},grid:{color:h}}}}}),()=>{s.current&&s.current.destroy()}},[t,r,n]),a.jsx("div",{className:"w-full h-[400px] p-4",children:a.jsx("canvas",{ref:e})})},L8=({relationshipAnalysis:t,practicalAnalysis:e,depthAnalysis:s,specialAnalysis:n})=>{const[r,i]=j.useState("overview");if(!t||!e||!s||!n)return a.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"궁합 분석 결과가 없습니다. 먼저 두 사람을 선택하고 분석하기를 클릭해주세요."});const o=u=>u>=85?"text-green-600 dark:text-green-400":u>=70?"text-blue-600 dark:text-blue-400":u>=50?"text-yellow-600 dark:text-yellow-400":u>=30?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400",l=u=>{const g={매우좋음:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",좋음:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",보통:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",주의:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",위험:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g[u]}`,children:u})},c=[{key:"firstImpression",label:"첫인상 궁합",icon:"👋"},{key:"communication",label:"대화소통 궁합",icon:"💬"},{key:"valueSystem",label:"가치관 궁합",icon:"💎"},{key:"lifePattern",label:"생활패턴 궁합",icon:"🌅"},{key:"conflictResolution",label:"갈등해결 궁합",icon:"🤝"},{key:"emotional",label:"정서적 궁합",icon:"❤️"},{key:"trust",label:"신뢰도 궁합",icon:"🛡️"}],d=[{key:"economic",label:"경제관념 궁합",icon:"💰"},{key:"career",label:"직업운 궁합",icon:"💼"},{key:"residence",label:"주거환경 궁합",icon:"🏠"},{key:"children",label:"자녀운 궁합",icon:"👶"},{key:"inLaw",label:"시댁/처가 궁합",icon:"👨‍👩‍👧‍👦"}],h=[{key:"sexual",label:"성적 궁합",icon:"🔥"},{key:"spiritual",label:"정신적 궁합",icon:"🧘"},{key:"hobby",label:"취미 궁합",icon:"🎯"},{key:"retirement",label:"노후 궁합",icon:"🌅"}],m=[{key:"noblePerson",label:"귀인운 궁합",icon:"⭐"},{key:"peachBlossom",label:"도화운 궁합",icon:"🌸"},{key:"emptiness",label:"공망 궁합",icon:"🌀"},{key:"sinsal",label:"신살 궁합",icon:"🔮"}];return a.jsxs("div",{className:"mt-8",children:[a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>i("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="overview"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"종합 분석"}),a.jsx("button",{onClick:()=>i("relationship"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="relationship"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"관계성 분석 (7개 항목)"}),a.jsx("button",{onClick:()=>i("practical"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="practical"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"현실적 분석 (5개 항목)"}),a.jsx("button",{onClick:()=>i("depth"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="depth"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"심층 분석 (4개 항목)"}),a.jsx("button",{onClick:()=>i("special"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${r==="special"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"특수 분석 (4개 항목)"})]})}),a.jsxs("div",{className:"mt-6",children:[r==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"관계성 종합 분석"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-4xl font-bold ${o(t.averageScore)}`,children:[t.averageScore,"점"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:t.summary})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"💕"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"현실적 종합 분석"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-4xl font-bold ${o(e.averageScore)}`,children:[e.averageScore,"점"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:e.summary})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"💍"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"심층 종합 분석"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-4xl font-bold ${o(s.averageScore)}`,children:[s.averageScore,"점"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:s.summary})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"🌊"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"특수 종합 분석"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-4xl font-bold ${o(n.averageScore)}`,children:[n.averageScore,"점"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:n.summary})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"✨"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300",children:"관계성 분석"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:c.map(u=>{const g=t[u.key];return!g||typeof g.score!="number"?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xl",children:u.icon}),l(g.level)]}),a.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:u.label}),a.jsxs("div",{className:`text-xl font-bold mt-1 ${o(g.score)}`,children:[g.score,"점"]})]},u.key)})}),a.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"현실적 분석"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:d.map(u=>{const g=e[u.key];return!g||typeof g.score!="number"?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xl",children:u.icon}),l(g.level)]}),a.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:u.label}),a.jsxs("div",{className:`text-xl font-bold mt-1 ${o(g.score)}`,children:[g.score,"점"]})]},u.key)})}),a.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"심층 분석"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:h.map(u=>{const g=s[u.key];return!g||typeof g.score!="number"?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xl",children:u.icon}),l(g.level)]}),a.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:u.label}),a.jsxs("div",{className:`text-xl font-bold mt-1 ${o(g.score)}`,children:[g.score,"점"]})]},u.key)})}),a.jsx("h3",{className:"text-md font-semibold text-gray-700 dark:text-gray-300 mt-6",children:"특수 분석"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:m.map(u=>{const g=n[u.key];return!g||typeof g.score!="number"?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xl",children:u.icon}),l(g.level)]}),a.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:u.label}),a.jsxs("div",{className:`text-xl font-bold mt-1 ${o(g.score)}`,children:[g.score,"점"]})]},u.key)})})]})]}),r==="relationship"&&a.jsx("div",{className:"space-y-6",children:c.map(u=>{const g=t[u.key];return!g||typeof g.score!="number"?null:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:u.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u.label})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[l(g.level),a.jsxs("span",{className:`text-2xl font-bold ${o(g.score)}`,children:[g.score,"점"]})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.description}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.score>=85?"bg-green-500":g.score>=70?"bg-blue-500":g.score>=50?"bg-yellow-500":g.score>=30?"bg-orange-500":"bg-red-500"}`,style:{width:`${g.score}%`}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.factors.positive.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.positive.map((f,x)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",f]},x))})]}),g.factors.negative.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.negative.map((f,x)=>a.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",f]},x))})]})]})]})},u.key)})}),r==="practical"&&a.jsx("div",{className:"space-y-6",children:d.map(u=>{const g=e[u.key];return!g||typeof g.score!="number"?null:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:u.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u.label})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[l(g.level),a.jsxs("span",{className:`text-2xl font-bold ${o(g.score)}`,children:[g.score,"점"]})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.description}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.score>=85?"bg-green-500":g.score>=70?"bg-blue-500":g.score>=50?"bg-yellow-500":g.score>=30?"bg-orange-500":"bg-red-500"}`,style:{width:`${g.score}%`}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.factors.positive.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.positive.map((f,x)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",f]},x))})]}),g.factors.negative.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.negative.map((f,x)=>a.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",f]},x))})]})]})]})},u.key)})}),r==="depth"&&a.jsx("div",{className:"space-y-6",children:h.map(u=>{const g=s[u.key];return!g||typeof g.score!="number"?null:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:u.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u.label})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[l(g.level),a.jsxs("span",{className:`text-2xl font-bold ${o(g.score)}`,children:[g.score,"점"]})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.description}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.score>=85?"bg-green-500":g.score>=70?"bg-blue-500":g.score>=50?"bg-yellow-500":g.score>=30?"bg-orange-500":"bg-red-500"}`,style:{width:`${g.score}%`}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.factors.positive.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.positive.map((f,x)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",f]},x))})]}),g.factors.negative.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.negative.map((f,x)=>a.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",f]},x))})]})]})]})},u.key)})}),r==="special"&&a.jsx("div",{className:"space-y-6",children:m.map(u=>{const g=n[u.key];return!g||typeof g.score!="number"?null:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-3xl",children:u.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u.label})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[l(g.level),a.jsxs("span",{className:`text-2xl font-bold ${o(g.score)}`,children:[g.score,"점"]})]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g.description}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${g.score>=85?"bg-green-500":g.score>=70?"bg-blue-500":g.score>=50?"bg-yellow-500":g.score>=30?"bg-orange-500":"bg-red-500"}`,style:{width:`${g.score}%`}})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[g.factors.positive.length>0&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ 긍정 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.positive.map((f,x)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300",children:["• ",f]},x))})]}),g.factors.negative.length>0&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"⚠️ 주의 요인"}),a.jsx("ul",{className:"space-y-1",children:g.factors.negative.map((f,x)=>a.jsxs("li",{className:"text-sm text-red-700 dark:text-red-300",children:["• ",f]},x))})]})]})]})},u.key)})})]})]})},pa=({sajuString:t,size:e="medium",className:s=""})=>{if(!t||t==="계산 실패"||t==="계산 중...")return a.jsx("div",{className:`text-gray-500 dark:text-gray-400 ${s}`,children:a.jsx("span",{className:"text-sm",children:"사주 계산 중..."})});const n=t.split(" ");if(n.length!==4)return a.jsx("div",{className:`text-red-500 dark:text-red-400 ${s}`,children:a.jsx("span",{className:"text-sm",children:"사주 형식 오류"})});const[r,i,o,l]=n,d=(()=>{switch(e){case"small":return{container:"text-sm",pillar:"px-2 py-1",char:"text-base",label:"text-xs"};case"large":return{container:"text-lg",pillar:"px-4 py-3",char:"text-2xl",label:"text-sm"};default:return{container:"text-base",pillar:"px-3 py-2",char:"text-xl",label:"text-xs"}}})();return a.jsxs("div",{className:`${d.container} ${s}`,children:[a.jsxs("div",{className:"grid grid-cols-4 gap-2 max-w-md mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`bg-gradient-to-b from-red-50 to-red-100 dark:from-red-900/30 dark:to-red-800/30
                          border border-red-200 dark:border-red-700 rounded-lg ${d.pillar}`,children:a.jsx("div",{className:`font-bold text-red-800 dark:text-red-200 ${d.char}`,children:r})}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${d.label}`,children:"년주"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`bg-gradient-to-b from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30
                          border border-blue-200 dark:border-blue-700 rounded-lg ${d.pillar}`,children:a.jsx("div",{className:`font-bold text-blue-800 dark:text-blue-200 ${d.char}`,children:i})}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${d.label}`,children:"월주"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`bg-gradient-to-b from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30
                          border border-green-200 dark:border-green-700 rounded-lg ${d.pillar}`,children:a.jsx("div",{className:`font-bold text-green-800 dark:text-green-200 ${d.char}`,children:o})}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${d.label}`,children:"일주"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`bg-gradient-to-b from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30
                          border border-purple-200 dark:border-purple-700 rounded-lg ${d.pillar}`,children:a.jsx("div",{className:`font-bold text-purple-800 dark:text-purple-200 ${d.char}`,children:l})}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 mt-1 ${d.label}`,children:"시주"})]})]}),a.jsx("div",{className:"text-center mt-3",children:a.jsxs("div",{className:"inline-flex items-center space-x-1 px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full",children:[a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"사주:"}),a.jsx("span",{className:"font-mono font-semibold text-gray-800 dark:text-gray-200",children:t})]})})]})},Ml={상생:{목:"화",화:"토",토:"금",금:"수",수:"목"},상극:{목:"토",화:"금",토:"수",금:"목",수:"화"}},$x={인오술:"화",신자진:"수",해묘미:"목",사유축:"금"},v0={자축:"토",인해:"목",묘술:"화",진유:"금",사신:"수",오미:"화토"},Vx=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]],j0={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"};function tr(t,e){const s=j0[t],n=j0[e],r={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"},i=r[t],o=r[e],l=i===o;if(s===n)return l?"비견":"겁재";const d={목:{화:["식신","상관"],토:["편재","정재"],금:["편관","정관"],수:["편인","정인"]},화:{토:["식신","상관"],금:["편재","정재"],수:["편관","정관"],목:["편인","정인"]},토:{금:["식신","상관"],수:["편재","정재"],목:["편관","정관"],화:["편인","정인"]},금:{수:["식신","상관"],목:["편재","정재"],화:["편관","정관"],토:["편인","정인"]},수:{목:["식신","상관"],화:["편재","정재"],토:["편관","정관"],금:["편인","정인"]}}[s][n];return d?l?d[0]:d[1]:"알수없음"}function O8(t,e){let s=50;for(const r of t)for(const i of e){(v0[r+i]||v0[i+r])&&(s+=15);for(const o of Vx)(o[0]===r&&o[1]===i||o[1]===r&&o[0]===i)&&(s-=10)}const n=[...t,...e].join("");for(const r of Object.keys($x)){const i=r.split("").filter(o=>n.includes(o)).length;i>=2&&(s+=i*5)}return Math.max(0,Math.min(100,s))}function I8(t,e){const s=t.ohHaengBalance||{},n=e.ohHaengBalance||{};let r=60;const i=["목","화","토","금","수"];for(const o of i){const l=Ml.상생[o];s[o]>25&&n[l]>25?r+=15:s[o]>15&&n[l]>15&&(r+=8)}for(const o of i){const l=Ml.상극[o];s[o]>30&&n[l]>30&&(r-=10)}for(const o of i)(s[o]<10&&n[o]>30||n[o]<10&&s[o]>30)&&(r+=5);return Math.max(0,Math.min(100,r))}function F8(t,e){const s=t.day.gan,n=e.day.gan;let r=70;const i=tr(s,n),o=["정재","정관","정인","식신"],l=["비견","편재","편관","편인"],c=["겁재","상관"];o.includes(i)?r+=20:l.includes(i)?r+=5:c.includes(i)&&(r-=10);const d=tr(s,e.year.gan),h=tr(s,e.month.gan);return o.includes(d)&&(r+=10),o.includes(h)&&(r+=10),Math.max(0,Math.min(100,r))}function B8(t,e){const s=I8(t,e),n=F8(t,e);return Math.round(s*.6+n*.4)}function $8(t,e){const s=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],n=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],r=O8(s,n),i=t.day.gan,o=e.day.gan,l={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"};let c=60;return l[i]!==l[o]&&(c+=20),Math.round(r*.5+c*.5)}function V8(t,e){const s=t.day.gan,n=e.day.gan;let r=65;const i=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],o=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let l=0,c=0;for(const d of i){const h=tr(s,d);(h==="정재"||h==="편재")&&l++}for(const d of o){const h=tr(n,d);(h==="정재"||h==="편재")&&c++}return l>0&&l<=2&&(r+=10),c>0&&c<=2&&(r+=10),l>2&&c>2&&(r-=15),Math.max(0,Math.min(100,r))}function H8(t,e){const s=t.ohHaengBalance||{},n=e.ohHaengBalance||{};let r=70;const i=["목","화","토","금","수"];for(const o of i){const l=(s[o]+n[o])/2;l>=15&&l<=25&&(r+=4)}for(const o of i){const l=Ml.상생[o];s[o]>15&&n[l]>15&&(r+=3)}return Math.max(0,Math.min(100,r))}function z8(t,e){const s=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],n=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];let r=60;const i=[...s,...n];for(const o of Object.keys($x)){const c=o.split("").filter(d=>i.includes(d)).length;c===3?r+=20:c===2&&(r+=10)}for(const o of Vx)s.includes(o[0])&&n.includes(o[1])&&(r-=8);return Math.max(0,Math.min(100,r))}function U8(t,e){let s="";t>=90?s="천생연분입니다! 서로를 위한 완벽한 파트너입니다. ":t>=80?s="매우 좋은 궁합입니다. 서로를 이해하고 존중하면 행복한 관계가 될 것입니다. ":t>=70?s="좋은 궁합입니다. 서로의 차이를 인정하고 노력한다면 좋은 관계를 유지할 수 있습니다. ":t>=60?s="보통의 궁합입니다. 서로를 이해하려는 노력이 필요합니다. ":s="노력이 필요한 궁합입니다. 상대방을 이해하고 배려하는 자세가 중요합니다. ";const n=[...e].sort((o,l)=>l.score-o.score),r=n[0],i=n[n.length-1];return r.score>=80&&(s+=`특히 ${r.name} 면에서 뛰어난 조화를 보입니다. `),i.score<60&&(s+=`${i.name} 부분은 서로 더 노력이 필요한 영역입니다.`),s}const ei={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"},Es={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},Nr={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"},Hc=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]],Hx=[["인","사","신"],["축","술","미"],["자","묘"]],W8=[["자","유"],["오","묘"],["신","사"],["인","해"],["축","진"],["미","술"]];function Rs(t){return t>=85?"매우좋음":t>=70?"좋음":t>=50?"보통":t>=30?"주의":"위험"}function Y8(t,e){let s=60;const n=[],r=[],i=t.year.gan,o=e.year.gan,l=ei[i],c=ei[o];l!==c?(s+=15,n.push("음양이 조화로워 첫만남부터 끌림이 있습니다")):(s-=5,r.push("같은 음양으로 첫인상이 평범할 수 있습니다"));const d=Es[i],h=Es[o],m={목:"화",화:"토",토:"금",금:"수",수:"목"};(m[d]===h||m[h]===d)&&(s+=20,n.push("오행이 상생하여 자연스러운 호감을 느낍니다"));const u=t.year.ji,g=e.year.ji;for(const f of Hc)if(f[0]===u&&f[1]===g||f[1]===u&&f[0]===g){s-=15,r.push("년지가 충이 되어 첫만남이 어색할 수 있습니다");break}return u===g&&(s+=10,n.push("같은 띠로 공감대가 형성됩니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Rs(s),description:`년주 기반 첫인상 궁합은 ${s}점입니다. ${s>=70?"좋은 첫인상을 주고받습니다.":"천천히 친해지는 스타일입니다."}`,factors:{positive:n,negative:r}}}function G8(t,e){let s=65;const n=[],r=[],i=Es[t.month.gan],o=Es[e.month.gan],l=["목","화"],c=["금","수"];l.includes(i)&&l.includes(o)?(s+=15,n.push("둘 다 활발한 소통 스타일로 대화가 즐겁습니다")):c.includes(i)&&c.includes(o)?(s+=10,n.push("차분하고 깊이 있는 대화를 나눕니다")):(l.includes(i)&&c.includes(o)||c.includes(i)&&l.includes(o))&&(s+=5,n.push("서로 다른 소통 스타일이 균형을 이룹니다"));const d=t.month.ji,h=e.month.ji;for(const u of Hx)if(u.includes(d)&&u.includes(h)){s-=10,r.push("소통 과정에서 오해가 생기기 쉽습니다");break}const m={인:"봄",묘:"봄",진:"봄",사:"여름",오:"여름",미:"여름",신:"가을",유:"가을",술:"가을",해:"겨울",자:"겨울",축:"겨울"};return m[d]===m[h]&&(s+=10,n.push("같은 계절 출생으로 정서적 리듬이 맞습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Rs(s),description:`월주 기반 소통 궁합은 ${s}점입니다. ${s>=70?"원활한 의사소통이 가능합니다.":"소통 방식의 차이를 이해할 필요가 있습니다."}`,factors:{positive:n,negative:r}}}function K8(t,e){let s=70;const n=[],r=[],i=t.day.gan,o=e.day.gan;ei[i]!==ei[o]&&(s+=20,n.push("음양이 조화되어 서로를 보완합니다"));const l=Es[i],c=Es[o];l===c&&(s+=10,n.push("같은 오행으로 기본 성향이 비슷합니다"));const d={목:"화",화:"토",토:"금",금:"수",수:"목"};d[l]===c?(s+=15,n.push(`${l}이 ${c}를 생하여 베푸는 관계입니다`)):d[c]===l&&(s+=15,n.push(`${c}가 ${l}을 생하여 받는 관계입니다`));const h={목:"토",토:"수",수:"화",화:"금",금:"목"};return(h[l]===c||h[c]===l)&&(s-=15,r.push("오행이 상극하여 가치관 충돌이 있을 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Rs(s),description:`일간 기반 가치관 궁합은 ${s}점입니다. ${s>=70?"핵심 가치관이 잘 맞습니다.":"서로의 가치관을 존중하는 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function q8(t,e){let s=60;const n=[],r=[],i=t.time.ji,o=e.time.ji,l=["인","묘","진","사"],c=["오","미","신","유"],d=["술","해","자","축"],h=x=>l.includes(x)?"morning":c.includes(x)?"afternoon":d.includes(x)?"evening":"unknown",m=h(i),u=h(o);m===u?(s+=20,n.push("생활 리듬이 비슷하여 일상이 조화롭습니다")):(s-=10,r.push("활동 시간대가 달라 조율이 필요합니다"));for(const x of Hc)if(x[0]===i&&x[1]===o||x[1]===i&&x[0]===o){s-=15,r.push("생활 패턴이 정반대여서 갈등이 생길 수 있습니다");break}const g=Nr[i],f=Nr[o];return g===f&&(s+=10,n.push("비슷한 에너지 패턴을 가지고 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Rs(s),description:`시주 기반 생활패턴 궁합은 ${s}점입니다. ${s>=70?"일상생활이 조화롭게 흘러갑니다.":"생활 패턴 조율이 필요합니다."}`,factors:{positive:n,negative:r}}}function J8(t,e){let s=80;const n=[],r=[],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji];let l=0,c=0,d=0;for(const u of i)for(const g of o)for(const f of Hc)(f[0]===u&&f[1]===g||f[1]===u&&f[0]===g)&&l++;l>0&&(s-=l*10,r.push(`${l}개의 충이 있어 갈등이 자주 발생할 수 있습니다`));for(const u of Hx){let g=!1,f=!1;for(const x of i)u.includes(x)&&(g=!0);for(const x of o)u.includes(x)&&(f=!0);g&&f&&c++}c>0&&(s-=c*8,r.push("형이 있어 서로 상처를 줄 수 있습니다"));for(const u of i)for(const g of o)for(const f of W8)(f[0]===u&&f[1]===g||f[1]===u&&f[0]===g)&&d++;d>0&&(s-=d*5,r.push("파가 있어 관계가 불안정할 수 있습니다")),l===0&&c===0&&(s+=10,n.push("충이나 형이 없어 평화로운 관계입니다"));const h=i.filter(u=>Nr[u]==="토").length,m=o.filter(u=>Nr[u]==="토").length;return(h>0||m>0)&&(s+=5,n.push("토 오행이 있어 갈등 중재 능력이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Rs(s),description:`갈등해결 궁합은 ${s}점입니다. ${s>=70?"갈등을 잘 해결할 수 있습니다.":"갈등 발생 시 신중한 대처가 필요합니다."}`,factors:{positive:n,negative:r}}}function X8(t,e){let s=65;const n=[],r=[],i=Ws(t,"수"),o=Ws(e,"수");i>0&&i<=2&&(s+=10,n.push("적절한 수 기운으로 감정 표현이 자연스럽습니다")),o>0&&o<=2&&(s+=10,n.push("상대방도 감정 교류가 원활합니다")),(i>3||o>3)&&(s-=10,r.push("수가 과다하여 감정 기복이 심할 수 있습니다")),i===0&&o===0&&(s-=15,r.push("수가 부족하여 정서적 교감이 어려울 수 있습니다"));const l=Ws(t,"화"),c=Ws(e,"화");if(Math.abs(l-i)<=1&&Math.abs(c-o)<=1&&(s+=15,n.push("화수가 균형을 이루어 열정과 감성이 조화롭습니다")),t.ohHaengBalance&&e.ohHaengBalance){const d=t.ohHaengBalance.수||0,h=e.ohHaengBalance.수||0;d>=15&&d<=25&&h>=15&&h<=25&&(s+=10,n.push("수 오행이 균형잡혀 정서적 안정감이 있습니다"))}return s=Math.max(0,Math.min(100,s)),{score:s,level:Rs(s),description:`정서적 궁합은 ${s}점입니다. ${s>=70?"깊은 정서적 교감이 가능합니다.":"감정 표현과 이해에 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function Q8(t,e){let s=70;const n=[],r=[],i=Ws(t,"토"),o=Ws(e,"토");i>=1&&i<=3&&(s+=10,n.push("토 기운이 있어 믿음직합니다")),o>=1&&o<=3&&(s+=10,n.push("상대방도 신뢰할 만한 사람입니다")),i>0&&o>0&&(s+=15,n.push("서로 토 기운이 있어 안정적인 신뢰관계를 형성합니다")),(i>4||o>4)&&(s-=10,r.push("토가 과다하여 고집이 세고 변화를 거부할 수 있습니다")),(i===0||o===0)&&(s-=15,r.push("토가 부족하여 신뢰 형성에 시간이 필요합니다"));const l=t.day.ji,c=e.day.ji,d=["축","진","미","술"];return(d.includes(l)||d.includes(c))&&(s+=5,n.push("일지에 토가 있어 기본적으로 신뢰감을 줍니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Rs(s),description:`신뢰도 궁합은 ${s}점입니다. ${s>=70?"서로를 깊이 신뢰할 수 있습니다.":"신뢰 구축에 시간과 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function Ws(t,e){let s=0;const n=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],r=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(const i of n)Es[i]===e&&s++;for(const i of r)Nr[i]===e&&s++;return s}function Z8(t,e){const s=Y8(t,e),n=G8(t,e),r=K8(t,e),i=q8(t,e),o=J8(t,e),l=X8(t,e),c=Q8(t,e),d=[s.score,n.score,r.score,i.score,o.score,l.score,c.score],h=Math.round(d.reduce((u,g)=>u+g,0)/d.length);let m="";return h>=80?m="매우 훌륭한 관계성을 가지고 있습니다. 서로를 깊이 이해하고 존중할 수 있는 관계입니다.":h>=70?m="좋은 관계를 유지할 수 있습니다. 약간의 노력으로 더욱 발전할 가능성이 있습니다.":h>=60?m="평균적인 관계입니다. 서로를 이해하려는 노력이 필요합니다.":h>=50?m="관계 유지에 상당한 노력이 필요합니다. 차이점을 인정하고 존중하는 것이 중요합니다.":m="관계에 어려움이 예상됩니다. 충분한 이해와 인내가 필요합니다.",{firstImpression:s,communication:n,valueSystem:r,lifePattern:i,conflictResolution:o,emotional:l,trust:c,averageScore:h,summary:m}}function et(t,e){var d;const s={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},n={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"},r=s[t],i=s[e],o=n[t]===n[e];if(r===i)return o?"비견":"겁재";const c=(d={목:{화:["식신","상관"],토:["편재","정재"],금:["편관","정관"],수:["편인","정인"]},화:{토:["식신","상관"],금:["편재","정재"],수:["편관","정관"],목:["편인","정인"]},토:{금:["식신","상관"],수:["편재","정재"],목:["편관","정관"],화:["편인","정인"]},금:{수:["식신","상관"],목:["편재","정재"],화:["편관","정관"],토:["편인","정인"]},수:{목:["식신","상관"],화:["편재","정재"],토:["편관","정관"],금:["편인","정인"]}}[r])==null?void 0:d[i];return c?o?c[0]:c[1]:"알수없음"}function Vr(t){return t>=85?"매우좋음":t>=70?"좋음":t>=50?"보통":t>=30?"주의":"위험"}function eM(t,e){let s=65;const n=[],r=[],i=t.day.gan,o=e.day.gan,l=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],c=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let d=0,h=0,m=0;for(const y of l){const v=et(i,y);v==="정재"?(d++,h++):v==="편재"&&(d++,m++)}let u=0,g=0,f=0;for(const y of c){const v=et(o,y);v==="정재"?(u++,g++):v==="편재"&&(u++,f++)}d>=1&&d<=2&&(s+=10,n.push("적절한 재성으로 건실한 경제관념을 가지고 있습니다")),u>=1&&u<=2&&(s+=10,n.push("상대방도 안정적인 경제관을 가지고 있습니다")),h>m&&g>f?(s+=15,n.push("둘 다 안정적이고 보수적인 재테크 성향입니다")):m>h&&f>g?(s+=5,n.push("둘 다 적극적인 투자 성향으로 의견이 맞을 수 있습니다")):(s+=10,n.push("서로 다른 재테크 스타일로 균형을 이룹니다")),(d>3||u>3)&&(s-=15,r.push("재성이 과다하여 돈 문제로 갈등이 생길 수 있습니다")),(d===0||u===0)&&(s-=10,r.push("재성이 부족하여 경제적 계획성이 떨어질 수 있습니다"));const x=Ut(t,"금"),p=Ut(e,"금");return x>0&&p>0&&(s+=5,n.push("금 기운이 있어 절약 정신이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`경제관념 궁합은 ${s}점입니다. ${s>=70?"경제적 가치관이 잘 맞습니다.":"금전 관리 방식에 대한 조율이 필요합니다."}`,factors:{positive:n,negative:r}}}function tM(t,e){let s=60;const n=[],r=[],i=t.day.gan,o=e.day.gan,l=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],c=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let d=0,h=0,m=0;for(const y of l){const v=et(i,y);v==="정관"?(d++,h++):v==="편관"&&(d++,m++)}let u=0,g=0,f=0;for(const y of c){const v=et(o,y);v==="정관"?(u++,g++):v==="편관"&&(u++,f++)}d>=1&&d<=2&&(s+=15,n.push("안정적인 직업운을 가지고 있습니다")),u>=1&&u<=2&&(s+=15,n.push("상대방도 커리어가 안정적입니다")),h>0&&g>0?(s+=10,n.push("둘 다 안정적인 직장 생활을 선호합니다")):m>0&&f>0&&(s+=10,n.push("둘 다 도전적인 사업가 기질이 있습니다")),(d>3||u>3)&&(s-=10,r.push("관성이 과다하여 업무 스트레스가 관계에 영향을 줄 수 있습니다"));let x=0,p=0;for(const y of l){const v=et(i,y);(v==="식신"||v==="상관")&&x++}for(const y of c){const v=et(o,y);(v==="식신"||v==="상관")&&p++}return x>0&&p>0&&(s+=10,n.push("둘 다 창의적인 능력이 있어 서로를 이해합니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`직업운 궁합은 ${s}점입니다. ${s>=70?"서로의 커리어를 지지할 수 있습니다.":"직업적 목표에 대한 이해가 필요합니다."}`,factors:{positive:n,negative:r}}}function sM(t,e){let s=65;const n=[],r=[],i=t.day.gan,o=e.day.gan,l=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],c=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let d=0,h=0;for(const x of l){const p=et(i,x);(p==="정인"||p==="편인")&&d++}for(const x of c){const p=et(o,x);(p==="정인"||p==="편인")&&h++}d>=1&&d<=2&&(s+=15,n.push("안정적인 주거 환경을 선호합니다")),h>=1&&h<=2&&(s+=15,n.push("상대방도 편안한 집을 중요시합니다"));const m=Ut(t,"토"),u=Ut(e,"토");(m>=2||u>=2)&&(s+=10,n.push("토 기운이 강해 부동산 운이 좋습니다")),(d>3||h>3)&&(s-=10,r.push("인성이 과다하여 독립적인 주거 생활이 어려울 수 있습니다"));const g=Ut(t,"목"),f=Ut(e,"목");return g>0&&f>0?(s+=5,n.push("목 기운이 있어 자연친화적인 주거를 선호합니다")):(g>2&&f===0||g===0&&f>2)&&(s-=5,r.push("주거 환경 취향이 크게 다를 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`주거환경 궁합은 ${s}점입니다. ${s>=70?"편안한 보금자리를 만들 수 있습니다.":"주거 스타일 조율이 필요합니다."}`,factors:{positive:n,negative:r}}}function nM(t,e){let s=70;const n=[],r=[],i=t.day.gan,o=e.day.gan,l=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],c=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let d=0,h=0,m=0;for(const v of l){const S=et(i,v);S==="식신"?(d++,h++):S==="상관"&&(d++,m++)}let u=0,g=0,f=0;for(const v of c){const S=et(o,v);S==="식신"?(u++,g++):S==="상관"&&(u++,f++)}h>0&&g>0?(s+=20,n.push("둘 다 식신이 있어 자녀 복이 있습니다")):(h>0||g>0)&&(s+=10,n.push("자녀에 대한 사랑이 깊습니다")),(m>1||f>1)&&(s-=5,r.push("자녀 교육 방식에서 의견 충돌이 있을 수 있습니다")),d===0&&u===0&&(s-=15,r.push("식상이 부족하여 자녀 계획에 어려움이 있을 수 있습니다"));const x=Ut(t,"수"),p=Ut(e,"수");x>0&&p>0&&(s+=10,n.push("수 기운이 있어 자녀 생산력이 좋습니다"));const y=["자","오","묘","유"];return(y.includes(t.time.ji)||y.includes(e.time.ji))&&(s+=5,n.push("도화가 있어 예쁜 자녀를 얻을 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`자녀운 궁합은 ${s}점입니다. ${s>=70?"자녀와 행복한 가정을 이룰 수 있습니다.":"자녀 계획에 대한 충분한 대화가 필요합니다."}`,factors:{positive:n,negative:r}}}function rM(t,e){let s=70;const n=[],r=[],i=t.year.ji,o=e.year.ji,l=t.month.ji,c=e.month.ji,d=[["자","오"],["축","미"],["인","신"],["묘","유"],["진","술"],["사","해"]];let h=!1;for(const v of d)if(v[0]===i&&v[1]===o||v[1]===i&&v[0]===o){s-=15,r.push("년지가 충이 되어 양가 부모님과의 관계에 주의가 필요합니다"),h=!0;break}h||(s+=10,n.push("년지가 충돌하지 않아 양가 화합이 좋습니다"));for(const v of d)if(v[0]===l&&v[1]===c||v[1]===l&&v[0]===c){s-=10,r.push("월지가 충이 되어 형제간 관계에 신경써야 합니다");break}const m=w0(t.year.gan),u=w0(e.year.gan),g={목:"화",화:"토",토:"금",금:"수",수:"목"};(g[m]===u||g[u]===m)&&(s+=15,n.push("년간이 상생하여 양가 어른들의 축복을 받습니다"));const f=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],x=[e.year.gan,e.month.gan,e.day.gan,e.time.gan];let p=0,y=0;for(const v of f){const S=et(t.day.gan,v);(S==="정인"||S==="편인")&&p++}for(const v of x){const S=et(e.day.gan,v);(S==="정인"||S==="편인")&&y++}return p>0&&y>0&&(s+=10,n.push("인성이 있어 어른을 공경하는 마음이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:Vr(s),description:`시댁/처가 궁합은 ${s}점입니다. ${s>=70?"양가 가족과 원만한 관계를 유지할 수 있습니다.":"가족 관계에서 서로 배려가 필요합니다."}`,factors:{positive:n,negative:r}}}function Ut(t,e){const s={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},n={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"};let r=0;const i=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],o=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(const l of i)s[l]===e&&r++;for(const l of o)n[l]===e&&r++;return r}function w0(t){return{갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"}[t]||""}function aM(t,e){const s=eM(t,e),n=tM(t,e),r=sM(t,e),i=nM(t,e),o=rM(t,e),l=[s.score,n.score,r.score,i.score,o.score],c=Math.round(l.reduce((h,m)=>h+m,0)/l.length);let d="";return c>=80?d="현실적인 면에서 매우 잘 맞습니다. 안정적인 가정을 이룰 수 있습니다.":c>=70?d="실생활에서 큰 문제없이 조화를 이룰 수 있습니다.":c>=60?d="일부 현실적 문제에서 조율이 필요하지만 극복 가능합니다.":c>=50?d="현실적 가치관의 차이가 있어 충분한 대화가 필요합니다.":d="현실적 문제로 어려움이 예상됩니다. 신중한 접근이 필요합니다.",{economic:s,career:n,residence:r,children:i,inLaw:o,averageScore:c,summary:d}}function ss(t){return t>=85?"매우좋음":t>=70?"좋음":t>=50?"보통":t>=30?"주의":"위험"}const ft=["자","오","묘","유"],k0=["인","신","사","해"],ti=["진","술","축","미"];function iM(t,e){let s=60;const n=[],r=[],i=$e(t,"화"),o=$e(e,"화"),l=$e(t,"수"),c=$e(e,"수");i>=1&&i<=2&&l>=1&&l<=2&&(s+=15,n.push("화수가 균형을 이루어 건강한 성생활이 가능합니다")),o>=1&&o<=2&&c>=1&&c<=2&&(s+=15,n.push("상대방도 성적 에너지가 균형잡혀 있습니다"));const d=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],h=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],m=d.filter(f=>ft.includes(f)).length,u=h.filter(f=>ft.includes(f)).length;m===1&&u===1?(s+=20,n.push("적절한 도화가 있어 서로에게 매력을 느낍니다")):m>2||u>2?(s-=15,r.push("도화가 과다하여 이성 문제가 생길 수 있습니다")):m===0&&u===0&&(s-=10,r.push("도화가 없어 성적 매력이 부족할 수 있습니다")),ft.includes(t.day.ji)&&ft.includes(e.day.ji)&&(s+=10,n.push("일지 도화로 강한 성적 끌림이 있습니다")),(i>3||o>3)&&(s-=10,r.push("화가 과다하여 성적으로 충동적일 수 있습니다"));const g={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"};return g[t.day.gan]!==g[e.day.gan]&&(s+=10,n.push("음양이 조화되어 성적 궁합이 좋습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ss(s),description:`성적 궁합은 ${s}점입니다. ${s>=70?"서로에게 성적 매력을 느낍니다.":"성적 조화를 위한 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function oM(t,e){let s=70;const n=[],r=[],i=tt(t,["정인","편인"]),o=tt(e,["정인","편인"]),l=tt(t,["식신"]),c=tt(e,["식신"]);i>0&&o>0&&(s+=15,n.push("둘 다 정신적 가치를 중요시합니다")),l>0&&c>0&&(s+=15,n.push("종교나 철학에 대한 관심이 비슷합니다"));const d=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],h=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],m=d.filter(x=>ti.includes(x)).length,u=h.filter(x=>ti.includes(x)).length;m>0&&u>0?(s+=10,n.push("화개살이 있어 예술적/영적 교감이 가능합니다")):(m>1&&u===0||m===0&&u>1)&&(s-=10,r.push("종교관의 차이가 클 수 있습니다"));const g=$e(t,"목"),f=$e(e,"목");return g>0&&f>0&&(s+=5,n.push("목 기운이 있어 자비롭고 포용적입니다")),(i>3||o>3)&&(s-=15,r.push("인성이 과다하여 종교적 극단주의 우려가 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ss(s),description:`종교/신앙 궁합은 ${s}점입니다. ${s>=70?"정신적 가치관이 잘 맞습니다.":"종교나 신념에 대한 상호 이해가 필요합니다."}`,factors:{positive:n,negative:r}}}function lM(t,e){let s=65;const n=[],r=[],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],l=i.filter(x=>k0.includes(x)).length,c=o.filter(x=>k0.includes(x)).length;l>0&&c>0?(s+=20,n.push("둘 다 역마가 있어 여행을 즐깁니다")):l>1&&c===0||l===0&&c>1?(s-=10,r.push("여행 취향의 차이로 갈등이 있을 수 있습니다")):l===0&&c===0&&(s+=5,n.push("둘 다 안정적인 취미를 선호합니다"));const d=i.filter(x=>ti.includes(x)).length,h=o.filter(x=>ti.includes(x)).length;d>0&&h>0&&(s+=15,n.push("예술적 취미를 공유할 수 있습니다"));const m=tt(t,["식신","상관"]),u=tt(e,["식신","상관"]);m>0&&u>0&&(s+=10,n.push("창의적인 취미 활동을 함께 즐길 수 있습니다"));const g=$e(t,"목")+$e(t,"화"),f=$e(e,"목")+$e(e,"화");return g>=3&&f>=3?(s+=10,n.push("활동적인 취미를 함께 즐길 수 있습니다")):(g>=4&&f<=1||g<=1&&f>=4)&&(s-=10,r.push("활동량의 차이로 취미 공유가 어려울 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ss(s),description:`여행/취미 궁합은 ${s}점입니다. ${s>=70?"취미와 여가를 함께 즐길 수 있습니다.":"서로의 취미를 존중하는 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function cM(t,e){let s=70;const n=[],r=[],i=$e(t,"금"),o=$e(e,"금");i>=1&&i<=3&&(s+=10,n.push("금 기운이 있어 노후 준비가 철저합니다")),o>=1&&o<=3&&(s+=10,n.push("상대방도 노후를 체계적으로 준비합니다"));const l=$e(t,"토"),c=$e(e,"토");l>0&&c>0&&(s+=15,n.push("토 기운이 있어 안정적인 노후생활이 가능합니다"));const d=tt(t,["정재","편재"]),h=tt(e,["정재","편재"]);d>0&&h>0?(s+=10,n.push("재성이 있어 경제적으로 안정된 노후가 기대됩니다")):d===0&&h===0&&(s-=15,r.push("재성이 부족하여 노후 자금 준비에 신경써야 합니다"));const m=tt(t,["정인","편인"]),u=tt(e,["정인","편인"]);return(m>0||u>0)&&(s+=5,n.push("인성이 있어 정신적으로 풍요로운 노후가 가능합니다")),(i>4||o>4)&&(s-=10,r.push("금이 과다하여 노후에 고집이 세질 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ss(s),description:`노후생활 궁합은 ${s}점입니다. ${s>=70?"행복하고 안정된 노후를 보낼 수 있습니다.":"노후 계획을 함께 준비해야 합니다."}`,factors:{positive:n,negative:r}}}function dM(t,e){var S,C;let s=60;const n=[],r=[],i={갑:["축","미"],을:["자","신"],병:["해","유"],정:["해","유"],무:["축","미"],기:["자","신"],경:["축","미"],신:["인","오"],임:["묘","사"],계:["묘","사"]},o=t.day.gan,l=e.day.gan,c=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],d=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],h=i[o]||[],m=i[l]||[],u=c.some(N=>h.includes(N)),g=d.some(N=>m.includes(N));u&&g?(s+=30,n.push("둘 다 천을귀인이 있어 귀인의 도움을 받습니다")):u||g?(s+=15,n.push("천을귀인이 있어 어려울 때 도움을 받을 수 있습니다")):(s-=10,r.push("천을귀인이 없어 스스로 헤쳐나가야 합니다"));const f=d.some(N=>h.includes(N)),x=c.some(N=>m.includes(N));(f||x)&&(s+=20,n.push("서로가 서로의 귀인이 되어줄 수 있습니다"));const p={인:["병","정"],묘:["갑","을"],사:["병","정"],오:["임","계"],신:["경","신"],유:["경","신"],해:["임","계"],자:["임","계"]},y=t.month.ji,v=e.month.ji;return((S=p[y])!=null&&S.includes(o)||(C=p[v])!=null&&C.includes(l))&&(s+=10,n.push("월덕귀인이 있어 인덕이 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ss(s),description:`천을귀인 궁합은 ${s}점입니다. ${s>=70?"귀인의 도움으로 순조로운 삶이 예상됩니다.":"스스로 노력하여 길을 개척해야 합니다."}`,factors:{positive:n,negative:r}}}function hM(t,e){let s=70;const n=[],r=[],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],l=i.filter(m=>ft.includes(m)).length,c=o.filter(m=>ft.includes(m)).length;l===1&&c===1?(s+=20,n.push("적절한 도화로 서로에게만 매력을 느낍니다")):l===0&&c===0?(s+=10,n.push("도화가 없어 이성 문제가 적습니다")):l>=3||c>=3?(s-=30,r.push("도화가 과다하여 이성 문제로 갈등이 예상됩니다")):(l>=2&&c===0||l===0&&c>=2)&&(s-=20,r.push("도화 불균형으로 이성 문제가 생길 수 있습니다")),(ft.includes(t.day.ji)||ft.includes(e.day.ji))&&(ft.includes(t.day.ji)&&ft.includes(e.day.ji)?(s+=10,n.push("일지 도화로 서로에게 강한 매력을 느낍니다")):(s-=10,r.push("일지 도화 불균형으로 주의가 필요합니다")));const d=tt(t,["정관","편관"]),h=tt(e,["정관","편관"]);return(d>=3&&t.day.gan in{을:1,정:1,기:1,신:1,계:1}||h>=3&&e.day.gan in{을:1,정:1,기:1,신:1,계:1})&&(s-=15,r.push("관살혼잡으로 이성관계가 복잡할 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ss(s),description:`도화살 영향은 ${s}점입니다. ${s>=70?"이성 문제 없이 안정적인 관계입니다.":"이성 관계에 특별한 주의가 필요합니다."}`,factors:{positive:n,negative:r}}}function uM(t,e){let s=75;const n=[],r=[],i={자:["술","해"],축:["술","해"],인:["자","축"],묘:["자","축"],진:["인","묘"],사:["인","묘"],오:["진","사"],미:["진","사"],신:["오","미"],유:["오","미"],술:["신","유"],해:["신","유"]},o=t.year.ji,l=e.year.ji,c=i[o]||[],d=i[l]||[],h=[t.month.ji,t.day.ji,t.time.ji],m=[e.month.ji,e.day.ji,e.time.ji],u=h.some(f=>c.includes(f)),g=m.some(f=>d.includes(f));return!u&&!g?(s+=15,n.push("공망이 없어 현실적이고 실속있는 관계입니다")):u&&g?(s-=20,r.push("둘 다 공망이 있어 허무함을 느낄 수 있습니다")):(u||g)&&(s-=10,r.push("공망으로 인한 공허함을 이해해주어야 합니다")),(c.includes(t.day.ji)||d.includes(e.day.ji))&&(s-=15,r.push("일지 공망으로 관계의 실속이 부족할 수 있습니다")),(c.includes(t.month.ji)||d.includes(e.month.ji))&&(s-=10,r.push("월지 공망으로 가족 관계에 어려움이 있을 수 있습니다")),u&&m.some(f=>c.includes(f))&&(s+=10,n.push("상대방이 공망을 채워줄 수 있습니다")),g&&h.some(f=>d.includes(f))&&(s+=10,n.push("서로의 공망을 채워주는 관계입니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ss(s),description:`공망 분석은 ${s}점입니다. ${s>=70?"실속있고 충실한 관계입니다.":"공허함을 채우기 위한 노력이 필요합니다."}`,factors:{positive:n,negative:r}}}function mM(t,e){let s=70;const n=[],r=[],i=[t.year.ji,t.month.ji,t.day.ji,t.time.ji],o=[e.year.ji,e.month.ji,e.day.ji,e.time.ji],l=["인","신"],c=i.filter(M=>l.includes(M)).length,d=o.filter(M=>l.includes(M)).length;(c>=2||d>=2)&&(s-=10,r.push("백호살이 있어 충동적인 행동에 주의해야 합니다"));const h=["사","해"],m=i.filter(M=>h.includes(M)).length,u=o.filter(M=>h.includes(M)).length;(m>=2||u>=2)&&(s-=5,r.push("현침살이 있어 예민한 반응에 주의가 필요합니다"));const g={갑:"사",을:"오",병:"신",정:"유",무:"신",기:"유",경:"해",신:"자",임:"인",계:"묘"},f=t.day.gan,x=e.day.gan;(i.includes(g[f])||o.includes(g[x]))&&(s+=10,n.push("문창귀인이 있어 학문과 예술에 재능이 있습니다"));const p={갑:"묘",을:"진",병:"오",정:"미",무:"오",기:"미",경:"유",신:"술",임:"자",계:"축"};i.includes(p[f])&&o.includes(p[x])&&(s+=15,n.push("둘 다 장성살이 있어 서로를 발전시킵니다"));const y=["경진","임진","무술","경술"],v=t.day.gan+t.day.ji,S=e.day.gan+e.day.ji;(y.includes(v)||y.includes(S))&&(s-=10,r.push("괴강살이 있어 극단적인 성격에 주의가 필요합니다"));const C=["진","사"],N=["술","해"];return(i.some(M=>C.includes(M))&&o.some(M=>N.includes(M))||i.some(M=>N.includes(M))&&o.some(M=>C.includes(M)))&&(s-=15,r.push("천라지망이 형성되어 서로를 속박할 수 있습니다")),s=Math.max(0,Math.min(100,s)),{score:s,level:ss(s),description:`신살 종합 점수는 ${s}점입니다. ${s>=70?"길신이 많아 순조로운 관계입니다.":"흉신의 영향을 주의해야 합니다."}`,factors:{positive:n,negative:r}}}function $e(t,e){const s={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},n={자:"수",축:"토",인:"목",묘:"목",진:"토",사:"화",오:"화",미:"토",신:"금",유:"금",술:"토",해:"수"};let r=0;const i=[t.year.gan,t.month.gan,t.day.gan,t.time.gan],o=[t.year.ji,t.month.ji,t.day.ji,t.time.ji];for(const l of i)s[l]===e&&r++;for(const l of o)n[l]===e&&r++;return r}function tt(t,e){const s=t.day.gan,n=[t.year.gan,t.month.gan,t.day.gan,t.time.gan];let r=0;for(const i of n){const o=gM(s,i);e.includes(o)&&r++}return r}function gM(t,e){var d;const s={갑:"목",을:"목",병:"화",정:"화",무:"토",기:"토",경:"금",신:"금",임:"수",계:"수"},n={갑:"양",을:"음",병:"양",정:"음",무:"양",기:"음",경:"양",신:"음",임:"양",계:"음"},r=s[t],i=s[e],o=n[t]===n[e];if(r===i)return o?"비견":"겁재";const c=(d={목:{화:["식신","상관"],토:["편재","정재"],금:["편관","정관"],수:["편인","정인"]},화:{토:["식신","상관"],금:["편재","정재"],수:["편관","정관"],목:["편인","정인"]},토:{금:["식신","상관"],수:["편재","정재"],목:["편관","정관"],화:["편인","정인"]},금:{수:["식신","상관"],목:["편재","정재"],화:["편관","정관"],토:["편인","정인"]},수:{목:["식신","상관"],화:["편재","정재"],토:["편관","정관"],금:["편인","정인"]}}[r])==null?void 0:d[i];return c?o?c[0]:c[1]:"알수없음"}function fM(t,e){const s=iM(t,e),n=oM(t,e),r=lM(t,e),i=cM(t,e),o=[s.score,n.score,r.score,i.score],l=Math.round(o.reduce((d,h)=>d+h,0)/o.length);let c="";return l>=80?c="심층적인 면에서도 매우 잘 어울립니다.":l>=70?c="깊이 있는 관계를 만들어갈 수 있습니다.":l>=60?c="일부 깊은 주제에서 이해가 필요합니다.":c="심층적 이해를 위한 노력이 많이 필요합니다.",{sexual:s,spiritual:n,hobby:r,retirement:i,averageScore:l,summary:c}}function xM(t,e){const s=dM(t,e),n=hM(t,e),r=uM(t,e),i=mM(t,e),o=[s.score,n.score,r.score,i.score],l=Math.round(o.reduce((d,h)=>d+h,0)/o.length);let c="";return l>=80?c="특수한 인연으로 맺어진 좋은 관계입니다.":l>=70?c="길신이 많아 순조로운 관계가 예상됩니다.":l>=60?c="일부 신살의 영향에 주의가 필요합니다.":c="신살의 영향을 극복하기 위한 노력이 필요합니다.",{noblePerson:s,peachBlossom:n,emptiness:r,sinsal:i,averageScore:l,summary:c}}dt.register(zt,Gt,Qe,Ni,Ps,Ds);const pM=({data:t})=>{const{theme:e}=Bx(),s=e==="dark",n=[],r=[],i=[{key:"firstImpression",label:"첫인상"},{key:"communication",label:"대화소통"},{key:"valueSystem",label:"가치관"},{key:"lifePattern",label:"생활패턴"},{key:"conflictResolution",label:"갈등해결"},{key:"emotional",label:"정서적"},{key:"trust",label:"신뢰도"}],o=[{key:"economic",label:"경제관념"},{key:"career",label:"직업운"},{key:"residence",label:"주거환경"},{key:"children",label:"자녀운"},{key:"inLaw",label:"시댁/처가"}],l=[{key:"sexual",label:"성적"},{key:"spiritual",label:"정신적"},{key:"hobby",label:"취미"},{key:"retirement",label:"노후"}],c=[{key:"noblePerson",label:"귀인운"},{key:"peachBlossom",label:"도화운"},{key:"emptiness",label:"공망"},{key:"sinsal",label:"신살"}];t.relationship&&i.forEach(m=>{const u=t.relationship[m.key];u&&typeof u.score=="number"&&(n.push(m.label),r.push(u.score))}),t.practical&&o.forEach(m=>{const u=t.practical[m.key];u&&typeof u.score=="number"&&(n.push(m.label),r.push(u.score))}),t.depth&&l.forEach(m=>{const u=t.depth[m.key];u&&typeof u.score=="number"&&(n.push(m.label),r.push(u.score))}),t.special&&c.forEach(m=>{const u=t.special[m.key];u&&typeof u.score=="number"&&(n.push(m.label),r.push(u.score))});const d={labels:n,datasets:[{label:"종합 궁합 점수",data:r,backgroundColor:"rgba(147, 51, 234, 0.2)",borderColor:"rgba(147, 51, 234, 1)",borderWidth:2,pointBackgroundColor:"rgba(147, 51, 234, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(147, 51, 234, 1)",pointRadius:4,pointHoverRadius:6}]},h={responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,max:100,min:0,ticks:{stepSize:20,color:s?"#9CA3AF":"#4B5563",backdropColor:"transparent",font:{size:10}},grid:{color:s?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.2)",circular:!0},angleLines:{color:s?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.2)"},pointLabels:{color:s?"#D1D5DB":"#374151",font:{size:11,weight:500},padding:15}}},plugins:{legend:{display:!0,position:"top",labels:{color:s?"#D1D5DB":"#374151",font:{size:12},padding:20}},tooltip:{enabled:!0,backgroundColor:s?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",titleColor:s?"#F3F4F6":"#111827",bodyColor:s?"#D1D5DB":"#4B5563",borderColor:s?"#4B5563":"#E5E7EB",borderWidth:1,padding:12,displayColors:!1,callbacks:{label:m=>{const u=m.parsed.r;let g="매우좋음";return u<30?g="위험":u<50?g="주의":u<70?g="보통":u<85&&(g="좋음"),`${m.label}: ${u}점 (${g})`}}}},interaction:{intersect:!1,mode:"point"}};return a.jsx("div",{className:"w-full h-[600px] p-4",children:a.jsx(oc,{data:d,options:h})})},bM=()=>{const[t,e]=j.useState(null),[s,n]=j.useState(null),[r,i]=j.useState(null),[o,l]=j.useState(!1),[c,d]=j.useState(null),[h,m]=j.useState(null),u=async p=>{if(!p.birth_date||!p.birth_time)return null;try{console.log(`정확한 사주 계산 시작: ${p.name}`);const y={birth_date:p.birth_date,birth_time:p.birth_time,lunar_solar:p.lunar_solar},v=await Pr.getComprehensiveInterpretation(y);if(!v||!v.basic)throw new Error("사주 계산 API 호출 실패");const{basic:S}=v,C=S.sajuString||"계산 실패",[N,M,k,w]=C.split(" ");return{year:{gan:N[0],ji:N[1]},month:{gan:M[0],ji:M[1]},day:{gan:k[0],ji:k[1]},time:{gan:w[0],ji:w[1]},fullSaju:C,ohHaengBalance:S.ohHaengBalance||{wood:20,fire:20,earth:20,metal:20,water:20},dayMaster:S.dayMaster,interpretation:S.summary}}catch(y){console.error("정확한 사주 계산 오류:",y);try{const[v,S,C]=p.birth_date.split("-").map(Number),[N,M]=p.birth_time.split(":").map(Number),k={year:v,month:S,day:C,hour:N,minute:M,lunarSolar:p.lunar_solar,gender:p.gender},w=Ys.calculateFourPillars(k),_=Ys.calculateOhHaengBalance(w);return{year:w.year,month:w.month,day:w.day,time:w.time,fullSaju:Ys.formatFourPillars(w),ohHaengBalance:_}}catch(v){return console.error("폴백 사주 계산도 실패:",v),null}}},g=async p=>{if(!p)return console.error("고객 데이터가 없습니다"),null;if(p.saju_data)try{const y=typeof p.saju_data=="string"?JSON.parse(p.saju_data):p.saju_data,v=["year","month","day","time"];let S=!0;for(const C of v)if(!y[C]||!y[C].gan||!y[C].ji){console.error(`사주 데이터가 불완전합니다 - ${C} 필드 누락`),S=!1;break}if(S)return console.log("기존 사주 데이터 사용:",y),y}catch(y){console.error("사주 데이터 파싱 오류:",y)}return console.log("정확한 사주 API로 재계산:",p.name),await u(p)},f=async()=>{if(!(!t||!s)){console.log("=== 정확한 궁합 계산 시작 ==="),console.log("첫번째 사람:",t.name,t.birth_date,t.birth_time),console.log("두번째 사람:",s.name,s.birth_date,s.birth_time),l(!0);try{console.log("정확한 사주 데이터 계산 시작...");const p=await g(t),y=await g(s);if(!p||!y){console.error("사주 데이터 파싱 실패 - 궁합 계산 중단"),alert("정확한 사주 데이터를 계산할 수 없습니다. 고객 정보를 다시 확인해주세요."),l(!1);return}d(p),m(y),console.log("파싱된 정확한 사주 데이터:"),console.log("- 사주1:",p),console.log("- 사주2:",y),setTimeout(()=>{console.log("궁합 점수 계산 시작...");const v=B8(p,y),S=$8(p,y),C=V8(p,y),N=H8(p,y),M=z8(p,y);console.log("계산된 궁합 점수:"),console.log("- 성격 궁합:",v),console.log("- 애정 궁합:",S),console.log("- 재물 궁합:",C),console.log("- 건강 궁합:",N),console.log("- 미래 궁합:",M);const k=[{name:"성격 궁합",score:v,description:"성격과 가치관의 조화 (십신/오행 분석)"},{name:"애정 궁합",score:S,description:"감정과 애정 표현의 조화 (지지관계/음양조화)"},{name:"재물 궁합",score:C,description:"경제관념과 재물운의 조화 (재성 분석)"},{name:"건강 궁합",score:N,description:"체질과 건강 에너지의 조화 (오행 균형)"},{name:"미래 궁합",score:M,description:"인생 방향과 목표의 조화 (삼합/육합)"}],w=Math.round(k.reduce((L,T)=>L+T.score,0)/k.length);console.log("최종 궁합 점수:",w),console.log("상세 관계성 분석 시작...");const _=Z8(p,y);console.log("관계성 분석 완료:",_),console.log("현실적 분석 시작...");const E=aM(p,y);console.log("현실적 분석 완료:",E),console.log("심층 분석 시작...");const D=fM(p,y);console.log("심층 분석 완료:",D),console.log("특수 분석 시작...");const O=xM(p,y);console.log("특수 분석 완료:",O),console.log("=== 정확한 궁합 계산 완료 ==="),i({totalScore:w,categories:k,advice:U8(w,k),detailedAnalysis:{relationship:_,practical:E,depth:D,special:O}}),l(!1)},1e3)}catch(p){console.error("궁합 계산 중 오류 발생:",p),alert("궁합 계산 중 오류가 발생했습니다. 다시 시도해주세요."),l(!1)}}},x=p=>p>=80?"text-green-600":p>=60?"text-yellow-600":"text-red-600";return a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-900 dark:text-gray-100",children:"궁합 분석"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"첫 번째 사람"}),a.jsx(kl,{onSelect:e,selectedCustomer:t}),t&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:t.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.birth_date," ",t.birth_time," (",t.lunar_solar==="lunar"?"음력":"양력",")"]}),a.jsx("div",{className:"mt-3",children:a.jsx(pa,{sajuString:c==null?void 0:c.fullSaju,size:"small",className:"bg-white dark:bg-gray-800 rounded-lg p-3"})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"두 번째 사람"}),a.jsx(kl,{onSelect:n,selectedCustomer:s}),s&&a.jsxs("div",{className:"mt-4 p-4 bg-pink-50 dark:bg-pink-900/30 rounded-lg",children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.birth_date," ",s.birth_time," (",s.lunar_solar==="lunar"?"음력":"양력",")"]}),a.jsx("div",{className:"mt-3",children:a.jsx(pa,{sajuString:h==null?void 0:h.fullSaju,size:"small",className:"bg-white dark:bg-gray-800 rounded-lg p-3"})})]})]})]}),a.jsx("div",{className:"text-center mb-8",children:a.jsx("button",{onClick:f,disabled:!t||!s||o,className:`px-8 py-3 rounded-lg font-semibold transition-colors ${t&&s&&!o?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o?"분석 중...":"궁합 분석하기"})}),r&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:[t==null?void 0:t.name," ♥ ",s==null?void 0:s.name," 궁합 결과"]}),((c==null?void 0:c.fullSaju)||(h==null?void 0:h.fullSaju))&&a.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-r from-blue-50 to-pink-50 dark:from-blue-900/20 dark:to-pink-900/20 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"사주팔자 비교"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-medium mb-2 text-blue-800 dark:text-blue-200",children:t==null?void 0:t.name}),a.jsx(pa,{sajuString:c==null?void 0:c.fullSaju,size:"medium",className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-medium mb-2 text-pink-800 dark:text-pink-200",children:s==null?void 0:s.name}),a.jsx(pa,{sajuString:h==null?void 0:h.fullSaju,size:"medium",className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm"})]})]})]}),a.jsxs("div",{className:`text-6xl font-bold ${x(r.totalScore)}`,children:[r.totalScore,"점"]}),a.jsx("p",{className:"mt-4 text-lg text-gray-700 dark:text-gray-300",children:r.advice})]}),a.jsxs("div",{className:"mb-8 bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-center text-gray-900 dark:text-gray-100",children:"궁합 분석 차트"}),a.jsx(R8,{data:{categories:r.categories,person1Name:(t==null?void 0:t.name)||"",person2Name:(s==null?void 0:s.name)||""}})]}),r.detailedAnalysis&&a.jsxs("div",{className:"mb-8 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-center text-gray-900 dark:text-gray-100",children:"🌟 20개 항목 종합 궁합 차트"}),a.jsx(pM,{data:{relationship:r.detailedAnalysis.relationship,practical:r.detailedAnalysis.practical,depth:r.detailedAnalysis.depth,special:r.detailedAnalysis.special}})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.categories.map((p,y)=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:p.name}),a.jsxs("span",{className:`font-bold ${x(p.score)}`,children:[Math.round(p.score),"점"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 mb-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${p.score>=80?"bg-green-500":p.score>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${p.score}%`}})}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.description})]},y))}),a.jsxs("div",{className:"mt-8 p-6 bg-purple-50 dark:bg-purple-900/30 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:"💡 궁합 개선 팁"}),a.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[a.jsx("li",{children:"• 서로의 차이를 인정하고 존중하세요"}),a.jsx("li",{children:"• 대화를 통해 서로를 이해하려 노력하세요"}),a.jsx("li",{children:"• 공통의 취미나 관심사를 찾아보세요"}),a.jsx("li",{children:"• 감사하는 마음을 자주 표현하세요"})]})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"📊 분석 기준"}),a.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsx("li",{children:"• 십신(十神) 관계 분석"}),a.jsx("li",{children:"• 오행 상생상극 체크"}),a.jsx("li",{children:"• 지지 삼합/육합/충 분석"}),a.jsx("li",{children:"• 음양 조화도 계산"})]})]}),a.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"🎯 핵심 포인트"}),a.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsx("li",{children:"• 일간의 음양 조화"}),a.jsx("li",{children:"• 오행 균형 보완 관계"}),a.jsx("li",{children:"• 재성/관성 분포"}),a.jsx("li",{children:"• 미래 발전 가능성"})]})]})]}),r.detailedAnalysis&&a.jsx(L8,{relationshipAnalysis:r.detailedAnalysis.relationship,practicalAnalysis:r.detailedAnalysis.practical,depthAnalysis:r.detailedAnalysis.depth,specialAnalysis:r.detailedAnalysis.special})]})]})};function yM(){var k,w;const{courseId:t}=E0(),e=ze(),[s,n]=j.useState(null),[r,i]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState(!0),[h,m]=j.useState(!1),[u,g]=j.useState([]),[f,x]=j.useState(null);j.useEffect(()=>{t&&(p(),y())},[t]);const p=async()=>{try{const _={id:t||"1",title:"사주 기초 입문 과정",description:"사주의 기본 개념부터 실전 해석까지",instructor:{name:"김사주 선생님"},lessons:[{id:"1",title:"사주란 무엇인가?",type:"video",duration:1200,videoUrl:"/videos/lesson1.mp4"},{id:"2",title:"천간과 지지의 이해",type:"text",duration:900,content:"천간과 지지는 사주의 기본 구성 요소입니다..."},{id:"3",title:"기초 이론 퀴즈",type:"quiz",duration:600,quiz:{questions:[{question:"천간은 몇 개입니까?",options:["8개","10개","12개","14개"],correctAnswer:1},{question:"지지는 몇 개입니까?",options:["10개","12개","14개","16개"],correctAnswer:1}]}},{id:"4",title:"오행의 상생상극",type:"video",duration:1500,videoUrl:"/videos/lesson4.mp4"}]};n(_),l(_.lessons[0]),d(!1)}catch(_){console.error("강좌 로딩 실패:",_),d(!1)}},y=async()=>{try{i({courseId:t||"1",enrollmentId:"enrollment-1",progress:25,completedLessons:1,totalLessons:4,currentLessonId:"2",lessonProgress:[{lessonId:"1",completed:!0,completedAt:"2024-01-01",timeSpent:1200},{lessonId:"2",completed:!1,timeSpent:300},{lessonId:"3",completed:!1,timeSpent:0},{lessonId:"4",completed:!1,timeSpent:0}]})}catch(_){console.error("진도 로딩 실패:",_)}},v=async(_,E)=>{if(!r)return;const D={...r},O=D.lessonProgress.findIndex(L=>L.lessonId===_);O>=0&&(D.lessonProgress[O]={...D.lessonProgress[O],completed:!0,completedAt:new Date().toISOString(),score:E},D.completedLessons=D.lessonProgress.filter(L=>L.completed).length,D.progress=Math.round(D.completedLessons/D.totalLessons*100),i(D))},S=_=>{const E=s==null?void 0:s.lessons.find(D=>D.id===_);E&&(l(E),m(!1),g([]),x(null))},C=()=>{if(!(o!=null&&o.quiz))return;let _=0;o.quiz.questions.forEach((D,O)=>{u[O]===D.correctAnswer&&_++});const E=Math.round(_/o.quiz.questions.length*100);x(E),E>=70&&v(o.id,E)},N=_=>{const E=Math.floor(_/60),D=_%60;return`${E}:${D.toString().padStart(2,"0")}`},M=(_,E)=>{if(E)return La;switch(_){case"video":return Hv;case"text":return bv;case"quiz":return ud;default:return We}};return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"강좌를 불러오는 중..."})]})}):s?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>e("/dashboard"),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx(rv,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.title}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.instructor.name})]})]}),r&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.completedLessons,"/",r.totalLessons," 완료"]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.progress,"% 진행"]})]}),a.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${r.progress}%`}})})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"강의 목록"}),a.jsx("div",{className:"space-y-2",children:s.lessons.map((_,E)=>{const D=r==null?void 0:r.lessonProgress.find(A=>A.lessonId===_.id),O=(D==null?void 0:D.completed)||!1,L=M(_.type,O),T=(o==null?void 0:o.id)===_.id;return a.jsx("button",{onClick:()=>S(_.id),className:`w-full text-left p-3 rounded-lg transition-colors ${T?"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(L,{className:`h-5 w-5 ${O?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:`text-sm font-medium truncate ${T?"text-purple-700 dark:text-purple-300":"text-gray-900 dark:text-white"}`,children:[E+1,". ",_.title]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:N(_.duration)})]})]})},_.id)})})]})}),a.jsx("div",{className:"lg:col-span-3",children:o&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:o.title}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(mn,{className:"h-4 w-4 mr-1"}),N(o.duration)]}),a.jsx("span",{className:"capitalize",children:o.type==="video"?"동영상":o.type==="text"?"텍스트":"퀴즈"})]})]}),((k=r==null?void 0:r.lessonProgress.find(_=>_.lessonId===o.id))==null?void 0:k.completed)&&a.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[a.jsx(La,{className:"h-6 w-6 mr-2"}),a.jsx("span",{className:"font-medium",children:"완료"})]})]})}),a.jsxs("div",{className:"p-6",children:[o.type==="video"&&a.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg flex items-center justify-center mb-6",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx(wa,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg",children:"동영상 플레이어"}),a.jsx("p",{className:"text-sm opacity-75",children:"실제 구현 시 video 태그로 교체됩니다"})]})}),o.type==="text"&&o.content&&a.jsx("div",{className:"prose dark:prose-invert max-w-none",children:a.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:o.content})}),o.type==="quiz"&&o.quiz&&a.jsx("div",{className:"space-y-6",children:h?a.jsxs("div",{children:[o.quiz.questions.map((_,E)=>a.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:[E+1,". ",_.question]}),a.jsx("div",{className:"space-y-2",children:_.options.map((D,O)=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:`question-${E}`,value:O,onChange:()=>{const L=[...u];L[E]=O,g(L)},className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:D})]},O))})]},E)),f===null?a.jsx("button",{onClick:C,disabled:u.length!==o.quiz.questions.length,className:"w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"제출하기"}):a.jsxs("div",{className:"text-center py-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx(Js,{className:"h-12 w-12 text-yellow-500 mx-auto mb-2"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"퀴즈 완료!"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:[f,"점"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:f>=70?"합격입니다! 🎉":"70점 이상이 필요합니다. 다시 시도해보세요."})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ud,{className:"h-16 w-16 text-purple-600 dark:text-purple-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"퀴즈를 시작하시겠습니까?"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:[o.quiz.questions.length,"개의 문제가 있습니다"]}),a.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"퀴즈 시작"})]})}),o.type!=="quiz"&&!((w=r==null?void 0:r.lessonProgress.find(_=>_.lessonId===o.id))!=null&&w.completed)&&a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("button",{onClick:()=>v(o.id),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(Ct,{className:"h-5 w-5 inline mr-2"}),"레슨 완료"]})})]})]})})]})})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(We,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"강좌를 찾을 수 없습니다"}),a.jsx("button",{onClick:()=>e("/dashboard"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"대시보드로 돌아가기"})]})})}const N0=44032,vM=55203,jM=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],wM=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],kM=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];function zx(t){const e=t.charCodeAt(0);if(e<N0||e>vM)return null;const s=e-N0,n=Math.floor(s/(21*28)),r=Math.floor(s%(21*28)/28),i=s%28;return{cho:jM[n],jung:wM[r],jong:kM[i]}}function si(t){return Array.from(t).map(e=>{const s=zx(e);return s?s.cho:e}).join("")}function S0(t){return Array.from(t).map(e=>{const s=zx(e);return s?s.cho+s.jung+s.jong:e}).join("")}function Ts(t,e){if(!e||!t)return!1;const s=si(t),n=si(e);return s.toLowerCase().includes(n.toLowerCase())}function Ss(t,e){if(!t||!e)return 0;const s=t.toLowerCase(),n=e.toLowerCase();let r=0;s.includes(n)&&(r+=100),Ts(t,e)&&(r+=50);const i=S0(t),o=S0(e);i.toLowerCase().includes(o.toLowerCase())&&(r+=25),s.startsWith(n)&&(r+=30);const l=si(t),c=si(e);return l.toLowerCase().startsWith(c.toLowerCase())&&(r+=20),r}function zc(t,e){if(!e||!t)return t;e.toLowerCase(),t.toLowerCase();const s=new RegExp(`(${NM(e)})`,"gi");return t.replace(s,"<mark>$1</mark>")}function NM(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Uc=(t,e)=>{let s=0;const n=e.toLowerCase(),r=t.title||"";r.toLowerCase().includes(n)?s+=100:s+=Ss(r,e)*.8;const i=t.content||t.description||"";return i.toLowerCase().includes(n)?s+=50:s+=Ss(i,e)*.5,Array.isArray(t.tags)&&t.tags.forEach(o=>{const l=typeof o=="string"?o:o.name;l&&(l.toLowerCase().includes(n)?s+=30:s+=Ss(l,e)*.3)}),Ts(r,e)&&(s+=20),Ts(i,e)&&(s+=10),Math.round(s)},C0=async t=>{const e=new Promise((s,n)=>{setTimeout(()=>n(new Error("Events search timeout")),5e3)});try{const s=Tt.getEvents({start_date:t.startDate,end_date:t.endDate});return(await Promise.race([s,e])).filter(r=>{const i=t.query.toLowerCase(),o=r.title||"",l=r.description||"",c=o.toLowerCase().includes(i)||l.toLowerCase().includes(i),d=Ts(o,t.query)||Ts(l,t.query)||Ss(o,t.query)>10||Ss(l,t.query)>10;return c||d}).map(r=>({type:"event",id:r.id||"",title:r.title,content:r.description,date:r.start_time,highlight:zc(r.title,t.query),score:Uc(r,t.query),data:r})).slice(0,t.limit||10)}catch(s){return s instanceof Error&&s.message==="Events search timeout"?console.warn("Events search timed out"):console.error("Failed to search events:",s),[]}},_0=(t,e)=>{const s=e.query.toLowerCase();return t.filter(n=>{const r=n.title||n.text||"",i=n.description||"",o=r.toLowerCase().includes(s)||i.toLowerCase().includes(s),l=Ts(r,e.query)||Ts(i,e.query)||Ss(r,e.query)>10||Ss(i,e.query)>10,c=o||l,d=(!e.startDate||new Date(n.date)>=new Date(e.startDate))&&(!e.endDate||new Date(n.date)<=new Date(e.endDate));return c&&d}).map(n=>{const r=n.title||n.text;return{type:"todo",id:n.id,title:r,content:n.description,date:n.date,highlight:zc(r,e.query),score:Uc(n,e.query),data:n}}).slice(0,e.limit||10)},M0=async t=>{const e=new Promise((s,n)=>{setTimeout(()=>n(new Error("Diaries search timeout")),5e3)});try{const s=Ie.searchDiaries({q:t.query,startDate:t.startDate,endDate:t.endDate});return(await Promise.race([s,e])).map(r=>({type:"diary",id:r.id||"",title:`${r.date} 일기`,content:r.content,date:r.date,highlight:zc(r.content.substring(0,100),t.query),score:Uc(r,t.query),data:r})).slice(0,t.limit||10)}catch(s){return s instanceof Error&&s.message==="Diaries search timeout"?console.warn("Diaries search timed out"):console.error("Failed to search diaries:",s),[]}},SM=(t,e)=>[...t].sort((n,r)=>{if(e.sortBy==="date"){const i=n.date?new Date(n.date).getTime():0;return(r.date?new Date(r.date).getTime():0)-i}else return(r.score||0)-(n.score||0)}).slice(0,e.limit||20),Ux={searchAll:async(t,e=[])=>{const s=performance.now();try{if(!t.query||t.query.trim().length<1)return[];if(t.query.length>100)throw new Error("검색어가 너무 깁니다. 100자 이하로 입력해주세요.");const n=t.categories||["events","todos","diaries"],r=[],i=[];if(n.includes("events")&&i.push(C0(t)),n.includes("diaries")&&i.push(M0(t)),(await Promise.allSettled(i)).forEach((c,d)=>{c.status==="fulfilled"?r.push(...c.value):console.warn(`Search failed for category ${d}:`,c.reason)}),n.includes("todos"))try{const c=_0(e,t);r.push(...c)}catch(c){console.warn("Todo search failed:",c)}return SM(r,t)}catch(n){throw console.error("Search service error:",n),new Error("검색 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.")}},searchEvents:C0,searchTodos:_0,searchDiaries:M0};function CM(t,e){const[s,n]=j.useState(t);return j.useEffect(()=>{const r=setTimeout(()=>{n(t)},e);return()=>{clearTimeout(r)}},[t,e]),s}function Wx(t){const e=new Map;return t.forEach(s=>{const n=s.type;e.has(n)||e.set(n,[]),e.get(n).push(s)}),e}function ni(t){return{all:"전체",events:"일정",todos:"할일",diaries:"일기",tags:"태그"}[t]||t}function _M(t){return new DOMParser().parseFromString(t,"text/html").body.textContent||""}function MM(t,e){return t.length<=e?t:`${t.substring(0,e)}...`}function Yx({item:t,onClick:e}){const s=()=>{const d="h-5 w-5 flex-shrink-0";switch(t.type){case"event":return a.jsx(Wt,{className:`${d} text-blue-500`});case"todo":return a.jsx(Ct,{className:`${d} text-green-500`});case"diary":return a.jsx(We,{className:`${d} text-purple-500`});case"tag":return a.jsx(Pv,{className:`${d} text-orange-500`});default:return a.jsx(Wt,{className:`${d} text-gray-500`})}},n=()=>{switch(t.type){case"event":return"bg-blue-50 dark:bg-blue-900/20 border-l-blue-500";case"todo":return"bg-green-50 dark:bg-green-900/20 border-l-green-500";case"diary":return"bg-purple-50 dark:bg-purple-900/20 border-l-purple-500";case"tag":return"bg-orange-50 dark:bg-orange-900/20 border-l-orange-500";default:return"bg-gray-50 dark:bg-gray-900/20 border-l-gray-500"}},r=d=>{if(!d)return null;try{const h=new Date(d);return $(h,"yyyy년 M월 d일",{locale:ve})}catch{return d}},i=()=>{if(t.type!=="event"||!t.data)return null;try{const d=new Date(t.data.start_time),h=new Date(t.data.end_time);return t.data.all_day?"종일":`${$(d,"HH:mm")} - ${$(h,"HH:mm")}`}catch{return null}},o=()=>{var u;if(t.type!=="todo"||!((u=t.data)!=null&&u.priority))return null;const d={high:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",low:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"},h={high:"높음",medium:"보통",low:"낮음"},m=t.data.priority;return a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${d[m]||d.low}`,children:h[m]||m})},l=()=>{var d;return t.type!=="diary"||!((d=t.data)!=null&&d.mood)?null:a.jsx("span",{className:"text-lg",children:t.data.mood})},c=d=>d?a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",dangerouslySetInnerHTML:{__html:d}}):null;return a.jsx("div",{onClick:()=>e(t),className:`px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer border-l-2 ${n()} transition-colors`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:s()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:t.title}),o(),l()]}),t.highlight&&c(t.highlight),!t.highlight&&t.content&&a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:MM(_M(t.content),100)}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[t.date&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Wt,{className:"h-3 w-3"}),a.jsx("span",{children:r(t.date)})]}),i()&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(mn,{className:"h-3 w-3"}),a.jsx("span",{children:i()})]}),!1]})]}),a.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 self-start",children:[t.type==="event"&&"일정",t.type==="todo"&&"할일",t.type==="diary"&&"일기",t.type==="tag"&&"태그"]})]})})}const Gx=({onSearchFocus:t}={})=>{const e=ze(),s=j.useRef(null);return j.useEffect(()=>{const n=r=>{var i;if((r.ctrlKey||r.metaKey)&&r.key==="k"&&(r.preventDefault(),t?t():e("/search")),r.key==="Escape"){const o=document.activeElement;o&&o.type==="text"&&((i=o.placeholder)!=null&&i.includes("검색"))&&(o.value="",o.blur())}if(r.key==="/"&&!r.ctrlKey&&!r.metaKey&&!r.altKey){const o=document.activeElement;!(o instanceof HTMLInputElement)&&!(o instanceof HTMLTextAreaElement)&&(r.preventDefault(),t?t():e("/search"))}};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[e,t]),{searchInputRef:s}},ri=j.forwardRef(({onSearch:t,placeholder:e="일정, 할일, 일기 검색...",className:s="",showCategories:n=!0},r)=>{const[i,o]=j.useState(""),[l,c]=j.useState([]),[d,h]=j.useState(!1),[m,u]=j.useState(!1),[g,f]=j.useState(["all"]),[x,p]=j.useState(null),{todos:y,setCurrentDate:v,setViewMode:S,setSelectedDate:C}=ct(),N=CM(i,300),M=j.useRef(null),k=j.useRef(null);Gx({onSearchFocus:()=>{var L;(L=k.current)==null||L.focus(),u(!0)}}),j.useImperativeHandle(r,()=>({focus:()=>{var L;(L=k.current)==null||L.focus(),u(!0)},clear:()=>{o(""),c([]),u(!1)}}));const w=async()=>{if(N.length<2){c([]),u(!1);return}h(!0),p(null);try{const L={query:N,categories:g.includes("all")?["events","todos","diaries"]:g,limit:15,sortBy:"relevance"},T=await Ux.searchAll(L,y);c(T),u(!0),t&&t(T)}catch(L){console.error("Search failed:",L),p("검색 중 오류가 발생했습니다.")}finally{h(!1)}};j.useEffect(()=>{w()},[N,g]),j.useEffect(()=>{const L=T=>{M.current&&!M.current.contains(T.target)&&u(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const _=L=>{L.key==="Escape"&&(u(!1),o(""))},E=L=>{if(L==="all")f(["all"]);else{const T=g.includes("all")?[L]:g.includes(L)?g.filter(A=>A!==L):[...g.filter(A=>A!=="all"),L];f(T.length===0?["all"]:T)}},D=L=>{switch(u(!1),o(""),L.type){case"event":if(L.date){const T=$n(L.date);v(T),C(T),S("day")}break;case"todo":if(L.date){const T=$n(L.date);v(T),C(T),S("day")}break;case"diary":if(L.date){const T=$n(L.date);v(T),C(T),S("dayEnhanced")}break}},O=Wx(l);return a.jsxs("div",{ref:M,className:`relative ${s}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:k,type:"text",value:i,onChange:L=>o(L.target.value),onKeyDown:_,onFocus:()=>i.length>=2&&l.length>0&&u(!0),placeholder:e,className:"w-full px-4 py-2 pl-10 pr-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsx(Vn,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),i&&a.jsx("button",{onClick:()=>{o(""),c([]),u(!1)},className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-600",children:a.jsx(fm,{})}),d&&a.jsx("div",{className:"absolute right-3 top-2.5",children:a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"})})]}),n&&a.jsx("div",{className:"flex gap-2 mt-2",children:["all","events","todos","diaries"].map(L=>a.jsx("button",{onClick:()=>E(L),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${g.includes(L)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:ni(L)},L))}),m&&a.jsxs("div",{className:"absolute top-full mt-2 w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg max-h-96 overflow-y-auto z-50 border border-gray-200 dark:border-gray-700",children:[x&&a.jsx("div",{className:"px-4 py-3 text-red-600 dark:text-red-400 text-sm",children:x}),!x&&l.length===0&&!d&&i.length>=2&&a.jsx("div",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 text-sm",children:"검색 결과가 없습니다."}),!x&&l.length>0&&a.jsxs("div",{children:[Array.from(O.entries()).map(([L,T])=>a.jsxs("div",{children:[a.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700/50 font-semibold text-sm text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:[ni(L)," (",T.length,")"]}),T.map(A=>a.jsx(Yx,{item:A,onClick:D},`${A.type}-${A.id}`))]},L)),l.length>=15&&a.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 dark:text-gray-400 text-center border-t border-gray-200 dark:border-gray-600",children:"더 많은 결과가 있습니다. 검색어를 구체적으로 입력해보세요."})]})]})]})});ri.displayName="SearchBar";const EM=()=>{const t=T0(),e=ze(),{todos:s,setCurrentDate:n,setViewMode:r,setSelectedDate:i}=ct(),[o,l]=j.useState(""),[c,d]=j.useState([]),[h,m]=j.useState(!1),[u,g]=j.useState(["all"]),[f,x]=j.useState("relevance"),[p,y]=j.useState({}),[v,S]=j.useState(!1),[C,N]=j.useState(null),[M,k]=j.useState([]);j.useEffect(()=>{var P;const A=new URLSearchParams(t.search).get("q"),I=(P=t.state)==null?void 0:P.results;A?(l(A),w(A)):I&&d(I)},[t]),j.useEffect(()=>{const T=localStorage.getItem("recentSearches");T&&k(JSON.parse(T))},[]);const w=async T=>{const A=T||o;if(A.length<2){d([]);return}m(!0),N(null);try{const I=await Ux.searchAll({query:A,categories:u.includes("all")?["events","todos","diaries"]:u,startDate:p.start,endDate:p.end,sortBy:f,limit:50},s);d(I);const P=[A,...M.filter(z=>z!==A)].slice(0,10);k(P),localStorage.setItem("recentSearches",JSON.stringify(P));const H=new URL(window.location.href);H.searchParams.set("q",A),window.history.replaceState({},"",H.toString())}catch(I){console.error("Search failed:",I),N("검색 중 오류가 발생했습니다.")}finally{m(!1)}},_=T=>{switch(T.type){case"event":if(T.date){const A=$n(T.date);n(A),i(A),r("day"),e("/calendar")}break;case"todo":if(T.date){const A=$n(T.date);n(A),i(A),r("day"),e("/calendar")}break;case"diary":T.date&&e(`/diary/${T.date}`);break}},E=T=>{if(T==="all")g(["all"]);else{const A=u.includes("all")?[T]:u.includes(T)?u.filter(I=>I!==T):[...u.filter(I=>I!=="all"),T];g(A.length===0?["all"]:A)}},D=T=>{l(T),w(T)},O=Wx(c),L=c.length;return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vn,{className:"h-8 w-8 text-purple-600"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"검색"})]}),a.jsx("div",{className:"flex-1 max-w-2xl",children:a.jsx(ri,{placeholder:"일정, 할일, 일기 검색...",className:"w-full",showCategories:!1,onSearch:T=>{d(T)}})}),a.jsxs("button",{onClick:()=>S(!v),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(sv,{className:"h-5 w-5"}),"필터"]})]}),o&&a.jsxs("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:["'",a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:o}),"' 검색 결과 ",L,"개"]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[a.jsxs("div",{className:`lg:w-64 ${v?"block":"hidden lg:block"}`,children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"필터"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"카테고리"}),a.jsx("div",{className:"space-y-2",children:["all","events","todos","diaries"].map(T=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:u.includes(T),onChange:()=>E(T),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:ni(T)})]},T))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"정렬"}),a.jsxs("select",{value:f,onChange:T=>x(T.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",children:[a.jsx("option",{value:"relevance",children:"관련도순"}),a.jsx("option",{value:"date",children:"날짜순"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"날짜 범위"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"date",value:p.start||"",onChange:T=>y(A=>({...A,start:T.target.value})),className:"w-full rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",placeholder:"시작 날짜"}),a.jsx("input",{type:"date",value:p.end||"",onChange:T=>y(A=>({...A,end:T.target.value})),className:"w-full rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-3 py-2 text-sm",placeholder:"종료 날짜"})]})]}),a.jsx("button",{onClick:()=>w(),disabled:h,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:h?"검색 중...":"다시 검색"})]}),M.length>0&&a.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"최근 검색어"}),a.jsx("div",{className:"space-y-1",children:M.slice(0,5).map((T,A)=>a.jsxs("button",{onClick:()=>D(T),className:"w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:[a.jsx(mn,{className:"inline h-3 w-3 mr-2"}),T]},A))})]})]}),a.jsxs("div",{className:"flex-1",children:[C&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-700 dark:text-red-400",children:C})}),h&&a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),a.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"검색 중..."})]}),!h&&o&&c.length===0&&!C&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Vn,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"검색 결과가 없습니다"}),a.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"다른 키워드로 검색해보세요."})]}),!h&&c.length>0&&a.jsx("div",{className:"space-y-6",children:Array.from(O.entries()).map(([T,A])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[ni(T)," (",A.length,")"]})}),a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:A.map(I=>a.jsx(Yx,{item:I,onClick:_},`${I.type}-${I.id}`))})]},T))}),!o&&!h&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Vn,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"검색을 시작해보세요"}),a.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"일정, 할일, 일기를 검색할 수 있습니다."})]})]})]})})]})},TM=()=>{const[t,e]=j.useState(""),[s,n]=j.useState(!1),r=typeof window<"u"&&window.location.hostname==="localhost"?"/api/calendar":"https://calendar-j3vjlsr7q-johns-projects-bf5e60f3.vercel.app/api/calendar",i=async()=>{n(!0);try{const d=await(await fetch(`${r}/health`)).json();e(JSON.stringify(d,null,2))}catch(c){e(`Error: ${c}`)}n(!1)},o=async()=>{n(!0);try{const d=await(await fetch(`${r}/customers?page=1&limit=10`)).json();e(JSON.stringify(d,null,2))}catch(c){e(`Error: ${c}`)}n(!1)},l=async()=>{n(!0);try{const d=await(await fetch(`${r}/customers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"테스트 고객",birth_date:"1990-01-01",birth_time:"12:00",phone:"010-1234-5678",lunar_solar:"solar",gender:"male",memo:"API 테스트"})})).json();e(JSON.stringify(d,null,2))}catch(c){e(`Error: ${c}`)}n(!1)};return a.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"API 테스트 페이지"}),a.jsxs("div",{className:"mb-4 p-4 bg-gray-800 rounded",children:[a.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["현재 호스트: ",window.location.hostname]}),a.jsxs("p",{className:"text-sm text-gray-400",children:["API URL: ",r]})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsx("button",{onClick:i,disabled:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded disabled:opacity-50",children:"Health Check 테스트"}),a.jsx("button",{onClick:o,disabled:s,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded disabled:opacity-50 ml-4",children:"고객 목록 조회"}),a.jsx("button",{onClick:l,disabled:s,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded disabled:opacity-50 ml-4",children:"고객 생성 테스트"})]}),a.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"결과:"}),a.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:s?"로딩 중...":t||"버튼을 클릭하여 API를 테스트하세요."})]})]})},AM=({className:t})=>a.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),DM=({className:t})=>a.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})});function PM({size:t="md",showLabel:e=!1}){const{theme:s,toggleTheme:n}=Bx(),r={sm:"p-1.5 text-sm",md:"p-2 text-base",lg:"p-3 text-lg"},i={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return a.jsxs("button",{onClick:n,className:`
        ${r[t]} 
        rounded-lg 
        bg-background 
        hover:bg-muted 
        border border-border 
        transition-all duration-200 
        flex items-center space-x-2
        focus:outline-none 
        focus:ring-2 
        focus:ring-primary 
        focus:ring-offset-2
        ${e?"px-3":""}
      `,"aria-label":`${s==="light"?"다크":"라이트"} 모드로 전환`,title:`${s==="light"?"다크":"라이트"} 모드로 전환`,children:[s==="light"?a.jsx(DM,{className:`${i[t]} text-foreground`}):a.jsx(AM,{className:`${i[t]} text-foreground`}),e&&a.jsx("span",{className:"text-sm font-medium text-foreground",children:s==="light"?"다크 모드":"라이트 모드"})]})}const RM=()=>{var x,p,y,v,S,C,N,M;const[t,e]=j.useState(!1),[s,n]=j.useState(!1),r=T0(),i=ze(),{isAuthenticated:o,user:l,logout:c}=Qt(),d=j.useRef(null);Gx({onSearchFocus:()=>{var k;(k=d.current)==null||k.focus()}});const h=[{path:"/",label:"캘린더",icon:"📅"},{path:"/saju",label:"사주분석",icon:"🔮"},{path:"/compatibility",label:"궁합",icon:"💑"},{path:"/settings",label:"설정",icon:"⚙️"}],m=k=>r.pathname===k,u=async()=>{await c(),n(!1),i("/")},g=()=>{i("/auth?mode=login")},f=()=>{i("/auth?mode=signup")};return r.pathname==="/auth"?null:a.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(Fs,{to:"/",className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-2xl",children:"🧭"}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]})}),a.jsxs("div",{className:"flex-1 flex items-center justify-center space-x-8",children:[a.jsx("div",{className:"hidden md:block w-96 max-w-md",children:a.jsx(ri,{ref:d,placeholder:"일정, 할일, 일기 검색... (Ctrl+K)",className:"w-full",showCategories:!1,onSearch:k=>{k.length>0&&i("/search",{state:{results:k}})}})}),a.jsx("nav",{className:"hidden lg:flex items-center space-x-1",children:h.map(k=>a.jsxs(Fs,{to:k.path,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-1
                    ${m(k.path)?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[a.jsx("span",{children:k.icon}),a.jsx("span",{children:k.label})]},k.path))})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(PM,{}),o&&l?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>n(!s),className:"hidden md:flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:((p=(x=l==null?void 0:l.name)==null?void 0:x.charAt(0))==null?void 0:p.toUpperCase())||((v=(y=l==null?void 0:l.email)==null?void 0:y.charAt(0))==null?void 0:v.toUpperCase())||"U"})}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(l==null?void 0:l.name)||(l==null?void 0:l.email)||"User"}),a.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(l==null?void 0:l.name)||(l==null?void 0:l.email)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(l==null?void 0:l.email)||""})]}),a.jsxs(Fs,{to:"/settings",onClick:()=>n(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("span",{className:"mr-2",children:"⚙️"}),"설정"]}),a.jsxs(Fs,{to:"/dashboard",onClick:()=>n(!1),className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("span",{className:"mr-2",children:"📊"}),"대시보드"]}),a.jsxs("button",{onClick:u,className:"flex items-center w-full px-4 py-2 text-sm text-red-700 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[a.jsx("span",{className:"mr-2",children:"🚪"}),"로그아웃"]})]})})]}):a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[a.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:"로그인"}),a.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"회원가입"})]}),a.jsx("button",{onClick:()=>e(!t),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"메뉴 열기",children:a.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:t?a.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):a.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),t&&a.jsx("nav",{className:"md:hidden py-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsx("div",{className:"px-4 mb-3",children:a.jsx(ri,{placeholder:"검색...",className:"w-full",showCategories:!0,onSearch:k=>{k.length>0&&(i("/search",{state:{results:k}}),e(!1))}})}),h.map(k=>a.jsxs(Fs,{to:k.path,onClick:()=>e(!1),className:`px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2
                    ${m(k.path)?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[a.jsx("span",{children:k.icon}),a.jsx("span",{children:k.label})]},k.path)),a.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 mt-2",children:o&&l?a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:((C=(S=l==null?void 0:l.name)==null?void 0:S.charAt(0))==null?void 0:C.toUpperCase())||((M=(N=l==null?void 0:l.email)==null?void 0:N.charAt(0))==null?void 0:M.toUpperCase())||"U"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(l==null?void 0:l.name)||(l==null?void 0:l.email)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(l==null?void 0:l.email)||""})]})]}),a.jsx("button",{onClick:u,className:"w-full px-3 py-2 text-left text-sm text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"🚪 로그아웃"})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:g,className:"w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"로그인"}),a.jsx("button",{onClick:f,className:"w-full px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"회원가입"})]})})]})})]})})},LM=()=>{const t=new Date().getFullYear(),e={서비스:[{label:"오늘의 운세",path:"/fortune"},{label:"사주 분석",path:"/saju"},{label:"궁합 보기",path:"/compatibility"},{label:"캘린더",path:"/calendar"}],정보:[{label:"이용약관",path:"/terms"},{label:"개인정보처리방침",path:"/privacy"},{label:"공지사항",path:"/notice"},{label:"자주 묻는 질문",path:"/faq"}],회사:[{label:"회사소개",path:"/about"},{label:"채용정보",path:"/careers"},{label:"제휴문의",path:"/partnership"},{label:"고객센터",path:"/support"}]},s=[{icon:"📘",label:"Facebook",url:"https://facebook.com"},{icon:"🐦",label:"Twitter",url:"https://twitter.com"},{icon:"📷",label:"Instagram",url:"https://instagram.com"},{icon:"📺",label:"YouTube",url:"https://youtube.com"},{icon:"💬",label:"KakaoTalk",url:"#"}];return a.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"py-12 grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("span",{className:"text-2xl",children:"🧭"}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"운명나침반"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"전통 사주명리학과 현대 AI 기술을 결합한 가장 정확한 운세 서비스"}),a.jsx("div",{className:"flex space-x-3",children:s.map(n=>a.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors","aria-label":n.label,children:a.jsx("span",{className:"text-lg",children:n.icon})},n.label))})]}),Object.entries(e).map(([n,r])=>a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4",children:n}),a.jsx("ul",{className:"space-y-3",children:r.map(i=>a.jsx("li",{children:a.jsx(Fs,{to:i.path,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:i.label})},i.path))})]},n))]}),a.jsx("div",{className:"py-8 border-t border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"max-w-md mx-auto text-center md:text-left md:max-w-none md:flex md:justify-between md:items-center",children:[a.jsxs("div",{className:"mb-4 md:mb-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"운세 소식을 받아보세요"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"매주 당신의 운세와 행운의 팁을 이메일로 전달해드립니다"})]}),a.jsxs("div",{className:"flex max-w-md mx-auto md:mx-0",children:[a.jsx("input",{type:"email",placeholder:"이메일 주소 입력",className:"flex-1 px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-l-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500"}),a.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm font-medium rounded-r-lg hover:from-purple-700 hover:to-pink-700 transition-colors",children:"구독하기"})]})]})}),a.jsx("div",{className:"py-6 border-t border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["© ",t," 운명나침반. All rights reserved."]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:"Made with ❤️ in Korea"}),a.jsx("span",{children:"|"}),a.jsx("span",{children:"Version 1.0.0"})]})]})}),a.jsx("div",{className:"py-4 border-t border-gray-200 dark:border-gray-800",children:a.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsx("span",{children:"🔒"}),a.jsx("span",{children:"SSL 보안 연결"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsx("span",{children:"✅"}),a.jsx("span",{children:"개인정보보호 인증"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsx("span",{children:"🏆"}),a.jsx("span",{children:"2024 베스트 운세앱 선정"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500",children:[a.jsx("span",{children:"📊"}),a.jsx("span",{children:"누적 사용자 100만+"})]})]})})]})})};function OM(){return j.useEffect(()=>{k1()},[]),a.jsx(P8,{children:a.jsx(ep,{children:a.jsx(yy,{children:a.jsx(u1,{children:a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(RM,{}),a.jsx("main",{className:"flex-1",children:a.jsxs(tp,{children:[a.jsx(we,{path:"/",element:a.jsx(y1,{})}),a.jsx(we,{path:"/calendar",element:a.jsx(sp,{to:"/",replace:!0})}),a.jsx(we,{path:"/auth",element:a.jsx(Vp,{})}),a.jsx(we,{path:"/dashboard",element:a.jsx(s2,{})}),a.jsx(we,{path:"/admin",element:a.jsx(o2,{})}),a.jsx(we,{path:"/fortune",element:a.jsx(yj,{})}),a.jsx(we,{path:"/saju",element:a.jsx(D8,{})}),a.jsx(we,{path:"/customers",element:a.jsx(Km,{})}),a.jsx(we,{path:"/test-api",element:a.jsx(TM,{})}),a.jsx(we,{path:"/saju/six-areas",element:a.jsxs("div",{className:"p-8 text-center",children:["6대 영역 분석이 통합 시스템으로 이전되었습니다. ",a.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})}),a.jsx(we,{path:"/saju/detailed",element:a.jsxs("div",{className:"p-8 text-center",children:["17대 세부운세가 통합 시스템으로 이전되었습니다. ",a.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})}),a.jsx(we,{path:"/saju/personality",element:a.jsxs("div",{className:"p-8 text-center",children:["7대 성향 분석이 통합 시스템으로 이전되었습니다. ",a.jsx("a",{href:"/saju",className:"text-purple-600",children:"새로운 사주분석"}),"으로 이동하세요."]})}),a.jsx(we,{path:"/saju-chart",element:a.jsx(M_,{})}),a.jsx(we,{path:"/saju/interpretation",element:a.jsx(T_,{})}),a.jsx(we,{path:"/diary",element:a.jsx(Md,{})}),a.jsx(we,{path:"/diary/:date",element:a.jsx(Md,{})}),a.jsx(we,{path:"/settings",element:a.jsx(bj,{})}),a.jsx(we,{path:"/search",element:a.jsx(EM,{})}),a.jsx(we,{path:"/compatibility",element:a.jsx(bM,{})}),a.jsx(we,{path:"/learning/:courseId",element:a.jsx(yM,{})})]})}),a.jsx(LM,{})]})})})})})}Mo.createRoot(document.getElementById("root")).render(a.jsx(Sr.StrictMode,{children:a.jsx(OM,{})}));
//# sourceMappingURL=index-CDbw_fMr-1759520869367.js.map
