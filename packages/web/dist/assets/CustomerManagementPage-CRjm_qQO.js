import{r as e,j as a}from"./react-vendor-BqNk2DgB.js";import{a as r,u as t,c as l,d as s}from"./customerApi-JV4xNEmH.js";import"./vendor-DgwlXjR1.js";import"./three-vendor-B4pyqsGd.js";import"./chart-vendor-DwU5C6A5.js";function d({embedded:d=!1}){const[n,x]=e.useState([]),[c,i]=e.useState(0),[m,o]=e.useState(1),[h,g]=e.useState(""),[y,b]=e.useState(!1),[u,p]=e.useState(null),[j,k]=e.useState(!1),[N,f]=e.useState({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""});e.useEffect(()=>{v()},[m,h]);const v=async()=>{try{k(!0);const e=await r(m,20,h);x(e.data),i(e.totalPages)}catch(e){alert("ê³ ê° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}finally{k(!1)}},w=()=>{f({name:"",birth_date:"",birth_time:"",phone:"",lunar_solar:"solar",gender:"male",memo:""})};return a.jsx("div",{className:d?"w-full":"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:a.jsxs("div",{className:d?"w-full":"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 "+(d?"border border-gray-200 dark:border-gray-600":""),children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:(d?"text-lg":"text-2xl")+" font-bold text-gray-900 dark:text-white",children:"ğŸ—‚ï¸ ê³ ê° ê´€ë¦¬"}),a.jsx("button",{onClick:()=>{p(null),w(),b(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"â• ìƒˆ ê³ ê° ë“±ë¡"})]}),a.jsx("div",{className:"mb-6",children:a.jsx("input",{type:"text",placeholder:"ğŸ” ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰...",value:h,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \n                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"ë²ˆí˜¸"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"ì´ë¦„"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"ìƒë…„ì›”ì¼"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"ìƒì‹œ"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"ì „í™”ë²ˆí˜¸"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"ìŒ/ì–‘"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"ì„±ë³„"}),a.jsx("th",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:"ê´€ë¦¬"})]})}),a.jsx("tbody",{children:j?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"ë¡œë”© ì¤‘..."})}):0===n.length?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"ë“±ë¡ëœ ê³ ê°ì´ ì—†ìŠµë‹ˆë‹¤"})}):n.filter(e=>null!=e).map((e,r)=>a.jsxs("tr",{className:"border-b dark:border-gray-700",children:[a.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:20*(m-1)+r+1}),a.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white font-medium",children:e.name}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:e.birth_date}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:e.birth_time}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:e.phone}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:"lunar"===e.lunar_solar?"ìŒë ¥":"ì–‘ë ¥"}),a.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:"male"===e.gender?"ë‚¨":"ì—¬"}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("button",{onClick:()=>(e=>{p(e),f({name:e.name,birth_date:e.birth_date,birth_time:e.birth_time,phone:e.phone,lunar_solar:e.lunar_solar,gender:e.gender,memo:e.memo||""}),b(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:"âœï¸"}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await s(e),alert("ê³ ê°ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"),v()}catch(a){alert(a.message||"ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")}})(e.id),className:"text-red-600 hover:text-red-800",children:"ğŸ—‘ï¸"})]})]},e.id))})]})}),c>1&&a.jsxs("div",{className:"flex justify-center mt-6 space-x-2",children:[a.jsx("button",{onClick:()=>o(e=>Math.max(1,e-1)),disabled:1===m,className:"px-3 py-1 border rounded disabled:opacity-50",children:"â—€"}),[...Array(c)].map((e,r)=>a.jsx("button",{onClick:()=>o(r+1),className:"px-3 py-1 border rounded "+(m===r+1?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:r+1},r)),a.jsx("button",{onClick:()=>o(e=>Math.min(c,e+1)),disabled:m===c,className:"px-3 py-1 border rounded disabled:opacity-50",children:"â–¶"})]})]}),y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-900 dark:text-white",children:u?"ê³ ê° ì •ë³´ ìˆ˜ì •":"ìƒˆ ê³ ê° ë“±ë¡"}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{u?(await t(u.id,N),alert("ê³ ê° ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤")):(await l(N),alert("ê³ ê°ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤")),b(!1),p(null),w(),v()}catch(a){alert(a.message||"ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")}},children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"ì´ë¦„ *"}),a.jsx("input",{type:"text",required:!0,value:N.name,onChange:e=>f({...N,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"ìƒë…„ì›”ì¼ *"}),a.jsx("input",{type:"date",required:!0,value:N.birth_date,onChange:e=>f({...N,birth_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"ìƒì‹œ * (24ì‹œê°„ í˜•ì‹)"}),a.jsx("input",{type:"time",required:!0,value:N.birth_time,onChange:e=>f({...N,birth_time:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"ì „í™”ë²ˆí˜¸ *"}),a.jsx("input",{type:"tel",required:!0,placeholder:"010-1234-5678",value:N.phone,onChange:e=>f({...N,phone:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"ìŒë ¥/ì–‘ë ¥"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"solar",checked:"solar"===N.lunar_solar,onChange:e=>f({...N,lunar_solar:"solar"}),className:"mr-2"}),"ì–‘ë ¥"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"lunar",checked:"lunar"===N.lunar_solar,onChange:e=>f({...N,lunar_solar:"lunar"}),className:"mr-2"}),"ìŒë ¥"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"ì„±ë³„ *"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"male",checked:"male"===N.gender,onChange:e=>f({...N,gender:"male"}),className:"mr-2"}),"ë‚¨"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"female",checked:"female"===N.gender,onChange:e=>f({...N,gender:"female"}),className:"mr-2"}),"ì—¬"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"ë©”ëª¨"}),a.jsx("textarea",{value:N.memo,onChange:e=>f({...N,memo:e.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>{b(!1),p(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"ì·¨ì†Œ"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:u?"ìˆ˜ì •í•˜ê¸°":"ë“±ë¡í•˜ê¸°"})]})]})]})})]})})}export{d as default};
