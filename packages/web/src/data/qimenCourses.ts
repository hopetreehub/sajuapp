/**
 * 귀문둔갑 학습 코스 데이터
 *
 * 초급/중급/고급 단계별 학습 콘텐츠
 * @author Claude Code
 * @version 1.0.0
 */

export type CourseLevel = 'beginner' | 'intermediate' | 'advanced';
export type LessonType = 'theory' | 'practice' | 'quiz' | 'case-study';

export interface Lesson {
  id: string;
  title: string;
  type: LessonType;
  duration: number; // 분 단위
  description: string;
  content: string; // Markdown 형식
  keyPoints: string[];
  quiz?: Quiz;
  practiceData?: PracticeData;
}

export interface Quiz {
  questions: QuizQuestion[];
  passingScore: number; // 퍼센트
}

export interface QuizQuestion {
  id: string;
  question: string;
  options: string[];
  correctAnswer: number; // 0-based index
  explanation: string;
}

export interface PracticeData {
  scenario: string;
  date: string;
  time: string;
  expectedResult: string;
  hints: string[];
}

export interface Course {
  id: string;
  level: CourseLevel;
  title: string;
  description: string;
  icon: string;
  estimatedHours: number;
  lessons: Lesson[];
  prerequisites?: string[]; // 선수 코스 ID
}

// 초급 코스
const beginnerCourse: Course = {
  id: 'beginner',
  level: 'beginner',
  title: '귀문둔갑 입문',
  description: '귀문둔갑의 기본 개념과 구조를 이해합니다',
  icon: '🌱',
  estimatedHours: 8,
  lessons: [
    {
      id: 'beginner-1',
      title: '귀문둔갑이란 무엇인가?',
      type: 'theory',
      duration: 30,
      description: '귀문둔갑의 기원과 역사, 활용 분야를 알아봅니다',
      keyPoints: [
        '귀문둔갑의 유래와 역사',
        '동양 점술에서의 위치',
        '현대적 활용 방법',
        '다른 점술과의 차이점',
      ],
      content: `# 귀문둔갑이란?

## 기원과 역사

귀문둔갑(奇門遁甲)은 중국 고대로부터 전해 내려오는 시간과 방위를 이용한 예측술입니다.
'기문(奇門)'은 특별한 문을 의미하며, '둔갑(遁甲)'은 숨겨진 갑(甲)을 뜻합니다.

### 역사적 배경
- **기원**: 전국시대 병법으로 시작
- **발전**: 당나라 때 점술로 체계화
- **현대**: 사업, 투자, 일상 의사결정에 활용

## 귀문둔갑의 구성요소

귀문둔갑은 크게 세 가지 요소로 구성됩니다:

1. **천반(天盤)**: 9성(九星) - 하늘의 기운
2. **인반(人盤)**: 8문(八門) - 사람의 행동
3. **지반(地盤)**: 8신(八神) - 땅의 상태

## 활용 분야

귀문둔갑은 다양한 분야에서 활용됩니다:

- 📅 **길일 선택**: 중요한 일정 잡기
- 🧭 **방위 선택**: 유리한 방향 찾기
- 💼 **사업 결정**: 투자 시기 판단
- 🏠 **부동산**: 이사 방향 선택
- 💑 **인간관계**: 만남 장소 결정

## 다른 점술과의 차이

| 구분 | 귀문둔갑 | 사주 | 타로 |
|------|----------|------|------|
| 기반 | 시간+방위 | 생년월일시 | 카드 |
| 용도 | 의사결정 | 운명 분석 | 심리 상담 |
| 특징 | 능동적 | 수동적 | 직관적 |

> 💡 **핵심**: 귀문둔갑은 "언제", "어디로"를 알려주는 실용적 도구입니다.
`,
      quiz: {
        passingScore: 70,
        questions: [
          {
            id: 'beginner-1-q1',
            question: '귀문둔갑의 "기문(奇門)"이 의미하는 것은?',
            options: [
              '특별한 문',
              '숨겨진 갑',
              '신비로운 방위',
              '비밀스러운 시간',
            ],
            correctAnswer: 0,
            explanation: '기문(奇門)은 "특별한 문" 또는 "신비로운 문"을 의미합니다.',
          },
          {
            id: 'beginner-1-q2',
            question: '귀문둔갑이 가장 유용하게 사용되는 상황은?',
            options: [
              '과거 회상',
              '성격 분석',
              '의사결정 시기와 방향',
              '건강 진단',
            ],
            correctAnswer: 2,
            explanation: '귀문둔갑은 "언제, 어디로" 행동할지 결정할 때 가장 유용합니다.',
          },
          {
            id: 'beginner-1-q3',
            question: '귀문둔갑의 세 가지 구성요소가 아닌 것은?',
            options: ['천반(9성)', '인반(8문)', '지반(8신)', '시반(12지)'],
            correctAnswer: 3,
            explanation: '귀문둔갑은 천반, 인반, 지반으로 구성됩니다. 시반(12지)은 포함되지 않습니다.',
          },
        ],
      },
    },
    {
      id: 'beginner-2',
      title: '9궁(구궁) 이해하기',
      type: 'theory',
      duration: 45,
      description: '귀문둔갑의 기본 구조인 9궁을 배웁니다',
      keyPoints: [
        '낙서도(洛書圖)의 원리',
        '9개 궁의 배치와 의미',
        '중앙 5궁의 특수성',
        '방위와 궁의 관계',
      ],
      content: `# 9궁(구궁) 시스템

## 낙서도(洛書圖)

귀문둔갑의 9궁은 중국 고대 수학 원리인 **낙서도**에 기반합니다.

\`\`\`
4  9  2
3  5  7
8  1  6
\`\`\`

> 💡 모든 행, 열, 대각선의 합이 15가 되는 마방진 구조입니다.

## 9궁의 배치

각 궁은 특정 방위와 의미를 가집니다:

| 궁 | 방위 | 8괘 | 의미 | 상징 |
|----|------|-----|------|------|
| 1궁 | 북 | 감(坎) | 지혜, 유동성 | 💧 물 |
| 2궁 | 서남 | 곤(坤) | 포용, 안정 | 🏔️ 땅 |
| 3궁 | 동 | 진(震) | 활동, 성장 | ⚡ 번개 |
| 4궁 | 동남 | 손(巽) | 부드러움, 침투 | 🌬️ 바람 |
| 5궁 | 중앙 | - | 중심, 전환 | ⭐ 중심 |
| 6궁 | 서북 | 건(乾) | 권위, 강함 | ☁️ 하늘 |
| 7궁 | 서 | 태(兌) | 기쁨, 소통 | 🌊 못 |
| 8궁 | 동북 | 간(艮) | 정지, 산 | 🗻 산 |
| 9궁 | 남 | 리(離) | 밝음, 명예 | 🔥 불 |

## 5궁의 특수성

중앙 5궁은 다른 궁들과 달리:
- 방위가 없음 (중심)
- 8문이 배치되지 않음
- 에너지 전환의 중심지
- 2궁 또는 8궁에 임시 배치

## 실전 활용

9궁을 읽는 순서:
1. 중심(5궁)에서 시작
2. 시계방향으로 1→2→3...→9
3. 각 궁의 기운 파악
4. 방위별 길흉 판단

> 📚 **연습**: 오늘 날짜로 9궁도를 그려보세요.
`,
      quiz: {
        passingScore: 75,
        questions: [
          {
            id: 'beginner-2-q1',
            question: '낙서도에서 모든 행, 열, 대각선의 합은?',
            options: ['9', '12', '15', '18'],
            correctAnswer: 2,
            explanation: '낙서도는 모든 행, 열, 대각선의 합이 15가 되는 마방진입니다.',
          },
          {
            id: 'beginner-2-q2',
            question: '1궁이 위치한 방위는?',
            options: ['남', '북', '동', '서'],
            correctAnswer: 1,
            explanation: '1궁은 북쪽에 위치하며, 물의 기운을 상징합니다.',
          },
          {
            id: 'beginner-2-q3',
            question: '5궁의 특수성으로 옳은 것은?',
            options: [
              '가장 강한 길성',
              '방위가 없는 중심',
              '항상 흉성',
              '북쪽 방위',
            ],
            correctAnswer: 1,
            explanation: '5궁은 중앙에 위치하여 방위가 없으며, 에너지 전환의 중심지입니다.',
          },
          {
            id: 'beginner-2-q4',
            question: '9궁이 상징하는 오행은?',
            options: ['물', '나무', '불', '흙'],
            correctAnswer: 2,
            explanation: '9궁은 남쪽에 위치하며 불(火)의 기운을 상징합니다.',
          },
        ],
      },
    },
    {
      id: 'beginner-3',
      title: '9성(구성) 알아보기',
      type: 'theory',
      duration: 50,
      description: '천반을 구성하는 9개의 별을 배웁니다',
      keyPoints: [
        '9성의 명칭과 의미',
        '길성과 흉성 구분',
        '9성의 성격과 특징',
        '실생활 적용 방법',
      ],
      content: `# 9성(九星) - 하늘의 기운

## 9성이란?

9성은 귀문둔갑의 **천반(天盤)**을 구성하는 9개의 별입니다.
각 별은 고유한 성격과 길흉을 가지고 있습니다.

## 9성의 분류

### 🌟 길성 (吉星)
1. **천보성(天輔星)** ⭐⭐⭐⭐⭐
   - 의미: 보좌, 지원
   - 용도: 협력, 파트너십
   - 키워드: 도움, 협조

2. **천심성(天心星)** ⭐⭐⭐⭐
   - 의미: 마음, 의료
   - 용도: 건강, 치료, 상담
   - 키워드: 치유, 회복

3. **천영성(天英星)** ⭐⭐⭐⭐
   - 의미: 영광, 명예
   - 용도: 승진, 시험
   - 키워드: 성공, 인정

### ⚖️ 중성 (中星)
4. **천충성(天沖星)** ⚖️
   - 의미: 충돌, 돌파
   - 용도: 변화, 개혁
   - 키워드: 돌진, 개척

5. **천보성(天輔星)** ⚖️
   - 의미: 도움, 보조
   - 용도: 협업, 지원
   - 키워드: 협력, 보좌

### ❌ 흉성 (凶星)
6. **천임성(天任星)** ❌
   - 의미: 책임, 부담
   - 용도: 피해야 할 방향
   - 키워드: 압박, 스트레스

7. **천주성(天柱星)** ❌❌
   - 의미: 기둥, 고집
   - 용도: 완고함 주의
   - 키워드: 막힘, 정체

8. **천금성(天禽星)** ❌❌❌
   - 의미: 덫, 구속
   - 용도: 절대 피할 방향
   - 키워드: 함정, 곤란

9. **천예성(天芮星)** ❌❌❌❌
   - 의미: 질병, 재난
   - 용도: 최악의 방향
   - 키워드: 병, 재앙

## 9성의 실전 활용

### 상황별 최적 별 선택

| 상황 | 추천 별 | 이유 |
|------|---------|------|
| 중요 계약 | 천보성 | 협력 운 상승 |
| 면접/시험 | 천영성 | 명예 운 상승 |
| 병원 방문 | 천심성 | 치료 운 상승 |
| 사업 개시 | 천충성 | 돌파력 강함 |

### 피해야 할 별

- ❌ 천임성: 부담스러운 일
- ❌❌ 천주성: 새로운 시도
- ❌❌❌ 천금성: 투자, 계약
- ❌❌❌❌ 천예성: 모든 중요한 일

> 💡 **실전 팁**: 출장이나 여행 시 천영성 방향으로 가면 좋은 결과를 얻기 쉽습니다.

## 연습 문제

다음 상황에서 어떤 별의 방향을 선택하시겠습니까?

1. 중요한 비즈니스 미팅
2. 건강 검진
3. 새로운 사업 론칭
4. 친구와의 가벼운 만남
`,
      quiz: {
        passingScore: 75,
        questions: [
          {
            id: 'beginner-3-q1',
            question: '가장 길한 별로 알려진 것은?',
            options: ['천임성', '천보성', '천예성', '천주성'],
            correctAnswer: 1,
            explanation: '천보성은 보좌와 지원의 의미로 가장 길한 별 중 하나입니다.',
          },
          {
            id: 'beginner-3-q2',
            question: '건강과 치료에 가장 좋은 별은?',
            options: ['천영성', '천심성', '천충성', '천보성'],
            correctAnswer: 1,
            explanation: '천심성은 마음과 의료를 상징하여 건강과 치료에 좋습니다.',
          },
          {
            id: 'beginner-3-q3',
            question: '피해야 할 흉성으로 질병과 재난을 의미하는 별은?',
            options: ['천임성', '천주성', '천금성', '천예성'],
            correctAnswer: 3,
            explanation: '천예성은 질병과 재난을 의미하는 가장 강한 흉성입니다.',
          },
          {
            id: 'beginner-3-q4',
            question: '새로운 사업이나 개혁에 적합한 별은?',
            options: ['천충성', '천예성', '천주성', '천임성'],
            correctAnswer: 0,
            explanation: '천충성은 충돌과 돌파를 의미하여 새로운 시도에 적합합니다.',
          },
        ],
      },
    },
    {
      id: 'beginner-4',
      title: '8문(팔문) 이해하기',
      type: 'theory',
      duration: 50,
      description: '인반을 구성하는 8개의 문을 배웁니다',
      keyPoints: [
        '8문의 명칭과 의미',
        '길문과 흉문 구분',
        '상황별 적합한 문',
        '문의 시간적 활용',
      ],
      content: `# 8문(八門) - 사람의 행동

## 8문이란?

8문은 귀문둔갑의 **인반(人盤)**을 구성하며, 사람의 행동과 관련됩니다.

## 8문의 분류

### 🚪 생문(生門) - 최고 길문
- **의미**: 생성, 탄생
- **용도**: 새로운 시작, 창업, 출산
- **키워드**: 성장, 발전, 번영
- **색상**: 초록색 🟢

### 🚪 개문(開門) - 대길문
- **의미**: 열림, 시작
- **용도**: 개업, 개시, 대외활동
- **키워드**: 확장, 기회
- **색상**: 하늘색 🔵

### 🚪 휴문(休門) - 길문
- **의미**: 휴식, 회복
- **용도**: 여행, 요양, 학습
- **키워드**: 평화, 안정
- **색상**: 청록색 🟦

### 🚪 경문(景門) - 소길문
- **의미**: 경치, 외관
- **용도**: 홍보, 마케팅, 외교
- **키워드**: 화려함, 명성
- **색상**: 노란색 🟡

### 🚪 놀문(驚門) - 소흉문
- **의미**: 놀람, 변화
- **용도**: 주의 필요
- **키워드**: 변동, 불안
- **색상**: 주황색 🟠

### 🚪 상문(傷門) - 흉문
- **의미**: 상처, 다툼
- **용도**: 피해야 함
- **키워드**: 갈등, 손해
- **색상**: 빨간색 🔴

### 🚪 두문(杜門) - 대흉문
- **의미**: 막힘, 폐쇄
- **용도**: 절대 피할 것
- **키워드**: 정체, 고립
- **색상**: 검은색 ⚫

### 🚪 사문(死門) - 최악 흉문
- **의미**: 죽음, 종결
- **용도**: 모든 활동 금지
- **키워드**: 끝, 파멸
- **색상**: 회색 ⚪

## 상황별 최적 문 선택

| 활동 | 최적 문 | 차선 문 | 피할 문 |
|------|---------|---------|---------|
| 창업 개업 | 생문 | 개문 | 사문, 두문 |
| 이직 면접 | 개문 | 생문 | 상문, 두문 |
| 휴가 여행 | 휴문 | 경문 | 놀문 |
| 계약 체결 | 생문 | 개문 | 상문, 사문 |
| 건강 검진 | 휴문 | 생문 | 사문 |
| 마케팅 | 경문 | 개문 | 두문 |

## 8문과 시간

각 문은 특정 시간대와 연결됩니다:

- **생문**: 오전 7-9시 (진시)
- **개문**: 오전 9-11시 (사시)
- **휴문**: 오전 11시-오후 1시 (오시)
- **경문**: 오후 1-3시 (미시)

> 💡 **활용법**: 중요한 회의는 생문이나 개문 시간대에 잡으세요.

## 실전 예제

**상황**: 새로운 사업 파트너를 만나러 갑니다.

1. ✅ **최선**: 생문 방향, 오전 7-9시
2. ✅ **차선**: 개문 방향, 오전 9-11시
3. ❌ **최악**: 사문, 두문 방향은 피하기

## 연습 문제

다음 상황에 가장 적합한 문은?

1. 첫 데이트
2. 법원 소송
3. 병원 입원
4. 신제품 발표회
`,
      quiz: {
        passingScore: 75,
        questions: [
          {
            id: 'beginner-4-q1',
            question: '새로운 시작과 창업에 가장 좋은 문은?',
            options: ['휴문', '생문', '사문', '두문'],
            correctAnswer: 1,
            explanation: '생문(生門)은 생성과 탄생을 의미하여 새로운 시작에 최적입니다.',
          },
          {
            id: 'beginner-4-q2',
            question: '휴식과 여행에 적합한 문은?',
            options: ['상문', '휴문', '놀문', '두문'],
            correctAnswer: 1,
            explanation: '휴문(休門)은 휴식과 회복을 의미하여 여행에 좋습니다.',
          },
          {
            id: 'beginner-4-q3',
            question: '가장 피해야 할 최악의 문은?',
            options: ['경문', '놀문', '두문', '사문'],
            correctAnswer: 3,
            explanation: '사문(死門)은 죽음과 종결을 의미하는 최악의 흉문입니다.',
          },
          {
            id: 'beginner-4-q4',
            question: '홍보와 마케팅에 적합한 문은?',
            options: ['경문', '두문', '상문', '사문'],
            correctAnswer: 0,
            explanation: '경문(景門)은 경치와 외관을 의미하여 홍보 활동에 적합합니다.',
          },
        ],
      },
    },
    {
      id: 'beginner-5',
      title: '8신(팔신) 기초',
      type: 'theory',
      duration: 40,
      description: '지반을 구성하는 8개의 신을 배웁니다',
      keyPoints: [
        '8신의 명칭과 역할',
        '8신과 환경의 관계',
        '길신과 흉신',
        '8신의 실용적 활용',
      ],
      content: `# 8신(八神) - 땅의 상태

## 8신이란?

8신은 귀문둔갑의 **지반(地盤)**을 구성하며, 환경과 상황의 특성을 나타냅니다.

## 8신의 구성

### 🌟 길신

1. **직부(直符)** ⭐⭐⭐⭐⭐
   - 의미: 정직, 권위
   - 특징: 가장 강한 길신
   - 활용: 공식적 활동, 관공서

2. **등사(螣蛇)** ⭐⭐
   - 의미: 뱀, 유연함
   - 특징: 변통과 적응
   - 활용: 협상, 외교

3. **태음(太陰)** ⭐⭐⭐
   - 의미: 달, 은밀함
   - 특징: 비밀스러운 일
   - 활용: 내부 회의, 계획

4. **육합(六合)** ⭐⭐⭐⭐
   - 의미: 조화, 결합
   - 특징: 협력과 합의
   - 활용: 파트너십, 결혼

### ❌ 흉신

5. **백호(白虎)** ❌❌
   - 의미: 흰 호랑이, 공격
   - 특징: 폭력, 재해
   - 활용: 피해야 할 방향

6. **현무(玄武)** ❌❌❌
   - 의미: 거북뱀, 도둑
   - 특징: 사기, 배신
   - 활용: 절대 주의

7. **구진(勾陳)** ❌
   - 의미: 얽힘, 지연
   - 특징: 복잡함
   - 활용: 신중함 필요

8. **주작(朱雀)** ❌
   - 의미: 붉은 새, 말다툼
   - 특징: 언쟁, 소송
   - 활용: 법적 분쟁 주의

## 8신의 실전 활용

### 상황별 8신 매칭

| 활동 | 유리한 신 | 불리한 신 |
|------|-----------|-----------|
| 계약 체결 | 육합, 직부 | 현무, 백호 |
| 비밀 회의 | 태음 | 주작 |
| 공개 행사 | 직부 | 등사 |
| 협상 | 육합, 등사 | 구진 |

## 8신과 9성의 조합

8신은 9성과 함께 작용하여 더 정확한 판단을 제공합니다:

- 직부 + 천영성 = 최고 길조 (공식 명예)
- 현무 + 천예성 = 최악 흉조 (사기 + 재난)
- 육합 + 천보성 = 대길 (협력 + 지원)

> 💡 **핵심**: 8신은 "어떤 환경"에서 일이 벌어지는지 알려줍니다.

## 연습 문제

1. 중요한 계약 체결 시 가장 좋은 신은?
2. 비밀 프로젝트 회의에 적합한 신은?
3. 절대 피해야 할 사기 위험 신은?
`,
      quiz: {
        passingScore: 70,
        questions: [
          {
            id: 'beginner-5-q1',
            question: '가장 강한 길신으로 권위를 상징하는 것은?',
            options: ['등사', '직부', '백호', '주작'],
            correctAnswer: 1,
            explanation: '직부(直符)는 정직과 권위를 상징하는 가장 강한 길신입니다.',
          },
          {
            id: 'beginner-5-q2',
            question: '협력과 결합을 의미하는 신은?',
            options: ['육합', '현무', '구진', '백호'],
            correctAnswer: 0,
            explanation: '육합(六合)은 조화와 결합을 의미하여 협력에 좋습니다.',
          },
          {
            id: 'beginner-5-q3',
            question: '사기와 배신을 의미하는 흉신은?',
            options: ['직부', '등사', '현무', '태음'],
            correctAnswer: 2,
            explanation: '현무(玄武)는 도둑과 사기를 의미하는 강한 흉신입니다.',
          },
        ],
      },
    },
    {
      id: 'beginner-6',
      title: '종합 실습: 첫 번째 국(局) 해석',
      type: 'practice',
      duration: 60,
      description: '실제 날짜와 시간으로 귀문둔갑 국을 해석해봅니다',
      keyPoints: [
        '국 세우기 과정',
        '9궁-9성-8문-8신 종합 판독',
        '길흉 판단 기준',
        '실용적 조언 도출',
      ],
      content: `# 첫 번째 국(局) 해석 실습

## 학습 목표

이제까지 배운 9궁, 9성, 8문, 8신을 종합하여 실제 귀문둔갑 국을 해석해봅니다.

## 실습 과제

**시나리오**:
- 날짜: 2024년 1월 15일
- 시간: 오전 10시
- 목적: 새로운 사업 파트너와 첫 미팅

### 단계 1: 국 확인

앱에서 해당 날짜/시간의 국을 조회합니다.

### 단계 2: 각 궁 분석

각 궁(1-9궁)에 배치된 요소를 확인합니다:
- 어느 궁에 생문이 있는가?
- 어느 궁에 천영성이 있는가?
- 어느 궁에 직부가 있는가?

### 단계 3: 길한 방향 찾기

다음 조합을 찾아봅니다:
1. 생문 + 천보성 + 육합 = 최고 길조
2. 개문 + 천영성 + 직부 = 대길
3. 휴문 + 천심성 + 태음 = 소길

### 단계 4: 피할 방향 확인

다음 조합은 피합니다:
1. 사문 + 천예성 + 현무 = 최악
2. 두문 + 천금성 + 백호 = 대흉
3. 상문 + 천주성 + 구진 = 흉

### 단계 5: 결론 도출

- 최적 방향: [남쪽/북쪽/동쪽/서쪽]
- 이유: [생문 + 천보성 배치]
- 조언: 해당 방향의 장소에서 미팅 진행

## 자가 평가 체크리스트

- [ ] 9궁의 배치를 이해했다
- [ ] 각 궁에 배치된 9성을 확인했다
- [ ] 8문의 위치를 파악했다
- [ ] 8신의 역할을 고려했다
- [ ] 종합적인 판단을 내렸다

## 추가 연습

다음 상황들도 직접 분석해보세요:

1. 중요한 시험 (날짜: 2024-03-15)
2. 이사 날짜 선택 (2024-05-20)
3. 결혼식 날짜 (2024-06-08)

> 💡 **팁**: 처음에는 생문과 개문만 찾아도 충분합니다. 점차 세밀하게 분석하세요.
`,
      practiceData: {
        scenario: '2024년 1월 15일 오전 10시, 새로운 사업 파트너 미팅',
        date: '2024-01-15',
        time: '10:00',
        expectedResult:
          '생문이 있는 방향 또는 개문이 있는 방향을 선택. 가능하면 천보성이나 천영성이 함께 있는 궁의 방향으로 이동.',
        hints: [
          '먼저 생문의 위치를 확인하세요',
          '생문이 있는 궁에 어떤 별이 있는지 확인하세요',
          '해당 방향에 흉신이 없는지 확인하세요',
          '시간대도 고려하세요 (오전 10시는 개문 시간)',
        ],
      },
    },
  ],
};

// 중급 코스
const intermediateCourse: Course = {
  id: 'intermediate',
  level: 'intermediate',
  title: '귀문둔갑 심화',
  description: '복잡한 국 해석과 응용 기법을 학습합니다',
  icon: '🌿',
  estimatedHours: 12,
  prerequisites: ['beginner'],
  lessons: [
    {
      id: 'intermediate-1',
      title: '음둔/양둔 구분법',
      type: 'theory',
      duration: 60,
      description: '계절에 따른 음둔과 양둔의 차이를 배웁니다',
      keyPoints: [
        '동지와 하지의 기준',
        '음둔 18국과 양둔 18국',
        '계절별 적용 방법',
        '음양 전환 시점',
      ],
      content: `# 음둔(陰遁)과 양둔(陽遁)

## 음양둔의 개념

귀문둔갑은 계절에 따라 **음둔**과 **양둔** 두 가지 방식으로 나뉩니다.

### 양둔 기간
- **시작**: 동지(冬至) 다음 날
- **종료**: 하지(夏至) 당일
- **특징**: 양기가 상승하는 시기
- **국**: 양둔 1국 ~ 양둔 9국

### 음둔 기간
- **시작**: 하지 다음 날
- **종료**: 동지 당일
- **특징**: 음기가 상승하는 시기
- **국**: 음둔 1국 ~ 음둔 9국

## 음양둔의 차이점

| 구분 | 양둔 | 음둔 |
|------|------|------|
| 기간 | 동지~하지 | 하지~동지 |
| 방향 | 순행 (1→2→3) | 역행 (9→8→7) |
| 기운 | 확장, 성장 | 수렴, 정리 |
| 활동 | 적극적 | 신중함 |

## 음양둔 판별법

### 방법 1: 날짜 확인
```typescript
// 2024년 기준
if (date >= '2023-12-22' && date <= '2024-06-21') {
  return '양둔';
} else {
  return '음둔';
}
```

### 방법 2: 절기 활용
- 동지 후 → 양둔 시작
- 하지 후 → 음둔 시작

## 실전 활용

### 양둔 시기 전략
- ✅ 새로운 사업 시작
- ✅ 확장과 성장
- ✅ 대외적 활동
- ✅ 공격적 투자

### 음둔 시기 전략
- ✅ 내실 다지기
- ✅ 정리와 마무리
- ✅ 공부와 수양
- ✅ 보수적 운영

> 💡 **핵심**: 음양둔을 잘못 적용하면 전혀 다른 결과가 나옵니다!

## 연습 문제

1. 2024년 7월 15일은 음둔인가 양둔인가?
2. 새로운 사업을 시작하기 좋은 시기는?
3. 음둔 시기에 적합한 활동은?
`,
      quiz: {
        passingScore: 80,
        questions: [
          {
            id: 'intermediate-1-q1',
            question: '양둔이 시작되는 시점은?',
            options: [
              '동지 당일',
              '동지 다음 날',
              '하지 당일',
              '하지 다음 날',
            ],
            correctAnswer: 1,
            explanation: '양둔은 동지 다음 날부터 시작됩니다.',
          },
          {
            id: 'intermediate-1-q2',
            question: '음둔 시기에 가장 적합한 활동은?',
            options: [
              '공격적 투자',
              '사업 확장',
              '내실 다지기',
              '신규 진출',
            ],
            correctAnswer: 2,
            explanation: '음둔은 수렴과 정리의 시기로 내실을 다지기에 좋습니다.',
          },
        ],
      },
    },
    // 추가 중급 레슨들...
  ],
};

// 고급 코스
const advancedCourse: Course = {
  id: 'advanced',
  level: 'advanced',
  title: '귀문둔갑 마스터',
  description: '전문가 수준의 해석 능력을 갖춥니다',
  icon: '🌳',
  estimatedHours: 20,
  prerequisites: ['beginner', 'intermediate'],
  lessons: [
    {
      id: 'advanced-1',
      title: '복잡한 국 종합 해석',
      type: 'case-study',
      duration: 90,
      description: '여러 요소가 얽힌 복잡한 국을 해석하는 방법',
      keyPoints: [
        '길흉이 혼재된 국 판단',
        '우선순위 결정 기준',
        '상황별 가중치 적용',
        '최종 결정 방법론',
      ],
      content: `# 복잡한 국 종합 해석

## 고급 해석의 필요성

실제 귀문둔갑 국에서는 길성과 흉성, 길문과 흉문이 섞여 있어
단순한 판단이 어려운 경우가 많습니다.

## 해석 우선순위

### 레벨 1: 핵심 요소 (가중치 40%)
1. **문(門)**: 가장 중요 - 행동의 결과
2. **성(星)**: 두 번째 - 하늘의 기운
3. **신(神)**: 세 번째 - 환경 상태

### 레벨 2: 보조 요소 (가중치 30%)
- 궁의 위치 (방위)
- 시간대
- 계절 (음둔/양둔)

### 레벨 3: 심화 요소 (가중치 30%)
- 천지반 관계
- 공망(空亡) 여부
- 암간(暗干) 배치

## 혼합 국 판단 사례

### 사례 1: 길문 + 흉성
- **상황**: 생문 + 천예성
- **해석**: 생문의 길한 기운이 천예성의 흉함을 완화
- **결론**: 70% 긍정적, 건강만 주의

### 사례 2: 흉문 + 길성
- **상황**: 사문 + 천영성
- **해석**: 사문의 강한 흉함이 우선
- **결론**: 30% 긍정적, 피하는 것이 좋음

## 가중치 계산 공식

\`\`\`
최종 길흉 점수 = (문 점수 × 0.4) + (성 점수 × 0.3) + (신 점수 × 0.3)

점수 범위:
- 80~100: 매우 길
- 60~79: 길
- 40~59: 중립
- 20~39: 흉
- 0~19: 대흉
\`\`\`

## 실전 예제

**국 상황**:
- 방위: 남쪽 (9궁)
- 문: 경문 (소길)
- 성: 천충성 (중성)
- 신: 직부 (대길)

**계산**:
- 문 점수: 70 × 0.4 = 28
- 성 점수: 50 × 0.3 = 15
- 신 점수: 90 × 0.3 = 27
- **합계: 70점 → 길**

## 상황별 특수 고려사항

### 사업/투자
- 문과 성에 높은 가중치 (50:50)
- 신은 보조 참고 (20%)

### 건강/치료
- 성에 최고 가중치 (60%)
- 문 30%, 신 10%

### 인간관계
- 신에 높은 가중치 (50%)
- 문 30%, 성 20%

> 💡 **마스터 팁**: 경험이 쌓이면 직관적으로 판단할 수 있게 됩니다.

## 고급 연습 문제

다음 국을 종합 해석하세요:

1. 생문 + 천임성 + 백호 (동쪽)
2. 개문 + 천영성 + 현무 (서쪽)
3. 사문 + 천보성 + 육합 (남쪽)

각 경우에 대해:
- 점수를 계산하고
- 길흉을 판단하고
- 실행 여부를 결정하세요
`,
      quiz: {
        passingScore: 85,
        questions: [
          {
            id: 'advanced-1-q1',
            question: '귀문둔갑 해석에서 가장 중요한 요소는?',
            options: ['성(星)', '문(門)', '신(神)', '궁(宮)'],
            correctAnswer: 1,
            explanation: '문(門)이 가장 중요하며, 행동의 직접적인 결과를 나타냅니다.',
          },
          {
            id: 'advanced-1-q2',
            question: '생문 + 천예성의 조합은 어떻게 해석되는가?',
            options: [
              '완전 길조',
              '생문이 흉함을 완화',
              '완전 흉조',
              '중립',
            ],
            correctAnswer: 1,
            explanation: '생문의 강한 길함이 천예성의 흉함을 어느 정도 완화시킵니다.',
          },
        ],
      },
    },
    // 추가 고급 레슨들...
  ],
};

// 전체 코스 목록
export const allCourses: Course[] = [
  beginnerCourse,
  intermediateCourse,
  advancedCourse,
];

// 코스 ID로 코스 찾기
export function getCourseById(id: string): Course | undefined {
  return allCourses.find((course) => course.id === id);
}

// 레벨별 코스 가져오기
export function getCoursesByLevel(level: CourseLevel): Course[] {
  return allCourses.filter((course) => course.level === level);
}

// 레슨 ID로 레슨 찾기
export function getLessonById(lessonId: string): {
  course: Course;
  lesson: Lesson;
} | null {
  for (const course of allCourses) {
    const lesson = course.lessons.find((l) => l.id === lessonId);
    if (lesson) {
      return { course, lesson };
    }
  }
  return null;
}

// 사용자 진행률 타입
export interface UserProgress {
  userId: string;
  courseId: string;
  completedLessons: string[];
  quizScores: Record<string, number>; // lessonId → score
  lastAccessedLessonId?: string;
  completedAt?: string;
}

// 진행률 계산
export function calculateProgress(
  courseId: string,
  completedLessons: string[]
): number {
  const course = getCourseById(courseId);
  if (!course) return 0;

  const totalLessons = course.lessons.length;
  const completed = completedLessons.filter((lessonId) =>
    course.lessons.some((l) => l.id === lessonId)
  ).length;

  return Math.round((completed / totalLessons) * 100);
}
