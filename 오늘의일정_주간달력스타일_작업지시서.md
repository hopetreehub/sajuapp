# 오늘의 일정 주간달력 스타일 변경 작업지시서

## 📋 작업 개요
- **작업일**: 2025-08-28
- **담당자**: Claude Code
- **목표**: DayViewEnhanced의 오늘의 일정을 주간달력처럼 시간 칸이 표시되는 형태로 변경

## 🎯 현재 상태 vs 목표 상태

### 현재 상태 (리스트 형태)
```
📅 오늘의 일정 (3개)
├── 09:00 - 팀 미팅
├── 14:00 - 고객 상담  
└── 16:00 - 프로젝트 리뷰
```

### 목표 상태 (주간달력 스타일)
```
📅 오늘의 일정
┌─────┬────────────────────────────────┐
│09:00│ 팀 미팅                        │
├─────┼────────────────────────────────┤
│10:00│                                │
├─────┼────────────────────────────────┤
│11:00│                                │
├─────┼────────────────────────────────┤
│12:00│                                │
├─────┼────────────────────────────────┤
│13:00│                                │
├─────┼────────────────────────────────┤
│14:00│ 고객 상담                      │
├─────┼────────────────────────────────┤
│15:00│                                │
├─────┼────────────────────────────────┤
│16:00│ 프로젝트 리뷰                  │
├─────┼────────────────────────────────┤
│17:00│                                │
├─────┼────────────────────────────────┤
│18:00│                                │
└─────┴────────────────────────────────┘
```

## 🔧 기술적 구현 계획

### 1. UI 레이아웃 설계

#### A. 시간 그리드 구조
```tsx
<div className="schedule-grid">
  {HOURS.map(hour => (
    <div key={hour} className="time-slot">
      <div className="time-label">{format(hour, 'HH:mm')}</div>
      <div className="event-area">
        {/* 해당 시간의 이벤트들 */}
      </div>
    </div>
  ))}
</div>
```

#### B. CSS 그리드 시스템
```css
.schedule-grid {
  display: grid;
  grid-template-columns: 60px 1fr;
  border: 1px solid theme(colors.gray.200);
  border-radius: 8px;
  overflow: hidden;
}

.time-slot {
  display: contents;
}

.time-label {
  padding: 12px 8px;
  background: theme(colors.gray.50);
  border-bottom: 1px solid theme(colors.gray.200);
  text-align: center;
  font-size: 12px;
  font-weight: 500;
}

.event-area {
  padding: 8px 12px;
  border-bottom: 1px solid theme(colors.gray.200);
  min-height: 48px;
  position: relative;
}
```

### 2. 이벤트 배치 로직

#### A. 시간별 이벤트 분류
```tsx
const getEventsForHour = (hour: number, events: CalendarEvent[]) => {
  return events.filter(event => {
    const eventHour = new Date(event.start_time).getHours();
    const eventEndHour = new Date(event.end_time).getHours();
    return hour >= eventHour && hour < eventEndHour;
  });
};
```

#### B. 이벤트 지속시간 계산
```tsx
const getEventDuration = (event: CalendarEvent) => {
  const start = new Date(event.start_time);
  const end = new Date(event.end_time);
  const startHour = start.getHours();
  const endHour = end.getHours();
  const startMinute = start.getMinutes();
  const endMinute = end.getMinutes();
  
  return {
    startHour,
    endHour,
    duration: (endHour - startHour) + (endMinute - startMinute) / 60
  };
};
```

### 3. 이벤트 블록 렌더링

#### A. 다중 시간 이벤트 처리
```tsx
const renderEventBlock = (event: CalendarEvent, startHour: number) => {
  const { duration } = getEventDuration(event);
  const isStart = new Date(event.start_time).getHours() === startHour;
  
  if (isStart) {
    return (
      <div 
        className="event-block"
        style={{
          gridRowSpan: Math.ceil(duration),
          backgroundColor: event.color || '#3b82f6',
        }}
      >
        <div className="event-title">{event.title}</div>
        <div className="event-time">
          {format(new Date(event.start_time), 'HH:mm')} - 
          {format(new Date(event.end_time), 'HH:mm')}
        </div>
      </div>
    );
  }
  
  return null; // 연속 시간의 경우 빈 공간
};
```

#### B. 이벤트 블록 스타일
```css
.event-block {
  background: linear-gradient(135deg, theme(colors.blue.500), theme(colors.blue.600));
  color: white;
  padding: 8px;
  border-radius: 6px;
  margin: 2px;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.event-block:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.event-title {
  font-weight: 600;
  font-size: 14px;
  line-height: 1.2;
  margin-bottom: 4px;
}

.event-time {
  font-size: 11px;
  opacity: 0.9;
}
```

## 🚀 구현 단계

### Phase 1: 기본 그리드 구조 (30분)
1. ✅ DayViewEnhanced.tsx에서 기존 일정 리스트 영역 식별
2. 🔄 시간 그리드 컴포넌트 생성
3. 🔄 9시-18시 시간 슬롯 렌더링
4. 🔄 기본 CSS 스타일 적용

### Phase 2: 이벤트 배치 시스템 (45분)
1. 🔄 시간별 이벤트 분류 로직 구현
2. 🔄 이벤트 지속시간 계산 함수
3. 🔄 그리드 내 이벤트 블록 배치
4. 🔄 겹치는 이벤트 처리

### Phase 3: 스타일링 및 인터랙션 (30분)
1. 🔄 이벤트 블록 디자인 완성
2. 🔄 hover 효과 및 클릭 이벤트
3. 🔄 다크모드 지원
4. 🔄 빈 시간 클릭으로 이벤트 생성

### Phase 4: 최적화 및 테스트 (15분)
1. 🔄 성능 최적화
2. 🔄 모바일 반응형 처리
3. 🔄 접근성 개선
4. 🔄 버그 수정 및 테스트

## 📝 코드 구조

### 파일 수정 목록
```
packages/web/src/components/Calendar/
├── DayViewEnhanced.tsx (주 수정 파일)
├── components/
│   └── ScheduleGrid.tsx (새 컴포넌트)
└── styles/
    └── schedule-grid.css (새 스타일 파일)
```

### 메인 컴포넌트 구조
```tsx
// DayViewEnhanced.tsx
const DayViewEnhanced = ({ events, onCreateEvent, onEditEvent }) => {
  return (
    <div className="day-view-enhanced">
      <div className="left-section">
        <div className="schedule-section">
          <h2>📅 오늘의 일정</h2>
          <ScheduleGrid 
            events={dayEvents}
            onEventClick={onEditEvent}
            onTimeSlotClick={onCreateEvent}
            hours={HOURS} // 9-18시
          />
        </div>
        
        <div className="todos-section">
          {/* 기존 할일 섹션 */}
        </div>
      </div>
      
      <div className="right-section">
        {/* 기존 운세 위젯 */}
      </div>
    </div>
  );
};
```

## 🎨 디자인 가이드라인

### 1. 색상 시스템
```scss
// 라이트 모드
$grid-border: #e5e7eb;
$time-bg: #f9fafb;
$time-text: #6b7280;
$event-primary: #3b82f6;
$event-secondary: #8b5cf6;

// 다크 모드  
$grid-border-dark: #374151;
$time-bg-dark: #1f2937;
$time-text-dark: #9ca3af;
$event-primary-dark: #60a5fa;
$event-secondary-dark: #a78bfa;
```

### 2. 타이포그래피
```scss
$time-font-size: 12px;
$time-font-weight: 500;
$event-title-size: 14px;
$event-title-weight: 600;
$event-time-size: 11px;
```

### 3. 간격 및 크기
```scss
$time-column-width: 60px;
$slot-height: 48px;
$event-padding: 8px;
$event-margin: 2px;
$grid-border-radius: 8px;
```

## 🔍 상세 기능 명세

### 1. 시간 슬롯 기능
- **빈 슬롯 클릭**: 해당 시간에 새 이벤트 생성
- **현재 시간 표시**: 현재 시간에 인디케이터 표시
- **30분 단위 가이드라인**: 시각적 구분선

### 2. 이벤트 블록 기능
- **클릭**: 이벤트 수정 모달 열기
- **hover**: 상세 정보 툴팁 표시
- **드래그**: 시간 변경 (v2 기능)
- **리사이즈**: 지속시간 조정 (v2 기능)

### 3. 반응형 처리
```scss
// 모바일 (768px 이하)
@media (max-width: 768px) {
  $time-column-width: 50px;
  $slot-height: 40px;
  $event-title-size: 12px;
  $event-time-size: 10px;
}
```

## ✅ 완료 체크리스트

### 기본 기능
- [ ] 9시-18시 시간 그리드 생성
- [ ] 시간 라벨 표시
- [ ] 이벤트 블록 렌더링
- [ ] 이벤트 클릭 이벤트
- [ ] 빈 시간 클릭으로 이벤트 생성

### 고급 기능  
- [ ] 다중 시간 이벤트 처리
- [ ] 겹치는 이벤트 배치
- [ ] 현재 시간 인디케이터
- [ ] 30분 가이드라인
- [ ] 이벤트 툴팁

### 스타일링
- [ ] 라이트/다크 모드 지원
- [ ] 모바일 반응형
- [ ] hover/active 상태
- [ ] 애니메이션 효과
- [ ] 접근성 지원

### 테스트
- [ ] 다양한 시간대 이벤트 테스트
- [ ] 종일 이벤트 처리
- [ ] 겹치는 이벤트 테스트
- [ ] 모바일 터치 테스트
- [ ] 다크모드 전환 테스트

## 🚨 주의사항

### 1. 성능 고려사항
- 매 시간마다 이벤트 필터링하므로 `useMemo` 사용
- 이벤트가 많을 경우 가상화 고려
- 리렌더링 최소화

### 2. 접근성
```tsx
// ARIA 라벨 필수
<div 
  role="grid"
  aria-label="오늘의 일정"
>
  <div role="gridcell" tabIndex={0}>
    {/* 시간 슬롯 */}
  </div>
</div>
```

### 3. 에러 처리
- 잘못된 시간 데이터 처리
- 이벤트가 없는 경우 처리
- API 에러 시 fallback UI

## 📊 예상 개발 시간
- **총 예상 시간**: 2시간
- **Phase 1**: 30분 (기본 그리드)
- **Phase 2**: 45분 (이벤트 배치)  
- **Phase 3**: 30분 (스타일링)
- **Phase 4**: 15분 (최적화)

## 🎯 성공 기준
1. ✅ 9시-18시 시간 칸이 명확히 구분되어 표시
2. ✅ 이벤트가 올바른 시간에 배치
3. ✅ 다중 시간 이벤트가 여러 칸에 걸쳐 표시
4. ✅ 빈 시간 클릭으로 이벤트 생성 가능
5. ✅ 다크모드에서도 완벽하게 작동

---

*이 작업지시서는 오늘의 일정을 주간달력과 같은 직관적인 시간 그리드 형태로 변경하여 사용자 경험을 크게 향상시키는 것을 목표로 합니다.*