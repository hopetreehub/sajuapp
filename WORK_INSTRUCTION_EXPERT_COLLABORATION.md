# 🧠 전문가 협업 기반 사주 차트 개인화 해결 작업지시서

## 📌 현재 상황
- ✅ **사주 불일치 감지 문제 해결**: 데이터 전달 경로 수정 완료
- ❌ **핵심 문제 지속**: 여전히 모든 사람이 동일한 차트 패턴
- 🎯 **전문가 협업 필요**: 사주학 전문가 + 개발 전문가 + 데이터 분석 전문가

## 🔍 문제의 본질

### 현상 분석
```
사주 데이터 입력: 박준수(신해기해병오경인) ≠ 정비제(병진정유신미계사)
        ↓
사주 데이터 전달: ✅ 정상 (사주 불일치 문제 해결됨)
        ↓
차트 생성 결과: ❌ 동일 패턴 (나이만 다름)
```

### 근본 원인 가설
1. **UniversalSajuEngine의 구조적 한계**: 사주 데이터를 받아도 실질적으로 동일 패턴 생성
2. **사주학 이론 부재**: 정통 사주학의 길흉 판단 로직이 구현되지 않음
3. **개인차 생성 알고리즘 실패**: 복잡해 보이지만 실제로는 미미한 차이만 생성

## 🎯 전문가 협업 전략

### Phase 1: 사주학 전문가 분석 (30분)
**목표**: 현재 시스템을 사주학 관점에서 진단하고 정통 사주학 기반 해결책 제시

**전문가 임무**:
1. 현재 UniversalSajuEngine 코드 분석
2. 박준수/정비제 사주 팔자의 사주학적 차이점 분석
3. 정통 사주학 이론에 따른 운세 차트 생성 방법론 제시
4. 실제 사주학에서 두 사주가 어떻게 다른 운세를 가져야 하는지 명확한 가이드

### Phase 2: 개발 전문가 구현 (60분)
**목표**: 사주학 전문가의 가이드를 바탕으로 실제 개인화 시스템 구현

**전문가 임무**:
1. 사주학 이론을 코드로 구현
2. 대운/세운 시스템 정밀 구현
3. 십신론 기반 개인 특성 계산
4. 오행 상생상극 관계 알고리즘 구현

### Phase 3: 데이터 분석 전문가 검증 (30분)
**목표**: 생성된 차트의 개인차와 정확성을 정량적으로 검증

**전문가 임무**:
1. 박준수/정비제 차트 차이점 정량 분석
2. 차트 패턴의 유의미한 차이 검증
3. 사주학적 정확성 vs 수학적 차이 검증
4. 개선점 도출 및 최적화 방안 제시

## 🛠 MCP 도구 활용 계획

### 1. 웹 검색을 통한 사주학 이론 연구
- 정통 사주학 대운/세운 계산법
- 십신론과 오행 상생상극 이론
- 실제 사주 명리학자들의 차트 해석 방법

### 2. 이미지 생성을 통한 시각화
- 현재 문제 상황 다이어그램
- 목표 시스템 구조도
- 사주학 이론 시각화

### 3. 코드 분석 및 생성
- UniversalSajuEngine 상세 분석
- 정통 사주학 알고리즘 구현
- 테스트 및 검증 코드 생성

## 📋 단계별 실행 계획

### Step 1: 사주학 전문가 에이전트 실행
```
임무: 현재 시스템의 사주학적 문제점 진단 및 해결 방안 제시
- UniversalSajuEngine.ts 분석
- 박준수(신해기해병오경인) vs 정비제(병진정유신미계사) 사주학적 차이
- 정통 사주학 기반 차트 생성 방법론
- 구체적인 구현 가이드라인
```

### Step 2: 개발 전문가 에이전트 실행
```
임무: 사주학 전문가 가이드 기반 실제 시스템 구현
- AuthenticSajuCalculator 클래스 구현
- 대운/세운/십신 시스템 코드화
- 기존 시스템과 통합
- 테스트 및 검증
```

### Step 3: 데이터 분석 전문가 에이전트 실행
```
임무: 구현된 시스템의 정량적 검증 및 최적화
- 차트 차이점 수학적 분석
- 사주학적 정확성 검증
- 성능 최적화
- 최종 검수 및 개선 방안
```

## 🎯 성공 기준

### 1. 사주학적 정확성
- [ ] 박준수와 정비제의 차트가 사주학 이론에 따라 명확히 구분됨
- [ ] 대운/세운 변화가 실제 차트에 반영됨
- [ ] 십신론에 따른 개인 특성이 차트에 나타남

### 2. 시스템 안정성
- [ ] 동일한 사주 입력 → 항상 동일한 차트 출력
- [ ] 다른 사주 입력 → 명확히 다른 차트 출력
- [ ] 기존 기능 호환성 유지

### 3. 검증 가능성
- [ ] 브라우저 콘솔에서 실시간 검증 가능
- [ ] 사주학 전문가가 검토할 수 있는 상세 로그
- [ ] 정량적 차이 측정 도구

## ⚠️ 핵심 요구사항

1. **사주학 이론 준수**: 임의의 패턴이 아닌 정통 사주학 기반
2. **완전한 개인화**: "나이만 다른" 차트가 아닌 근본적으로 다른 패턴
3. **검증 가능성**: 전문가가 확인할 수 있는 투명한 계산 과정
4. **시스템 통합**: 기존 시스템과의 원활한 통합

## 🚀 전문가 에이전트 실행 순서

1. **사주학 전문가** → 이론적 기반 제공
2. **개발 전문가** → 실제 구현
3. **데이터 분석 전문가** → 검증 및 최적화

각 단계별로 에이전트 완료 후 다음 단계 진행

---
**작성일**: 2024-12-18
**작성자**: Claude Code Assistant
**상태**: 전문가 협업 대기 중
**우선순위**: 🔴 최고 (근본 해결 필수)