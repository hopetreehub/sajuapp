# 사주 레이더차트 시스템 구현 작업지시서

## 📋 프로젝트 개요
운명나침반 앱에 주문차트.pdf 데이터를 활용한 사주 분석 레이더차트 시스템을 구현합니다.

## 🎯 구현 목표
1. **대항목 카테고리** → 네비게이션 메뉴 구현
2. **중항목** → 레이더차트 제목으로 활용  
3. **세부항목** → 레이더차트 둘레 데이터 포인트로 구현

## 📊 데이터 구조 분석 결과

### 1. 대항목 (11개) - 메뉴 구조
```typescript
interface MajorCategory {
  id: string
  name: string
  icon: string
  description: string
}

const majorCategories: MajorCategory[] = [
  { id: 'jubon', name: '주본', icon: '🎯', description: '기본 성향 분석' },
  { id: 'juun', name: '주운', icon: '🍀', description: '운세 분석' },
  { id: 'noe', name: '뇌', icon: '🧠', description: '사고력 분석' },
  { id: 'jugeon', name: '주건', icon: '💪', description: '건강 분석' },
  { id: 'juyeon', name: '주연', icon: '🤝', description: '인간관계 분석' },
  { id: 'jujae', name: '주재', icon: '🎨', description: '재능 분석' },
  { id: 'jueop', name: '주업', icon: '💼', description: '직업 분석' },
  { id: 'jumul', name: '주물', icon: '💰', description: '재물 분석' },
  { id: 'jusaeng', name: '주생', icon: '🌱', description: '생활 분석' },
  { id: 'juneung', name: '주능', icon: '⚡', description: '능력 분석' },
  { id: 'juhyung', name: '주흉', icon: '⚠️', description: '위험 요소 분석' }
]
```

### 2. 중항목별 세부항목 매핑
각 대항목은 3-15개의 중항목을 포함하며, 각 중항목은 10-50개의 세부항목을 가집니다.

## 🏗️ 구현 계획

### Phase 1: 데이터 모델링 및 변환
**작업 기간**: 1일

#### 1.1 데이터 타입 정의
```typescript
// src/types/saju.ts
interface SajuDataPoint {
  id: string
  name: string
  value: number // 0-10 점수
  month: number // 5-12월
}

interface RadarChartData {
  categoryId: string
  subcategoryId: string
  title: string
  dataPoints: SajuDataPoint[]
  maxValue: number
}

interface SajuCategory {
  id: string
  name: string
  icon: string
  description: string
  subcategories: SajuSubcategory[]
}

interface SajuSubcategory {
  id: string
  name: string
  items: string[]
}
```

#### 1.2 PDF 데이터 변환 스크립트
```typescript
// src/data/sajuChartData.ts
export const sajuChartData: SajuCategory[] = [
  {
    id: 'jubon',
    name: '주본',
    icon: '🎯',
    description: '기본 성향 분석',
    subcategories: [
      {
        id: 'personality',
        name: '성격',
        items: ['적극성', '소극성', '외향성', '내향성', '감정기복', ...]
      },
      {
        id: 'temperament', 
        name: '기질',
        items: ['침착함', '급성', '꼼꼼함', '대범함', ...]
      },
      // ... 기타 중항목들
    ]
  },
  // ... 기타 대항목들
]
```

### Phase 2: UI 컴포넌트 구현
**작업 기간**: 2일

#### 2.1 사주 메뉴 네비게이션
```typescript
// src/components/Saju/SajuNavigation.tsx
interface SajuNavigationProps {
  categories: SajuCategory[]
  activeCategory: string
  onCategoryChange: (categoryId: string) => void
}

export default function SajuNavigation({ 
  categories, 
  activeCategory, 
  onCategoryChange 
}: SajuNavigationProps) {
  return (
    <nav className="saju-navigation">
      <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {categories.map(category => (
          <button
            key={category.id}
            className={`saju-category-btn ${
              activeCategory === category.id ? 'active' : ''
            }`}
            onClick={() => onCategoryChange(category.id)}
          >
            <span className="category-icon">{category.icon}</span>
            <span className="category-name">{category.name}</span>
            <span className="category-desc">{category.description}</span>
          </button>
        ))}
      </div>
    </nav>
  )
}
```

#### 2.2 레이더차트 컴포넌트
```typescript
// src/components/Saju/RadarChart.tsx
import { Radar } from 'react-chartjs-2'

interface RadarChartProps {
  data: RadarChartData
  width?: number
  height?: number
}

export default function RadarChart({ data, width = 400, height = 400 }: RadarChartProps) {
  const chartData = {
    labels: data.dataPoints.map(point => point.name),
    datasets: [{
      label: data.title,
      data: data.dataPoints.map(point => point.value),
      backgroundColor: 'rgba(139, 92, 246, 0.2)',
      borderColor: 'rgba(139, 92, 246, 1)',
      pointBackgroundColor: 'rgba(139, 92, 246, 1)',
      pointBorderColor: '#fff',
      pointHoverBackgroundColor: '#fff',
      pointHoverBorderColor: 'rgba(139, 92, 246, 1)'
    }]
  }

  const options = {
    scales: {
      r: {
        angleLines: { display: true },
        suggestedMin: 0,
        suggestedMax: data.maxValue,
        pointLabels: {
          font: { size: 12 },
          color: '#374151'
        }
      }
    },
    plugins: {
      legend: { display: true }
    }
  }

  return (
    <div className="radar-chart-container">
      <h3 className="chart-title">{data.title}</h3>
      <Radar data={chartData} options={options} width={width} height={height} />
    </div>
  )
}
```

#### 2.3 중항목 선택 탭
```typescript
// src/components/Saju/SubcategoryTabs.tsx
interface SubcategoryTabsProps {
  subcategories: SajuSubcategory[]
  activeSubcategory: string
  onSubcategoryChange: (subcategoryId: string) => void
}

export default function SubcategoryTabs({
  subcategories,
  activeSubcategory,
  onSubcategoryChange
}: SubcategoryTabsProps) {
  return (
    <div className="subcategory-tabs">
      <div className="flex overflow-x-auto gap-2">
        {subcategories.map(sub => (
          <button
            key={sub.id}
            className={`tab-button ${
              activeSubcategory === sub.id ? 'active' : ''
            }`}
            onClick={() => onSubcategoryChange(sub.id)}
          >
            {sub.name}
          </button>
        ))}
      </div>
    </div>
  )
}
```

### Phase 3: 메인 페이지 통합
**작업 기간**: 1일

#### 3.1 사주 분석 페이지
```typescript
// src/pages/SajuAnalysisPage.tsx
export default function SajuAnalysisPage() {
  const [activeCategory, setActiveCategory] = useState('jubon')
  const [activeSubcategory, setActiveSubcategory] = useState('')
  const [chartData, setChartData] = useState<RadarChartData | null>(null)
  
  const currentCategory = sajuChartData.find(cat => cat.id === activeCategory)
  
  useEffect(() => {
    if (currentCategory && currentCategory.subcategories.length > 0) {
      const firstSub = currentCategory.subcategories[0]
      setActiveSubcategory(firstSub.id)
    }
  }, [activeCategory, currentCategory])
  
  useEffect(() => {
    // 차트 데이터 생성 로직
    if (currentCategory && activeSubcategory) {
      const subcategory = currentCategory.subcategories.find(
        sub => sub.id === activeSubcategory
      )
      if (subcategory) {
        const radarData = generateRadarChartData(
          activeCategory,
          activeSubcategory,
          subcategory
        )
        setChartData(radarData)
      }
    }
  }, [activeCategory, activeSubcategory, currentCategory])

  return (
    <div className="saju-analysis-page">
      <div className="page-header">
        <h1 className="text-3xl font-bold">🔮 사주 분석</h1>
        <p className="text-gray-600">상세한 사주 운세 레이더차트 분석</p>
      </div>
      
      {/* 대항목 네비게이션 */}
      <SajuNavigation
        categories={sajuChartData}
        activeCategory={activeCategory}
        onCategoryChange={setActiveCategory}
      />
      
      {/* 중항목 탭 */}
      {currentCategory && (
        <SubcategoryTabs
          subcategories={currentCategory.subcategories}
          activeSubcategory={activeSubcategory}
          onSubcategoryChange={setActiveSubcategory}
        />
      )}
      
      {/* 레이더차트 */}
      {chartData && (
        <div className="chart-section">
          <RadarChart data={chartData} />
        </div>
      )}
    </div>
  )
}
```

### Phase 4: 라우팅 및 통합
**작업 기간**: 0.5일

#### 4.1 라우터 설정
```typescript
// src/App.tsx에 추가
import SajuAnalysisPage from './pages/SajuAnalysisPage'

// 라우트 추가
<Route path="/saju-analysis" element={<SajuAnalysisPage />} />
```

#### 4.2 헤더 메뉴 추가
```typescript
// src/components/Layout/Header.tsx 수정
const navItems = [
  { path: '/', label: '홈', icon: '🏠' },
  { path: '/dashboard', label: '대시보드', icon: '📊' },
  { path: '/calendar', label: '캘린더', icon: '📅' },
  { path: '/saju', label: '사주분석', icon: '📜' },
  { path: '/saju-analysis', label: '상세분석', icon: '🔮' }, // 새로 추가
  { path: '/compatibility', label: '궁합', icon: '💑' },
  { path: '/settings', label: '설정', icon: '⚙️' },
]
```

## 🛠️ 기술적 구현 세부사항

### 1. 필요한 라이브러리 설치
```bash
cd packages/web
npm install react-chartjs-2 chart.js
```

### 2. 차트 데이터 생성 로직
```typescript
// src/utils/sajuDataGenerator.ts
export function generateRadarChartData(
  categoryId: string,
  subcategoryId: string,
  subcategory: SajuSubcategory
): RadarChartData {
  // 실제 사주 분석 로직 구현
  // 임시로 랜덤 데이터 생성 (추후 실제 분석 로직으로 교체)
  const dataPoints = subcategory.items.map((item, index) => ({
    id: `${subcategoryId}_${index}`,
    name: item,
    value: Math.floor(Math.random() * 10) + 1,
    month: 5 + Math.floor(Math.random() * 8) // 5-12월
  }))
  
  return {
    categoryId,
    subcategoryId,
    title: subcategory.name,
    dataPoints,
    maxValue: 10
  }
}
```

### 3. 스타일링
```scss
// src/styles/saju.scss
.saju-analysis-page {
  .saju-navigation {
    .saju-category-btn {
      @apply p-4 rounded-xl border-2 border-gray-200 
             hover:border-purple-500 hover:bg-purple-50
             transition-all duration-200 text-center;
      
      &.active {
        @apply border-purple-500 bg-purple-100 
               text-purple-700 shadow-lg;
      }
      
      .category-icon {
        @apply text-3xl block mb-2;
      }
      
      .category-name {
        @apply font-bold text-lg block;
      }
      
      .category-desc {
        @apply text-sm text-gray-600 block mt-1;
      }
    }
  }
  
  .subcategory-tabs {
    .tab-button {
      @apply px-4 py-2 rounded-lg bg-gray-100 
             hover:bg-gray-200 transition-colors
             whitespace-nowrap;
      
      &.active {
        @apply bg-purple-500 text-white;
      }
    }
  }
  
  .radar-chart-container {
    @apply bg-white rounded-xl shadow-sm p-6
           border border-gray-200;
    
    .chart-title {
      @apply text-xl font-bold text-center mb-4
             text-gray-800;
    }
  }
}
```

## 📝 구현 체크리스트

### Phase 1 완료 기준
- [ ] 사주 데이터 타입 정의 완료
- [ ] PDF 데이터 변환 완료 (11개 대항목, 모든 중항목, 세부항목)
- [ ] 데이터 검증 및 테스트 완료

### Phase 2 완료 기준  
- [ ] SajuNavigation 컴포넌트 구현 완료
- [ ] RadarChart 컴포넌트 구현 완료
- [ ] SubcategoryTabs 컴포넌트 구현 완료
- [ ] 각 컴포넌트 단위 테스트 완료

### Phase 3 완료 기준
- [ ] SajuAnalysisPage 메인 페이지 구현 완료
- [ ] 컴포넌트 간 상태 관리 완료
- [ ] 차트 데이터 동적 생성 완료

### Phase 4 완료 기준
- [ ] 라우팅 설정 완료
- [ ] 헤더 메뉴 통합 완료
- [ ] 전체 시스템 통합 테스트 완료

## 🎯 최종 테스트 시나리오

1. **메뉴 네비게이션 테스트**
   - 11개 대항목 메뉴 정상 표시 확인
   - 각 메뉴 클릭 시 해당 카테고리로 전환 확인

2. **중항목 탭 테스트**
   - 대항목 선택 시 해당 중항목 탭 표시 확인
   - 중항목 탭 전환 시 레이더차트 업데이트 확인

3. **레이더차트 테스트**
   - 각 중항목별 세부항목이 차트 둘레에 정상 표시 확인
   - 차트 데이터 포인트 정상 렌더링 확인
   - 반응형 디자인 확인 (모바일/데스크톱)

4. **통합 테스트**
   - 사주 분석 페이지 → 다른 페이지 → 다시 사주 분석 페이지 이동 시 상태 유지 확인
   - 브라우저 새로고침 후 정상 동작 확인

## 📅 예상 작업 기간
**총 4.5일**
- Phase 1: 1일
- Phase 2: 2일  
- Phase 3: 1일
- Phase 4: 0.5일

## 🚀 배포 전 최종 확인사항

1. TypeScript 컴파일 에러 없음
2. ESLint 경고 해결
3. 모든 컴포넌트 정상 렌더링
4. Chart.js 레이더차트 정상 동작
5. 반응형 디자인 적용
6. 다크모드 지원
7. 접근성 고려사항 적용

---

*이 작업지시서는 PDF 분석 결과를 바탕으로 사주 레이더차트 시스템의 완전한 구현 가이드를 제공합니다.*