# 📋 사주 분석 네비게이션 플로우 개선 작업지시서

## 🎯 프로젝트 목표
- **순차적 차트 네비게이션** 시스템 구축으로 연속적인 분석 경험 제공
- **다크모드 가독성** 개선으로 모든 환경에서 선명한 차트 표시
- **사용자 데이터 영구 저장** 기능으로 상담용 다중 사용자 지원
- **깔끔한 디자인** 적용으로 그라데이션 제거 및 단순화

## 🗺️ 네비게이션 플로우 설계

### 1. 순차적 차트 네비게이션 시스템

#### 📊 차트 순서 정의
```typescript
// 차트 네비게이션 순서
const CHART_NAVIGATION_FLOW = [
  {
    path: '/saju',
    name: '6대 영역 분석',
    icon: '📊',
    description: '기본 사주 6개 영역 종합 분석'
  },
  {
    path: '/saju/detailed',
    name: '17대 운세 분석',
    icon: '🔮',
    description: '세부적인 17개 운세 영역 분석'
  },
  {
    path: '/saju/personality',
    name: '7대 성향 분석', 
    icon: '🧠',
    description: '개성과 성격 특성 7개 영역 분석'
  },
  {
    path: '/fortune',
    name: '오늘의 운세',
    icon: '🌟',
    description: '오늘의 전반적인 운세 정보'
  }
  // 향후 30개 차트까지 확장 예정
];
```

#### 🔄 네비게이션 컴포넌트 설계
```typescript
// ChartNavigation 공통 컴포넌트
interface ChartNavigationProps {
  currentPath: string;
  showPrevious?: boolean;
  showNext?: boolean;
  customPrevious?: { path: string; name: string };
  customNext?: { path: string; name: string };
}

// 자동 이전/다음 차트 감지 로직
const getCurrentChartIndex = (currentPath: string) => {
  return CHART_NAVIGATION_FLOW.findIndex(chart => chart.path === currentPath);
};

const getPreviousChart = (currentIndex: number) => {
  return currentIndex > 0 ? CHART_NAVIGATION_FLOW[currentIndex - 1] : null;
};

const getNextChart = (currentIndex: number) => {
  return currentIndex < CHART_NAVIGATION_FLOW.length - 1 
    ? CHART_NAVIGATION_FLOW[currentIndex + 1] 
    : null;
};
```

### 2. 메인 사주분석 페이지 개선

#### 📝 생년월일 + 이름 입력 시스템
```typescript
// 사용자 정보 저장 구조
interface UserProfile {
  id: string;                    // UUID로 고유 식별
  name: string;                  // 사용자 이름
  birthInfo: SajuBirthInfo;      // 생년월일시 정보
  createdAt: string;             // 생성일시
  lastAccessed: string;          // 마지막 접근일시
  analysisHistory: string[];     // 분석 히스토리
}

// LocalStorage 저장 구조
const USER_PROFILES_KEY = 'sajuapp-user-profiles';
const CURRENT_USER_KEY = 'sajuapp-current-user';

// 다중 사용자 관리
const userProfiles: UserProfile[] = JSON.parse(
  localStorage.getItem(USER_PROFILES_KEY) || '[]'
);
```

#### 🏠 메인페이지 플로우 개선
```
1. 사주분석 페이지 진입
2. 좌측: 사용자 선택/추가 패널
   - 기존 사용자 목록 (이름 + 생년월일)
   - 새 사용자 추가 버튼
   - 선택된 사용자 정보 표시
3. 우측: 첫 번째 차트 (오늘의 운세) 표시
4. 우측 화살표: 다음 차트로 이동 (6대→17대→7대→...)
```

### 3. 다크모드 차트 가독성 개선

#### 🌙 다크모드 색상 팔레트 강화
```typescript
// 기존 색상 대비 밝기 증가
const DARK_MODE_ENHANCEMENTS = {
  // 차트 배경 및 격자
  chartBackground: 'rgba(139, 92, 246, 0.15)',  // 기존 0.1 → 0.15
  gridColor: 'rgba(156, 163, 175, 0.4)',        // 기존 0.2 → 0.4
  angleLineColor: 'rgba(156, 163, 175, 0.3)',   // 기존 0.2 → 0.3
  
  // 포인트 라벨 및 틱
  pointLabelColor: '#f1f5f9',                    // 더 밝은 회색
  tickColor: '#cbd5e1',                          // 더 선명한 회색
  
  // 차트 포인트 및 라인
  pointColor: '#a78bfa',                         // 더 밝은 보라
  lineColor: '#8b5cf6',                          // 더 선명한 보라
  
  // 카드 및 배경
  cardBackground: 'rgba(55, 65, 81, 0.8)',       // 더 진한 배경
  cardBorder: 'rgba(156, 163, 175, 0.3)'         // 더 선명한 테두리
};
```

#### 📊 차트별 다크모드 최적화
```typescript
// 레이더 차트 다크모드 전용 옵션
const getDarkModeChartOptions = () => ({
  ...CHART_DESIGN_SYSTEM.CHART_OPTIONS,
  scales: {
    r: {
      ...CHART_DESIGN_SYSTEM.CHART_OPTIONS.scales.r,
      grid: {
        color: DARK_MODE_ENHANCEMENTS.gridColor,
        lineWidth: 2  // 기존 1 → 2로 두께 증가
      },
      angleLines: {
        color: DARK_MODE_ENHANCEMENTS.angleLineColor,
        lineWidth: 2
      },
      pointLabels: {
        ...CHART_DESIGN_SYSTEM.CHART_OPTIONS.scales.r.pointLabels,
        color: DARK_MODE_ENHANCEMENTS.pointLabelColor,
        font: { 
          size: 13,      // 기존 11 → 13
          weight: 700    // 기존 600 → 700
        }
      },
      ticks: {
        ...CHART_DESIGN_SYSTEM.CHART_OPTIONS.scales.r.ticks,
        color: DARK_MODE_ENHANCEMENTS.tickColor,
        font: { 
          size: 11,      // 기존 10 → 11
          weight: 600    // 더 굵은 폰트
        }
      }
    }
  }
});
```

### 4. 그라데이션 제거 및 단색 디자인

#### 🎨 단색 색상 팔레트 적용
```typescript
// 그라데이션 → 단색 변경
const SOLID_COLOR_PALETTE = {
  // 기존 그라데이션 제거
  buttons: {
    sixArea: 'bg-purple-600 hover:bg-purple-700',      // 기존: gradient
    seventeen: 'bg-blue-600 hover:bg-blue-700',        // 기존: gradient  
    personality: 'bg-green-600 hover:bg-green-700',    // 기존: gradient
    navigation: 'bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600'
  },
  
  // 카드 배경 단색화
  cards: {
    primary: 'bg-white dark:bg-gray-800',
    secondary: 'bg-gray-50 dark:bg-gray-700',
    accent: 'bg-purple-50 dark:bg-purple-900/20'
  },
  
  // 페이지 배경 단순화
  pageBackground: 'bg-gray-50 dark:bg-gray-900',  // 기존: gradient
  
  // 헤더 제목 단색화
  headerTitle: 'text-purple-600 dark:text-purple-400'  // 기존: gradient
};
```

### 5. 상담용 다중 사용자 시스템

#### 👥 사용자 관리 UI
```typescript
// 사용자 선택 패널
interface UserSelectionPanelProps {
  users: UserProfile[];
  currentUser: UserProfile | null;
  onUserSelect: (user: UserProfile) => void;
  onUserAdd: () => void;
  onUserEdit: (user: UserProfile) => void;
  onUserDelete: (userId: string) => void;
}

// 사용자 카드 컴포넌트
const UserCard = ({ user, isSelected, onSelect, onEdit, onDelete }) => (
  <div className={`
    p-4 rounded-lg border cursor-pointer transition-all
    ${isSelected 
      ? 'border-purple-500 bg-purple-50 dark:bg-purple-900/20' 
      : 'border-gray-200 dark:border-gray-600 hover:border-gray-300'
    }
  `}>
    <h4 className="font-semibold">{user.name}</h4>
    <p className="text-sm text-gray-600">
      {formatBirthDate(user.birthInfo)}
    </p>
    <div className="flex justify-between items-center mt-2">
      <span className="text-xs text-gray-500">
        마지막 접근: {formatDate(user.lastAccessed)}
      </span>
      <div className="flex gap-2">
        <button onClick={() => onEdit(user)}>수정</button>
        <button onClick={() => onDelete(user.id)}>삭제</button>
      </div>
    </div>
  </div>
);
```

## 🛠️ 구현 우선순위

### Phase 1: 네비게이션 시스템 (즉시 구현)
1. **ChartNavigation 공통 컴포넌트** 생성
2. **순차적 이동 로직** 구현 (이전/다음 버튼)
3. **모든 분석 페이지에 네비게이션** 적용

### Phase 2: 다크모드 개선 (2차 구현)
1. **차트 색상 밝기 조정** (격자, 라벨, 포인트)
2. **폰트 굵기 및 크기 증가**
3. **배경 대비 강화**

### Phase 3: 사용자 데이터 시스템 (3차 구현)
1. **다중 사용자 저장/로드** 기능
2. **사용자 선택 패널** UI 구현
3. **상담 모드** 사용자 관리 시스템

### Phase 4: 디자인 정리 (4차 구현)
1. **모든 그라데이션 제거**
2. **단색 버튼 및 배경** 적용
3. **전체적인 디자인 통일**

## 📏 구현 기준

### UI/UX 일관성 체크리스트
- [ ] 모든 차트 페이지에서 이전/다음 네비게이션 작동
- [ ] 다크모드에서 모든 텍스트와 차트 요소 선명하게 표시
- [ ] 사용자 데이터 영구 저장 및 복원 기능
- [ ] 그라데이션 완전 제거, 단색 디자인 적용
- [ ] 상담 시나리오에서 여러 고객 데이터 관리 가능

### 성능 및 사용성 기준
- [ ] 페이지 간 이동 시간 < 0.5초
- [ ] 사용자 데이터 로딩 시간 < 0.3초
- [ ] 다크모드 토글 시 즉시 반영
- [ ] 모바일에서도 네비게이션 버튼 쉽게 접근 가능

## 🎯 최종 목표

**연속적이고 직관적인 사주 분석 경험을 제공하여, 사용자가 모든 차트를 순차적으로 탐색할 수 있고, 상담사가 여러 고객의 데이터를 효율적으로 관리할 수 있는 시스템 구축**

---

*이 작업지시서는 사주 분석 시스템의 사용성과 접근성을 대폭 향상시키기 위한 핵심 개선사항들을 포함합니다.*